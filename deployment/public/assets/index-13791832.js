var e=Object.defineProperty,t=(t,r,n)=>(((t,r,n)=>{r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n})(t,"symbol"!=typeof r?r+"":r,n),n);function r(e,t){for(var r=0;r<t.length;r++){const n=t[r];if("string"!=typeof n&&!Array.isArray(n))for(const t in n)if("default"!==t&&!(t in e)){const r=Object.getOwnPropertyDescriptor(n,t);r&&Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:()=>n[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var s={exports:{}},a={},o={exports:{}},l={},c=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),g=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.iterator;var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function T(e,t,r){this.props=e,this.context=t,this.refs=E,this.updater=r||x}function k(){}function A(e,t,r){this.props=e,this.context=t,this.refs=E,this.updater=r||x}T.prototype.isReactComponent={},T.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},T.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},k.prototype=T.prototype;var _=A.prototype=new k;_.constructor=A,S(_,T.prototype),_.isPureReactComponent=!0;var C=Array.isArray,P=Object.prototype.hasOwnProperty,D={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var n,i={},s=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)P.call(t,n)&&!R.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(1===o)i.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps)void 0===i[n]&&(i[n]=o[n]);return{$$typeof:c,type:e,key:s,ref:a,props:i,_owner:D.current}}function O(e){return"object"==typeof e&&null!==e&&e.$$typeof===c}var N=/\/+/g;function j(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function L(e,t,r,n,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var a=!1;if(null===e)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case c:case u:a=!0}}if(a)return i=i(a=e),e=""===n?"."+j(a,0):n,C(i)?(r="",null!=e&&(r=e.replace(N,"$&/")+"/"),L(i,t,r,"",(function(e){return e}))):null!=i&&(O(i)&&(i=function(e,t){return{$$typeof:c,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(N,"$&/")+"/")+e)),t.push(i)),1;if(a=0,n=""===n?".":n+":",C(e))for(var o=0;o<e.length;o++){var l=n+j(s=e[o],o);a+=L(s,t,r,l,i)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=w&&e[w]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),o=0;!(s=e.next()).done;)a+=L(s=s.value,t,r,l=n+j(s,o++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function M(e,t,r){if(null==e)return e;var n=[],i=0;return L(e,n,"","",(function(e){return t.call(r,e,i++)})),n}function F(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var U={current:null},B={transition:null},$={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:B,ReactCurrentOwner:D};function z(){throw Error("act(...) is not supported in production builds of React.")}l.Children={map:M,forEach:function(e,t,r){M(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return M(e,(function(){t++})),t},toArray:function(e){return M(e,(function(e){return e}))||[]},only:function(e){if(!O(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},l.Component=T,l.Fragment=d,l.Profiler=f,l.PureComponent=A,l.StrictMode=h,l.Suspense=y,l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,l.act=z,l.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=S({},e.props),i=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=D.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)P.call(t,l)&&!R.hasOwnProperty(l)&&(n[l]=void 0===t[l]&&void 0!==o?o[l]:t[l])}var l=arguments.length-2;if(1===l)n.children=r;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:c,type:e.type,key:i,ref:s,props:n,_owner:a}},l.createContext=function(e){return(e={$$typeof:g,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:p,_context:e},e.Consumer=e},l.createElement=I,l.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},l.createRef=function(){return{current:null}},l.forwardRef=function(e){return{$$typeof:m,render:e}},l.isValidElement=O,l.lazy=function(e){return{$$typeof:b,_payload:{_status:-1,_result:e},_init:F}},l.memo=function(e,t){return{$$typeof:v,type:e,compare:void 0===t?null:t}},l.startTransition=function(e){var t=B.transition;B.transition={};try{e()}finally{B.transition=t}},l.unstable_act=z,l.useCallback=function(e,t){return U.current.useCallback(e,t)},l.useContext=function(e){return U.current.useContext(e)},l.useDebugValue=function(){},l.useDeferredValue=function(e){return U.current.useDeferredValue(e)},l.useEffect=function(e,t){return U.current.useEffect(e,t)},l.useId=function(){return U.current.useId()},l.useImperativeHandle=function(e,t,r){return U.current.useImperativeHandle(e,t,r)},l.useInsertionEffect=function(e,t){return U.current.useInsertionEffect(e,t)},l.useLayoutEffect=function(e,t){return U.current.useLayoutEffect(e,t)},l.useMemo=function(e,t){return U.current.useMemo(e,t)},l.useReducer=function(e,t,r){return U.current.useReducer(e,t,r)},l.useRef=function(e){return U.current.useRef(e)},l.useState=function(e){return U.current.useState(e)},l.useSyncExternalStore=function(e,t,r){return U.current.useSyncExternalStore(e,t,r)},l.useTransition=function(){return U.current.useTransition()},l.version="18.3.1",o.exports=l;var q=o.exports;const V=n(q),K=r({__proto__:null,default:V},[q]);var H=q,G=Symbol.for("react.element"),W=Symbol.for("react.fragment"),Q=Object.prototype.hasOwnProperty,Y=H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,X={key:!0,ref:!0,__self:!0,__source:!0};function J(e,t,r){var n,i={},s=null,a=null;for(n in void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(a=t.ref),t)Q.call(t,n)&&!X.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:G,type:e,key:s,ref:a,props:i,_owner:Y.current}}a.Fragment=W,a.jsx=J,a.jsxs=J,s.exports=a;var Z=s.exports,ee={},te={exports:{}},re={},ne={exports:{}},ie={};!function(e){function t(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,s=e[n];if(!(0<i(s,t)))break e;e[n]=t,e[r]=s,r=n}}function r(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,s=e.length,a=s>>>1;n<a;){var o=2*(n+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,r))c<s&&0>i(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<s&&0>i(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,m="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var i=r(c);null!==i;){if(null===i.callback)n(c);else{if(!(i.startTime<=e))break;n(c),i.sortIndex=i.expirationTime,t(l,i)}i=r(c)}}function w(e){if(g=!1,b(e),!p)if(null!==r(l))p=!0,I(x);else{var t=r(c);null!==t&&O(w,t.startTime-e)}}function x(t,i){p=!1,g&&(g=!1,y(k),k=-1),f=!0;var s=h;try{for(b(i),d=r(l);null!==d&&(!(d.expirationTime>i)||t&&!C());){var a=d.callback;if("function"==typeof a){d.callback=null,h=d.priorityLevel;var o=a(d.expirationTime<=i);i=e.unstable_now(),"function"==typeof o?d.callback=o:d===r(l)&&n(l),b(i)}else n(l);d=r(l)}if(null!==d)var u=!0;else{var m=r(c);null!==m&&O(w,m.startTime-i),u=!1}return u}finally{d=null,h=s,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,T=null,k=-1,A=5,_=-1;function C(){return!(e.unstable_now()-_<A)}function P(){if(null!==T){var t=e.unstable_now();_=t;var r=!0;try{r=T(!0,t)}finally{r?S():(E=!1,T=null)}}else E=!1}if("function"==typeof v)S=function(){v(P)};else if("undefined"!=typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=P,S=function(){R.postMessage(null)}}else S=function(){m(P,0)};function I(e){T=e,E||(E=!0,S())}function O(t,r){k=m((function(){t(e.unstable_now())}),r)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,I(x))},e.unstable_forceFrameRate=function(e){0>e||125<e||(A=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var r=h;h=t;try{return e()}finally{h=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h;h=e;try{return t()}finally{h=r}},e.unstable_scheduleCallback=function(n,i,s){var a=e.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?a+s:a:s=a,n){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return n={id:u++,callback:i,priorityLevel:n,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(n.sortIndex=s,t(c,n),null===r(l)&&n===r(c)&&(g?(y(k),k=-1):g=!0,O(w,s-a))):(n.sortIndex=o,t(l,n),p||f||(p=!0,I(x))),n},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(e){var t=h;return function(){var r=h;h=t;try{return e.apply(this,arguments)}finally{h=r}}}}(ie),ne.exports=ie;var se=ne.exports,ae=q,oe=se;function le(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ce=new Set,ue={};function de(e,t){he(e,t),he(e+"Capture",t)}function he(e,t){for(ue[e]=t,e=0;e<t.length;e++)ce.add(t[e])}var fe=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),pe=Object.prototype.hasOwnProperty,ge=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,me={},ye={};function ve(e,t,r,n,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){be[e]=new ve(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];be[t]=new ve(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){be[e]=new ve(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){be[e]=new ve(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){be[e]=new ve(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){be[e]=new ve(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){be[e]=new ve(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){be[e]=new ve(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){be[e]=new ve(e,5,!1,e.toLowerCase(),null,!1,!1)}));var we=/[\-:]([a-z])/g;function xe(e){return e[1].toUpperCase()}function Se(e,t,r,n){var i=be.hasOwnProperty(t)?be[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!pe.call(ye,e)||!pe.call(me,e)&&(ge.test(e)?ye[e]=!0:(me[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(we,xe);be[t]=new ve(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(we,xe);be[t]=new ve(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(we,xe);be[t]=new ve(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){be[e]=new ve(e,1,!1,e.toLowerCase(),null,!1,!1)})),be.xlinkHref=new ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){be[e]=new ve(e,1,!1,e.toLowerCase(),null,!0,!0)}));var Ee=ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Te=Symbol.for("react.element"),ke=Symbol.for("react.portal"),Ae=Symbol.for("react.fragment"),_e=Symbol.for("react.strict_mode"),Ce=Symbol.for("react.profiler"),Pe=Symbol.for("react.provider"),De=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),Ie=Symbol.for("react.suspense"),Oe=Symbol.for("react.suspense_list"),Ne=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),Le=Symbol.for("react.offscreen"),Me=Symbol.iterator;function Fe(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Me&&e[Me]||e["@@iterator"])?e:null}var Ue,Be=Object.assign;function $e(e){if(void 0===Ue)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ue=t&&t[1]||""}return"\n"+Ue+e}var ze=!1;function qe(e,t){if(!e||ze)return"";ze=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"==typeof c.stack){for(var i=c.stack.split("\n"),s=n.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{ze=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?$e(e):""}function Ve(e){switch(e.tag){case 5:return $e(e.type);case 16:return $e("Lazy");case 13:return $e("Suspense");case 19:return $e("SuspenseList");case 0:case 2:case 15:return e=qe(e.type,!1);case 11:return e=qe(e.type.render,!1);case 1:return e=qe(e.type,!0);default:return""}}function Ke(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Ae:return"Fragment";case ke:return"Portal";case Ce:return"Profiler";case _e:return"StrictMode";case Ie:return"Suspense";case Oe:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case De:return(e.displayName||"Context")+".Consumer";case Pe:return(e._context.displayName||"Context")+".Provider";case Re:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Ne:return null!==(t=e.displayName||null)?t:Ke(e.type)||"Memo";case je:t=e._payload,e=e._init;try{return Ke(e(t))}catch(r){}}return null}function He(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ke(t);case 8:return t===_e?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function Ge(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function We(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Qe(e){e._valueTracker||(e._valueTracker=function(e){var t=We(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ye(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=We(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Xe(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Je(e,t){var r=t.checked;return Be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Ze(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=Ge(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function et(e,t){null!=(t=t.checked)&&Se(e,"checked",t,!1)}function tt(e,t){et(e,t);var r=Ge(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?nt(e,t.type,r):t.hasOwnProperty("defaultValue")&&nt(e,t.type,Ge(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function rt(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function nt(e,t,r){"number"===t&&Xe(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var it=Array.isArray;function st(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ge(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function at(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(le(91));return Be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ot(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(le(92));if(it(r)){if(1<r.length)throw Error(le(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:Ge(r)}}function lt(e,t){var r=Ge(t.value),n=Ge(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ct(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ut(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dt(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ut(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ht,ft,pt=(ft=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ht=ht||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ht.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return ft(e,t)}))}:ft);function gt(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var mt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yt=["Webkit","ms","Moz","O"];function vt(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||mt.hasOwnProperty(e)&&mt[e]?(""+t).trim():t+"px"}function bt(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=vt(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(mt).forEach((function(e){yt.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),mt[t]=mt[e]}))}));var wt=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xt(e,t){if(t){if(wt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(le(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(le(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(le(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(le(62))}}function St(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=null;function Tt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var kt=null,At=null,_t=null;function Ct(e){if(e=Ss(e)){if("function"!=typeof kt)throw Error(le(280));var t=e.stateNode;t&&(t=Ts(t),kt(e.stateNode,e.type,t))}}function Pt(e){At?_t?_t.push(e):_t=[e]:At=e}function Dt(){if(At){var e=At,t=_t;if(_t=At=null,Ct(e),t)for(e=0;e<t.length;e++)Ct(t[e])}}function Rt(e,t){return e(t)}function It(){}var Ot=!1;function Nt(e,t,r){if(Ot)return e(t,r);Ot=!0;try{return Rt(e,t,r)}finally{Ot=!1,(null!==At||null!==_t)&&(It(),Dt())}}function jt(e,t){var r=e.stateNode;if(null===r)return null;var n=Ts(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(le(231,t,typeof r));return r}var Lt=!1;if(fe)try{var Mt={};Object.defineProperty(Mt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Mt,Mt),window.removeEventListener("test",Mt,Mt)}catch(ft){Lt=!1}function Ft(e,t,r,n,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var Ut=!1,Bt=null,$t=!1,zt=null,qt={onError:function(e){Ut=!0,Bt=e}};function Vt(e,t,r,n,i,s,a,o,l){Ut=!1,Bt=null,Ft.apply(qt,arguments)}function Kt(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ht(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Gt(e){if(Kt(e)!==e)throw Error(le(188))}function Wt(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Kt(e)))throw Error(le(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(n=i.return)){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Gt(i),e;if(s===n)return Gt(i),t;s=s.sibling}throw Error(le(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(le(189))}}if(r.alternate!==n)throw Error(le(190))}if(3!==r.tag)throw Error(le(188));return r.stateNode.current===r?e:t}(e))?Qt(e):null}function Qt(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qt(e);if(null!==t)return t;e=e.sibling}return null}var Yt=oe.unstable_scheduleCallback,Xt=oe.unstable_cancelCallback,Jt=oe.unstable_shouldYield,Zt=oe.unstable_requestPaint,er=oe.unstable_now,tr=oe.unstable_getCurrentPriorityLevel,rr=oe.unstable_ImmediatePriority,nr=oe.unstable_UserBlockingPriority,ir=oe.unstable_NormalPriority,sr=oe.unstable_LowPriority,ar=oe.unstable_IdlePriority,or=null,lr=null;var cr=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ur(e)/dr|0)|0},ur=Math.log,dr=Math.LN2;var hr=64,fr=4194304;function pr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gr(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&r;if(0!==a){var o=a&~i;0!==o?n=pr(o):0!==(s&=a)&&(n=pr(s))}else 0!==(a=r&~i)?n=pr(a):0!==s&&(n=pr(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&i)&&((i=n&-n)>=(s=t&-t)||16===i&&4194240&s))return t;if(4&n&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-cr(t)),n|=e[r],t&=~i;return n}function mr(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function yr(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vr(){var e=hr;return!(4194240&(hr<<=1))&&(hr=64),e}function br(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function wr(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-cr(t)]=r}function xr(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-cr(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Sr=0;function Er(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var Tr,kr,Ar,_r,Cr,Pr=!1,Dr=[],Rr=null,Ir=null,Or=null,Nr=new Map,jr=new Map,Lr=[],Mr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fr(e,t){switch(e){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":Ir=null;break;case"mouseover":case"mouseout":Or=null;break;case"pointerover":case"pointerout":Nr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jr.delete(t.pointerId)}}function Ur(e,t,r,n,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Ss(t))&&kr(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Br(e){var t=xs(e.target);if(null!==t){var r=Kt(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ht(r)))return e.blockedOn=t,void Cr(e.priority,(function(){Ar(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function $r(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Jr(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=Ss(r))&&kr(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);Et=n,r.target.dispatchEvent(n),Et=null,t.shift()}return!0}function zr(e,t,r){$r(e)&&r.delete(t)}function qr(){Pr=!1,null!==Rr&&$r(Rr)&&(Rr=null),null!==Ir&&$r(Ir)&&(Ir=null),null!==Or&&$r(Or)&&(Or=null),Nr.forEach(zr),jr.forEach(zr)}function Vr(e,t){e.blockedOn===t&&(e.blockedOn=null,Pr||(Pr=!0,oe.unstable_scheduleCallback(oe.unstable_NormalPriority,qr)))}function Kr(e){function t(t){return Vr(t,e)}if(0<Dr.length){Vr(Dr[0],e);for(var r=1;r<Dr.length;r++){var n=Dr[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Rr&&Vr(Rr,e),null!==Ir&&Vr(Ir,e),null!==Or&&Vr(Or,e),Nr.forEach(t),jr.forEach(t),r=0;r<Lr.length;r++)(n=Lr[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Lr.length&&null===(r=Lr[0]).blockedOn;)Br(r),null===r.blockedOn&&Lr.shift()}var Hr=Ee.ReactCurrentBatchConfig,Gr=!0;function Wr(e,t,r,n){var i=Sr,s=Hr.transition;Hr.transition=null;try{Sr=1,Yr(e,t,r,n)}finally{Sr=i,Hr.transition=s}}function Qr(e,t,r,n){var i=Sr,s=Hr.transition;Hr.transition=null;try{Sr=4,Yr(e,t,r,n)}finally{Sr=i,Hr.transition=s}}function Yr(e,t,r,n){if(Gr){var i=Jr(e,t,r,n);if(null===i)Gi(e,t,n,Xr,r),Fr(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return Rr=Ur(Rr,e,t,r,n,i),!0;case"dragenter":return Ir=Ur(Ir,e,t,r,n,i),!0;case"mouseover":return Or=Ur(Or,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return Nr.set(s,Ur(Nr.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,jr.set(s,Ur(jr.get(s)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(Fr(e,n),4&t&&-1<Mr.indexOf(e)){for(;null!==i;){var s=Ss(i);if(null!==s&&Tr(s),null===(s=Jr(e,t,r,n))&&Gi(e,t,n,Xr,r),s===i)break;i=s}null!==i&&n.stopPropagation()}else Gi(e,t,n,null,r)}}var Xr=null;function Jr(e,t,r,n){if(Xr=null,null!==(e=xs(e=Tt(n))))if(null===(t=Kt(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ht(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xr=e,null}function Zr(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tr()){case rr:return 1;case nr:return 4;case ir:case sr:return 16;case ar:return 536870912;default:return 16}default:return 16}}var en=null,tn=null,rn=null;function nn(){if(rn)return rn;var e,t,r=tn,n=r.length,i="value"in en?en.value:en.textContent,s=i.length;for(e=0;e<n&&r[e]===i[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===i[s-t];t++);return rn=i.slice(e,1<t?1-t:void 0)}function sn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function on(){return!1}function ln(e){function t(t,r,n,i,s){for(var a in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:on,this.isPropagationStopped=on,this}return Be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var cn,un,dn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fn=ln(hn),pn=Be({},hn,{view:0,detail:0}),gn=ln(pn),mn=Be({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dn&&(dn&&"mousemove"===e.type?(cn=e.screenX-dn.screenX,un=e.screenY-dn.screenY):un=cn=0,dn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:un}}),yn=ln(mn),vn=ln(Be({},mn,{dataTransfer:0})),bn=ln(Be({},pn,{relatedTarget:0})),wn=ln(Be({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=Be({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sn=ln(xn),En=ln(Be({},hn,{data:0})),Tn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},An={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=An[e])&&!!t[e]}function Cn(){return _n}var Pn=Be({},pn,{key:function(e){if(e.key){var t=Tn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=sn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?sn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?sn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Dn=ln(Pn),Rn=ln(Be({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=ln(Be({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),On=ln(Be({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=Be({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jn=ln(Nn),Ln=[9,13,27,32],Mn=fe&&"CompositionEvent"in window,Fn=null;fe&&"documentMode"in document&&(Fn=document.documentMode);var Un=fe&&"TextEvent"in window&&!Fn,Bn=fe&&(!Mn||Fn&&8<Fn&&11>=Fn),$n=String.fromCharCode(32),zn=!1;function qn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Wn(e,t,r,n){Pt(n),0<(t=Qi(t,"onChange")).length&&(r=new fn("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Qn=null,Yn=null;function Xn(e){$i(e,0)}function Jn(e){if(Ye(Es(e)))return e}function Zn(e,t){if("change"===e)return t}var ei=!1;if(fe){var ti;if(fe){var ri="oninput"in document;if(!ri){var ni=document.createElement("div");ni.setAttribute("oninput","return;"),ri="function"==typeof ni.oninput}ti=ri}else ti=!1;ei=ti&&(!document.documentMode||9<document.documentMode)}function ii(){Qn&&(Qn.detachEvent("onpropertychange",si),Yn=Qn=null)}function si(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];Wn(t,Yn,e,Tt(e)),Nt(Xn,t)}}function ai(e,t,r){"focusin"===e?(ii(),Yn=r,(Qn=t).attachEvent("onpropertychange",si)):"focusout"===e&&ii()}function oi(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function li(e,t){if("click"===e)return Jn(t)}function ci(e,t){if("input"===e||"change"===e)return Jn(t)}var ui="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function di(e,t){if(ui(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!pe.call(t,i)||!ui(e[i],t[i]))return!1}return!0}function hi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fi(e,t){var r,n=hi(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hi(n)}}function pi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function gi(){for(var e=window,t=Xe();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=Xe((e=t.contentWindow).document)}return t}function mi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function yi(e){var t=gi(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&pi(r.ownerDocument.documentElement,r)){if(null!==n&&mi(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=void 0===n.end?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=fi(r,s);var a=fi(r,n);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vi=fe&&"documentMode"in document&&11>=document.documentMode,bi=null,wi=null,xi=null,Si=!1;function Ei(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;Si||null==bi||bi!==Xe(n)||("selectionStart"in(n=bi)&&mi(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},xi&&di(xi,n)||(xi=n,0<(n=Qi(wi,"onSelect")).length&&(t=new fn("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=bi)))}function Ti(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ki={animationend:Ti("Animation","AnimationEnd"),animationiteration:Ti("Animation","AnimationIteration"),animationstart:Ti("Animation","AnimationStart"),transitionend:Ti("Transition","TransitionEnd")},Ai={},_i={};function Ci(e){if(Ai[e])return Ai[e];if(!ki[e])return e;var t,r=ki[e];for(t in r)if(r.hasOwnProperty(t)&&t in _i)return Ai[e]=r[t];return e}fe&&(_i=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);var Pi=Ci("animationend"),Di=Ci("animationiteration"),Ri=Ci("animationstart"),Ii=Ci("transitionend"),Oi=new Map,Ni="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ji(e,t){Oi.set(e,t),de(t,[e])}for(var Li=0;Li<Ni.length;Li++){var Mi=Ni[Li];ji(Mi.toLowerCase(),"on"+(Mi[0].toUpperCase()+Mi.slice(1)))}ji(Pi,"onAnimationEnd"),ji(Di,"onAnimationIteration"),ji(Ri,"onAnimationStart"),ji("dblclick","onDoubleClick"),ji("focusin","onFocus"),ji("focusout","onBlur"),ji(Ii,"onTransitionEnd"),he("onMouseEnter",["mouseout","mouseover"]),he("onMouseLeave",["mouseout","mouseover"]),he("onPointerEnter",["pointerout","pointerover"]),he("onPointerLeave",["pointerout","pointerover"]),de("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),de("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),de("onBeforeInput",["compositionend","keypress","textInput","paste"]),de("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),de("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),de("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ui=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fi));function Bi(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,i,s,a,o,l){if(Vt.apply(this,arguments),Ut){if(!Ut)throw Error(le(198));var c=Bt;Ut=!1,Bt=null,$t||($t=!0,zt=c)}}(n,t,void 0,e),e.currentTarget=null}function $i(e,t){t=!!(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Bi(i,o,c),s=l}else for(a=0;a<n.length;a++){if(l=(o=n[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Bi(i,o,c),s=l}}}if($t)throw e=zt,$t=!1,zt=null,e}function zi(e,t){var r=t[vs];void 0===r&&(r=t[vs]=new Set);var n=e+"__bubble";r.has(n)||(Hi(t,e,2,!1),r.add(n))}function qi(e,t,r){var n=0;t&&(n|=4),Hi(r,e,n,t)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function Ki(e){if(!e[Vi]){e[Vi]=!0,ce.forEach((function(t){"selectionchange"!==t&&(Ui.has(t)||qi(t,!1,e),qi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vi]||(t[Vi]=!0,qi("selectionchange",!1,t))}}function Hi(e,t,r,n){switch(Zr(t)){case 1:var i=Wr;break;case 4:i=Qr;break;default:i=Yr}r=i.bind(null,t,r,e),i=void 0,!Lt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Gi(e,t,r,n,i){var s=n;if(!(1&t||2&t||null===n))e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var o=n.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=xs(o)))return;if(5===(l=a.tag)||6===l){n=s=a;continue e}o=o.parentNode}}n=n.return}Nt((function(){var n=s,i=Tt(r),a=[];e:{var o=Oi.get(e);if(void 0!==o){var l=fn,c=e;switch(e){case"keypress":if(0===sn(r))break e;case"keydown":case"keyup":l=Dn;break;case"focusin":c="focus",l=bn;break;case"focusout":c="blur",l=bn;break;case"beforeblur":case"afterblur":l=bn;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Pi:case Di:case Ri:l=wn;break;case Ii:l=On;break;case"scroll":l=gn;break;case"wheel":l=jn;break;case"copy":case"cut":case"paste":l=Sn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Rn}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=n;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=jt(p,h))&&u.push(Wi(p,g,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,r,i),a.push({event:o,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===Et||!(c=r.relatedTarget||r.fromElement)||!xs(c)&&!c[ys])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?xs(c):null)&&(c!==(d=Kt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=yn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Rn,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:Es(l),f=null==c?o:Es(c),(o=new u(g,p+"leave",l,r,i)).target=d,o.relatedTarget=f,g=null,xs(i)===n&&((u=new u(h,p+"enter",c,r,i)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Yi(f))p++;for(f=0,g=h;g;g=Yi(g))f++;for(;0<p-f;)u=Yi(u),p--;for(;0<f-p;)h=Yi(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Yi(u),h=Yi(h)}u=null}else u=null;null!==l&&Xi(a,o,l,u,!1),null!==c&&null!==d&&Xi(a,d,c,u,!0)}if("select"===(l=(o=n?Es(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Zn;else if(Gn(o))if(ei)m=ci;else{m=oi;var y=ai}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=li);switch(m&&(m=m(e,n))?Wn(a,m,r,i):(y&&y(e,o,n),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&nt(o,"number",o.value)),y=n?Es(n):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(bi=y,wi=n,xi=null);break;case"focusout":xi=wi=bi=null;break;case"mousedown":Si=!0;break;case"contextmenu":case"mouseup":case"dragend":Si=!1,Ei(a,r,i);break;case"selectionchange":if(vi)break;case"keydown":case"keyup":Ei(a,r,i)}var v;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Kn?qn(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Bn&&"ko"!==r.locale&&(Kn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Kn&&(v=nn()):(tn="value"in(en=i)?en.value:en.textContent,Kn=!0)),0<(y=Qi(n,b)).length&&(b=new En(b,e,null,r,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(r))&&(b.data=v))),(v=Un?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(zn=!0,$n);case"textInput":return(e=t.data)===$n&&zn?null:e;default:return null}}(e,r):function(e,t){if(Kn)return"compositionend"===e||!Mn&&qn(e,t)?(e=nn(),rn=tn=en=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Qi(n,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,r,i),a.push({event:i,listeners:n}),i.data=v))}$i(a,t)}))}function Wi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Qi(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=jt(e,r))&&n.unshift(Wi(e,s,i)),null!=(s=jt(e,t))&&n.push(Wi(e,s,i))),e=e.return}return n}function Yi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xi(e,t,r,n,i){for(var s=t._reactName,a=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=jt(r,s))&&a.unshift(Wi(r,l,o)):i||null!=(l=jt(r,s))&&a.push(Wi(r,l,o))),r=r.return}0!==a.length&&e.push({event:t,listeners:a})}var Ji=/\r\n?/g,Zi=/\u0000|\uFFFD/g;function es(e){return("string"==typeof e?e:""+e).replace(Ji,"\n").replace(Zi,"")}function ts(e,t,r){if(t=es(t),es(e)!==t&&r)throw Error(le(425))}function rs(){}var ns=null,is=null;function ss(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var as="function"==typeof setTimeout?setTimeout:void 0,os="function"==typeof clearTimeout?clearTimeout:void 0,ls="function"==typeof Promise?Promise:void 0,cs="function"==typeof queueMicrotask?queueMicrotask:void 0!==ls?function(e){return ls.resolve(null).then(e).catch(us)}:as;function us(e){setTimeout((function(){throw e}))}function ds(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void Kr(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);Kr(t)}function hs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function fs(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var ps=Math.random().toString(36).slice(2),gs="__reactFiber$"+ps,ms="__reactProps$"+ps,ys="__reactContainer$"+ps,vs="__reactEvents$"+ps,bs="__reactListeners$"+ps,ws="__reactHandles$"+ps;function xs(e){var t=e[gs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ys]||r[gs]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=fs(e);null!==e;){if(r=e[gs])return r;e=fs(e)}return t}r=(e=r).parentNode}return null}function Ss(e){return!(e=e[gs]||e[ys])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Es(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(le(33))}function Ts(e){return e[ms]||null}var ks=[],As=-1;function _s(e){return{current:e}}function Cs(e){0>As||(e.current=ks[As],ks[As]=null,As--)}function Ps(e,t){As++,ks[As]=e.current,e.current=t}var Ds={},Rs=_s(Ds),Is=_s(!1),Os=Ds;function Ns(e,t){var r=e.type.contextTypes;if(!r)return Ds;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in r)s[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function js(e){return null!=(e=e.childContextTypes)}function Ls(){Cs(Is),Cs(Rs)}function Ms(e,t,r){if(Rs.current!==Ds)throw Error(le(168));Ps(Rs,t),Ps(Is,r)}function Fs(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in t))throw Error(le(108,He(e)||"Unknown",i));return Be({},r,n)}function Us(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ds,Os=Rs.current,Ps(Rs,e),Ps(Is,Is.current),!0}function Bs(e,t,r){var n=e.stateNode;if(!n)throw Error(le(169));r?(e=Fs(e,t,Os),n.__reactInternalMemoizedMergedChildContext=e,Cs(Is),Cs(Rs),Ps(Rs,e)):Cs(Is),Ps(Is,r)}var $s=null,zs=!1,qs=!1;function Vs(e){null===$s?$s=[e]:$s.push(e)}function Ks(){if(!qs&&null!==$s){qs=!0;var e=0,t=Sr;try{var r=$s;for(Sr=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}$s=null,zs=!1}catch(Jce){throw null!==$s&&($s=$s.slice(e+1)),Yt(rr,Ks),Jce}finally{Sr=t,qs=!1}}return null}var Hs=[],Gs=0,Ws=null,Qs=0,Ys=[],Xs=0,Js=null,Zs=1,ea="";function ta(e,t){Hs[Gs++]=Qs,Hs[Gs++]=Ws,Ws=e,Qs=t}function ra(e,t,r){Ys[Xs++]=Zs,Ys[Xs++]=ea,Ys[Xs++]=Js,Js=e;var n=Zs;e=ea;var i=32-cr(n)-1;n&=~(1<<i),r+=1;var s=32-cr(t)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Zs=1<<32-cr(t)+i|r<<i|n,ea=s+e}else Zs=1<<s|r<<i|n,ea=e}function na(e){null!==e.return&&(ta(e,1),ra(e,1,0))}function ia(e){for(;e===Ws;)Ws=Hs[--Gs],Hs[Gs]=null,Qs=Hs[--Gs],Hs[Gs]=null;for(;e===Js;)Js=Ys[--Xs],Ys[Xs]=null,ea=Ys[--Xs],Ys[Xs]=null,Zs=Ys[--Xs],Ys[Xs]=null}var sa=null,aa=null,oa=!1,la=null;function ca(e,t){var r=Ou(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function ua(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,sa=e,aa=hs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,sa=e,aa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Js?{id:Zs,overflow:ea}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Ou(18,null,null,0)).stateNode=t,r.return=e,e.child=r,sa=e,aa=null,!0);default:return!1}}function da(e){return!(!(1&e.mode)||128&e.flags)}function ha(e){if(oa){var t=aa;if(t){var r=t;if(!ua(e,t)){if(da(e))throw Error(le(418));t=hs(r.nextSibling);var n=sa;t&&ua(e,t)?ca(n,r):(e.flags=-4097&e.flags|2,oa=!1,sa=e)}}else{if(da(e))throw Error(le(418));e.flags=-4097&e.flags|2,oa=!1,sa=e}}}function fa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;sa=e}function pa(e){if(e!==sa)return!1;if(!oa)return fa(e),oa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ss(e.type,e.memoizedProps)),t&&(t=aa)){if(da(e))throw ga(),Error(le(418));for(;t;)ca(e,t),t=hs(t.nextSibling)}if(fa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(le(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){aa=hs(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}aa=null}}else aa=sa?hs(e.stateNode.nextSibling):null;return!0}function ga(){for(var e=aa;e;)e=hs(e.nextSibling)}function ma(){aa=sa=null,oa=!1}function ya(e){null===la?la=[e]:la.push(e)}var va=Ee.ReactCurrentBatchConfig;function ba(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(le(309));var n=r.stateNode}if(!n)throw Error(le(147,e));var i=n,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:((t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e})._stringRef=s,t)}if("string"!=typeof e)throw Error(le(284));if(!r._owner)throw Error(le(290,e))}return e}function wa(e,t){throw e=Object.prototype.toString.call(t),Error(le(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xa(e){return(0,e._init)(e._payload)}function Sa(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=ju(e,t)).index=0,e.sibling=null,e}function s(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,r,n){return null===t||6!==t.tag?((t=Uu(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function l(e,t,r,n){var s=r.type;return s===Ae?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===je&&xa(s)===t.type)?((n=i(t,r.props)).ref=ba(e,t,r),n.return=e,n):((n=Lu(r.type,r.key,r.props,null,e.mode,n)).ref=ba(e,t,r),n.return=e,n)}function c(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Bu(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function u(e,t,r,n,s){return null===t||7!==t.tag?((t=Mu(r,e.mode,n,s)).return=e,t):((t=i(t,r)).return=e,t)}function d(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Uu(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Te:return(r=Lu(t.type,t.key,t.props,null,e.mode,r)).ref=ba(e,null,t),r.return=e,r;case ke:return(t=Bu(t,e.mode,r)).return=e,t;case je:return d(e,(0,t._init)(t._payload),r)}if(it(t)||Fe(t))return(t=Mu(t,e.mode,r,null)).return=e,t;wa(e,t)}return null}function h(e,t,r,n){var i=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r)return null!==i?null:o(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Te:return r.key===i?l(e,t,r,n):null;case ke:return r.key===i?c(e,t,r,n):null;case je:return h(e,t,(i=r._init)(r._payload),n)}if(it(r)||Fe(r))return null!==i?null:u(e,t,r,n,null);wa(e,r)}return null}function f(e,t,r,n,i){if("string"==typeof n&&""!==n||"number"==typeof n)return o(t,e=e.get(r)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Te:return l(t,e=e.get(null===n.key?r:n.key)||null,n,i);case ke:return c(t,e=e.get(null===n.key?r:n.key)||null,n,i);case je:return f(e,t,r,(0,n._init)(n._payload),i)}if(it(n)||Fe(n))return u(t,e=e.get(r)||null,n,i,null);wa(t,n)}return null}return function o(l,c,u,p){if("object"==typeof u&&null!==u&&u.type===Ae&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case Te:e:{for(var g=u.key,m=c;null!==m;){if(m.key===g){if((g=u.type)===Ae){if(7===m.tag){r(l,m.sibling),(c=i(m,u.props.children)).return=l,l=c;break e}}else if(m.elementType===g||"object"==typeof g&&null!==g&&g.$$typeof===je&&xa(g)===m.type){r(l,m.sibling),(c=i(m,u.props)).ref=ba(l,m,u),c.return=l,l=c;break e}r(l,m);break}t(l,m),m=m.sibling}u.type===Ae?((c=Mu(u.props.children,l.mode,p,u.key)).return=l,l=c):((p=Lu(u.type,u.key,u.props,null,l.mode,p)).ref=ba(l,c,u),p.return=l,l=p)}return a(l);case ke:e:{for(m=u.key;null!==c;){if(c.key===m){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){r(l,c.sibling),(c=i(c,u.children||[])).return=l,l=c;break e}r(l,c);break}t(l,c),c=c.sibling}(c=Bu(u,l.mode,p)).return=l,l=c}return a(l);case je:return o(l,c,(m=u._init)(u._payload),p)}if(it(u))return function(i,a,o,l){for(var c=null,u=null,p=a,g=a=0,m=null;null!==p&&g<o.length;g++){p.index>g?(m=p,p=null):m=p.sibling;var y=h(i,p,o[g],l);if(null===y){null===p&&(p=m);break}e&&p&&null===y.alternate&&t(i,p),a=s(y,a,g),null===u?c=y:u.sibling=y,u=y,p=m}if(g===o.length)return r(i,p),oa&&ta(i,g),c;if(null===p){for(;g<o.length;g++)null!==(p=d(i,o[g],l))&&(a=s(p,a,g),null===u?c=p:u.sibling=p,u=p);return oa&&ta(i,g),c}for(p=n(i,p);g<o.length;g++)null!==(m=f(p,i,g,o[g],l))&&(e&&null!==m.alternate&&p.delete(null===m.key?g:m.key),a=s(m,a,g),null===u?c=m:u.sibling=m,u=m);return e&&p.forEach((function(e){return t(i,e)})),oa&&ta(i,g),c}(l,c,u,p);if(Fe(u))return function(i,a,o,l){var c=Fe(o);if("function"!=typeof c)throw Error(le(150));if(null==(o=c.call(o)))throw Error(le(151));for(var u=c=null,p=a,g=a=0,m=null,y=o.next();null!==p&&!y.done;g++,y=o.next()){p.index>g?(m=p,p=null):m=p.sibling;var v=h(i,p,y.value,l);if(null===v){null===p&&(p=m);break}e&&p&&null===v.alternate&&t(i,p),a=s(v,a,g),null===u?c=v:u.sibling=v,u=v,p=m}if(y.done)return r(i,p),oa&&ta(i,g),c;if(null===p){for(;!y.done;g++,y=o.next())null!==(y=d(i,y.value,l))&&(a=s(y,a,g),null===u?c=y:u.sibling=y,u=y);return oa&&ta(i,g),c}for(p=n(i,p);!y.done;g++,y=o.next())null!==(y=f(p,i,g,y.value,l))&&(e&&null!==y.alternate&&p.delete(null===y.key?g:y.key),a=s(y,a,g),null===u?c=y:u.sibling=y,u=y);return e&&p.forEach((function(e){return t(i,e)})),oa&&ta(i,g),c}(l,c,u,p);wa(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==c&&6===c.tag?(r(l,c.sibling),(c=i(c,u)).return=l,l=c):(r(l,c),(c=Uu(u,l.mode,p)).return=l,l=c),a(l)):r(l,c)}}var Ea=Sa(!0),Ta=Sa(!1),ka=_s(null),Aa=null,_a=null,Ca=null;function Pa(){Ca=_a=Aa=null}function Da(e){var t=ka.current;Cs(ka),e._currentValue=t}function Ra(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ia(e,t){Aa=e,Ca=_a=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xl=!0),e.firstContext=null)}function Oa(e){var t=e._currentValue;if(Ca!==e)if(e={context:e,memoizedValue:t,next:null},null===_a){if(null===Aa)throw Error(le(308));_a=e,Aa.dependencies={lanes:0,firstContext:e}}else _a=_a.next=e;return t}var Na=null;function ja(e){null===Na?Na=[e]:Na.push(e)}function La(e,t,r,n){var i=t.interleaved;return null===i?(r.next=r,ja(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ma(e,n)}function Ma(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Fa=!1;function Ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ba(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $a(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function za(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,2&Dc){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Ma(e,r)}return null===(i=n.interleaved)?(t.next=t,ja(n)):(t.next=i.next,i.next=t),n.interleaved=t,Ma(e,r)}function qa(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,xr(e,r)}}function Va(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?i=s=a:s=s.next=a,r=r.next}while(null!==r);null===s?i=s=t:s=s.next=t}else i=s=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ka(e,t,r,n){var i=e.updateQueue;Fa=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((n&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,g=o;switch(h=t,f=r,g.tag){case 1:if("function"==typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=g.payload)?p.call(f,d,h):p))break e;d=Be({},d,h);break e;case 2:Fa=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fc|=a,e.lanes=a,e.memoizedState=d}}function Ha(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!=typeof i)throw Error(le(191,i));i.call(n)}}}var Ga={},Wa=_s(Ga),Qa=_s(Ga),Ya=_s(Ga);function Xa(e){if(e===Ga)throw Error(le(174));return e}function Ja(e,t){switch(Ps(Ya,t),Ps(Qa,e),Ps(Wa,Ga),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:dt(null,"");break;default:t=dt(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cs(Wa),Ps(Wa,t)}function Za(){Cs(Wa),Cs(Qa),Cs(Ya)}function eo(e){Xa(Ya.current);var t=Xa(Wa.current),r=dt(t,e.type);t!==r&&(Ps(Qa,e),Ps(Wa,r))}function to(e){Qa.current===e&&(Cs(Wa),Cs(Qa))}var ro=_s(0);function no(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var io=[];function so(){for(var e=0;e<io.length;e++)io[e]._workInProgressVersionPrimary=null;io.length=0}var ao=Ee.ReactCurrentDispatcher,oo=Ee.ReactCurrentBatchConfig,lo=0,co=null,uo=null,ho=null,fo=!1,po=!1,go=0,mo=0;function yo(){throw Error(le(321))}function vo(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ui(e[r],t[r]))return!1;return!0}function bo(e,t,r,n,i,s){if(lo=s,co=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ao.current=null===e||null===e.memoizedState?rl:nl,e=r(n,i),po){s=0;do{if(po=!1,go=0,25<=s)throw Error(le(301));s+=1,ho=uo=null,t.updateQueue=null,ao.current=il,e=r(n,i)}while(po)}if(ao.current=tl,t=null!==uo&&null!==uo.next,lo=0,ho=uo=co=null,fo=!1,t)throw Error(le(300));return e}function wo(){var e=0!==go;return go=0,e}function xo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?co.memoizedState=ho=e:ho=ho.next=e,ho}function So(){if(null===uo){var e=co.alternate;e=null!==e?e.memoizedState:null}else e=uo.next;var t=null===ho?co.memoizedState:ho.next;if(null!==t)ho=t,uo=e;else{if(null===e)throw Error(le(310));e={memoizedState:(uo=e).memoizedState,baseState:uo.baseState,baseQueue:uo.baseQueue,queue:uo.queue,next:null},null===ho?co.memoizedState=ho=e:ho=ho.next=e}return ho}function Eo(e,t){return"function"==typeof t?t(e):t}function To(e){var t=So(),r=t.queue;if(null===r)throw Error(le(311));r.lastRenderedReducer=e;var n=uo,i=n.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(null!==i){s=i.next,n=n.baseState;var o=a=null,l=null,c=s;do{var u=c.lane;if((lo&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(o=l=d,a=n):l=l.next=d,co.lanes|=u,Fc|=u}c=c.next}while(null!==c&&c!==s);null===l?a=n:l.next=o,ui(n,t.memoizedState)||(xl=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=l,r.lastRenderedState=n}if(null!==(e=r.interleaved)){i=e;do{s=i.lane,co.lanes|=s,Fc|=s,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ko(e){var t=So(),r=t.queue;if(null===r)throw Error(le(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(null!==i){r.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ui(s,t.memoizedState)||(xl=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function Ao(){}function _o(e,t){var r=co,n=So(),i=t(),s=!ui(n.memoizedState,i);if(s&&(n.memoizedState=i,xl=!0),n=n.queue,Uo(Do.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||null!==ho&&1&ho.memoizedState.tag){if(r.flags|=2048,No(9,Po.bind(null,r,n,i,t),void 0,null),null===Rc)throw Error(le(349));30&lo||Co(r,t,i)}return i}function Co(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=co.updateQueue)?(t={lastEffect:null,stores:null},co.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Po(e,t,r,n){t.value=r,t.getSnapshot=n,Ro(t)&&Io(e)}function Do(e,t,r){return r((function(){Ro(t)&&Io(e)}))}function Ro(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ui(e,r)}catch(n){return!0}}function Io(e){var t=Ma(e,1);null!==t&&iu(t,e,1,-1)}function Oo(e){var t=xo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:e},t.queue=e,e=e.dispatch=Xo.bind(null,co,e),[t.memoizedState,e]}function No(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=co.updateQueue)?(t={lastEffect:null,stores:null},co.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function jo(){return So().memoizedState}function Lo(e,t,r,n){var i=xo();co.flags|=e,i.memoizedState=No(1|t,r,void 0,void 0===n?null:n)}function Mo(e,t,r,n){var i=So();n=void 0===n?null:n;var s=void 0;if(null!==uo){var a=uo.memoizedState;if(s=a.destroy,null!==n&&vo(n,a.deps))return void(i.memoizedState=No(t,r,s,n))}co.flags|=e,i.memoizedState=No(1|t,r,s,n)}function Fo(e,t){return Lo(8390656,8,e,t)}function Uo(e,t){return Mo(2048,8,e,t)}function Bo(e,t){return Mo(4,2,e,t)}function $o(e,t){return Mo(4,4,e,t)}function zo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qo(e,t,r){return r=null!=r?r.concat([e]):null,Mo(4,4,zo.bind(null,t,e),r)}function Vo(){}function Ko(e,t){var r=So();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&vo(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ho(e,t){var r=So();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&vo(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Go(e,t,r){return 21&lo?(ui(r,t)||(r=vr(),co.lanes|=r,Fc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xl=!0),e.memoizedState=r)}function Wo(e,t){var r=Sr;Sr=0!==r&&4>r?r:4,e(!0);var n=oo.transition;oo.transition={};try{e(!1),t()}finally{Sr=r,oo.transition=n}}function Qo(){return So().memoizedState}function Yo(e,t,r){var n=nu(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Jo(e))Zo(t,r);else if(null!==(r=La(e,t,r,n))){iu(r,e,n,ru()),el(r,t,n)}}function Xo(e,t,r){var n=nu(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Jo(e))Zo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,ui(o,a)){var l=t.interleaved;return null===l?(i.next=i,ja(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(r=La(e,t,i,n))&&(iu(r,e,n,i=ru()),el(r,t,n))}}function Jo(e){var t=e.alternate;return e===co||null!==t&&t===co}function Zo(e,t){po=fo=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function el(e,t,r){if(4194240&r){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,xr(e,r)}}var tl={readContext:Oa,useCallback:yo,useContext:yo,useEffect:yo,useImperativeHandle:yo,useInsertionEffect:yo,useLayoutEffect:yo,useMemo:yo,useReducer:yo,useRef:yo,useState:yo,useDebugValue:yo,useDeferredValue:yo,useTransition:yo,useMutableSource:yo,useSyncExternalStore:yo,useId:yo,unstable_isNewReconciler:!1},rl={readContext:Oa,useCallback:function(e,t){return xo().memoizedState=[e,void 0===t?null:t],e},useContext:Oa,useEffect:Fo,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,Lo(4194308,4,zo.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Lo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Lo(4,2,e,t)},useMemo:function(e,t){var r=xo();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=xo();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Yo.bind(null,co,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},xo().memoizedState=e},useState:Oo,useDebugValue:Vo,useDeferredValue:function(e){return xo().memoizedState=e},useTransition:function(){var e=Oo(!1),t=e[0];return e=Wo.bind(null,e[1]),xo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=co,i=xo();if(oa){if(void 0===r)throw Error(le(407));r=r()}else{if(r=t(),null===Rc)throw Error(le(349));30&lo||Co(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,Fo(Do.bind(null,n,s,e),[e]),n.flags|=2048,No(9,Po.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=xo(),t=Rc.identifierPrefix;if(oa){var r=ea;t=":"+t+"R"+(r=(Zs&~(1<<32-cr(Zs)-1)).toString(32)+r),0<(r=go++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=mo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nl={readContext:Oa,useCallback:Ko,useContext:Oa,useEffect:Uo,useImperativeHandle:qo,useInsertionEffect:Bo,useLayoutEffect:$o,useMemo:Ho,useReducer:To,useRef:jo,useState:function(){return To(Eo)},useDebugValue:Vo,useDeferredValue:function(e){return Go(So(),uo.memoizedState,e)},useTransition:function(){return[To(Eo)[0],So().memoizedState]},useMutableSource:Ao,useSyncExternalStore:_o,useId:Qo,unstable_isNewReconciler:!1},il={readContext:Oa,useCallback:Ko,useContext:Oa,useEffect:Uo,useImperativeHandle:qo,useInsertionEffect:Bo,useLayoutEffect:$o,useMemo:Ho,useReducer:ko,useRef:jo,useState:function(){return ko(Eo)},useDebugValue:Vo,useDeferredValue:function(e){var t=So();return null===uo?t.memoizedState=e:Go(t,uo.memoizedState,e)},useTransition:function(){return[ko(Eo)[0],So().memoizedState]},useMutableSource:Ao,useSyncExternalStore:_o,useId:Qo,unstable_isNewReconciler:!1};function sl(e,t){if(e&&e.defaultProps){for(var r in t=Be({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function al(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:Be({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var ol={isMounted:function(e){return!!(e=e._reactInternals)&&Kt(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ru(),i=nu(e),s=$a(n,i);s.payload=t,null!=r&&(s.callback=r),null!==(t=za(e,s,i))&&(iu(t,e,i,n),qa(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ru(),i=nu(e),s=$a(n,i);s.tag=1,s.payload=t,null!=r&&(s.callback=r),null!==(t=za(e,s,i))&&(iu(t,e,i,n),qa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ru(),n=nu(e),i=$a(r,n);i.tag=2,null!=t&&(i.callback=t),null!==(t=za(e,i,n))&&(iu(t,e,n,r),qa(t,e,n))}};function ll(e,t,r,n,i,s,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!di(r,n)||!di(i,s))}function cl(e,t,r){var n=!1,i=Ds,s=t.contextType;return"object"==typeof s&&null!==s?s=Oa(s):(i=js(t)?Os:Rs.current,s=(n=null!=(n=t.contextTypes))?Ns(e,i):Ds),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ol,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ul(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ol.enqueueReplaceState(t,t.state,null)}function dl(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Ua(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=Oa(s):(s=js(t)?Os:Rs.current,i.context=Ns(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(al(e,t,s,r),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ol.enqueueReplaceState(i,i.state,null),Ka(e,r,i,n),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function hl(e,t){try{var r="",n=t;do{r+=Ve(n),n=n.return}while(n);var i=r}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function fl(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}var pl="function"==typeof WeakMap?WeakMap:Map;function gl(e,t,r){(r=$a(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Hc||(Hc=!0,Gc=n)},r}function ml(e,t,r){(r=$a(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(r.callback=function(){"function"!=typeof n&&(null===Wc?Wc=new Set([this]):Wc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function yl(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new pl;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=_u.bind(null,e,t,r),t.then(e,e))}function vl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bl(e,t,r,n,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=$a(-1,1)).tag=2,za(r,t,1))),r.lanes|=1),e)}var wl=Ee.ReactCurrentOwner,xl=!1;function Sl(e,t,r,n){t.child=null===e?Ta(t,null,r,n):Ea(t,e.child,r,n)}function El(e,t,r,n,i){r=r.render;var s=t.ref;return Ia(t,i),n=bo(e,t,r,n,s,i),r=wo(),null===e||xl?(oa&&r&&na(t),t.flags|=1,Sl(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hl(e,t,i))}function Tl(e,t,r,n,i){if(null===e){var s=r.type;return"function"!=typeof s||Nu(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Lu(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,kl(e,t,s,n,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((r=null!==(r=r.compare)?r:di)(a,n)&&e.ref===t.ref)return Hl(e,t,i)}return t.flags|=1,(e=ju(s,n)).ref=t.ref,e.return=t,t.child=e}function kl(e,t,r,n,i){if(null!==e){var s=e.memoizedProps;if(di(s,n)&&e.ref===t.ref){if(xl=!1,t.pendingProps=n=s,0===(e.lanes&i))return t.lanes=e.lanes,Hl(e,t,i);131072&e.flags&&(xl=!0)}}return Cl(e,t,r,n,i)}function Al(e,t,r){var n=t.pendingProps,i=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(1&t.mode){if(!(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ps(jc,Nc),Nc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,Ps(jc,Nc),Nc|=n}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ps(jc,Nc),Nc|=r;else null!==s?(n=s.baseLanes|r,t.memoizedState=null):n=r,Ps(jc,Nc),Nc|=n;return Sl(e,t,i,r),t.child}function _l(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Cl(e,t,r,n,i){var s=js(r)?Os:Rs.current;return s=Ns(t,s),Ia(t,i),r=bo(e,t,r,n,s,i),n=wo(),null===e||xl?(oa&&n&&na(t),t.flags|=1,Sl(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hl(e,t,i))}function Pl(e,t,r,n,i){if(js(r)){var s=!0;Us(t)}else s=!1;if(Ia(t,i),null===t.stateNode)Kl(e,t),cl(t,r,n),dl(t,r,n,i),n=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=r.contextType;"object"==typeof c&&null!==c?c=Oa(c):c=Ns(t,c=js(r)?Os:Rs.current);var u=r.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==n||l!==c)&&ul(t,a,n,c),Fa=!1;var h=t.memoizedState;a.state=h,Ka(t,n,a,i),l=t.memoizedState,o!==n||h!==l||Is.current||Fa?("function"==typeof u&&(al(t,r,u,n),l=t.memoizedState),(o=Fa||ll(t,r,o,n,h,l,c))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=c,n=o):("function"==typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Ba(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:sl(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"==typeof(l=r.contextType)&&null!==l?l=Oa(l):l=Ns(t,l=js(r)?Os:Rs.current);var f=r.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ul(t,a,n,l),Fa=!1,h=t.memoizedState,a.state=h,Ka(t,n,a,i);var p=t.memoizedState;o!==d||h!==p||Is.current||Fa?("function"==typeof f&&(al(t,r,f,n),p=t.memoizedState),(c=Fa||ll(t,r,c,n,h,p,l)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(n,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),a.props=n,a.state=p,a.context=l,n=c):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Dl(e,t,r,n,s,i)}function Dl(e,t,r,n,i,s){_l(e,t);var a=!!(128&t.flags);if(!n&&!a)return i&&Bs(t,r,!1),Hl(e,t,s);n=t.stateNode,wl.current=t;var o=a&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=Ea(t,e.child,null,s),t.child=Ea(t,null,o,s)):Sl(e,t,o,s),t.memoizedState=n.state,i&&Bs(t,r,!0),t.child}function Rl(e){var t=e.stateNode;t.pendingContext?Ms(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ms(0,t.context,!1),Ja(e,t.containerInfo)}function Il(e,t,r,n,i){return ma(),ya(i),t.flags|=256,Sl(e,t,r,n),t.child}var Ol,Nl,jl,Ll,Ml={dehydrated:null,treeContext:null,retryLane:0};function Fl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ul(e,t,r){var n,i=t.pendingProps,s=ro.current,a=!1,o=!!(128&t.flags);if((n=o)||(n=(null===e||null!==e.memoizedState)&&!!(2&s)),n?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ps(ro,1&s),null===e)return ha(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,a?(i=t.mode,a=t.child,o={mode:"hidden",children:o},1&i||null===a?a=Fu(o,i,0,null):(a.childLanes=0,a.pendingProps=o),e=Mu(e,i,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fl(r),t.memoizedState=Ml,e):Bl(t,o));if(null!==(s=e.memoizedState)&&null!==(n=s.dehydrated))return function(e,t,r,n,i,s,a){if(r)return 256&t.flags?(t.flags&=-257,$l(e,t,a,n=fl(Error(le(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=Fu({mode:"visible",children:n.children},i,0,null),(s=Mu(s,i,a,null)).flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,1&t.mode&&Ea(t,e.child,null,a),t.child.memoizedState=Fl(a),t.memoizedState=Ml,s);if(!(1&t.mode))return $l(e,t,a,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var o=n.dgst;return n=o,$l(e,t,a,n=fl(s=Error(le(419)),n,void 0))}if(o=0!==(a&e.childLanes),xl||o){if(null!==(n=Rc)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(n.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Ma(e,i),iu(n,e,i,-1))}return yu(),$l(e,t,a,n=fl(Error(le(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Pu.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,aa=hs(i.nextSibling),sa=t,oa=!0,la=null,null!==e&&(Ys[Xs++]=Zs,Ys[Xs++]=ea,Ys[Xs++]=Js,Zs=e.id,ea=e.overflow,Js=t),t=Bl(t,n.children),t.flags|=4096,t)}(e,t,o,i,n,s,r);if(a){a=i.fallback,o=t.mode,n=(s=e.child).sibling;var l={mode:"hidden",children:i.children};return 1&o||t.child===s?(i=ju(s,l)).subtreeFlags=14680064&s.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null),null!==n?a=ju(n,a):(a=Mu(a,o,r,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,o=null===(o=e.child.memoizedState)?Fl(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~r,t.memoizedState=Ml,i}return e=(a=e.child).sibling,i=ju(a,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Bl(e,t){return(t=Fu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function $l(e,t,r,n){return null!==n&&ya(n),Ea(t,e.child,null,r),(e=Bl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zl(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ra(e.return,t,r)}function ql(e,t,r,n,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Vl(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(Sl(e,t,n.children,r),2&(n=ro.current))n=1&n|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zl(e,r,t);else if(19===e.tag)zl(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ps(ro,n),1&t.mode)switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===no(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),ql(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===no(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}ql(t,!0,r,null,s);break;case"together":ql(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Kl(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hl(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Fc|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(le(153));if(null!==t.child){for(r=ju(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=ju(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Gl(e,t){if(!oa)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Wl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ql(e,t,r){var n=t.pendingProps;switch(ia(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wl(t),null;case 1:case 17:return js(t.type)&&Ls(),Wl(t),null;case 3:return n=t.stateNode,Za(),Cs(Is),Cs(Rs),so(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(pa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==la&&(lu(la),la=null))),Nl(e,t),Wl(t),null;case 5:to(t);var i=Xa(Ya.current);if(r=t.type,null!==e&&null!=t.stateNode)jl(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(le(166));return Wl(t),null}if(e=Xa(Wa.current),pa(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[gs]=t,n[ms]=s,e=!!(1&t.mode),r){case"dialog":zi("cancel",n),zi("close",n);break;case"iframe":case"object":case"embed":zi("load",n);break;case"video":case"audio":for(i=0;i<Fi.length;i++)zi(Fi[i],n);break;case"source":zi("error",n);break;case"img":case"image":case"link":zi("error",n),zi("load",n);break;case"details":zi("toggle",n);break;case"input":Ze(n,s),zi("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},zi("invalid",n);break;case"textarea":ot(n,s),zi("invalid",n)}for(var a in xt(r,s),i=null,s)if(s.hasOwnProperty(a)){var o=s[a];"children"===a?"string"==typeof o?n.textContent!==o&&(!0!==s.suppressHydrationWarning&&ts(n.textContent,o,e),i=["children",o]):"number"==typeof o&&n.textContent!==""+o&&(!0!==s.suppressHydrationWarning&&ts(n.textContent,o,e),i=["children",""+o]):ue.hasOwnProperty(a)&&null!=o&&"onScroll"===a&&zi("scroll",n)}switch(r){case"input":Qe(n),rt(n,s,!0);break;case"textarea":Qe(n),ct(n);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(n.onclick=rs)}n=i,t.updateQueue=n,null!==n&&(t.flags|=4)}else{a=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ut(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),"select"===r&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[gs]=t,e[ms]=n,Ol(e,t,!1,!1),t.stateNode=e;e:{switch(a=St(r,n),r){case"dialog":zi("cancel",e),zi("close",e),i=n;break;case"iframe":case"object":case"embed":zi("load",e),i=n;break;case"video":case"audio":for(i=0;i<Fi.length;i++)zi(Fi[i],e);i=n;break;case"source":zi("error",e),i=n;break;case"img":case"image":case"link":zi("error",e),zi("load",e),i=n;break;case"details":zi("toggle",e),i=n;break;case"input":Ze(e,n),i=Je(e,n),zi("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Be({},n,{value:void 0}),zi("invalid",e);break;case"textarea":ot(e,n),i=at(e,n),zi("invalid",e)}for(s in xt(r,i),o=i)if(o.hasOwnProperty(s)){var l=o[s];"style"===s?bt(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&pt(e,l):"children"===s?"string"==typeof l?("textarea"!==r||""!==l)&&gt(e,l):"number"==typeof l&&gt(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(ue.hasOwnProperty(s)?null!=l&&"onScroll"===s&&zi("scroll",e):null!=l&&Se(e,s,l,a))}switch(r){case"input":Qe(e),rt(e,n,!1);break;case"textarea":Qe(e),ct(e);break;case"option":null!=n.value&&e.setAttribute("value",""+Ge(n.value));break;case"select":e.multiple=!!n.multiple,null!=(s=n.value)?st(e,!!n.multiple,s,!1):null!=n.defaultValue&&st(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=rs)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wl(t),null;case 6:if(e&&null!=t.stateNode)Ll(e,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(le(166));if(r=Xa(Ya.current),Xa(Wa.current),pa(t)){if(n=t.stateNode,r=t.memoizedProps,n[gs]=t,(s=n.nodeValue!==r)&&null!==(e=sa))switch(e.tag){case 3:ts(n.nodeValue,r,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&ts(n.nodeValue,r,!!(1&e.mode))}s&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[gs]=t,t.stateNode=n}return Wl(t),null;case 13:if(Cs(ro),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(oa&&null!==aa&&1&t.mode&&!(128&t.flags))ga(),ma(),t.flags|=98560,s=!1;else if(s=pa(t),null!==n&&null!==n.dehydrated){if(null===e){if(!s)throw Error(le(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(le(317));s[gs]=t}else ma(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wl(t),s=!1}else null!==la&&(lu(la),la=null),s=!0;if(!s)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,1&t.mode&&(null===e||1&ro.current?0===Lc&&(Lc=3):yu())),null!==t.updateQueue&&(t.flags|=4),Wl(t),null);case 4:return Za(),Nl(e,t),null===e&&Ki(t.stateNode.containerInfo),Wl(t),null;case 10:return Da(t.type._context),Wl(t),null;case 19:if(Cs(ro),null===(s=t.memoizedState))return Wl(t),null;if(n=!!(128&t.flags),null===(a=s.rendering))if(n)Gl(s,!1);else{if(0!==Lc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=no(e))){for(t.flags|=128,Gl(s,!1),null!==(n=a.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(s=r).flags&=14680066,null===(a=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ps(ro,1&ro.current|2),t.child}e=e.sibling}null!==s.tail&&er()>Vc&&(t.flags|=128,n=!0,Gl(s,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=no(a))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Gl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!a.alternate&&!oa)return Wl(t),null}else 2*er()-s.renderingStartTime>Vc&&1073741824!==r&&(t.flags|=128,n=!0,Gl(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(null!==(r=s.last)?r.sibling=a:t.child=a,s.last=a)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=er(),t.sibling=null,r=ro.current,Ps(ro,n?1&r|2:1&r),t):(Wl(t),null);case 22:case 23:return fu(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&1&t.mode?!!(1073741824&Nc)&&(Wl(t),6&t.subtreeFlags&&(t.flags|=8192)):Wl(t),null;case 24:case 25:return null}throw Error(le(156,t.tag))}function Yl(e,t){switch(ia(t),t.tag){case 1:return js(t.type)&&Ls(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Za(),Cs(Is),Cs(Rs),so(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return to(t),null;case 13:if(Cs(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(le(340));ma()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cs(ro),null;case 4:return Za(),null;case 10:return Da(t.type._context),null;case 22:case 23:return fu(),null;default:return null}}Ol=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Nl=function(){},jl=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Xa(Wa.current);var s,a=null;switch(r){case"input":i=Je(e,i),n=Je(e,n),a=[];break;case"select":i=Be({},i,{value:void 0}),n=Be({},n,{value:void 0}),a=[];break;case"textarea":i=at(e,i),n=at(e,n),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof n.onClick&&(e.onclick=rs)}for(c in xt(r,n),r=null,i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var o=i[c];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(ue.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var l=n[c];if(o=null!=i?i[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(null!=l||null!=o))if("style"===c)if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(a||(a=[]),a.push(c,r)),r=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(a=a||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(ue.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&zi("scroll",e),a||o===l||(a=[])):(a=a||[]).push(c,l))}r&&(a=a||[]).push("style",r);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Ll=function(e,t,r,n){r!==n&&(t.flags|=4)};var Xl=!1,Jl=!1,Zl="function"==typeof WeakSet?WeakSet:Set,ec=null;function tc(e,t){var r=e.ref;if(null!==r)if("function"==typeof r)try{r(null)}catch(n){Au(e,t,n)}else r.current=null}function rc(e,t,r){try{r()}catch(n){Au(e,t,n)}}var nc=!1;function ic(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&rc(t,r,s)}i=i.next}while(i!==n)}}function sc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ac(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"==typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[gs],delete t[ms],delete t[vs],delete t[bs],delete t[ws])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lc(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||lc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=rs));else if(4!==n&&null!==(e=e.child))for(uc(e,t,r),e=e.sibling;null!==e;)uc(e,t,r),e=e.sibling}function dc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(dc(e,t,r),e=e.sibling;null!==e;)dc(e,t,r),e=e.sibling}var hc=null,fc=!1;function pc(e,t,r){for(r=r.child;null!==r;)gc(e,t,r),r=r.sibling}function gc(e,t,r){if(lr&&"function"==typeof lr.onCommitFiberUnmount)try{lr.onCommitFiberUnmount(or,r)}catch(o){}switch(r.tag){case 5:Jl||tc(r,t);case 6:var n=hc,i=fc;hc=null,pc(e,t,r),fc=i,null!==(hc=n)&&(fc?(e=hc,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):hc.removeChild(r.stateNode));break;case 18:null!==hc&&(fc?(e=hc,r=r.stateNode,8===e.nodeType?ds(e.parentNode,r):1===e.nodeType&&ds(e,r),Kr(e)):ds(hc,r.stateNode));break;case 4:n=hc,i=fc,hc=r.stateNode.containerInfo,fc=!0,pc(e,t,r),hc=n,fc=i;break;case 0:case 11:case 14:case 15:if(!Jl&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(2&s||4&s)&&rc(r,t,a),i=i.next}while(i!==n)}pc(e,t,r);break;case 1:if(!Jl&&(tc(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Au(r,t,o)}pc(e,t,r);break;case 21:pc(e,t,r);break;case 22:1&r.mode?(Jl=(n=Jl)||null!==r.memoizedState,pc(e,t,r),Jl=n):pc(e,t,r);break;default:pc(e,t,r)}}function mc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Zl),t.forEach((function(t){var n=Du.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function yc(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,a=t,o=a;e:for(;null!==o;){switch(o.tag){case 5:hc=o.stateNode,fc=!1;break e;case 3:case 4:hc=o.stateNode.containerInfo,fc=!0;break e}o=o.return}if(null===hc)throw Error(le(160));gc(s,a,i),hc=null,fc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){Au(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vc(t,e),t=t.sibling}function vc(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yc(t,e),bc(e),4&n){try{ic(3,e,e.return),sc(3,e)}catch(eue){Au(e,e.return,eue)}try{ic(5,e,e.return)}catch(eue){Au(e,e.return,eue)}}break;case 1:yc(t,e),bc(e),512&n&&null!==r&&tc(r,r.return);break;case 5:if(yc(t,e),bc(e),512&n&&null!==r&&tc(r,r.return),32&e.flags){var i=e.stateNode;try{gt(i,"")}catch(eue){Au(e,e.return,eue)}}if(4&n&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==r?r.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===s.type&&null!=s.name&&et(i,s),St(o,a);var c=St(o,s);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];"style"===u?bt(i,d):"dangerouslySetInnerHTML"===u?pt(i,d):"children"===u?gt(i,d):Se(i,u,d,c)}switch(o){case"input":tt(i,s);break;case"textarea":lt(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?st(i,!!s.multiple,f,!1):h!==!!s.multiple&&(null!=s.defaultValue?st(i,!!s.multiple,s.defaultValue,!0):st(i,!!s.multiple,s.multiple?[]:"",!1))}i[ms]=s}catch(eue){Au(e,e.return,eue)}}break;case 6:if(yc(t,e),bc(e),4&n){if(null===e.stateNode)throw Error(le(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(eue){Au(e,e.return,eue)}}break;case 3:if(yc(t,e),bc(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Kr(t.containerInfo)}catch(eue){Au(e,e.return,eue)}break;case 4:default:yc(t,e),bc(e);break;case 13:yc(t,e),bc(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(qc=er())),4&n&&mc(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Jl=(c=Jl)||u,yc(t,e),Jl=c):yc(t,e),bc(e),8192&n){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&1&e.mode)for(ec=e,u=e.child;null!==u;){for(d=ec=u;null!==ec;){switch(f=(h=ec).child,h.tag){case 0:case 11:case 14:case 15:ic(4,h,h.return);break;case 1:tc(h,h.return);var p=h.stateNode;if("function"==typeof p.componentWillUnmount){n=h,r=h.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(eue){Au(n,r,eue)}}break;case 5:tc(h,h.return);break;case 22:if(null!==h.memoizedState){Ec(d);continue}}null!==f?(f.return=h,ec=f):Ec(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{i=d.stateNode,c?"function"==typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(o=d.stateNode,a=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=vt("display",a))}catch(eue){Au(e,e.return,eue)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(eue){Au(e,e.return,eue)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yc(t,e),bc(e),4&n&&mc(e);case 21:}}function bc(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(lc(r)){var n=r;break e}r=r.return}throw Error(le(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(gt(i,""),n.flags&=-33),dc(e,cc(e),i);break;case 3:case 4:var s=n.stateNode.containerInfo;uc(e,cc(e),s);break;default:throw Error(le(161))}}catch(a){Au(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wc(e,t,r){ec=e,xc(e)}function xc(e,t,r){for(var n=!!(1&e.mode);null!==ec;){var i=ec,s=i.child;if(22===i.tag&&n){var a=null!==i.memoizedState||Xl;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Jl;o=Xl;var c=Jl;if(Xl=a,(Jl=l)&&!c)for(ec=i;null!==ec;)l=(a=ec).child,22===a.tag&&null!==a.memoizedState?Tc(i):null!==l?(l.return=a,ec=l):Tc(i);for(;null!==s;)ec=s,xc(s),s=s.sibling;ec=i,Xl=o,Jl=c}Sc(e)}else 8772&i.subtreeFlags&&null!==s?(s.return=i,ec=s):Sc(e)}}function Sc(e){for(;null!==ec;){var t=ec;if(8772&t.flags){var r=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Jl||sc(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Jl)if(null===r)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:sl(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Ha(t,s,n);break;case 3:var a=t.updateQueue;if(null!==a){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Ha(t,a,r)}break;case 5:var o=t.stateNode;if(null===r&&4&t.flags){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Kr(d)}}}break;default:throw Error(le(163))}Jl||512&t.flags&&ac(t)}catch(Zce){Au(t,t.return,Zce)}}if(t===e){ec=null;break}if(null!==(r=t.sibling)){r.return=t.return,ec=r;break}ec=t.return}}function Ec(e){for(;null!==ec;){var t=ec;if(t===e){ec=null;break}var r=t.sibling;if(null!==r){r.return=t.return,ec=r;break}ec=t.return}}function Tc(e){for(;null!==ec;){var t=ec;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{sc(4,t)}catch(l){Au(t,r,l)}break;case 1:var n=t.stateNode;if("function"==typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(l){Au(t,i,l)}}var s=t.return;try{ac(t)}catch(l){Au(t,s,l)}break;case 5:var a=t.return;try{ac(t)}catch(l){Au(t,a,l)}}}catch(l){Au(t,t.return,l)}if(t===e){ec=null;break}var o=t.sibling;if(null!==o){o.return=t.return,ec=o;break}ec=t.return}}var kc,Ac=Math.ceil,_c=Ee.ReactCurrentDispatcher,Cc=Ee.ReactCurrentOwner,Pc=Ee.ReactCurrentBatchConfig,Dc=0,Rc=null,Ic=null,Oc=0,Nc=0,jc=_s(0),Lc=0,Mc=null,Fc=0,Uc=0,Bc=0,$c=null,zc=null,qc=0,Vc=1/0,Kc=null,Hc=!1,Gc=null,Wc=null,Qc=!1,Yc=null,Xc=0,Jc=0,Zc=null,eu=-1,tu=0;function ru(){return 6&Dc?er():-1!==eu?eu:eu=er()}function nu(e){return 1&e.mode?2&Dc&&0!==Oc?Oc&-Oc:null!==va.transition?(0===tu&&(tu=vr()),tu):0!==(e=Sr)?e:e=void 0===(e=window.event)?16:Zr(e.type):1}function iu(e,t,r,n){if(50<Jc)throw Jc=0,Zc=null,Error(le(185));wr(e,r,n),2&Dc&&e===Rc||(e===Rc&&(!(2&Dc)&&(Uc|=r),4===Lc&&cu(e,Oc)),su(e,n),1===r&&0===Dc&&!(1&t.mode)&&(Vc=er()+500,zs&&Ks()))}function su(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-cr(s),o=1<<a,l=i[a];-1===l?0!==(o&r)&&0===(o&n)||(i[a]=mr(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var n=gr(e,e===Rc?Oc:0);if(0===n)null!==r&&Xt(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Xt(r),1===t)0===e.tag?function(e){zs=!0,Vs(e)}(uu.bind(null,e)):Vs(uu.bind(null,e)),cs((function(){!(6&Dc)&&Ks()})),r=null;else{switch(Er(n)){case 1:r=rr;break;case 4:r=nr;break;case 16:default:r=ir;break;case 536870912:r=ar}r=Ru(r,au.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function au(e,t){if(eu=-1,tu=0,6&Dc)throw Error(le(327));var r=e.callbackNode;if(Tu()&&e.callbackNode!==r)return null;var n=gr(e,e===Rc?Oc:0);if(0===n)return null;if(30&n||0!==(n&e.expiredLanes)||t)t=vu(e,n);else{t=n;var i=Dc;Dc|=2;var s=mu();for(Rc===e&&Oc===t||(Kc=null,Vc=er()+500,pu(e,t));;)try{wu();break}catch(o){gu(e,o)}Pa(),_c.current=s,Dc=i,null!==Ic?t=0:(Rc=null,Oc=0,t=Lc)}if(0!==t){if(2===t&&(0!==(i=yr(e))&&(n=i,t=ou(e,i))),1===t)throw r=Mc,pu(e,0),cu(e,n),su(e,er()),r;if(6===t)cu(e,n);else{if(i=e.current.alternate,!(30&n||function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!ui(s(),i))return!1}catch(a){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=vu(e,n),2===t&&(s=yr(e),0!==s&&(n=s,t=ou(e,s))),1!==t)))throw r=Mc,pu(e,0),cu(e,n),su(e,er()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(le(345));case 2:case 5:Eu(e,zc,Kc);break;case 3:if(cu(e,n),(130023424&n)===n&&10<(t=qc+500-er())){if(0!==gr(e,0))break;if(((i=e.suspendedLanes)&n)!==n){ru(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=as(Eu.bind(null,e,zc,Kc),t);break}Eu(e,zc,Kc);break;case 4:if(cu(e,n),(4194240&n)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-cr(n);s=1<<a,(a=t[a])>i&&(i=a),n&=~s}if(n=i,10<(n=(120>(n=er()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ac(n/1960))-n)){e.timeoutHandle=as(Eu.bind(null,e,zc,Kc),n);break}Eu(e,zc,Kc);break;default:throw Error(le(329))}}}return su(e,er()),e.callbackNode===r?au.bind(null,e):null}function ou(e,t){var r=$c;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),2!==(e=vu(e,t))&&(t=zc,zc=r,null!==t&&lu(t)),e}function lu(e){null===zc?zc=e:zc.push.apply(zc,e)}function cu(e,t){for(t&=~Bc,t&=~Uc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-cr(t),n=1<<r;e[r]=-1,t&=~n}}function uu(e){if(6&Dc)throw Error(le(327));Tu();var t=gr(e,0);if(!(1&t))return su(e,er()),null;var r=vu(e,t);if(0!==e.tag&&2===r){var n=yr(e);0!==n&&(t=n,r=ou(e,n))}if(1===r)throw r=Mc,pu(e,0),cu(e,t),su(e,er()),r;if(6===r)throw Error(le(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Eu(e,zc,Kc),su(e,er()),null}function du(e,t){var r=Dc;Dc|=1;try{return e(t)}finally{0===(Dc=r)&&(Vc=er()+500,zs&&Ks())}}function hu(e){null!==Yc&&0===Yc.tag&&!(6&Dc)&&Tu();var t=Dc;Dc|=1;var r=Pc.transition,n=Sr;try{if(Pc.transition=null,Sr=1,e)return e()}finally{Sr=n,Pc.transition=r,!(6&(Dc=t))&&Ks()}}function fu(){Nc=jc.current,Cs(jc)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,os(r)),null!==Ic)for(r=Ic.return;null!==r;){var n=r;switch(ia(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&Ls();break;case 3:Za(),Cs(Is),Cs(Rs),so();break;case 5:to(n);break;case 4:Za();break;case 13:case 19:Cs(ro);break;case 10:Da(n.type._context);break;case 22:case 23:fu()}r=r.return}if(Rc=e,Ic=e=ju(e.current,null),Oc=Nc=t,Lc=0,Mc=null,Bc=Uc=Fc=0,zc=$c=null,null!==Na){for(t=0;t<Na.length;t++)if(null!==(n=(r=Na[t]).interleaved)){r.interleaved=null;var i=n.next,s=r.pending;if(null!==s){var a=s.next;s.next=i,n.next=a}r.pending=n}Na=null}return e}function gu(e,t){for(;;){var r=Ic;try{if(Pa(),ao.current=tl,fo){for(var n=co.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}fo=!1}if(lo=0,ho=uo=co=null,po=!1,go=0,Cc.current=null,null===r||null===r.return){Lc=1,Mc=t,Ic=null;break}e:{var s=e,a=r.return,o=r,l=t;if(t=Oc,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,u=o,d=u.tag;if(!(1&u.mode||0!==d&&11!==d&&15!==d)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=vl(a);if(null!==f){f.flags&=-257,bl(f,a,o,0,t),1&f.mode&&yl(s,c,t),l=c;var p=(t=f).updateQueue;if(null===p){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break e}if(!(1&t)){yl(s,c,t),yu();break e}l=Error(le(426))}else if(oa&&1&o.mode){var m=vl(a);if(null!==m){!(65536&m.flags)&&(m.flags|=256),bl(m,a,o,0,t),ya(hl(l,o));break e}}s=l=hl(l,o),4!==Lc&&(Lc=2),null===$c?$c=[s]:$c.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Va(s,gl(0,l,t));break e;case 1:o=l;var y=s.type,v=s.stateNode;if(!(128&s.flags||"function"!=typeof y.getDerivedStateFromError&&(null===v||"function"!=typeof v.componentDidCatch||null!==Wc&&Wc.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t,Va(s,ml(s,o,t));break e}}s=s.return}while(null!==s)}Su(r)}catch(b){t=b,Ic===r&&null!==r&&(Ic=r=r.return);continue}break}}function mu(){var e=_c.current;return _c.current=tl,null===e?tl:e}function yu(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Rc||!(268435455&Fc)&&!(268435455&Uc)||cu(Rc,Oc)}function vu(e,t){var r=Dc;Dc|=2;var n=mu();for(Rc===e&&Oc===t||(Kc=null,pu(e,t));;)try{bu();break}catch(Jce){gu(e,Jce)}if(Pa(),Dc=r,_c.current=n,null!==Ic)throw Error(le(261));return Rc=null,Oc=0,Lc}function bu(){for(;null!==Ic;)xu(Ic)}function wu(){for(;null!==Ic&&!Jt();)xu(Ic)}function xu(e){var t=kc(e.alternate,e,Nc);e.memoizedProps=e.pendingProps,null===t?Su(e):Ic=t,Cc.current=null}function Su(e){var t=e;do{var r=t.alternate;if(e=t.return,32768&t.flags){if(null!==(r=Yl(r,t)))return r.flags&=32767,void(Ic=r);if(null===e)return Lc=6,void(Ic=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(r=Ql(r,t,Nc)))return void(Ic=r);if(null!==(t=t.sibling))return void(Ic=t);Ic=t=e}while(null!==t);0===Lc&&(Lc=5)}function Eu(e,t,r){var n=Sr,i=Pc.transition;try{Pc.transition=null,Sr=1,function(e,t,r,n){do{Tu()}while(null!==Yc);if(6&Dc)throw Error(le(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(le(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-cr(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}(e,s),e===Rc&&(Ic=Rc=null,Oc=0),!(2064&r.subtreeFlags)&&!(2064&r.flags)||Qc||(Qc=!0,Ru(ir,(function(){return Tu(),null}))),s=!!(15990&r.flags),!!(15990&r.subtreeFlags)||s){s=Pc.transition,Pc.transition=null;var a=Sr;Sr=1;var o=Dc;Dc|=4,Cc.current=null,function(e,t){if(ns=Gr,mi(e=gi())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch(w){r=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var f;d!==r||0!==i&&3!==d.nodeType||(o=a+i),d!==s||0!==n&&3!==d.nodeType||(l=a+n),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)h=d,d=f;for(;;){if(d===e)break t;if(h===r&&++c===i&&(o=a),h===s&&++u===n&&(l=a),null!==(f=d.nextSibling))break;h=(d=h).parentNode}d=f}r=-1===o||-1===l?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(is={focusedElem:e,selectionRange:r},Gr=!1,ec=t;null!==ec;)if(e=(t=ec).child,1028&t.subtreeFlags&&null!==e)e.return=t,ec=e;else for(;null!==ec;){t=ec;try{var p=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,m=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:sl(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(le(163))}}catch(w){Au(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,ec=e;break}ec=t.return}p=nc,nc=!1}(e,r),vc(r,e),yi(is),Gr=!!ns,is=ns=null,e.current=r,wc(r),Zt(),Dc=o,Sr=a,Pc.transition=s}else e.current=r;if(Qc&&(Qc=!1,Yc=e,Xc=i),s=e.pendingLanes,0===s&&(Wc=null),function(e){if(lr&&"function"==typeof lr.onCommitFiberRoot)try{lr.onCommitFiberRoot(or,e,void 0,!(128&~e.current.flags))}catch(t){}}(r.stateNode),su(e,er()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Hc)throw Hc=!1,e=Gc,Gc=null,e;!!(1&Xc)&&0!==e.tag&&Tu(),s=e.pendingLanes,1&s?e===Zc?Jc++:(Jc=0,Zc=e):Jc=0,Ks()}(e,t,r,n)}finally{Pc.transition=i,Sr=n}return null}function Tu(){if(null!==Yc){var e=Er(Xc),t=Pc.transition,r=Sr;try{if(Pc.transition=null,Sr=16>e?16:e,null===Yc)var n=!1;else{if(e=Yc,Yc=null,Xc=0,6&Dc)throw Error(le(331));var i=Dc;for(Dc|=4,ec=e.current;null!==ec;){var s=ec,a=s.child;if(16&ec.flags){var o=s.deletions;if(null!==o){for(var l=0;l<o.length;l++){var c=o[l];for(ec=c;null!==ec;){var u=ec;switch(u.tag){case 0:case 11:case 15:ic(8,u,s)}var d=u.child;if(null!==d)d.return=u,ec=d;else for(;null!==ec;){var h=(u=ec).sibling,f=u.return;if(oc(u),u===c){ec=null;break}if(null!==h){h.return=f,ec=h;break}ec=f}}}var p=s.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}ec=s}}if(2064&s.subtreeFlags&&null!==a)a.return=s,ec=a;else e:for(;null!==ec;){if(2048&(s=ec).flags)switch(s.tag){case 0:case 11:case 15:ic(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,ec=y;break e}ec=s.return}}var v=e.current;for(ec=v;null!==ec;){var b=(a=ec).child;if(2064&a.subtreeFlags&&null!==b)b.return=a,ec=b;else e:for(a=v;null!==ec;){if(2048&(o=ec).flags)try{switch(o.tag){case 0:case 11:case 15:sc(9,o)}}catch(x){Au(o,o.return,x)}if(o===a){ec=null;break e}var w=o.sibling;if(null!==w){w.return=o.return,ec=w;break e}ec=o.return}}if(Dc=i,Ks(),lr&&"function"==typeof lr.onPostCommitFiberRoot)try{lr.onPostCommitFiberRoot(or,e)}catch(x){}n=!0}return n}finally{Sr=r,Pc.transition=t}}return!1}function ku(e,t,r){e=za(e,t=gl(0,t=hl(r,t),1),1),t=ru(),null!==e&&(wr(e,1,t),su(e,t))}function Au(e,t,r){if(3===e.tag)ku(e,e,r);else for(;null!==t;){if(3===t.tag){ku(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Wc||!Wc.has(n))){t=za(t,e=ml(t,e=hl(r,e),1),1),e=ru(),null!==t&&(wr(t,1,e),su(t,e));break}}t=t.return}}function _u(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ru(),e.pingedLanes|=e.suspendedLanes&r,Rc===e&&(Oc&r)===r&&(4===Lc||3===Lc&&(130023424&Oc)===Oc&&500>er()-qc?pu(e,0):Bc|=r),su(e,t)}function Cu(e,t){0===t&&(1&e.mode?(t=fr,!(130023424&(fr<<=1))&&(fr=4194304)):t=1);var r=ru();null!==(e=Ma(e,t))&&(wr(e,t,r),su(e,r))}function Pu(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Cu(e,r)}function Du(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(le(314))}null!==n&&n.delete(t),Cu(e,r)}function Ru(e,t){return Yt(e,t)}function Iu(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ou(e,t,r,n){return new Iu(e,t,r,n)}function Nu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ju(e,t){var r=e.alternate;return null===r?((r=Ou(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Lu(e,t,r,n,i,s){var a=2;if(n=e,"function"==typeof e)Nu(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case Ae:return Mu(r.children,i,s,t);case _e:a=8,i|=8;break;case Ce:return(e=Ou(12,r,t,2|i)).elementType=Ce,e.lanes=s,e;case Ie:return(e=Ou(13,r,t,i)).elementType=Ie,e.lanes=s,e;case Oe:return(e=Ou(19,r,t,i)).elementType=Oe,e.lanes=s,e;case Le:return Fu(r,i,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Pe:a=10;break e;case De:a=9;break e;case Re:a=11;break e;case Ne:a=14;break e;case je:a=16,n=null;break e}throw Error(le(130,null==e?e:typeof e,""))}return(t=Ou(a,r,t,i)).elementType=e,t.type=n,t.lanes=s,t}function Mu(e,t,r,n){return(e=Ou(7,e,n,t)).lanes=r,e}function Fu(e,t,r,n){return(e=Ou(22,e,n,t)).elementType=Le,e.lanes=r,e.stateNode={isHidden:!1},e}function Uu(e,t,r){return(e=Ou(6,e,null,t)).lanes=r,e}function Bu(e,t,r){return(t=Ou(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $u(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=br(0),this.expirationTimes=br(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=br(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zu(e,t,r,n,i,s,a,o,l){return e=new $u(e,t,r,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ou(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ua(s),e}function qu(e){if(!e)return Ds;e:{if(Kt(e=e._reactInternals)!==e||1!==e.tag)throw Error(le(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(js(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(le(171))}if(1===e.tag){var r=e.type;if(js(r))return Fs(e,r,t)}return t}function Vu(e,t,r,n,i,s,a,o,l){return(e=zu(r,n,!0,e,0,s,0,o,l)).context=qu(null),r=e.current,(s=$a(n=ru(),i=nu(r))).callback=null!=t?t:null,za(r,s,i),e.current.lanes=i,wr(e,i,n),su(e,n),e}function Ku(e,t,r,n){var i=t.current,s=ru(),a=nu(i);return r=qu(r),null===t.context?t.context=r:t.pendingContext=r,(t=$a(s,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=za(i,t,a))&&(iu(e,i,a,s),qa(e,i,a)),a}function Hu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Wu(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}kc=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Is.current)xl=!0;else{if(0===(e.lanes&r)&&!(128&t.flags))return xl=!1,function(e,t,r){switch(t.tag){case 3:Rl(t),ma();break;case 5:eo(t);break;case 1:js(t.type)&&Us(t);break;case 4:Ja(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Ps(ka,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ps(ro,1&ro.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Ul(e,t,r):(Ps(ro,1&ro.current),null!==(e=Hl(e,t,r))?e.sibling:null);Ps(ro,1&ro.current);break;case 19:if(n=0!==(r&t.childLanes),128&e.flags){if(n)return Vl(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ps(ro,ro.current),n)break;return null;case 22:case 23:return t.lanes=0,Al(e,t,r)}return Hl(e,t,r)}(e,t,r);xl=!!(131072&e.flags)}else xl=!1,oa&&1048576&t.flags&&ra(t,Qs,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Kl(e,t),e=t.pendingProps;var i=Ns(t,Rs.current);Ia(t,r),i=bo(null,t,n,e,i,r);var s=wo();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,js(n)?(s=!0,Us(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ua(t),i.updater=ol,t.stateNode=i,i._reactInternals=t,dl(t,n,e,r),t=Dl(null,t,n,!0,s,r)):(t.tag=0,oa&&s&&na(t),Sl(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Kl(e,t),e=t.pendingProps,n=(i=n._init)(n._payload),t.type=n,i=t.tag=function(e){if("function"==typeof e)return Nu(e)?1:0;if(null!=e){if((e=e.$$typeof)===Re)return 11;if(e===Ne)return 14}return 2}(n),e=sl(n,e),i){case 0:t=Cl(null,t,n,e,r);break e;case 1:t=Pl(null,t,n,e,r);break e;case 11:t=El(null,t,n,e,r);break e;case 14:t=Tl(null,t,n,sl(n.type,e),r);break e}throw Error(le(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,Cl(e,t,n,i=t.elementType===n?i:sl(n,i),r);case 1:return n=t.type,i=t.pendingProps,Pl(e,t,n,i=t.elementType===n?i:sl(n,i),r);case 3:e:{if(Rl(t),null===e)throw Error(le(387));n=t.pendingProps,i=(s=t.memoizedState).element,Ba(e,t),Ka(t,n,null,r);var a=t.memoizedState;if(n=a.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Il(e,t,n,r,i=hl(Error(le(423)),t));break e}if(n!==i){t=Il(e,t,n,r,i=hl(Error(le(424)),t));break e}for(aa=hs(t.stateNode.containerInfo.firstChild),sa=t,oa=!0,la=null,r=Ta(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ma(),n===i){t=Hl(e,t,r);break e}Sl(e,t,n,r)}t=t.child}return t;case 5:return eo(t),null===e&&ha(t),n=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ss(n,i)?a=null:null!==s&&ss(n,s)&&(t.flags|=32),_l(e,t),Sl(e,t,a,r),t.child;case 6:return null===e&&ha(t),null;case 13:return Ul(e,t,r);case 4:return Ja(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Ea(t,null,n,r):Sl(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,El(e,t,n,i=t.elementType===n?i:sl(n,i),r);case 7:return Sl(e,t,t.pendingProps,r),t.child;case 8:case 12:return Sl(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ps(ka,n._currentValue),n._currentValue=a,null!==s)if(ui(s.value,a)){if(s.children===i.children&&!Is.current){t=Hl(e,t,r);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var o=s.dependencies;if(null!==o){a=s.child;for(var l=o.firstContext;null!==l;){if(l.context===n){if(1===s.tag){(l=$a(-1,r&-r)).tag=2;var c=s.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),Ra(s.return,r,t),o.lanes|=r;break}l=l.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(le(341));a.lanes|=r,null!==(o=a.alternate)&&(o.lanes|=r),Ra(a,r,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}Sl(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Ia(t,r),n=n(i=Oa(i)),t.flags|=1,Sl(e,t,n,r),t.child;case 14:return i=sl(n=t.type,t.pendingProps),Tl(e,t,n,i=sl(n.type,i),r);case 15:return kl(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:sl(n,i),Kl(e,t),t.tag=1,js(n)?(e=!0,Us(t)):e=!1,Ia(t,r),cl(t,n,i),dl(t,n,i,r),Dl(null,t,n,!0,e,r);case 19:return Vl(e,t,r);case 22:return Al(e,t,r)}throw Error(le(156,t.tag))};var Qu="function"==typeof reportError?reportError:function(e){};function Yu(e){this._internalRoot=e}function Xu(e){this._internalRoot=e}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ed(){}function td(e,t,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if("function"==typeof i){var o=i;i=function(){var e=Hu(a);o.call(e)}}Ku(t,a,e,i)}else a=function(e,t,r,n,i){if(i){if("function"==typeof n){var s=n;n=function(){var e=Hu(a);s.call(e)}}var a=Vu(t,n,e,0,null,!1,0,"",ed);return e._reactRootContainer=a,e[ys]=a.current,Ki(8===e.nodeType?e.parentNode:e),hu(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof n){var o=n;n=function(){var e=Hu(l);o.call(e)}}var l=zu(e,0,!1,null,0,!1,0,"",ed);return e._reactRootContainer=l,e[ys]=l.current,Ki(8===e.nodeType?e.parentNode:e),hu((function(){Ku(t,l,r,n)})),l}(r,t,e,i,n);return Hu(a)}Xu.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(le(409));Ku(e,t,null,null)},Xu.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hu((function(){Ku(null,e,null,null)})),t[ys]=null}},Xu.prototype.unstable_scheduleHydration=function(e){if(e){var t=_r();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Lr.length&&0!==t&&t<Lr[r].priority;r++);Lr.splice(r,0,e),0===r&&Br(e)}},Tr=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=pr(t.pendingLanes);0!==r&&(xr(t,1|r),su(t,er()),!(6&Dc)&&(Vc=er()+500,Ks()))}break;case 13:hu((function(){var t=Ma(e,1);if(null!==t){var r=ru();iu(t,e,1,r)}})),Wu(e,1)}},kr=function(e){if(13===e.tag){var t=Ma(e,134217728);if(null!==t)iu(t,e,134217728,ru());Wu(e,134217728)}},Ar=function(e){if(13===e.tag){var t=nu(e),r=Ma(e,t);if(null!==r)iu(r,e,t,ru());Wu(e,t)}},_r=function(){return Sr},Cr=function(e,t){var r=Sr;try{return Sr=e,t()}finally{Sr=r}},kt=function(e,t,r){switch(t){case"input":if(tt(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Ts(n);if(!i)throw Error(le(90));Ye(n),tt(n,i)}}}break;case"textarea":lt(e,r);break;case"select":null!=(t=r.value)&&st(e,!!r.multiple,t,!1)}},Rt=du,It=hu;var rd={usingClientEntryPoint:!1,Events:[Ss,Es,Ts,Pt,Dt,du]},nd={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},id={bundleType:nd.bundleType,version:nd.version,rendererPackageName:nd.rendererPackageName,rendererConfig:nd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Wt(e))?null:e.stateNode},findFiberByHostInstance:nd.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{or=sd.inject(id),lr=sd}catch(ft){}}re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rd,re.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(t))throw Error(le(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ke,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},re.createRoot=function(e,t){if(!Ju(e))throw Error(le(299));var r=!1,n="",i=Qu;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zu(e,1,!1,null,0,r,0,n,i),e[ys]=t.current,Ki(8===e.nodeType?e.parentNode:e),new Yu(t)},re.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(le(188));throw e=Object.keys(e).join(","),Error(le(268,e))}return e=null===(e=Wt(t))?null:e.stateNode},re.flushSync=function(e){return hu(e)},re.hydrate=function(e,t,r){if(!Zu(t))throw Error(le(200));return td(null,e,t,!0,r)},re.hydrateRoot=function(e,t,r){if(!Ju(e))throw Error(le(405));var n=null!=r&&r.hydratedSources||null,i=!1,s="",a=Qu;if(null!=r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onRecoverableError&&(a=r.onRecoverableError)),t=Vu(t,null,e,1,null!=r?r:null,i,0,s,a),e[ys]=t.current,Ki(e),n)for(e=0;e<n.length;e++)i=(i=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Xu(t)},re.render=function(e,t,r){if(!Zu(t))throw Error(le(200));return td(null,e,t,!1,r)},re.unmountComponentAtNode=function(e){if(!Zu(e))throw Error(le(40));return!!e._reactRootContainer&&(hu((function(){td(null,null,e,!1,(function(){e._reactRootContainer=null,e[ys]=null}))})),!0)},re.unstable_batchedUpdates=du,re.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Zu(r))throw Error(le(200));if(null==e||void 0===e._reactInternals)throw Error(le(38));return td(e,t,r,!1,n)},re.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),te.exports=re;var ad=te.exports;const od=n(ad);var ld,cd,ud=ad;function dd(){return dd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dd.apply(this,arguments)}ee.createRoot=ud.createRoot,ee.hydrateRoot=ud.hydrateRoot,(cd=ld||(ld={})).Pop="POP",cd.Push="PUSH",cd.Replace="REPLACE";const hd="popstate";function fd(e){return void 0===e&&(e={}),function(e,t,r,n){void 0===n&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o=ld.Pop,l=null,c=u();null==c&&(c=0,a.replaceState(dd({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function d(){o=ld.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:g.location,delta:t})}function h(e,t){o=ld.Push;let n=yd(g.location,e,t);r&&r(n,e),c=u()+1;let d=md(n,c),h=g.createHref(n);try{a.pushState(d,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;i.location.assign(h)}s&&l&&l({action:o,location:g.location,delta:1})}function f(e,t){o=ld.Replace;let n=yd(g.location,e,t);r&&r(n,e),c=u();let i=md(n,c),d=g.createHref(n);a.replaceState(i,"",d),s&&l&&l({action:o,location:g.location,delta:0})}function p(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,r="string"==typeof e?e:vd(e);return r=r.replace(/ $/,"%20"),pd(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}let g={get action(){return o},get location(){return e(i,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(hd,d),l=e,()=>{i.removeEventListener(hd,d),l=null}},createHref:e=>t(i,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:f,go:e=>a.go(e)};return g}((function(e,t){let{pathname:r,search:n,hash:i}=e.location;return yd("",{pathname:r,search:n,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:vd(t)}),null,e)}function pd(e,t){if(!1===e||null==e)throw new Error(t)}function gd(e,t){if(!e)try{throw new Error(t)}catch(Jce){}}function md(e,t){return{usr:e.state,key:e.key,idx:t}}function yd(e,t,r,n){return void 0===r&&(r=null),dd({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?bd(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function vd(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function bd(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}var wd,xd;function Sd(e,t,r){return void 0===r&&(r="/"),function(e,t,r,n){let i="string"==typeof t?bd(t):t,s=Ld(i.pathname||"/",r);if(null==s)return null;let a=Ed(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every(((e,r)=>e===t[r]));return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let o=null;for(let l=0;null==o&&l<a.length;++l){let e=jd(s);o=Od(a[l],e,n)}return o}(e,t,r,!1)}function Ed(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(pd(a.relativePath.startsWith(n),'Absolute route path "'+a.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(n.length));let o=Bd([n,a.relativePath]),l=r.concat(a);e.children&&e.children.length>0&&(pd(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),Ed(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:Id(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of Td(e.path))i(e,t,n);else i(e,t)})),t}function Td(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===n.length)return i?[s,""]:[s];let a=Td(n.join("/")),o=[];return o.push(...a.map((e=>""===e?s:[s,e].join("/")))),i&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}(xd=wd||(wd={})).data="data",xd.deferred="deferred",xd.redirect="redirect",xd.error="error";const kd=/^:[\w-]+$/,Ad=3,_d=2,Cd=1,Pd=10,Dd=-2,Rd=e=>"*"===e;function Id(e,t){let r=e.split("/"),n=r.length;return r.some(Rd)&&(n+=Dd),t&&(n+=_d),r.filter((e=>!Rd(e))).reduce(((e,t)=>e+(kd.test(t)?Ad:""===t?Cd:Pd)),n)}function Od(e,t,r){void 0===r&&(r=!1);let{routesMeta:n}=e,i={},s="/",a=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===s?t:t.slice(s.length)||"/",u=Nd({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&r&&!n[n.length-1].route.index&&(u=Nd({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:Bd([s,u.pathname]),pathnameBase:$d(Bd([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=Bd([s,u.pathnameBase]))}return a}function Nd(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);gd("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(n.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,n]}(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce(((e,t,r)=>{let{paramName:n,isOptional:i}=t;if("*"===n){let e=o[r]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[r];return e[n]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:a,pattern:e}}function jd(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return gd(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Ld(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function Md(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Fd(e,t){let r=function(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}(e);return t?r.map(((e,t)=>t===r.length-1?e.pathname:e.pathnameBase)):r.map((e=>e.pathnameBase))}function Ud(e,t,r,n){let i;void 0===n&&(n=!1),"string"==typeof e?i=bd(e):(i=dd({},e),pd(!i.pathname||!i.pathname.includes("?"),Md("?","pathname","search",i)),pd(!i.pathname||!i.pathname.includes("#"),Md("#","pathname","hash",i)),pd(!i.search||!i.search.includes("#"),Md("#","search","hash",i)));let s,a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=r;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:i=""}="string"==typeof e?bd(e):e,s=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)})),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:s,search:zd(n),hash:qd(i)}}(i,s),c=o&&"/"!==o&&o.endsWith("/"),u=(a||"."===o)&&r.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const Bd=e=>e.join("/").replace(/\/\/+/g,"/"),$d=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),zd=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",qd=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const Vd=["post","put","patch","delete"];new Set(Vd);const Kd=["get",...Vd];function Hd(){return Hd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hd.apply(this,arguments)}new Set(Kd);const Gd=q.createContext(null),Wd=q.createContext(null),Qd=q.createContext(null),Yd=q.createContext(null),Xd=q.createContext({outlet:null,matches:[],isDataRoute:!1}),Jd=q.createContext(null);function Zd(){return null!=q.useContext(Yd)}function eh(){return Zd()||pd(!1),q.useContext(Yd).location}function th(e){q.useContext(Qd).static||q.useLayoutEffect(e)}function rh(){let{isDataRoute:e}=q.useContext(Xd);return e?function(){let{router:e}=function(){let e=q.useContext(Gd);return e||pd(!1),e}(uh.UseNavigateStable),t=hh(dh.UseNavigateStable),r=q.useRef(!1);th((()=>{r.current=!0}));let n=q.useCallback((function(n,i){void 0===i&&(i={}),r.current&&("number"==typeof n?e.navigate(n):e.navigate(n,Hd({fromRouteId:t},i)))}),[e,t]);return n}():function(){Zd()||pd(!1);let e=q.useContext(Gd),{basename:t,future:r,navigator:n}=q.useContext(Qd),{matches:i}=q.useContext(Xd),{pathname:s}=eh(),a=JSON.stringify(Fd(i,r.v7_relativeSplatPath)),o=q.useRef(!1);th((()=>{o.current=!0}));let l=q.useCallback((function(r,i){if(void 0===i&&(i={}),!o.current)return;if("number"==typeof r)return void n.go(r);let l=Ud(r,JSON.parse(a),s,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Bd([t,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)}),[t,n,a,s,e]);return l}()}function nh(){let{matches:e}=q.useContext(Xd),t=e[e.length-1];return t?t.params:{}}function ih(e,t){let{relative:r}=void 0===t?{}:t,{future:n}=q.useContext(Qd),{matches:i}=q.useContext(Xd),{pathname:s}=eh(),a=JSON.stringify(Fd(i,n.v7_relativeSplatPath));return q.useMemo((()=>Ud(e,JSON.parse(a),s,"path"===r)),[e,a,s,r])}function sh(e,t){return function(e,t,r,n){Zd()||pd(!1);let{navigator:i}=q.useContext(Qd),{matches:s}=q.useContext(Xd),a=s[s.length-1],o=a?a.params:{};!a||a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c,u=eh();if(t){var d;let e="string"==typeof t?bd(t):t;"/"===l||(null==(d=e.pathname)?void 0:d.startsWith(l))||pd(!1),c=e}else c=u;let h=c.pathname||"/",f=h;if("/"!==l){let e=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let p=Sd(e,{pathname:f}),g=function(e,t,r,n){var i;void 0===t&&(t=[]);void 0===r&&(r=null);void 0===n&&(n=null);if(null==e){var s;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(s=n)&&s.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let a=e,o=null==(i=r)?void 0:i.errors;if(null!=o){let e=a.findIndex((e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id])));e>=0||pd(!1),a=a.slice(0,Math.min(a.length,e+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<a.length;u++){let e=a[u];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=u),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){l=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}return a.reduceRight(((e,n,i)=>{let s,u=!1,d=null,h=null;var f;r&&(s=o&&n.route.id?o[n.route.id]:void 0,d=n.route.errorElement||oh,l&&(c<0&&0===i?(f="route-fallback",!1||fh[f]||(fh[f]=!0),u=!0,h=null):c===i&&(u=!0,h=n.route.hydrateFallbackElement||null)));let p=t.concat(a.slice(0,i+1)),g=()=>{let t;return t=s?d:u?h:n.route.Component?q.createElement(n.route.Component,null):n.route.element?n.route.element:e,q.createElement(ch,{match:n,routeContext:{outlet:e,matches:p,isDataRoute:null!=r},children:t})};return r&&(n.route.ErrorBoundary||n.route.errorElement||0===i)?q.createElement(lh,{location:r.location,revalidation:r.revalidation,component:d,error:s,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()}),null)}(p&&p.map((e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:Bd([l,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:Bd([l,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,r,n);if(t&&g)return q.createElement(Yd.Provider,{value:{location:Hd({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:ld.Pop}},g);return g}(e,t)}function ah(){let e=function(){var e;let t=q.useContext(Jd),r=function(){let e=q.useContext(Wd);return e||pd(!1),e}(dh.UseRouteError),n=hh(dh.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[n]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},t),r?q.createElement("pre",{style:n},r):null,null)}const oh=q.createElement(ah,null);class lh extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){}render(){return void 0!==this.state.error?q.createElement(Xd.Provider,{value:this.props.routeContext},q.createElement(Jd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ch(e){let{routeContext:t,match:r,children:n}=e,i=q.useContext(Gd);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),q.createElement(Xd.Provider,{value:t},n)}var uh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(uh||{}),dh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(dh||{});function hh(e){let t=function(){let e=q.useContext(Xd);return e||pd(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||pd(!1),r.route.id}const fh={};function ph(e){let{to:t,replace:r,state:n,relative:i}=e;Zd()||pd(!1);let{future:s,static:a}=q.useContext(Qd),{matches:o}=q.useContext(Xd),{pathname:l}=eh(),c=rh(),u=Ud(t,Fd(o,s.v7_relativeSplatPath),l,"path"===i),d=JSON.stringify(u);return q.useEffect((()=>c(JSON.parse(d),{replace:r,state:n,relative:i})),[c,d,i,r,n]),null}function gh(e){pd(!1)}function mh(e){let{basename:t="/",children:r=null,location:n,navigationType:i=ld.Pop,navigator:s,static:a=!1,future:o}=e;Zd()&&pd(!1);let l=t.replace(/^\/*/,"/"),c=q.useMemo((()=>({basename:l,navigator:s,static:a,future:Hd({v7_relativeSplatPath:!1},o)})),[l,o,s,a]);"string"==typeof n&&(n=bd(n));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=n,g=q.useMemo((()=>{let e=Ld(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:f,key:p},navigationType:i}}),[l,u,d,h,f,p,i]);return null==g?null:q.createElement(Qd.Provider,{value:c},q.createElement(Yd.Provider,{children:r,value:g}))}function yh(e){let{children:t,location:r}=e;return sh(vh(t),r)}function vh(e,t){void 0===t&&(t=[]);let r=[];return q.Children.forEach(e,((e,n)=>{if(!q.isValidElement(e))return;let i=[...t,n];if(e.type===q.Fragment)return void r.push.apply(r,vh(e.props.children,i));e.type!==gh&&pd(!1),e.props.index&&e.props.children&&pd(!1);let s={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=vh(e.props.children,i)),r.push(s)})),r}function bh(){return bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bh.apply(this,arguments)}function wh(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map((e=>[r,e])):[[r,n]])}),[]))}new Promise((()=>{}));const xh=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Jce){}const Sh=K.startTransition;function Eh(e){let{basename:t,children:r,future:n,window:i}=e,s=q.useRef();null==s.current&&(s.current=fd({window:i,v5Compat:!0}));let a=s.current,[o,l]=q.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},u=q.useCallback((e=>{c&&Sh?Sh((()=>l(e))):l(e)}),[l,c]);return q.useLayoutEffect((()=>a.listen(u)),[a,u]),q.useEffect((()=>{return null==(e=n)||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),void(t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation));var e,t}),[n]),q.createElement(mh,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:a,future:n})}const Th="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,kh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ah=q.forwardRef((function(e,t){let r,{onClick:n,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,h=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,xh),{basename:f}=q.useContext(Qd),p=!1;if("string"==typeof c&&kh.test(c)&&(r=c,Th))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),r=Ld(t.pathname,f);t.origin===e.origin&&null!=r?c=r+t.search+t.hash:p=!0}catch(Jce){}let g=function(e,t){let{relative:r}=void 0===t?{}:t;Zd()||pd(!1);let{basename:n,navigator:i}=q.useContext(Qd),{hash:s,pathname:a,search:o}=ih(e,{relative:r}),l=a;return"/"!==n&&(l="/"===a?n:Bd([n,a])),i.createHref({pathname:l,search:o,hash:s})}(c,{relative:i}),m=function(e,t){let{target:r,replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o}=void 0===t?{}:t,l=rh(),c=eh(),u=ih(e,{relative:a});return q.useCallback((t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,r)){t.preventDefault();let r=void 0!==n?n:vd(c)===vd(u);l(e,{replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o})}}),[c,l,u,n,i,r,e,s,a,o])}(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:i,viewTransition:d});return q.createElement("a",bh({},h,{href:r||g,onClick:p||s?n:function(e){n&&n(e),e.defaultPrevented||m(e)},ref:t,target:l}))}));var _h,Ch,Ph,Dh;function Rh(e){let t=q.useRef(wh(e)),r=q.useRef(!1),n=eh(),i=q.useMemo((()=>function(e,t){let r=wh(e);return t&&t.forEach(((e,n)=>{r.has(n)||t.getAll(n).forEach((e=>{r.append(n,e)}))})),r}(n.search,r.current?null:t.current)),[n.search]),s=rh(),a=q.useCallback(((e,t)=>{const n=wh("function"==typeof e?e(i):e);r.current=!0,s("?"+n,t)}),[s,i]);return[i,a]}function Ih(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(null==e||e(n),!1===r||!n.defaultPrevented)return null==t?void 0:t(n)}}function Oh(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function Nh(...e){return t=>{let r=!1;const n=e.map((e=>{const n=Oh(e,t);return r||"function"!=typeof n||(r=!0),n}));if(r)return()=>{for(let t=0;t<n.length;t++){const r=n[t];"function"==typeof r?r():Oh(e[t],null)}}}}function jh(...e){return q.useCallback(Nh(...e),e)}function Lh(e,t=[]){let r=[];const n=()=>{const t=r.map((e=>q.createContext(e)));return function(r){const n=(null==r?void 0:r[e])||t;return q.useMemo((()=>({[`__scope${e}`]:{...r,[e]:n}})),[r,n])}};return n.scopeName=e,[function(t,n){const i=q.createContext(n),s=r.length;r=[...r,n];const a=t=>{var r;const{scope:n,children:a,...o}=t,l=(null==(r=null==n?void 0:n[e])?void 0:r[s])||i,c=q.useMemo((()=>o),Object.values(o));return Z.jsx(l.Provider,{value:c,children:a})};return a.displayName=t+"Provider",[a,function(r,a){var o;const l=(null==(o=null==a?void 0:a[e])?void 0:o[s])||i,c=q.useContext(l);if(c)return c;if(void 0!==n)return n;throw new Error(`\`${r}\` must be used within \`${t}\``)}]},Mh(n,...t)]}function Mh(...e){const t=e[0];if(1===e.length)return t;const r=()=>{const r=e.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(e){const n=r.reduce(((t,{useScope:r,scopeName:n})=>({...t,...r(e)[`__scope${n}`]})),{});return q.useMemo((()=>({[`__scope${t.scopeName}`]:n})),[n])}};return r.scopeName=t.scopeName,r}function Fh(e){const t=Bh(e),r=q.forwardRef(((e,r)=>{const{children:n,...i}=e,s=q.Children.toArray(n),a=s.find(qh);if(a){const e=a.props.children,n=s.map((t=>t===a?q.Children.count(e)>1?q.Children.only(null):q.isValidElement(e)?e.props.children:null:t));return Z.jsx(t,{...i,ref:r,children:q.isValidElement(e)?q.cloneElement(e,void 0,n):null})}return Z.jsx(t,{...i,ref:r,children:n})}));return r.displayName=`${e}.Slot`,r}(Ch=_h||(_h={})).UseScrollRestoration="useScrollRestoration",Ch.UseSubmit="useSubmit",Ch.UseSubmitFetcher="useSubmitFetcher",Ch.UseFetcher="useFetcher",Ch.useViewTransitionState="useViewTransitionState",(Dh=Ph||(Ph={})).UseFetcher="useFetcher",Dh.UseFetchers="useFetchers",Dh.UseScrollRestoration="useScrollRestoration";var Uh=Fh("Slot");function Bh(e){const t=q.forwardRef(((e,t)=>{const{children:r,...n}=e,i=jh(q.isValidElement(r)?function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;if(i)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(r):void 0,t);if(q.isValidElement(r)){const e=function(e,t){const r={...t};for(const n in t){const i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]={...i,...s}:"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==q.Fragment&&(e.ref=i),q.cloneElement(r,e)}return q.Children.count(r)>1?q.Children.only(null):null}));return t.displayName=`${e}.SlotClone`,t}var $h=Symbol("radix.slottable");function zh(e){const t=({children:e})=>Z.jsx(Z.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=$h,t}function qh(e){return q.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===$h}function Vh(e){const t=e+"CollectionProvider",[r,n]=Lh(t),[i,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=e=>{const{scope:t,children:r}=e,n=V.useRef(null),s=V.useRef(new Map).current;return Z.jsx(i,{scope:t,itemMap:s,collectionRef:n,children:r})};a.displayName=t;const o=e+"CollectionSlot",l=Fh(o),c=V.forwardRef(((e,t)=>{const{scope:r,children:n}=e,i=jh(t,s(o,r).collectionRef);return Z.jsx(l,{ref:i,children:n})}));c.displayName=o;const u=e+"CollectionItemSlot",d="data-radix-collection-item",h=Fh(u),f=V.forwardRef(((e,t)=>{const{scope:r,children:n,...i}=e,a=V.useRef(null),o=jh(t,a),l=s(u,r);return V.useEffect((()=>(l.itemMap.set(a,{ref:a,...i}),()=>{l.itemMap.delete(a)}))),Z.jsx(h,{[d]:"",ref:o,children:n})}));return f.displayName=u,[{Provider:a,Slot:c,ItemSlot:f},function(t){const r=s(e+"CollectionConsumer",t),n=V.useCallback((()=>{const e=r.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${d}]`)),n=Array.from(r.itemMap.values()).sort(((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current)));return n}),[r.collectionRef,r.itemMap]);return n},n]}var Kh=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce(((e,t)=>{const r=Fh(`Primitive.${t}`),n=q.forwardRef(((e,n)=>{const{asChild:i,...s}=e,a=i?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),Z.jsx(a,{...s,ref:n})}));return n.displayName=`Primitive.${t}`,{...e,[t]:n}}),{});function Hh(e,t){e&&ad.flushSync((()=>e.dispatchEvent(t)))}function Gh(e){const t=q.useRef(e);return q.useEffect((()=>{t.current=e})),q.useMemo((()=>(...e)=>{var r;return null==(r=t.current)?void 0:r.call(t,...e)}),[])}function Wh(e,t=(null==globalThis?void 0:globalThis.document)){const r=Gh(e);q.useEffect((()=>{const e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})}),[r,t])}var Qh,Yh="dismissableLayer.update",Xh="dismissableLayer.pointerDownOutside",Jh="dismissableLayer.focusOutside",Zh=q.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ef=q.forwardRef(((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...l}=e,c=q.useContext(Zh),[u,d]=q.useState(null),h=(null==u?void 0:u.ownerDocument)??(null==globalThis?void 0:globalThis.document),[,f]=q.useState({}),p=jh(t,(e=>d(e))),g=Array.from(c.layers),[m]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(m),v=u?g.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,w=v>=y,x=function(e,t=(null==globalThis?void 0:globalThis.document)){const r=Gh(e),n=q.useRef(!1),i=q.useRef((()=>{}));return q.useEffect((()=>{const e=e=>{if(e.target&&!n.current){let n=function(){nf(Xh,r,s,{discrete:!0})};const s={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=n,t.addEventListener("click",i.current,{once:!0})):n()}else t.removeEventListener("click",i.current);n.current=!1},s=window.setTimeout((()=>{t.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}}),[t,r]),{onPointerDownCapture:()=>n.current=!0}}((e=>{const t=e.target,r=[...c.branches].some((e=>e.contains(t)));w&&!r&&(null==i||i(e),null==a||a(e),e.defaultPrevented||null==o||o())}),h),S=function(e,t=(null==globalThis?void 0:globalThis.document)){const r=Gh(e),n=q.useRef(!1);return q.useEffect((()=>{const e=e=>{if(e.target&&!n.current){nf(Jh,r,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)}),[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}((e=>{const t=e.target;[...c.branches].some((e=>e.contains(t)))||(null==s||s(e),null==a||a(e),e.defaultPrevented||null==o||o())}),h);return Wh((e=>{v===c.layers.size-1&&(null==n||n(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))}),h),q.useEffect((()=>{if(u)return r&&(0===c.layersWithOutsidePointerEventsDisabled.size&&(Qh=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),rf(),()=>{r&&1===c.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=Qh)}}),[u,h,r,c]),q.useEffect((()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),rf())}),[u,c]),q.useEffect((()=>{const e=()=>f({});return document.addEventListener(Yh,e),()=>document.removeEventListener(Yh,e)}),[]),Z.jsx(Kh.div,{...l,ref:p,style:{pointerEvents:b?w?"auto":"none":void 0,...e.style},onFocusCapture:Ih(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Ih(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Ih(e.onPointerDownCapture,x.onPointerDownCapture)})}));ef.displayName="DismissableLayer";var tf=q.forwardRef(((e,t)=>{const r=q.useContext(Zh),n=q.useRef(null),i=jh(t,n);return q.useEffect((()=>{const e=n.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}}),[r.branches]),Z.jsx(Kh.div,{...e,ref:i})}));function rf(){const e=new CustomEvent(Yh);document.dispatchEvent(e)}function nf(e,t,r,{discrete:n}){const i=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?Hh(i,s):i.dispatchEvent(s)}tf.displayName="DismissableLayerBranch";var sf=ef,af=tf,of=(null==globalThis?void 0:globalThis.document)?q.useLayoutEffect:()=>{},lf=q.forwardRef(((e,t)=>{var r;const{container:n,...i}=e,[s,a]=q.useState(!1);of((()=>a(!0)),[]);const o=n||s&&(null==(r=null==globalThis?void 0:globalThis.document)?void 0:r.body);return o?od.createPortal(Z.jsx(Kh.div,{...i,ref:t}),o):null}));lf.displayName="Portal";var cf=e=>{const{present:t,children:r}=e,n=function(e){const[t,r]=q.useState(),n=q.useRef(null),i=q.useRef(e),s=q.useRef("none"),a=e?"mounted":"unmounted",[o,l]=function(e,t){return q.useReducer(((e,r)=>t[e][r]??e),e)}(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return q.useEffect((()=>{const e=uf(n.current);s.current="mounted"===o?e:"none"}),[o]),of((()=>{const t=n.current,r=i.current;if(r!==e){const n=s.current,a=uf(t);if(e)l("MOUNT");else if("none"===a||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(r&&n!==a?"ANIMATION_OUT":"UNMOUNT")}i.current=e}}),[e,l]),of((()=>{if(t){let e;const r=t.ownerDocument.defaultView??window,a=s=>{const a=uf(n.current).includes(s.animationName);if(s.target===t&&a&&(l("ANIMATION_END"),!i.current)){const n=t.style.animationFillMode;t.style.animationFillMode="forwards",e=r.setTimeout((()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=n)}))}},o=e=>{e.target===t&&(s.current=uf(n.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",a),t.addEventListener("animationend",a),()=>{r.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",a),t.removeEventListener("animationend",a)}}l("ANIMATION_END")}),[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:q.useCallback((e=>{n.current=e?getComputedStyle(e):null,r(e)}),[])}}(t),i="function"==typeof r?r({present:n.isPresent}):q.Children.only(r),s=jh(n.ref,function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;if(i)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(i));return"function"==typeof r||n.isPresent?q.cloneElement(i,{ref:s}):null};function uf(e){return(null==e?void 0:e.animationName)||"none"}cf.displayName="Presence";var df=K[" useInsertionEffect ".trim().toString()]||of;function hf({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[i,s,a]=function({defaultProp:e,onChange:t}){const[r,n]=q.useState(e),i=q.useRef(r),s=q.useRef(t);return df((()=>{s.current=t}),[t]),q.useEffect((()=>{var e;i.current!==r&&(null==(e=s.current)||e.call(s,r),i.current=r)}),[r,i]),[r,n,s]}({defaultProp:t,onChange:r}),o=void 0!==e,l=o?e:i;{const t=q.useRef(void 0!==e);q.useEffect((()=>{const e=t.current;if(e!==o){}t.current=o}),[o,n])}const c=q.useCallback((t=>{var r;if(o){const n=function(e){return"function"==typeof e}(t)?t(e):t;n!==e&&(null==(r=a.current)||r.call(a,n))}else s(t)}),[o,e,s,a]);return[l,c]}var ff=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),pf=q.forwardRef(((e,t)=>Z.jsx(Kh.span,{...e,ref:t,style:{...ff,...e.style}})));pf.displayName="VisuallyHidden";var gf="ToastProvider",[mf,yf,vf]=Vh("Toast"),[bf,wf]=Lh("Toast",[vf]),[xf,Sf]=bf(gf),Ef=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:a}=e,[o,l]=q.useState(null),[c,u]=q.useState(0),d=q.useRef(!1),h=q.useRef(!1);return r.trim(),Z.jsx(mf.Provider,{scope:t,children:Z.jsx(xf,{scope:t,label:r,duration:n,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:o,onViewportChange:l,onToastAdd:q.useCallback((()=>u((e=>e+1))),[]),onToastRemove:q.useCallback((()=>u((e=>e-1))),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:a})})};Ef.displayName=gf;var Tf="ToastViewport",kf=["F8"],Af="toast.viewportPause",_f="toast.viewportResume",Cf=q.forwardRef(((e,t)=>{const{__scopeToast:r,hotkey:n=kf,label:i="Notifications ({hotkey})",...s}=e,a=Sf(Tf,r),o=yf(r),l=q.useRef(null),c=q.useRef(null),u=q.useRef(null),d=q.useRef(null),h=jh(t,d,a.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=a.toastCount>0;q.useEffect((()=>{const e=e=>{var t;0!==n.length&&n.every((t=>e[t]||e.code===t))&&(null==(t=d.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[n]),q.useEffect((()=>{const e=l.current,t=d.current;if(p&&e&&t){const r=()=>{if(!a.isClosePausedRef.current){const e=new CustomEvent(Af);t.dispatchEvent(e),a.isClosePausedRef.current=!0}},n=()=>{if(a.isClosePausedRef.current){const e=new CustomEvent(_f);t.dispatchEvent(e),a.isClosePausedRef.current=!1}},i=t=>{!e.contains(t.relatedTarget)&&n()},s=()=>{e.contains(document.activeElement)||n()};return e.addEventListener("focusin",r),e.addEventListener("focusout",i),e.addEventListener("pointermove",r),e.addEventListener("pointerleave",s),window.addEventListener("blur",r),window.addEventListener("focus",n),()=>{e.removeEventListener("focusin",r),e.removeEventListener("focusout",i),e.removeEventListener("pointermove",r),e.removeEventListener("pointerleave",s),window.removeEventListener("blur",r),window.removeEventListener("focus",n)}}}),[p,a.isClosePausedRef]);const g=q.useCallback((({tabbingDirection:e})=>{const t=o().map((t=>{const r=t.ref.current,n=[r,...Hf(r)];return"forwards"===e?n:n.reverse()}));return("forwards"===e?t.reverse():t).flat()}),[o]);return q.useEffect((()=>{const e=d.current;if(e){const t=t=>{var r,n,i;const s=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!s){const s=document.activeElement,a=t.shiftKey;if(t.target===e&&a)return void(null==(r=c.current)||r.focus());const o=g({tabbingDirection:a?"backwards":"forwards"}),l=o.findIndex((e=>e===s));Gf(o.slice(l+1))?t.preventDefault():a?null==(n=c.current)||n.focus():null==(i=u.current)||i.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}}),[o,g]),Z.jsxs(af,{ref:l,role:"region","aria-label":i.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&Z.jsx(Df,{ref:c,onFocusFromOutsideViewport:()=>{Gf(g({tabbingDirection:"forwards"}))}}),Z.jsx(mf.Slot,{scope:r,children:Z.jsx(Kh.ol,{tabIndex:-1,...s,ref:h})}),p&&Z.jsx(Df,{ref:u,onFocusFromOutsideViewport:()=>{Gf(g({tabbingDirection:"backwards"}))}})]})}));Cf.displayName=Tf;var Pf="ToastFocusProxy",Df=q.forwardRef(((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=e,s=Sf(Pf,r);return Z.jsx(pf,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:e=>{var t;const r=e.relatedTarget;!(null==(t=s.viewport)?void 0:t.contains(r))&&n()}})}));Df.displayName=Pf;var Rf="Toast",If=q.forwardRef(((e,t)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:s,...a}=e,[o,l]=hf({prop:n,defaultProp:i??!0,onChange:s,caller:Rf});return Z.jsx(cf,{present:r||o,children:Z.jsx(jf,{open:o,...a,ref:t,onClose:()=>l(!1),onPause:Gh(e.onPause),onResume:Gh(e.onResume),onSwipeStart:Ih(e.onSwipeStart,(e=>{e.currentTarget.setAttribute("data-swipe","start")})),onSwipeMove:Ih(e.onSwipeMove,(e=>{const{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${r}px`)})),onSwipeCancel:Ih(e.onSwipeCancel,(e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")})),onSwipeEnd:Ih(e.onSwipeEnd,(e=>{const{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${r}px`),l(!1)}))})})}));If.displayName=Rf;var[Of,Nf]=bf(Rf,{onClose(){}}),jf=q.forwardRef(((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:s,onClose:a,onEscapeKeyDown:o,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:f,...p}=e,g=Sf(Rf,r),[m,y]=q.useState(null),v=jh(t,(e=>y(e))),b=q.useRef(null),w=q.useRef(null),x=i||g.duration,S=q.useRef(0),E=q.useRef(x),T=q.useRef(0),{onToastAdd:k,onToastRemove:A}=g,_=Gh((()=>{var e;(null==m?void 0:m.contains(document.activeElement))&&(null==(e=g.viewport)||e.focus()),a()})),C=q.useCallback((e=>{e&&e!==1/0&&(window.clearTimeout(T.current),S.current=(new Date).getTime(),T.current=window.setTimeout(_,e))}),[_]);q.useEffect((()=>{const e=g.viewport;if(e){const t=()=>{C(E.current),null==c||c()},r=()=>{const e=(new Date).getTime()-S.current;E.current=E.current-e,window.clearTimeout(T.current),null==l||l()};return e.addEventListener(Af,r),e.addEventListener(_f,t),()=>{e.removeEventListener(Af,r),e.removeEventListener(_f,t)}}}),[g.viewport,x,l,c,C]),q.useEffect((()=>{s&&!g.isClosePausedRef.current&&C(x)}),[s,x,g.isClosePausedRef,C]),q.useEffect((()=>(k(),()=>A())),[k,A]);const P=q.useMemo((()=>m?qf(m):null),[m]);return g.viewport?Z.jsxs(Z.Fragment,{children:[P&&Z.jsx(Lf,{__scopeToast:r,role:"status","aria-live":"foreground"===n?"assertive":"polite","aria-atomic":!0,children:P}),Z.jsx(Of,{scope:r,onClose:_,children:ad.createPortal(Z.jsx(mf.ItemSlot,{scope:r,children:Z.jsx(sf,{asChild:!0,onEscapeKeyDown:Ih(o,(()=>{g.isFocusedToastEscapeKeyDownRef.current||_(),g.isFocusedToastEscapeKeyDownRef.current=!1})),children:Z.jsx(Kh.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":g.swipeDirection,...p,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ih(e.onKeyDown,(e=>{"Escape"===e.key&&(null==o||o(e.nativeEvent),e.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,_()))})),onPointerDown:Ih(e.onPointerDown,(e=>{0===e.button&&(b.current={x:e.clientX,y:e.clientY})})),onPointerMove:Ih(e.onPointerMove,(e=>{if(!b.current)return;const t=e.clientX-b.current.x,r=e.clientY-b.current.y,n=Boolean(w.current),i=["left","right"].includes(g.swipeDirection),s=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,a=i?s(0,t):0,o=i?0:s(0,r),l="touch"===e.pointerType?10:2,c={x:a,y:o},h={originalEvent:e,delta:c};n?(w.current=c,Vf("toast.swipeMove",d,h,{discrete:!1})):Kf(c,g.swipeDirection,l)?(w.current=c,Vf("toast.swipeStart",u,h,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(r)>l)&&(b.current=null)})),onPointerUp:Ih(e.onPointerUp,(e=>{const t=w.current,r=e.target;if(r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),w.current=null,b.current=null,t){const r=e.currentTarget,n={originalEvent:e,delta:t};Kf(t,g.swipeDirection,g.swipeThreshold)?Vf("toast.swipeEnd",f,n,{discrete:!0}):Vf("toast.swipeCancel",h,n,{discrete:!0}),r.addEventListener("click",(e=>e.preventDefault()),{once:!0})}}))})})}),g.viewport)})]}):null})),Lf=e=>{const{__scopeToast:t,children:r,...n}=e,i=Sf(Rf,t),[s,a]=q.useState(!1),[o,l]=q.useState(!1);return function(e=()=>{}){const t=Gh(e);of((()=>{let e=0,r=0;return e=window.requestAnimationFrame((()=>r=window.requestAnimationFrame(t))),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(r)}}),[t])}((()=>a(!0))),q.useEffect((()=>{const e=window.setTimeout((()=>l(!0)),1e3);return()=>window.clearTimeout(e)}),[]),o?null:Z.jsx(lf,{asChild:!0,children:Z.jsx(pf,{...n,children:s&&Z.jsxs(Z.Fragment,{children:[i.label," ",r]})})})},Mf=q.forwardRef(((e,t)=>{const{__scopeToast:r,...n}=e;return Z.jsx(Kh.div,{...n,ref:t})}));Mf.displayName="ToastTitle";var Ff=q.forwardRef(((e,t)=>{const{__scopeToast:r,...n}=e;return Z.jsx(Kh.div,{...n,ref:t})}));Ff.displayName="ToastDescription";var Uf=q.forwardRef(((e,t)=>{const{altText:r,...n}=e;return r.trim()?Z.jsx(zf,{altText:r,asChild:!0,children:Z.jsx($f,{...n,ref:t})}):null}));Uf.displayName="ToastAction";var Bf="ToastClose",$f=q.forwardRef(((e,t)=>{const{__scopeToast:r,...n}=e,i=Nf(Bf,r);return Z.jsx(zf,{asChild:!0,children:Z.jsx(Kh.button,{type:"button",...n,ref:t,onClick:Ih(e.onClick,i.onClose)})})}));$f.displayName=Bf;var zf=q.forwardRef(((e,t)=>{const{__scopeToast:r,altText:n,...i}=e;return Z.jsx(Kh.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:t})}));function qf(e){const t=[];return Array.from(e.childNodes).forEach((e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const r=e.ariaHidden||e.hidden||"none"===e.style.display,n=""===e.dataset.radixToastAnnounceExclude;if(!r)if(n){const r=e.dataset.radixToastAnnounceAlt;r&&t.push(r)}else t.push(...qf(e))}})),t}function Vf(e,t,r,{discrete:n}){const i=r.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?Hh(i,s):i.dispatchEvent(s)}var Kf=(e,t,r=0)=>{const n=Math.abs(e.x),i=Math.abs(e.y),s=n>i;return"left"===t||"right"===t?s&&n>r:!s&&i>r};function Hf(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Gf(e){const t=document.activeElement;return e.some((e=>e===t||(e.focus(),document.activeElement!==t)))}var Wf=Ef,Qf=Cf,Yf=If,Xf=Mf,Jf=Ff,Zf=Uf,ep=$f;function tp(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=tp(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function rp(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=tp(e))&&(n&&(n+=" "),n+=t);return n}const np=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,ip=rp,sp=(e,t)=>r=>{var n;if(null==(null==t?void 0:t.variants))return ip(e,null==r?void 0:r.class,null==r?void 0:r.className);const{variants:i,defaultVariants:s}=t,a=Object.keys(i).map((e=>{const t=null==r?void 0:r[e],n=null==s?void 0:s[e];if(null===t)return null;const a=np(t)||np(n);return i[e][a]})),o=r&&Object.entries(r).reduce(((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e}),{}),l=null==t||null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce(((e,t)=>{let{class:r,className:n,...i}=t;return Object.entries(i).every((e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...s,...o}[t]):{...s,...o}[t]===r}))?[...e,r,n]:e}),[]);return ip(e,a,l,null==r?void 0:r.class,null==r?void 0:r.className)};var ap={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const op=(e,t)=>{const r=q.forwardRef((({color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:s,children:a,...o},l)=>{return q.createElement("svg",{ref:l,...ap,width:n,height:n,stroke:r,strokeWidth:s?24*Number(i)/Number(n):i,className:`lucide lucide-${c=e,c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,...o},[...t.map((([e,t])=>q.createElement(e,t))),...(Array.isArray(a)?a:[a])||[]]);var c}));return r.displayName=`${e}`,r},lp=op("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),cp=op("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),up=op("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),dp=op("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),hp=op("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),fp=op("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),pp=op("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),gp=op("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),mp=op("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),yp=op("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),vp=op("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),bp=op("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),wp=op("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),xp=op("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Sp=op("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Ep=op("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Tp=op("CornerLeftUp",[["polyline",{points:"14 9 9 4 4 9",key:"m9oyvo"}],["path",{d:"M20 20h-7a4 4 0 0 1-4-4V4",key:"1blwi3"}]]),kp=op("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Ap=op("DivideSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}],["line",{x1:"12",x2:"12",y1:"16",y2:"16",key:"aqc6ln"}],["line",{x1:"12",x2:"12",y1:"8",y2:"8",key:"1mkcni"}]]),_p=op("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Cp=op("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Pp=op("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Dp=op("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),Rp=op("FileEdit",[["path",{d:"M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5",key:"1bg6eb"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z",key:"1rgxu8"}]]),Ip=op("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Op=op("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),Np=op("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),jp=op("Fish",[["path",{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z",key:"15baut"}],["path",{d:"M18 12v.5",key:"18hhni"}],["path",{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86",key:"16dt7o"}],["path",{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33",key:"l9di03"}],["path",{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4",key:"1kjonw"}],["path",{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98",key:"1zlm23"}]]),Lp=op("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),Mp=op("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Fp=op("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),Up=op("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),Bp=op("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),$p=op("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),zp=op("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),qp=op("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Vp=op("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),Kp=op("ListMusic",[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]]),Hp=op("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Gp=op("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Wp=op("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Qp=op("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Yp=op("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Xp=op("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),Jp=op("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Zp=op("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),eg=op("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]),tg=op("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),rg=op("MousePointerClick",[["path",{d:"m9 9 5 12 1.8-5.2L21 14Z",key:"1b76lo"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}]]),ng=op("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),ig=op("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),sg=op("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),ag=op("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),og=op("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),lg=op("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),cg=op("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),ug=op("PlusSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),dg=op("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),hg=op("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),fg=op("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),pg=op("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),gg=op("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]),mg=op("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),yg=op("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),vg=op("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),bg=op("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),wg=op("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]),xg=op("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),Sg=op("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Eg=op("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Tg=op("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),kg=op("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]),Ag=op("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),_g=op("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Cg=op("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),Pg=op("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),Dg=op("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),Rg=op("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),Ig=op("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),Og=op("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Ng=op("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),jg=op("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),Lg=op("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Mg(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=Fg(e))&&(n&&(n+=" "),n+=t);return n}function Fg(e){if("string"==typeof e)return e;for(var t,r="",n=0;n<e.length;n++)e[n]&&(t=Fg(e[n]))&&(r&&(r+=" "),r+=t);return r}function Ug(e){var t=function(e){var t=e.theme,r=e.prefix,n={nextPart:new Map,validators:[]},i=function(e,t){if(!t)return e;return e.map((function(e){return[e[0],e[1].map((function(e){return"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map((function(e){var r=e[0],n=e[1];return[t+r,n]}))):e}))]}))}(Object.entries(e.classGroups),r);return i.forEach((function(e){var r=e[0];zg(e[1],n,r,t)})),n}(e),r=e.conflictingClassGroups,n=e.conflictingClassGroupModifiers,i=void 0===n?{}:n;return{getClassGroupId:function(e){var r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),Bg(r,t)||function(e){if($g.test(e)){var t=$g.exec(e)[1],r=null==t?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}(e)},getConflictingClassGroupIds:function(e,t){var n=r[e]||[];return t&&i[e]?[].concat(n,i[e]):n}}}function Bg(e,t){var r;if(0===e.length)return t.classGroupId;var n=e[0],i=t.nextPart.get(n),s=i?Bg(e.slice(1),i):void 0;if(s)return s;if(0!==t.validators.length){var a=e.join("-");return null==(r=t.validators.find((function(e){return(0,e.validator)(a)})))?void 0:r.classGroupId}}var $g=/^\[(.+)\]$/;function zg(e,t,r,n){e.forEach((function(e){if("string"!=typeof e){if("function"==typeof e)return e.isThemeGetter?void zg(e(n),t,r,n):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach((function(e){var i=e[0];zg(e[1],qg(t,i),r,n)}))}else{(""===e?t:qg(t,e)).classGroupId=r}}))}function qg(e,t){var r=e;return t.split("-").forEach((function(e){r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)})),r}function Vg(e){if(e<1)return{get:function(){},set:function(){}};var t=0,r=new Map,n=new Map;function i(i,s){r.set(i,s),++t>e&&(t=0,n=r,r=new Map)}return{get:function(e){var t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(i(e,t),t):void 0},set:function(e,t){r.has(e)?r.set(e,t):i(e,t)}}}function Kg(e){var t=e.separator||":",r=1===t.length,n=t[0],i=t.length;return function(e){for(var s,a=[],o=0,l=0,c=0;c<e.length;c++){var u=e[c];if(0===o){if(u===n&&(r||e.slice(c,c+i)===t)){a.push(e.slice(l,c)),l=c+i;continue}if("/"===u){s=c;continue}}"["===u?o++:"]"===u&&o--}var d=0===a.length?e:e.substring(l),h=d.startsWith("!");return{modifiers:a,hasImportantModifier:h,baseClassName:h?d.substring(1):d,maybePostfixModifierPosition:s&&s>l?s-l:void 0}}}var Hg=/\s+/;function Gg(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i,s,a=function(e){var r=t[0],l=t.slice(1).reduce((function(e,t){return t(e)}),r());return n=function(e){return{cache:Vg(e.cacheSize),splitModifiers:Kg(e),...Ug(e)}}(l),i=n.cache.get,s=n.cache.set,a=o,o(e)};function o(e){var t=i(e);if(t)return t;var r=function(e,t){var r=t.splitModifiers,n=t.getClassGroupId,i=t.getConflictingClassGroupIds,s=new Set;return e.trim().split(Hg).map((function(e){var t=r(e),i=t.modifiers,s=t.hasImportantModifier,a=t.baseClassName,o=t.maybePostfixModifierPosition,l=n(o?a.substring(0,o):a),c=Boolean(o);if(!l){if(!o)return{isTailwindClass:!1,originalClassName:e};if(!(l=n(a)))return{isTailwindClass:!1,originalClassName:e};c=!1}var u=function(e){if(e.length<=1)return e;var t=[],r=[];return e.forEach((function(e){"["===e[0]?(t.push.apply(t,r.sort().concat([e])),r=[]):r.push(e)})),t.push.apply(t,r.sort()),t}(i).join(":");return{isTailwindClass:!0,modifierId:s?u+"!":u,classGroupId:l,originalClassName:e,hasPostfixModifier:c}})).reverse().filter((function(e){if(!e.isTailwindClass)return!0;var t=e.modifierId,r=e.classGroupId,n=e.hasPostfixModifier,a=t+r;return!s.has(a)&&(s.add(a),i(r,n).forEach((function(e){return s.add(t+e)})),!0)})).reverse().map((function(e){return e.originalClassName})).join(" ")}(e,n);return s(e,r),r}return function(){return a(Mg.apply(null,arguments))}}function Wg(e){var t=function(t){return t[e]||[]};return t.isThemeGetter=!0,t}var Qg=/^\[(?:([a-z-]+):)?(.+)\]$/i,Yg=/^\d+\/\d+$/,Xg=new Set(["px","full","screen"]),Jg=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Zg=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,em=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function tm(e){return om(e)||Xg.has(e)||Yg.test(e)||rm(e)}function rm(e){return pm(e,"length",gm)}function nm(e){return pm(e,"size",mm)}function im(e){return pm(e,"position",mm)}function sm(e){return pm(e,"url",ym)}function am(e){return pm(e,"number",om)}function om(e){return!Number.isNaN(Number(e))}function lm(e){return e.endsWith("%")&&om(e.slice(0,-1))}function cm(e){return vm(e)||pm(e,"number",vm)}function um(e){return Qg.test(e)}function dm(){return!0}function hm(e){return Jg.test(e)}function fm(e){return pm(e,"",bm)}function pm(e,t,r){var n=Qg.exec(e);return!!n&&(n[1]?n[1]===t:r(n[2]))}function gm(e){return Zg.test(e)}function mm(){return!1}function ym(e){return e.startsWith("url(")}function vm(e){return Number.isInteger(Number(e))}function bm(e){return em.test(e)}function wm(){var e=Wg("colors"),t=Wg("spacing"),r=Wg("blur"),n=Wg("brightness"),i=Wg("borderColor"),s=Wg("borderRadius"),a=Wg("borderSpacing"),o=Wg("borderWidth"),l=Wg("contrast"),c=Wg("grayscale"),u=Wg("hueRotate"),d=Wg("invert"),h=Wg("gap"),f=Wg("gradientColorStops"),p=Wg("gradientColorStopPositions"),g=Wg("inset"),m=Wg("margin"),y=Wg("opacity"),v=Wg("padding"),b=Wg("saturate"),w=Wg("scale"),x=Wg("sepia"),S=Wg("skew"),E=Wg("space"),T=Wg("translate"),k=function(){return["auto",um,t]},A=function(){return[um,t]},_=function(){return["",tm]},C=function(){return["auto",om,um]},P=function(){return["","0",um]},D=function(){return[om,am]},R=function(){return[om,um]};return{cacheSize:500,theme:{colors:[dm],spacing:[tm],blur:["none","",hm,um],brightness:D(),borderColor:[e],borderRadius:["none","","full",hm,um],borderSpacing:A(),borderWidth:_(),contrast:D(),grayscale:P(),hueRotate:R(),invert:P(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[lm,rm],inset:k(),margin:k(),opacity:D(),padding:A(),saturate:D(),scale:D(),sepia:P(),skew:R(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",um]}],container:["container"],columns:[{columns:[hm]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],[um])}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",cm]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",um]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",cm]}],"grid-cols":[{"grid-cols":[dm]}],"col-start-end":[{col:["auto",{span:["full",cm]},um]}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":[dm]}],"row-start-end":[{row:["auto",{span:[cm]},um]}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",um]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",um]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(["start","end","center","between","around","evenly","stretch"])}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(["start","end","center","between","around","evenly","stretch"],["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(["start","end","center","between","around","evenly","stretch"],["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",um,t]}],"min-w":[{"min-w":["min","max","fit",um,tm]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[hm]},hm,um]}],h:[{h:[um,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",um,tm]}],"max-h":[{"max-h":[um,t,"min","max","fit"]}],"font-size":[{text:["base",hm,rm]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",am]}],"font-family":[{font:[dm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",um]}],"line-clamp":[{"line-clamp":["none",om,am]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",um,tm]}],"list-image":[{"list-image":["none",um]}],"list-style-type":[{list:["none","disc","decimal",um]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(["solid","dashed","dotted","double","none"],["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",tm]}],"underline-offset":[{"underline-offset":["auto",um,tm]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",um]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",um]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],[im])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",nm]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},sm]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[].concat(["solid","dashed","dotted","double","none"],["hidden"])}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(["solid","dashed","dotted","double","none"])}],"outline-offset":[{"outline-offset":[um,tm]}],"outline-w":[{outline:[tm]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:_()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[tm]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",hm,fm]}],"shadow-color":[{shadow:[dm]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",hm,um]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",um]}],duration:[{duration:R()}],ease:[{ease:["linear","in","out","in-out",um]}],delay:[{delay:R()}],animate:[{animate:["none","spin","ping","pulse","bounce",um]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[cm,um]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",um]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",um]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",um]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[tm,am]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var xm=Gg(wm);function Sm(...e){return xm(rp(e))}const Em=(e,t=!1)=>{if(isNaN(e)||e<0)return"0:00";const r=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%60);return t||r>0?`${r}:${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${n}:${i.toString().padStart(2,"0")}`},Tm=(e,t=!1)=>Em(e,t),km=(e,t="ru")=>{if(!e)return"";if("string"==typeof e&&/^\d{2}\.\d{2}\.\d{2}$/.test(e))return e;try{if(/^\d{4}-\d{2}-\d{2}$/.test(e)){const[t,r,n]=e.split("-").map((e=>parseInt(e,10)));return`${String(n).padStart(2,"0")}.${String(r).padStart(2,"0")}.${String(t).slice(-2)}`}const t=new Date(e),r=t.getFullYear(),n=t.getMonth()+1,i=t.getDate();return`${String(i).padStart(2,"0")}.${String(n).padStart(2,"0")}.${String(r).slice(-2)}`}catch(r){return e}},Am=(e,t="ru")=>{if(!e)return 1;const r=e.replace(/<[^>]+>/g," ").trim().split(/\s+/).filter((e=>e.length>0)).length,n="ru"===t?200:250;return Math.max(1,Math.ceil(r/n))},_m=(e,t="ru")=>{if(!e)return"";try{const r=new Date(e),n={ru:"ru-RU",es:"es-ES",en:"en-US",de:"de-DE",fr:"fr-FR",pl:"pl-PL"}[t]||"ru-RU";return new Intl.DateTimeFormat(n,{year:"numeric",month:"long",day:"numeric"}).format(r)}catch(r){return""}},Cm=Wf,Pm=V.forwardRef((({className:e,...t},r)=>Z.jsx(Qf,{ref:r,className:Sm("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t})));Pm.displayName=Qf.displayName;const Dm=sp("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border-slate-700 bg-slate-800 text-slate-50",destructive:"destructive group border-red-500/50 bg-red-900 text-red-50",info:"info group border-blue-500/50 bg-blue-900 text-blue-50"}},defaultVariants:{variant:"default"}}),Rm=V.forwardRef((({className:e,variant:t,...r},n)=>Z.jsx(Yf,{ref:n,className:Sm(Dm({variant:t}),e),...r})));Rm.displayName=Yf.displayName;V.forwardRef((({className:e,...t},r)=>Z.jsx(Zf,{ref:r,className:Sm("inline-flex h-8 shrink-0 items-center justify-center rounded-md border border-slate-600 bg-transparent px-3 text-sm font-medium ring-offset-slate-900 transition-colors hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-red-400/30 group-[.destructive]:hover:border-red-500/50 group-[.destructive]:hover:bg-red-800 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400",e),...t}))).displayName=Zf.displayName;const Im=V.forwardRef((({className:e,...t},r)=>Z.jsx(ep,{ref:r,className:Sm("absolute right-2 top-2 rounded-md p-1 text-slate-400 opacity-0 transition-opacity hover:text-slate-100 focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-900",e),"toast-close":"",...t,children:Z.jsx(Ng,{className:"h-4 w-4"})})));Im.displayName=ep.displayName;const Om=V.forwardRef((({className:e,...t},r)=>Z.jsx(Xf,{ref:r,className:Sm("text-sm font-semibold",e),...t})));Om.displayName=Xf.displayName;const Nm=V.forwardRef((({className:e,...t},r)=>Z.jsx(Jf,{ref:r,className:Sm("text-sm opacity-90",e),...t})));Nm.displayName=Jf.displayName;let jm=0;const Lm={state:{toasts:[]},listeners:[],getState:()=>Lm.state,setState:e=>{Lm.state="function"==typeof e?e(Lm.state):{...Lm.state,...e},Lm.listeners.forEach((e=>e(Lm.state)))},subscribe:e=>(Lm.listeners.push(e),()=>{Lm.listeners=Lm.listeners.filter((t=>t!==e))})},Mm=({...e})=>{const t=(jm=(jm+1)%Number.MAX_VALUE,jm.toString()),r=()=>Lm.setState((e=>({...e,toasts:e.toasts.filter((e=>e.id!==t))})));return Lm.setState((n=>({...n,toasts:[{...e,id:t,dismiss:r},...n.toasts].slice(0,1)}))),{id:t,dismiss:r,update:e=>Lm.setState((r=>({...r,toasts:r.toasts.map((r=>r.id===t?{...r,...e}:r))})))}};function Fm(){const[e,t]=q.useState(Lm.getState());return q.useEffect((()=>Lm.subscribe((e=>{t(e)}))),[]),q.useEffect((()=>{const t=[];return e.toasts.forEach((e=>{if(e.duration===1/0)return;const r=setTimeout((()=>{e.dismiss()}),e.duration||5e3);t.push(r)})),()=>{t.forEach((e=>clearTimeout(e)))}}),[e.toasts]),{toast:Mm,toasts:e.toasts}}function Um(){const{toasts:e}=Fm();return Z.jsxs(Cm,{children:[e.map((function({id:e,title:t,description:r,action:n,...i}){const{dismiss:s,...a}=i;return Z.jsxs(Rm,{...a,children:[Z.jsxs("div",{className:"grid gap-1",children:[t&&Z.jsx(Om,{children:t}),r&&Z.jsx(Nm,{children:r})]}),n,Z.jsx(Im,{})]},e)})),Z.jsx(Pm,{})]})}const Bm=()=>Z.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"12",viewBox:"0 0 16 12",fill:"none",className:"inline-block",children:[Z.jsx("rect",{width:"16",height:"4",fill:"#FFFFFF"}),Z.jsx("rect",{y:"4",width:"16",height:"4",fill:"#0039A6"}),Z.jsx("rect",{y:"8",width:"16",height:"4",fill:"#D52B1E"})]}),$m=()=>Z.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"12",viewBox:"0 0 16 12",fill:"none",className:"inline-block",children:[Z.jsx("rect",{y:"0",width:"16",height:"12",fill:"#FFC400"}),Z.jsx("rect",{y:"3",width:"16",height:"6",fill:"#C60B1E"})]}),zm=()=>Z.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"12",viewBox:"0 0 16 12",fill:"none",className:"inline-block",children:[Z.jsx("rect",{width:"16",height:"12",fill:"#FFFFFF"}),Z.jsxs("g",{children:[Z.jsx("rect",{y:"0",width:"16",height:"1",fill:"#B31942"}),Z.jsx("rect",{y:"2",width:"16",height:"1",fill:"#B31942"}),Z.jsx("rect",{y:"4",width:"16",height:"1",fill:"#B31942"}),Z.jsx("rect",{y:"6",width:"16",height:"1",fill:"#B31942"}),Z.jsx("rect",{y:"8",width:"16",height:"1",fill:"#B31942"}),Z.jsx("rect",{y:"10",width:"16",height:"1",fill:"#B31942"})]}),Z.jsx("rect",{width:"7",height:"7",fill:"#0A3161"})]}),qm=()=>Z.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"12",viewBox:"0 0 16 12",fill:"none",className:"inline-block",children:[Z.jsx("rect",{width:"16",height:"4",fill:"#000000"}),Z.jsx("rect",{y:"4",width:"16",height:"4",fill:"#DD0000"}),Z.jsx("rect",{y:"8",width:"16",height:"4",fill:"#FFCE00"})]}),Vm=()=>Z.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"12",viewBox:"0 0 16 12",fill:"none",className:"inline-block",children:[Z.jsx("rect",{width:"5.33",height:"12",fill:"#002395"}),Z.jsx("rect",{x:"5.33",width:"5.34",height:"12",fill:"#FFFFFF"}),Z.jsx("rect",{x:"10.67",width:"5.33",height:"12",fill:"#ED2939"})]}),Km=()=>Z.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"12",viewBox:"0 0 16 12",fill:"none",className:"inline-block",children:[Z.jsx("rect",{width:"16",height:"6",fill:"#FFFFFF"}),Z.jsx("rect",{y:"6",width:"16",height:"6",fill:"#DC143C"})]}),Hm=({currentLanguage:e,onLanguageChange:t,dropdownPosition:r="down"})=>{const[n,i]=q.useState(!1),s=q.useRef(null),a=rh(),o=eh(),l=[{code:"ru",name:"RU",fullName:"",Flag:Bm},{code:"es",name:"ES",fullName:"Espaol",Flag:$m},{code:"en",name:"EN",fullName:"English",Flag:zm},{code:"de",name:"DE",fullName:"Deutsch",Flag:qm},{code:"fr",name:"FR",fullName:"Franais",Flag:Vm},{code:"pl",name:"PL",fullName:"Polski",Flag:Km}],c=l.find((t=>t.code===e));return q.useEffect((()=>{const e=e=>{s.current&&!s.current.contains(e.target)&&i(!1)};if(n){document.addEventListener("mousedown",e);const t=e=>{"Escape"===e.key&&i(!1)};return document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t)}}}),[n]),Z.jsxs("div",{className:"relative z-50",ref:s,children:[Z.jsxs("button",{type:"button",onClick:()=>i(!n),className:"group flex items-center gap-2 px-3 py-2 text-sm bg-slate-800/70 hover:bg-slate-700/70 text-slate-300 rounded-lg border border-slate-600/30 shadow-sm transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/40",children:[Z.jsx(c.Flag,{className:"w-4 h-4"}),Z.jsx("span",{children:c.name}),Z.jsx("svg",{className:"w-4 h-4 text-slate-400 group-hover:text-slate-300 transition-transform "+(n?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&Z.jsxs(Z.Fragment,{children:[Z.jsx("div",{className:"fixed inset-0 bg-transparent",onClick:()=>i(!1)}),Z.jsx("div",{className:"absolute right-0 w-[180px] rounded-lg overflow-hidden bg-slate-800/95 shadow-lg border border-slate-600/30 backdrop-blur-sm "+("up"===r?"bottom-full mb-1":"top-full mt-1"),children:Z.jsx("div",{className:"py-1",children:l.map((r=>Z.jsxs("button",{type:"button",onClick:()=>(r=>{if(r!==e)try{localStorage.setItem("podcastLang",r),i(!1);const e=o.pathname.replace(/^\/(ru|es|en|de|fr|pl)/,"")||"/episodes";a(`/${r}${e}`,{replace:!0}),t&&t(r)}catch(n){}else i(!1)})(r.code),className:"w-full px-3 py-2 text-left text-sm flex items-center gap-2 transition-colors\n                    "+(e===r.code?"bg-slate-700/70 text-blue-300 font-medium":"text-slate-300 hover:bg-slate-700/50 hover:text-slate-200"),children:[Z.jsx(r.Flag,{className:"w-4 h-4 flex-shrink-0"}),Z.jsx("span",{className:"flex-grow",children:r.fullName}),e===r.code&&Z.jsx("svg",{className:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},r.code)))})})]})]})},Gm=({podcastData:e,currentLanguage:t="ru"})=>{const[r,n]=q.useState(!1),i={ru:{about:" ",events:"",volunteers:"",radio:"",live:"LIVE",articles:""},en:{about:"About",events:"Events",volunteers:"Volunteers",radio:"Radio",live:"LIVE",articles:"Articles"},es:{about:"Sobre nosotros",events:"Eventos",volunteers:"Voluntarios",radio:"Radio",live:"LIVE",articles:"Artculos"},de:{about:"ber uns",events:"Veranstaltungen",volunteers:"Freiwillige",radio:"Radio",live:"LIVE",articles:"Artikel"},fr:{about:" propos",events:"vnements",volunteers:"Bnvoles",radio:"Radio",live:"LIVE",articles:"Articles"},pl:{about:"O nas",events:"Wydarzenia",volunteers:"Wolontariat",radio:"Radio",live:"LIVE",articles:"Artykuy"}},s=i[t]||i.en,a=[{to:`/${t}/about`,label:s.about},{to:`/${t}/articles`,label:s.articles},{to:`/${t}/events`,label:s.events},{to:`/${t}/volunteers`,label:s.volunteers},{to:`/${t}/episodes`,label:s.radio},{to:`/${t}/live`,label:s.live}];return Z.jsxs("header",{className:"relative z-50 flex flex-col bg-black/20 backdrop-blur-md border-b border-white/5 transition-all duration-300",children:[Z.jsxs("div",{className:"flex items-center justify-between px-4 py-3 gap-4",children:[Z.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[(null==e?void 0:e.image)&&Z.jsx("img",{src:e.image,alt:e.title,className:"w-10 h-10 rounded-lg object-cover shadow-lg ring-1 ring-white/10"}),Z.jsxs("div",{children:[Z.jsx("h1",{className:"text-lg font-bold text-white tracking-tight shadow-black drop-shadow-sm",children:(null==e?void 0:e.title)||"Dos Mundos"}),(null==e?void 0:e.author)&&Z.jsx("p",{className:"text-xs font-medium text-slate-300 uppercase tracking-wider opacity-80",children:e.author})]})]}),Z.jsx("div",{className:"hidden md:flex flex-1 justify-center",children:Z.jsx("nav",{className:"flex items-center gap-2",children:a.map((e=>Z.jsxs(Ah,{to:e.to,className:"px-3 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap active:scale-95 flex items-center gap-2 "+(e.to.includes("/live")?"text-red-400 border border-red-500 bg-red-950/20":"text-slate-200 hover:bg-white/10 hover:text-white"),children:[e.to.includes("/live")&&Z.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),e.label]},e.to)))})}),Z.jsx("div",{className:"hidden md:flex items-center gap-4 shrink-0",children:Z.jsx(Hm,{currentLanguage:t})}),Z.jsx("button",{className:"md:hidden p-2 text-slate-200 hover:text-white hover:bg-white/10 rounded-lg transition-colors",onClick:()=>n(!r),"aria-label":"Toggle menu",children:r?Z.jsx(Ng,{size:24}):Z.jsx(Jp,{size:24})})]}),r&&Z.jsx("div",{className:"md:hidden border-t border-white/5 bg-black/40 backdrop-blur-xl",children:Z.jsxs("nav",{className:"flex flex-col p-4 gap-2",children:[a.map((e=>Z.jsxs(Ah,{to:e.to,className:"px-4 py-3 rounded-lg text-base font-medium transition-all active:scale-95 flex items-center gap-2 "+(e.to.includes("/live")?"text-red-400 border border-red-500 bg-red-950/20":"text-slate-200 hover:bg-white/10 hover:text-white"),onClick:()=>n(!1),children:[e.to.includes("/live")&&Z.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),e.label]},e.to))),Z.jsxs("div",{className:"mt-2 pt-4 border-t border-white/10 flex justify-between items-center px-2",children:[Z.jsx("span",{className:"text-sm text-slate-400",children:" / Language"}),Z.jsx(Hm,{currentLanguage:t})]})]})})]})},Wm=e=>e&&e.audio_url?e.audio_url:null,Qm=q.createContext(null),Ym=()=>{const e=q.useContext(Qm);if(!e)throw new Error("usePlayer must be used within a PlayerProvider");return e},Xm=({children:e})=>{const t=q.useRef(null),[r,n]=q.useState(null),[i,s]=q.useState(!1),[a,o]=q.useState(0),[l,c]=q.useState(0),[u,d]=q.useState(!1),[h,f]=q.useState(1),[p,g]=q.useState(!1),[m,y]=q.useState(!1),v=q.useCallback((async()=>{if(t.current)try{await t.current.play(),s(!0),g(!1)}catch(e){s(!1),"NotAllowedError"===e.name&&g(!0)}}),[]),b=q.useCallback((async(e,s=0)=>{const l=e.audioUrl||e.audio_url;if(!l)return;const c=(null==r?void 0:r.slug)===e.slug,u=(null==r?void 0:r.audioUrl)||(null==r?void 0:r.audio_url);if(c&&l===u)return Math.abs(a-s)>1&&x(s),void(i||v());if(n(e),d(!0),g(!1),t.current){t.current.pause(),t.current.src=l,t.current.playbackRate=h,s>0?(t.current.currentTime=s,o(s)):o(0);try{await t.current.load(),await v()}catch(Jce){}}}),[r,i,h,a]),w=q.useCallback((()=>{t.current&&t.current.src?i?(t.current.pause(),s(!1)):v():s(!1)}),[i,v]),x=q.useCallback((e=>{if(!t.current)return;const r=t.current.duration,n=Number.isFinite(r)?r:e,i=Math.max(0,Math.min(e,n));try{t.current.currentTime=i,o(i)}catch(s){}}),[]),S=q.useCallback((e=>{f(e),t.current&&(t.current.playbackRate=e)}),[]),E=q.useCallback((()=>{d(!1),t.current&&t.current.pause(),s(!1),n(null)}),[]),T=()=>{y(!0)};return Z.jsxs(Qm.Provider,{value:{currentEpisode:r,isPlaying:i,setIsPlaying:s,currentTime:a,setCurrentTime:o,duration:l,setDuration:c,audioRef:t,playEpisode:b,togglePlay:w,seek:x,playbackRate:h,setPlaybackRate:S,isGlobalPlayerVisible:u,setIsGlobalPlayerVisible:d,closeGlobalPlayer:E,autoplayBlocked:p,setAutoplayBlocked:g,isLoading:m},children:[e,Z.jsx("audio",{ref:t,preload:"auto",onTimeUpdate:()=>{t.current&&o(t.current.currentTime)},onLoadedMetadata:()=>{t.current&&c(t.current.duration)},onEnded:()=>{s(!1),y(!1)},onPlay:()=>{s(!0),y(!1)},onPause:()=>{s(!1),y(!1)},onError:e=>{var r,n,o,l,c,u,d;if(s(!1),y(!1),(null==(r=e.target.error)?void 0:r.code)===(null==(n=e.target.error)?void 0:n.MEDIA_ERR_NETWORK)||(null==(o=e.target.error)?void 0:o.code)===(null==(l=e.target.error)?void 0:l.MEDIA_ERR_DECODE)||(null==(c=e.target.error)?void 0:c.code)===(null==(u=e.target.error)?void 0:u.MEDIA_ERR_SRC_NOT_SUPPORTED)){"undefined"!=typeof navigator&&"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"REFRESH_AUDIO_CACHE",url:e.target.src});const r=a,n=null==(d=t.current)?void 0:d.src,o=i;setTimeout((()=>{t.current&&n&&(t.current.src="",t.current.load(),setTimeout((()=>{t.current&&(t.current.src=n,t.current.load(),t.current.currentTime=r,o&&t.current.play().catch((e=>{s(!1)})))}),100))}),1e3)}},onWaiting:T,onStalled:T,onCanPlay:()=>{y(!1)},onLoadStart:()=>{y(!0)},style:{display:"none"}})]})},Jm={enterEditMode:"   ",exitEditMode:"   ",appName:"Dos Mundos Radio",loading:"...",loadingPodcast:" ...",loadingEpisodes:" ...",loadingEpisode:" ...",errorLoadingData:"  ",tryAgain:" ",failedToLoadPodcastData:"    : {errorMessage}. ,  .",episodeNotFound:"  ",noEpisodesFoundForLanguage:'  "{language}"   .',tryUploadingAudio:"  ,  .",reloadEpisodes:" ",episodes:" Dos Mundos",searchEpisodesAndQuestions:"  ,   ...",searchInTranscript:"  ...",searchResultsEmpty:"     .",noEpisodesForLanguageShort:"  ",selectEpisode:" : {episodeTitle}",openEpisode:"",episodeTitleMissing:"  ",descriptionMissing:" .",questions:"",questionsCountFormat:"({count})",noQuestionsForLanguage:"      .",loadingTranscriptAndQuestions:"   ...",noQuestionsOrTranscriptTitle:"    ",noQuestionsOrTranscriptDesc:"   ,   .      .",loadingTranscript:" ...",addQuestion:"",editQuestion:" ",deleteQuestion:" ",saveQuestion:"",cancel:"",questionTime:"",questionTitle:" ",questionTitlePlaceholder:":   ",questionLanguage:" ",addQuestionDialogTitle:" ",addQuestionDialogDescription:"     .",addQuestionDialogDescriptionSegment:'   : "{segmentText}"',editQuestionDialogTitle:" ",editQuestionDialogDescription:"  .",confirmDeleteQuestionTitle:" ",confirmDeleteQuestionDescription:" ,     ?   .",audioErrorTitle:" ",audioErrorDescriptionPlayer:'    "{episodeTitle}".',playbackErrorTitle:" ",playbackErrorDescription:"   .",navigationNoQuestions:"      .",navigationToastTitle:"",previousQuestion:" ",nextQuestion:" ",changePlaybackSpeed:"  , : {speed}",selectLanguageModalTitle:" ",selectLanguageModalDescription:",     .     .",russian:"",spanish:"Espaol",english:"English",german:"Deutsch",french:"Franais",polish:"Polski",allLanguages:" ",language:"",filename:" ",duration:"",foundQuestionsInEpisode:"  ",foundInTranscript:"  ",questionCount_one:"{count} ",questionCount_few:"{count} ",questionCount_many:"{count} ",errorAddingQuestion:"   : {errorMessage}",errorUpdatingQuestion:"   : {errorMessage}",errorDeletingQuestion:"   : {errorMessage}",errorGeneric:"",batchAddQuestions:"  ",batchAddQuestionsShort:"",batchAddQuestionsDialogTitle:"   ",batchAddQuestionsDialogDescription:'      .        (, ::  :),     .     ,    " / ".',pasteQuestionsList:"  :",processAndAdd:"  ",bilingualExamplePart1:"   ",bilingualExamplePart2:"Como reconocer los Mensajes sagrados",singleLanguageExample:"   ",batchAddPlaceholder:"0:01:23  \n0:05:10    / Pregunta en espaol...",errorBatchAddingQuestions:"    : {errorMessage}",nowPlaying:" ...",paused:"",selectAnEpisode:"   .",backToEpisodes:" ",backToEpisodesShort:" ",pageNotFoundTitle:"   (404)",pageNotFoundDescription:", ,   ,  . ,     .",uploadAudioFiles:" ",uploadAudio:" ",uploadAudioDescription:"      .  MP3, WAV   .    --_.mp3 (, 2025-06-28_RU.mp3)   .",dropFilesHere:"  !",dragOrClickUpload:"     ",supportedFormats:" ",uploading:"...",uploadError:" ",errorUploadingFile:'    "{fileName}"',allFilesUploadedSuccessfully:"   !",spotifyUploadTitle:"  Spotify",spotifyUploadDesc:"     Spotify",connectSpotify:" Spotify",whatYouGet:"  :",spotifyFeature1:"   Spotify",spotifyFeature2:"  ",spotifyFeature3:"   ",spotifyFeature4:"  ",spotifyAuthSuccess:" ",spotifyAuthSuccessDesc:"    Spotify",spotifyAuthError:" ",spotifyAuthErrorDesc:"    Spotify",welcomeBack:"  ,",disconnect:"",uploadEpisode:" ",uploadEpisodeDesc:"      ",audioFile:"",episodeTitle:" ",enterTitle:"  ",description:"",enterDescription:"  ",category:"",explicitContent:"  ",uploadingToSpotify:"  Spotify...",uploadComplete:" ",spotifyUploadSuccess:" ",spotifyUploadSuccessDesc:"    Spotify",spotifyUploadError:" ",spotifyUploadErrorDesc:"   ",configurationError:" ",spotifyClientIdMissing:"Spotify Client ID  .   .env.local  VITE_SPOTIFY_CLIENT_ID",spotifyConfiguration:" Spotify",spotifyConfigurationDesc:"    Spotify  ",spotifyClientId:"Client ID",spotifyClientSecret:"Client Secret",saveConfiguration:" ",resetConfiguration:"",copiedToClipboard:"",copiedToClipboardDesc:"    ",spotifyConfigSaved:" ",spotifyConfigSavedDesc:" Spotify  ",spotifyConfigError:" ",confirmResetConfig:" ,     Spotify?",configReset:" ",configResetDesc:" Spotify  ",howToGetCredentials:"   :",spotifyStep1:"  Spotify Developer Dashboard",spotifyStep2:"  ",spotifyStep3:" Client ID  Client Secret",spotifyStep4:"    ",openSpotifyDeveloper:" Spotify Developer",spotifyConfigurationRequired:"   Spotify    ",validationError:" ",fillRequiredFields:",    ",howItWorks:"  ",step1:"  Spotify  OAuth",step2:"    ",step3:"  ",step4:"    Spotify",openSpotifyPodcasters:" Spotify Podcasters",close:"",startUpload:" ",uploadingInProgress:"...",uploadToR2Success:"    .",metadataSavedSuccess:"   .",transcriptionStarted:" ",errorUploadingToR2:"   R2: {errorMessage}",errorListingR2Files:"     R2: {errorMessage}",errorPresignedUrlR2:"  presigned URL  R2: {errorMessage}",errorSubmittingAssemblyAI:"   AssemblyAI: {errorMessage}",errorFetchingAssemblyAIResult:"    AssemblyAI: {errorMessage}",errorFetchingEpisodes:"   : {errorMessage}",errorFetchingQuestions:"    : {errorMessage}",transcriptEditorTitle:"",refreshTranscript:" ",collapse:"",expand:"",transcriptionError:" ",transcriptionErrorTitle:" ",transcriptionErrorAssembly:"  AssemblyAI  ",noTranscriptAvailableYet:"     .",startTranscription:"  ",noTranscriptData:"  .",transcriptionInProgressTitle:"   ",transcriptionInProgressDescription:"   .   .",transcriptionCompletedTitle:"  ",transcriptionCompletedDescription:"   {episode}    .",transcriptionCompletedDesc:"  !",errorPollingTranscript:"     .",transcriptionSubmittedTitle:"  ",transcriptionSubmittedDescription:"      {lang} .     .",missingEpisodeOrUrl:"ID   URL      .",unknownError:" ",unknownAssemblyError:"   AssemblyAI",transcriptSegmentUpdatedTitle:" ",transcriptSegmentUpdatedDesc:"   .",playSegment:" ",editSegment:" ",save:"",addQuestionToSegment:" ",questionAttached:" ",speaker:"",collapseQuestions:" ",expandQuestions:" ",transcriptText:"/ ",showFullText:"  ",hideFullText:"  ",hide:"",speakerLabel:" {id}",editSpeaker:" ",noSpeakersDetected:"  ",confirmSpeakerChangeTitle:" ?",confirmSpeakerChangeDescription:" ,       ?",textSegment:" ",textActions:"  ",meditationTitlePrefix:"",introduction:"",loadMoreSegments:" ",showText:" ",fullTranscript:" ",errorStartingTranscription:"  : {errorMessage}",searchTranscriptPlaceholder:"   ...",noResultsInTranscript:"    .",jumpToQuestion:"  ",mergeWithPreviousSegment:"  ",deleteSegment:" ",splitSegment:" ",saveSegment:" ",addSegment:" ",addSegmentDescription:"  :       .",segmentStartTime:" ",segmentEndTime:" ",segmentText:" ",confirmMergeTitle:" ?",confirmMergeDescription:" ,       ?   .",confirmDeleteSegmentTitle:" ?",confirmDeleteSegmentDescription:" ,     ?   .   .",confirmSplitTitle:" ?",confirmSplitDescription:" ,         ?   .",doNotAskAgain:"  ",errorSplittingSegment:"  ",cannotSplitEmpty:"       .",cannotSplitAtPosition:"     (   ).",cannotSplitIntoEmpty:"    .   .",pressEnterToSplit:" Enter     ",editSegmentPanelTitle:" ",cursorPositionRequired:"   ,    .",confirm:"",merge:"",split:"",delete:"",splitSegmentAtCursor:"    ",editTextSegmentPlaceholder:"  ...",questionAttachedToSegment:"    ",selectFiles:" ",addAnotherFile:"  ",startAllUploads:"  ",processing:"",timingsQuestions:" ()",confirmOverwriteTitle:" ?",confirmOverwriteMessage:"  SLUG '{slug}'  .  ?",overwrite:"",selectWhatToOverwrite:",  :",overwriteServerFile:"   ( )",overwriteEpisodeInfo:"   (, , URL)",overwriteTranscript:"",overwriteQuestions:"",transcriptionQueued:"  ",processingErrorsTitle:"  ",processingErrorsDesc:"    .",uploadCancelledEpisodeExists:" :   .",transcriptionProcessing:"  ...",transcriptionCompletedShort:" ",transcriptionFailedShort:" ",errorCheckingEpisodeDB:"    : {errorMessage}",fileAlreadyInR2Title:"   R2",fileAlreadyInR2Desc:" {fileName}     .",usingExistingR2FileTitle:"  ",usingExistingR2FileDesc:"    {fileName}  .",overwritingDbData:"   ...",overwritingEpisodeTitle:" ",overwritingEpisodeDesc:"    {slug}...",audioMetadataError:"   .",supabaseEpisodeError:"    : {errorMessage}",startingTranscription:" ...",supabaseTranscriptError:"     : {errorMessage}",allFilesProcessedTitle:"  ",allFilesProcessedDesc:"    .",transcriptionErrorDesc:"   {episode}  .",manageAndUploadTitle:"  ",manageAndUploadDescription:"      .",manageEpisodes:" ",manageExistingEpisodes:" ",manageEpisodesDescription:"        .",manageEpisodesTitle:" ",assemblyAiApiKey:" API AssemblyAI",assemblyAiApiKeyDescription:"   API AssemblyAI    .      .",assemblyAiApiKeyPlaceholder:"sk_...",apiKeyStoredLocally:"           .",apiKeySaved:" API ",apiKeySavedDescription:"  API AssemblyAI  .",apiKeySaveError:"    API. ,  .",apiKeyCleared:" API ",apiKeyClearedDescription:"  API AssemblyAI  .",apiKeyClearError:"    API. ,  .",clear:"",show:"",supportedAudioFormats:"  : MP3, WAV, M4A, AAC, OGG, FLAC",filenameLanguageSuffixes:"     : _es, _ru, _en",dragOrClickToUpload:"      ",filesInQueue_one:"{count}   ",filesInQueue_few:"{count}   ",filesInQueue_many:"{count}   ",addFiles:" ",episodeManagement:" ",refresh:"",selectAll:" ",episodes_one:"",episodes_few:"",episodes_many:"",baseFile:" ",noFileUploaded:"  ",ready:"",notStarted:" ",dateNotSpecified:"  ",audioFileNotAvailable:"   ",transcriptionAlreadyStarted:"  ",transcriptionInProgress:"    ",transcriptionAlreadyCompleted:"  ",transcriptionAlreadyReady:"  ",audioUrlNotAvailable:"   URL ",assemblyAiNoJobId:"AssemblyAI    ",transcriptionCompleted:" !",transcriptionStartError:"  ",questionsNotFound:"  ",questionsNotFoundInDB:"       ",questionsLoaded:" ",questionsLoadedFromDB_one:" {count}    ",questionsLoadedFromDB_few:" {count}    ",questionsLoadedFromDB_many:" {count}    ",questionsLoadError:"  ",transcriptRequired:" ",transcriptRequiredDescription:"    ",transcriptDataNotFound:"   ",questionsGenerationFailed:"   ",questionsGenerated:" ",questionsGeneratedForEpisode_one:" {count}    {episodeSlug} ({lang})",questionsGeneratedForEpisode_few:" {count}    {episodeSlug} ({lang})",questionsGeneratedForEpisode_many:" {count}    {episodeSlug} ({lang})",questionsGenerationError:"  ",spanishEpisodeNotFound:"   ",spanishTranscriptNotReady:"   ",spanishTranscriptTextNotFound:"    ",transcriptTranslationFailed:"   ",transcriptTranslated:" ",enTranscriptCreated:"EN   {episodeSlug} ",transcriptTranslationError:"  ",sourceEpisodeNotFound:"     {language}",questionsNotFoundForTranslation:"    ",translateQuestionPrompt:'     {sourceLanguage}   .         : "{questionTitle}"',questionsTranslated:" ",questionsTranslatedCreated_one:" {count}  (EN)",questionsTranslatedCreated_few:" {count}  (EN)",questionsTranslatedCreated_many:" {count}  (EN)",questionsTranslationError:"  ",episodeDeleteError:"   {episodeTitle}",episodesDeleted:" ",episodesDeletedSuccessfully_one:"{count}   ",episodesDeletedSuccessfully_few:"{count}   ",episodesDeletedSuccessfully_many:"{count}   ",questionsDeleted:" ",allQuestionsDeletedForEpisode:"    {episodeTitle} ",questionsDeleteError:"   ",deleteAllQuestionsTitle:"  ",confirmDeleteAllQuestionsMessage:' ,        "{episodeTitle}" ({lang})?',deleteAllQuestionsConfirm:"  ",confirmDeleteEpisodesMessage:" ,    {count}  ?",transcribe:"",starting:"",fromDB:" ",recognize:"",deleteAllQuestions:"  ",translateTranscriptFromSpanish:"   ",translateQuestionsFromSpanish:"   ",translateQuestionsFromRussian:"   ",transcriptDeleted:" ",searchEpisodes:" ...",translateToEnglish:"  EN",translateTimingsSuccessTitle:" ",translateTimingsSuccessDesc:"     .",translateTimingsErrorTitle:" ",translateTimingsErrorDesc:"    : {errorMessage}",timingsTranslating:"...",transcriptionPendingTranslation:"   ES",transcriptionTranslating:"  ES...",settings:"",showTranscript:" ",downloadAudio:" ",downloadStartedTitle:" ",downloadStartedDesc:"  .",audioNotAvailableForDownload:"   .",skipBackward10:"  10",skipForward10:"  10",play:".",pause:"",editLogPageTitle:" ",errorFetchingLogs:"  ",noEditHistory:"   ",editHistory:" ",editHistoryTitle:" ",rolledBack:"",errorLoadingHistory:"  ",errorRollback:" ",rollbackSuccessful:"  ",rollbackFailed:"   ",editType:" ",targetType:" ",rolledBackBy:" ",unknownUser:" ",showRolledBackEdits:"  ",editHistoryAdmin:"  ",editHistoryCount:"  ({count} )",backButton:"",actionReverted:"",revertButton:"",revertFailed:" ",revertSuccessful:" ",revertDescription:" #{logId}  .",beforeLabel:"",afterLabel:"",revertedAtLabel:"  {date}",editRevertedTitle:" ",editRevertedDesc:"      .",nothingToRevert:" .",untitledQuestion:"  ",navigateToDeepSearch:"   ",search:"",deepSearchTitle:" ",deepSearchPlaceholder:"    ...",searching:"",deepSearchMinChars:"  2   .",errorPerformingSearch:"   : {errorMessage}",noResultsFoundForQuery:'  "{query}"   .',searchResultsCount_one:' {count}    "{query}"',searchResultsCount_few:' {count}    "{query}"',searchResultsCount_many:' {count}    "{query}"',foundInQuestionsTitle:"  ",foundInTextTitle:"  ",foundSegmentsInEpisodeCount_one:"{count} ",foundSegmentsInEpisodeCount_few:"{count} ",foundSegmentsInEpisodeCount_many:"{count} ",foundQuestionsInEpisodeCount_one:"{count} ",foundQuestionsInEpisodeCount_few:"{count} ",foundQuestionsInEpisodeCount_many:"{count} ",noQuestionsAddedYet:"   .",filterByYear:"  ",filterByMonth:"  ",allYears:" ",allMonths:" ",resetFilters:"",january:"",february:"",march:"",april:"",may:"",june:"",july:"",august:"",september:"",october:"",november:"",december:"",tryUploadingAudioOrFilter:"     .",contextQuestion:" ()",question:"",playbackSpeed:" ",audioTrack:"",noEpisodesFound:"  .",deselectAll:" ",deleteSelected:" ",errorTranslatingTranscriptOpenAI:"    DeepSeek.",errorTranslatingTranscriptOpenAIDesc:"      DeepSeek.        .",errorTranslatingTextOpenAI:"    DeepSeek: {errorMessage}",offlineMode:"   .    .",online:"",syncing:"...",syncError:" ",pendingChanges:" ",justSynced:" ",minutesAgo:" ",hoursAgo:" ",clickToSync:"  ",loadedFromCache:"  ",dataLoadedOffline:"    ",transcriptFromCache:"  ",transcriptLoadedOffline:"    ",questionsFromCache:"  ",questionsLoadedOffline:"    ",offlineDataUnavailable:"  ",episodeNotCached:"       ",transcriptUnavailableOffline:"  ",transcriptNotCached:"      ",questionsUnavailableOffline:"  ",questionsNotCached:"      ",savedOffline:" ",segmentSavedOffline:"         ",transcriptSavedOffline:"         ",questionsSavedOffline:"         ",offlineSaveError:"    ",confirmSplitOffline:" ?    .",confirmMergeOffline:"   ?    .",confirmDeleteOffline:" ?    .",segmentSplitOffline:"  ()",segmentMergedOffline:"  ()",segmentDeletedOffline:"  ()",audioCache:" ",cacheUsage:" ",files:"",used:"",currentEpisode:" ",downloading:"...",cached:"",cache:"",removeFromCache:"  ",cacheForOffline:"",cacheManagement:" ",manageStoredAudio:"  ",clearAll:" ",cachedFiles:" ",cacheSettings:" ",confirmClearCache:"  ?",clearCache:" ",removing:"...",maxCacheSize:"  ",downloadText:" ",downloadTextSettings:"  ",downloadSubtitles:" ",processWithAI:"  AI",contentType:" ",allText:" ",selectedQuestions:" ",selectQuestions:" ",includeTimings:" ",format:"",download:"",textDownloadStarted:"  ",includeSpeakers:" ",offlineModeTitle:" ",syncCompleted:" ",itemsSynced:" ",connectionRestored:" ",syncingChanges:" ...",connectionLost:" ",workingOffline:"   ",offlineSettings:" ",networkStatus:" ",connection:"",offline:"",pendingSync:" ",items:"",syncNow:"",storageUsage:" ",totalUsage:" ",clearAllData:"  ",syncQueue:" ",attempts:"",offlineFeatures:" ",audioPlayback:" ",textEditing:" ",autoSync:" ",localStorage:" ",headerDefaultTitle:"Dos Mundos Podcast",languageRussian:"",languageSpanish:"",languageEnglish:"",languageGerman:"",languageFrench:"",languagePolish:"",languageSettings:" ",languageChangeNotice:"  ",playerRewindBack10:"   10 ",playerPlay:"",playerPause:"",playerForward10:"   10 ",playerProgressBar:" ",playerJumpToQuestion:"  : {title}",error:"",sectionTitleEmpty:"     .",sectionTimeInvalid:"   .",sectionSaved:" ",sectionSavedDescription:' "{title}"  .',sectionDeleted:" ",sectionDeletedDescription:"  .",currentSection:" ",addNewSection:"  ",add:"",editCurrentSection:"  ",noActiveSection:"  .  .",allSections:" ",editSection:"  {title}",noSectionsYet:"   .",addSection:" ",time:"",title:"",renameSpeakerGlobally:"  ",reassignToExistingSpeaker:"  ",createNewSpeaker:"  ",selectExistingSpeaker:"  ",selectSpeakerPlaceholder:" ",unknownSpeaker:" ",newSpeakerName:"  ",speakerName:" ",enterSpeakerNamePlaceholder:"  ",renameSpeaker:" ",reassignSpeaker:" ",createSpeaker:" ",assignSpeaker:" ",assignSpeakerTitle:" ",assignSpeakerDescription:"     :",assignSpeakerTooltip:"/ ",currentSpeaker:" ",translateTranscriptTitle:" ",translateTranscriptDesc:"     ",translateTranscriptSuccessTitle:" ",translateTranscriptSuccessDesc:"      {segmentsCount} ",translateTranscriptErrorTitle:" ",translateTranscriptErrorDesc:"   : {errorMessage}",translateTranscriptProgress:" ...",translateTranscriptButton:"  EN",spanishTranscriptRequired:"  ",spanishVersionRequired:"  ",deleteAndRetranscribe:"   ",retranslate:" ",retranslateTranscript:"  ",openInNewWindow:"   ",manage:"",autoGenerateQuestions:" ",loadQuestionsFromDB:"   ",fileNotFound:"  ",fileNotFoundInFolder:"  {expectedFilename}     ",fileFoundAndAdded:"   ",fileWillBeUploaded:" {filename}  ",fileUploadError:"  ",noFilesForEpisode:"     ",spanishTranscriptInProgress:"  ",transcribeSpanishFirst:"   ",needSpanishFirst:"   ",translateTimingsToEnglish:"   ",createEnglishVersion:"  ",fromSpanishTranscript:"  ",translateTranscriptFromRussian:"   ",srtDownloaded:" ",textTranslated:" ",errorUploadingToHostinger:"   Hostinger: {errorMessage}",errorDeletingHostingerFile:"   {fileName}  Hostinger: {errorMessage}",hostingerConnectionFailed:"    SFTP  Hostinger",hostingerUploadTimeout:"   Hostinger - ,  ",migrationStarted:"  ",migrationComplete:"  ",migrationError:" ",filesSelectedForMigration:"   ",storageProvider:" ",loginToViewEditHistory:",      ",loginAsEditor:"  ",loggedInAs:" ",noEditsYet:"  ",activeEdits:" ",undo:"",confirmRollback:" ,     ?\n\n   .",editRolledBack:" ",contentRestored:"  ",rollbackRecorded:" ",rollbackRecordedDesc:"  ,      ",reason:"",editHistoryAdminTitle:"-  ",authenticateToAccessEditHistory:"     ",authenticate:"",editorAuthentication:" ",editorAuthDescription:"  email       .    .",email:"Email",emailPlaceholder:".email@example.com",emailLatinOnly:"Email     ",name:"",namePlaceholder:" ",nameLatinOnly:"     ,   ",loginFailed:" ",authenticating:"...",translateQuestionsToAllLanguages:"    ",questionsTranslatedFromRussian:"   ",noRussianQuestionsToTranslate:"    ",translateQuestionsButton:" ",uploadAll:" ",tips:" ",autoTranscriptionNote:"    ",maxFileSizeNote:"  ",filesUploaded:" ",goToManagePage:"   ",uploadSuccess:" ",analyticsTitle:"",analyticsSubtitle:"   ",analyticsOverview:"",analyticsAudience:"",analyticsContent:"",analyticsBehavior:"",analyticsTotalUsers:" ",analyticsTotalSessions:" ",analyticsTotalPageViews:" ",analyticsAvgSessionDuration:" ",analyticsVsPreviousPeriod:"  ",analyticsVisitorsOverTime:"  ",analyticsUsers:"",analyticsSessions:"",analyticsPopularEpisodes:" ",analyticsViews:"",analyticsAvgDuration:" ",analyticsGeography:"",analyticsDevices:"",analyticsDeviceTypes:" ",analyticsBrowsers:"",analyticsTrafficSources:" ",analyticsListeningStats:" ",analyticsAvgListeningTime:"  ",analyticsCompletionRate:" ",analyticsTotalPlays:" ",analyticsTotalCompletions:" ",analyticsMostActiveHours:"  ",analyticsBehaviorMetrics:" ",analyticsBounceRate:" ",analyticsBounceRateDesc:"    ",analyticsAvgSessionDurationDesc:"   ",analyticsPagesPerSession:"  ",analyticsPagesPerSessionDesc:"   ",analyticsUserInteractions:" ",analyticsSearches:"",analyticsFilters:"",analyticsShares:"",analyticsDownloads:"",analyticsEngagementScore:" ",analyticsEngagementScoreDesc:"   ",analyticsNoData:" ",analyticsError:"  ",analyticsErrorDesc:"    .   .",analyticsLast24Hours:" 24 ",analyticsLast7Days:" 7 ",analyticsLast30Days:" 30 ",analyticsExport:"",analyticsExportReport:" ",analyticsExportReportDesc:"      ",analyticsFooterNote:"   5 .       .",translateQuestionsFrom:"   {language}",skipBackward10Tooltip:"   10 ",pauseTooltip:"",playTooltip:"",skipForward10Tooltip:"   10 ",exitReadingMode:"   ",exitReadingModeTooltip:"    ",loadingAudio:" ...",success:"",downloadError:" ",tapToUnmuteAndPlay:",     ",noAudioSource:"  ",episodePublishedTitle:" ",episodePublishErrorTitle:" ",episodeFromCache:"  ",episodeLoadedOffline:"  ",invalidEpisodeData:"  ",errorLoadingEpisode:"  ",transcriptSaved:" ",transcriptSavedSuccessfully:"  ",saveError:" ",questionsSaved:" ",questionsSavedSuccessfully:"  ",refreshError:" ",failedToRefreshData:"   ",errorMergingSegment:"  ",cannotMergeFirstSegment:"   ",errorAddingSegment:"  ",invalidTimeRange:"  ",segmentOverlaps:"    ",segmentAddedTitle:" ",segmentAddedDesc:"   ",finalizingTranscriptData:"   ...",errorFetchingTranscript:"  ",errorUpdatingSegment:"  ",errorSimplifyingTextOpenAI:"  ",settingsSaved:" ",offlineSettingsSaved:"   ",syncComplete:" ",manualSyncComplete:"   ",cacheCleared:" ",offlineCacheCleared:"   ",clearCacheError:"  ",back:"",offlineSettingsDescription:"     ",syncStatus:" ",storageUsageDescription:"     ",dataCache:" ",transcripts:"",loadingStats:" ...",cacheSettingsDescription:"    ",autoSyncDescription:"      ",maxAudioCache:"  ",maxAudioCacheDescription:"      ()",maxDataCache:"  ",maxDataCacheDescription:"     ()",syncInterval:" ",syncIntervalDescription:"      ()",autoCleanup:" ",autoCleanupDescription:"    ",saveSettings:" ",syncQueueDescription:"   ",syncQueueEmpty:"  ",manualSync:" ",refreshStats:" ",warning:"",transcriptionExistsTitle:"  ",transcriptionExistsDesc:"     .    ?",noAssemblyIdInDB:"ID  AssemblyAI     ",errorSavingSpeakerAssignment:"   ",speakerAssignedTitle:" ",speakerAssignedDesc:"   ",confirmDeleteTitle:" ",confirmDeleteEpisodeMessage:" ,     ?",actionIrreversible:"  .",deleting:"...",deleteConfirm:"",audioTrackRussian:"",audioTrackSpanish:"",audioTrackMixed:"",recognizeText:" ",recognizeQuestions:" ",recognizingText:" ...",recognizingQuestions:" ...",smartSegmentation:" ",segmenting:"...",transcribing:"...",autoRecognizeQuestions:"    ",autoRecognizeQuestionsDesc:"     ",blog_title:"",blog_subtitle:"      .",search_articles_placeholder:" ...",all_categories:"",read_article:"",back_to_articles:"  ",watch_on_youtube:"  YouTube",video_version:"  ",reading_time_minutes_one:"{count}  ",reading_time_minutes_few:"{count}  ",reading_time_minutes_many:"{count}  ",published_on:""},Zm={appName:"Dos Mundos Radio",loading:"Cargando...",loadingPodcast:"Cargando podcast...",loadingEpisodes:"Cargando meditaciones...",loadingEpisode:"Cargando meditacin...",errorLoadingData:"Error al cargar datos",tryAgain:"Intentar de nuevo",failedToLoadPodcastData:"No se pudieron cargar los datos del podcast: {errorMessage}. Por favor, intntalo ms tarde.",episodeNotFound:"Meditacin no encontrada",noEpisodesFoundForLanguage:'No se encontraron meditaciones para el idioma "{language}".',tryUploadingAudio:"Intenta subir un archivo de audio para empezar.",reloadEpisodes:"Recargar datos",episodes:"Radio Dos Mundos",searchEpisodesAndQuestions:"Buscar meditaciones, preguntas y texto...",searchInTranscript:"Buscar en el texto...",searchResultsEmpty:"No se encontr nada para tu bsqueda.",noEpisodesForLanguageShort:"Meditaciones no encontradas",selectEpisode:"Seleccionar meditacin: {episodeTitle}",openEpisode:"Abrir",episodeTitleMissing:"Ttulo de la meditacin ausente",descriptionMissing:"Descripcin ausente.",questions:"Preguntas",questionsCountFormat:"({count})",noQuestionsForLanguage:"An no se han agregado preguntas para el idioma actual.",loadingTranscriptAndQuestions:"Cargando texto y preguntas...",noQuestionsOrTranscriptTitle:"Sin Preguntas ni Texto",noQuestionsOrTranscriptDesc:"Esta meditacin actualmente no tiene preguntas ni texto disponible.",loadingTranscript:"Cargando texto...",addQuestion:"Agregar",editQuestion:"Editar pregunta",deleteQuestion:"Eliminar pregunta",saveQuestion:"Guardar",cancel:"Cancelar",questionTime:"Tiempo",questionTitle:"Ttulo de la pregunta",questionTitlePlaceholder:"Ej: Sobre los beneficios de la meditacin",questionLanguage:"Idioma de la pregunta",addQuestionDialogTitle:"Agregar pregunta",addQuestionDialogDescription:"Marca el tiempo e ingresa los detalles de la pregunta.",addQuestionDialogDescriptionSegment:'Agregar una pregunta para el segmento: "{segmentText}"',editQuestionDialogTitle:"Editar pregunta",editQuestionDialogDescription:"Modifica los detalles de la pregunta.",confirmDeleteQuestionTitle:"Confirmar eliminacin",confirmDeleteQuestionDescription:"Ests seguro de que quieres eliminar esta pregunta? Esta accin es irreversible.",audioErrorTitle:"Error de audio",audioErrorDescriptionPlayer:'Error al cargar audio para "{episodeTitle}".',playbackErrorTitle:"Error de reproduccin",playbackErrorDescription:"No se pudo reproducir el audio.",navigationNoQuestions:"No hay preguntas en esta meditacin para navegar.",navigationToastTitle:"Navegacin",previousQuestion:"Pregunta anterior",nextQuestion:"Siguiente pregunta",changePlaybackSpeed:"Cambiar velocidad de reproduccin, actual: {speed}",selectLanguageModalTitle:"Selecciona un idioma",selectLanguageModalDescription:"Por favor, selecciona tu idioma preferido para la aplicacin. Podrs cambiarlo ms tarde.",russian:"",spanish:"Espaol",english:"English",german:"Deutsch",french:"Franais",polish:"Polski",allLanguages:"Todos los idiomas",language:"Idioma",filename:"Nombre de archivo",duration:"Duracin",foundQuestionsInEpisode:"Preguntas encontradas",foundInTranscript:"Encontrado en texto",questionCount_one:"{count} pregunta",questionCount_few:"{count} preguntas",questionCount_many:"{count} preguntas",errorAddingQuestion:"No se pudo agregar la pregunta: {errorMessage}",errorUpdatingQuestion:"No se pudo actualizar la pregunta: {errorMessage}",errorDeletingQuestion:"No se pudo eliminar la pregunta: {errorMessage}",errorGeneric:"Error",batchAddQuestions:"Importar desde texto",batchAddQuestionsShort:"Importar",batchAddQuestionsDialogTitle:"Importar preguntas desde texto",batchAddQuestionsDialogDescription:'Pega la lista de preguntas en el campo de texto a continuacin. Cada pregunta debe comenzar con una marca de tiempo (p. ej., HH:MM:SS o MM:SS), seguida del texto de la pregunta. Si una pregunta est en dos idiomas, sepralos con " / ".',pasteQuestionsList:"Pega la lista de preguntas:",processAndAdd:"Procesar y agregar",bilingualExamplePart1:"Como reconocer los Mensajes sagrados",bilingualExamplePart2:"Como reconocer los Mensajes sagrados",singleLanguageExample:"Es necesario leer libros",batchAddPlaceholder:"0:01:23 Example question\n0:05:10 Spanish question / Russian question...",errorBatchAddingQuestions:"Error al agregar preguntas en lote: {errorMessage}",nowPlaying:"Reproduciendo...",paused:"Pausado",selectAnEpisode:"Selecciona una meditacin para empezar.",backToEpisodes:"A meditaciones",backToEpisodesShort:"A meditaciones",pageNotFoundTitle:"Pgina no encontrada (404)",pageNotFoundDescription:"Lo sentimos, la pgina que buscas no existe. Quizs fue movida o eliminada.",uploadAudioFiles:"Subir archivos de audio",uploadAudio:"Subir audio",uploadAudioDescription:"Arrastra los archivos aqu o haz clic para seleccionar. Se admiten MP3, WAV y otros formatos de audio. Nombres de archivo como AAAA-MM-DD_IDIOMA.mp3 (p.ej., 2025-06-28_ES.mp3) se procesarn automticamente.",dropFilesHere:"Suelta los archivos aqu!",dragOrClickUpload:"Arrastra los archivos o haz clic para seleccionar",supportedFormats:"Formatos soportados",uploading:"Subiendo...",uploadError:"Error de subida",errorUploadingFile:'Error al subir el archivo "{fileName}"',allFilesUploadedSuccessfully:"Todos los archivos subidos exitosamente!",spotifyUploadTitle:"Subir a Spotify",spotifyUploadDesc:"Publica automticamente tus podcasts en Spotify",connectSpotify:"Conectar Spotify",whatYouGet:"Lo que obtienes:",spotifyFeature1:"Publicacin automtica en Spotify",spotifyFeature2:"Gestin de metadatos de episodios",spotifyFeature3:"Sincronizacin de cuenta",spotifyFeature4:"Anlisis y estadsticas",spotifyAuthSuccess:"Autorizacin exitosa",spotifyAuthSuccessDesc:"Te has conectado exitosamente a Spotify",spotifyAuthError:"Error de autorizacin",spotifyAuthErrorDesc:"No se pudo conectar a Spotify",welcomeBack:"Bienvenido de vuelta,",disconnect:"Desconectar",uploadEpisode:"Subir episodio",uploadEpisodeDesc:"Selecciona un archivo de audio y completa la informacin del episodio",audioFile:"Archivo de audio",episodeTitle:"Ttulo del episodio",enterTitle:"Ingresa el ttulo del episodio",description:"Descripcin",enterDescription:"Ingresa la descripcin del episodio",category:"Categora",explicitContent:"Contenido explcito",uploadingToSpotify:"Subiendo a Spotify...",uploadComplete:"Carga completada",spotifyUploadSuccess:"Subida exitosa",spotifyUploadSuccessDesc:"Episodio enviado exitosamente a Spotify",spotifyUploadError:"Error de subida",spotifyUploadErrorDesc:"No se pudo subir el episodio",validationError:"Error de validacin",fillRequiredFields:"Por favor completa todos los campos requeridos",howItWorks:"Cmo funciona",step1:"Conctate a Spotify va OAuth",step2:"Selecciona archivo de audio y completa metadatos",step3:"Haz clic en el botn de subida",step4:"El episodio aparecer automticamente en Spotify",openSpotifyPodcasters:"Abrir Spotify Podcasters",close:"Cerrar",startUpload:"Comenzar subida",uploadingInProgress:"Subiendo...",uploadToR2Success:"Archivo subido exitosamente al almacenamiento.",metadataSavedSuccess:"Metadatos guardados en la base de datos.",transcriptionStarted:"Transcripcin iniciada",errorUploadingToR2:"Error al subir a R2: {errorMessage}",errorListingR2Files:"Error al listar archivos de R2: {errorMessage}",errorPresignedUrlR2:"Error al obtener URL firmada de R2: {errorMessage}",errorSubmittingAssemblyAI:"Error al enviar a AssemblyAI: {errorMessage}",errorFetchingAssemblyAIResult:"Error al obtener resultado de AssemblyAI: {errorMessage}",errorFetchingEpisodes:"Error al cargar la lista de meditaciones: {errorMessage}",errorFetchingQuestions:"Error al cargar las preguntas de la meditacin: {errorMessage}",transcriptEditorTitle:"Texto",refreshTranscript:"Refrescar texto",collapse:"Colapsar",expand:"Expandir",transcriptionError:"Error de transcripcin.",transcriptionErrorTitle:"Error de transcripcin",transcriptionErrorAssembly:"Error de AssemblyAI durante la transcripcin",noTranscriptAvailableYet:"El texto para este idioma an no est disponible.",startTranscription:"Iniciar reconocimiento de texto",noTranscriptData:"No hay datos de texto.",transcriptionInProgressTitle:"Reconocimiento de texto en progreso",transcriptionInProgressDescription:"El texto del audio an se est procesando. Los resultados aparecern automticamente.",transcriptionCompletedTitle:"Reconocimiento de texto completado",transcriptionCompletedDescription:"La transcripcin para el episodio {episode} se ha completado exitosamente y est disponible.",transcriptionCompletedDesc:"Transcripcin completada exitosamente!",errorPollingTranscript:"Error al verificar el estado del reconocimiento de texto.",transcriptionSubmittedTitle:"Reconocimiento de texto enviado",transcriptionSubmittedDescription:"Se envi la solicitud de reconocimiento de texto para el idioma {lang}. Esto puede tomar algn tiempo.",missingEpisodeOrUrl:"Falta el ID de la meditacin o la URL del audio para iniciar el reconocimiento de texto.",unknownError:"Error desconocido",unknownAssemblyError:"Error desconocido de AssemblyAI",transcriptSegmentUpdatedTitle:"Segmento actualizado",transcriptSegmentUpdatedDesc:"El segmento del texto se actualiz correctamente.",playSegment:"Reproducir segmento",editSegment:"Editar segmento",save:"Guardar",addQuestionToSegment:"Hacer pregunta",questionAttached:"Pregunta adjunta",speaker:"Hablante",collapseQuestions:"Colapsar preguntas",expandQuestions:"Expandir preguntas",transcriptText:"Alternar Texto",showFullText:"Mostrar texto completo",hideFullText:"Ocultar texto completo",hide:"Ocultar",speakerLabel:"Hablante {id}",editSpeaker:"Editar hablante",assignSpeaker:"Asignar orador",noSpeakersDetected:"Hablantes no detectados",confirmSpeakerChangeTitle:"Cambiar hablante?",confirmSpeakerChangeDescription:"Ests seguro de que quieres cambiar el hablante para este segmento?",textSegment:"Segmento de texto",textActions:"Acciones de texto",meditationTitlePrefix:"Meditacin",introduction:"Introduccin",loadMoreSegments:"Mostrar ms",showText:"Mostrar texto",fullTranscript:"Texto completo",errorStartingTranscription:"Error al iniciar la transcripcin: {errorMessage}",searchTranscriptPlaceholder:"Buscar en el texto de la meditacin...",noResultsInTranscript:"No se encontr nada en el texto.",jumpToQuestion:"Ir a la pregunta",mergeWithPreviousSegment:"Unir con anterior",deleteSegment:"Eliminar segmento",splitSegment:"Dividir segmento",saveSegment:"Guardar segmento",addSegment:"Agregar segmento",addSegmentDescription:"Agrega un nuevo segmento: indica hora inicio/fin y texto.",segmentStartTime:"Hora de inicio",segmentEndTime:"Hora de fin",segmentText:"Texto del segmento",confirmMergeTitle:"Unir segmentos?",confirmMergeDescription:"Seguro que quieres unir este segmento con el anterior? Esta accin es irreversible.",confirmDeleteSegmentTitle:"Eliminar segmento?",confirmDeleteSegmentDescription:"Seguro que quieres eliminar este segmento? El texto se perder. Esta accin es irreversible.",confirmSplitTitle:"Dividir segmento?",confirmSplitDescription:"Seguro que quieres dividir este segmento en la posicin actual del cursor? Esta accin es irreversible.",doNotAskAgain:"No volver a preguntar",errorSplittingSegment:"Error al dividir el segmento",cannotSplitEmpty:"No se puede dividir un segmento vaco o crear partes vacas.",cannotSplitAtPosition:"No se puede dividir en esta posicin (inicio o fin del texto).",cannotSplitIntoEmpty:"La divisin resultar en segmentos vacos. Elija otra posicin.",pressEnterToSplit:"Presiona Enter para dividir en la posicin del cursor",editSegmentPanelTitle:"Editando segmento",cursorPositionRequired:"Coloque el cursor en el texto donde desea dividir el segmento.",confirm:"Confirmar",merge:"Unir",split:"Dividir",delete:"Eliminar",splitSegmentAtCursor:"Dividir segmento en la posicin del cursor",editTextSegmentPlaceholder:"Introduce el texto del segmento...",questionAttachedToSegment:"Hay una pregunta adjunta a este segmento",selectFiles:"Seleccionar archivos",addAnotherFile:"Agregar otro archivo",startAllUploads:"Iniciar carga de todos",processing:"Procesando",timingsQuestions:"Tiempos (preguntas)",confirmOverwriteTitle:"Confirmar sobrescritura?",confirmOverwriteMessage:"El episodio con SLUG '{slug}' ya existe. Sobrescribirlo?",overwrite:"Sobrescribir",selectWhatToOverwrite:"Selecciona qu sobrescribir:",overwriteServerFile:"Archivo en el servidor (re-subir)",overwriteEpisodeInfo:"Informacin del episodio en BD (ttulo, fecha, URL)",overwriteTranscript:"Transcripcin",overwriteQuestions:"Preguntas",transcriptionQueued:"Transcripcin en cola",processingErrorsTitle:"Errores de procesamiento",processingErrorsDesc:"Algunos archivos no fueron procesados.",uploadCancelledEpisodeExists:"Carga cancelada: el episodio ya existe.",transcriptionProcessing:"Transcripcin en proceso...",transcriptionCompletedShort:"Transcripcin completada",transcriptionFailedShort:"Error de transcripcin",errorCheckingEpisodeDB:"Error al verificar el episodio en BD: {errorMessage}",fileAlreadyInR2Title:"Archivo ya en R2",fileAlreadyInR2Desc:"El archivo {fileName} ya existe en el almacenamiento en la nube.",overwritingEpisodeTitle:"Sobrescribiendo episodio",overwritingEpisodeDesc:"Sobrescribiendo datos para el episodio {slug}...",audioMetadataError:"Error al leer metadatos de audio.",supabaseEpisodeError:"Error al guardar el episodio en BD: {errorMessage}",startingTranscription:"Iniciando transcripcin...",supabaseTranscriptError:"Error al guardar datos de transcripcin en BD: {errorMessage}",allFilesProcessedTitle:"Todos los archivos procesados",allFilesProcessedDesc:"El procesamiento de todos los archivos se complet exitosamente.",transcriptionErrorDesc:"Ocurri un error durante la transcripcin del episodio {episode}.",manageAndUploadTitle:"Gestionar y Subir",manageAndUploadDescription:"Sube nuevos archivos de audio y gestiona meditaciones existentes.",manageEpisodes:"Gestionar Episodios",manageExistingEpisodes:"Gestionar meditaciones existentes",manageEpisodesDescription:"Aqu puedes ver y eliminar meditaciones subidas anteriormente.",manageEpisodesTitle:"Gestionar Episodios",assemblyAiApiKey:"Clave API de AssemblyAI",assemblyAiApiKeyDescription:"Introduce tu clave API de AssemblyAI para habilitar la transcripcin de audio. La clave se almacena localmente en tu navegador.",assemblyAiApiKeyPlaceholder:"sk_...",apiKeyStoredLocally:"La clave se almacena localmente en tu navegador y no se enva a nuestros servidores.",apiKeySaved:"Clave API guardada",apiKeySavedDescription:"Tu clave API de AssemblyAI se ha guardado correctamente.",apiKeySaveError:"No se pudo guardar la clave API. Por favor, intntalo de nuevo.",apiKeyCleared:"Clave API eliminada",apiKeyClearedDescription:"Tu clave API de AssemblyAI ha sido eliminada.",apiKeyClearError:"No se pudo eliminar la clave API. Por favor, intntalo de nuevo.",clear:"Limpiar",show:"Mostrar",supportedAudioFormats:"Formatos de audio soportados: MP3, WAV, M4A, AAC, OGG, FLAC",filenameLanguageSuffixes:"Los nombres de archivo pueden contener sufijos de idioma: _es, _ru, _en",dragOrClickToUpload:"Arrastra archivos de audio o haz clic para seleccionar",filesInQueue_one:"{count} archivo en cola",filesInQueue_few:"{count} archivos en cola",filesInQueue_many:"{count} archivos en cola",addFiles:"Agregar archivos",episodeManagement:"Gestin de Episodios",refresh:"Actualizar",selectAll:"Seleccionar todo",episodes_one:"episodio",episodes_few:"episodios",episodes_many:"episodios",baseFile:"Archivo base",noFileUploaded:"No se ha subido ningn archivo",ready:"Listo",notStarted:"No iniciado",dateNotSpecified:"Fecha no especificada",audioFileNotAvailable:"El archivo de audio no est disponible para transcripcin",transcriptionAlreadyStarted:"La transcripcin ya ha comenzado",transcriptionInProgress:"Por favor, espera a que se complete el proceso de transcripcin actual",transcriptionAlreadyCompleted:"La transcripcin ya est completada",transcriptionAlreadyReady:"El texto ya ha sido transcrito",audioUrlNotAvailable:"No se pudo obtener la URL del archivo de audio",assemblyAiNoJobId:"AssemblyAI no devolvi un identificador de trabajo",transcriptionCompleted:"Transcripcin completada!",transcriptionStartError:"Error al iniciar la transcripcin",questionsNotFound:"Preguntas no encontradas",questionsNotFoundInDB:"Las preguntas para este episodio no estn disponibles en la base de datos",questionsLoaded:"Preguntas cargadas",questionsLoadedFromDB_one:"Cargada {count} pregunta desde la base de datos",questionsLoadedFromDB_few:"Cargadas {count} preguntas desde la base de datos",questionsLoadedFromDB_many:"Cargadas {count} preguntas desde la base de datos",questionsLoadError:"Error al cargar preguntas",transcriptRequired:"Transcripcin requerida",transcriptRequiredDescription:"Primero necesitas transcribir el texto del episodio",transcriptDataNotFound:"Datos de transcripcin no encontrados",questionsGenerationFailed:"No se pudieron generar preguntas",questionsGenerated:"Preguntas generadas",questionsGeneratedForEpisode_one:"Generada {count} pregunta para el episodio {episodeSlug} ({lang})",questionsGeneratedForEpisode_few:"Generadas {count} preguntas para el episodio {episodeSlug} ({lang})",questionsGeneratedForEpisode_many:"Generadas {count} preguntas para el episodio {episodeSlug} ({lang})",questionsGenerationError:"Error al generar preguntas",spanishEpisodeNotFound:"Episodio en espaol no encontrado",spanishTranscriptNotReady:"La transcripcin en espaol no est lista",spanishTranscriptTextNotFound:"Texto de transcripcin en espaol no encontrado",transcriptTranslationFailed:"No se pudo traducir la transcripcin",transcriptTranslated:"Transcripcin traducida",enTranscriptCreated:"Transcripcin EN para {episodeSlug} creada",transcriptTranslationError:"Error al traducir la transcripcin",sourceEpisodeNotFound:"Episodio no encontrado para el idioma {language}",questionsNotFoundForTranslation:"Preguntas no encontradas para traduccin",translateQuestionPrompt:'Traduce el siguiente ttulo de pregunta de {sourceLanguage} a ingls. Devuelve solo el texto traducido sin comillas ni smbolos adicionales: "{questionTitle}"',questionsTranslated:"Preguntas traducidas",questionsTranslatedCreated_one:"Creada {count} pregunta (EN)",questionsTranslatedCreated_few:"Creadas {count} preguntas (EN)",questionsTranslatedCreated_many:"Creadas {count} preguntas (EN)",questionsTranslationError:"Error al traducir preguntas",episodeDeleteError:"Error al eliminar el episodio {episodeTitle}",episodesDeleted:"Episodios eliminados",episodesDeletedSuccessfully_one:"{count} episodio eliminado correctamente",episodesDeletedSuccessfully_few:"{count} episodios eliminados correctamente",episodesDeletedSuccessfully_many:"{count} episodios eliminados correctamente",questionsDeleted:"Preguntas eliminadas",allQuestionsDeletedForEpisode:"Todas las preguntas para el episodio {episodeTitle} eliminadas",questionsDeleteError:"Error al eliminar preguntas",deleteAllQuestionsTitle:"Eliminar todas las preguntas",confirmDeleteAllQuestionsMessage:'Ests seguro de que quieres eliminar todas las preguntas para el episodio "{episodeTitle}" ({lang})?',deleteAllQuestionsConfirm:"Eliminar todas las preguntas",confirmDeleteEpisodesMessage:"Ests seguro de que quieres eliminar {count} episodios seleccionados?",transcribe:"Transcribir",starting:"Iniciando",fromDB:"Desde BD",recognize:"Reconocer",deleteAllQuestions:"Eliminar todas las preguntas",translateTranscriptFromSpanish:"Traducir transcripcin del espaol",translateQuestionsFromSpanish:"Traducir preguntas del espaol",translateQuestionsFromRussian:"Traducir preguntas del ruso",transcriptDeleted:"Transcripcin eliminada",noAssemblyIdInDB:"El ID de transcripcin de AssemblyAI no se encontr en la base de datos para este episodio e idioma.",transcriptionExistsTitle:"La transcripcin existe",transcriptionExistsDesc:"La transcripcin para el episodio {episode} ya existe y est completa.",usingExistingR2FileTitle:"Usando archivo existente",usingExistingR2FileDesc:"Usando el archivo existente {fileName} del almacenamiento en la nube para este episodio.",overwritingDbData:"Sobrescribiendo datos de la base de datos...",warning:"Advertencia",errorDeletingQuestions:"Error al eliminar preguntas antiguas: {errorMessage}",errorDeletingTranscripts:"Error al eliminar transcripciones antiguas: {errorMessage}",errorDeletingEpisodeDB:"Error al eliminar el episodio de la base de datos: {errorMessage}",episodeDeletedTitle:"Episodio eliminado",episodeDeletedSuccess:"El episodio '{episodeTitle}' se elimin correctamente.",configurationError:"Error de Configuracin",spotifyClientIdMissing:"Spotify Client ID no est configurado. Crea archivo .env.local con VITE_SPOTIFY_CLIENT_ID",spotifyConfiguration:"Configuracin de Spotify",spotifyConfigurationDesc:"Ingresa tus credenciales de Spotify para conectar",spotifyClientId:"Client ID",spotifyClientSecret:"Client Secret",saveConfiguration:"Guardar Configuracin",resetConfiguration:"Restablecer",copiedToClipboard:"Copiado",copiedToClipboardDesc:"Datos copiados al portapapeles",spotifyConfigSaved:"Configuracin Guardada",spotifyConfigSavedDesc:"Configuracin de Spotify guardada exitosamente",spotifyConfigError:"Error al Guardar",confirmResetConfig:"Ests seguro de que quieres restablecer la configuracin de Spotify?",configReset:"Configuracin Restablecida",configResetDesc:"La configuracin de Spotify ha sido restablecida",howToGetCredentials:"Cmo obtener credenciales:",spotifyStep1:"Ve al Spotify Developer Dashboard",spotifyStep2:"Crea una nueva aplicacin",spotifyStep3:"Copia Client ID y Client Secret",spotifyStep4:"Pega los datos en el formulario de arriba",openSpotifyDeveloper:"Abrir Spotify Developer",spotifyConfigurationRequired:"Se requieren credenciales de Spotify para trabajar con el servicio",confirmDeleteTitle:"Confirmar eliminacin",confirmDeleteEpisodeMessage:"Ests seguro de que quieres eliminar el episodio '{episodeTitle}'? Esto eliminar su audio, transcripciones y preguntas para todos los idiomas.",actionIrreversible:"Esta accin es irreversible.",deleting:"Eliminando...",deleteConfirm:"S, eliminar",fileDeletedFromR2Title:"Archivo eliminado del almacenamiento",fileDeletedFromR2Desc:"El archivo {fileName} se elimin correctamente del almacenamiento en la nube.",errorDeletingR2FilePartial:"No se pudo eliminar el archivo {fileName} del almacenamiento R2: {errorMessage}. Las entradas de la base de datos an se eliminaron.",translateToEnglish:"Traducir a EN",translateTimingsSuccessTitle:"Traduccin exitosa",translateTimingsSuccessDesc:"Texto de tiempos traducido exitosamente al ingls.",translateTimingsErrorTitle:"Error de traduccin",translateTimingsErrorDesc:"No se pudo traducir el texto de tiempos: {errorMessage}",searchEpisodes:"Buscar meditaciones...",timingsTranslating:"Traduciendo...",transcriptionPendingTranslation:"Pendiente de traduccin desde ES",transcriptionTranslating:"Traduciendo desde ES...",translateTranscriptTitle:"Traducir Transcripcin",translateTranscriptDesc:"Traducir transcripcin del espaol al ingls",translateTranscriptSuccessTitle:"Transcripcin Traducida",translateTranscriptSuccessDesc:"Transcripcin traducida exitosamente al ingls con {segmentsCount} segmentos",translateTranscriptErrorTitle:"Error de Traduccin",translateTranscriptErrorDesc:"No se pudo traducir la transcripcin: {errorMessage}",translateTranscriptProgress:"Traduciendo transcripcin...",translateTranscriptButton:"Traducir a EN",settings:"Ajustes",showTranscript:"Mostrar Texto",downloadAudio:"Descargar Audio",downloadStartedTitle:"Descarga Iniciada",downloadStartedDesc:"La descarga del archivo de audio ha comenzado.",audioNotAvailableForDownload:"El archivo de audio no est disponible para descargar.",skipBackward10:"Retroceder 10s",skipForward10:"Avanzar 10s",play:"Reproducir",pause:"Pausa",editLogPageTitle:"Historial de Cambios",errorFetchingLogs:"Error al cargar los registros",noEditHistory:"No se encontr historial de cambios",editHistory:"Historial de edicin",editHistoryTitle:"Historial de edicin",rolledBack:"Revertido",errorLoadingHistory:"Error al cargar el historial",errorRollback:"Error al revertir",rollbackSuccessful:"Reversin exitosa",rollbackFailed:"No se pudo revertir",editType:"Tipo de edicin",targetType:"Tipo de objetivo",rolledBackBy:"Revertido por",unknownUser:"Usuario desconocido",showRolledBackEdits:"Mostrar ediciones revertidas",editHistoryAdmin:"Administracin del historial de edicin",editHistoryCount:"Historial de edicin ({count} ediciones)",backButton:"Atrs",actionReverted:"Accin revertida",revertButton:"Revertir",revertFailed:"Error al revertir",revertSuccessful:"Reversin exitosa",revertDescription:"Revertir este cambio?",beforeLabel:"Antes",afterLabel:"Despus",revertedAtLabel:"Revertido el {date}",assignSpeakerTitle:"Asignar orador",assignSpeakerDescription:"Asignar o cambiar orador para el segmento:",selectExistingSpeaker:"Seleccionar orador existente",selectSpeakerPlaceholder:"Seleccionar orador",searchSpeakerPlaceholder:"Buscar hablante...",noSpeakerFound:"No se encontr ningn hablante.",or:"O",enterNewSpeakerName:"Ingresar Nuevo Nombre de Hablante",assignNewSpeakerName:"Asignar como Nuevo Hablante",newSpeakerNamePlaceholder:"Ej: Mara, Juan Prez",assignAsNewSpeaker:"Asignar como nuevo hablante",saveSpeakerAssignment:"Guardar Asignacin",speakerAssignedTitle:"Hablante Asignado",speakerAssignedDesc:"El hablante {newSpeaker} ha sido asignado.",errorSavingSpeakerAssignment:"Error al guardar la asignacin del hablante.",unknownSpeaker:"Orador desconocido",assignSpeakerTooltip:"Asignar/Cambiar orador",editRevertedTitle:"Edicin Revertida",editRevertedDesc:"La edicin ha sido revertida exitosamente",nothingToRevert:"Nada que revertir",untitledQuestion:"Pregunta sin ttulo",navigateToDeepSearch:"Ir a bsqueda avanzada",search:"Buscar",deepSearchTitle:"Bsqueda Avanzada",deepSearchPlaceholder:"Buscar en textos y preguntas...",searching:"Buscando",deepSearchMinChars:"Ingresa al menos 2 caracteres para buscar.",errorPerformingSearch:"Error al realizar la bsqueda: {errorMessage}",noResultsFoundForQuery:'No se encontraron resultados para "{query}".',searchResultsCount_one:'Se encontr {count} resultado para "{query}"',searchResultsCount_few:'Se encontraron {count} resultados para "{query}"',searchResultsCount_many:'Se encontraron {count} resultados para "{query}"',foundInQuestionsTitle:"Encontrado en Preguntas",foundInTextTitle:"Encontrado en Texto",foundSegmentsInEpisodeCount_one:"{count} coincidencia",foundSegmentsInEpisodeCount_few:"{count} coincidencias",foundSegmentsInEpisodeCount_many:"{count} coincidencias",foundQuestionsInEpisodeCount_one:"{count} pregunta",foundQuestionsInEpisodeCount_few:"{count} preguntas",foundQuestionsInEpisodeCount_many:"{count} preguntas",noQuestionsAddedYet:"An no se han agregado preguntas.",filterByYear:"Filtrar por Ao",filterByMonth:"Filtrar por Mes",allYears:"Todos los Aos",allMonths:"Todos los Meses",resetFilters:"Restablecer",january:"Enero",february:"Febrero",march:"Marzo",april:"Abril",may:"Mayo",june:"Junio",july:"Julio",august:"Agosto",september:"Septiembre",october:"Octubre",november:"Noviembre",december:"Diciembre",tryUploadingAudioOrFilter:"Intenta subir audio o cambiar los filtros.",contextQuestion:"Contexto (pregunta)",question:"Pregunta",playbackSpeed:"Velocidad de Reproduccin",audioTrack:"Pista de Audio",noEpisodesFound:"No se encontraron meditaciones.",deselectAll:"Deseleccionar todo",deleteSelected:"Eliminar seleccionados",errorTranslatingTranscriptOpenAI:"Error al traducir la transcripcin con DeepSeek.",errorTranslatingTranscriptOpenAIDesc:"Ocurri un error al traducir la transcripcin con DeepSeek. Intenta dividir el texto en partes ms pequeas o reducir el tamao.",errorTranslatingTextOpenAI:"Error al traducir el texto con DeepSeek: {errorMessage}",headerDefaultTitle:"Dos Mundos Podcast",languageRussian:"Ruso",languageSpanish:"Espaol",languageEnglish:"Ingls",languageGerman:"Alemn",languageFrench:"Francs",languagePolish:"Polaco",languageSettings:"Configuracin de idioma",languageChangeNotice:"Selecciona tu idioma de interfaz preferido",playerRewindBack10:"Retroceder 10 segundos",playerPlay:"Reproducir",playerPause:"Pausa",playerForward10:"Avanzar 10 segundos",playerProgressBar:"Progreso del podcast",playerJumpToQuestion:"Ir a la pregunta: {title}",error:"Error",sectionTitleEmpty:"El ttulo de la seccin no puede estar vaco.",sectionTimeInvalid:"El tiempo de la seccin no es vlido.",sectionSaved:"Seccin guardada",sectionSavedDescription:'Seccin "{title}" guardada exitosamente.',sectionDeleted:"Seccin eliminada",sectionDeletedDescription:"Seccin eliminada exitosamente.",currentSection:"Seccin actual",addNewSection:"Agregar nueva seccin",add:"Agregar",editCurrentSection:"Editar seccin actual",noActiveSection:"No hay seccin activa. Agrega una nueva.",allSections:"Todas las secciones",editSection:"Editar seccin {title}",noSectionsYet:"An no se han agregado secciones.",addSection:"Agregar seccin",time:"Tiempo",title:"Ttulo",renameSpeakerGlobally:"Renombrar orador globalmente",reassignToExistingSpeaker:"Reasignar a orador existente",createNewSpeaker:"Crear nuevo orador",newSpeakerName:"Nombre del nuevo orador",speakerName:"Nombre del orador",enterSpeakerNamePlaceholder:"Ingrese nombre del orador",renameSpeaker:"Renombrar orador",reassignSpeaker:"Reasignar orador",createSpeaker:"Crear orador",currentSpeaker:"Orador actual",cacheSettings:"Configuracin de cach",cacheUsage:"Uso de cach",confirmClearCache:"Limpiar todo el cach?",clearCache:"Limpiar cach",removing:"Eliminando...",maxCacheSize:"Tamao mximo de cach",downloadText:"Descargar texto",downloadTextSettings:"Configuracin de descarga de texto",contentType:"Tipo de contenido",allText:"Todo el texto",selectedQuestions:"Preguntas seleccionadas",selectQuestions:"Seleccionar preguntas",includeTimings:"Incluir tiempos",format:"Formato",download:"Descargar",textDownloadStarted:"Descarga de texto iniciada",includeSpeakers:"Incluir oradores",cacheForOffline:"Guardar",cached:"Guardado",offlineMode:"Trabajando en modo sin conexin. Datos cargados desde cach.",offlineModeTitle:"Modo Sin Conexin",deleteAndRetranscribe:"Eliminar y retranscribir",retranslate:"Retraducir",retranslateTranscript:"Retraducir transcripcin",openInNewWindow:"Abrir en nueva ventana",manage:"Gestionar",autoGenerateQuestions:"Autogenerar preguntas",loadQuestionsFromDB:"Cargar desde base de datos",fileNotFound:"Archivo no encontrado",fileNotFoundInFolder:"Archivo esperado {expectedFilename} no encontrado en carpeta seleccionada",fileFoundAndAdded:"Archivo encontrado y agregado",fileWillBeUploaded:"Archivo {filename} ser subido",fileUploadError:"Error de subida de archivo",noFilesForEpisode:"No se encontraron archivos para este episodio",spanishTranscriptInProgress:"La transcripcin en espaol est procesndose",transcribeSpanishFirst:"Primero transcriba el audio en espaol",needSpanishFirst:"Primero suba la versin en espaol",createEnglishVersion:"Crear versin en ingls",fromSpanishTranscript:"de la transcripcin espaola",downloadSubtitles:"Descargar subttulos",translateTranscriptFromRussian:"Traducir transcripcin del ruso",srtDownloaded:"Subttulos descargados",textTranslated:"Texto traducido",processWithAI:"Procesar con IA",errorUploadingToHostinger:"Error al subir a Hostinger: {errorMessage}",errorDeletingHostingerFile:"Error al eliminar archivo {fileName} de Hostinger: {errorMessage}",hostingerConnectionFailed:"No se pudo conectar al servidor SFTP de Hostinger",hostingerUploadTimeout:"Tiempo de espera agotado en Hostinger - por favor, verifique su conexin",migrationStarted:"Migracin de almacenamiento iniciada",migrationComplete:"Migracin de almacenamiento completada",migrationError:"Error de migracin",filesSelectedForMigration:"Archivos seleccionados para migracin",storageProvider:"Proveedor de almacenamiento",uploadAudioAndManageVersions:"Subir audio y gestionar versiones de idiomas",supportedAudioFormatsDescription:"Archivos de audio admitidos: MP3, WAV, M4A, AAC, OGG, FLAC",waitForCompletion:"Espere a que se complete el proceso actual",errorLoadingEpisodes:"Error al cargar episodios",spanishTranscriptRequired:"Spanish transcript required",spanishVersionRequired:"Spanish version required",online:"En lnea",syncing:"Sincronizando...",syncError:"Error de sincronizacin",pendingChanges:" ",justSynced:" ",minutesAgo:" ",hoursAgo:" ",clickToSync:"  ",loadedFromCache:"Cargado desde cach",dataLoadedOffline:"    ",transcriptFromCache:"  ",transcriptLoadedOffline:"    ",questionsFromCache:"  ",questionsLoadedOffline:"    ",offlineDataUnavailable:"  ",episodeNotCached:"       ",transcriptUnavailableOffline:"  ",transcriptNotCached:"      ",questionsUnavailableOffline:"  ",questionsNotCached:"      ",savedOffline:" ",segmentSavedOffline:"         ",transcriptSavedOffline:"         ",questionsSavedOffline:"         ",offlineSaveError:"    ",confirmSplitOffline:" ?    .",confirmMergeOffline:"   ?    .",confirmDeleteOffline:" ?    .",segmentSplitOffline:"  ()",segmentMergedOffline:"  ()",segmentDeletedOffline:"  ()",audioCache:" ",files:"archivos",used:"usado",currentEpisode:" ",downloading:"Descargando",cache:"Cach",removeFromCache:"Eliminar del cach",cacheManagement:"Gestin de cach",manageStoredAudio:"  ",clearAll:"Limpiar todo",cachedFiles:"Archivos en cach",syncCompleted:"Sincronizacin completada",itemsSynced:"Elementos sincronizados",connectionRestored:"Conexin restaurada",syncingChanges:"Sincronizando cambios",connectionLost:"Conexin perdida",workingOffline:"Trabajando offline",offlineSettings:"Configuracin offline",networkStatus:"Estado de red",connection:"Conexin",offline:"Offline",pendingSync:"Sincronizacin pendiente",items:"elementos",syncNow:"Sincronizar ahora",storageUsage:"Uso de almacenamiento",totalUsage:"Uso total",clearAllData:"Limpiar todos los datos",syncQueue:"Cola de sincronizacin",attempts:"intentos",offlineFeatures:"Caractersticas offline",audioPlayback:"Reproduccin de audio",textEditing:"Edicin de texto",autoSync:"Sincronizacin automtica",localStorage:"Almacenamiento local",translateTimingsToEnglish:"Traducir tiempos al ingls",interfaceLanguage:"Interface Language",languageChangeHint:"Language change will take effect immediately",editHistoryAdminTitle:"Edit History Admin",authenticateToAccessEditHistory:"Please authenticate to access the edit history admin panel",loggedInAs:"Logged in as",logout:"Logout",totalEdits:"Total Edits",active:"Active",last24h:"Last 24h",filters:"Filters",editor:"Editor",showRolledBack:"Show rolled back edits",edits:"edits",noEditsFound:"No edits found",before:"Before",after:"After",revertedAt:"Reverted at",reason:"Reason",metadata:"Metadata",rollback:"Rollback",editRolledBackSuccessfully:"Edit rolled back successfully",previousContentRestored:"The previous content has been restored",rollbackRecorded:"Rollback recorded but not applied",allEditors:"All Editors",allTypes:"All Types",allTargets:"All Targets",searchContent:"Search content...",loginToViewEditHistory:"Inicia sesin para ver y gestionar tu historial de edicin",loginAsEditor:"Iniciar sesin como Editor",noEditsYet:"An no hay ediciones",activeEdits:"Ediciones Activas",undo:"Deshacer",confirmRollback:"Ests seguro de que quieres revertir esta edicin?\n\nEsto restaurar el contenido anterior.",editRolledBack:"Edicin revertida",contentRestored:"Tu contenido anterior ha sido restaurado",rollbackRecordedDesc:"La reversin fue registrada pero la restauracin del contenido requiere intervencin manual",authenticate:"Autenticar",editorAuthentication:"Autenticacin de Editor",editorAuthDescription:"Ingresa tu email y nombre para autenticarte como editor. Solo se permiten caracteres latinos.",email:"Email",emailPlaceholder:"tu.email@ejemplo.com",emailLatinOnly:"El email debe contener solo caracteres latinos",name:"Nombre",namePlaceholder:"Juan Prez",nameLatinOnly:"El nombre debe contener solo caracteres latinos, espacios y guiones",loginFailed:"Error de inicio de sesin",authenticating:"Autenticando...",translateQuestionsToAllLanguages:"Traducir preguntas a todos los idiomas",questionsTranslatedFromRussian:"Preguntas traducidas del ruso",noRussianQuestionsToTranslate:"No hay preguntas rusas para traducir",translateQuestionsButton:"Traducir preguntas",analyticsTitle:"Analtica",analyticsSubtitle:"Estadsticas de visitas y escuchas",analyticsOverview:"Resumen",analyticsAudience:"Audiencia",analyticsContent:"Contenido",analyticsBehavior:"Comportamiento",analyticsTotalUsers:"Total de usuarios",analyticsTotalSessions:"Total de sesiones",analyticsTotalPageViews:"Vistas de pgina",analyticsAvgSessionDuration:"Duracin promedio",analyticsVsPreviousPeriod:"vs perodo anterior",analyticsVisitorsOverTime:"Visitas a lo largo del tiempo",analyticsUsers:"Usuarios",analyticsSessions:"Sesiones",analyticsPopularEpisodes:"Meditaciones populares",analyticsViews:"Vistas",analyticsAvgDuration:"Duracin promedio",analyticsGeography:"Geografa",analyticsDevices:"Dispositivos",analyticsDeviceTypes:"Tipos de dispositivos",analyticsBrowsers:"Navegadores",analyticsTrafficSources:"Fuentes de trfico",analyticsListeningStats:"Estadsticas de escucha",analyticsAvgListeningTime:"Tiempo promedio de escucha",analyticsCompletionRate:"Tasa de finalizacin",analyticsTotalPlays:"Total de reproducciones",analyticsTotalCompletions:"Total de finalizaciones",analyticsMostActiveHours:"Horas ms activas",analyticsBehaviorMetrics:"Mtricas de comportamiento",analyticsBounceRate:"Tasa de rebote",analyticsBounceRateDesc:"Porcentaje de visitas de una sola pgina",analyticsAvgSessionDurationDesc:"Tiempo promedio en el sitio",analyticsPagesPerSession:"Pginas por sesin",analyticsPagesPerSessionDesc:"Nmero promedio de pginas vistas",analyticsUserInteractions:"Interacciones de usuarios",analyticsSearches:"Bsquedas",analyticsFilters:"Filtros",analyticsShares:"Compartidos",analyticsDownloads:"Descargas",analyticsEngagementScore:"Puntuacin de participacin",analyticsEngagementScoreDesc:"Indicador general de actividad del usuario",analyticsNoData:"No hay datos",analyticsError:"Error al cargar analtica",analyticsErrorDesc:"No se pudieron cargar los datos de analtica. Intente actualizar la pgina.",analyticsLast24Hours:"ltimas 24 horas",analyticsLast7Days:"ltimos 7 das",analyticsLast30Days:"ltimos 30 das",analyticsExport:"Exportar",analyticsExportReport:"Exportar informe",analyticsExportReportDesc:"La funcin de exportacin estar disponible prximamente",analyticsFooterNote:"Los datos se actualizan cada 5 minutos. Use el botn de actualizacin para obtener informacin actualizada.",translateQuestionsFrom:"Traducir preguntas desde {language}",skipBackward10Tooltip:"Retroceder 10 segundos",pauseTooltip:"Pausar",playTooltip:"Reproducir",skipForward10Tooltip:"Avanzar 10 segundos",exitReadingMode:"Salir del modo lectura",exitReadingModeTooltip:"Regresar a la vista normal del reproductor",loadingAudio:"Cargando audio...",success:"xito",downloadError:"Error de descarga",tapToUnmuteAndPlay:"Toca para activar sonido y reproducir",noAudioSource:"Fuente de audio no disponible",episodePublishedTitle:"Episodio publicado",episodePublishErrorTitle:"Error de publicacin",episodeFromCache:"Cargado desde cach",episodeLoadedOffline:"Episodio cargado offline",invalidEpisodeData:"Datos de episodio invlidos",errorLoadingEpisode:"Error cargando episodio",transcriptSaved:"Transcripcin guardada",transcriptSavedSuccessfully:"Transcripcin guardada exitosamente",saveError:"Error de guardado",questionsSaved:"Preguntas guardadas",questionsSavedSuccessfully:"Preguntas guardadas exitosamente",refreshError:"Error de actualizacin",failedToRefreshData:"Error al actualizar datos",errorMergingSegment:"Error fusionando segmento",cannotMergeFirstSegment:"No se puede fusionar el primer segmento",errorAddingSegment:"Error agregando segmento",invalidTimeRange:"Rango de tiempo invlido",segmentOverlaps:"El segmento se superpone con segmentos existentes",segmentAddedTitle:"Segmento agregado",segmentAddedDesc:"Nuevo segmento agregado exitosamente",finalizingTranscriptData:"Finalizando datos de transcripcin...",errorFetchingTranscript:"Error obteniendo transcripcin",errorUpdatingSegment:"Error actualizando segmento",errorSimplifyingTextOpenAI:"Error simplificando texto",settingsSaved:"Configuracin guardada",offlineSettingsSaved:"Configuracin offline guardada exitosamente",syncComplete:"Sincronizacin completa",manualSyncComplete:"Sincronizacin manual completada exitosamente",cacheCleared:"Cach limpiado",offlineCacheCleared:"Cach offline limpiado exitosamente",clearCacheError:"Error limpiando cach",back:"Atrs",offlineSettingsDescription:"Configurar funcionalidad offline y sincronizacin de datos",syncStatus:"Estado de sincronizacin",storageUsageDescription:"Monitorear y gestionar el uso de almacenamiento offline",dataCache:"Cach de datos",transcripts:"Transcripciones",loadingStats:"Cargando estadsticas...",cacheSettingsDescription:"Configurar tamaos de cach y comportamiento",autoSyncDescription:"Sincronizar datos automticamente cuando est online",maxAudioCache:"Cach mximo de audio",maxAudioCacheDescription:"Mximo de archivos de audio para cach offline (MB)",maxDataCache:"Cach mximo de datos",maxDataCacheDescription:"Mximo de datos para cach offline (MB)",syncInterval:"Intervalo de sincronizacin",syncIntervalDescription:"Frecuencia de sincronizacin de datos cuando est online (minutos)",autoCleanup:"Limpieza automtica",autoCleanupDescription:"Limpiar automticamente datos de cach antiguos",saveSettings:"Guardar configuracin",syncQueueDescription:"Gestionar tareas de sincronizacin pendientes",syncQueueEmpty:"Cola de sincronizacin vaca",manualSync:"Sincronizacin manual",refreshStats:"Actualizar estadsticas",audioTrackMixed:"Juntos",audioTrackRussian:"Mara",audioTrackSpanish:"Pepe",recognizeText:"Reconocer texto",recognizeQuestions:"Reconocer preguntas",recognizingText:"Reconociendo texto...",recognizingQuestions:"Reconociendo preguntas...",smartSegmentation:"Segmentacin inteligente",segmenting:"Segmentando...",transcribing:"Transcribiendo...",autoRecognizeQuestions:"Reconocimiento automtico de preguntas con IA",autoRecognizeQuestionsDesc:"Generar automticamente preguntas al cargar un episodio",blog_title:"Blog",blog_subtitle:"Explora las profundidades del mundo interior a travs de mensajes universales.",search_articles_placeholder:"Buscar artculos...",all_categories:"Todos",read_article:"Leer",back_to_articles:"Volver a los artculos",watch_on_youtube:"Ver en YouTube",video_version:"Versin en video",reading_time_minutes_one:"{count} minuto de lectura",reading_time_minutes_many:"{count} minutos de lectura",published_on:"Publicado"},ey={enterEditMode:"Enter Edit Mode",exitEditMode:"Exit Edit Mode",appName:"Dos Mundos Radio",loading:"Loading...",loadingPodcast:"Loading podcast...",loadingEpisodes:"Loading meditations...",loadingEpisode:"Loading meditation...",errorLoadingData:"Error loading data",tryAgain:"Try again",failedToLoadPodcastData:"Failed to load podcast data: {errorMessage}. Please try again later.",episodeNotFound:"Meditation not found",noEpisodesFoundForLanguage:'No meditations found for "{language}" language.',tryUploadingAudio:"Try uploading an audio file to get started.",reloadEpisodes:"Reload data",episodes:"Radio Dos Mundos",searchEpisodesAndQuestions:"Search meditations, questions and text...",searchInTranscript:"Search in transcript...",searchResultsEmpty:"Nothing found for your search.",noEpisodesForLanguageShort:"Meditations not found",selectEpisode:"Select meditation: {episodeTitle}",openEpisode:"Open",episodeTitleMissing:"Meditation title missing",descriptionMissing:"Description missing.",questions:"Questions",questionsCountFormat:"({count})",noQuestionsForLanguage:"Questions have not been added yet for the current language.",loadingTranscriptAndQuestions:"Loading transcript and questions...",noQuestionsOrTranscriptTitle:"No questions or transcript yet",noQuestionsOrTranscriptDesc:"When the transcript is ready it will appear here. You can add questions now.",loadingTranscript:"Loading transcript...",addQuestion:"Add",editQuestion:"Edit question",deleteQuestion:"Delete question",saveQuestion:"Save",cancel:"Cancel",questionTime:"Time",questionTitle:"Question title",questionTitlePlaceholder:"E.g.: About the benefits of meditation",questionLanguage:"Question language",addQuestionDialogTitle:"Add question",addQuestionDialogDescription:"Mark the time and enter the question details.",addQuestionDialogDescriptionSegment:'Add a question for the segment: "{segmentText}"',editQuestionDialogTitle:"Edit question",editQuestionDialogDescription:"Modify the question details.",confirmDeleteQuestionTitle:"Confirm deletion",confirmDeleteQuestionDescription:"Are you sure you want to delete this question? This action is irreversible.",audioErrorTitle:"Audio error",audioErrorDescriptionPlayer:'Error loading audio for "{episodeTitle}".',playbackErrorTitle:"Playback error",playbackErrorDescription:"Could not play audio.",navigationNoQuestions:"There are no questions in this meditation to navigate.",navigationToastTitle:"Navigation",previousQuestion:"Previous question",nextQuestion:"Next question",changePlaybackSpeed:"Change playback speed, current: {speed}",selectLanguageModalTitle:"Select a language",selectLanguageModalDescription:"Please select your preferred language for the application. You can change it later.",russian:"Russian",spanish:"Espaol",english:"English",german:"Deutsch",french:"Franais",polish:"Polski",allLanguages:"All languages",language:"Language",filename:"Filename",duration:"Duration",foundQuestionsInEpisode:"Found in questions",foundInTranscript:"Found in transcript",questionCount_one:"{count} question",questionCount_few:"{count} questions",questionCount_many:"{count} questions",errorAddingQuestion:"Failed to add question: {errorMessage}",errorUpdatingQuestion:"Failed to update question: {errorMessage}",errorDeletingQuestion:"Failed to delete question: {errorMessage}",errorGeneric:"Error",batchAddQuestions:"Import from Text",batchAddQuestionsShort:"Import",batchAddQuestionsDialogTitle:"Import Questions from Text",batchAddQuestionsDialogDescription:'Paste a list of questions in the text field below. Each question should start with a time mark (e.g., HH:MM:SS or MM:SS), followed by the question text. If the question is in two languages, separate them with " / " character.',pasteQuestionsList:"Paste questions list:",processAndAdd:"Process and Add",bilingualExamplePart1:"How to recognize sacred messages",bilingualExamplePart2:"Como reconocer los Mensajes sagrados",singleLanguageExample:"Do you need to read books",batchAddPlaceholder:"0:01:23 Example question\n0:05:10 Question in Russian / Pregunta en espaol...",errorBatchAddingQuestions:"Error adding questions in batch: {errorMessage}",nowPlaying:"Now Playing...",paused:"Paused",selectAnEpisode:"Select a meditation to start.",backToEpisodes:"To Meditations",backToEpisodesShort:"To Meditations",pageNotFoundTitle:"Page Not Found (404)",pageNotFoundDescription:"Sorry, the page you are looking for does not exist. It may have been moved or deleted.",uploadAudioFiles:"Upload Audio Files",uploadAudio:"Upload Audio",uploadAudioDescription:"      .  MP3, WAV   .    --_.mp3 (, 2025-06-28_RU.mp3)   .",dropFilesHere:"  !",dragOrClickUpload:"Drag files or click to select",supportedFormats:"Supported Formats",uploading:"...",uploadError:"Upload Error",errorUploadingFile:'    "{fileName}"',allFilesUploadedSuccessfully:"   !",spotifyUploadTitle:"  Spotify",spotifyUploadDesc:"     Spotify",connectSpotify:" Spotify",whatYouGet:"  :",spotifyFeature1:"   Spotify",spotifyFeature2:"Episode Metadata Management",spotifyFeature3:"Account Synchronization",spotifyFeature4:"Analytics and Statistics",spotifyAuthSuccess:"Successful Authorization",spotifyAuthSuccessDesc:"    Spotify",spotifyAuthError:"Authorization Error",spotifyAuthErrorDesc:"    Spotify",welcomeBack:"  ,",disconnect:"Disconnect",uploadEpisode:"Upload Episode",uploadEpisodeDesc:"Select audio file and fill in episode information",audioFile:"Audio File",episodeTitle:"Episode Title",enterTitle:"Enter episode title",description:"Description",enterDescription:"Enter episode description",category:"Category",explicitContent:"Explicit Content",uploadingToSpotify:"  Spotify...",uploadComplete:"Upload Complete",spotifyUploadSuccess:"Successful Upload",spotifyUploadSuccessDesc:"    Spotify",spotifyUploadError:"Upload Error",spotifyUploadErrorDesc:"Failed to upload episode",configurationError:"Error de Configuracin",spotifyClientIdMissing:"Spotify Client ID no est configurado. Crea archivo .env.local con VITE_SPOTIFY_CLIENT_ID",spotifyConfiguration:"Configuracin de Spotify",spotifyConfigurationDesc:"Ingresa tus credenciales de Spotify para conectar",spotifyClientId:"Client ID",spotifyClientSecret:"Client Secret",saveConfiguration:"Guardar Configuracin",resetConfiguration:"Restablecer",copiedToClipboard:"Copiado",copiedToClipboardDesc:"Datos copiados al portapeles",spotifyConfigSaved:"Configuracin Guardada",spotifyConfigSavedDesc:"Configuracin de Spotify guardada exitosamente",spotifyConfigError:"Error al Guardar",confirmResetConfig:"Ests seguro de que quieres restablecer la configuracin de Spotify?",configReset:"Configuracin Restablecida",configResetDesc:"La configuracin de Spotify ha sido restablecida",howToGetCredentials:"Cmo obtener credenciales:",spotifyStep1:"Ve al Spotify Developer Dashboard",spotifyStep2:"Crea una nueva aplicacin",spotifyStep3:"Copia Client ID y Client Secret",spotifyStep4:"Pega los datos en el formulario de arriba",openSpotifyDeveloper:"Abrir Spotify Developer",spotifyConfigurationRequired:"Se requieren credenciales de Spotify para trabajar con el servicio",validationError:"Validation Error",fillRequiredFields:",    ",howItWorks:"How it works",step1:"  Spotify  OAuth",step2:"Select audio file and fill in metadata",step3:"Click upload button",step4:"    Spotify",openSpotifyPodcasters:" Spotify Podcasters",close:"Close",startUpload:"Start Upload",uploadingInProgress:"...",uploadToR2Success:"    .",metadataSavedSuccess:"   .",transcriptionStarted:"Transcription Started",errorUploadingToR2:"   R2: {errorMessage}",errorListingR2Files:"     R2: {errorMessage}",errorPresignedUrlR2:"  presigned URL  R2: {errorMessage}",errorSubmittingAssemblyAI:"   AssemblyAI: {errorMessage}",errorFetchingAssemblyAIResult:"    AssemblyAI: {errorMessage}",errorFetchingEpisodes:"   : {errorMessage}",errorFetchingQuestions:"    : {errorMessage}",transcriptEditorTitle:"Text",refreshTranscript:"Refresh Text",collapse:"Collapse",expand:"Expand",transcriptionError:"Transcription error",transcriptionErrorTitle:"Transcription error",transcriptionErrorAssembly:"  AssemblyAI  ",noTranscriptAvailableYet:"     .",startTranscription:"Start Text Recognition",noTranscriptData:"  .",transcriptionInProgressTitle:"Text Recognition in Progress",transcriptionInProgressDescription:"   .   .",transcriptionCompletedTitle:"Text Recognition Completed",transcriptionCompletedDescription:"   {episode}    .",transcriptionCompletedDesc:"  !",errorPollingTranscript:"     .",transcriptionSubmittedTitle:"Text Recognition Submitted",transcriptionSubmittedDescription:"      {lang} .     .",missingEpisodeOrUrl:"ID   URL      .",unknownError:"Unknown Error",unknownAssemblyError:"   AssemblyAI",transcriptSegmentUpdatedTitle:"Segment Updated",transcriptSegmentUpdatedDesc:"   .",playSegment:"Play Segment",editSegment:"Edit Segment",save:"Save",addQuestionToSegment:"Make Question",questionAttached:"Question Attached",speaker:"Speaker",collapseQuestions:"Collapse Questions",expandQuestions:"Expand Questions",transcriptText:"/ ",showFullText:"Show Full Text",hideFullText:"Hide Full Text",hide:"Hide",speakerLabel:" {id}",editSpeaker:"Edit Speaker",noSpeakersDetected:"Speakers Not Detected",confirmSpeakerChangeTitle:" ?",confirmSpeakerChangeDescription:" ,       ?",textSegment:"Text Segment",textActions:"Text Actions",meditationTitlePrefix:"Meditation",introduction:"Introduction",loadMoreSegments:"Show More",showText:"Show Text",fullTranscript:"Full Text",errorStartingTranscription:"  : {errorMessage}",searchTranscriptPlaceholder:"   ...",noResultsInTranscript:"    .",jumpToQuestion:"Go to Question",mergeWithPreviousSegment:"Merge with Previous",deleteSegment:"Delete segment",splitSegment:"Split segment",saveSegment:"Save segment",addSegment:"Add segment",addSegmentDescription:"  :       .",segmentStartTime:"Start time",segmentEndTime:"End time",segmentText:"Segment text",confirmMergeTitle:" ?",confirmMergeDescription:" ,       ?   .",confirmDeleteSegmentTitle:" ?",confirmDeleteSegmentDescription:" ,     ?   .   .",confirmSplitTitle:" ?",confirmSplitDescription:" ,         ?   .",doNotAskAgain:"Don't ask again",errorSplittingSegment:"Error splitting segment",cannotSplitEmpty:"       .",cannotSplitAtPosition:"     (   ).",cannotSplitIntoEmpty:"    .   .",pressEnterToSplit:" Enter     ",editSegmentPanelTitle:"Editing segment",cursorPositionRequired:"   ,    .",confirm:"Confirm",merge:"Merge",split:"Split",delete:"Delete",splitSegmentAtCursor:"Split segment at cursor position",editTextSegmentPlaceholder:"  ...",questionAttachedToSegment:"Question is attached to this segment",selectFiles:"Select files",addAnotherFile:"Add another file",startAllUploads:"Start all uploads",processing:"Processing",timingsQuestions:" ()",confirmOverwriteTitle:" ?",confirmOverwriteMessage:"  SLUG '{slug}'  .  ?",overwrite:"Overwrite",selectWhatToOverwrite:",  :",overwriteServerFile:"   ( )",overwriteEpisodeInfo:"   (, , URL)",overwriteTranscript:"Transcript",overwriteQuestions:"Questions",transcriptionQueued:"Transcription queued",processingErrorsTitle:"Processing errors",processingErrorsDesc:"    .",uploadCancelledEpisodeExists:" :   .",transcriptionProcessing:"  ...",transcriptionCompletedShort:"Transcription completed",transcriptionFailedShort:"Transcription error",errorCheckingEpisodeDB:"    : {errorMessage}",fileAlreadyInR2Title:"   R2",fileAlreadyInR2Desc:" {fileName}     .",usingExistingR2FileTitle:"Usando archivo existente",usingExistingR2FileDesc:"Usando el archivo existente {fileName} del almacenamiento en la nube para este episodio.",overwritingDbData:"Sobrescribiendo datos de la base de datos...",overwritingEpisodeTitle:"Overwriting episode",overwritingEpisodeDesc:"    {slug}...",audioMetadataError:"   .",supabaseEpisodeError:"    : {errorMessage}",startingTranscription:" ...",supabaseTranscriptError:"     : {errorMessage}",allFilesProcessedTitle:"All files processed",allFilesProcessedDesc:"    .",transcriptionErrorDesc:"   {episode}  .",manageAndUploadTitle:"Management and upload",manageAndUploadDescription:"      .",manageEpisodes:"Manage meditations",manageExistingEpisodes:"Manage meditations",manageEpisodesDescription:"        .",manageEpisodesTitle:"Episode Management",assemblyAiApiKey:" API AssemblyAI",assemblyAiApiKeyDescription:"   API AssemblyAI    .      .",assemblyAiApiKeyPlaceholder:"sk_...",apiKeyStoredLocally:"           .",apiKeySaved:" API ",apiKeySavedDescription:"  API AssemblyAI  .",apiKeySaveError:"    API. ,  .",apiKeyCleared:" API ",apiKeyClearedDescription:"  API AssemblyAI  .",apiKeyClearError:"    API. ,  .",clear:"Clear",show:"Show",supportedAudioFormats:"  : MP3, WAV, M4A, AAC, OGG, FLAC",filenameLanguageSuffixes:"     : _es, _ru, _en",dragOrClickToUpload:"Drag audio files or click to select",filesInQueue_one:"{count}   ",filesInQueue_few:"{count}   ",filesInQueue_many:"{count}   ",addFiles:"Add files",episodeManagement:"Episode Management",selectAll:"Select all",episodes_one:"{count} episode",episodes_few:"{count} episodes",episodes_many:"{count} episodes",baseFile:"Base file",noFileUploaded:"File not uploaded",ready:"Ready",notStarted:"Not started",dateNotSpecified:"Date not specified",audioFileNotAvailable:"Audio file not available for recognition",transcriptionAlreadyStarted:"Recognition already started",transcriptionInProgress:"Wait for current recognition process to complete",transcriptionAlreadyCompleted:"Recognition already completed",transcriptionAlreadyReady:"Text already recognized",audioUrlNotAvailable:"   URL ",assemblyAiNoJobId:"AssemblyAI    ",transcriptionCompleted:" !",transcriptionStartError:"Error starting recognition",questionsNotFound:"Questions not found",questionsNotFoundInDB:"Questions for this episode are not available in the database",questionsLoaded:"Questions loaded",questionsLoadedFromDB_one:" {count}    ",questionsLoadedFromDB_few:" {count}    ",questionsLoadedFromDB_many:" {count}    ",questionsLoadError:"Error loading questions",transcriptRequired:"Transcription required",transcriptRequiredDescription:"First you need to recognize the episode text",transcriptDataNotFound:"Transcript data not found",questionsGenerationFailed:"Failed to generate questions",questionsGenerated:"Questions generated",questionsGeneratedForEpisode_one:" {count}    {episodeSlug} ({lang})",questionsGeneratedForEpisode_few:" {count}    {episodeSlug} ({lang})",questionsGeneratedForEpisode_many:" {count}    {episodeSlug} ({lang})",questionsGenerationError:"Error generating questions",spanishEpisodeNotFound:"Spanish episode not found",spanishTranscriptNotReady:"Spanish transcript not ready",spanishTranscriptTextNotFound:"Spanish transcript text not found",transcriptTranslationFailed:"Failed to translate transcript",transcriptTranslated:"Transcript translated",enTranscriptCreated:"EN   {episodeSlug} ",transcriptTranslationError:"Transcript translation error",sourceEpisodeNotFound:"     {language}",questionsNotFoundForTranslation:"Questions not found for translation",translateQuestionPrompt:'     {sourceLanguage}   .         : "{questionTitle}"',questionsTranslated:"Questions translated",questionsTranslatedCreated_one:" {count}  (EN)",questionsTranslatedCreated_few:" {count}  (EN)",questionsTranslatedCreated_many:" {count}  (EN)",questionsTranslationError:"Questions translation error",episodeDeleteError:"   {episodeTitle}",episodesDeleted:"Episodes deleted",episodesDeletedSuccessfully_one:"{count}   ",episodesDeletedSuccessfully_few:"{count}   ",episodesDeletedSuccessfully_many:"{count}   ",questionsDeleted:"Questions deleted",allQuestionsDeletedForEpisode:"    {episodeTitle} ",questionsDeleteError:"Error deleting questions",deleteAllQuestionsTitle:"Delete all questions",confirmDeleteAllQuestionsMessage:'Ests seguro de que quieres eliminar todas las preguntas para el episodio "{episodeTitle}" ({lang})?',deleteAllQuestionsConfirm:"Delete all questions",confirmDeleteEpisodesMessage:"Ests seguro de que quieres eliminar {count} episodios seleccionados?",transcribe:"Transcribe",starting:"Starting",fromDB:"From DB",recognize:"Recognize",deleteAllQuestions:"Delete all questions",translateTranscriptFromSpanish:"Translate transcript from Spanish",translateQuestionsFromSpanish:"Translate questions from Spanish",translateQuestionsFromRussian:"Translate questions from Russian",transcriptDeleted:"Transcript deleted",noAssemblyIdInDB:"El ID de transcripcin de AssemblyAI no se encontr en la base de datos para este episodio e idioma.",transcriptionExistsTitle:"La transcripcin existe",transcriptionExistsDesc:"La transcripcin para el episodio {episode} ya existe y est completa.",warning:"Advertencia",errorDeletingQuestions:"Error al eliminar preguntas antiguas: {errorMessage}",errorDeletingTranscripts:"Error al eliminar transcripciones antiguas: {errorMessage}",errorDeletingEpisodeDB:"Error al eliminar el episodio de la base de datos: {errorMessage}",episodeDeletedTitle:"Episodio eliminado",episodeDeletedSuccess:"El episodio '{episodeTitle}' se elimin correctamente.",confirmDeleteTitle:"Confirmar eliminacin",confirmDeleteEpisodeMessage:"Ests seguro de que quieres eliminar el episodio '{episodeTitle}'? Esto eliminar su audio, transcripciones y preguntas para todos los idiomas.",actionIrreversible:"Esta accin es irreversible.",deleting:"Eliminando...",deleteConfirm:"S, eliminar",fileDeletedFromR2Title:"Archivo eliminado del almacenamiento",fileDeletedFromR2Desc:"El archivo {fileName} se elimin correctamente del almacenamiento en la nube.",errorDeletingR2FilePartial:"No se pudo eliminar el archivo {fileName} del almacenamiento R2: {errorMessage}. Las entradas de la base de datos an se eliminaron.",translateToEnglish:"Traducir a EN",translateTimingsSuccessTitle:"Traduccin exitosa",translateTimingsSuccessDesc:"Texto de tiempos traducido exitosamente al ingls.",translateTimingsErrorTitle:"Error de traduccin",translateTimingsErrorDesc:"No se pudo traducir el texto de tiempos: {errorMessage}",searchEpisodes:"Buscar meditaciones...",timingsTranslating:"Traduciendo...",transcriptionPendingTranslation:"Pendiente de traduccin desde ES",transcriptionTranslating:"Traduciendo desde ES...",translateTranscriptTitle:"Translate Transcript",translateTranscriptDesc:"Translate transcript from Spanish to English",translateTranscriptSuccessTitle:"Transcript Translated",translateTranscriptSuccessDesc:"      {segmentsCount} ",translateTranscriptErrorTitle:"Translation Error",translateTranscriptErrorDesc:"   : {errorMessage}",translateTranscriptProgress:" ...",translateTranscriptButton:"  EN",settings:"Settings",showTranscript:"Show Text",downloadAudio:"Download Audio",downloadStartedTitle:"Download Started",downloadStartedDesc:"  .",audioNotAvailableForDownload:"   .",skipBackward10:"  10",skipForward10:"  10",play:".",pause:"Pause",editLogPageTitle:"Edit History",errorFetchingLogs:"Error fetching edit logs",noEditHistory:"No edit history available",editHistory:"Edit History",editHistoryTitle:"Edit History",rolledBack:"Rolled Back",errorLoadingHistory:"Error loading history",errorRollback:"Error rolling back",rollbackSuccessful:"Rollback successful",rollbackFailed:"Rollback failed",editType:"Edit Type",targetType:"Target Type",rolledBackBy:"Rolled back by",unknownUser:"Unknown user",showRolledBackEdits:"Show rolled back edits",editHistoryAdmin:"Edit History Admin",editHistoryCount:"Edit History ({count} edits)",backButton:"Back",actionReverted:"Action reverted",revertButton:"Revert",revertFailed:"Revert failed",revertSuccessful:"Revert successful",revertDescription:"Revert this change?",beforeLabel:"Before",afterLabel:"After",revertedAtLabel:"Reverted at {date}",assignSpeakerTitle:"Assign speaker",assignSpeakerDescription:"     :",selectExistingSpeaker:"Select existing speaker",selectSpeakerPlaceholder:"Select speaker",searchSpeakerPlaceholder:"Buscar hablante...",noSpeakerFound:"No se encontr ningn hablante.",or:"O",enterNewSpeakerName:"Ingresar Nuevo Nombre de Hablante",assignNewSpeakerName:"Asignar como Nuevo Hablante",newSpeakerNamePlaceholder:"Ej: Mara, Juan Prez",assignAsNewSpeaker:"Asignar como nuevo hablante",saveSpeakerAssignment:"Guardar Asignacin",speakerAssignedTitle:"Hablante Asignado",speakerAssignedDesc:"El hablante {newSpeaker} ha sido asignado.",errorSavingSpeakerAssignment:"Error al guardar la asignacin del hablante.",unknownSpeaker:"Orador desconocido",assignSpeakerTooltip:"Asignar/Cambiar orador",editRevertedTitle:"Edit Reverted",editRevertedDesc:"The edit has been reverted successfully",nothingToRevert:"Nothing to revert",untitledQuestion:"Untitled question",navigateToDeepSearch:"Go to deep search",search:"Search",deepSearchTitle:"Advanced search",deepSearchPlaceholder:"    ...",searching:"Searching",deepSearchMinChars:"  2   .",errorPerformingSearch:"   : {errorMessage}",noResultsFoundForQuery:'  "{query}"   .',searchResultsCount_one:' {count}    "{query}"',searchResultsCount_few:' {count}    "{query}"',searchResultsCount_many:' {count}    "{query}"',foundInQuestionsTitle:"Found in questions",foundInTextTitle:"Found in text",foundSegmentsInEpisodeCount_one:"{count} ",foundSegmentsInEpisodeCount_few:"{count} ",foundSegmentsInEpisodeCount_many:"{count} ",foundQuestionsInEpisodeCount_one:"{count} ",foundQuestionsInEpisodeCount_few:"{count} ",foundQuestionsInEpisodeCount_many:"{count} ",noQuestionsAddedYet:"Questions not added yet.",filterByYear:"Filter by year",filterByMonth:"Filter by month",allYears:"All Years",allMonths:"All Months",resetFilters:"Reset",january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December",tryUploadingAudioOrFilter:"Try uploading audio or changing filters.",contextQuestion:"Context (question)",question:"Question",playbackSpeed:"Playback Speed",audioTrack:"Audio Track",noEpisodesFound:"Meditations not found.",deselectAll:"Deselect all",deleteSelected:"Delete selected",errorTranslatingTranscriptOpenAI:"Error translating transcript through DeepSeek.",errorTranslatingTranscriptOpenAIDesc:"An error occurred while translating the transcript through DeepSeek. Try breaking the text into parts or reducing the size.",errorTranslatingTextOpenAI:"Error translating text through DeepSeek: {errorMessage}",offlineMode:"Working in offline mode. Data loaded from cache.",online:"Online",syncing:"Syncing...",syncError:"Sync error",pendingChanges:"changes pending",justSynced:"just now",minutesAgo:"min ago",hoursAgo:"h ago",clickToSync:"Click to sync",loadedFromCache:"Loaded from cache",dataLoadedOffline:"Data loaded from local cache",transcriptFromCache:"Transcript from cache",transcriptLoadedOffline:"Transcript loaded from local cache",questionsFromCache:"Questions from cache",questionsLoadedOffline:"Questions loaded from local cache",offlineDataUnavailable:"Data unavailable offline",episodeNotCached:"This episode was not saved for offline viewing",transcriptUnavailableOffline:"Transcript unavailable offline",transcriptNotCached:"Transcript was not saved for offline viewing",questionsUnavailableOffline:"Questions unavailable offline",questionsNotCached:"Questions were not saved for offline viewing",savedOffline:"Saved offline",segmentSavedOffline:"Changes saved locally and will be synchronized when connected to the internet",transcriptSavedOffline:"Transcript saved locally and will be synchronized when connected to the internet",questionsSavedOffline:"Questions saved locally and will be synchronized when connected to the internet",offlineSaveError:"Error saving in offline mode",confirmSplitOffline:"Split segment? Changes will be saved locally.",confirmMergeOffline:"Merge with next segment? Changes will be saved locally.",confirmDeleteOffline:"Delete segment? Changes will be saved locally.",segmentSplitOffline:"Segment split (offline)",segmentMergedOffline:"Segments merged (offline)",segmentDeletedOffline:"Segment deleted (offline)",audioCache:"Audio cache",cacheUsage:"Cache usage",files:"files",used:"used",currentEpisode:"Current episode",downloading:"...",cached:"Cached",cache:"Cache",removeFromCache:"Remove from cache",cacheForOffline:"Save",cacheManagement:"Cache management",manageStoredAudio:"Manage stored audio files",clearAll:"Clear all",cachedFiles:"Cached files",cacheSettings:"Cache settings",confirmClearCache:"  ?",clearCache:"Clear cache",removing:"...",maxCacheSize:"Maximum cache size",downloadText:"Download text",downloadTextSettings:"Text download settings",downloadSubtitles:"Download subtitles",processWithAI:"  AI",contentType:"Content type",allText:"All text",selectedQuestions:"Selected questions",selectQuestions:"Select questions",includeTimings:"Include timings",format:"Format",download:"Download",textDownloadStarted:"Text download started",includeSpeakers:"Include speakers",offlineModeTitle:"Offline mode",syncCompleted:"Sync completed",itemsSynced:"items synchronized",connectionRestored:"Connection restored",syncingChanges:" ...",connectionLost:"Connection lost",workingOffline:"Working in offline mode",offlineSettings:"Offline settings",networkStatus:"Network status",connection:"Connection",offline:"Offline",pendingSync:"Pending sync",items:"items",syncNow:"Sync Now",storageUsage:"Storage usage",totalUsage:"Total usage",clearAllData:"Clear all data",syncQueue:"Sync queue",attempts:"attempts",offlineFeatures:"Offline features",audioPlayback:"Audio playback",textEditing:"Text editing",autoSync:"Auto sync",localStorage:"Local storage",headerDefaultTitle:"Dos Mundos Podcast",languageRussian:"Russian",languageSpanish:"Spanish",languageEnglish:"English",languageGerman:"German",languageFrench:"French",languagePolish:"Polish",languageSettings:"Language Settings",languageChangeNotice:"Select your preferred interface language",playerRewindBack10:"   10 ",playerPlay:"Play",playerPause:"Pause",playerForward10:"   10 ",playerProgressBar:"Podcast progress",playerJumpToQuestion:"  : {title}",error:"Error",sectionTitleEmpty:"     .",sectionTimeInvalid:"   .",sectionSaved:"Section saved",sectionSavedDescription:' "{title}"  .',sectionDeleted:"Section deleted",sectionDeletedDescription:"  .",currentSection:"Current section",addNewSection:"Add new section",add:"Add",editCurrentSection:"Edit current section",noActiveSection:"  .  .",allSections:"All sections",editSection:"  {title}",noSectionsYet:"   .",addSection:"Add section",time:"Time",title:"Title",renameSpeakerGlobally:"Rename speaker globally",reassignToExistingSpeaker:"Reassign to existing speaker",createNewSpeaker:"Create new speaker",newSpeakerName:"New speaker name",speakerName:"Speaker name",enterSpeakerNamePlaceholder:"Enter speaker name",renameSpeaker:"Rename speaker",reassignSpeaker:"Reassign speaker",createSpeaker:"Create speaker",assignSpeaker:"Assign speaker",currentSpeaker:"Current speaker",spanishTranscriptRequired:"Spanish transcript required",spanishVersionRequired:"Spanish version required",deleteAndRetranscribe:"Delete and retranscribe",retranslate:"Retranslate",retranslateTranscript:"Retranslate transcript",openInNewWindow:"Open in new window",manage:"Manage",autoGenerateQuestions:"Auto-generate questions",loadQuestionsFromDB:"Load from database",fileNotFound:"File not found",fileNotFoundInFolder:"  {expectedFilename}     ",fileFoundAndAdded:"File found and added",fileWillBeUploaded:" {filename}  ",fileUploadError:"File upload error",noFilesForEpisode:"Files for this episode not found",spanishTranscriptInProgress:"Spanish transcript processing",transcribeSpanishFirst:"First transcribe Spanish audio",needSpanishFirst:"First upload Spanish version",createEnglishVersion:"Create English version",fromSpanishTranscript:"from Spanish transcript",translateTranscriptFromRussian:"Translate transcript from Russian",srtDownloaded:"Subtitles downloaded",textTranslated:"Text translated",errorUploadingToHostinger:"   Hostinger: {errorMessage}",errorDeletingHostingerFile:"   {fileName}  Hostinger: {errorMessage}",hostingerConnectionFailed:"    SFTP  Hostinger",hostingerUploadTimeout:"   Hostinger - ,  ",migrationStarted:"Storage migration started",migrationComplete:"Storage migration completed",migrationError:"Migration error",filesSelectedForMigration:"Files selected for migration",storageProvider:"Storage provider",interfaceLanguage:"Interface Language",languageChangeHint:"Language change will take effect immediately",uploadAudioAndManageVersions:"Subir audio y gestionar versiones de idiomas",supportedAudioFormatsDescription:"Archivos de audio admitidos: MP3, WAV, M4A, AAC, OGG, FLAC",waitForCompletion:"Espere a que se complete el proceso actual",errorLoadingEpisodes:"Error al cargar episodios",loginToViewEditHistory:"Login to view and manage your edit history",loginAsEditor:"Login as Editor",noEditsYet:"No edits yet",activeEdits:"Active Edits",undo:"Undo",confirmRollback:"Are you sure you want to rollback this edit?\n\nThis will restore the previous content.",editRolledBack:"Edit rolled back",contentRestored:"Your previous content has been restored",rollbackRecordedDesc:"The rollback was recorded but content restoration requires manual intervention",authenticate:"Authenticate",editorAuthentication:"Editor Authentication",editorAuthDescription:"Enter your email and name to authenticate as an editor. Only Latin characters are allowed.",email:"Email",emailPlaceholder:"your.email@example.com",emailLatinOnly:"Email must contain only Latin characters",name:"Name",namePlaceholder:"John Doe",nameLatinOnly:"Name must contain only Latin characters, spaces, and hyphens",loginFailed:"Login failed",authenticating:"Authenticating...",translateQuestionsToAllLanguages:"Translate questions to all languages",questionsTranslatedFromRussian:"Questions translated from Russian",noRussianQuestionsToTranslate:"No Russian questions to translate",translateQuestionsButton:"Translate questions",analyticsTitle:"Analytics",analyticsSubtitle:"Visit and listening statistics",analyticsOverview:"Overview",analyticsAudience:"Audience",analyticsContent:"Content",analyticsBehavior:"Behavior",analyticsTotalUsers:"Total Users",analyticsTotalSessions:"Total Sessions",analyticsTotalPageViews:"Page Views",analyticsAvgSessionDuration:"Avg Session Duration",analyticsVsPreviousPeriod:"vs previous period",analyticsVisitorsOverTime:"Visitors Over Time",analyticsUsers:"Users",analyticsSessions:"Sessions",analyticsPopularEpisodes:"Popular Meditations",analyticsViews:"Views",analyticsAvgDuration:"Avg Duration",analyticsGeography:"Geography",analyticsDevices:"Devices",analyticsDeviceTypes:"Device Types",analyticsBrowsers:"Browsers",analyticsTrafficSources:"Traffic Sources",analyticsListeningStats:"Listening Statistics",analyticsAvgListeningTime:"Avg Listening Time",analyticsCompletionRate:"Completion Rate",analyticsTotalPlays:"Total Plays",analyticsTotalCompletions:"Total Completions",analyticsMostActiveHours:"Most Active Hours",analyticsBehaviorMetrics:"Behavior Metrics",analyticsBounceRate:"Bounce Rate",analyticsBounceRateDesc:"Percentage of single-page visits",analyticsAvgSessionDurationDesc:"Average time on site",analyticsPagesPerSession:"Pages Per Session",analyticsPagesPerSessionDesc:"Average number of pages viewed",analyticsUserInteractions:"User Interactions",analyticsSearches:"Searches",analyticsFilters:"Filters",analyticsShares:"Shares",analyticsDownloads:"Downloads",analyticsEngagementScore:"Engagement Score",analyticsEngagementScoreDesc:"Overall user activity indicator",analyticsNoData:"No data available",analyticsError:"Analytics Loading Error",analyticsErrorDesc:"Failed to load analytics data. Please try refreshing the page.",analyticsLast24Hours:"Last 24 Hours",analyticsLast7Days:"Last 7 Days",analyticsLast30Days:"Last 30 Days",analyticsExport:"Export",analyticsExportReport:"Export Report",analyticsExportReportDesc:"Export feature coming soon",analyticsFooterNote:"Data updates every 5 minutes. Use the refresh button for the latest information.",translateQuestionsFrom:"Translate questions from {language}",skipBackward10Tooltip:"Skip backward 10 seconds",pauseTooltip:"Pause",playTooltip:"Play",skipForward10Tooltip:"Skip forward 10 seconds",exitReadingMode:"Exit Reading Mode",exitReadingModeTooltip:"Return to normal player view",loadingAudio:"Loading audio...",success:"Success",downloadError:"Download Error",tapToUnmuteAndPlay:"Tap to unmute and play",noAudioSource:"No audio source available",episodePublishedTitle:"Episode Published",episodePublishErrorTitle:"Publish Error",episodeFromCache:"Loaded from cache",episodeLoadedOffline:"Episode loaded offline",invalidEpisodeData:"Invalid episode data",errorLoadingEpisode:"Error loading episode",transcriptSaved:"Transcript saved",transcriptSavedSuccessfully:"Transcript saved successfully",saveError:"Save Error",questionsSaved:"Questions saved",questionsSavedSuccessfully:"Questions saved successfully",refreshError:"Refresh Error",failedToRefreshData:"Failed to refresh data",errorMergingSegment:"Error merging segment",cannotMergeFirstSegment:"Cannot merge the first segment",errorAddingSegment:"Error adding segment",invalidTimeRange:"Invalid time range",segmentOverlaps:"Segment overlaps with existing segments",segmentAddedTitle:"Segment Added",segmentAddedDesc:"New segment has been added successfully",finalizingTranscriptData:"Finalizing transcript data...",errorFetchingTranscript:"Error fetching transcript",errorUpdatingSegment:"Error updating segment",errorSimplifyingTextOpenAI:"Error simplifying text",settingsSaved:"Settings saved",offlineSettingsSaved:"Offline settings saved successfully",syncComplete:"Sync complete",manualSyncComplete:"Manual sync completed successfully",cacheCleared:"Cache cleared",offlineCacheCleared:"Offline cache cleared successfully",clearCacheError:"Clear Cache Error",back:"Back",offlineSettingsDescription:"Configure offline functionality and data synchronization",syncStatus:"Sync Status",storageUsageDescription:"Monitor and manage your offline storage usage",dataCache:"Data Cache",transcripts:"Transcripts",loadingStats:"Loading stats...",cacheSettingsDescription:"Configure cache sizes and behavior",autoSyncDescription:"Automatically sync data when online",maxAudioCache:"Max Audio Cache",maxAudioCacheDescription:"Maximum audio files to cache offline (MB)",maxDataCache:"Max Data Cache",maxDataCacheDescription:"Maximum data to cache offline (MB)",syncInterval:"Sync Interval",syncIntervalDescription:"How often to sync data when online (minutes)",autoCleanup:"Auto Cleanup",autoCleanupDescription:"Automatically clean up old cached data",saveSettings:"Save Settings",syncQueueDescription:"Manage pending synchronization tasks",syncQueueEmpty:"Sync queue is empty",manualSync:"Manual Sync",refreshStats:"Refresh Stats",transcribing:"Transcribing...",audioTrackMixed:"Together",audioTrackRussian:"Maria",audioTrackSpanish:"Pepe",recognizeText:"Recognize text",recognizeQuestions:"Recognize questions",recognizingText:"Recognizing text...",recognizingQuestions:"Recognizing questions...",smartSegmentation:"Smart Segmentation",segmenting:"Segmenting...",autoRecognizeQuestions:"Automatic AI question recognition",autoRecognizeQuestionsDesc:"Automatically generate questions when loading an episode",blog_title:"Blog",blog_subtitle:"Explore the depths of the inner world through universal messages.",search_articles_placeholder:"Search articles...",all_categories:"All",read_article:"Read",back_to_articles:"Back to articles",watch_on_youtube:"Watch on YouTube",video_version:"Video version",reading_time_minutes_one:"{count} minute read",reading_time_minutes_many:"{count} minutes read",published_on:"Published"},ty={appName:"Dos Mundos Radio",loading:"Ldt...",loadingPodcast:"Podcast wird geladen...",loadingEpisodes:"Meditationen werden geladen...",loadingEpisode:"Meditation wird geladen...",errorLoadingData:"Fehler beim Laden der Daten",tryAgain:"Erneut versuchen",failedToLoadPodcastData:"Fehler beim Laden der Podcast-Daten: {errorMessage}. Bitte versuchen Sie es spter.",episodeNotFound:"Meditation nicht gefunden",noEpisodesFoundForLanguage:'Keine Meditationen fr die Sprache "{language}" gefunden.',tryUploadingAudio:"Versuchen Sie, eine Audiodatei hochzuladen, um zu beginnen.",reloadEpisodes:"Daten neu laden",episodes:"Radio Dos Mundos",searchEpisodesAndQuestions:"Meditationen, Fragen und Text durchsuchen...",searchInTranscript:"Im Transkript suchen...",searchResultsEmpty:"Keine Ergebnisse fr Ihre Suche gefunden.",noEpisodesForLanguageShort:"Keine Meditationen gefunden",selectEpisode:"Meditation auswhlen: {episodeTitle}",openEpisode:"ffnen",episodeTitleMissing:"Meditationstitel fehlt",descriptionMissing:"Beschreibung fehlt.",questions:"Fragen",questionsCountFormat:"({count})",noQuestionsForLanguage:"Fr die aktuelle Sprache wurden noch keine Fragen hinzugefgt.",loadingTranscriptAndQuestions:"Transkript und Fragen werden geladen...",noQuestionsOrTranscriptTitle:"Noch keine Fragen oder Transkript",noQuestionsOrTranscriptDesc:"Wenn das Transkript fertig ist, wird es hier angezeigt. Sie knnen jetzt Fragen hinzufgen.",loadingTranscript:"Transkript wird geladen...",addQuestion:"Hinzufgen",editQuestion:"Frage bearbeiten",deleteQuestion:"Frage lschen",saveQuestion:"Speichern",cancel:"Abbrechen",questionTime:"Zeit",questionTitle:"Fragetitel",questionTitlePlaceholder:"z.B.: ber die Vorteile der Meditation",questionLanguage:"Fragesprache",addQuestionDialogTitle:"Frage hinzufgen",addQuestionDialogDescription:"Markieren Sie die Zeit und geben Sie die Fragedetails ein.",addQuestionDialogDescriptionSegment:'Frage fr das Segment hinzufgen: "{segmentText}"',editQuestionDialogTitle:"Frage bearbeiten",editQuestionDialogDescription:"ndern Sie die Fragedetails.",confirmDeleteQuestionTitle:"Lschung besttigen",confirmDeleteQuestionDescription:"Sind Sie sicher, dass Sie diese Frage lschen mchten? Diese Aktion ist unwiderruflich.",audioErrorTitle:"Audiofehler",audioErrorDescriptionPlayer:'Fehler beim Laden des Audios fr "{episodeTitle}".',playbackErrorTitle:"Wiedergabefehler",playbackErrorDescription:"Audio konnte nicht abgespielt werden.",navigationNoQuestions:"Es gibt keine Fragen in dieser Meditation zum Navigieren.",navigationToastTitle:"Navigation",previousQuestion:"Vorherige Frage",nextQuestion:"Nchste Frage",changePlaybackSpeed:"Wiedergabegeschwindigkeit ndern, aktuell: {speed}",selectLanguageModalTitle:"Sprache auswhlen",selectLanguageModalDescription:"Bitte whlen Sie Ihre bevorzugte Sprache fr die Anwendung aus. Sie knnen diese spter ndern.",russian:"",spanish:"Espaol",english:"English",german:"Deutsch",french:"Franais",polish:"Polski",allLanguages:"Alle Sprachen",language:"Sprache",filename:"Dateiname",duration:"Dauer",foundQuestionsInEpisode:"In Fragen gefunden",foundInTranscript:"Im Transkript gefunden",questionCount_one:"{count} Frage",questionCount_few:"{count} Fragen",questionCount_many:"{count} Fragen",errorAddingQuestion:"Fehler beim Hinzufgen der Frage: {errorMessage}",errorUpdatingQuestion:"Fehler beim Aktualisieren der Frage: {errorMessage}",errorDeletingQuestion:"Fehler beim Lschen der Frage: {errorMessage}",errorGeneric:"Fehler",batchAddQuestions:"Import from Text",batchAddQuestionsShort:"Import",batchAddQuestionsDialogTitle:"Import Questions from Text",batchAddQuestionsDialogDescription:"Paste a list of questions in the text field below. Each question should start with a time mark (e.g., HH:MM:SS or MM:SS), followed by the question text. If the question is in two languages, separate them with ' / ' character.",pasteQuestionsList:"Paste questions list:",processAndAdd:"Process and Add",bilingualExamplePart1:"Example in two languages:",bilingualExamplePart2:"Como reconocer los Mensajes sagrados",singleLanguageExample:"Example in one language:",batchAddPlaceholder:"00:30 What is meditation?\n01:15 How to start meditating?\n02:00 Benefits of daily practice",errorBatchAddingQuestions:"Error adding questions: {errorMessage}",nowPlaying:"Now Playing",paused:"Paused",selectAnEpisode:"Select an Episode",backToEpisodes:"Back to Episodes",backToEpisodesShort:"Back",pageNotFoundTitle:"Page Not Found",pageNotFoundDescription:"The page you're looking for doesn't exist.",uploadAudioFiles:"Upload Audio Files",uploadAudio:"Upload Audio",uploadAudioDescription:"Upload your meditation audio files to get started with transcription and question management.",dropFilesHere:"Drop files here",dragOrClickUpload:"Drag and drop or click to upload",supportedFormats:"Supported formats: MP3, WAV, M4A, FLAC",uploading:"Uploading...",uploadError:"Upload Error",errorUploadingFile:"Error uploading file: {errorMessage}",allFilesUploadedSuccessfully:"All files uploaded successfully",spotifyUploadTitle:"Spotify Upload",spotifyUploadDesc:"Upload your episodes to Spotify for podcast distribution.",connectSpotify:"Connect Spotify",whatYouGet:"What you get:",spotifyFeature1:"Automated episode upload",spotifyFeature2:"Metadata management",spotifyFeature3:"Publishing workflow",spotifyFeature4:"Error handling",spotifyAuthSuccess:"Spotify connected successfully",spotifyAuthSuccessDesc:"You can now upload episodes to Spotify",spotifyAuthError:"Spotify connection failed",spotifyAuthErrorDesc:"Please check your credentials and try again",welcomeBack:"Welcome back",disconnect:"Disconnect",uploadEpisode:"Upload Episode",uploadEpisodeDesc:"Upload your podcast episode to Spotify",audioFile:"Audio File",episodeTitle:"Episode Title",enterTitle:"Enter episode title",description:"Description",enterDescription:"Enter episode description",category:"Category",explicitContent:"Explicit Content",uploadingToSpotify:"Uploading to Spotify...",uploadComplete:"Upload Complete",spotifyUploadSuccess:"Episode uploaded to Spotify successfully",spotifyUploadSuccessDesc:"Your episode is now live on Spotify",spotifyUploadError:"Upload to Spotify failed",spotifyUploadErrorDesc:"Please check your connection and try again",configurationError:"Configuration Error",spotifyClientIdMissing:"Spotify Client ID is missing",spotifyConfiguration:"Spotify Configuration",spotifyConfigurationDesc:"Configure your Spotify API credentials for podcast uploads",spotifyClientId:"Client ID",spotifyClientSecret:"Client Secret",saveConfiguration:"Save Configuration",resetConfiguration:"Reset Configuration",copiedToClipboard:"Copied to clipboard",copiedToClipboardDesc:"The URL has been copied to your clipboard",spotifyConfigSaved:"Configuration saved",spotifyConfigSavedDesc:"Your Spotify settings have been saved",spotifyConfigError:"Configuration error",confirmResetConfig:"Reset configuration?",configReset:"Configuration reset",configResetDesc:"All Spotify settings have been cleared",howToGetCredentials:"How to get credentials",spotifyStep1:"Go to Spotify for Podcasters",spotifyStep2:"Create a new app",spotifyStep3:"Copy Client ID and Client Secret",spotifyStep4:"Paste them below",openSpotifyDeveloper:"Open Spotify Developer Dashboard",spotifyConfigurationRequired:"Configuration required",validationError:"Validation error",fillRequiredFields:"Please fill in all required fields",howItWorks:"How it works",step1:"Step 1",step2:"Step 2",step3:"Step 3",step4:"Step 4",openSpotifyPodcasters:"Open Spotify for Podcasters",close:"Close",startUpload:"Start Upload",uploadingInProgress:"Upload in progress...",uploadToR2Success:"Upload to R2 successful",metadataSavedSuccess:"Metadata saved successfully",transcriptionStarted:"Transcription started",errorUploadingToR2:"Error uploading to R2",errorListingR2Files:"Error listing R2 files",errorPresignedUrlR2:"Error getting presigned URL for R2",errorSubmittingAssemblyAI:"Error submitting to AssemblyAI",errorFetchingAssemblyAIResult:"Error fetching AssemblyAI result",errorFetchingEpisodes:"Error fetching episodes",errorFetchingQuestions:"Error fetching questions",transcriptEditorTitle:"Transcript Editor",refreshTranscript:"Refresh Transcript",collapse:"Collapse",expand:"Expand",transcriptionError:"Transcription Error",transcriptionErrorTitle:"Transcription Failed",transcriptionErrorAssembly:"AssemblyAI transcription failed",noTranscriptAvailableYet:"No transcript available yet",startTranscription:"Start Transcription",noTranscriptData:"No transcript data",transcriptionInProgressTitle:"Transcription in Progress",transcriptionInProgressDescription:"Please wait while we transcribe your audio...",transcriptionCompletedTitle:"Transcription Completed",transcriptionCompletedDescription:"Your transcript is ready",transcriptionCompletedDesc:"Transcription completed successfully",errorPollingTranscript:"Error polling transcript status",transcriptionSubmittedTitle:"Transcription Submitted",transcriptionSubmittedDescription:"Your audio has been submitted for transcription",missingEpisodeOrUrl:"Missing episode or URL",unknownError:"Unknown error",unknownAssemblyError:"Unknown AssemblyAI error",transcriptSegmentUpdatedTitle:"Segment Updated",transcriptSegmentUpdatedDesc:"Transcript segment has been updated",playSegment:"Play Segment",editSegment:"Edit Segment",save:"Save",addQuestionToSegment:"Add Question to Segment",questionAttached:"Question attached",speaker:"Speaker",collapseQuestions:"Collapse Questions",expandQuestions:"Expand Questions",transcriptText:"Transcript Text",showFullText:"Show Full Text",hideFullText:"Hide Full Text",hide:"Hide",speakerLabel:"Speaker {number}",editSpeaker:"Edit Speaker",noSpeakersDetected:"No speakers detected",confirmSpeakerChangeTitle:"Confirm Speaker Change",confirmSpeakerChangeDescription:"This will change the speaker for this segment",textSegment:"Text Segment",textActions:"Text Actions",meditationTitlePrefix:"Meditation",introduction:"Introduction",loadMoreSegments:"Load More Segments",showText:"Show Text",fullTranscript:"Full Transcript",errorStartingTranscription:"Error starting transcription",searchTranscriptPlaceholder:"Search in transcript...",noResultsInTranscript:"No results found in transcript",jumpToQuestion:"Jump to Question",mergeWithPreviousSegment:"Merge with Previous",deleteSegment:"Delete Segment",splitSegment:"Split Segment",saveSegment:"Save Segment",addSegment:"Add Segment",addSegmentDescription:"Add a new text segment",segmentStartTime:"Start Time",segmentEndTime:"End Time",segmentText:"Segment Text",confirmMergeTitle:"Merge Segments",confirmMergeDescription:"Are you sure you want to merge these segments?",confirmDeleteSegmentTitle:"Delete Segment",confirmDeleteSegmentDescription:"Are you sure you want to delete this segment?",confirmSplitTitle:"Split Segment",confirmSplitDescription:"Split this segment at the cursor position?",doNotAskAgain:"Don't ask again",errorSplittingSegment:"Error splitting segment",cannotSplitEmpty:"Cannot split empty segment",cannotSplitAtPosition:"Cannot split at this position",cannotSplitIntoEmpty:"Cannot split into empty segments",pressEnterToSplit:"Press Enter to split",editSegmentPanelTitle:"Edit Segment",cursorPositionRequired:"Cursor position required",confirm:"Confirm",merge:"Merge",split:"Split",delete:"Delete",splitSegmentAtCursor:"Split at Cursor",editTextSegmentPlaceholder:"Edit text segment...",questionAttachedToSegment:"Question attached to segment",selectFiles:"Select Files",addAnotherFile:"Add Another File",startAllUploads:"Start All Uploads",processing:"Processing",timingsQuestions:"Timings & Questions",confirmOverwriteTitle:"Confirm Overwrite",confirmOverwriteMessage:"This file already exists. What would you like to overwrite?",overwrite:"Overwrite",selectWhatToOverwrite:"Select what to overwrite",overwriteServerFile:"Overwrite server file",overwriteEpisodeInfo:"Overwrite episode info",overwriteTranscript:"Overwrite transcript",overwriteQuestions:"Overwrite questions",transcriptionQueued:"Transcription queued",processingErrorsTitle:"Processing Errors",processingErrorsDesc:"Some files had errors during processing",uploadCancelledEpisodeExists:"Upload cancelled - episode already exists",transcriptionProcessing:"Transcription processing",transcriptionCompletedShort:"Completed",transcriptionFailedShort:"Failed",errorCheckingEpisodeDB:"Error checking episode database",fileAlreadyInR2Title:"File Already Exists",fileAlreadyInR2Desc:"This file already exists in R2 storage",usingExistingR2FileTitle:"Using Existing File",usingExistingR2FileDesc:"Using existing file from R2 storage",overwritingDbData:"Overwriting database data",overwritingEpisodeTitle:"Overwriting Episode",overwritingEpisodeDesc:"This will overwrite existing episode data",audioMetadataError:"Audio metadata error",supabaseEpisodeError:"Supabase episode error",startingTranscription:"Starting transcription",supabaseTranscriptError:"Supabase transcript error",allFilesProcessedTitle:"All Files Processed",allFilesProcessedDesc:"All files have been processed successfully",transcriptionErrorDesc:"Transcription failed: {errorMessage}",manageAndUploadTitle:"Manage & Upload",manageAndUploadDescription:"Manage your episodes and upload new content",manageEpisodes:"Manage Episodes",manageExistingEpisodes:"Manage Existing Episodes",manageEpisodesDescription:"View, edit, and manage your podcast episodes",manageEpisodesTitle:"Episode Management",assemblyAiApiKey:"AssemblyAI API Key",assemblyAiApiKeyDescription:"Your AssemblyAI API key for transcription services",assemblyAiApiKeyPlaceholder:"sk_...",apiKeyStoredLocally:"API key stored locally",apiKeySaved:"API Key Saved",apiKeySavedDescription:"Your API key has been saved successfully",apiKeySaveError:"Error saving API key",apiKeyCleared:"API Key Cleared",apiKeyClearedDescription:"Your API key has been removed",apiKeyClearError:"Error clearing API key",clear:"Clear",show:"Show",supportedAudioFormats:"Supported Audio Formats",filenameLanguageSuffixes:"Filename Language Suffixes",dragOrClickToUpload:"Drag and drop or click to upload",filesInQueue_one:"{count} file in queue",filesInQueue_few:"{count} files in queue",filesInQueue_many:"{count} files in queue",addFiles:"Add Files",episodeManagement:"Episode Management",refresh:"Refresh",selectAll:"Select All",episodes_one:"{count} episode",episodes_few:"{count} episodes",episodes_many:"{count} episodes",baseFile:"Base File",noFileUploaded:"No file uploaded",ready:"Ready",notStarted:"Not Started",dateNotSpecified:"Date not specified",audioFileNotAvailable:"Audio file not available",transcriptionAlreadyStarted:"Transcription already started",transcriptionInProgress:"Transcription in progress",transcriptionAlreadyCompleted:"Transcription already completed",transcriptionAlreadyReady:"Transcription already ready",audioUrlNotAvailable:"Audio URL not available",assemblyAiNoJobId:"No AssemblyAI job ID",transcriptionCompleted:"Transcription completed",transcriptionStartError:"Error starting transcription",questionsNotFound:"Questions not found",questionsNotFoundInDB:"Questions not found in database",questionsLoaded:"Questions loaded",questionsLoadedFromDB_one:"{count} question loaded from database",questionsLoadedFromDB_few:"{count} questions loaded from database",questionsLoadedFromDB_many:"{count} questions loaded from database",questionsLoadError:"Error loading questions",transcriptRequired:"Transcript Required",transcriptRequiredDescription:"A transcript is required before questions can be generated",transcriptDataNotFound:"Transcript data not found",questionsGenerationFailed:"Questions generation failed",questionsGenerated:"Questions generated",questionsGeneratedForEpisode_one:"{count} question generated for episode",questionsGeneratedForEpisode_few:"{count} questions generated for episode",questionsGeneratedForEpisode_many:"{count} questions generated for episode",questionsGenerationError:"Error generating questions",spanishEpisodeNotFound:"Spanish episode not found",spanishTranscriptNotReady:"Spanish transcript not ready",spanishTranscriptTextNotFound:"Spanish transcript text not found",transcriptTranslationFailed:"Transcript translation failed",transcriptTranslated:"Transcript translated",enTranscriptCreated:"English transcript created",transcriptTranslationError:"Transcript translation error",sourceEpisodeNotFound:"Source episode not found",questionsNotFoundForTranslation:"Questions not found for translation",translateQuestionPrompt:"Translate question to English",questionsTranslated:"Questions translated",questionsTranslatedCreated_one:"{count} question translated",questionsTranslatedCreated_few:"{count} questions translated",questionsTranslatedCreated_many:"{count} questions translated",questionsTranslationError:"Questions translation error",episodeDeleteError:"Episode deletion error",episodesDeleted:"Episodes deleted",episodesDeletedSuccessfully_one:"{count} episode deleted successfully",episodesDeletedSuccessfully_few:"{count} episodes deleted successfully",episodesDeletedSuccessfully_many:"{count} episodes deleted successfully",questionsDeleted:"Questions deleted",allQuestionsDeletedForEpisode:"All questions deleted for episode",questionsDeleteError:"Error deleting questions",deleteAllQuestionsTitle:"Delete All Questions",confirmDeleteAllQuestionsMessage:"Are you sure you want to delete all questions for this episode?",deleteAllQuestionsConfirm:"Delete All Questions",confirmDeleteEpisodesMessage:"Are you sure you want to delete selected episodes?",transcribe:"Transcribe",starting:"Starting",fromDB:"From DB",recognize:"Recognize",deleteAllQuestions:"Delete All Questions",translateTranscriptFromSpanish:"Translate Transcript from Spanish",translateQuestionsFromSpanish:"Translate Questions from Spanish",translateQuestionsFromRussian:"Fragen aus dem Russischen bersetzen",transcriptDeleted:"Transcript deleted",searchEpisodes:"Search Episodes",translateToEnglish:"Translate to English",translateTimingsSuccessTitle:"Translation Successful",translateTimingsSuccessDesc:"Timings translated successfully",translateTimingsErrorTitle:"Translation Error",translateTimingsErrorDesc:"Error translating timings",timingsTranslating:"Translating timings...",transcriptionPendingTranslation:"Transcription pending translation",transcriptionTranslating:"Transcription translating",settings:"Settings",showTranscript:"Show Transcript",downloadAudio:"Download Audio",downloadStartedTitle:"Download Started",downloadStartedDesc:"Your download has started",audioNotAvailableForDownload:"Audio not available for download",skipBackward10:"Skip backward 10 seconds",skipForward10:"Skip forward 10 seconds",play:"Play",pause:"Pause",editLogPageTitle:"Bearbeitungsverlauf",errorFetchingLogs:"Fehler beim Laden der Bearbeitungsprotokolle",noEditHistory:"Kein Bearbeitungsverlauf verfgbar",editHistory:"Bearbeitungsverlauf",editHistoryTitle:"Bearbeitungsverlauf",rolledBack:"Rckgngig gemacht",errorLoadingHistory:"Fehler beim Laden des Verlaufs",errorRollback:"Fehler beim Rckgngigmachen",rollbackSuccessful:"Rckgngigmachen erfolgreich",rollbackFailed:"Rckgngigmachen fehlgeschlagen",editType:"Bearbeitungstyp",targetType:"Zieltyp",rolledBackBy:"Rckgngig gemacht von",unknownUser:"Unbekannter Benutzer",showRolledBackEdits:"Rckgngig gemachte Bearbeitungen anzeigen",editHistoryAdmin:"Bearbeitungsverlauf-Verwaltung",editHistoryCount:"Bearbeitungsverlauf ({count} Bearbeitungen)",backButton:"Zurck",actionReverted:"Aktion rckgngig gemacht",revertButton:"Rckgngig machen",revertFailed:"Rckgngigmachen fehlgeschlagen",revertSuccessful:"Rckgngigmachen erfolgreich",revertDescription:"Diese nderung rckgngig machen?",beforeLabel:"Vorher",afterLabel:"Nachher",revertedAtLabel:"Rckgngig gemacht am {date}",editRevertedTitle:"Bearbeitung Rckgngig Gemacht",editRevertedDesc:"Die Bearbeitung wurde erfolgreich rckgngig gemacht",nothingToRevert:"Nichts zu rckgngig machen",untitledQuestion:"Untitled Question",navigateToDeepSearch:"Navigate to Deep Search",search:"Suchen",deepSearchTitle:"Deep Search",deepSearchPlaceholder:"Search across all meditations and questions...",searching:"Searching...",deepSearchMinChars:"Enter at least 3 characters",errorPerformingSearch:"Error performing search",noResultsFoundForQuery:'No results found for "{query}"',searchResultsCount_one:"{count} result found",searchResultsCount_few:"{count} results found",searchResultsCount_many:"{count} results found",foundInQuestionsTitle:"Found in Questions",foundInTextTitle:"Found in Text",foundSegmentsInEpisodeCount_one:"{count} segment found in episode",foundSegmentsInEpisodeCount_few:"{count} segments found in episode",foundSegmentsInEpisodeCount_many:"{count} segments found in episode",foundQuestionsInEpisodeCount_one:"{count} question found in episode",foundQuestionsInEpisodeCount_few:"{count} questions found in episode",foundQuestionsInEpisodeCount_many:"{count} questions found in episode",noQuestionsAddedYet:"No questions added yet",filterByYear:"Nach Jahr filtern",filterByMonth:"Nach Monat filtern",allYears:"Alle Jahre",allMonths:"Alle Monate",resetFilters:"Filter zurcksetzen",january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December",tryUploadingAudioOrFilter:"Try uploading audio files or adjust your filters",contextQuestion:"Context Question",question:"Question",playbackSpeed:"Playback Speed",noEpisodesFound:"No episodes found",deselectAll:"Deselect All",deleteSelected:"Delete Selected",errorTranslatingTranscriptOpenAI:"Error translating transcript with OpenAI",errorTranslatingTranscriptOpenAIDesc:"Failed to translate transcript",errorTranslatingTextOpenAI:"Error translating text with OpenAI",offlineMode:"Offline Mode",online:"Online",syncing:"Syncing...",syncError:"Sync Error",pendingChanges:"Pending Changes",justSynced:"Just synced",minutesAgo:"minutes ago",hoursAgo:"hours ago",clickToSync:"Click to sync",loadedFromCache:"Loaded from cache",dataLoadedOffline:"Data loaded offline",transcriptFromCache:"Transcript from cache",transcriptLoadedOffline:"Transcript loaded offline",questionsFromCache:"Questions from cache",questionsLoadedOffline:"Questions loaded offline",offlineDataUnavailable:"Offline data unavailable",episodeNotCached:"Episode not cached",transcriptUnavailableOffline:"Transcript unavailable offline",transcriptNotCached:"Transcript not cached",questionsUnavailableOffline:"Questions unavailable offline",questionsNotCached:"Questions not cached",savedOffline:"Saved offline",segmentSavedOffline:"Segment saved offline",transcriptSavedOffline:"Transcript saved offline",questionsSavedOffline:"Questions saved offline",offlineSaveError:"Offline save error",confirmSplitOffline:"Confirm split (offline)",confirmMergeOffline:"Confirm merge (offline)",confirmDeleteOffline:"Confirm delete (offline)",segmentSplitOffline:"Segment split offline",segmentMergedOffline:"Segment merged offline",segmentDeletedOffline:"Segment deleted offline",audioCache:"Audio Cache",cacheUsage:"Cache Usage",files:"files",used:"used",currentEpisode:"Current Episode",downloading:"Downloading",cached:"Cached",cache:"Cache",removeFromCache:"Remove from Cache",cacheForOffline:"Fr Offline zwischenspeichern",cacheManagement:"Cache Management",manageStoredAudio:"Manage Stored Audio",clearAll:"Clear All",cachedFiles:"Cached Files",cacheSettings:"Cache Settings",confirmClearCache:"Confirm Clear Cache",clearCache:"Clear Cache",removing:"Removing",maxCacheSize:"Max Cache Size",downloadText:"Download Text",downloadTextSettings:"Download Text Settings",downloadSubtitles:"Download Subtitles",processWithAI:"Process with AI",contentType:"Content Type",allText:"All Text",selectedQuestions:"Selected Questions",selectQuestions:"Select Questions",includeTimings:"Include Timings",format:"Format",download:"Download",textDownloadStarted:"Text download started",includeSpeakers:"Include Speakers",offlineModeTitle:"Offline Mode",syncCompleted:"Sync Completed",itemsSynced:"Items synced",connectionRestored:"Connection restored",syncingChanges:"Syncing changes",connectionLost:"Connection lost",workingOffline:"Working offline",offlineSettings:"Offline Settings",networkStatus:"Network Status",connection:"Connection",offline:"Offline",pendingSync:"Pending Sync",items:"items",syncNow:"Sync Now",storageUsage:"Storage Usage",totalUsage:"Total Usage",clearAllData:"Clear All Data",syncQueue:"Sync Queue",attempts:"attempts",offlineFeatures:"Offline Features",audioPlayback:"Audio Playback",textEditing:"Text Editing",autoSync:"Auto Sync",localStorage:"Local Storage",headerDefaultTitle:"Dos Mundos Podcast",languageRussian:"Russisch",languageSpanish:"Spanisch",languageEnglish:"Englisch",languageGerman:"Deutsch",languageFrench:"Franzsisch",languagePolish:"Polnisch",languageSettings:"Spracheinstellungen",languageChangeNotice:"Whlen Sie Ihre bevorzugte Schnittstellensprache",playerRewindBack10:"Rewind 10 seconds",playerPlay:"Play",playerPause:"Pause",playerForward10:"Forward 10 seconds",playerProgressBar:"Progress bar",playerJumpToQuestion:"Jump to question",error:"Error",sectionTitleEmpty:"Section title cannot be empty",sectionTimeInvalid:"Invalid section time",sectionSaved:"Section saved",sectionSavedDescription:"Section has been saved successfully",sectionDeleted:"Section deleted",sectionDeletedDescription:"Section has been deleted successfully",currentSection:"Current Section",addNewSection:"Add New Section",add:"Add",editCurrentSection:"Edit Current Section",noActiveSection:"No active section",allSections:"All Sections",editSection:"Edit Section",noSectionsYet:"No sections yet",addSection:"Add Section",time:"Time",title:"Title",renameSpeakerGlobally:"Rename Speaker Globally",reassignToExistingSpeaker:"Reassign to Existing Speaker",createNewSpeaker:"Create New Speaker",selectExistingSpeaker:"Select Existing Speaker",selectSpeakerPlaceholder:"Select speaker...",unknownSpeaker:"Unknown Speaker",newSpeakerName:"New Speaker Name",speakerName:"Speaker Name",enterSpeakerNamePlaceholder:"Enter speaker name",renameSpeaker:"Rename Speaker",reassignSpeaker:"Reassign Speaker",createSpeaker:"Create Speaker",assignSpeaker:"Assign Speaker",assignSpeakerTitle:"Assign Speaker",assignSpeakerDescription:"Assign this segment to a speaker",assignSpeakerTooltip:"Assign speaker",currentSpeaker:"Current Speaker",translateTranscriptTitle:"Translate Transcript",translateTranscriptDesc:"Translate the transcript to another language",translateTranscriptSuccessTitle:"Translation Successful",translateTranscriptSuccessDesc:"Transcript translated successfully",translateTranscriptErrorTitle:"Translation Error",translateTranscriptErrorDesc:"Error translating transcript",translateTranscriptProgress:"Translating transcript...",translateTranscriptButton:"Translate Transcript",spanishTranscriptRequired:"Spanish transcript required",spanishVersionRequired:"Spanish version required",deleteAndRetranscribe:"Delete and Retranscribe",retranslate:"Retranslate",retranslateTranscript:"Retranslate Transcript",openInNewWindow:"Open in New Window",manage:"Manage",autoGenerateQuestions:"Auto-generate Questions",loadQuestionsFromDB:"Load Questions from DB",fileNotFound:"File Not Found",fileNotFoundInFolder:"File not found in folder",fileFoundAndAdded:"File found and added",fileWillBeUploaded:"File will be uploaded",fileUploadError:"File upload error",noFilesForEpisode:"No files for episode",spanishTranscriptInProgress:"Spanish transcript in progress",transcribeSpanishFirst:"Transcribe Spanish first",needSpanishFirst:"Need Spanish transcript first",translateTimingsToEnglish:"Translate Timings to English",createEnglishVersion:"Create English Version",fromSpanishTranscript:"From Spanish transcript",translateTranscriptFromRussian:"Translate Transcript from Russian",srtDownloaded:"SRT downloaded",textTranslated:"Text translated",errorUploadingToHostinger:"Error uploading to Hostinger",errorDeletingHostingerFile:"Error deleting Hostinger file",hostingerConnectionFailed:"Hostinger connection failed",hostingerUploadTimeout:"Hostinger upload timeout",migrationStarted:"Migration started",migrationComplete:"Migration complete",migrationError:"Migration error",filesSelectedForMigration:"Files selected for migration",storageProvider:"Storage Provider",interfaceLanguage:"Interface Language",languageChangeHint:"Language change will take effect immediately",uploadAudioAndManageVersions:"Audio hochladen und Sprachversionen verwalten",supportedAudioFormatsDescription:"Untersttzte Audio-Dateien: MP3, WAV, M4A, AAC, OGG, FLAC",waitForCompletion:"Bitte warten Sie, bis der aktuelle Prozess abgeschlossen ist",errorLoadingEpisodes:"Fehler beim Laden der Episoden",errorDeletingQuestions:"Error deleting old questions: {errorMessage}",errorDeletingTranscripts:"Error deleting old transcripts: {errorMessage}",errorDeletingEpisodeDB:"Error deleting episode from database: {errorMessage}",episodeDeletedTitle:"Episode Deleted",episodeDeletedSuccess:"Episode '{episodeTitle}' was successfully deleted.",confirmDeleteTitle:"Confirm Deletion",confirmDeleteEpisodeMessage:"Are you sure you want to delete the episode '{episodeTitle}'? This will remove its audio, transcriptions, and questions for all languages.",actionIrreversible:"This action is irreversible.",deleting:"Deleting...",deleteConfirm:"Yes, Delete",fileDeletedFromR2Title:"File Deleted from Storage",fileDeletedFromR2Desc:"File {fileName} was successfully deleted from cloud storage.",errorDeletingR2FilePartial:"Could not delete file {fileName} from R2 storage: {errorMessage}. Database entries were still removed.",searchSpeakerPlaceholder:"Search speaker...",noSpeakerFound:"No speaker found.",or:"OR",enterNewSpeakerName:"Enter New Speaker Name",assignNewSpeakerName:"Assign as New Speaker",newSpeakerNamePlaceholder:"E.g., Maria, John Doe",assignAsNewSpeaker:"Assign as new speaker",saveSpeakerAssignment:"Save Assignment",speakerAssignedTitle:"Speaker Assigned",speakerAssignedDesc:"Speaker {newSpeaker} has been assigned.",errorSavingSpeakerAssignment:"Error saving speaker assignment.",editHistoryAdminTitle:"Edit History Admin",authenticateToAccessEditHistory:"Please authenticate to access the edit history admin panel",loggedInAs:"Logged in as",logout:"Logout",totalEdits:"Total Edits",active:"Active",last24h:"Last 24h",filters:"Filters",editor:"Editor",showRolledBack:"Show rolled back edits",edits:"edits",noEditsFound:"No edits found",before:"Before",after:"After",revertedAt:"Reverted at",reason:"Reason",metadata:"Metadata",rollback:"Rollback",editRolledBackSuccessfully:"Edit rolled back successfully",previousContentRestored:"The previous content has been restored",rollbackRecorded:"Rollback recorded but not applied",allEditors:"All Editors",allTypes:"All Types",allTargets:"All Targets",searchContent:"Search content...",noAssemblyIdInDB:"El ID de transcripcin de AssemblyAI no se encontr en la base de datos para este episodio e idioma.",transcriptionExistsTitle:"La transcripcin existe",transcriptionExistsDesc:"La transcripcin para el episodio {episode} ya existe y est completa.",warning:"Advertencia",loginToViewEditHistory:"Melden Sie sich an, um Ihren Bearbeitungsverlauf anzuzeigen und zu verwalten",loginAsEditor:"Als Editor anmelden",noEditsYet:"Noch keine Bearbeitungen",activeEdits:"Aktive Bearbeitungen",undo:"Rckgngig",confirmRollback:"Sind Sie sicher, dass Sie diese Bearbeitung rckgngig machen mchten?\n\nDies wird den vorherigen Inhalt wiederherstellen.",editRolledBack:"Bearbeitung rckgngig gemacht",contentRestored:"Ihr vorheriger Inhalt wurde wiederhergestellt",rollbackRecordedDesc:"Das Rckgngigmachen wurde aufgezeichnet, aber die Inhaltswiederherstellung erfordert manuelles Eingreifen",authenticate:"Authentifizieren",editorAuthentication:"Editor-Authentifizierung",editorAuthDescription:"Geben Sie Ihre E-Mail und Ihren Namen ein, um sich als Editor zu authentifizieren. Nur lateinische Zeichen sind erlaubt.",email:"E-Mail",emailPlaceholder:"ihre.email@beispiel.de",emailLatinOnly:"E-Mail muss nur lateinische Zeichen enthalten",name:"Name",namePlaceholder:"Hans Mller",nameLatinOnly:"Name muss nur lateinische Zeichen, Leerzeichen und Bindestriche enthalten",loginFailed:"Anmeldung fehlgeschlagen",authenticating:"Authentifizierung luft...",translateQuestionsToAllLanguages:"Fragen in alle Sprachen bersetzen",questionsTranslatedFromRussian:"Fragen aus dem Russischen bersetzt",noRussianQuestionsToTranslate:"Keine russischen Fragen zum bersetzen",translateQuestionsButton:"Fragen bersetzen",translateQuestionsFrom:"Translate questions from {language}",skipBackward10Tooltip:"Skip backward 10 seconds",pauseTooltip:"Pause",playTooltip:"Play",skipForward10Tooltip:"Skip forward 10 seconds",exitReadingMode:"Exit Reading Mode",exitReadingModeTooltip:"Return to normal player view",loadingAudio:"Loading audio...",success:"Success",downloadError:"Download Error",tapToUnmuteAndPlay:"Tap to unmute and play",noAudioSource:"No audio source available",episodePublishedTitle:"Episode Published",episodePublishErrorTitle:"Publish Error",episodeFromCache:"Loaded from cache",episodeLoadedOffline:"Episode loaded offline",invalidEpisodeData:"Invalid episode data",errorLoadingEpisode:"Error loading episode",transcriptSaved:"Transcript saved",transcriptSavedSuccessfully:"Transcript saved successfully",saveError:"Save Error",questionsSaved:"Questions saved",questionsSavedSuccessfully:"Questions saved successfully",refreshError:"Refresh Error",failedToRefreshData:"Failed to refresh data",errorMergingSegment:"Error merging segment",cannotMergeFirstSegment:"Cannot merge the first segment",errorAddingSegment:"Error adding segment",invalidTimeRange:"Invalid time range",segmentOverlaps:"Segment overlaps with existing segments",segmentAddedTitle:"Segment Added",segmentAddedDesc:"New segment has been added successfully",finalizingTranscriptData:"Finalizing transcript data...",errorFetchingTranscript:"Error fetching transcript",errorUpdatingSegment:"Error updating segment",errorSimplifyingTextOpenAI:"Error simplifying text",settingsSaved:"Settings saved",offlineSettingsSaved:"Offline settings saved successfully",syncComplete:"Sync complete",manualSyncComplete:"Manual sync completed successfully",cacheCleared:"Cache cleared",offlineCacheCleared:"Offline cache cleared successfully",clearCacheError:"Clear Cache Error",back:"Back",offlineSettingsDescription:"Configure offline functionality and data synchronization",syncStatus:"Sync Status",storageUsageDescription:"Monitor and manage your offline storage usage",dataCache:"Data Cache",transcripts:"Transcripts",loadingStats:"Loading stats...",cacheSettingsDescription:"Configure cache sizes and behavior",autoSyncDescription:"Automatically sync data when online",maxAudioCache:"Max Audio Cache",maxAudioCacheDescription:"Maximum audio files to cache offline (MB)",maxDataCache:"Max Data Cache",maxDataCacheDescription:"Maximum data to cache offline (MB)",syncInterval:"Sync Interval",syncIntervalDescription:"How often to sync data when online (minutes)",autoCleanup:"Auto Cleanup",autoCleanupDescription:"Automatically clean up old cached data",saveSettings:"Save Settings",syncQueueDescription:"Manage pending synchronization tasks",syncQueueEmpty:"Sync queue is empty",manualSync:"Manual Sync",refreshStats:"Refresh Stats",analyticsTotalUsers:"Total Users",analyticsTotalSessions:"Total Sessions",analyticsTotalPageViews:"Page Views",analyticsAvgSessionDuration:"Avg Session Duration",analyticsVsPreviousPeriod:"vs previous period",analyticsBehaviorMetrics:"Behavior Metrics",analyticsNoData:"No data available",analyticsBounceRate:"Bounce Rate",analyticsBounceRateDesc:"Percentage of single-page visits",analyticsAvgSessionDurationDesc:"Average time on site",analyticsPagesPerSession:"Pages Per Session",analyticsPagesPerSessionDesc:"Average number of pages viewed",analyticsSearches:"Searches",analyticsFilters:"Filters",analyticsShares:"Shares",analyticsDownloads:"Downloads",analyticsUserInteractions:"User Interactions",analyticsEngagementScore:"Engagement Score",analyticsEngagementScoreDesc:"Overall user activity indicator",analyticsDevices:"Devices",analyticsDeviceTypes:"Device Types",analyticsBrowsers:"Browsers",analyticsGeography:"Geography",analyticsUsers:"Users",analyticsSessions:"Sessions",analyticsListeningStats:"Listening Statistics",analyticsAvgListeningTime:"Avg Listening Time",analyticsCompletionRate:"Completion Rate",analyticsTotalPlays:"Total Plays",analyticsTotalCompletions:"Total Completions",analyticsMostActiveHours:"Most Active Hours",analyticsPopularEpisodes:"Popular Meditations",analyticsViews:"Views",analyticsAvgDuration:"Avg Duration",analyticsTrafficSources:"Traffic Sources",analyticsVisitorsOverTime:"Visitors Over Time",analyticsTitle:"Analytics",analyticsError:"Analytics Loading Error",analyticsErrorDesc:"Failed to load analytics data. Please try refreshing the page.",analyticsExportReport:"Export Report",analyticsExportReportDesc:"Export feature coming soon",analyticsSubtitle:"Visit and listening statistics",analyticsLast24Hours:"Last 24 Hours",analyticsLast7Days:"Last 7 Days",analyticsLast30Days:"Last 30 Days",analyticsExport:"Export",analyticsOverview:"Overview",analyticsAudience:"Audience",analyticsContent:"Content",analyticsBehavior:"Behavior",analyticsFooterNote:"Data updates every 5 minutes. Use the refresh button for the latest information.",audioTrackMixed:"Zusammen",audioTrackRussian:"Maria",audioTrackSpanish:"Pepe",recognizeText:"Text erkennen",recognizeQuestions:"Fragen erkennen",recognizingText:"Text wird erkannt...",recognizingQuestions:"Fragen werden erkannt...",transcribing:"Transkribiere...",autoRecognizeQuestions:"Automatische KI-Fragen-Erkennung",autoRecognizeQuestionsDesc:"Fragen automatisch beim Laden einer Episode generieren",blog_title:"Blog",blog_subtitle:"Erforschen Sie die Tiefen der inneren Welt durch universelle Botschaften.",search_articles_placeholder:"Artikel suchen...",all_categories:"Alle",read_article:"Lesen",back_to_articles:"Zurck zu Artikeln",watch_on_youtube:"Auf YouTube ansehen",video_version:"Videoversion",reading_time_minutes_one:"{count} Minute Lesezeit",reading_time_minutes_many:"{count} Minuten Lesezeit",published_on:"Verffentlicht"},ry={appName:"Dos Mundos Radio",loading:"Chargement...",loadingPodcast:"Chargement du podcast...",loadingEpisodes:"Chargement des mditations...",loadingEpisode:"Chargement de la mditation...",errorLoadingData:"Erreur lors du chargement des donnes",tryAgain:"Ressayer",failedToLoadPodcastData:"Erreur lors du chargement des donnes du podcast: {errorMessage}. Veuillez ressayer plus tard.",episodeNotFound:"Mditation non trouve",noEpisodesFoundForLanguage:'Aucune mditation trouve pour la langue "{language}".',tryUploadingAudio:"Essayez de tlcharger un fichier audio pour commencer.",reloadEpisodes:"Recharger les donnes",episodes:"Radio Dos Mundos",searchEpisodesAndQuestions:"Rechercher des mditations, des questions et du texte...",searchInTranscript:"Rechercher dans la transcription...",searchResultsEmpty:"Aucun rsultat trouv pour votre recherche.",noEpisodesForLanguageShort:"Aucune mditation trouve",selectEpisode:"Slectionner mditation: {episodeTitle}",openEpisode:"Ouvrir",episodeTitleMissing:"Titre de mditation manquant",descriptionMissing:"Description manquante.",questions:"Questions",questionsCountFormat:"({count})",noQuestionsForLanguage:"Les questions n'ont pas encore t ajoutes pour la langue actuelle.",loadingTranscriptAndQuestions:"Chargement de la transcription et des questions...",noQuestionsOrTranscriptTitle:"Pas encore de questions ou de transcription",noQuestionsOrTranscriptDesc:"Lorsque la transcription sera prte, elle apparatra ici. Vous pouvez ajouter des questions maintenant.",loadingTranscript:"Chargement de la transcription...",addQuestion:"Ajouter",editQuestion:"Modifier la question",deleteQuestion:"Supprimer la question",saveQuestion:"Enregistrer",cancel:"Annuler",questionTime:"Heure",questionTitle:"Titre de la question",questionTitlePlaceholder:"Par exemple: Sur les avantages de la mditation",questionLanguage:"Langue de la question",addQuestionDialogTitle:"Ajouter une question",addQuestionDialogDescription:"Marquez l'heure et entrez les dtails de la question.",addQuestionDialogDescriptionSegment:'Ajouter une question pour le segment: "{segmentText}"',editQuestionDialogTitle:"Modifier la question",editQuestionDialogDescription:"Modifiez les dtails de la question.",confirmDeleteQuestionTitle:"Confirmer la suppression",confirmDeleteQuestionDescription:"tes-vous sr de vouloir supprimer cette question? Cette action est irrversible.",audioErrorTitle:"Erreur audio",audioErrorDescriptionPlayer:'Erreur lors du chargement de l\'audio pour "{episodeTitle}".',playbackErrorTitle:"Erreur de lecture",playbackErrorDescription:"Impossible de lire l'audio.",navigationNoQuestions:"Il n'y a pas de questions dans cette mditation pour naviguer.",navigationToastTitle:"Navigation",previousQuestion:"Question prcdente",nextQuestion:"Question suivante",changePlaybackSpeed:"Modifier la vitesse de lecture, actuelle: {speed}",selectLanguageModalTitle:"Slectionner une langue",selectLanguageModalDescription:"Veuillez slectionner votre langue prfre pour l'application. Vous pourrez la modifier ultrieurement.",russian:"",spanish:"Espaol",english:"English",german:"Deutsch",french:"Franais",polish:"Polski",allLanguages:"Toutes les langues",language:"Langue",filename:"Nom du fichier",duration:"Dure",foundQuestionsInEpisode:"Trouv dans les questions",foundInTranscript:"Trouv dans la transcription",questionCount_one:"{count} question",questionCount_few:"{count} questions",questionCount_many:"{count} questions",errorAddingQuestion:"Erreur lors de l'ajout de la question: {errorMessage}",errorUpdatingQuestion:"Erreur lors de la mise  jour de la question: {errorMessage}",errorDeletingQuestion:"Erreur lors de la suppression de la question: {errorMessage}",errorGeneric:"Erreur",batchAddQuestions:"Import from Text",batchAddQuestionsShort:"Import",batchAddQuestionsDialogTitle:"Import Questions from Text",batchAddQuestionsDialogDescription:"Paste a list of questions in the text field below. Each question should start with a time mark (e.g., HH:MM:SS or MM:SS), followed by the question text. If the question is in two languages, separate them with ' / ' character.",pasteQuestionsList:"Paste questions list:",processAndAdd:"Process and Add",bilingualExamplePart1:"Example in two languages:",bilingualExamplePart2:"Como reconocer los Mensajes sagrados",singleLanguageExample:"Example in one language:",batchAddPlaceholder:"00:30 What is meditation?\n01:15 How to start meditating?\n02:00 Benefits of daily practice",errorBatchAddingQuestions:"Error adding questions: {errorMessage}",nowPlaying:"Now Playing",paused:"Paused",selectAnEpisode:"Select an Episode",backToEpisodes:"Back to Episodes",backToEpisodesShort:"Back",pageNotFoundTitle:"Page Not Found",pageNotFoundDescription:"The page you're looking for doesn't exist.",uploadAudioFiles:"Upload Audio Files",uploadAudio:"Upload Audio",uploadAudioDescription:"Upload your meditation audio files to get started with transcription and question management.",dropFilesHere:"Drop files here",dragOrClickUpload:"Drag and drop or click to upload",supportedFormats:"Supported formats: MP3, WAV, M4A, FLAC",uploading:"Uploading...",uploadError:"Upload Error",errorUploadingFile:"Error uploading file: {errorMessage}",allFilesUploadedSuccessfully:"All files uploaded successfully",spotifyUploadTitle:"Spotify Upload",spotifyUploadDesc:"Upload your episodes to Spotify for podcast distribution.",connectSpotify:"Connect Spotify",whatYouGet:"What you get:",spotifyFeature1:"Automated episode upload",spotifyFeature2:"Metadata management",spotifyFeature3:"Publishing workflow",spotifyFeature4:"Error handling",spotifyAuthSuccess:"Spotify connected successfully",spotifyAuthSuccessDesc:"You can now upload episodes to Spotify",spotifyAuthError:"Spotify connection failed",spotifyAuthErrorDesc:"Please check your credentials and try again",welcomeBack:"Welcome back",disconnect:"Disconnect",uploadEpisode:"Upload Episode",uploadEpisodeDesc:"Upload your podcast episode to Spotify",audioFile:"Audio File",episodeTitle:"Episode Title",enterTitle:"Enter episode title",description:"Description",enterDescription:"Enter episode description",category:"Category",explicitContent:"Explicit Content",uploadingToSpotify:"Uploading to Spotify...",uploadComplete:"Upload Complete",spotifyUploadSuccess:"Episode uploaded to Spotify successfully",spotifyUploadSuccessDesc:"Your episode is now live on Spotify",spotifyUploadError:"Upload to Spotify failed",spotifyUploadErrorDesc:"Please check your connection and try again",configurationError:"Configuration Error",spotifyClientIdMissing:"Spotify Client ID is missing",spotifyConfiguration:"Spotify Configuration",spotifyConfigurationDesc:"Configure your Spotify API credentials for podcast uploads",spotifyClientId:"Client ID",spotifyClientSecret:"Client Secret",saveConfiguration:"Save Configuration",resetConfiguration:"Reset Configuration",copiedToClipboard:"Copied to clipboard",copiedToClipboardDesc:"The URL has been copied to your clipboard",spotifyConfigSaved:"Configuration saved",spotifyConfigSavedDesc:"Your Spotify settings have been saved",spotifyConfigError:"Configuration error",confirmResetConfig:"Reset configuration?",configReset:"Configuration reset",configResetDesc:"All Spotify settings have been cleared",howToGetCredentials:"How to get credentials",spotifyStep1:"Go to Spotify for Podcasters",spotifyStep2:"Create a new app",spotifyStep3:"Copy Client ID and Client Secret",spotifyStep4:"Paste them below",openSpotifyDeveloper:"Open Spotify Developer Dashboard",spotifyConfigurationRequired:"Configuration required",validationError:"Validation error",fillRequiredFields:"Please fill in all required fields",howItWorks:"How it works",step1:"Step 1",step2:"Step 2",step3:"Step 3",step4:"Step 4",openSpotifyPodcasters:"Open Spotify for Podcasters",close:"Close",startUpload:"Start Upload",uploadingInProgress:"Upload in progress...",uploadToR2Success:"Upload to R2 successful",metadataSavedSuccess:"Metadata saved successfully",transcriptionStarted:"Transcription started",errorUploadingToR2:"Error uploading to R2",errorListingR2Files:"Error listing R2 files",errorPresignedUrlR2:"Error getting presigned URL for R2",errorSubmittingAssemblyAI:"Error submitting to AssemblyAI",errorFetchingAssemblyAIResult:"Error fetching AssemblyAI result",errorFetchingEpisodes:"Error fetching episodes",errorFetchingQuestions:"Error fetching questions",transcriptEditorTitle:"Transcript Editor",refreshTranscript:"Refresh Transcript",collapse:"Collapse",expand:"Expand",transcriptionError:"Transcription Error",transcriptionErrorTitle:"Transcription Failed",transcriptionErrorAssembly:"AssemblyAI transcription failed",noTranscriptAvailableYet:"No transcript available yet",startTranscription:"Start Transcription",noTranscriptData:"No transcript data",transcriptionInProgressTitle:"Transcription in Progress",transcriptionInProgressDescription:"Please wait while we transcribe your audio...",transcriptionCompletedTitle:"Transcription Completed",transcriptionCompletedDescription:"Your transcript is ready",transcriptionCompletedDesc:"Transcription completed successfully",errorPollingTranscript:"Error polling transcript status",transcriptionSubmittedTitle:"Transcription Submitted",transcriptionSubmittedDescription:"Your audio has been submitted for transcription",missingEpisodeOrUrl:"Missing episode or URL",unknownError:"Unknown error",unknownAssemblyError:"Unknown AssemblyAI error",transcriptSegmentUpdatedTitle:"Segment Updated",transcriptSegmentUpdatedDesc:"Transcript segment has been updated",playSegment:"Play Segment",editSegment:"Edit Segment",save:"Save",addQuestionToSegment:"Add Question to Segment",questionAttached:"Question attached",speaker:"Speaker",collapseQuestions:"Collapse Questions",expandQuestions:"Expand Questions",transcriptText:"Transcript Text",showFullText:"Show Full Text",hideFullText:"Hide Full Text",hide:"Hide",speakerLabel:"Speaker {number}",editSpeaker:"Edit Speaker",noSpeakersDetected:"No speakers detected",confirmSpeakerChangeTitle:"Confirm Speaker Change",confirmSpeakerChangeDescription:"This will change the speaker for this segment",textSegment:"Text Segment",textActions:"Text Actions",meditationTitlePrefix:"Meditation",introduction:"Introduction",loadMoreSegments:"Load More Segments",showText:"Show Text",fullTranscript:"Full Transcript",errorStartingTranscription:"Error starting transcription",searchTranscriptPlaceholder:"Search in transcript...",noResultsInTranscript:"No results found in transcript",jumpToQuestion:"Jump to Question",mergeWithPreviousSegment:"Merge with Previous",deleteSegment:"Delete Segment",splitSegment:"Split Segment",saveSegment:"Save Segment",addSegment:"Add Segment",addSegmentDescription:"Add a new text segment",segmentStartTime:"Start Time",segmentEndTime:"End Time",segmentText:"Segment Text",confirmMergeTitle:"Merge Segments",confirmMergeDescription:"Are you sure you want to merge these segments?",confirmDeleteSegmentTitle:"Delete Segment",confirmDeleteSegmentDescription:"Are you sure you want to delete this segment?",confirmSplitTitle:"Split Segment",confirmSplitDescription:"Split this segment at the cursor position?",doNotAskAgain:"Don't ask again",errorSplittingSegment:"Error splitting segment",cannotSplitEmpty:"Cannot split empty segment",cannotSplitAtPosition:"Cannot split at this position",cannotSplitIntoEmpty:"Cannot split into empty segments",pressEnterToSplit:"Press Enter to split",editSegmentPanelTitle:"Edit Segment",cursorPositionRequired:"Cursor position required",confirm:"Confirm",merge:"Merge",split:"Split",delete:"Delete",splitSegmentAtCursor:"Split at Cursor",editTextSegmentPlaceholder:"Edit text segment...",questionAttachedToSegment:"Question attached to segment",selectFiles:"Select Files",addAnotherFile:"Add Another File",startAllUploads:"Start All Uploads",processing:"Processing",timingsQuestions:"Timings & Questions",confirmOverwriteTitle:"Confirm Overwrite",confirmOverwriteMessage:"This file already exists. What would you like to overwrite?",overwrite:"Overwrite",selectWhatToOverwrite:"Select what to overwrite",overwriteServerFile:"Overwrite server file",overwriteEpisodeInfo:"Overwrite episode info",overwriteTranscript:"Overwrite transcript",overwriteQuestions:"Overwrite questions",transcriptionQueued:"Transcription queued",processingErrorsTitle:"Processing Errors",processingErrorsDesc:"Some files had errors during processing",uploadCancelledEpisodeExists:"Upload cancelled - episode already exists",transcriptionProcessing:"Transcription processing",transcriptionCompletedShort:"Completed",transcriptionFailedShort:"Failed",errorCheckingEpisodeDB:"Error checking episode database",fileAlreadyInR2Title:"File Already Exists",fileAlreadyInR2Desc:"This file already exists in R2 storage",usingExistingR2FileTitle:"Using Existing File",usingExistingR2FileDesc:"Using existing file from R2 storage",overwritingDbData:"Overwriting database data",overwritingEpisodeTitle:"Overwriting Episode",overwritingEpisodeDesc:"This will overwrite existing episode data",audioMetadataError:"Audio metadata error",supabaseEpisodeError:"Supabase episode error",startingTranscription:"Starting transcription",supabaseTranscriptError:"Supabase transcript error",allFilesProcessedTitle:"All Files Processed",allFilesProcessedDesc:"All files have been processed successfully",transcriptionErrorDesc:"Transcription failed: {errorMessage}",manageAndUploadTitle:"Manage & Upload",manageAndUploadDescription:"Manage your episodes and upload new content",manageEpisodes:"Manage Episodes",manageExistingEpisodes:"Manage Existing Episodes",manageEpisodesDescription:"View, edit, and manage your podcast episodes",manageEpisodesTitle:"Episode Management",assemblyAiApiKey:"AssemblyAI API Key",assemblyAiApiKeyDescription:"Your AssemblyAI API key for transcription services",assemblyAiApiKeyPlaceholder:"sk_...",apiKeyStoredLocally:"API key stored locally",apiKeySaved:"API Key Saved",apiKeySavedDescription:"Your API key has been saved successfully",apiKeySaveError:"Error saving API key",apiKeyCleared:"API Key Cleared",apiKeyClearedDescription:"Your API key has been removed",apiKeyClearError:"Error clearing API key",clear:"Clear",show:"Show",supportedAudioFormats:"Supported Audio Formats",filenameLanguageSuffixes:"Filename Language Suffixes",dragOrClickToUpload:"Drag and drop or click to upload",filesInQueue_one:"{count} file in queue",filesInQueue_few:"{count} files in queue",filesInQueue_many:"{count} files in queue",addFiles:"Add Files",episodeManagement:"Episode Management",refresh:"Refresh",selectAll:"Select All",episodes_one:"{count} episode",episodes_few:"{count} episodes",episodes_many:"{count} episodes",baseFile:"Base File",noFileUploaded:"No file uploaded",ready:"Ready",notStarted:"Not Started",dateNotSpecified:"Date not specified",audioFileNotAvailable:"Audio file not available",transcriptionAlreadyStarted:"Transcription already started",transcriptionInProgress:"Transcription in progress",transcriptionAlreadyCompleted:"Transcription already completed",transcriptionAlreadyReady:"Transcription already ready",audioUrlNotAvailable:"Audio URL not available",assemblyAiNoJobId:"No AssemblyAI job ID",transcriptionCompleted:"Transcription completed",transcriptionStartError:"Error starting transcription",questionsNotFound:"Questions not found",questionsNotFoundInDB:"Questions not found in database",questionsLoaded:"Questions loaded",questionsLoadedFromDB_one:"{count} question loaded from database",questionsLoadedFromDB_few:"{count} questions loaded from database",questionsLoadedFromDB_many:"{count} questions loaded from database",questionsLoadError:"Error loading questions",transcriptRequired:"Transcript Required",transcriptRequiredDescription:"A transcript is required before questions can be generated",transcriptDataNotFound:"Transcript data not found",questionsGenerationFailed:"Questions generation failed",questionsGenerated:"Questions generated",questionsGeneratedForEpisode_one:"{count} question generated for episode",questionsGeneratedForEpisode_few:"{count} questions generated for episode",questionsGeneratedForEpisode_many:"{count} questions generated for episode",questionsGenerationError:"Error generating questions",spanishEpisodeNotFound:"Spanish episode not found",spanishTranscriptNotReady:"Spanish transcript not ready",spanishTranscriptTextNotFound:"Spanish transcript text not found",transcriptTranslationFailed:"Transcript translation failed",transcriptTranslated:"Transcript translated",enTranscriptCreated:"English transcript created",transcriptTranslationError:"Transcript translation error",sourceEpisodeNotFound:"Source episode not found",questionsNotFoundForTranslation:"Questions not found for translation",translateQuestionPrompt:"Translate question to English",questionsTranslated:"Questions translated",questionsTranslatedCreated_one:"{count} question translated",questionsTranslatedCreated_few:"{count} questions translated",questionsTranslatedCreated_many:"{count} questions translated",questionsTranslationError:"Questions translation error",episodeDeleteError:"Episode deletion error",episodesDeleted:"Episodes deleted",episodesDeletedSuccessfully_one:"{count} episode deleted successfully",episodesDeletedSuccessfully_few:"{count} episodes deleted successfully",episodesDeletedSuccessfully_many:"{count} episodes deleted successfully",questionsDeleted:"Questions deleted",allQuestionsDeletedForEpisode:"All questions deleted for episode",questionsDeleteError:"Error deleting questions",deleteAllQuestionsTitle:"Delete All Questions",confirmDeleteAllQuestionsMessage:"Are you sure you want to delete all questions for this episode?",deleteAllQuestionsConfirm:"Delete All Questions",confirmDeleteEpisodesMessage:"Are you sure you want to delete selected episodes?",transcribe:"Transcribe",starting:"Starting",fromDB:"From DB",recognize:"Recognize",deleteAllQuestions:"Delete All Questions",translateTranscriptFromSpanish:"Translate Transcript from Spanish",translateQuestionsFromSpanish:"Translate Questions from Spanish",translateQuestionsFromRussian:"Traduire les questions du russe",transcriptDeleted:"Transcript deleted",searchEpisodes:"Search Episodes",translateToEnglish:"Translate to English",translateTimingsSuccessTitle:"Translation Successful",translateTimingsSuccessDesc:"Timings translated successfully",translateTimingsErrorTitle:"Translation Error",translateTimingsErrorDesc:"Error translating timings",timingsTranslating:"Translating timings...",transcriptionPendingTranslation:"Transcription pending translation",transcriptionTranslating:"Transcription translating",settings:"Settings",showTranscript:"Show Transcript",downloadAudio:"Download Audio",downloadStartedTitle:"Download Started",downloadStartedDesc:"Your download has started",audioNotAvailableForDownload:"Audio not available for download",skipBackward10:"Skip backward 10 seconds",skipForward10:"Skip forward 10 seconds",play:"Play",pause:"Pause",editLogPageTitle:"Historique des modifications",errorFetchingLogs:"Erreur lors du chargement des journaux de modification",noEditHistory:"Aucun historique de modification disponible",editHistory:"Historique des modifications",editHistoryTitle:"Historique des modifications",rolledBack:"Annul",errorLoadingHistory:"Erreur lors du chargement de l'historique",errorRollback:"Erreur lors de l'annulation",rollbackSuccessful:"Annulation russie",rollbackFailed:"chec de l'annulation",editType:"Type de modification",targetType:"Type de cible",rolledBackBy:"Annul par",unknownUser:"Utilisateur inconnu",showRolledBackEdits:"Afficher les modifications annules",editHistoryAdmin:"Administration de l'historique des modifications",editHistoryCount:"Historique des modifications ({count} modifications)",backButton:"Retour",actionReverted:"Action annule",revertButton:"Annuler",revertFailed:"chec de l'annulation",revertSuccessful:"Annulation russie",revertDescription:"Annuler cette modification ?",beforeLabel:"Avant",afterLabel:"Aprs",revertedAtLabel:"Annul le {date}",editRevertedTitle:"Modification Annule",editRevertedDesc:"La modification a t annule avec succs",nothingToRevert:"Rien  annuler",untitledQuestion:"Untitled Question",navigateToDeepSearch:"Navigate to Deep Search",search:"Rechercher",deepSearchTitle:"Deep Search",deepSearchPlaceholder:"Search across all meditations and questions...",searching:"Searching...",deepSearchMinChars:"Enter at least 3 characters",errorPerformingSearch:"Error performing search",noResultsFoundForQuery:'No results found for "{query}"',searchResultsCount_one:"{count} result found",searchResultsCount_few:"{count} results found",searchResultsCount_many:"{count} results found",foundInQuestionsTitle:"Found in Questions",foundInTextTitle:"Found in Text",foundSegmentsInEpisodeCount_one:"{count} segment found in episode",foundSegmentsInEpisodeCount_few:"{count} segments found in episode",foundSegmentsInEpisodeCount_many:"{count} segments found in episode",foundQuestionsInEpisodeCount_one:"{count} question found in episode",foundQuestionsInEpisodeCount_few:"{count} questions found in episode",foundQuestionsInEpisodeCount_many:"{count} questions found in episode",noQuestionsAddedYet:"No questions added yet",filterByYear:"Filtrer par anne",filterByMonth:"Filtrer par mois",allYears:"Toutes les annes",allMonths:"Tous les mois",resetFilters:"Rinitialiser les filtres",january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December",tryUploadingAudioOrFilter:"Try uploading audio files or adjust your filters",contextQuestion:"Context Question",question:"Question",playbackSpeed:"Playback Speed",noEpisodesFound:"No episodes found",deselectAll:"Deselect All",deleteSelected:"Delete Selected",errorTranslatingTranscriptOpenAI:"Error translating transcript with OpenAI",errorTranslatingTranscriptOpenAIDesc:"Failed to translate transcript",errorTranslatingTextOpenAI:"Error translating text with OpenAI",offlineMode:"Offline Mode",online:"Online",syncing:"Syncing...",syncError:"Sync Error",pendingChanges:"Pending Changes",justSynced:"Just synced",minutesAgo:"minutes ago",hoursAgo:"hours ago",clickToSync:"Click to sync",loadedFromCache:"Loaded from cache",dataLoadedOffline:"Data loaded offline",transcriptFromCache:"Transcript from cache",transcriptLoadedOffline:"Transcript loaded offline",questionsFromCache:"Questions from cache",questionsLoadedOffline:"Questions loaded offline",offlineDataUnavailable:"Offline data unavailable",episodeNotCached:"Episode not cached",transcriptUnavailableOffline:"Transcript unavailable offline",transcriptNotCached:"Transcript not cached",questionsUnavailableOffline:"Questions unavailable offline",questionsNotCached:"Questions not cached",savedOffline:"Saved offline",segmentSavedOffline:"Segment saved offline",transcriptSavedOffline:"Transcript saved offline",questionsSavedOffline:"Questions saved offline",offlineSaveError:"Offline save error",confirmSplitOffline:"Confirm split (offline)",confirmMergeOffline:"Confirm merge (offline)",confirmDeleteOffline:"Confirm delete (offline)",segmentSplitOffline:"Segment split offline",segmentMergedOffline:"Segment merged offline",segmentDeletedOffline:"Segment deleted offline",audioCache:"Audio Cache",cacheUsage:"Cache Usage",files:"files",used:"used",currentEpisode:"Current Episode",downloading:"Downloading",cached:"Cached",cache:"Cache",removeFromCache:"Remove from Cache",cacheForOffline:"Mettre en cache pour le mode hors ligne",cacheManagement:"Cache Management",manageStoredAudio:"Manage Stored Audio",clearAll:"Clear All",cachedFiles:"Cached Files",cacheSettings:"Cache Settings",confirmClearCache:"Confirm Clear Cache",clearCache:"Clear Cache",removing:"Removing",maxCacheSize:"Max Cache Size",downloadText:"Download Text",downloadTextSettings:"Download Text Settings",downloadSubtitles:"Download Subtitles",processWithAI:"Process with AI",contentType:"Content Type",allText:"All Text",selectedQuestions:"Selected Questions",selectQuestions:"Select Questions",includeTimings:"Include Timings",format:"Format",download:"Download",textDownloadStarted:"Text download started",includeSpeakers:"Include Speakers",offlineModeTitle:"Offline Mode",syncCompleted:"Sync Completed",itemsSynced:"Items synced",connectionRestored:"Connection restored",syncingChanges:"Syncing changes",connectionLost:"Connection lost",workingOffline:"Working offline",offlineSettings:"Offline Settings",networkStatus:"Network Status",connection:"Connection",offline:"Offline",pendingSync:"Pending Sync",items:"items",syncNow:"Sync Now",storageUsage:"Storage Usage",totalUsage:"Total Usage",clearAllData:"Clear All Data",syncQueue:"Sync Queue",attempts:"attempts",offlineFeatures:"Offline Features",audioPlayback:"Audio Playback",textEditing:"Text Editing",autoSync:"Auto Sync",localStorage:"Local Storage",headerDefaultTitle:"Dos Mundos Podcast",languageRussian:"Russe",languageSpanish:"Espagnol",languageEnglish:"Anglais",languageGerman:"Allemand",languageFrench:"Franais",languagePolish:"Polonais",languageSettings:"Paramtres de langue",languageChangeNotice:"Slectionnez votre langue d'interface prfre",playerRewindBack10:"Rewind 10 seconds",playerPlay:"Play",playerPause:"Pause",playerForward10:"Forward 10 seconds",playerProgressBar:"Progress bar",playerJumpToQuestion:"Jump to question",error:"Error",sectionTitleEmpty:"Section title cannot be empty",sectionTimeInvalid:"Invalid section time",sectionSaved:"Section saved",sectionSavedDescription:"Section has been saved successfully",sectionDeleted:"Section deleted",sectionDeletedDescription:"Section has been deleted successfully",currentSection:"Current Section",addNewSection:"Add New Section",add:"Add",editCurrentSection:"Edit Current Section",noActiveSection:"No active section",allSections:"All Sections",editSection:"Edit Section",noSectionsYet:"No sections yet",addSection:"Add Section",time:"Time",title:"Title",renameSpeakerGlobally:"Rename Speaker Globally",reassignToExistingSpeaker:"Reassign to Existing Speaker",createNewSpeaker:"Create New Speaker",selectExistingSpeaker:"Select Existing Speaker",selectSpeakerPlaceholder:"Select speaker...",unknownSpeaker:"Unknown Speaker",newSpeakerName:"New Speaker Name",speakerName:"Speaker Name",enterSpeakerNamePlaceholder:"Enter speaker name",renameSpeaker:"Rename Speaker",reassignSpeaker:"Reassign Speaker",createSpeaker:"Create Speaker",assignSpeaker:"Assign Speaker",assignSpeakerTitle:"Assign Speaker",assignSpeakerDescription:"Assign this segment to a speaker",assignSpeakerTooltip:"Assign speaker",currentSpeaker:"Current Speaker",translateTranscriptTitle:"Translate Transcript",translateTranscriptDesc:"Translate the transcript to another language",translateTranscriptSuccessTitle:"Translation Successful",translateTranscriptSuccessDesc:"Transcript translated successfully",translateTranscriptErrorTitle:"Translation Error",translateTranscriptErrorDesc:"Error translating transcript",translateTranscriptProgress:"Translating transcript...",translateTranscriptButton:"Translate Transcript",spanishTranscriptRequired:"Spanish transcript required",spanishVersionRequired:"Spanish version required",deleteAndRetranscribe:"Delete and Retranscribe",retranslate:"Retranslate",retranslateTranscript:"Retranslate Transcript",openInNewWindow:"Open in New Window",manage:"Manage",autoGenerateQuestions:"Auto-generate Questions",loadQuestionsFromDB:"Load Questions from DB",fileNotFound:"File Not Found",fileNotFoundInFolder:"File not found in folder",fileFoundAndAdded:"File found and added",fileWillBeUploaded:"File will be uploaded",fileUploadError:"File upload error",noFilesForEpisode:"No files for episode",spanishTranscriptInProgress:"Spanish transcript in progress",transcribeSpanishFirst:"Transcribe Spanish first",needSpanishFirst:"Need Spanish transcript first",translateTimingsToEnglish:"Translate Timings to English",createEnglishVersion:"Create English Version",fromSpanishTranscript:"From Spanish transcript",translateTranscriptFromRussian:"Translate Transcript from Russian",srtDownloaded:"SRT downloaded",textTranslated:"Text translated",errorUploadingToHostinger:"Error uploading to Hostinger",errorDeletingHostingerFile:"Error deleting Hostinger file",hostingerConnectionFailed:"Hostinger connection failed",hostingerUploadTimeout:"Hostinger upload timeout",migrationStarted:"Migration started",migrationComplete:"Migration complete",migrationError:"Migration error",filesSelectedForMigration:"Files selected for migration",storageProvider:"Storage Provider",interfaceLanguage:"Interface Language",languageChangeHint:"Language change will take effect immediately",uploadAudioAndManageVersions:"Tlcharger l'audio et grer les versions linguistiques",supportedAudioFormatsDescription:"Fichiers audio pris en charge : MP3, WAV, M4A, AAC, OGG, FLAC",waitForCompletion:"Veuillez attendre la fin du processus en cours",errorLoadingEpisodes:"Erreur lors du chargement des pisodes",errorDeletingQuestions:"Error deleting old questions: {errorMessage}",errorDeletingTranscripts:"Error deleting old transcripts: {errorMessage}",errorDeletingEpisodeDB:"Error deleting episode from database: {errorMessage}",episodeDeletedTitle:"Episode Deleted",episodeDeletedSuccess:"Episode '{episodeTitle}' was successfully deleted.",confirmDeleteTitle:"Confirm Deletion",confirmDeleteEpisodeMessage:"Are you sure you want to delete the episode '{episodeTitle}'? This will remove its audio, transcriptions, and questions for all languages.",actionIrreversible:"This action is irreversible.",deleting:"Deleting...",deleteConfirm:"Yes, Delete",fileDeletedFromR2Title:"File Deleted from Storage",fileDeletedFromR2Desc:"File {fileName} was successfully deleted from cloud storage.",errorDeletingR2FilePartial:"Could not delete file {fileName} from R2 storage: {errorMessage}. Database entries were still removed.",searchSpeakerPlaceholder:"Search speaker...",noSpeakerFound:"No speaker found.",or:"OR",enterNewSpeakerName:"Enter New Speaker Name",assignNewSpeakerName:"Assign as New Speaker",newSpeakerNamePlaceholder:"E.g., Maria, John Doe",assignAsNewSpeaker:"Assign as new speaker",saveSpeakerAssignment:"Save Assignment",speakerAssignedTitle:"Speaker Assigned",speakerAssignedDesc:"Speaker {newSpeaker} has been assigned.",errorSavingSpeakerAssignment:"Error saving speaker assignment.",editHistoryAdminTitle:"Edit History Admin",authenticateToAccessEditHistory:"Please authenticate to access the edit history admin panel",loggedInAs:"Logged in as",logout:"Logout",totalEdits:"Total Edits",active:"Active",last24h:"Last 24h",filters:"Filters",editor:"Editor",showRolledBack:"Show rolled back edits",edits:"edits",noEditsFound:"No edits found",before:"Before",after:"After",revertedAt:"Reverted at",reason:"Reason",metadata:"Metadata",rollback:"Rollback",editRolledBackSuccessfully:"Edit rolled back successfully",previousContentRestored:"The previous content has been restored",rollbackRecorded:"Rollback recorded but not applied",allEditors:"All Editors",allTypes:"All Types",allTargets:"All Targets",searchContent:"Search content...",noAssemblyIdInDB:"El ID de transcripcin de AssemblyAI no se encontr en la base de datos para este episodio e idioma.",transcriptionExistsTitle:"La transcripcin existe",transcriptionExistsDesc:"La transcripcin para el episodio {episode} ya existe y est completa.",warning:"Advertencia",loginToViewEditHistory:"Connectez-vous pour voir et grer votre historique de modifications",loginAsEditor:"Se connecter en tant qu'diteur",noEditsYet:"Aucune modification pour l'instant",activeEdits:"Modifications Actives",undo:"Annuler",confirmRollback:"tes-vous sr de vouloir annuler cette modification ?\n\nCela restaurera le contenu prcdent.",editRolledBack:"Modification annule",contentRestored:"Votre contenu prcdent a t restaur",rollbackRecordedDesc:"L'annulation a t enregistre mais la restauration du contenu ncessite une intervention manuelle",authenticate:"S'authentifier",editorAuthentication:"Authentification d'diteur",editorAuthDescription:"Entrez votre email et nom pour vous authentifier en tant qu'diteur. Seuls les caractres latins sont autoriss.",email:"Email",emailPlaceholder:"votre.email@exemple.fr",emailLatinOnly:"L'email doit contenir uniquement des caractres latins",name:"Nom",namePlaceholder:"Jean Dupont",nameLatinOnly:"Le nom doit contenir uniquement des caractres latins, espaces et tirets",loginFailed:"chec de la connexion",authenticating:"Authentification en cours...",translateQuestionsToAllLanguages:"Traduire les questions dans toutes les langues",questionsTranslatedFromRussian:"Questions traduites du russe",noRussianQuestionsToTranslate:"Aucune question russe  traduire",translateQuestionsButton:"Traduire les questions",translateQuestionsFrom:"Translate questions from {language}",skipBackward10Tooltip:"Skip backward 10 seconds",pauseTooltip:"Pause",playTooltip:"Play",skipForward10Tooltip:"Skip forward 10 seconds",exitReadingMode:"Exit Reading Mode",exitReadingModeTooltip:"Return to normal player view",loadingAudio:"Loading audio...",success:"Success",downloadError:"Download Error",tapToUnmuteAndPlay:"Tap to unmute and play",noAudioSource:"No audio source available",episodePublishedTitle:"Episode Published",episodePublishErrorTitle:"Publish Error",episodeFromCache:"Loaded from cache",episodeLoadedOffline:"Episode loaded offline",invalidEpisodeData:"Invalid episode data",errorLoadingEpisode:"Error loading episode",transcriptSaved:"Transcript saved",transcriptSavedSuccessfully:"Transcript saved successfully",saveError:"Save Error",questionsSaved:"Questions saved",questionsSavedSuccessfully:"Questions saved successfully",refreshError:"Refresh Error",failedToRefreshData:"Failed to refresh data",errorMergingSegment:"Error merging segment",cannotMergeFirstSegment:"Cannot merge the first segment",errorAddingSegment:"Error adding segment",invalidTimeRange:"Invalid time range",segmentOverlaps:"Segment overlaps with existing segments",segmentAddedTitle:"Segment Added",segmentAddedDesc:"New segment has been added successfully",finalizingTranscriptData:"Finalizing transcript data...",errorFetchingTranscript:"Error fetching transcript",errorUpdatingSegment:"Error updating segment",errorSimplifyingTextOpenAI:"Error simplifying text",settingsSaved:"Settings saved",offlineSettingsSaved:"Offline settings saved successfully",syncComplete:"Sync complete",manualSyncComplete:"Manual sync completed successfully",cacheCleared:"Cache cleared",offlineCacheCleared:"Offline cache cleared successfully",clearCacheError:"Clear Cache Error",back:"Back",offlineSettingsDescription:"Configure offline functionality and data synchronization",syncStatus:"Sync Status",storageUsageDescription:"Monitor and manage your offline storage usage",dataCache:"Data Cache",transcripts:"Transcripts",loadingStats:"Loading stats...",cacheSettingsDescription:"Configure cache sizes and behavior",autoSyncDescription:"Automatically sync data when online",maxAudioCache:"Max Audio Cache",maxAudioCacheDescription:"Maximum audio files to cache offline (MB)",maxDataCache:"Max Data Cache",maxDataCacheDescription:"Maximum data to cache offline (MB)",syncInterval:"Sync Interval",syncIntervalDescription:"How often to sync data when online (minutes)",autoCleanup:"Auto Cleanup",autoCleanupDescription:"Automatically clean up old cached data",saveSettings:"Save Settings",syncQueueDescription:"Manage pending synchronization tasks",syncQueueEmpty:"Sync queue is empty",manualSync:"Manual Sync",refreshStats:"Refresh Stats",analyticsTotalUsers:"Total Users",analyticsTotalSessions:"Total Sessions",analyticsTotalPageViews:"Page Views",analyticsAvgSessionDuration:"Avg Session Duration",analyticsVsPreviousPeriod:"vs previous period",analyticsBehaviorMetrics:"Behavior Metrics",analyticsNoData:"No data available",analyticsBounceRate:"Bounce Rate",analyticsBounceRateDesc:"Percentage of single-page visits",analyticsAvgSessionDurationDesc:"Average time on site",analyticsPagesPerSession:"Pages Per Session",analyticsPagesPerSessionDesc:"Average number of pages viewed",analyticsSearches:"Searches",analyticsFilters:"Filters",analyticsShares:"Shares",analyticsDownloads:"Downloads",analyticsUserInteractions:"User Interactions",analyticsEngagementScore:"Engagement Score",analyticsEngagementScoreDesc:"Overall user activity indicator",analyticsDevices:"Devices",analyticsDeviceTypes:"Device Types",analyticsBrowsers:"Browsers",analyticsGeography:"Geography",analyticsUsers:"Users",analyticsSessions:"Sessions",analyticsListeningStats:"Listening Statistics",analyticsAvgListeningTime:"Avg Listening Time",analyticsCompletionRate:"Completion Rate",analyticsTotalPlays:"Total Plays",analyticsTotalCompletions:"Total Completions",analyticsMostActiveHours:"Most Active Hours",analyticsPopularEpisodes:"Popular Meditations",analyticsViews:"Views",analyticsAvgDuration:"Avg Duration",analyticsTrafficSources:"Traffic Sources",analyticsVisitorsOverTime:"Visitors Over Time",analyticsTitle:"Analytics",analyticsError:"Analytics Loading Error",analyticsErrorDesc:"Failed to load analytics data. Please try refreshing the page.",analyticsExportReport:"Export Report",analyticsExportReportDesc:"Export feature coming soon",analyticsSubtitle:"Visit and listening statistics",analyticsLast24Hours:"Last 24 Hours",analyticsLast7Days:"Last 7 Days",analyticsLast30Days:"Last 30 Days",analyticsExport:"Export",analyticsOverview:"Overview",analyticsAudience:"Audience",analyticsContent:"Content",analyticsBehavior:"Behavior",analyticsFooterNote:"Data updates every 5 minutes. Use the refresh button for the latest information.",audioTrackMixed:"Ensemble",audioTrackRussian:"Maria",audioTrackSpanish:"Pepe",recognizeText:"Reconnatre le texte",recognizeQuestions:"Reconnatre les questions",recognizingText:"Reconnaissance du texte...",recognizingQuestions:"Reconnaissance des questions...",transcribing:"Transcription...",autoRecognizeQuestions:"Reconnaissance automatique des questions par IA",autoRecognizeQuestionsDesc:"Gnrer automatiquement des questions lors du chargement d'un pisode",blog_title:"Blog",blog_subtitle:"Explorez les profondeurs du monde intrieur  travers des messages universels.",search_articles_placeholder:"Rechercher des articles...",all_categories:"Tous",read_article:"Lire",back_to_articles:"Retour aux articles",watch_on_youtube:"Regarder sur YouTube",video_version:"Version vido",reading_time_minutes_one:"{count} minute de lecture",reading_time_minutes_many:"{count} minutes de lecture",published_on:"Publi"},ny={ru:Jm,es:Zm,en:ey,de:ty,fr:ry,pl:{appName:"Dos Mundos Radio",loading:"adowanie...",loadingPodcast:"adowanie podcastu...",loadingEpisodes:"adowanie medytacji...",loadingEpisode:"adowanie medytacji...",errorLoadingData:"Bd adowania danych",tryAgain:"Sprbuj ponownie",failedToLoadPodcastData:"Bd adowania danych podcastu: {errorMessage}. Sprbuj ponownie pniej.",episodeNotFound:"Medytacja nie znaleziona",noEpisodesFoundForLanguage:'Nie znaleziono medytacji dla jzyka "{language}".',tryUploadingAudio:"Sprbuj przesa plik audio, aby rozpocz.",reloadEpisodes:"Przeaduj dane",episodes:"Radio Dos Mundos",searchEpisodesAndQuestions:"Wyszukaj medytacje, pytania i tekst...",searchInTranscript:"Szukaj w transkrypcji...",searchResultsEmpty:"Nic nie znaleziono dla Twojego wyszukiwania.",noEpisodesForLanguageShort:"Nie znaleziono medytacji",selectEpisode:"Wybierz medytacj: {episodeTitle}",openEpisode:"Otwrz",episodeTitleMissing:"Brakuje tytuu medytacji",descriptionMissing:"Brakuje opisu.",questions:"Pytania",questionsCountFormat:"({count})",noQuestionsForLanguage:"Pytania nie zostay jeszcze dodane dla obecnego jzyka.",loadingTranscriptAndQuestions:"adowanie transkrypcji i pyta...",noQuestionsOrTranscriptTitle:"Brak pyta lub transkrypcji",noQuestionsOrTranscriptDesc:"Gdy transkrypcja bdzie gotowa, pojawi si tutaj. Moesz teraz doda pytania.",loadingTranscript:"adowanie transkrypcji...",addQuestion:"Dodaj",editQuestion:"Edytuj pytanie",deleteQuestion:"Usu pytanie",saveQuestion:"Zapisz",cancel:"Anuluj",questionTime:"Czas",questionTitle:"Tytu pytania",questionTitlePlaceholder:"Na przykad: O korzyciach medytacji",questionLanguage:"Jzyk pytania",addQuestionDialogTitle:"Dodaj pytanie",addQuestionDialogDescription:"Zaznacz czas i wpisz szczegy pytania.",addQuestionDialogDescriptionSegment:'Dodaj pytanie do segmentu: "{segmentText}"',editQuestionDialogTitle:"Edytuj pytanie",editQuestionDialogDescription:"Modyfikuj szczegy pytania.",confirmDeleteQuestionTitle:"Potwierd usunicie",confirmDeleteQuestionDescription:"Czy na pewno chcesz usun to pytanie? Ta akcja jest nieodwracalna.",audioErrorTitle:"Bd audio",audioErrorDescriptionPlayer:'Bd adowania audio dla "{episodeTitle}".',playbackErrorTitle:"Bd odtwarzania",playbackErrorDescription:"Nie mona odtworzy audio.",navigationNoQuestions:"W tej medytacji nie ma pyta do nawigacji.",navigationToastTitle:"Nawigacja",previousQuestion:"Poprzednie pytanie",nextQuestion:"Nastpne pytanie",changePlaybackSpeed:"Zmie szybko odtwarzania, obecna: {speed}",selectLanguageModalTitle:"Wybierz jzyk",selectLanguageModalDescription:"Wybierz preferowany jzyk aplikacji. Moesz go zmieni pniej.",russian:"",spanish:"Espaol",english:"English",german:"Deutsch",french:"Franais",polish:"Polski",allLanguages:"Wszystkie jzyki",language:"Jzyk",filename:"Nazwa pliku",duration:"Czas trwania",foundQuestionsInEpisode:"Znalezione w pytaniach",foundInTranscript:"Znalezione w transkrypcji",questionCount_one:"{count} pytanie",questionCount_few:"{count} pytania",questionCount_many:"{count} pyta",errorAddingQuestion:"Bd dodawania pytania: {errorMessage}",errorUpdatingQuestion:"Bd aktualizacji pytania: {errorMessage}",errorDeletingQuestion:"Bd usuwania pytania: {errorMessage}",errorGeneric:"Bd",batchAddQuestions:"Import from Text",batchAddQuestionsShort:"Import",batchAddQuestionsDialogTitle:"Import Questions from Text",batchAddQuestionsDialogDescription:"Paste a list of questions in the text field below. Each question should start with a time mark (e.g., HH:MM:SS or MM:SS), followed by the question text. If the question is in two languages, separate them with ' / ' character.",pasteQuestionsList:"Paste questions list:",processAndAdd:"Process and Add",bilingualExamplePart1:"Example in two languages:",bilingualExamplePart2:"Como reconocer los Mensajes sagrados",singleLanguageExample:"Example in one language:",batchAddPlaceholder:"00:30 What is meditation?\n01:15 How to start meditating?\n02:00 Benefits of daily practice",errorBatchAddingQuestions:"Error adding questions: {errorMessage}",nowPlaying:"Now Playing",paused:"Paused",selectAnEpisode:"Select an Episode",backToEpisodes:"Back to Episodes",backToEpisodesShort:"Back",pageNotFoundTitle:"Page Not Found",pageNotFoundDescription:"The page you're looking for doesn't exist.",uploadAudioFiles:"Przelij pliki audio",uploadAudio:"Przelij audio",uploadAudioDescription:"Upload your meditation audio files to get started with transcription and question management.",dropFilesHere:"Drop files here",dragOrClickUpload:"Drag and drop or click to upload",supportedFormats:"Supported formats: MP3, WAV, M4A, FLAC",uploading:"Przesyanie...",uploadError:"Bd przesyania",errorUploadingFile:"Bd przesyania pliku: {errorMessage}",allFilesUploadedSuccessfully:"Wszystkie pliki zostay pomylnie przesane",spotifyUploadTitle:"Przesyanie do Spotify",spotifyUploadDesc:"Przelij swoje odcinki do Spotify w celu dystrybucji podcastw.",connectSpotify:"Pocz ze Spotify",whatYouGet:"What you get:",spotifyFeature1:"Automated episode upload",spotifyFeature2:"Metadata management",spotifyFeature3:"Publishing workflow",spotifyFeature4:"Error handling",spotifyAuthSuccess:"Pomylnie poczono ze Spotify",spotifyAuthSuccessDesc:"You can now upload episodes to Spotify",spotifyAuthError:"Bd poczenia ze Spotify",spotifyAuthErrorDesc:"Please check your credentials and try again",welcomeBack:"Welcome back",disconnect:"Disconnect",uploadEpisode:"Przelij odcinek",uploadEpisodeDesc:"Upload your podcast episode to Spotify",audioFile:"Audio File",episodeTitle:"Episode Title",enterTitle:"Enter episode title",description:"Description",enterDescription:"Enter episode description",category:"Category",explicitContent:"Explicit Content",uploadingToSpotify:"Przesyanie do Spotify...",uploadComplete:"Upload Complete",spotifyUploadSuccess:"Odcinek zosta pomylnie przesany do Spotify",spotifyUploadSuccessDesc:"Your episode is now live on Spotify",spotifyUploadError:"Bd przesyania do Spotify",spotifyUploadErrorDesc:"Please check your connection and try again",configurationError:"Bd konfiguracji",spotifyClientIdMissing:"Spotify Client ID is missing",spotifyConfiguration:"Spotify Configuration",spotifyConfigurationDesc:"Configure your Spotify API credentials for podcast uploads",spotifyClientId:"Client ID",spotifyClientSecret:"Client Secret",saveConfiguration:"Save Configuration",resetConfiguration:"Reset Configuration",copiedToClipboard:"Copied to clipboard",copiedToClipboardDesc:"The URL has been copied to your clipboard",spotifyConfigSaved:"Configuration saved",spotifyConfigSavedDesc:"Your Spotify settings have been saved",spotifyConfigError:"Configuration error",confirmResetConfig:"Reset configuration?",configReset:"Configuration reset",configResetDesc:"All Spotify settings have been cleared",howToGetCredentials:"How to get credentials",spotifyStep1:"Go to Spotify for Podcasters",spotifyStep2:"Create a new app",spotifyStep3:"Copy Client ID and Client Secret",spotifyStep4:"Paste them below",openSpotifyDeveloper:"Open Spotify Developer Dashboard",spotifyConfigurationRequired:"Configuration required",validationError:"Bd walidacji",fillRequiredFields:"Wypenij wszystkie wymagane pola",howItWorks:"How it works",step1:"Step 1",step2:"Step 2",step3:"Step 3",step4:"Step 4",openSpotifyPodcasters:"Open Spotify for Podcasters",close:"Zamknij",startUpload:"Start Upload",uploadingInProgress:"Upload in progress...",uploadToR2Success:"Upload to R2 successful",metadataSavedSuccess:"Metadata saved successfully",transcriptionStarted:"Transcription started",errorUploadingToR2:"Error uploading to R2",errorListingR2Files:"Error listing R2 files",errorPresignedUrlR2:"Error getting presigned URL for R2",errorSubmittingAssemblyAI:"Error submitting to AssemblyAI",errorFetchingAssemblyAIResult:"Error fetching AssemblyAI result",errorFetchingEpisodes:"Error fetching episodes",errorFetchingQuestions:"Error fetching questions",transcriptEditorTitle:"Transcript Editor",refreshTranscript:"Refresh Transcript",collapse:"Collapse",expand:"Expand",transcriptionError:"Transcription Error",transcriptionErrorTitle:"Transcription Failed",transcriptionErrorAssembly:"AssemblyAI transcription failed",noTranscriptAvailableYet:"No transcript available yet",startTranscription:"Start Transcription",noTranscriptData:"No transcript data",transcriptionInProgressTitle:"Transcription in Progress",transcriptionInProgressDescription:"Please wait while we transcribe your audio...",transcriptionCompletedTitle:"Transcription Completed",transcriptionCompletedDescription:"Your transcript is ready",transcriptionCompletedDesc:"Transcription completed successfully",errorPollingTranscript:"Error polling transcript status",transcriptionSubmittedTitle:"Transcription Submitted",transcriptionSubmittedDescription:"Your audio has been submitted for transcription",missingEpisodeOrUrl:"Missing episode or URL",unknownError:"Unknown error",unknownAssemblyError:"Unknown AssemblyAI error",transcriptSegmentUpdatedTitle:"Segment Updated",transcriptSegmentUpdatedDesc:"Transcript segment has been updated",playSegment:"Play Segment",editSegment:"Edit Segment",save:"Zapisz",addQuestionToSegment:"Add Question to Segment",questionAttached:"Question attached",speaker:"Speaker",collapseQuestions:"Collapse Questions",expandQuestions:"Expand Questions",transcriptText:"Transcript Text",showFullText:"Show Full Text",hideFullText:"Hide Full Text",hide:"Hide",speakerLabel:"Speaker {number}",editSpeaker:"Edit Speaker",noSpeakersDetected:"No speakers detected",confirmSpeakerChangeTitle:"Confirm Speaker Change",confirmSpeakerChangeDescription:"This will change the speaker for this segment",textSegment:"Text Segment",textActions:"Text Actions",meditationTitlePrefix:"Meditation",introduction:"Introduction",loadMoreSegments:"Load More Segments",showText:"Show Text",fullTranscript:"Full Transcript",errorStartingTranscription:"Error starting transcription",searchTranscriptPlaceholder:"Szukaj w transkrypcji...",noResultsInTranscript:"Brak wynikw w transkrypcji",jumpToQuestion:"Przejd do pytania",mergeWithPreviousSegment:"Scal z poprzednim segmentem",deleteSegment:"Usu segment",splitSegment:"Podziel segment",saveSegment:"Zapisz segment",addSegment:"Dodaj segment",addSegmentDescription:"Add a new text segment",segmentStartTime:"Start Time",segmentEndTime:"End Time",segmentText:"Segment Text",confirmMergeTitle:"Merge Segments",confirmMergeDescription:"Are you sure you want to merge these segments?",confirmDeleteSegmentTitle:"Delete Segment",confirmDeleteSegmentDescription:"Are you sure you want to delete this segment?",confirmSplitTitle:"Split Segment",confirmSplitDescription:"Split this segment at the cursor position?",doNotAskAgain:"Don't ask again",errorSplittingSegment:"Error splitting segment",cannotSplitEmpty:"Cannot split empty segment",cannotSplitAtPosition:"Cannot split at this position",cannotSplitIntoEmpty:"Cannot split into empty segments",pressEnterToSplit:"Press Enter to split",editSegmentPanelTitle:"Edit Segment",cursorPositionRequired:"Cursor position required",confirm:"Potwierd",merge:"Merge",split:"Split",delete:"Usu",splitSegmentAtCursor:"Split at Cursor",editTextSegmentPlaceholder:"Edit text segment...",questionAttachedToSegment:"Question attached to segment",selectFiles:"Select Files",addAnotherFile:"Add Another File",startAllUploads:"Start All Uploads",processing:"Przetwarzanie",timingsQuestions:"Timings & Questions",confirmOverwriteTitle:"Confirm Overwrite",confirmOverwriteMessage:"This file already exists. What would you like to overwrite?",overwrite:"Overwrite",selectWhatToOverwrite:"Select what to overwrite",overwriteServerFile:"Overwrite server file",overwriteEpisodeInfo:"Overwrite episode info",overwriteTranscript:"Overwrite transcript",overwriteQuestions:"Overwrite questions",transcriptionQueued:"Transcription queued",processingErrorsTitle:"Processing Errors",processingErrorsDesc:"Some files had errors during processing",uploadCancelledEpisodeExists:"Upload cancelled - episode already exists",transcriptionProcessing:"Transcription processing",transcriptionCompletedShort:"Completed",transcriptionFailedShort:"Failed",errorCheckingEpisodeDB:"Error checking episode database",fileAlreadyInR2Title:"File Already Exists",fileAlreadyInR2Desc:"This file already exists in R2 storage",usingExistingR2FileTitle:"Using Existing File",usingExistingR2FileDesc:"Using existing file from R2 storage",overwritingDbData:"Overwriting database data",overwritingEpisodeTitle:"Overwriting Episode",overwritingEpisodeDesc:"This will overwrite existing episode data",audioMetadataError:"Audio metadata error",supabaseEpisodeError:"Supabase episode error",startingTranscription:"Starting transcription",supabaseTranscriptError:"Supabase transcript error",allFilesProcessedTitle:"All Files Processed",allFilesProcessedDesc:"All files have been processed successfully",transcriptionErrorDesc:"Transcription failed: {errorMessage}",manageAndUploadTitle:"Manage & Upload",manageAndUploadDescription:"Manage your episodes and upload new content",manageEpisodes:"Manage Episodes",manageExistingEpisodes:"Manage Existing Episodes",manageEpisodesDescription:"View, edit, and manage your podcast episodes",manageEpisodesTitle:"Episode Management",assemblyAiApiKey:"AssemblyAI API Key",assemblyAiApiKeyDescription:"Your AssemblyAI API key for transcription services",assemblyAiApiKeyPlaceholder:"sk_...",apiKeyStoredLocally:"API key stored locally",apiKeySaved:"API Key Saved",apiKeySavedDescription:"Your API key has been saved successfully",apiKeySaveError:"Error saving API key",apiKeyCleared:"API Key Cleared",apiKeyClearedDescription:"Your API key has been removed",apiKeyClearError:"Error clearing API key",clear:"Clear",show:"Show",supportedAudioFormats:"Supported Audio Formats",filenameLanguageSuffixes:"Filename Language Suffixes",dragOrClickToUpload:"Drag and drop or click to upload",filesInQueue_one:"{count} file in queue",filesInQueue_few:"{count} files in queue",filesInQueue_many:"{count} files in queue",addFiles:"Add Files",episodeManagement:"Zarzdzanie odcinkami",refresh:"Odwie",selectAll:"Zaznacz wszystko",episodes_one:"{count} episode",episodes_few:"{count} episodes",episodes_many:"{count} episodes",baseFile:"Base File",noFileUploaded:"Nie przesano pliku",ready:"Gotowy",notStarted:"Not Started",dateNotSpecified:"Date not specified",audioFileNotAvailable:"Plik audio niedostpny",transcriptionAlreadyStarted:"Transcription already started",transcriptionInProgress:"Transkrypcja w trakcie",transcriptionAlreadyCompleted:"Transcription already completed",transcriptionAlreadyReady:"Transcription already ready",audioUrlNotAvailable:"Audio URL not available",assemblyAiNoJobId:"No AssemblyAI job ID",transcriptionCompleted:"Transkrypcja ukoczona",transcriptionStartError:"Error starting transcription",questionsNotFound:"Nie znaleziono pyta",questionsNotFoundInDB:"Questions not found in database",questionsLoaded:"Pytania zaadowane",questionsLoadedFromDB_one:"{count} question loaded from database",questionsLoadedFromDB_few:"{count} questions loaded from database",questionsLoadedFromDB_many:"{count} questions loaded from database",questionsLoadError:"Error loading questions",transcriptRequired:"Transcript Required",transcriptRequiredDescription:"A transcript is required before questions can be generated",transcriptDataNotFound:"Transcript data not found",questionsGenerationFailed:"Generowanie pyta nie powiodo si",questionsGenerated:"Pytania wygenerowane",questionsGeneratedForEpisode_one:"{count} question generated for episode",questionsGeneratedForEpisode_few:"{count} questions generated for episode",questionsGeneratedForEpisode_many:"{count} questions generated for episode",questionsGenerationError:"Error generating questions",spanishEpisodeNotFound:"Spanish episode not found",spanishTranscriptNotReady:"Spanish transcript not ready",spanishTranscriptTextNotFound:"Spanish transcript text not found",transcriptTranslationFailed:"Transcript translation failed",transcriptTranslated:"Transcript translated",enTranscriptCreated:"English transcript created",transcriptTranslationError:"Transcript translation error",sourceEpisodeNotFound:"Source episode not found",questionsNotFoundForTranslation:"Questions not found for translation",translateQuestionPrompt:"Translate question to English",questionsTranslated:"Questions translated",questionsTranslatedCreated_one:"{count} question translated",questionsTranslatedCreated_few:"{count} questions translated",questionsTranslatedCreated_many:"{count} questions translated",questionsTranslationError:"Questions translation error",episodeDeleteError:"Episode deletion error",episodesDeleted:"Episodes deleted",episodesDeletedSuccessfully_one:"{count} episode deleted successfully",episodesDeletedSuccessfully_few:"{count} episodes deleted successfully",episodesDeletedSuccessfully_many:"{count} episodes deleted successfully",questionsDeleted:"Questions deleted",allQuestionsDeletedForEpisode:"All questions deleted for episode",questionsDeleteError:"Error deleting questions",deleteAllQuestionsTitle:"Delete All Questions",confirmDeleteAllQuestionsMessage:"Are you sure you want to delete all questions for this episode?",deleteAllQuestionsConfirm:"Delete All Questions",confirmDeleteEpisodesMessage:"Are you sure you want to delete selected episodes?",transcribe:"Transcribe",starting:"Starting",fromDB:"From DB",recognize:"Recognize",deleteAllQuestions:"Delete All Questions",translateTranscriptFromSpanish:"Translate Transcript from Spanish",translateQuestionsFromSpanish:"Translate Questions from Spanish",translateQuestionsFromRussian:"Przetumacz pytania z rosyjskiego",transcriptDeleted:"Transcript deleted",searchEpisodes:"Search Episodes",translateToEnglish:"Przetumacz na angielski",translateTimingsSuccessTitle:"Translation Successful",translateTimingsSuccessDesc:"Timings translated successfully",translateTimingsErrorTitle:"Translation Error",translateTimingsErrorDesc:"Error translating timings",timingsTranslating:"Translating timings...",transcriptionPendingTranslation:"Transcription pending translation",transcriptionTranslating:"Transcription translating",settings:"Ustawienia",showTranscript:"Poka transkrypcj",downloadAudio:"Pobierz audio",downloadStartedTitle:"Pobieranie rozpoczte",downloadStartedDesc:"Pobieranie zostao rozpoczte",audioNotAvailableForDownload:"Audio niedostpne do pobrania",skipBackward10:"Cofnij o 10 sekund",skipForward10:"Przewi do przodu o 10 sekund",play:"Odtwrz",pause:"Pauza",editLogPageTitle:"Historia edycji",errorFetchingLogs:"Bd pobierania dziennika edycji",noEditHistory:"Historia edycji niedostpna",editHistory:"Historia edycji",editHistoryTitle:"Historia edycji",rolledBack:"Cofnito",errorLoadingHistory:"Bd adowania historii",errorRollback:"Bd cofania",rollbackSuccessful:"Cofnicie udane",rollbackFailed:"Nie udao si cofn",editType:"Typ edycji",targetType:"Typ celu",rolledBackBy:"Cofnito przez",unknownUser:"Nieznany uytkownik",showRolledBackEdits:"Poka cofnite edycje",editHistoryAdmin:"Administracja historii edycji",editHistoryCount:"Historia edycji ({count} edycji)",backButton:"Wstecz",actionReverted:"Akcja cofnita",revertButton:"Cofnij",revertFailed:"Cofnicie nie powiodo si",revertSuccessful:"Cofnicie pomylne",revertDescription:"Czy cofn t zmian?",beforeLabel:"Przed",afterLabel:"Po",revertedAtLabel:"Cofnito o {date}",editRevertedTitle:"Edycja cofnita",editRevertedDesc:"Edycja zostaa pomylnie cofnita",nothingToRevert:"Nie ma nic do cofnicia",untitledQuestion:"Pytanie bez tytuu",navigateToDeepSearch:"Przejd do gbokiego wyszukiwania",search:"Szukaj",deepSearchTitle:"Gbokie wyszukiwanie",deepSearchPlaceholder:"Wyszukaj we wszystkich medytacjach i pytaniach...",searching:"Wyszukiwanie...",deepSearchMinChars:"Enter at least 3 characters",errorPerformingSearch:"Bd podczas wyszukiwania",noResultsFoundForQuery:'Nie znaleziono wynikw dla "{query}"',searchResultsCount_one:"{count} result found",searchResultsCount_few:"{count} results found",searchResultsCount_many:"{count} results found",foundInQuestionsTitle:"Found in Questions",foundInTextTitle:"Found in Text",foundSegmentsInEpisodeCount_one:"{count} segment found in episode",foundSegmentsInEpisodeCount_few:"{count} segments found in episode",foundSegmentsInEpisodeCount_many:"{count} segments found in episode",foundQuestionsInEpisodeCount_one:"{count} question found in episode",foundQuestionsInEpisodeCount_few:"{count} questions found in episode",foundQuestionsInEpisodeCount_many:"{count} questions found in episode",noQuestionsAddedYet:"No questions added yet",filterByYear:"Filtruj wedug roku",filterByMonth:"Filtruj wedug miesica",allYears:"Wszystkie lata",allMonths:"Wszystkie miesice",resetFilters:"Resetuj filtry",january:"Stycze",february:"Luty",march:"Marzec",april:"Kwiecie",may:"Maj",june:"Czerwiec",july:"Lipiec",august:"Sierpie",september:"Wrzesie",october:"Padziernik",november:"Listopad",december:"Grudzie",tryUploadingAudioOrFilter:"Try uploading audio files or adjust your filters",contextQuestion:"Context Question",question:"Question",playbackSpeed:"Playback Speed",noEpisodesFound:"No episodes found",deselectAll:"Deselect All",deleteSelected:"Delete Selected",errorTranslatingTranscriptOpenAI:"Error translating transcript with OpenAI",errorTranslatingTranscriptOpenAIDesc:"Failed to translate transcript",errorTranslatingTextOpenAI:"Error translating text with OpenAI",offlineMode:"Tryb offline",online:"Online",syncing:"Synchronizacja...",syncError:"Bd synchronizacji",pendingChanges:"Pending Changes",justSynced:"Just synced",minutesAgo:"minutes ago",hoursAgo:"hours ago",clickToSync:"Click to sync",loadedFromCache:"Zaadowano z keszu",dataLoadedOffline:"Data loaded offline",transcriptFromCache:"Transcript from cache",transcriptLoadedOffline:"Transcript loaded offline",questionsFromCache:"Questions from cache",questionsLoadedOffline:"Questions loaded offline",offlineDataUnavailable:"Offline data unavailable",episodeNotCached:"Episode not cached",transcriptUnavailableOffline:"Transcript unavailable offline",transcriptNotCached:"Transcript not cached",questionsUnavailableOffline:"Questions unavailable offline",questionsNotCached:"Questions not cached",savedOffline:"Saved offline",segmentSavedOffline:"Segment saved offline",transcriptSavedOffline:"Transcript saved offline",questionsSavedOffline:"Questions saved offline",offlineSaveError:"Offline save error",confirmSplitOffline:"Confirm split (offline)",confirmMergeOffline:"Confirm merge (offline)",confirmDeleteOffline:"Confirm delete (offline)",segmentSplitOffline:"Segment split offline",segmentMergedOffline:"Segment merged offline",segmentDeletedOffline:"Segment deleted offline",audioCache:"Audio Cache",cacheUsage:"Wykorzystanie keszu",files:"files",used:"used",currentEpisode:"Current Episode",downloading:"Downloading",cached:"Cached",cache:"Cache",removeFromCache:"Usu z keszu",cacheForOffline:"Keszuj dla trybu offline",cacheManagement:"Zarzdzanie keszem",manageStoredAudio:"Manage Stored Audio",clearAll:"Clear All",cachedFiles:"Zakeszowane pliki",cacheSettings:"Ustawienia keszu",confirmClearCache:"Confirm Clear Cache",clearCache:"Wyczy kesz",removing:"Removing",maxCacheSize:"Max Cache Size",downloadText:"Download Text",downloadTextSettings:"Download Text Settings",downloadSubtitles:"Download Subtitles",processWithAI:"Process with AI",contentType:"Content Type",allText:"All Text",selectedQuestions:"Selected Questions",selectQuestions:"Select Questions",includeTimings:"Include Timings",format:"Format",download:"Download",textDownloadStarted:"Text download started",includeSpeakers:"Include Speakers",offlineModeTitle:"Offline Mode",syncCompleted:"Sync Completed",itemsSynced:"Items synced",connectionRestored:"Connection restored",syncingChanges:"Syncing changes",connectionLost:"Connection lost",workingOffline:"Praca w trybie offline",offlineSettings:"Offline Settings",networkStatus:"Network Status",connection:"Connection",offline:"Offline",pendingSync:"Pending Sync",items:"items",syncNow:"Sync Now",storageUsage:"Storage Usage",totalUsage:"Total Usage",clearAllData:"Clear All Data",syncQueue:"Sync Queue",attempts:"attempts",offlineFeatures:"Offline Features",audioPlayback:"Audio Playback",textEditing:"Text Editing",autoSync:"Auto Sync",localStorage:"Local Storage",headerDefaultTitle:"Dos Mundos Podcast",languageRussian:"Rosyjski",languageSpanish:"Hiszpaski",languageEnglish:"Angielski",languageGerman:"Niemiecki",languageFrench:"Francuski",languagePolish:"Polski",languageSettings:"Ustawienia jzyka",languageChangeNotice:"Wybierz preferowany jzyk interfejsu",playerRewindBack10:"Rewind 10 seconds",playerPlay:"Play",playerPause:"Pause",playerForward10:"Forward 10 seconds",playerProgressBar:"Progress bar",playerJumpToQuestion:"Jump to question",error:"Error",sectionTitleEmpty:"Section title cannot be empty",sectionTimeInvalid:"Invalid section time",sectionSaved:"Section saved",sectionSavedDescription:"Section has been saved successfully",sectionDeleted:"Section deleted",sectionDeletedDescription:"Section has been deleted successfully",currentSection:"Current Section",addNewSection:"Add New Section",add:"Add",editCurrentSection:"Edit Current Section",noActiveSection:"No active section",allSections:"All Sections",editSection:"Edit Section",noSectionsYet:"No sections yet",addSection:"Add Section",time:"Time",title:"Title",renameSpeakerGlobally:"Rename Speaker Globally",reassignToExistingSpeaker:"Reassign to Existing Speaker",createNewSpeaker:"Create New Speaker",selectExistingSpeaker:"Select Existing Speaker",selectSpeakerPlaceholder:"Select speaker...",unknownSpeaker:"Unknown Speaker",newSpeakerName:"New Speaker Name",speakerName:"Speaker Name",enterSpeakerNamePlaceholder:"Enter speaker name",renameSpeaker:"Rename Speaker",reassignSpeaker:"Reassign Speaker",createSpeaker:"Create Speaker",assignSpeaker:"Assign Speaker",assignSpeakerTitle:"Assign Speaker",assignSpeakerDescription:"Assign this segment to a speaker",assignSpeakerTooltip:"Assign speaker",currentSpeaker:"Current Speaker",translateTranscriptTitle:"Translate Transcript",translateTranscriptDesc:"Translate the transcript to another language",translateTranscriptSuccessTitle:"Translation Successful",translateTranscriptSuccessDesc:"Transcript translated successfully",translateTranscriptErrorTitle:"Translation Error",translateTranscriptErrorDesc:"Error translating transcript",translateTranscriptProgress:"Translating transcript...",translateTranscriptButton:"Translate Transcript",spanishTranscriptRequired:"Spanish transcript required",spanishVersionRequired:"Spanish version required",deleteAndRetranscribe:"Delete and Retranscribe",retranslate:"Retranslate",retranslateTranscript:"Retranslate Transcript",openInNewWindow:"Open in New Window",manage:"Manage",autoGenerateQuestions:"Auto-generate Questions",loadQuestionsFromDB:"Load Questions from DB",fileNotFound:"File Not Found",fileNotFoundInFolder:"File not found in folder",fileFoundAndAdded:"File found and added",fileWillBeUploaded:"File will be uploaded",fileUploadError:"File upload error",noFilesForEpisode:"No files for episode",spanishTranscriptInProgress:"Spanish transcript in progress",transcribeSpanishFirst:"Transcribe Spanish first",needSpanishFirst:"Need Spanish transcript first",translateTimingsToEnglish:"Translate Timings to English",createEnglishVersion:"Create English Version",fromSpanishTranscript:"From Spanish transcript",translateTranscriptFromRussian:"Translate Transcript from Russian",srtDownloaded:"SRT downloaded",textTranslated:"Text translated",errorUploadingToHostinger:"Error uploading to Hostinger",errorDeletingHostingerFile:"Error deleting Hostinger file",hostingerConnectionFailed:"Hostinger connection failed",hostingerUploadTimeout:"Hostinger upload timeout",migrationStarted:"Migration started",migrationComplete:"Migration complete",migrationError:"Migration error",filesSelectedForMigration:"Files selected for migration",storageProvider:"Storage Provider",interfaceLanguage:"Jzyk interfejsu",languageChangeHint:"Zmiana jzyka odwiey stron",editHistoryAdminTitle:"Administracja Historii Edycji",authenticateToAccessEditHistory:"Zaloguj si, aby uzyska dostp do panelu administracji historii edycji",loggedInAs:"Zalogowany jako",logout:"Wyloguj",totalEdits:"czna liczba edycji",active:"Aktywne",last24h:"Ostatnie 24h",filters:"Filtry",editor:"Edytor",showRolledBack:"Poka cofnite edycje",edits:"edycji",noEditsFound:"Nie znaleziono edycji",before:"Przed",after:"Po",revertedAt:"Cofnite o",reason:"Powd",metadata:"Metadane",rollback:"Cofnij",editRolledBackSuccessfully:"Edycja zostaa pomylnie cofnita",previousContentRestored:"Poprzednia zawarto zostaa przywrcona",rollbackRecorded:"Cofnicie zostao zarejestrowane, ale nie zastosowane",allEditors:"Wszyscy edytorzy",allTypes:"Wszystkie typy",allTargets:"Wszystkie cele",searchContent:"Szukaj zawartoci...",uploadAudioAndManageVersions:"Przelij audio i zarzdzaj wersjami jzykowymi",supportedAudioFormatsDescription:"Obsugiwane pliki audio: MP3, WAV, M4A, AAC, OGG, FLAC",waitForCompletion:"Poczekaj na zakoczenie biecego procesu",errorLoadingEpisodes:"Bd adowania odcinkw",errorDeletingQuestions:"Error deleting old questions: {errorMessage}",errorDeletingTranscripts:"Error deleting old transcripts: {errorMessage}",errorDeletingEpisodeDB:"Error deleting episode from database: {errorMessage}",episodeDeletedTitle:"Episode Deleted",episodeDeletedSuccess:"Episode '{episodeTitle}' was successfully deleted.",confirmDeleteTitle:"Confirm Deletion",confirmDeleteEpisodeMessage:"Are you sure you want to delete the episode '{episodeTitle}'? This will remove its audio, transcriptions, and questions for all languages.",actionIrreversible:"This action is irreversible.",deleting:"Deleting...",deleteConfirm:"Yes, Delete",fileDeletedFromR2Title:"File Deleted from Storage",fileDeletedFromR2Desc:"File {fileName} was successfully deleted from cloud storage.",errorDeletingR2FilePartial:"Could not delete file {fileName} from R2 storage: {errorMessage}. Database entries were still removed.",searchSpeakerPlaceholder:"Search speaker...",noSpeakerFound:"No speaker found.",or:"OR",enterNewSpeakerName:"Enter New Speaker Name",assignNewSpeakerName:"Assign as New Speaker",newSpeakerNamePlaceholder:"E.g., Maria, John Doe",assignAsNewSpeaker:"Assign as new speaker",saveSpeakerAssignment:"Save Assignment",speakerAssignedTitle:"Speaker Assigned",speakerAssignedDesc:"Speaker {newSpeaker} has been assigned.",errorSavingSpeakerAssignment:"Error saving speaker assignment.",noAssemblyIdInDB:"El ID de transcripcin de AssemblyAI no se encontr en la base de datos para este episodio e idioma.",transcriptionExistsTitle:"La transcripcin existe",transcriptionExistsDesc:"La transcripcin para el episodio {episode} ya existe y est completa.",warning:"Advertencia",loginToViewEditHistory:"Zaloguj si, aby zobaczy i zarzdza histori edycji",loginAsEditor:"Zaloguj jako Edytor",noEditsYet:"Brak edycji",activeEdits:"Aktywne Edycje",undo:"Cofnij",confirmRollback:"Czy na pewno chcesz cofn t edycj?\n\nTo przywrci poprzedni zawarto.",editRolledBack:"Edycja cofnita",contentRestored:"Twoja poprzednia zawarto zostaa przywrcona",rollbackRecordedDesc:"Cofnicie zostao zapisane, ale przywrcenie zawartoci wymaga rcznej interwencji",authenticate:"Uwierzytelnij",editorAuthentication:"Uwierzytelnianie Edytora",editorAuthDescription:"Wprowad swj email i imi, aby uwierzytelni si jako edytor. Dozwolone s tylko znaki aciskie.",email:"Email",emailPlaceholder:"twoj.email@przyklad.pl",emailLatinOnly:"Email musi zawiera tylko znaki aciskie",name:"Imi",namePlaceholder:"Jan Kowalski",nameLatinOnly:"Imi musi zawiera tylko znaki aciskie, spacje i mylniki",loginFailed:"Logowanie nie powiodo si",authenticating:"Uwierzytelnianie...",translateQuestionsToAllLanguages:"Przetumacz pytania na wszystkie jzyki",questionsTranslatedFromRussian:"Pytania przetumaczone z rosyjskiego",noRussianQuestionsToTranslate:"Brak rosyjskich pyta do tumaczenia",translateQuestionsButton:"Przetumacz pytania",translateQuestionsFrom:"Translate questions from {language}",skipBackward10Tooltip:"Skip backward 10 seconds",pauseTooltip:"Pause",playTooltip:"Play",skipForward10Tooltip:"Skip forward 10 seconds",exitReadingMode:"Exit Reading Mode",exitReadingModeTooltip:"Return to normal player view",loadingAudio:"Loading audio...",success:"Success",downloadError:"Download Error",tapToUnmuteAndPlay:"Tap to unmute and play",noAudioSource:"No audio source available",episodePublishedTitle:"Episode Published",episodePublishErrorTitle:"Publish Error",episodeFromCache:"Loaded from cache",episodeLoadedOffline:"Episode loaded offline",invalidEpisodeData:"Invalid episode data",errorLoadingEpisode:"Error loading episode",transcriptSaved:"Transcript saved",transcriptSavedSuccessfully:"Transcript saved successfully",saveError:"Save Error",questionsSaved:"Questions saved",questionsSavedSuccessfully:"Questions saved successfully",refreshError:"Refresh Error",failedToRefreshData:"Failed to refresh data",errorMergingSegment:"Error merging segment",cannotMergeFirstSegment:"Cannot merge the first segment",errorAddingSegment:"Error adding segment",invalidTimeRange:"Invalid time range",segmentOverlaps:"Segment overlaps with existing segments",segmentAddedTitle:"Segment Added",segmentAddedDesc:"New segment has been added successfully",finalizingTranscriptData:"Finalizing transcript data...",errorFetchingTranscript:"Error fetching transcript",errorUpdatingSegment:"Error updating segment",errorSimplifyingTextOpenAI:"Error simplifying text",settingsSaved:"Settings saved",offlineSettingsSaved:"Offline settings saved successfully",syncComplete:"Sync complete",manualSyncComplete:"Manual sync completed successfully",cacheCleared:"Cache cleared",offlineCacheCleared:"Offline cache cleared successfully",clearCacheError:"Clear Cache Error",back:"Back",offlineSettingsDescription:"Configure offline functionality and data synchronization",syncStatus:"Sync Status",storageUsageDescription:"Monitor and manage your offline storage usage",dataCache:"Data Cache",transcripts:"Transcripts",loadingStats:"Loading stats...",cacheSettingsDescription:"Configure cache sizes and behavior",autoSyncDescription:"Automatically sync data when online",maxAudioCache:"Max Audio Cache",maxAudioCacheDescription:"Maximum audio files to cache offline (MB)",maxDataCache:"Max Data Cache",maxDataCacheDescription:"Maximum data to cache offline (MB)",syncInterval:"Sync Interval",syncIntervalDescription:"How often to sync data when online (minutes)",autoCleanup:"Auto Cleanup",autoCleanupDescription:"Automatically clean up old cached data",saveSettings:"Save Settings",syncQueueDescription:"Manage pending synchronization tasks",syncQueueEmpty:"Sync queue is empty",manualSync:"Manual Sync",refreshStats:"Refresh Stats",analyticsTotalUsers:"Total Users",analyticsTotalSessions:"Total Sessions",analyticsTotalPageViews:"Page Views",analyticsAvgSessionDuration:"Avg Session Duration",analyticsVsPreviousPeriod:"vs previous period",analyticsBehaviorMetrics:"Behavior Metrics",analyticsNoData:"No data available",analyticsBounceRate:"Bounce Rate",analyticsBounceRateDesc:"Percentage of single-page visits",analyticsAvgSessionDurationDesc:"Average time on site",analyticsPagesPerSession:"Pages Per Session",analyticsPagesPerSessionDesc:"Average number of pages viewed",analyticsSearches:"Searches",analyticsFilters:"Filters",analyticsShares:"Shares",analyticsDownloads:"Downloads",analyticsUserInteractions:"User Interactions",analyticsEngagementScore:"Engagement Score",analyticsEngagementScoreDesc:"Overall user activity indicator",analyticsDevices:"Devices",analyticsDeviceTypes:"Device Types",analyticsBrowsers:"Browsers",analyticsGeography:"Geography",analyticsUsers:"Users",analyticsSessions:"Sessions",analyticsListeningStats:"Listening Statistics",analyticsAvgListeningTime:"Avg Listening Time",analyticsCompletionRate:"Completion Rate",analyticsTotalPlays:"Total Plays",analyticsTotalCompletions:"Total Completions",analyticsMostActiveHours:"Most Active Hours",analyticsPopularEpisodes:"Popular Meditations",analyticsViews:"Views",analyticsAvgDuration:"Avg Duration",analyticsTrafficSources:"Traffic Sources",analyticsVisitorsOverTime:"Visitors Over Time",analyticsTitle:"Analytics",analyticsError:"Analytics Loading Error",analyticsErrorDesc:"Failed to load analytics data. Please try refreshing the page.",analyticsExportReport:"Export Report",analyticsExportReportDesc:"Export feature coming soon",analyticsSubtitle:"Visit and listening statistics",analyticsLast24Hours:"Last 24 Hours",analyticsLast7Days:"Last 7 Days",analyticsLast30Days:"Last 30 Days",analyticsExport:"Export",analyticsOverview:"Overview",analyticsAudience:"Audience",analyticsContent:"Content",analyticsBehavior:"Behavior",analyticsFooterNote:"Data updates every 5 minutes. Use the refresh button for the latest information.",audioTrackMixed:"Razem",audioTrackRussian:"Maria",audioTrackSpanish:"Pepe",recognizeText:"Rozpoznaj tekst",recognizeQuestions:"Rozpoznaj pytania",recognizingText:"Rozpoznawanie tekstu...",recognizingQuestions:"Rozpoznawanie pyta...",transcribing:"Transkrybuj...",autoRecognizeQuestions:"Automatyczne rozpoznawanie pyta przez AI",autoRecognizeQuestionsDesc:"Automatycznie generuj pytania podczas adowania odcinka",blog_title:"Blog",blog_subtitle:"Odkryj gbie wewntrznego wiata poprzez uniwersalne przemwienia.",search_articles_placeholder:"Szukaj artykuw...",all_categories:"Wszystkie",read_article:"Czytaj",back_to_articles:"Powrt do artykuw",watch_on_youtube:"Obejrzyj na YouTube",video_version:"Wersja wideo",reading_time_minutes_one:"{count} minuta czytania",reading_time_minutes_few:"{count} minuty czytania",reading_time_minutes_many:"{count} minut czytania",published_on:"Opublikowano"}},iy=(e,t,r={})=>{var n;let i=t||"en";ny[i]||(i="en");let s=(null==(n=ny[i])?void 0:n[e])||ny.en[e];return void 0===s&&(s=e),r&&"string"==typeof s&&Object.keys(r).forEach((e=>{s=s.replace(`{${e}}`,r[e])})),s},sy=(e,t,r,n={})=>{var i,s;let a,o=t||"en";ny[o]||(o="en"),a="ru"===o?1===r?`${e}_one`:r>1&&r<5?`${e}_few`:`${e}_many`:"pl"===o?1===r?`${e}_one`:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?`${e}_few`:`${e}_many`:1===r?`${e}_one`:`${e}_many`;let l=(null==(i=ny[o])?void 0:i[a])||ny.en[a];return void 0===l&&(l=(null==(s=ny[o])?void 0:s[e])||ny.en[e]||e),n&&"string"==typeof l&&Object.keys(n).forEach((e=>{l=l.replace(`{${e}}`,n[e])})),"string"==typeof l&&(l=l.replace("{count}",String(r))),l},ay=({currentLanguage:e})=>{const{currentEpisode:t,isPlaying:r,togglePlay:n,closeGlobalPlayer:i,isGlobalPlayerVisible:s,currentTime:a,duration:o}=Ym(),l=rh(),c=eh(),u=V.useMemo((()=>{if(!t)return"";let r=null;if(t.translations&&Array.isArray(t.translations)){const n=t.translations.find((t=>t.lang===e));n&&n.title&&(r=n.title)}if(!r&&t.title){t.title.match(/^(Meditacin|Meditation|)\s+\d{2}\.\d{2}\.\d{4}/i)||(r=t.title)}if(!r){const n=iy("meditationTitlePrefix",e);let i="";t.date&&(i=km(t.date,e)),r=i?`${n} ${i}`:n}return r||t.slug}),[t,e]);if(!s||!t)return null;if(c.pathname.endsWith(`/${t.slug}`))return null;const d=o?a/o*100:0;return Z.jsxs("div",{className:"w-full bg-slate-900/95 backdrop-blur-md border-t border-white/10 shadow-inner transition-all duration-300 animate-in slide-in-from-top-2",children:[Z.jsx("div",{className:"relative w-full h-1 bg-white/10",children:Z.jsx("div",{className:"absolute top-0 left-0 h-full bg-purple-500 transition-all duration-300 ease-linear",style:{width:`${d}%`}})}),Z.jsxs("div",{className:"px-4 py-2 flex items-center justify-between gap-4",children:[Z.jsxs("div",{className:"flex items-center gap-3 flex-1 cursor-pointer min-w-0 group",onClick:()=>{l(`/${e}/${t.slug}`)},children:[t.image&&Z.jsx("img",{src:t.image,alt:u,className:"w-10 h-10 rounded object-cover ring-1 ring-white/10 group-hover:ring-purple-500/50 transition-all"}),Z.jsxs("div",{className:"min-w-0 overflow-hidden",children:[Z.jsx("h3",{className:"text-sm font-medium text-white truncate group-hover:text-purple-400 transition-colors",children:u}),Z.jsx("p",{className:"text-xs text-slate-400 truncate",children:t.author||"Dos Mundos"})]})]}),Z.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[Z.jsx("button",{onClick:e=>{e.stopPropagation(),n()},className:"w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center text-white transition-all active:scale-95",children:r?Z.jsx(ng,{size:20,fill:"currentColor"}):Z.jsx(lg,{size:20,fill:"currentColor",className:"ml-0.5"})}),Z.jsx("button",{onClick:e=>{e.stopPropagation(),i()},className:"p-2 rounded-full hover:bg-white/10 text-slate-400 hover:text-white transition-all",children:Z.jsx(Ng,{size:20})})]})]})]})};var oy=function(e,t){return(oy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function ly(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}oy(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var cy=function(){return cy=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},cy.apply(this,arguments)};function uy(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function dy(e,t,r,n){var i,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(s<3?i(a):s>3?i(t,r,a):i(t,r))||a);return s>3&&a&&Object.defineProperty(t,r,a),a}function hy(e,t){return function(r,n){t(r,n,e)}}function fy(e,t,r,n,i,s){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,l=n.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h=!1,f=r.length-1;f>=0;f--){var p={};for(var g in n)p[g]="access"===g?{}:n[g];for(var g in n.access)p.access[g]=n.access[g];p.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(e||null))};var m=(0,r[f])("accessor"===l?{get:d.get,set:d.set}:d[c],p);if("accessor"===l){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(o=a(m.get))&&(d.get=o),(o=a(m.set))&&(d.set=o),(o=a(m.init))&&i.unshift(o)}else(o=a(m))&&("field"===l?i.unshift(o):d[c]=o)}u&&Object.defineProperty(u,n.name,d),h=!0}function py(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function gy(e){return"symbol"==typeof e?e:"".concat(e)}function my(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function yy(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function vy(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{l(n.next(e))}catch(Jce){s(Jce)}}function o(e){try{l(n.throw(e))}catch(Jce){s(Jce)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))}function by(e,t){var r,n,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(Jce){o=[6,Jce],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var wy=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function xy(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||wy(t,e,r)}function Sy(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ey(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a}function Ty(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ey(arguments[t]));return e}function ky(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n}function Ay(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function _y(e){return this instanceof _y?(this.v=e,this):new _y(e)}function Cy(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",(function(e){return function(t){return Promise.resolve(t).then(e,c)}})),n[Symbol.asyncIterator]=function(){return this},n;function a(e,t){i[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||o(e,t)}))},t&&(n[e]=t(n[e])))}function o(e,t){try{(r=i[e](t)).value instanceof _y?Promise.resolve(r.value.v).then(l,c):u(s[0][2],r)}catch(Jce){u(s[0][3],Jce)}var r}function l(e){o("next",e)}function c(e){o("throw",e)}function u(e,t){e(t),s.shift(),s.length&&o(s[0][0],s[0][1])}}function Py(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:_y(e[n](t)),done:!1}:i?i(t):t}:i}}function Dy(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=Sy(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,i,(t=e[r](t)).done,t.value)}))}}}function Ry(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Iy=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Oy=function(e){return(Oy=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)};function Ny(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=Oy(e),n=0;n<r.length;n++)"default"!==r[n]&&wy(t,e,r[n]);return Iy(t,e),t}function jy(e){return e&&e.__esModule?e:{default:e}}function Ly(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function My(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}function Fy(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function Uy(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(i=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(Jce){return Promise.reject(Jce)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var By="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function $y(e){function t(t){e.error=e.hasError?new By(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,n=0;return function i(){for(;r=e.stack.pop();)try{if(!r.async&&1===n)return n=0,e.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(i,(function(e){return t(e),i()}))}else n|=1}catch(Jce){t(Jce)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function zy(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,(function(e,r,n,i,s){return r?t?".jsx":".js":!n||i&&s?n+i+"."+s.toLowerCase()+"js":e})):e}const qy={__extends:ly,__assign:cy,__rest:uy,__decorate:dy,__param:hy,__esDecorate:fy,__runInitializers:py,__propKey:gy,__setFunctionName:my,__metadata:yy,__awaiter:vy,__generator:by,__createBinding:wy,__exportStar:xy,__values:Sy,__read:Ey,__spread:Ty,__spreadArrays:ky,__spreadArray:Ay,__await:_y,__asyncGenerator:Cy,__asyncDelegator:Py,__asyncValues:Dy,__makeTemplateObject:Ry,__importStar:Ny,__importDefault:jy,__classPrivateFieldGet:Ly,__classPrivateFieldSet:My,__classPrivateFieldIn:Fy,__addDisposableResource:Uy,__disposeResources:$y,__rewriteRelativeImportExtension:zy},Vy=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Uy,get __assign(){return cy},__asyncDelegator:Py,__asyncGenerator:Cy,__asyncValues:Dy,__await:_y,__awaiter:vy,__classPrivateFieldGet:Ly,__classPrivateFieldIn:Fy,__classPrivateFieldSet:My,__createBinding:wy,__decorate:dy,__disposeResources:$y,__esDecorate:fy,__exportStar:xy,__extends:ly,__generator:by,__importDefault:jy,__importStar:Ny,__makeTemplateObject:Ry,__metadata:yy,__param:hy,__propKey:gy,__read:Ey,__rest:uy,__rewriteRelativeImportExtension:zy,__runInitializers:py,__setFunctionName:my,__spread:Ty,__spreadArray:Ay,__spreadArrays:ky,__values:Sy,default:qy},Symbol.toStringTag,{value:"Module"}));class Ky extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Hy extends Ky{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Gy extends Ky{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Wy extends Ky{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qy,Yy;(Yy=Qy||(Qy={})).Any="any",Yy.ApNortheast1="ap-northeast-1",Yy.ApNortheast2="ap-northeast-2",Yy.ApSouth1="ap-south-1",Yy.ApSoutheast1="ap-southeast-1",Yy.ApSoutheast2="ap-southeast-2",Yy.CaCentral1="ca-central-1",Yy.EuCentral1="eu-central-1",Yy.EuWest1="eu-west-1",Yy.EuWest2="eu-west-2",Yy.EuWest3="eu-west-3",Yy.SaEast1="sa-east-1",Yy.UsEast1="us-east-1",Yy.UsWest1="us-west-1",Yy.UsWest2="us-west-2";class Xy{constructor(e,{headers:t={},customFetch:r,region:n=Qy.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return vy(this,arguments,void 0,(function*(e,t={}){var r;let n,i;try{const{headers:s,method:a,body:o,signal:l,timeout:c}=t;let u={},{region:d}=t;d||(d=this.region);const h=new URL(`${this.url}/${e}`);let f;d&&"any"!==d&&(u["x-region"]=d,h.searchParams.set("forceFunctionRegion",d)),o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?"undefined"!=typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",f=o):"string"==typeof o?(u["Content-Type"]="text/plain",f=o):"undefined"!=typeof FormData&&o instanceof FormData?f=o:(u["Content-Type"]="application/json",f=JSON.stringify(o)):f=o;let p=l;c&&(i=new AbortController,n=setTimeout((()=>i.abort()),c),l?(p=i.signal,l.addEventListener("abort",(()=>i.abort()))):p=i.signal);const g=yield this.fetch(h.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:f,signal:p}).catch((e=>{throw new Hy(e)})),m=g.headers.get("x-relay-error");if(m&&"true"===m)throw new Gy(g);if(!g.ok)throw new Wy(g);let y,v=(null!==(r=g.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return y="application/json"===v?yield g.json():"application/octet-stream"===v||"application/pdf"===v?yield g.blob():"text/event-stream"===v?g:"multipart/form-data"===v?yield g.formData():yield g.text(),{data:y,error:null,response:g}}catch(s){return{data:null,error:s,response:s instanceof Wy||s instanceof Gy?s.context:void 0}}finally{n&&clearTimeout(n)}}))}}var Jy={};const Zy=i(Vy);var ev,tv,rv,nv,iv,sv,av={},ov={},lv={},cv={},uv={},dv={};function hv(){if(ev)return dv;ev=1,Object.defineProperty(dv,"__esModule",{value:!0});class e extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return dv.default=e,dv}function fv(){if(tv)return uv;tv=1,Object.defineProperty(uv,"__esModule",{value:!0});const e=Zy.__importDefault(hv());return uv.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(t,r){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async t=>{var r,n,i,s;let a=null,o=null,l=null,c=t.status,u=t.statusText;if(t.ok){if("HEAD"!==this.method){const e=await t.text();""===e||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(r=this.headers.get("Accept"))||void 0===r?void 0:r.includes("application/vnd.pgrst.plan+text"))?e:JSON.parse(e))}const e=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),s=null===(i=t.headers.get("content-range"))||void 0===i?void 0:i.split("/");e&&s&&s.length>1&&(l=parseInt(s[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{const r=await t.text();try{a=JSON.parse(r),Array.isArray(a)&&404===t.status&&(o=[],a=null,c=200,u="OK")}catch(d){404===t.status&&""===r?(c=204,u="No Content"):a={message:r}}if(a&&this.isMaybeSingle&&(null===(s=null==a?void 0:a.details)||void 0===s?void 0:s.includes("0 rows"))&&(a=null,c=200,u="OK"),a&&this.shouldThrowOnError)throw new e.default(a)}return{error:a,data:o,count:l,status:c,statusText:u}}));return this.shouldThrowOnError||(n=n.catch((e=>{var t,r,n;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:""}`,hint:"",code:`${null!==(n=null==e?void 0:e.code)&&void 0!==n?n:""}`},data:null,count:null,status:0,statusText:""}}))),n.then(t,r)}returns(){return this}overrideTypes(){return this}},uv}function pv(){if(rv)return cv;rv=1,Object.defineProperty(cv,"__esModule",{value:!0});const e=Zy.__importDefault(fv());class t extends e.default{select(e){let t=!1;const r=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const s=i?`${i}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const i=void 0===n?"offset":`${n}.offset`,s=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:s="text"}={}){var a;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.get("Accept"))&&void 0!==a?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}return cv.default=t,cv}function gv(){if(nv)return lv;nv=1,Object.defineProperty(lv,"__esModule",{value:!0});const e=Zy.__importDefault(pv()),t=new RegExp("[,()]");class r extends e.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,r){const n=Array.from(new Set(r)).map((e=>"string"==typeof e&&t.test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let i="";"plain"===n?i="pl":"phrase"===n?i="ph":"websearch"===n&&(i="w");const s=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach((([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)})),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}return lv.default=r,lv}function mv(){if(iv)return ov;iv=1,Object.defineProperty(ov,"__esModule",{value:!0});const e=Zy.__importDefault(gv());return ov.default=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(t,r){const{head:n=!1,count:i}=null!=r?r:{},s=n?"HEAD":"GET";let a=!1;const o=(null!=t?t:"*").split("").map((e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e))).join("");return this.url.searchParams.set("select",o),i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var i;if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(e.length>0){const t=[...new Set(e)].map((e=>`"${e}"`));this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:s=!0}={}){var a;if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),void 0!==r&&this.url.searchParams.set("on_conflict",r),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(e.length>0){const t=[...new Set(e)].map((e=>`"${e}"`));this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}update(t,{count:r}={}){var n;return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete({count:t}={}){var r;return t&&this.headers.append("Prefer",`count=${t}`),new e.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}},ov}Object.defineProperty(Jy,"__esModule",{value:!0});var yv=Jy.PostgrestError=Jy.PostgrestBuilder=Jy.PostgrestTransformBuilder=Jy.PostgrestFilterBuilder=Jy.PostgrestQueryBuilder=Jy.PostgrestClient=void 0;const vv=Zy,bv=vv.__importDefault(function(){if(sv)return av;sv=1,Object.defineProperty(av,"__esModule",{value:!0});const e=Zy,t=e.__importDefault(mv()),r=e.__importDefault(gv());class n{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=n}from(e){const r=new URL(`${this.url}/${e}`);return new t.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new n(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:i=!1,count:s}={}){var a;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||i?(o=n?"HEAD":"GET",Object.entries(t).filter((([e,t])=>void 0!==t)).map((([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`])).forEach((([e,t])=>{l.searchParams.append(e,t)}))):(o="POST",c=t);const u=new Headers(this.headers);return s&&u.set("Prefer",`count=${s}`),new r.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}}return av.default=n,av}());var wv=Jy.PostgrestClient=bv.default;const xv=vv.__importDefault(mv());var Sv=Jy.PostgrestQueryBuilder=xv.default;const Ev=vv.__importDefault(gv());var Tv=Jy.PostgrestFilterBuilder=Ev.default;const kv=vv.__importDefault(pv());var Av=Jy.PostgrestTransformBuilder=kv.default;const _v=vv.__importDefault(fv());var Cv=Jy.PostgrestBuilder=_v.default;const Pv=vv.__importDefault(hv());yv=Jy.PostgrestError=Pv.default;var Dv=Jy.default={PostgrestClient:bv.default,PostgrestQueryBuilder:xv.default,PostgrestFilterBuilder:Ev.default,PostgrestTransformBuilder:kv.default,PostgrestBuilder:_v.default,PostgrestError:Pv.default};const Rv=r({__proto__:null,get PostgrestBuilder(){return Cv},get PostgrestClient(){return wv},get PostgrestError(){return yv},get PostgrestFilterBuilder(){return Tv},get PostgrestQueryBuilder(){return Sv},get PostgrestTransformBuilder(){return Av},default:Dv},[Jy]),{PostgrestClient:Iv,PostgrestQueryBuilder:Ov,PostgrestFilterBuilder:Nv,PostgrestTransformBuilder:jv,PostgrestBuilder:Lv,PostgrestError:Mv}=Dv||Rv;class Fv{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){const e=process.versions;if(e&&e.node){const t=e.node,r=parseInt(t.replace(/^v/,"").split(".")[0]);return r>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const Uv="1.0.0",Bv=Uv,$v=1e4;var zv,qv,Vv,Kv,Hv,Gv,Wv,Qv,Yv,Xv,Jv;(qv=zv||(zv={}))[qv.connecting=0]="connecting",qv[qv.open=1]="open",qv[qv.closing=2]="closing",qv[qv.closed=3]="closed",(Kv=Vv||(Vv={})).closed="closed",Kv.errored="errored",Kv.joined="joined",Kv.joining="joining",Kv.leaving="leaving",(Gv=Hv||(Hv={})).close="phx_close",Gv.error="phx_error",Gv.join="phx_join",Gv.reply="phx_reply",Gv.leave="phx_leave",Gv.access_token="access_token",(Wv||(Wv={})).websocket="websocket",(Yv=Qv||(Qv={})).Connecting="connecting",Yv.Open="open",Yv.Closing="closing",Yv.Closed="closed";class Zv{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,t){if(this._isArrayBuffer(e.payload))return t(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&"string"==typeof e.payload.event)return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodePush(e){const{join_ref:t,ref:r,event:n,topic:i,payload:s}=e,a=this.META_LENGTH+t.length+r.length+i.length+n.length,o=new ArrayBuffer(this.HEADER_LENGTH+a);let l=new DataView(o),c=0;l.setUint8(c++,this.KINDS.push),l.setUint8(c++,t.length),l.setUint8(c++,r.length),l.setUint8(c++,i.length),l.setUint8(c++,n.length),Array.from(t,(e=>l.setUint8(c++,e.charCodeAt(0)))),Array.from(r,(e=>l.setUint8(c++,e.charCodeAt(0)))),Array.from(i,(e=>l.setUint8(c++,e.charCodeAt(0)))),Array.from(n,(e=>l.setUint8(c++,e.charCodeAt(0))));var u=new Uint8Array(o.byteLength+s.byteLength);return u.set(new Uint8Array(o),0),u.set(new Uint8Array(s),o.byteLength),u.buffer}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null===(t=e.payload)||void 0===t?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const{join_ref:n,ref:i,topic:s}=e,a=e.payload.event,o=null!==(r=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==r?r:new ArrayBuffer(0),l=this.USER_BROADCAST_PUSH_META_LENGTH+n.length+i.length+s.length+a.length,c=new ArrayBuffer(this.HEADER_LENGTH+l);let u=new DataView(c),d=0;u.setUint8(d++,this.KINDS.userBroadcastPush),u.setUint8(d++,n.length),u.setUint8(d++,i.length),u.setUint8(d++,s.length),u.setUint8(d++,a.length),u.setUint8(d++,this.BINARY_ENCODING),Array.from(n,(e=>u.setUint8(d++,e.charCodeAt(0)))),Array.from(i,(e=>u.setUint8(d++,e.charCodeAt(0)))),Array.from(s,(e=>u.setUint8(d++,e.charCodeAt(0)))),Array.from(a,(e=>u.setUint8(d++,e.charCodeAt(0))));var h=new Uint8Array(c.byteLength+o.byteLength);return h.set(new Uint8Array(c),0),h.set(new Uint8Array(o),c.byteLength),h.buffer}_encodeJsonUserBroadcastPush(e){var t,r;const{join_ref:n,ref:i,topic:s}=e,a=e.payload.event,o=null!==(r=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==r?r:{},l=(new TextEncoder).encode(JSON.stringify(o)).buffer,c=this.USER_BROADCAST_PUSH_META_LENGTH+n.length+i.length+s.length+a.length,u=new ArrayBuffer(this.HEADER_LENGTH+c);let d=new DataView(u),h=0;d.setUint8(h++,this.KINDS.userBroadcastPush),d.setUint8(h++,n.length),d.setUint8(h++,i.length),d.setUint8(h++,s.length),d.setUint8(h++,a.length),d.setUint8(h++,this.JSON_ENCODING),Array.from(n,(e=>d.setUint8(h++,e.charCodeAt(0)))),Array.from(i,(e=>d.setUint8(h++,e.charCodeAt(0)))),Array.from(s,(e=>d.setUint8(h++,e.charCodeAt(0)))),Array.from(a,(e=>d.setUint8(h++,e.charCodeAt(0))));var f=new Uint8Array(u.byteLength+l.byteLength);return f.set(new Uint8Array(u),0),f.set(new Uint8Array(l),u.byteLength),f.buffer}decode(e,t){if(this._isArrayBuffer(e)){return t(this._binaryDecode(e))}if("string"==typeof e){const r=JSON.parse(e),[n,i,s,a,o]=r;return t({join_ref:n,ref:i,topic:s,event:a,payload:o})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),n=new TextDecoder;switch(r){case this.KINDS.push:return this._decodePush(e,t,n);case this.KINDS.reply:return this._decodeReply(e,t,n);case this.KINDS.broadcast:return this._decodeBroadcast(e,t,n);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,n)}}_decodePush(e,t,r){const n=t.getUint8(1),i=t.getUint8(2),s=t.getUint8(3);let a=this.HEADER_LENGTH+this.META_LENGTH-1;const o=r.decode(e.slice(a,a+n));a+=n;const l=r.decode(e.slice(a,a+i));a+=i;const c=r.decode(e.slice(a,a+s));a+=s;return{join_ref:o,ref:null,topic:l,event:c,payload:JSON.parse(r.decode(e.slice(a,e.byteLength)))}}_decodeReply(e,t,r){const n=t.getUint8(1),i=t.getUint8(2),s=t.getUint8(3),a=t.getUint8(4);let o=this.HEADER_LENGTH+this.META_LENGTH;const l=r.decode(e.slice(o,o+n));o+=n;const c=r.decode(e.slice(o,o+i));o+=i;const u=r.decode(e.slice(o,o+s));o+=s;const d=r.decode(e.slice(o,o+a));o+=a;const h={status:d,response:JSON.parse(r.decode(e.slice(o,e.byteLength)))};return{join_ref:l,ref:c,topic:u,event:Hv.reply,payload:h}}_decodeBroadcast(e,t,r){const n=t.getUint8(1),i=t.getUint8(2);let s=this.HEADER_LENGTH+2;const a=r.decode(e.slice(s,s+n));s+=n;const o=r.decode(e.slice(s,s+i));s+=i;return{join_ref:null,ref:null,topic:a,event:o,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}_decodeUserBroadcast(e,t,r){const n=t.getUint8(1),i=t.getUint8(2),s=t.getUint8(3),a=t.getUint8(4);let o=this.HEADER_LENGTH+4;const l=r.decode(e.slice(o,o+n));o+=n;const c=r.decode(e.slice(o,o+i));o+=i;const u=r.decode(e.slice(o,o+s));o+=s;const d=e.slice(o,e.byteLength),h=a===this.JSON_ENCODING?JSON.parse(r.decode(d)):d,f={type:this.BROADCAST,event:c,payload:h};return s>0&&(f.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST,payload:f}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)}}class eb{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}(Jv=Xv||(Xv={})).abstime="abstime",Jv.bool="bool",Jv.date="date",Jv.daterange="daterange",Jv.float4="float4",Jv.float8="float8",Jv.int2="int2",Jv.int4="int4",Jv.int4range="int4range",Jv.int8="int8",Jv.int8range="int8range",Jv.json="json",Jv.jsonb="jsonb",Jv.money="money",Jv.numeric="numeric",Jv.oid="oid",Jv.reltime="reltime",Jv.text="text",Jv.time="time",Jv.timestamp="timestamp",Jv.timestamptz="timestamptz",Jv.timetz="timetz",Jv.tsrange="tsrange",Jv.tstzrange="tstzrange";const tb=(e,t,r={})=>{var n;const i=null!==(n=r.skipTypes)&&void 0!==n?n:[];return t?Object.keys(t).reduce(((r,n)=>(r[n]=rb(n,e,t,i),r)),{}):{}},rb=(e,t,r,n)=>{const i=t.find((t=>t.name===e)),s=null==i?void 0:i.type,a=r[e];return s&&!n.includes(s)?nb(s,a):ib(a)},nb=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return lb(t,r)}switch(e){case Xv.bool:return sb(t);case Xv.float4:case Xv.float8:case Xv.int2:case Xv.int4:case Xv.int8:case Xv.numeric:case Xv.oid:return ab(t);case Xv.json:case Xv.jsonb:return ob(t);case Xv.timestamp:return cb(t);case Xv.abstime:case Xv.date:case Xv.daterange:case Xv.int4range:case Xv.int8range:case Xv.money:case Xv.reltime:case Xv.text:case Xv.time:case Xv.timestamptz:case Xv.timetz:case Xv.tsrange:case Xv.tstzrange:default:return ib(t)}},ib=e=>e,sb=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ab=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ob=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},lb=(e,t)=>{if("string"!=typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const s=e.slice(1,r);try{n=JSON.parse("["+s+"]")}catch(i){n=s?s.split(","):[]}return n.map((e=>nb(t,e)))}return e},cb=e=>"string"==typeof e?e.replace(" ","T"):e,ub=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class db{constructor(e,t,r={},n=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var hb,fb,pb,gb,mb,yb,vb,bb;(fb=hb||(hb={})).SYNC="sync",fb.JOIN="join",fb.LEAVE="leave";class wb{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},(e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wb.syncState(this.state,e,t,r),this.pendingDiffs.forEach((e=>{this.state=wb.syncDiff(this.state,e,t,r)})),this.pendingDiffs=[],n()})),this.channel._on(r.diff,{},(e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=wb.syncDiff(this.state,e,t,r),n())})),this.onJoin(((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})})),this.onLeave(((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,r,n){const i=this.cloneDeep(e),s=this.transformState(t),a={},o={};return this.map(i,((e,t)=>{s[e]||(o[e]=t)})),this.map(s,((e,t)=>{const r=i[e];if(r){const n=t.map((e=>e.presence_ref)),i=r.map((e=>e.presence_ref)),s=t.filter((e=>i.indexOf(e.presence_ref)<0)),l=r.filter((e=>n.indexOf(e.presence_ref)<0));s.length>0&&(a[e]=s),l.length>0&&(o[e]=l)}else a[e]=t})),this.syncDiff(i,{joins:a,leaves:o},r,n)}static syncDiff(e,t,r,n){const{joins:i,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,((t,n)=>{var i;const s=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(n),s.length>0){const r=e[t].map((e=>e.presence_ref)),n=s.filter((e=>r.indexOf(e.presence_ref)<0));e[t].unshift(...n)}r(t,s,n)})),this.map(s,((t,r)=>{let i=e[t];if(!i)return;const s=r.map((e=>e.presence_ref));i=i.filter((e=>s.indexOf(e.presence_ref)<0)),e[t]=i,n(t,i,r),0===i.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((r=>t(r,e[r])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):n,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(gb=pb||(pb={})).ALL="*",gb.INSERT="INSERT",gb.UPDATE="UPDATE",gb.DELETE="DELETE",(yb=mb||(mb={})).BROADCAST="broadcast",yb.PRESENCE="presence",yb.POSTGRES_CHANGES="postgres_changes",yb.SYSTEM="system",(bb=vb||(vb={})).SUBSCRIBED="SUBSCRIBED",bb.TIMED_OUT="TIMED_OUT",bb.CLOSED="CLOSED",bb.CHANNEL_ERROR="CHANNEL_ERROR";class xb{constructor(e,t={config:{}},r){var n,i;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Vv.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new db(this,Hv.join,this.params,this.timeout),this.rejoinTimer=new eb((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=Vv.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vv.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Vv.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vv.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("error",(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Vv.errored,this.rejoinTimer.scheduleTimeout())})),this._on(Hv.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new wb(this),this.broadcastEndpointURL=ub(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(i=null===(n=this.params.config)||void 0===n?void 0:n.broadcast)||void 0===i?void 0:i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Vv.closed){const{config:{broadcast:s,presence:a,private:o}}=this.params,l=null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map((e=>e.filter)))&&void 0!==n?n:[],c=!!this.bindings[mb.PRESENCE]&&this.bindings[mb.PRESENCE].length>0||!0===(null===(i=this.params.config.presence)||void 0===i?void 0:i.enabled),u={},d={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError((t=>null==e?void 0:e(vb.CHANNEL_ERROR,t))),this._onClose((()=>null==e?void 0:e(vb.CLOSED))),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(async({postgres_changes:t})=>{var r;if(this.socket.setAuth(),void 0!==t){const n=this.bindings.postgres_changes,i=null!==(r=null==n?void 0:n.length)&&void 0!==r?r:0,s=[];for(let r=0;r<i;r++){const i=n[r],{filter:{event:a,schema:o,table:l,filter:c}}=i,u=t&&t[r];if(!u||u.event!==a||u.schema!==o||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=Vv.errored,void(null==e||e(vb.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},i),{id:u.id}))}return this.bindings.postgres_changes=s,void(e&&e(vb.SUBSCRIBED))}null==e||e(vb.SUBSCRIBED)})).receive("error",(t=>{this.state=Vv.errored,null==e||e(vb.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{null==e||e(vb.TIMED_OUT)}))}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Vv.joined&&e===mb.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then((()=>this.subscribe()))),this._on(e,t,r)}async httpSend(e,t,r={}){var n;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(null==t)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(n=r.timeout)&&void 0!==n?n:this.timeout);if(202===a.status)return{success:!0};let o=a.statusText;try{const e=await a.json();o=e.error||e.message||o}catch(l){}return Promise.reject(new Error(o))}async send(e,t={}){var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise((r=>{var n,i,s;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(i=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===i?void 0:i.broadcast)||void 0===s?void 0:s.ack)||r("ok"),a.receive("ok",(()=>r("ok"))),a.receive("error",(()=>r("error"))),a.receive("timeout",(()=>r("timed out")))}));{const{event:s,payload:a}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Vv.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Hv.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise((n=>{r=new db(this,Hv.leave,{},e),r.receive("ok",(()=>{t(),n("ok")})).receive("timeout",(()=>{t(),n("timed out")})).receive("error",(()=>{n("error")})),r.send(),this._canPush()||r.trigger("ok",{})})).finally((()=>{null==r||r.destroy()}))}teardown(){this.pushBuffer.forEach((e=>e.destroy())),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Vv.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const n=new AbortController,i=setTimeout((()=>n.abort()),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),s}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new db(this,e,t,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,i;const s=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:c}=Hv;if(r&&[a,o,l,c].indexOf(s)>=0&&r!==this._joinRef())return;let u=this._onMessage(s,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter((e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===s})).map((e=>e.callback(u,r))):null===(i=this.bindings[s])||void 0===i||i.filter((e=>{var r,n,i,a,o,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,a=null===(r=e.filter)||void 0===r?void 0:r.event;return s&&(null===(n=t.ids)||void 0===n?void 0:n.includes(s))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const r=null===(o=null===(a=null==e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===r||r===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s})).map((e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:r,commit_timestamp:n,type:i,errors:s}=e,a={schema:t,table:r,commit_timestamp:n,eventType:i,new:{},old:{},errors:s};u=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(u,r)}))}_isClosed(){return this.state===Vv.closed}_isJoined(){return this.state===Vv.joined}_isJoining(){return this.state===Vv.joining}_isLeaving(){return this.state===Vv.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter((e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&xb.isEqual(e.filter,t))}))),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Hv.close,{},e)}_onError(e){this._on(Hv.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vv.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=tb(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=tb(e.columns,e.old_record)),t}}const Sb=()=>{},Eb=25e3,Tb=10,kb=100,Ab=[1e3,2e3,5e3,1e4];class _b{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=$v,this.transport=null,this.heartbeatIntervalMs=Eb,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Sb,this.ref=0,this.reconnectTimer=null,this.vsn=Bv,this.logger=Sb,this.conn=null,this.sendBuffer=[],this.serializer=new Zv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),!(null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Wv.websocket}`,this.httpEndpoint=ub(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Fv.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout((()=>{this._setConnectionState("disconnected")}),100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(e?this.conn.close(e,null!=t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case zv.connecting:return Qv.Connecting;case zv.open:return Qv.Open;case zv.closing:return Qv.Closing;default:return Qv.Closed}}isConnected(){return this.connectionState()===Qv.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find((e=>e.topic===r));if(n)return n;{const r=new xb(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:n,ref:i}=e,s=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push",`${t} ${r} (${i})`,n),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(Jce){this.log("error","error in heartbeat callback",Jce)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout((()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()}),kb)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(Jce){this.log("error","error in heartbeat callback",Jce)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(Jce){this.log("error","error in heartbeat callback",Jce)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t.topic!==e.topic))}_onConnMessage(e){this.decode(e.data,(e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(Jce){this.log("error","error in heartbeat callback",Jce)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:n,ref:i}=e,s=i?`(${i})`:"",a=n.status||"";this.log("receive",`${a} ${t} ${r} ${s}`.trim(),n),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(r,n,i))),this._triggerStateCallbacks("message",e)}))}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===zv.open||this.conn.readyState===zv.connecting)try{this.conn.close()}catch(Jce){this.log("error","Error closing connection",Jce)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach((e=>e.teardown()))}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`);(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then((()=>{this.flushSendBuffer()})).catch((e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()})),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this.sendHeartbeat()),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach((e=>e._trigger(Hv.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach((e=>{const r={access_token:t,version:"realtime-js/2.81.1"};t&&e.updateJoinPayload(r),e.joinedOnce&&e._isJoined()&&e._push(Hv.access_token,{access_token:t})})))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch((t=>{this.log("error",`error setting auth in ${e}`,t)}))}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach((r=>{try{r(t)}catch(Jce){this.log("error",`error in ${e} callback`,Jce)}}))}catch(Jce){this.log("error",`error triggering ${e} callbacks`,Jce)}}_setupReconnectionTimer(){this.reconnectTimer=new eb((async()=>{setTimeout((async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),Tb)}),this.reconnectAfterMs)}_initializeOptions(e){var t,r,n,i,s,a,o,l,c,u,d,h;switch(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null==e?void 0:e.timeout)&&void 0!==r?r:$v,this.heartbeatIntervalMs=null!==(n=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==n?n:Eb,this.worker=null!==(i=null==e?void 0:e.worker)&&void 0!==i&&i,this.accessToken=null!==(s=null==e?void 0:e.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(a=null==e?void 0:e.heartbeatCallback)&&void 0!==a?a:Sb,this.vsn=null!==(o=null==e?void 0:e.vsn)&&void 0!==o?o:Bv,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=null==e?void 0:e.reconnectAfterMs)&&void 0!==l?l:e=>Ab[e-1]||1e4,this.vsn){case Uv:this.encode=null!==(c=null==e?void 0:e.encode)&&void 0!==c?c:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(u=null==e?void 0:e.decode)&&void 0!==u?u:(e,t)=>t(JSON.parse(e));break;case"2.0.0":this.encode=null!==(d=null==e?void 0:e.encode)&&void 0!==d?d:this.serializer.encode.bind(this.serializer),this.decode=null!==(h=null==e?void 0:e.decode)&&void 0!==h?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class Cb extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Pb(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Db extends Cb{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Rb extends Cb{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Ib=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),Ob=e=>{if(Array.isArray(e))return e.map((e=>Ob(e)));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach((([e,r])=>{const n=e.replace(/([-_][a-z])/gi,(e=>e.toUpperCase().replace(/[-_]/g,"")));t[n]=Ob(r)})),t},Nb=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},jb=(e,t,r)=>vy(void 0,void 0,void 0,(function*(){const n=yield Response;e instanceof n&&!(null==r?void 0:r.noResolveJson)?e.json().then((r=>{const n=e.status||500,i=(null==r?void 0:r.statusCode)||n+"";t(new Db(Nb(r),n,i))})).catch((e=>{t(new Rb(Nb(e),e))})):t(new Rb(Nb(e),e))})),Lb=(e,t,r,n)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(n)?(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,(null==t?void 0:t.duplex)&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),r)):i};function Mb(e,t,r,n,i,s){return vy(this,void 0,void 0,(function*(){return new Promise(((a,o)=>{e(r,Lb(t,n,i,s)).then((e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()})).then((e=>a(e))).catch((e=>jb(e,o,n)))}))}))}function Fb(e,t,r,n){return vy(this,void 0,void 0,(function*(){return Mb(e,"GET",t,r,n)}))}function Ub(e,t,r,n,i){return vy(this,void 0,void 0,(function*(){return Mb(e,"POST",t,n,i,r)}))}function Bb(e,t,r,n,i){return vy(this,void 0,void 0,(function*(){return Mb(e,"PUT",t,n,i,r)}))}function $b(e,t,r,n,i){return vy(this,void 0,void 0,(function*(){return Mb(e,"DELETE",t,n,i,r)}))}class zb{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return vy(this,void 0,void 0,(function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Pb(e))return{data:null,error:e};throw e}}))}}var qb;qb=Symbol.toStringTag;const Vb=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[qb]="BlobDownloadBuilder",this.promise=null}asStream(){return new zb(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return vy(this,void 0,void 0,(function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Pb(e))return{data:null,error:e};throw e}}))}},Kb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Gb{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Ib(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,n){return vy(this,void 0,void 0,(function*(){try{let i;const s=Object.assign(Object.assign({},Hb),n);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const o=s.metadata;if("undefined"!=typeof Blob&&r instanceof Blob)i=new FormData,i.append("cacheControl",s.cacheControl),o&&i.append("metadata",this.encodeMetadata(o)),i.append("",r);else if("undefined"!=typeof FormData&&r instanceof FormData)i=r,i.has("cacheControl")||i.append("cacheControl",s.cacheControl),o&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(o));else{i=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o)));("undefined"!=typeof ReadableStream&&i instanceof ReadableStream||i&&"object"==typeof i&&"pipe"in i&&"function"==typeof i.pipe)&&!s.duplex&&(s.duplex="half")}(null==n?void 0:n.headers)&&(a=Object.assign(Object.assign({},a),n.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?Bb:Ub)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:a},(null==s?void 0:s.duplex)?{duplex:s.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Pb(i))return{data:null,error:i};throw i}}))}upload(e,t,r){return vy(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,r)}))}uploadToSignedUrl(e,t,r,n){return vy(this,void 0,void 0,(function*(){const i=this._removeEmptyFolders(e),s=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Hb.upsert},n),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,s["cache-control"]=`max-age=${t.cacheControl}`,s["content-type"]=t.contentType);return{data:{path:i,fullPath:(yield Bb(this.fetch,a.toString(),e,{headers:s})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Pb(o))return{data:null,error:o};throw o}}))}createSignedUploadUrl(e,t){return vy(this,void 0,void 0,(function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(n["x-upsert"]="true");const i=yield Ub(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),s=new URL(this.url+i.url),a=s.searchParams.get("token");if(!a)throw new Cb("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pb(r))return{data:null,error:r};throw r}}))}update(e,t,r){return vy(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,r)}))}move(e,t,r){return vy(this,void 0,void 0,(function*(){try{return{data:yield Ub(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pb(n))return{data:null,error:n};throw n}}))}copy(e,t,r){return vy(this,void 0,void 0,(function*(){try{return{data:{path:(yield Ub(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pb(n))return{data:null,error:n};throw n}}))}createSignedUrl(e,t,r){return vy(this,void 0,void 0,(function*(){try{let n=this._getFinalPath(e),i=yield Ub(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const s=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pb(n))return{data:null,error:n};throw n}}))}createSignedUrls(e,t,r){return vy(this,void 0,void 0,(function*(){try{const n=yield Ub(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:n.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null}))),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pb(n))return{data:null,error:n};throw n}}))}download(e,t){const r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),i=n?`?${n}`:"",s=this._getFinalPath(e);return new Vb((()=>Fb(this.fetch,`${this.url}/${r}/${s}${i}`,{headers:this.headers,noResolveJson:!0})),this.shouldThrowOnError)}info(e){return vy(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{const e=yield Fb(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Ob(e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pb(r))return{data:null,error:r};throw r}}))}exists(e){return vy(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,n){return vy(this,void 0,void 0,(function*(){return Mb(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)}))}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pb(r)&&r instanceof Rb){const e=r.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:r}}throw r}}))}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&n.push(i);const s=void 0!==(null==t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&n.push(a);let o=n.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${o}`)}}}remove(e){return vy(this,void 0,void 0,(function*(){try{return{data:yield $b(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Pb(t))return{data:null,error:t};throw t}}))}list(e,t,r){return vy(this,void 0,void 0,(function*(){try{const n=Object.assign(Object.assign(Object.assign({},Kb),t),{prefix:e||""});return{data:yield Ub(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pb(n))return{data:null,error:n};throw n}}))}listV2(e,t){return vy(this,void 0,void 0,(function*(){try{const r=Object.assign({},e);return{data:yield Ub(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pb(r))return{data:null,error:r};throw r}}))}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Wb="2.81.1",Qb={"X-Client-Info":`storage-js/${Wb}`};class Yb{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const i=new URL(e);if(null==n?void 0:n.useNewHostname){/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."))}this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Qb),t),this.fetch=Ib(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return vy(this,void 0,void 0,(function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield Fb(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Pb(t))return{data:null,error:t};throw t}}))}getBucket(e){return vy(this,void 0,void 0,(function*(){try{return{data:yield Fb(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Pb(t))return{data:null,error:t};throw t}}))}createBucket(e){return vy(this,arguments,void 0,(function*(e,t={public:!1}){try{return{data:yield Ub(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pb(r))return{data:null,error:r};throw r}}))}updateBucket(e,t){return vy(this,void 0,void 0,(function*(){try{return{data:yield Bb(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pb(r))return{data:null,error:r};throw r}}))}emptyBucket(e){return vy(this,void 0,void 0,(function*(){try{return{data:yield Ub(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Pb(t))return{data:null,error:t};throw t}}))}deleteBucket(e){return vy(this,void 0,void 0,(function*(){try{return{data:yield $b(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Pb(t))return{data:null,error:t};throw t}}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class Xb{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Qb),t),this.fetch=Ib(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return vy(this,void 0,void 0,(function*(){try{return{data:yield Ub(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Pb(t))return{data:null,error:t};throw t}}))}listBuckets(e){return vy(this,void 0,void 0,(function*(){try{const t=new URLSearchParams;void 0!==(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),void 0!==(null==e?void 0:e.offset)&&t.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.set("search",e.search);const r=t.toString(),n=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Fb(this.fetch,n,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Pb(t))return{data:null,error:t};throw t}}))}deleteBucket(e){return vy(this,void 0,void 0,(function*(){try{return{data:yield $b(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Pb(t))return{data:null,error:t};throw t}}))}}const Jb={"X-Client-Info":`storage-js/${Wb}`,"Content-Type":"application/json"};class Zb extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ew(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}class tw extends Zb{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rw extends Zb{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var nw,iw;(iw=nw||(nw={})).InternalError="InternalError",iw.S3VectorConflictException="S3VectorConflictException",iw.S3VectorNotFoundException="S3VectorNotFoundException",iw.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",iw.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",iw.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded";const sw=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),aw=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ow=(e,t,r,n)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(n)?(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function lw(e,t,r,n,i,s){return vy(this,void 0,void 0,(function*(){return new Promise(((a,o)=>{e(r,ow(t,n,i,s)).then((e=>{if(!e.ok)throw e;if(null==n?void 0:n.noResolveJson)return e;const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}})).then((e=>a(e))).catch((e=>((e,t,r)=>vy(void 0,void 0,void 0,(function*(){if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==r?void 0:r.noResolveJson)){const r=e.status||500,n=e;if("function"==typeof n.json)n.json().then((e=>{const n=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||r+"";t(new tw(aw(e),r,n))})).catch((()=>{const e=r+"",i=n.statusText||`HTTP ${r} error`;t(new tw(i,r,e))}));else{const e=r+"",i=n.statusText||`HTTP ${r} error`;t(new tw(i,r,e))}}else t(new rw(aw(e),e))})))(e,o,n)))}))}))}function cw(e,t,r,n,i){return vy(this,void 0,void 0,(function*(){return lw(e,"POST",t,n,i,r)}))}class uw{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Jb),t),this.fetch=sw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return vy(this,void 0,void 0,(function*(){try{return{data:(yield cw(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ew(t))return{data:null,error:t};throw t}}))}getIndex(e,t){return vy(this,void 0,void 0,(function*(){try{return{data:yield cw(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ew(r))return{data:null,error:r};throw r}}))}listIndexes(e){return vy(this,void 0,void 0,(function*(){try{return{data:yield cw(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ew(t))return{data:null,error:t};throw t}}))}deleteIndex(e,t){return vy(this,void 0,void 0,(function*(){try{return{data:(yield cw(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ew(r))return{data:null,error:r};throw r}}))}}class dw{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Jb),t),this.fetch=sw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return vy(this,void 0,void 0,(function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield cw(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ew(t))return{data:null,error:t};throw t}}))}getVectors(e){return vy(this,void 0,void 0,(function*(){try{return{data:yield cw(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ew(t))return{data:null,error:t};throw t}}))}listVectors(e){return vy(this,void 0,void 0,(function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:yield cw(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ew(t))return{data:null,error:t};throw t}}))}queryVectors(e){return vy(this,void 0,void 0,(function*(){try{return{data:yield cw(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ew(t))return{data:null,error:t};throw t}}))}deleteVectors(e){return vy(this,void 0,void 0,(function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield cw(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ew(t))return{data:null,error:t};throw t}}))}}class hw{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Jb),t),this.fetch=sw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return vy(this,void 0,void 0,(function*(){try{return{data:(yield cw(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ew(t))return{data:null,error:t};throw t}}))}getBucket(e){return vy(this,void 0,void 0,(function*(){try{return{data:yield cw(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ew(t))return{data:null,error:t};throw t}}))}listBuckets(){return vy(this,arguments,void 0,(function*(e={}){try{return{data:yield cw(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ew(t))return{data:null,error:t};throw t}}))}deleteBucket(e){return vy(this,void 0,void 0,(function*(){try{return{data:(yield cw(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ew(t))return{data:null,error:t};throw t}}))}}class fw extends hw{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new pw(this.url,this.headers,e,this.fetch)}}class pw extends uw{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return vy(this,void 0,void 0,(function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))}))}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return vy(this,arguments,void 0,(function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))}))}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return vy(this,void 0,void 0,(function*(){return t.getIndex.call(this,this.vectorBucketName,e)}))}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return vy(this,void 0,void 0,(function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)}))}index(e){return new gw(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class gw extends dw{constructor(e,t,r,n,i){super(e,t,i),this.vectorBucketName=r,this.indexName=n}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return vy(this,void 0,void 0,(function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}))}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return vy(this,void 0,void 0,(function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}))}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return vy(this,arguments,void 0,(function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}))}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return vy(this,void 0,void 0,(function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}))}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return vy(this,void 0,void 0,(function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}))}}class mw extends Yb{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new Gb(this.url,this.headers,e,this.fetch)}get vectors(){return new fw(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Xb(this.url+"/iceberg",this.headers,this.fetch)}}let yw="";yw="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const vw={headers:{"X-Client-Info":`supabase-js-${yw}/2.81.1`}},bw={schema:"public"},ww={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xw={},Sw=(e,t,r)=>{const n=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(r),i=Headers;return async(r,s)=>{var a;const o=null!==(a=await t())&&void 0!==a?a:e;let l=new i(null==s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),n(r,Object.assign(Object.assign({},s),{headers:l}))}};const Ew="2.81.1",Tw=3e4,kw=9e4,Aw={"X-Client-Info":`gotrue-js/${Ew}`},_w="X-Supabase-Api-Version",Cw={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Pw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Dw extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Rw(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class Iw extends Dw{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class Ow extends Dw{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Nw extends Dw{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class jw extends Nw{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Lw extends Nw{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mw extends Nw{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Fw extends Nw{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Uw extends Nw{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Bw extends Nw{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function $w(e){return Rw(e)&&"AuthRetryableFetchError"===e.name}class zw extends Nw{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class qw extends Nw{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Kw=" \t\n\r=".split(""),Hw=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Kw.length;t+=1)e[Kw[t].charCodeAt(0)]=-2;for(let t=0;t<Vw.length;t+=1)e[Vw[t].charCodeAt(0)]=t;return e})();function Gw(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Vw[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Vw[e]),t.queuedBits-=6}}function Ww(e,t,r){const n=Hw[e];if(!(n>-1)){if(-2===n)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Qw(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,n,r)};for(let a=0;a<e.length;a+=1)Ww(e.charCodeAt(a),i,s);return t.join("")}function Yw(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Xw(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let i=0;i<e.length;i+=1)Ww(e.charCodeAt(i),r,n);return new Uint8Array(t)}function Jw(e){const t=[];return function(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const t=1024*(n-55296)&65535;n=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}Yw(n,t)}}(e,(e=>t.push(e))),new Uint8Array(t)}function Zw(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach((e=>Gw(e,r,n))),Gw(null,r,n),t.join("")}const ex=()=>"undefined"!=typeof window&&"undefined"!=typeof document,tx={tested:!1,writable:!1},rx=()=>{if(!ex())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(Jce){return!1}if(tx.tested)return tx.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),tx.tested=!0,tx.writable=!0}catch(Jce){tx.tested=!0,tx.writable=!1}return tx.writable};const nx=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),ix=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},sx=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(n){return r}},ax=async(e,t)=>{await e.removeItem(t)};class ox{constructor(){this.promise=new ox.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function lx(e){const t=e.split(".");if(3!==t.length)throw new qw("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Pw.test(t[r]))throw new qw("JWT not in base64url format");return{header:JSON.parse(Qw(t[0])),payload:JSON.parse(Qw(t[1])),signature:Xw(t[2]),raw:{header:t[0],payload:t[1]}}}function cx(e){return("0"+e.toString(16)).substr(-2)}async function ux(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map((e=>String.fromCharCode(e))).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function dx(e,t,r=!1){const n=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,cx).join("")}();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await ix(e,`${t}-code-verifier`,i);const s=await ux(n);return[s,n===s?"plain":"s256"]}ox.promiseConstructor=Promise;const hx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const fx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function px(e){if(!fx.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gx(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mx(e){return JSON.parse(JSON.stringify(e))}const yx=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),vx=[502,503,504];async function bx(e){var t,r;if(!("object"==typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"==typeof r.json))throw new Bw(yx(e),0);if(vx.includes(e.status))throw new Bw(yx(e),e.status);let n,i;try{n=await e.json()}catch(Jce){throw new Ow(yx(Jce),Jce)}const s=function(e){const t=e.headers.get(_w);if(!t)return null;if(!t.match(hx))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(Jce){return null}}(e);if(s&&s.getTime()>=Cw.timestamp&&"object"==typeof n&&n&&"string"==typeof n.code?i=n.code:"object"==typeof n&&n&&"string"==typeof n.error_code&&(i=n.error_code),i){if("weak_password"===i)throw new zw(yx(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new jw}else if("object"==typeof n&&n&&"object"==typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0))throw new zw(yx(n),e.status,n.weak_password.reasons);throw new Iw(yx(n),e.status||500,i)}async function wx(e,t,r,n){var i;const s=Object.assign({},null==n?void 0:n.headers);s[_w]||(s[_w]=Cw.name),(null==n?void 0:n.jwt)&&(s.Authorization=`Bearer ${n.jwt}`);const a=null!==(i=null==n?void 0:n.query)&&void 0!==i?i:{};(null==n?void 0:n.redirectTo)&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,r,n,i,s){const a=((e,t,r,n)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))})(t,n,i,s);let o;try{o=await e(r,Object.assign({},a))}catch(Jce){throw new Bw(yx(Jce),0)}o.ok||await bx(o);if(null==n?void 0:n.noResolveJson)return o;try{return await o.json()}catch(Jce){await bx(Jce)}}(e,t,r+o,{headers:s,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}function xx(e){var t;let r=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Sx(e){const t=xx(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0)&&(t.data.weak_password=e.weak_password),t}function Ex(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Tx(e){return{data:e,error:null}}function kx(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=e,a=uy(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},user:Object.assign({},a)},error:null}}function Ax(e){return e}const _x=["global","local","others"];class Cx{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=nx(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=_x[0]){if(_x.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_x.join(", ")}`);try{return await wx(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Rw(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await wx(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ex})}catch(r){if(Rw(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=uy(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null==r?void 0:r.newEmail,delete n.newEmail),await wx(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:kx,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(Rw(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await wx(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ex})}catch(t){if(Rw(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,i,s,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await wx(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(i=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==i?i:""},xform:Ax});if(c.error)throw c.error;const u=await c.json(),d=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t})),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(Rw(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){px(e);try{return await wx(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ex})}catch(t){if(Rw(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){px(e);try{return await wx(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ex})}catch(r){if(Rw(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){px(e);try{return await wx(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ex})}catch(r){if(Rw(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){px(e.userId);try{const{data:t,error:r}=await wx(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(Rw(t))return{data:null,error:t};throw t}}async _deleteFactor(e){px(e.userId),px(e.id);try{return{data:await wx(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Rw(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,n,i,s,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await wx(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(i=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==i?i:""},xform:Ax});if(c.error)throw c.error;const u=await c.json(),d=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t})),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(Rw(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await wx(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(Rw(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await wx(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(Rw(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await wx(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(r){if(Rw(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await wx(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(Rw(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await wx(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(Rw(t))return{data:null,error:t};throw t}}}function Px(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Dx=!!(globalThis&&rx()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Rx extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ix extends Rx{}async function Ox(e,t,r){const n=new globalThis.AbortController;return t>0&&setTimeout((()=>{n.abort()}),t),await Promise.resolve().then((()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},(async n=>{if(!n){if(0===t)throw new Ix(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Dx)try{await globalThis.navigator.locks.query()}catch(Jce){}return await r()}try{return await r()}finally{}}))))}function Nx(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function jx(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,(e=>e.toString(16).padStart(2,"0"))).join("")}class Lx extends Error{constructor({message:e,code:t,cause:r,name:n}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(i=null!=n?n:r instanceof Error?r.name:void 0)&&void 0!==i?i:"Unknown Error",this.code=t}}class Mx extends Lx{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Fx({error:e,options:t}){var r,n,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new Lx({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if(!0===(null===(r=s.authenticatorSelection)||void 0===r?void 0:r.requireResidentKey))return new Lx({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if("conditional"===t.mediation&&"required"===(null===(n=s.authenticatorSelection)||void 0===n?void 0:n.userVerification))return new Lx({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if("required"===(null===(i=s.authenticatorSelection)||void 0===i?void 0:i.userVerification))return new Lx({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if("InvalidStateError"===e.name)return new Lx({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if("NotAllowedError"===e.name)return new Lx({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("NotSupportedError"===e.name){return 0===s.pubKeyCredParams.filter((e=>"public-key"===e.type)).length?new Lx({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Lx({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e})}if("SecurityError"===e.name){const t=window.location.hostname;if(!Kx(t))return new Lx({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(s.rp.id!==t)return new Lx({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Lx({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new Lx({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Lx({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Ux({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new Lx({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if("NotAllowedError"===e.name)return new Lx({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!Kx(t))return new Lx({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(r.rpId!==t)return new Lx({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new Lx({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Lx({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}const Bx=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function $x(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,i=uy(e,["challenge","user","excludeCredentials"]),s=Xw(t).buffer,a=Object.assign(Object.assign({},r),{id:Xw(r.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:s,user:a});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:Xw(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}function zx(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=uy(e,["challenge","allowCredentials"]),i=Xw(t).buffer,s=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];s.allowCredentials[e]=Object.assign(Object.assign({},t),{id:Xw(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return s}function qx(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Zw(new Uint8Array(e.response.attestationObject)),clientDataJSON:Zw(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function Vx(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const r=e,n=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Zw(new Uint8Array(i.authenticatorData)),clientDataJSON:Zw(new Uint8Array(i.clientDataJSON)),signature:Zw(new Uint8Array(i.signature)),userHandle:i.userHandle?Zw(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function Kx(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Hx(){var e,t;return!!(ex()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const Gx={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Wx={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Qx(...e){const t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),r={};for(const i of e)if(i)for(const e in i){const s=i[e];if(void 0!==s)if(Array.isArray(s))r[e]=s;else if((n=s)instanceof ArrayBuffer||ArrayBuffer.isView(n))r[e]=s;else if(t(s)){const n=r[e];t(n)?r[e]=Qx(n,s):r[e]=Qx(s)}else r[e]=s}var n;return r}class Yx{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:n},i){try{const{data:s,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!s)return{data:null,error:a};const o=null!=n?n:Bx.createNewAbortSignal();if("create"===s.webauthn.type){const{user:e}=s.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${r}`),e.displayName||(e.displayName=e.name)}switch(s.webauthn.type){case"create":{const t=function(e,t){return Qx(Gx,e,t||{})}(s.webauthn.credential_options.publicKey,null==i?void 0:i.create),{data:r,error:n}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Mx("Browser returned unexpected credential type",t)}:{data:null,error:new Mx("Empty credential response",t)}}catch(t){return{data:null,error:Fx({error:t,options:e})}}}({publicKey:t,signal:o});return r?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:r}},error:null}:{data:null,error:n}}case"request":{const t=function(e,t){return Qx(Wx,e,t||{})}(s.webauthn.credential_options.publicKey,null==i?void 0:i.request),{data:r,error:n}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Mx("Browser returned unexpected credential type",t)}:{data:null,error:new Mx("Empty credential response",t)}}catch(t){return{data:null,error:Ux({error:t,options:e})}}}(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:t,signal:o}));return r?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:r}},error:null}:{data:null,error:n}}}}catch(s){return Rw(s)?{data:null,error:s}:{data:null,error:new Ow("Unexpected error in challenge",s)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:r=("undefined"!=typeof window?[window.location.origin]:void 0),signal:n}={}},i){if(!t)return{data:null,error:new Dw("rpId is required for WebAuthn authentication")};try{if(!Hx())return{data:null,error:new Ow("Browser does not support WebAuthn",null)};const{data:s,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:n},{request:i});if(!s)return{data:null,error:a};const{webauthn:o}=s;return this._verify({factorId:e,challengeId:s.challengeId,webauthn:{type:o.type,rpId:t,rpOrigins:r,credential_response:o.credential_response}})}catch(s){return Rw(s)?{data:null,error:s}:{data:null,error:new Ow("Unexpected error in authenticate",s)}}}async _register({friendlyName:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:r=("undefined"!=typeof window?[window.location.origin]:void 0),signal:n}={}},i){if(!t)return{data:null,error:new Dw("rpId is required for WebAuthn registration")};try{if(!Hx())return{data:null,error:new Ow("Browser does not support WebAuthn",null)};const{data:s,error:a}=await this._enroll({friendlyName:e});if(!s)return await this.client.mfa.listFactors().then((t=>{var r;return null===(r=t.data)||void 0===r?void 0:r.all.find((t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status))})).then((e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0)),{data:null,error:a};const{data:o,error:l}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:n},{create:i});return o?this._verify({factorId:s.id,challengeId:o.challengeId,webauthn:{rpId:t,rpOrigins:r,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:l}}catch(s){return Rw(s)?{data:null,error:s}:{data:null,error:new Ow("Unexpected error in register",s)}}}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(Jce){"undefined"!=typeof self&&(self.globalThis=self)}}();const Xx={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Aw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Jx(e,t,r){return await r()}const Zx={};class eS{get jwks(){var e,t;return null!==(t=null===(e=Zx[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Zx[this.storageKey]=Object.assign(Object.assign({},Zx[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Zx[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Zx[this.storageKey]=Object.assign(Object.assign({},Zx[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Xx),e);if(this.storageKey=i.storageKey,this.instanceID=null!==(t=eS.nextInstanceID[this.storageKey])&&void 0!==t?t:0,eS.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,"function"==typeof i.debug&&(this.logger=i.debug),this.instanceID>0&&ex()){this._logPrefix();this.logDebugMessages}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Cx({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=nx(i.fetch),this.lock=i.lock||Jx,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:ex()&&(null===(r=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===r?void 0:r.locks)?this.lock=Ox:this.lock=Jx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Yx(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:rx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Px(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Px(this.memoryStorage)),ex()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Jce){}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",(async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ew}) ${(new Date).toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){var e;try{let t={},r="none";if(ex()&&(t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach(((e,r)=>{t[r]=e}))}catch(Jce){}return r.searchParams.forEach(((e,r)=>{t[r]=e})),t}(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),ex()&&this.detectSessionInUrl&&"none"!==r){const{data:n,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),function(e){return Rw(e)&&"AuthImplicitGrantRedirectError"===e.name}(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",s,"redirect type",a),await this._saveSession(s),setTimeout((async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Rw(t)?this._returnResult({error:t}):this._returnResult({error:new Ow("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const i=await wx(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:xx}),{data:s,error:a}=i;if(a||!s)return this._returnResult({data:{user:null,session:null},error:a});const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(i){if(Rw(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var t,r,n;try{let i;if("email"in e){const{email:r,password:n,options:s}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await dx(this.storage,this.storageKey)),i=await wx(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==s?void 0:s.emailRedirectTo,body:{email:r,password:n,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:a,code_challenge_method:o},xform:xx})}else{if(!("phone"in e))throw new Mw("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:a}=e;i=await wx(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:s,data:null!==(r=null==a?void 0:a.data)&&void 0!==r?r:{},channel:null!==(n=null==a?void 0:a.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:xx})}}const{data:s,error:a}=i;if(a||!s)return this._returnResult({data:{user:null,session:null},error:a});const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(i){if(Rw(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:n,options:i}=e;t=await wx(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Sx})}else{if(!("phone"in e))throw new Mw("You must provide either an email or phone number and a password");{const{phone:r,password:n,options:i}=e;t=await wx(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Sx})}}const{data:r,error:n}=t;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!r||!r.session||!r.user){const e=new Lw;return this._returnResult({data:{user:null,session:null},error:e})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(t){if(Rw(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(e)))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,n,i,s,a,o,l,c,u,d;let h,f;if("message"in e)h=e.message,f=e.signature;else{const{chain:u,wallet:d,statement:p,options:g}=e;let m;if(ex())if("object"==typeof d)m=d;else{const e=window;if(!("ethereum"in e)||"object"!=typeof e.ethereum||!("request"in e.ethereum)||"function"!=typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");m=e.ethereum}else{if("object"!=typeof d||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=d}const y=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href),v=await m.request({method:"eth_requestAccounts"}).then((e=>e)).catch((()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")}));if(!v||0===v.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const b=Nx(v[0]);let w=null===(r=null==g?void 0:g.signInWithEthereum)||void 0===r?void 0:r.chainId;if(!w){const e=await m.request({method:"eth_chainId"});w=parseInt(e,16)}h=function(e){var t;const{chainId:r,domain:n,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:l,resources:c,scheme:u,uri:d,version:h}=e;if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const f=`${u?`${u}://${n}`:n} wants you to sign in with your Ethereum account:\n${Nx(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let p=`URI: ${d}\nVersion: ${h}\nChain ID: ${r}${a?`\nNonce: ${a}`:""}\nIssued At: ${s.toISOString()}`;if(i&&(p+=`\nExpiration Time: ${i.toISOString()}`),o&&(p+=`\nNot Before: ${o.toISOString()}`),l&&(p+=`\nRequest ID: ${l}`),c){let e="\nResources:";for(const t of c){if(!t||"string"!=typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}p+=e}return`${f}\n${p}`}({domain:y.host,address:b,statement:p,uri:y.href,version:"1",chainId:w,nonce:null===(n=null==g?void 0:g.signInWithEthereum)||void 0===n?void 0:n.nonce,issuedAt:null!==(s=null===(i=null==g?void 0:g.signInWithEthereum)||void 0===i?void 0:i.issuedAt)&&void 0!==s?s:new Date,expirationTime:null===(a=null==g?void 0:g.signInWithEthereum)||void 0===a?void 0:a.expirationTime,notBefore:null===(o=null==g?void 0:g.signInWithEthereum)||void 0===o?void 0:o.notBefore,requestId:null===(l=null==g?void 0:g.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null==g?void 0:g.signInWithEthereum)||void 0===c?void 0:c.resources}),f=await m.request({method:"personal_sign",params:[jx(h),b]})}try{const{data:t,error:r}=await wx(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:f},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:xx});if(r)throw r;if(!t||!t.session||!t.user){const e=new Lw;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(p){if(Rw(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSolana(e){var t,r,n,i,s,a,o,l,c,u,d,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:d,wallet:h,statement:g,options:m}=e;let y;if(ex())if("object"==typeof h)y=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=e.solana}else{if("object"!=typeof h||!(null==m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=h}const v=new URL(null!==(t=null==m?void 0:m.url)&&void 0!==t?t:window.location.href);if("signIn"in y&&y.signIn){const e=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==m?void 0:m.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in y&&"function"==typeof y.signMessage&&"publicKey"in y&&"object"==typeof y&&y.publicKey&&"toBase58"in y.publicKey&&"function"==typeof y.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${v.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!==(n=null===(r=null==m?void 0:m.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==n?n:(new Date).toISOString()}`,...(null===(i=null==m?void 0:m.signInWithSolana)||void 0===i?void 0:i.notBefore)?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...(null===(s=null==m?void 0:m.signInWithSolana)||void 0===s?void 0:s.expirationTime)?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...(null===(a=null==m?void 0:m.signInWithSolana)||void 0===a?void 0:a.chainId)?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...(null===(o=null==m?void 0:m.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...(null===(l=null==m?void 0:m.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...(null===(u=null===(c=null==m?void 0:m.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...m.signInWithSolana.resources.map((e=>`- ${e}`))]:[]].join("\n");const e=await y.signMessage((new TextEncoder).encode(f),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:r}=await wx(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:Zw(p)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:xx});if(r)throw r;if(!t||!t.session||!t.user){const e=new Lw;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(g){if(Rw(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async _exchangeCodeForSession(e){const t=await sx(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(null!=t?t:"").split("/");try{const{data:t,error:i}=await wx(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:xx});if(await ax(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!t||!t.session||!t.user){const e=new Lw;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!=n?n:null}),error:i})}catch(i){if(Rw(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:i,nonce:s}=e,a=await wx(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:xx}),{data:o,error:l}=a;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const e=new Lw;return this._returnResult({data:{user:null,session:null},error:e})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:o,error:l})}catch(t){if(Rw(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,n,i,s;try{if("email"in e){const{email:n,options:i}=e;let s=null,a=null;"pkce"===this.flowType&&([s,a]=await dx(this.storage,this.storageKey));const{error:o}=await wx(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(r=null==i?void 0:i.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:s,code_challenge_method:a},redirectTo:null==i?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}if("phone"in e){const{phone:t,options:r}=e,{data:a,error:o}=await wx(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(i=null==r?void 0:r.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!==(s=null==r?void 0:r.channel)&&void 0!==s?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o})}throw new Mw("You must provide either an email or phone number.")}catch(a){if(Rw(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var t,r;try{let n,i;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:s,error:a}=await wx(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:xx});if(a)throw a;if(!s){throw new Error("An error occurred on token verification.")}const o=s.session,l=s.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(n){if(Rw(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(e){var t,r,n,i,s;try{let a=null,o=null;"pkce"===this.flowType&&([a,o]=await dx(this.storage,this.storageKey));const l=await wx(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:Tx});return(null===(i=l.data)||void 0===i?void 0:i.url)&&ex()&&!(null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(a){if(Rw(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new jw;const{error:n}=await wx(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:n})}))}catch(e){if(Rw(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:s}=await wx(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}if("phone"in e){const{phone:r,type:n,options:i}=e,{data:s,error:a}=await wx(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==s?void 0:s.message_id},error:a})}throw new Mw("You must provide either an email or phone number and a type")}catch(t){if(Rw(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,(async()=>this._useSession((async e=>e))))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(Jce){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(Jce){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await sx(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<kw;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const t=await sx(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=gx()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const t={value:this.suppressGetSessionWarning};e.user=function(e,t){return new Proxy(e,{get:(e,r,n)=>{if("__isInsecureUserWarningProxy"===r)return!0;if("symbol"==typeof r){const t=r.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t||"Symbol(nodejs.util.inspect.custom)"===t)return Reflect.get(e,r,n)}return t.value||"string"!=typeof r||(t.value=!0),Reflect.get(e,r,n)}})}(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,(async()=>await this._getUser()))}async _getUser(e){try{return e?await wx(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ex}):await this._useSession((async e=>{var t,r,n;const{data:i,error:s}=e;if(s)throw s;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await wx(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(r=i.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,xform:Ex}):{data:{user:null},error:new jw}}))}catch(t){if(Rw(t))return function(e){return Rw(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await ax(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(e,t)))}async _updateUser(e,t={}){try{return await this._useSession((async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new jw;const s=n.session;let a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await dx(this.storage,this.storageKey));const{data:l,error:c}=await wx(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:s.access_token,xform:Ex});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})}))}catch(r){if(Rw(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(e)))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new jw;const t=Date.now()/1e3;let r=t,n=!0,i=null;const{payload:s}=lx(e.access_token);if(s.exp&&(r=s.exp,n=r<=t),n){const{data:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:n,error:s}=await this._getUser(e.access_token);if(s)throw s;i={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(t){if(Rw(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(e)))}async _refreshSession(e){try{return await this._useSession((async t=>{var r;if(!e){const{data:n,error:i}=t;if(i)throw i;e=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new jw;const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})}))}catch(t){if(Rw(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!ex())throw new Fw("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Fw(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Uw("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Fw("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Uw("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:s,expires_in:a,expires_at:o,token_type:l}=e;if(!(i&&a&&s&&l))throw new Fw("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(a);let d=c+u;o&&(d=parseInt(o));const{data:h,error:f}=await this._getUser(i);if(f)throw f;const p={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:u,expires_at:d,refresh_token:s,token_type:l,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:p,redirectType:e.type},error:null})}catch(r){if(Rw(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await sx(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(e)))}async _signOut({scope:e}={scope:"global"}){return await this._useSession((async t=>{var r;const{data:n,error:i}=t;if(i)return this._returnResult({error:i});const s=null===(r=n.session)||void 0===r?void 0:r.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return Rw(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await ax(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})}))}onAuthStateChange(e){const t=Symbol("auth-callback"),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(t)}))})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession((async t=>{var r,n;try{const{data:{session:n},error:i}=t;if(i)throw i;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(i){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i)}}))}async resetPasswordForEmail(e,t={}){let r=null,n=null;"pkce"===this.flowType&&([r,n]=await dx(this.storage,this.storageKey,!0));try{return await wx(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Rw(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null})}catch(t){if(Rw(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:n}=await this._useSession((async t=>{var r,n,i,s,a;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await wx(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(s=o.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})}));if(n)throw n;return ex()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==r?void 0:r.url),this._returnResult({data:{provider:e.provider,url:null==r?void 0:r.url},error:null})}catch(r){if(Rw(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession((async t=>{var r;try{const{error:n,data:{session:i}}=t;if(n)throw n;const{options:s,provider:a,token:o,access_token:l,nonce:c}=e,u=await wx(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(r=null==i?void 0:i.access_token)&&void 0!==r?r:void 0,body:{provider:a,id_token:o,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:xx}),{data:d,error:h}=u;return h?this._returnResult({data:{user:null,session:null},error:h}):d&&d.session&&d.user?(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:h})):this._returnResult({data:{user:null,session:null},error:new Lw})}catch(n){if(Rw(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}))}async unlinkIdentity(e){try{return await this._useSession((async t=>{var r,n;const{data:i,error:s}=t;if(s)throw s;return await wx(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(n=null===(r=i.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0})}))}catch(t){if(Rw(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise((t=>{setTimeout((()=>t(null)),e)}))}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await wx(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:xx})),n=(e,t)=>{const r=200*Math.pow(2,e);return t&&$w(t)&&Date.now()+r-i<Tw},new Promise(((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await r(i);if(!n(i,null,t))return void e(t)}catch(Jce){if(!n(i,Jce))return void t(Jce)}})()})))}catch(i){if(this._debug(t,"error",i),Rw(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(t,"end")}var r,n}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ex()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await sx(this.storage,this.storageKey);if(i&&this.userStorage){let t=await sx(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:i.user},await ix(this.userStorage,this.storageKey+"-user",t)),i.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:gx()}else if(i&&!i.user&&!i.user){const e=await sx(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(i.user=e.user,await ax(this.storage,this.storageKey+"-user"),await ix(this.storage,this.storageKey,i)):i.user=gx()}if(this._debug(r,"session from storage",i),!this._isValidSession(i))return this._debug(r,"session is not valid"),void(null!==i&&await this._removeSession());const s=1e3*(null!==(t=i.expires_at)&&void 0!==t?t:1/0)-Date.now()<kw;if(this._debug(r,`session has${s?"":" not"} expired with margin of 90000s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:e}=await this._callRefreshToken(i.refresh_token);e&&($w(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(i.user&&!0===i.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(i.access_token);!t&&(null==e?void 0:e.user)?(i.user=e.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(n){this._debug(r,"error getting user data, skipping SIGNED_IN notification",n)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){return void this._debug(r,"error",i)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new jw;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new ox;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new jw;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={data:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(i){if(this._debug(n,"error",i),Rw(i)){const e={data:null,error:i};return $w(i)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],i=Array.from(this.stateChangeEmitters.values()).map((async r=>{try{await r.callback(e,t)}catch(Jce){n.push(Jce)}}));if(await Promise.all(i),n.length>0){for(let e=0;e<n.length;e+=1);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await ix(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const n=mx(e);await ix(this.storage,this.storageKey,n)}else{const e=mx(t);await ix(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await ax(this.storage,this.storageKey),await ax(this.storage,this.storageKey+"-code-verifier"),await ax(this.storage,this.storageKey+"-user"),this.userStorage&&await ax(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ex()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(Jce){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),Tw);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const e=Date.now();try{return await this._useSession((async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*r.expires_at-e)/Tw);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(r.refresh_token)}))}catch(Jce){}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(Jce){if(!(Jce.isAcquireTimeout||Jce instanceof Rx))throw Jce;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ex()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await dx(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});n.push(r.toString())}if(null==r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession((async t=>{var r;const{data:n,error:i}=t;return i?this._returnResult({data:null,error:i}):await wx(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token})}))}catch(t){if(Rw(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession((async t=>{var r,n;const{data:i,error:s}=t;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await wx(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null===(r=null==i?void 0:i.session)||void 0===r?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===o.type&&(null===(n=null==o?void 0:o.totp)||void 0===n?void 0:n.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),this._returnResult({data:o,error:null}))}))}catch(t){if(Rw(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var r;const{data:n,error:i}=t;if(i)return this._returnResult({data:null,error:i});const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?qx(e.webauthn.credential_response):Vx(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:o}=await wx(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:s,headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token});return o?this._returnResult({data:null,error:o}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:o}))}))}catch(t){if(Rw(t))return this._returnResult({data:null,error:t});throw t}}))}async _challenge(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var r;const{data:n,error:i}=t;if(i)return this._returnResult({data:null,error:i});const s=await wx(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token});if(s.error)return s;const{data:a}=s;if("webauthn"!==a.type)return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:$x(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:zx(a.webauthn.credential_options.publicKey)})})}),error:null}}}))}catch(t){if(Rw(t))return this._returnResult({data:null,error:t});throw t}}))}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n={all:[],phone:[],totp:[],webauthn:[]};for(const i of null!==(e=null==t?void 0:t.factors)&&void 0!==e?e:[])n.all.push(i),"verified"===i.status&&n[i.factor_type].push(i);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=lx(r.access_token);let s=null;i.aal&&(s=i.aal);let a=s;(null!==(t=null===(e=r.user.factors)||void 0===e?void 0:e.filter((e=>"verified"===e.status)))&&void 0!==t?t:[]).length>0&&(a="aal2");return{data:{currentLevel:s,nextLevel:a,currentAuthenticationMethods:i.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession((async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await wx(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new jw})}))}catch(t){if(Rw(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession((async r=>{const{data:{session:n},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new jw});const s=await wx(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return s.data&&s.data.redirect_url&&ex()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s}))}catch(r){if(Rw(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession((async r=>{const{data:{session:n},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new jw});const s=await wx(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return s.data&&s.data.redirect_url&&ex()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s}))}catch(r){if(Rw(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find((t=>t.kid===e));if(r)return r;const n=Date.now();if(r=this.jwks.keys.find((t=>t.kid===e)),r&&this.jwks_cached_at+6e5>n)return r;const{data:i,error:s}=await wx(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return i.keys&&0!==i.keys.length?(this.jwks=i,this.jwks_cached_at=n,r=i.keys.find((t=>t.kid===e)),r||null):null}async getClaims(e,t={}){try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});r=e.session.access_token}const{header:n,payload:i,signature:s,raw:{header:a,payload:o}}=lx(r);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp);const l=n.alg&&!n.alg.startsWith("HS")&&n.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(n.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:i,header:n,signature:s},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(n.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,u,s,Jw(`${a}.${o}`))))throw new qw("Invalid JWT signature");return{data:{claims:i,header:n,signature:s},error:null}}catch(r){if(Rw(r))return this._returnResult({data:null,error:r});throw r}}}eS.nextInstanceID={};const tS=eS;class rS extends tS{constructor(e){super(e)}}class nS{constructor(e,t,r){var n,i,s;this.supabaseUrl=e,this.supabaseKey=t;const a=function(e){const t=null==e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((r=t).endsWith("/")?r:r+"/")}catch(n){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var r}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const o=`sb-${a.hostname.split(".")[0]}-auth-token`,l=function(e,t){var r,n;const{db:i,auth:s,realtime:a,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},u),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},null!==(r=null==d?void 0:d.headers)&&void 0!==r?r:{}),null!==(n=null==o?void 0:o.headers)&&void 0!==n?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=r?r:{},{db:bw,realtime:xw,auth:Object.assign(Object.assign({},ww),{storageKey:o}),global:vw});this.storageKey=null!==(n=l.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(i=l.global.headers)&&void 0!==i?i:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=l.auth)&&void 0!==s?s:{},this.headers,l.global.fetch),this.fetch=Sw(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then((e=>this.realtime.setAuth(e))).catch((e=>{})),this.rest=new Iv(new URL("rest/v1",a).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new mw(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Xy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:s,flowType:a,lock:o,debug:l,throwOnError:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rS({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,flowType:a,lock:o,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some((e=>"authorization"===e.toLowerCase()))})}_initRealtimeClient(e){return new _b(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)}))}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}const iS=(e,t,r)=>new nS(e,t,r);!function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);!!t&&parseInt(t[1],10)}();const sS=e=>{try{if(void 0!==import.meta)return{VITE_SUPABASE_URL:"https://supabase.dosmundos.pe",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlLWRlbW8iLCJpYXQiOjE2NDE3NjkyMDAsImV4cCI6MTk5OTk5OTk5OX0.A4_N08ZorXYT17zhZReBXPlY6L5-9d8thMbm7TcDWl8",VITE_VPS_IP:"72.61.186.175",VITE_VPS_USER:"root",VITE_VPS_PASSWORD:"Qazsxdc@1234",VITE_AUDIO_PUBLIC_BASE:"https://dosmundos.pe/files/audio",VITE_DEEPGRAM_API_KEY:"84ca6271b47706ef558452cffe25ec353cfad7fb",VITE_DEEPSEEK_API_KEY:"sk-2cfb1cedbb164adeaac8bea846086fcc",VITE_ASSEMBLYAI_API_KEY:"84e48d90988e4671a74e78f37fc5abfd",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}[e]}catch(Jce){}if("undefined"!=typeof process&&process.env)return process.env[e]},aS=sS("VITE_SUPABASE_URL")||"https://supabase.dosmundos.pe",oS=sS("VITE_SUPABASE_ANON_KEY")||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlLWRlbW8iLCJpYXQiOjE2NDE3NjkyMDAsImV4cCI6MTk5OTk5OTk5OX0.A4_N08ZorXYT17zhZReBXPlY6L5-9d8thMbm7TcDWl8",lS=aS&&(aS.startsWith("http://")||aS.includes("72.61.186.175")||aS.includes("supabase.dosmundos.pe")),cS=oS.replace(/^Bearer\s+/i,"").trim(),uS=iS(aS,cS,{realtime:lS?null:{params:{eventsPerSecond:10}},...lS?{realtime:{enabled:!1,params:void 0},fetch:{timeout:3e4,retry:3},global:{headers:{"x-client-info":"dosmundos-podcast-app"}}}:{global:{headers:{"x-client-info":"dosmundos-podcast-app"}}},auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1}});if(lS){uS.channel=function(e,t){return{on:()=>this,subscribe:()=>Promise.resolve({status:"ok"}),unsubscribe:()=>Promise.resolve({status:"ok"}),send:()=>Promise.resolve({status:"ok"})}};const e=window.fetch;window.fetch=async function(t,r={}){if(t&&t.includes("supabase.dosmundos.pe")&&t.includes("/realtime/"))return new Response(JSON.stringify({error:"Realtime disabled for self-hosted"}),{status:503,statusText:"Service Unavailable",headers:{"Content-Type":"application/json"}});if(t&&t.includes("supabase.dosmundos.pe")){let i={};r.headers instanceof Headers?r.headers.forEach(((e,t)=>{i[t.toLowerCase()]=e})):r.headers&&Object.keys(r.headers).forEach((e=>{i[e.toLowerCase()]=r.headers[e]})),delete i["accept-profile"],delete i["content-profile"],delete i["http2-settings"],delete i.upgrade,delete i["cache-control"],delete i.pragma,delete i["sec-ch-ua"],delete i["sec-ch-ua-mobile"],delete i["sec-ch-ua-platform"],delete i["x-optimized"],delete i["x-self-hosted"],i.connection="keep-alive",i["user-agent"]="DosMundos-Podcast-App/1.0",!i.apikey&&cS&&(i.apikey=cS),!i.authorization&&cS&&(i.authorization=`Bearer ${cS}`),!i["content-type"]&&r.body&&(i["content-type"]="application/json");const s={...r,headers:i,mode:"cors",credentials:"omit"};try{const r=await e(t,s);return!r.ok&&r.status,r}catch(n){throw n}}return e(t,r)};const t=console.error;console.error=function(...e){const r=e.join(" ");r.includes("WebSocket")||r.includes("realtime")||r.includes("CORS")||r.includes("Content Too Large")||r.includes("Failed to fetch")||r.includes("access-control-allow-methods")||t.apply(console,e)}}const dS=q.createContext(null),hS="editor_auth",fS=({children:e})=>{const[t,r]=q.useState(null),[n,i]=q.useState(!0),[s,a]=q.useState(!1);q.useEffect((()=>{(()=>{try{const e=localStorage.getItem(hS);if(e){const t=JSON.parse(e);t.email&&t.name&&t.id?r(t):localStorage.removeItem(hS)}}catch(e){localStorage.removeItem(hS)}finally{i(!1)}})()}),[]),q.useEffect((()=>{t?localStorage.setItem(hS,JSON.stringify(t)):localStorage.removeItem(hS)}),[t]),q.useEffect((()=>{const e=setTimeout((()=>{t?window.postMessage({type:"enable-edit-mode"},"*"):window.postMessage({type:"disable-edit-mode"},"*")}),100);return()=>clearTimeout(e)}),[t]);const o={editor:t,isAuthenticated:!!t,isLoading:n,login:async(e,t)=>{try{if(!/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(e))throw new Error("Email must contain only Latin characters");if(!/^[A-Za-z\s\-]+$/.test(t))throw new Error("Name must contain only Latin characters, spaces, and hyphens");const n=e.trim().toLowerCase(),i=t.trim();if(!n||!i)throw new Error("Email and name are required");let s;const{data:a,error:o}=await uS.from("user_editors").select("*").eq("email",n).single();if(o&&"PGRST116"!==o.code)throw o;if(a){const{data:e,error:t}=await uS.from("user_editors").update({name:i,last_login:(new Date).toISOString()}).eq("email",n).select().single();if(t)throw t;s=e}else{const{data:e,error:t}=await uS.from("user_editors").insert({email:n,name:i,last_login:(new Date).toISOString()}).select().single();if(t)throw t;s=e}const l={id:s.id,email:s.email,name:s.name,loginTime:(new Date).toISOString()};return r(l),{success:!0,editor:l}}catch(n){return{success:!1,error:n.message}}},logout:()=>{r(null),a(!1)},updateEditor:async()=>{if(t)try{const{data:e,error:n}=await uS.from("user_editors").select("*").eq("id",t.id).single();if(n)throw n;e&&r({id:e.id,email:e.email,name:e.name,loginTime:t.loginTime,isActive:e.is_active,lastLogin:e.last_login})}catch(e){}},showAuthModal:s,openAuthModal:()=>{a(!0)},closeAuthModal:()=>{a(!1)}};return Z.jsx(dS.Provider,{value:o,children:e})},pS=()=>{const e=q.useContext(dS);if(!e)throw new Error("useEditorAuth must be used within EditorAuthProvider");return e},gS=async({editorId:e,editorEmail:t,editorName:r,editType:n,targetType:i,targetId:s,contentBefore:a,contentAfter:o,filePath:l=null,metadata:c={}})=>{try{const{data:u,error:d}=await uS.from("edit_history").insert({editor_id:e,editor_email:t,editor_name:r,edit_type:n,target_type:i,target_id:s,file_path:l,content_before:a,content_after:o,metadata:c}).select().single();if(d)throw d;return{success:!0,data:u}}catch(u){return{success:!1,error:u.message}}},mS=async(e={},t=100,r=0)=>{try{let n=uS.from("edit_history_with_editor").select("*",{count:"exact"});e.editType&&(n=n.eq("edit_type",e.editType)),e.targetType&&(n=n.eq("target_type",e.targetType)),e.editorEmail&&(n=n.eq("editor_email",e.editorEmail)),!1===e.showRolledBack&&(n=n.eq("is_rolled_back",!1));const{data:i,error:s,count:a}=await n.order("created_at",{ascending:!1}).range(r,r+t-1);if(s)throw s;return{success:!0,data:i,count:a}}catch(n){return{success:!1,error:n.message,data:[],count:0}}},yS=async(e,t,r=null)=>{try{const{data:n,error:i}=await uS.rpc("rollback_edit",{p_edit_id:e,p_rolled_back_by_email:t,p_rollback_reason:r});if(!i){if(!n.success)throw new Error(n.error);return{success:!0,data:n.data}}const{data:s,error:a}=await uS.from("edit_history").update({is_rolled_back:!0,rolled_back_at:(new Date).toISOString(),rolled_back_by:t,rollback_reason:r}).eq("id",e).select().single();if(a)throw a;return{success:!0,data:s}}catch(n){return{success:!1,error:n.message}}},vS=async(e=null)=>{try{let t=uS.from("edit_history").select("edit_type, created_at, is_rolled_back");e&&(t=t.eq("editor_email",e));const{data:r,error:n}=await t;if(n)throw n;const i={total:r.length,rolledBack:r.filter((e=>e.is_rolled_back)).length,active:r.filter((e=>!e.is_rolled_back)).length,byType:{},recent24h:0,recent7d:0},s=new Date,a=864e5;return r.forEach((e=>{i.byType[e.edit_type]=(i.byType[e.edit_type]||0)+1;const t=new Date(e.created_at),r=s-t;r<a&&i.recent24h++,r<7*a&&i.recent7d++})),{success:!0,stats:i}}catch(t){return{success:!1,error:t.message}}},bS=async()=>{try{const{data:e,error:t}=await uS.from("user_editors").select("*").order("last_login",{ascending:!1});if(t)throw t;return{success:!0,data:e}}catch(e){return{success:!1,error:e.message,data:[]}}},wS=async e=>{try{const{target_type:t,target_id:r,content_before:n,file_path:i,metadata:s,editor_id:a}=e;switch(t){case"ui_element":if(i){let e=null==s?void 0:s.line,t=null==s?void 0:s.column;if((!e||!t)&&r&&r.includes(":")){const n=r.split(":");n.length>=3&&(t=n.pop(),e=n.pop())}if(!e||!t)throw new Error("Missing line/column information for rollback");if(!(await fetch("/api/apply-edit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({editId:`${i}:${e}:${t}`,newFullText:n})})).ok)throw new Error("Failed to apply UI rollback");return{success:!0}}break;case"transcript":case"segment":case"speaker":{if(!(null==s?void 0:s.episodeSlug))return{success:!1,error:"Missing episode information"};let e=uS.from("transcripts").select("*").eq("episode_slug",s.episodeSlug);s.lang&&(e=e.eq("lang",s.lang));const{data:r,error:i}=await e.maybeSingle();if(i)throw i;if(!r)return{success:!1,error:"Transcript not found"};let a=Array.isArray(r.utterances)?r.utterances:[];const o=null==s?void 0:s.action;if("Delete"===o){let e;try{e="string"==typeof n?JSON.parse(n):n}catch(Jce){}if(!e)return{success:!1,error:"Cannot rollback delete without content data"};let t=s.segmentIndex;if(null==t){const r=Array.isArray(e)?e[0]:e;t=a.findIndex((e=>e.start>r.start)),-1===t&&(t=a.length)}Array.isArray(e)?a.splice(t,0,...e):a.splice(t,0,e)}else if("Insert"===o&&(null==s?void 0:s.segmentId))a=a.filter((e=>e.id!==s.segmentId&&e.start!==s.startMs));else if("Split"===o){let e;try{e="string"==typeof n?JSON.parse(n):n}catch(Jce){return{success:!1,error:"Invalid split data"}}if(!e||void 0===s.segmentIndex)return{success:!1,error:"Missing data for split rollback"};const t=s.createdSegmentsCount||2;a.splice(s.segmentIndex,t,e)}else if("Merge"===o){let e;try{e="string"==typeof n?JSON.parse(n):n}catch(Jce){return{success:!1,error:"Invalid merge data"}}if(!e||!Array.isArray(e)||void 0===s.segmentIndex)return{success:!1,error:"Missing data for merge rollback"};a.splice(s.segmentIndex,1,...e)}else if("speaker"===t||"ChangeSpeaker"===o||"ReassignSpeaker"===o||"RenameSpeakerGlobally"===o){const e=null==s?void 0:s.oldSpeaker,t=null==s?void 0:s.newSpeaker,r="RenameSpeakerGlobally"===o;if(r)a=a.map((r=>r.speaker===t?{...r,speaker:e}:r));else if(null==s?void 0:s.segmentId){const t=a.findIndex((e=>e.id===s.segmentId||e.start===s.segmentStart));-1!==t&&(a[t]={...a[t],speaker:e})}window.dispatchEvent(new CustomEvent("speakerUpdated",{detail:{episodeSlug:s.episodeSlug,action:o||"restored",segmentId:null==s?void 0:s.segmentId,oldSpeaker:e,newSpeaker:t,isGlobal:r}}))}else if(null==s?void 0:s.segmentId){const e=a.findIndex((e=>e.id===s.segmentId||e.start===s.segmentStart));if(-1===e)return{success:!1,error:"Segment not found in transcript"};a[e]={...a[e],text:n}}const{error:l}=await uS.from("transcripts").update({utterances:a}).eq("id",r.id);if(l)throw l;return window.dispatchEvent(new CustomEvent("transcriptUpdated",{detail:{episodeSlug:s.episodeSlug,action:o||"restored",segmentId:null==s?void 0:s.segmentId}})),{success:!0,message:"Transcript restored successfully"}}case"question":{const e=(null==s?void 0:s.questionId)||(r?r.split("_").pop():null);if(!e||"new"===e)return{success:!1,error:"Missing or invalid question ID"};const t=null==s?void 0:s.action,i=null==s?void 0:s.episodeSlug;if("delete"===t){let t=null==s?void 0:s.questionData;if(!t)try{t="string"==typeof n?JSON.parse(n):n}catch{const r=n.match(/Title:\s*([^,]+)/),s=n.match(/Time:\s*(\d+)/);t={id:e,title:r?r[1].trim():"Untitled",time:s?parseInt(s[1]):0,episode_slug:i}}!t.episode_slug&&i&&(t.episode_slug=i);const r={...t};delete r.is_intro,delete r.is_full_transcript;const{error:a}=await uS.from("timecodes").insert(r);if(a)throw a;return window.dispatchEvent(new CustomEvent("questionUpdated",{detail:{episodeSlug:i,action:"restored",questionId:e}})),{success:!0,message:"Question restored successfully"}}if("add"===t){const{error:t}=await uS.from("timecodes").delete().eq("id",e);if(t)throw t;return window.dispatchEvent(new CustomEvent("questionUpdated",{detail:{episodeSlug:i,action:"deleted",questionId:e}})),{success:!0,message:"Question addition rolled back"}}{let t={};try{const e="string"==typeof n?JSON.parse(n):n;void 0!==e.title&&(t.title=e.title),void 0!==e.time&&(t.time=e.time)}catch{const e=n.match(/Title:\s*([^,]+)/),r=n.match(/Time:\s*(\d+)/);e&&(t.title=e[1].trim()),r&&(t.time=parseInt(r[1]))}if(0===Object.keys(t).length)return{success:!1,error:"No data to restore"};const{error:r}=await uS.from("timecodes").update(t).eq("id",e);if(r)throw r;return window.dispatchEvent(new CustomEvent("questionUpdated",{detail:{episodeSlug:i,action:"updated",questionId:e,data:t}})),{success:!0,message:"Question restored successfully"}}}case"episode":{if(!(null==s?void 0:s.episodeSlug)&&!r)return{success:!1,error:"Missing episode slug"};const e=(null==s?void 0:s.episodeSlug)||r;if("add"===(null==s?void 0:s.action)){const{error:t}=await uS.from("episodes").delete().eq("slug",e);if(t)throw t;return window.dispatchEvent(new CustomEvent("episodeUpdated",{detail:{episodeSlug:e,action:"deleted"}})),{success:!0,message:"Episode addition rolled back"}}{let t={};try{const e="string"==typeof n?JSON.parse(n):n;["title_ru","title_en","description_ru","description_en","tags","keywords","difficulty","published","duration_ms"].forEach((r=>{void 0!==e[r]&&(t[r]=e[r])}))}catch{return{success:!1,error:"Invalid episode data format"}}if(0===Object.keys(t).length)return{success:!1,error:"No data to restore"};const{error:r}=await uS.from("episodes").update(t).eq("slug",e);if(r)throw r;return window.dispatchEvent(new CustomEvent("episodeUpdated",{detail:{episodeSlug:e,action:"updated",data:t}})),{success:!0,message:"Episode restored successfully"}}}default:throw new Error(`Unknown target type: ${t}`)}return{success:!1,error:"Target type not handled"}}catch(t){return{success:!1,error:t.message}}};var xS=K[" useId ".trim().toString()]||(()=>{}),SS=0;function ES(e){const[t,r]=q.useState(xS());return of((()=>{e||r((e=>e??String(SS++)))}),[e]),e||(t?`radix-${t}`:"")}var TS="focusScope.autoFocusOnMount",kS="focusScope.autoFocusOnUnmount",AS={bubbles:!1,cancelable:!0},_S=q.forwardRef(((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[o,l]=q.useState(null),c=Gh(i),u=Gh(s),d=q.useRef(null),h=jh(t,(e=>l(e))),f=q.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;q.useEffect((()=>{if(n){let e=function(e){if(f.paused||!o)return;const t=e.target;o.contains(t)?d.current=t:RS(d.current,{select:!0})},t=function(e){if(f.paused||!o)return;const t=e.relatedTarget;null!==t&&(o.contains(t)||RS(d.current,{select:!0}))},r=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&RS(o)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const n=new MutationObserver(r);return o&&n.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}}),[n,o,f.paused]),q.useEffect((()=>{if(o){IS.add(f);const t=document.activeElement;if(!o.contains(t)){const r=new CustomEvent(TS,AS);o.addEventListener(TS,c),o.dispatchEvent(r),r.defaultPrevented||(!function(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(RS(n,{select:t}),document.activeElement!==r)return}((e=CS(o),e.filter((e=>"A"!==e.tagName))),{select:!0}),document.activeElement===t&&RS(o))}return()=>{o.removeEventListener(TS,c),setTimeout((()=>{const e=new CustomEvent(kS,AS);o.addEventListener(kS,u),o.dispatchEvent(e),e.defaultPrevented||RS(t??document.body,{select:!0}),o.removeEventListener(kS,u),IS.remove(f)}),0)}}var e}),[o,c,u,f]);const p=q.useCallback((e=>{if(!r&&!n)return;if(f.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,i=document.activeElement;if(t&&i){const t=e.currentTarget,[n,s]=function(e){const t=CS(e),r=PS(t,e),n=PS(t.reverse(),e);return[r,n]}(t);n&&s?e.shiftKey||i!==s?e.shiftKey&&i===n&&(e.preventDefault(),r&&RS(s,{select:!0})):(e.preventDefault(),r&&RS(n,{select:!0})):i===t&&e.preventDefault()}}),[r,n,f.paused]);return Z.jsx(Kh.div,{tabIndex:-1,...a,ref:h,onKeyDown:p})}));function CS(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function PS(e,t){for(const r of e)if(!DS(r,{upTo:t}))return r}function DS(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function RS(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}_S.displayName="FocusScope";var IS=function(){let e=[];return{add(t){const r=e[0];t!==r&&(null==r||r.pause()),e=OS(e,t),e.unshift(t)},remove(t){var r;e=OS(e,t),null==(r=e[0])||r.resume()}}}();function OS(e,t){const r=[...e],n=r.indexOf(t);return-1!==n&&r.splice(n,1),r}var NS=0;function jS(){q.useEffect((()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??LS()),document.body.insertAdjacentElement("beforeend",e[1]??LS()),NS++,()=>{1===NS&&document.querySelectorAll("[data-radix-focus-guard]").forEach((e=>e.remove())),NS--}}),[])}function LS(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var MS="right-scroll-bar-position",FS="width-before-scroll-bar";function US(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var BS="undefined"!=typeof window?q.useLayoutEffect:q.useEffect,$S=new WeakMap;function zS(e,t){var r,n,i,s=(r=t||null,n=function(t){return e.forEach((function(e){return US(e,t)}))},(i=q.useState((function(){return{value:r,callback:n,facade:{get current(){return i.value},set current(e){var t=i.value;t!==e&&(i.value=e,i.callback(e,t))}}}}))[0]).callback=n,i.facade);return BS((function(){var t=$S.get(s);if(t){var r=new Set(t),n=new Set(e),i=s.current;r.forEach((function(e){n.has(e)||US(e,null)})),n.forEach((function(e){r.has(e)||US(e,i)}))}$S.set(s,e)}),[e]),s}function qS(e){return e}var VS=function(e){var t=e.sideCar,r=uy(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return q.createElement(n,cy({},r))};VS.isSideCarExport=!0;var KS=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=qS);var r=[],n=!1;return{read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(e){var i=t(e,n);return r.push(i),function(){r=r.filter((function(e){return e!==i}))}},assignSyncMedium:function(e){for(n=!0;r.length;){var t=r;r=[],t.forEach(e)}r={push:function(t){return e(t)},filter:function(){return r}}},assignMedium:function(e){n=!0;var t=[];if(r.length){var i=r;r=[],i.forEach(e),t=r}var s=function(){var r=t;t=[],r.forEach(e)},a=function(){return Promise.resolve().then(s)};a(),r={push:function(e){t.push(e),a()},filter:function(e){return t=t.filter(e),r}}}}}(null);return t.options=cy({async:!0,ssr:!1},e),t}(),HS=function(){},GS=q.forwardRef((function(e,t){var r=q.useRef(null),n=q.useState({onScrollCapture:HS,onWheelCapture:HS,onTouchMoveCapture:HS}),i=n[0],s=n[1],a=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,h=e.sideCar,f=e.noRelative,p=e.noIsolation,g=e.inert,m=e.allowPinchZoom,y=e.as,v=void 0===y?"div":y,b=e.gapMode,w=uy(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=h,S=zS([r,t]),E=cy(cy({},w),i);return q.createElement(q.Fragment,null,u&&q.createElement(x,{sideCar:KS,removeScrollBar:c,shards:d,noRelative:f,noIsolation:p,inert:g,setCallbacks:s,allowPinchZoom:!!m,lockRef:r,gapMode:b}),a?q.cloneElement(q.Children.only(o),cy(cy({},E),{ref:S})):q.createElement(v,cy({},E,{className:l,ref:S}),o))}));GS.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},GS.classNames={fullWidth:FS,zeroRight:MS};function WS(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var QS=function(){var e=0,t=null;return{add:function(r){var n,i;0==e&&(t=WS())&&(i=r,(n=t).styleSheet?n.styleSheet.cssText=i:n.appendChild(document.createTextNode(i)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},YS=function(){var e,t=(e=QS(),function(t,r){q.useEffect((function(){return e.add(t),function(){e.remove()}}),[t&&r])});return function(e){var r=e.styles,n=e.dynamic;return t(r,n),null}},XS={left:0,top:0,right:0,gap:0},JS=function(e){return parseInt(e||"",10)||0},ZS=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return XS;var t=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[JS(r),JS(n),JS(i)]}(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},eE=YS(),tE="data-scroll-locked",rE=function(e,t,r,n){var i=e.left,s=e.top,a=e.right,o=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(o,"px ").concat(n,";\n  }\n  body[").concat(tE,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===r&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(n,";\n    "),"padding"===r&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(MS," {\n    right: ").concat(o,"px ").concat(n,";\n  }\n  \n  .").concat(FS," {\n    margin-right: ").concat(o,"px ").concat(n,";\n  }\n  \n  .").concat(MS," .").concat(MS," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(FS," .").concat(FS," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(tE,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},nE=function(){var e=parseInt(document.body.getAttribute(tE)||"0",10);return isFinite(e)?e:0},iE=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=void 0===n?"margin":n;q.useEffect((function(){return document.body.setAttribute(tE,(nE()+1).toString()),function(){var e=nE()-1;e<=0?document.body.removeAttribute(tE):document.body.setAttribute(tE,e.toString())}}),[]);var s=q.useMemo((function(){return ZS(i)}),[i]);return q.createElement(eE,{styles:rE(s,!t,i,r?"":"!important")})},sE=!1;if("undefined"!=typeof window)try{var aE=Object.defineProperty({},"passive",{get:function(){return sE=!0,!0}});window.addEventListener("test",aE,aE),window.removeEventListener("test",aE,aE)}catch(mEe){sE=!1}var oE=!!sE&&{passive:!1},lE=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===r[t])},cE=function(e,t){var r=t.ownerDocument,n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),uE(e,n)){var i=dE(e,n);if(i[1]>i[2])return!0}n=n.parentNode}while(n&&n!==r.body);return!1},uE=function(e,t){return"v"===e?function(e){return lE(e,"overflowY")}(t):function(e){return lE(e,"overflowX")}(t)},dE=function(e,t){return"v"===e?[(r=t).scrollTop,r.scrollHeight,r.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var r},hE=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},fE=function(e){return[e.deltaX,e.deltaY]},pE=function(e){return e&&"current"in e?e.current:e},gE=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},mE=0,yE=[];function vE(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const bE=(wE=function(e){var t=q.useRef([]),r=q.useRef([0,0]),n=q.useRef(),i=q.useState(mE++)[0],s=q.useState(YS)[0],a=q.useRef(e);q.useEffect((function(){a.current=e}),[e]),q.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=Ay([e.lockRef.current],(e.shards||[]).map(pE),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(i))})),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(i))}))}}}),[e.inert,e.lockRef.current,e.shards]);var o=q.useCallback((function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!a.current.allowPinchZoom;var i,s=hE(e),o=r.current,l="deltaX"in e?e.deltaX:o[0]-s[0],c="deltaY"in e?e.deltaY:o[1]-s[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=cE(d,u);if(!h)return!0;if(h?i=d:(i="v"===d?"h":"v",h=cE(d,u)),!h)return!1;if(!n.current&&"changedTouches"in e&&(l||c)&&(n.current=i),!i)return!0;var f=n.current||i;return function(e,t,r,n,i){var s=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),a=s*n,o=r.target,l=t.contains(o),c=!1,u=a>0,d=0,h=0;do{if(!o)break;var f=dE(e,o),p=f[0],g=f[1]-f[2]-s*p;(p||g)&&uE(e,o)&&(d+=g,h+=p);var m=o.parentNode;o=m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE?m.host:m}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(u&&(i&&Math.abs(d)<1||!i&&a>d)||!u&&(i&&Math.abs(h)<1||!i&&-a>h))&&(c=!0),c}(f,t,e,"h"===f?l:c,!0)}),[]),l=q.useCallback((function(e){var r=e;if(yE.length&&yE[yE.length-1]===s){var n="deltaY"in r?fE(r):hE(r),i=t.current.filter((function(e){return e.name===r.type&&(e.target===r.target||r.target===e.shadowParent)&&(t=e.delta,i=n,t[0]===i[0]&&t[1]===i[1]);var t,i}))[0];if(i&&i.should)r.cancelable&&r.preventDefault();else if(!i){var l=(a.current.shards||[]).map(pE).filter(Boolean).filter((function(e){return e.contains(r.target)}));(l.length>0?o(r,l[0]):!a.current.noIsolation)&&r.cancelable&&r.preventDefault()}}}),[]),c=q.useCallback((function(e,r,n,i){var s={name:e,delta:r,target:n,should:i,shadowParent:vE(n)};t.current.push(s),setTimeout((function(){t.current=t.current.filter((function(e){return e!==s}))}),1)}),[]),u=q.useCallback((function(e){r.current=hE(e),n.current=void 0}),[]),d=q.useCallback((function(t){c(t.type,fE(t),t.target,o(t,e.lockRef.current))}),[]),h=q.useCallback((function(t){c(t.type,hE(t),t.target,o(t,e.lockRef.current))}),[]);q.useEffect((function(){return yE.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,oE),document.addEventListener("touchmove",l,oE),document.addEventListener("touchstart",u,oE),function(){yE=yE.filter((function(e){return e!==s})),document.removeEventListener("wheel",l,oE),document.removeEventListener("touchmove",l,oE),document.removeEventListener("touchstart",u,oE)}}),[]);var f=e.removeScrollBar,p=e.inert;return q.createElement(q.Fragment,null,p?q.createElement(s,{styles:gE(i)}):null,f?q.createElement(iE,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},KS.useMedium(wE),VS);var wE,xE=q.forwardRef((function(e,t){return q.createElement(GS,cy({},e,{ref:t,sideCar:bE}))}));xE.classNames=GS.classNames;const SE=xE;var EE=new WeakMap,TE=new WeakMap,kE={},AE=0,_E=function(e){return e&&(e.host||_E(e.parentNode))},CE=function(e,t,r,n){var i=function(e,t){return t.map((function(t){if(e.contains(t))return t;var r=_E(t);return r&&e.contains(r)?r:null})).filter((function(e){return Boolean(e)}))}(t,Array.isArray(e)?e:[e]);kE[r]||(kE[r]=new WeakMap);var s=kE[r],a=[],o=new Set,l=new Set(i),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};i.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,(function(e){if(o.has(e))u(e);else try{var t=e.getAttribute(n),i=null!==t&&"false"!==t,l=(EE.get(e)||0)+1,c=(s.get(e)||0)+1;EE.set(e,l),s.set(e,c),a.push(e),1===l&&i&&TE.set(e,!0),1===c&&e.setAttribute(r,"true"),i||e.setAttribute(n,"true")}catch(Jce){}}))};return u(t),o.clear(),AE++,function(){a.forEach((function(e){var t=EE.get(e)-1,i=s.get(e)-1;EE.set(e,t),s.set(e,i),t||(TE.has(e)||e.removeAttribute(n),TE.delete(e)),i||e.removeAttribute(r)})),--AE||(EE=new WeakMap,EE=new WeakMap,TE=new WeakMap,kE={})}},PE=function(e,t,r){void 0===r&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=t||function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),CE(n,i,r,"aria-hidden")):function(){return null}},DE="Dialog",[RE,IE]=Lh(DE),[OE,NE]=RE(DE),jE=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:s,modal:a=!0}=e,o=q.useRef(null),l=q.useRef(null),[c,u]=hf({prop:n,defaultProp:i??!1,onChange:s,caller:DE});return Z.jsx(OE,{scope:t,triggerRef:o,contentRef:l,contentId:ES(),titleId:ES(),descriptionId:ES(),open:c,onOpenChange:u,onOpenToggle:q.useCallback((()=>u((e=>!e))),[u]),modal:a,children:r})};jE.displayName=DE;var LE="DialogTrigger",ME=q.forwardRef(((e,t)=>{const{__scopeDialog:r,...n}=e,i=NE(LE,r),s=jh(t,i.triggerRef);return Z.jsx(Kh.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":nT(i.open),...n,ref:s,onClick:Ih(e.onClick,i.onOpenToggle)})}));ME.displayName=LE;var FE="DialogPortal",[UE,BE]=RE(FE,{forceMount:void 0}),$E=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:i}=e,s=NE(FE,t);return Z.jsx(UE,{scope:t,forceMount:r,children:q.Children.map(n,(e=>Z.jsx(cf,{present:r||s.open,children:Z.jsx(lf,{asChild:!0,container:i,children:e})})))})};$E.displayName=FE;var zE="DialogOverlay",qE=q.forwardRef(((e,t)=>{const r=BE(zE,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,s=NE(zE,e.__scopeDialog);return s.modal?Z.jsx(cf,{present:n||s.open,children:Z.jsx(KE,{...i,ref:t})}):null}));qE.displayName=zE;var VE=Fh("DialogOverlay.RemoveScroll"),KE=q.forwardRef(((e,t)=>{const{__scopeDialog:r,...n}=e,i=NE(zE,r);return Z.jsx(SE,{as:VE,allowPinchZoom:!0,shards:[i.contentRef],children:Z.jsx(Kh.div,{"data-state":nT(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})})),HE="DialogContent",GE=q.forwardRef(((e,t)=>{const r=BE(HE,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,s=NE(HE,e.__scopeDialog);return Z.jsx(cf,{present:n||s.open,children:s.modal?Z.jsx(WE,{...i,ref:t}):Z.jsx(QE,{...i,ref:t})})}));GE.displayName=HE;var WE=q.forwardRef(((e,t)=>{const r=NE(HE,e.__scopeDialog),n=q.useRef(null),i=jh(t,r.contentRef,n);return q.useEffect((()=>{const e=n.current;if(e)return PE(e)}),[]),Z.jsx(YE,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ih(e.onCloseAutoFocus,(e=>{var t;e.preventDefault(),null==(t=r.triggerRef.current)||t.focus()})),onPointerDownOutside:Ih(e.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()})),onFocusOutside:Ih(e.onFocusOutside,(e=>e.preventDefault()))})})),QE=q.forwardRef(((e,t)=>{const r=NE(HE,e.__scopeDialog),n=q.useRef(!1),i=q.useRef(!1);return Z.jsx(YE,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var s,a;null==(s=e.onCloseAutoFocus)||s.call(e,t),t.defaultPrevented||(n.current||null==(a=r.triggerRef.current)||a.focus(),t.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:t=>{var s,a;null==(s=e.onInteractOutside)||s.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));const o=t.target;(null==(a=r.triggerRef.current)?void 0:a.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})})),YE=q.forwardRef(((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=e,o=NE(HE,r),l=q.useRef(null),c=jh(t,l);return jS(),Z.jsxs(Z.Fragment,{children:[Z.jsx(_S,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:s,children:Z.jsx(ef,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":nT(o.open),...a,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),Z.jsxs(Z.Fragment,{children:[Z.jsx(oT,{titleId:o.titleId}),Z.jsx(lT,{contentRef:l,descriptionId:o.descriptionId})]})]})})),XE="DialogTitle",JE=q.forwardRef(((e,t)=>{const{__scopeDialog:r,...n}=e,i=NE(XE,r);return Z.jsx(Kh.h2,{id:i.titleId,...n,ref:t})}));JE.displayName=XE;var ZE="DialogDescription",eT=q.forwardRef(((e,t)=>{const{__scopeDialog:r,...n}=e,i=NE(ZE,r);return Z.jsx(Kh.p,{id:i.descriptionId,...n,ref:t})}));eT.displayName=ZE;var tT="DialogClose",rT=q.forwardRef(((e,t)=>{const{__scopeDialog:r,...n}=e,i=NE(tT,r);return Z.jsx(Kh.button,{type:"button",...n,ref:t,onClick:Ih(e.onClick,(()=>i.onOpenChange(!1)))})}));function nT(e){return e?"open":"closed"}rT.displayName=tT;var iT="DialogTitleWarning",[sT,aT]=function(e,t){const r=q.createContext(t),n=e=>{const{children:t,...n}=e,i=q.useMemo((()=>n),Object.values(n));return Z.jsx(r.Provider,{value:i,children:t})};return n.displayName=e+"Provider",[n,function(n){const i=q.useContext(r);if(i)return i;if(void 0!==t)return t;throw new Error(`\`${n}\` must be used within \`${e}\``)}]}(iT,{contentName:HE,titleName:XE,docsSlug:"dialog"}),oT=({titleId:e})=>{const t=aT(iT),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return q.useEffect((()=>{if(e){document.getElementById(e)}}),[r,e]),null},lT=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${aT("DialogDescriptionWarning").contentName}}.`;return q.useEffect((()=>{var r;const n=null==(r=e.current)?void 0:r.getAttribute("aria-describedby");if(t&&n){document.getElementById(t)}}),[r,e,t]),null},cT=jE,uT=ME,dT=$E,hT=qE,fT=GE,pT=JE,gT=eT,mT=rT;const yT=cT,vT=dT,bT=V.forwardRef((({className:e,...t},r)=>Z.jsx(hT,{ref:r,className:Sm("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t})));bT.displayName=hT.displayName;const wT=V.forwardRef((({className:e,children:t,...r},n)=>Z.jsxs(vT,{children:[Z.jsx(bT,{}),Z.jsxs(fT,{ref:n,className:Sm("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,Z.jsxs(mT,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[Z.jsx(Ng,{className:"h-4 w-4"}),Z.jsx("span",{className:"sr-only",children:"Close"})]})]})]})));wT.displayName=fT.displayName;const xT=({className:e,...t})=>Z.jsx("div",{className:Sm("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});xT.displayName="DialogHeader";const ST=({className:e,...t})=>Z.jsx("div",{className:Sm("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ST.displayName="DialogFooter";const ET=V.forwardRef((({className:e,...t},r)=>Z.jsx(pT,{ref:r,className:Sm("text-lg font-semibold leading-none tracking-tight",e),...t})));ET.displayName=pT.displayName;const TT=V.forwardRef((({className:e,...t},r)=>Z.jsx(gT,{ref:r,className:Sm("text-sm text-muted-foreground",e),...t})));TT.displayName=gT.displayName;const kT=sp("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",outlineSubtle:"border border-slate-700 bg-slate-800/50 hover:bg-slate-700/70 text-slate-300",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",xs:"h-7 rounded-md px-2 text-xs",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),AT=q.forwardRef((({className:e,variant:t,size:r,asChild:n=!1,...i},s)=>{const a=n?Uh:"button";return Z.jsx(a,{className:Sm(kT({variant:t,size:r,className:e})),ref:s,...i})}));AT.displayName="Button";const _T=V.forwardRef((({className:e,type:t,...r},n)=>Z.jsx("input",{type:t,className:Sm("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r})));_T.displayName="Input";var CT=q.forwardRef(((e,t)=>Z.jsx(Kh.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));CT.displayName="Label";var PT=CT;const DT=sp("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),RT=V.forwardRef((({className:e,...t},r)=>Z.jsx(PT,{ref:r,className:Sm(DT(),e),...t})));RT.displayName=PT.displayName;const IT=({isOpen:e,onClose:t,onSuccess:r,currentLanguage:n})=>{const{login:i}=pS(),[s,a]=q.useState(""),[o,l]=q.useState(""),[c,u]=q.useState(""),[d,h]=q.useState(!1),f=e=>/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(e),p=e=>/^[A-Za-z\s\-]+$/.test(e);return Z.jsx(yT,{open:e,onOpenChange:t,children:Z.jsxs(wT,{className:"sm:max-w-md bg-slate-800 border-slate-700",children:[Z.jsxs(xT,{children:[Z.jsxs(ET,{className:"text-white flex items-center gap-2",children:[Z.jsx(Gp,{size:20,className:"text-purple-400"}),iy("editorAuthentication",n)]}),Z.jsx(TT,{className:"text-slate-300",children:iy("editorAuthDescription",n)})]}),Z.jsxs("form",{onSubmit:async e=>{e.preventDefault(),u(""),h(!0);try{const e=await i(s,o);e.success?(a(""),l(""),r&&r(e.editor),t&&t()):u(e.error||iy("loginFailed",n))}catch(mEe){u(mEe.message||iy("errorGeneric",n))}finally{h(!1)}},className:"space-y-4 mt-4",children:[Z.jsxs("div",{className:"space-y-2",children:[Z.jsx(RT,{htmlFor:"email",className:"text-slate-200",children:iy("email",n)}),Z.jsx(_T,{id:"email",type:"email",value:s,onChange:e=>{const t=e.target.value;a(t),c&&f(t)&&u("")},placeholder:iy("emailPlaceholder",n),required:!0,disabled:d,className:"bg-slate-700 border-slate-600 text-white placeholder:text-slate-400 focus:border-purple-500"}),s&&!f(s)&&Z.jsxs("p",{className:"text-xs text-amber-400 flex items-center gap-1",children:[Z.jsx(cp,{size:12}),iy("emailLatinOnly",n)]})]}),Z.jsxs("div",{className:"space-y-2",children:[Z.jsx(RT,{htmlFor:"name",className:"text-slate-200",children:iy("name",n)}),Z.jsx(_T,{id:"name",type:"text",value:o,onChange:e=>{const t=e.target.value;l(t),c&&p(t)&&u("")},placeholder:iy("namePlaceholder",n),required:!0,disabled:d,className:"bg-slate-700 border-slate-600 text-white placeholder:text-slate-400 focus:border-purple-500"}),o&&!p(o)&&Z.jsxs("p",{className:"text-xs text-amber-400 flex items-center gap-1",children:[Z.jsx(cp,{size:12}),iy("nameLatinOnly",n)]})]}),c&&Z.jsx("div",{className:"p-3 rounded-md bg-red-900/20 border border-red-500/30",children:Z.jsxs("p",{className:"text-sm text-red-400 flex items-center gap-2",children:[Z.jsx(cp,{size:16}),c]})}),Z.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[Z.jsx(AT,{type:"button",variant:"outline",onClick:t,disabled:d,className:"bg-slate-700 border-slate-600 text-slate-200 hover:bg-slate-600",children:iy("cancel",n)}),Z.jsx(AT,{type:"submit",disabled:d||!f(s)||!p(o),className:"bg-purple-600 hover:bg-purple-700 text-white",children:d?Z.jsxs("span",{className:"flex items-center gap-2",children:[Z.jsx("span",{className:"animate-spin",children:""}),iy("authenticating",n)]}):Z.jsxs("span",{className:"flex items-center gap-2",children:[Z.jsx(mp,{size:16}),iy("authenticate",n)]})})]})]})]})})},OT=q.forwardRef((({className:e,...t},r)=>Z.jsx("div",{ref:r,className:Sm("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t})));OT.displayName="Card";const NT=q.forwardRef((({className:e,...t},r)=>Z.jsx("div",{ref:r,className:Sm("flex flex-col space-y-1.5 p-6",e),...t})));NT.displayName="CardHeader";const jT=q.forwardRef((({className:e,...t},r)=>Z.jsx("h3",{ref:r,className:Sm("text-2xl font-semibold leading-none tracking-tight",e),...t})));jT.displayName="CardTitle";const LT=q.forwardRef((({className:e,...t},r)=>Z.jsx("p",{ref:r,className:Sm("text-sm text-muted-foreground",e),...t})));LT.displayName="CardDescription";const MT=q.forwardRef((({className:e,...t},r)=>Z.jsx("div",{ref:r,className:Sm("p-6 pt-0",e),...t})));MT.displayName="CardContent";q.forwardRef((({className:e,...t},r)=>Z.jsx("div",{ref:r,className:Sm("flex items-center p-6 pt-0",e),...t}))).displayName="CardFooter";const FT=V.forwardRef((({className:e="",variant:t="default",children:r,...n},i)=>{const s=`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 ${{default:"bg-primary text-primary-foreground hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground border border-input bg-background hover:bg-accent hover:text-accent-foreground",success:"bg-green-100 text-green-800 hover:bg-green-200",warning:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200",info:"bg-blue-100 text-blue-800 hover:bg-blue-200"}[t]} ${e}`;return Z.jsx("div",{ref:i,className:s,...n,children:r})}));function UT(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}FT.displayName="Badge";const BT=43200;let $T={};function zT(e){const t=UT(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function qT(e,t){const r=UT(e),n=UT(t),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function VT(e){return function(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}(e,Date.now())}function KT(e){const t=UT(e);return+function(e){const t=UT(e);return t.setHours(23,59,59,999),t}(t)===+function(e){const t=UT(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}(t)}function HT(e,t){const r=UT(e),n=UT(t),i=qT(r,n),s=Math.abs(function(e,t){const r=UT(e),n=UT(t);return 12*(r.getFullYear()-n.getFullYear())+(r.getMonth()-n.getMonth())}(r,n));let a;if(s<1)a=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*s);let t=qT(r,n)===-i;KT(UT(e))&&1===s&&1===qT(e,n)&&(t=!1),a=i*(s-Number(t))}return 0===a?0:a}function GT(e,t,r){const n=function(e,t){return+UT(e)-+UT(t)}(e,t)/1e3;return(i=null==r?void 0:r.roundingMethod,e=>{const t=(i?Math[i]:Math.trunc)(e);return 0===t?0:t})(n);var i}const WT={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function QT(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const YT={date:QT({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:QT({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:QT({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},XT={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function JT(e){return(t,r)=>{let n;if("formatting"===((null==r?void 0:r.context)?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=(null==r?void 0:r.width)?String(r.width):t;n=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=(null==r?void 0:r.width)?String(r.width):e.defaultWidth;n=e.values[i]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}const ZT={ordinalNumber:(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:JT({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:JT({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:JT({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:JT({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:JT({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function ek(e){return(t,r={})=>{const n=r.width,i=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],o=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r;return}(o,(e=>e.test(a))):function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r;return}(o,(e=>e.test(a)));let c;c=e.valueCallback?e.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;return{value:c,rest:t.slice(a.length)}}}const tk={ordinalNumber:(rk={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const r=e.match(rk.matchPattern);if(!r)return null;const n=r[0],i=e.match(rk.parsePattern);if(!i)return null;let s=rk.valueCallback?rk.valueCallback(i[0]):i[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(n.length)}}),era:ek({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:ek({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:ek({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:ek({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:ek({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var rk;const nk={code:"en-US",formatDistance:(e,t,r)=>{let n;const i=WT[e];return n="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),(null==r?void 0:r.addSuffix)?r.comparison&&r.comparison>0?"in "+n:n+" ago":n},formatLong:YT,formatRelative:(e,t,r,n)=>XT[e],localize:ZT,match:tk,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ik(e,t,r){const n=$T,i=(null==r?void 0:r.locale)??n.locale??nk,s=qT(e,t);if(isNaN(s))throw new RangeError("Invalid time value");const a=Object.assign({},r,{addSuffix:null==r?void 0:r.addSuffix,comparison:s});let o,l;s>0?(o=UT(t),l=UT(e)):(o=UT(e),l=UT(t));const c=GT(l,o),u=(zT(l)-zT(o))/1e3,d=Math.round((c-u)/60);let h;if(d<2)return(null==r?void 0:r.includeSeconds)?c<5?i.formatDistance("lessThanXSeconds",5,a):c<10?i.formatDistance("lessThanXSeconds",10,a):c<20?i.formatDistance("lessThanXSeconds",20,a):c<40?i.formatDistance("halfAMinute",0,a):c<60?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",1,a):0===d?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",d,a);if(d<45)return i.formatDistance("xMinutes",d,a);if(d<90)return i.formatDistance("aboutXHours",1,a);if(d<1440){const e=Math.round(d/60);return i.formatDistance("aboutXHours",e,a)}if(d<2520)return i.formatDistance("xDays",1,a);if(d<BT){const e=Math.round(d/1440);return i.formatDistance("xDays",e,a)}if(d<86400)return h=Math.round(d/BT),i.formatDistance("aboutXMonths",h,a);if(h=HT(l,o),h<12){const e=Math.round(d/BT);return i.formatDistance("xMonths",e,a)}{const e=h%12,t=Math.trunc(h/12);return e<3?i.formatDistance("aboutXYears",t,a):e<9?i.formatDistance("overXYears",t,a):i.formatDistance("almostXYears",t+1,a)}}function sk(e,t){return ik(e,VT(e),t)}const ak=({currentLanguage:e})=>{const{editor:t,isAuthenticated:r,logout:n}=pS(),[i,s]=q.useState(!1),[a,o]=q.useState([]),[l,c]=q.useState(!0),[u,d]=q.useState(new Set),{toast:h}=Fm();q.useEffect((()=>{r&&t?f():c(!1)}),[r,t]);const f=async()=>{if(t){c(!0);try{const r=await(async(e,t=50,r=0)=>{try{const{data:n,error:i,count:s}=await uS.from("edit_history_with_editor").select("*",{count:"exact"}).eq("editor_email",e).order("created_at",{ascending:!1}).range(r,r+t-1);if(i)throw i;return{success:!0,data:n,count:s}}catch(n){return{success:!1,error:n.message,data:[],count:0}}})(t.email,50,0);r.success?o(r.data):h({title:iy("errorLoadingHistory",e),description:r.error,variant:"destructive"})}catch(r){h({title:iy("errorGeneric",e),description:r.message,variant:"destructive"})}finally{c(!1)}}};if(!r)return Z.jsxs(OT,{className:"bg-slate-800 border-slate-700",children:[Z.jsxs(NT,{children:[Z.jsxs(jT,{className:"text-white flex items-center gap-2",children:[Z.jsx(zp,{size:20,className:"text-purple-400"}),iy("editHistoryTitle",e)]}),Z.jsx(LT,{className:"text-slate-300",children:iy("loginToViewEditHistory",e)})]}),Z.jsxs(MT,{children:[Z.jsxs(AT,{onClick:()=>s(!0),className:"w-full bg-purple-600 hover:bg-purple-700",children:[Z.jsx(Gp,{size:16,className:"mr-2"}),iy("loginAsEditor",e)]}),Z.jsx(IT,{isOpen:i,onClose:()=>s(!1),currentLanguage:e})]})]});const p=a.filter((e=>!e.is_rolled_back)),g=a.filter((e=>e.is_rolled_back));return Z.jsxs(OT,{className:"bg-slate-800 border-slate-700",children:[Z.jsx(NT,{children:Z.jsxs("div",{className:"flex justify-between items-start",children:[Z.jsxs("div",{children:[Z.jsxs(jT,{className:"text-white flex items-center gap-2 mb-2",children:[Z.jsx(zp,{size:20,className:"text-purple-400"}),iy("editHistoryTitle",e)]}),Z.jsxs(LT,{className:"text-slate-300",children:[iy("loggedInAs",e),": ",Z.jsx("span",{className:"text-purple-400",children:t.name})]})]}),Z.jsxs("div",{className:"flex gap-2",children:[Z.jsx(AT,{onClick:f,variant:"ghost",size:"sm",className:"text-slate-300 hover:text-white",children:Z.jsx(dg,{size:14})}),Z.jsx(AT,{onClick:n,variant:"ghost",size:"sm",className:"text-slate-300 hover:text-white",children:Z.jsx(Wp,{size:14})})]})]})}),Z.jsx(MT,{children:l?Z.jsx("div",{className:"text-center py-8 text-slate-400",children:iy("loading",e)}):0===a.length?Z.jsxs("div",{className:"text-center py-8 text-slate-400",children:[Z.jsx(cp,{size:32,className:"mx-auto mb-2 opacity-50"}),Z.jsx("p",{children:iy("noEditsYet",e)})]}):Z.jsxs("div",{className:"space-y-4",children:[Z.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Z.jsxs("div",{className:"bg-slate-700 p-3 rounded",children:[Z.jsx("p",{className:"text-xs text-slate-400",children:iy("activeEdits",e)}),Z.jsx("p",{className:"text-2xl text-green-400 font-bold",children:p.length})]}),Z.jsxs("div",{className:"bg-slate-700 p-3 rounded",children:[Z.jsx("p",{className:"text-xs text-slate-400",children:iy("rolledBack",e)}),Z.jsx("p",{className:"text-2xl text-amber-400 font-bold",children:g.length})]})]}),Z.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:a.map((r=>Z.jsx(OT,{className:"bg-slate-700 border-slate-600 "+(r.is_rolled_back?"opacity-60":""),children:Z.jsxs(MT,{className:"p-3",children:[Z.jsxs("div",{className:"flex justify-between items-start mb-2",children:[Z.jsxs("div",{className:"flex items-start gap-2 flex-1",children:[Z.jsx(Rp,{size:16,className:"text-purple-400 mt-1"}),Z.jsxs("div",{className:"flex-1",children:[Z.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[Z.jsx(FT,{variant:"outline",className:"text-xs bg-purple-900/30 text-purple-300 border-purple-500/30",children:r.edit_type}),r.target_type&&Z.jsx(FT,{variant:"outline",className:"text-xs bg-blue-900/30 text-blue-300 border-blue-500/30",children:r.target_type}),r.is_rolled_back&&Z.jsx(FT,{variant:"outline",className:"text-xs bg-amber-900/30 text-amber-300 border-amber-500/30",children:iy("rolledBack",e)})]}),Z.jsxs("p",{className:"text-xs text-slate-400",children:[Z.jsx(Ep,{size:10,className:"inline mr-1"}),sk(new Date(r.created_at),{addSuffix:!0})]})]})]}),Z.jsxs("div",{className:"flex gap-1",children:[Z.jsx(AT,{size:"sm",variant:"ghost",onClick:()=>{return e=r.id,void d((t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r}));var e},className:"h-6 w-6 p-0 text-slate-400 hover:text-white",children:u.has(r.id)?Z.jsx(xp,{size:14}):Z.jsx(vp,{size:14})}),!r.is_rolled_back&&Z.jsxs(AT,{size:"sm",variant:"ghost",onClick:()=>(async r=>{if(!t)return;if(window.confirm(iy("confirmRollback",e)))try{const n=await yS(r.id,t.email,"User rollback");if(!n.success)throw new Error(n.error);(await wS(n.data)).success?h({title:iy("editRolledBack",e),description:iy("contentRestored",e)}):h({title:iy("rollbackRecorded",e),description:iy("rollbackRecordedDesc",e),variant:"default"}),await f()}catch(n){h({title:iy("rollbackFailed",e),description:n.message,variant:"destructive"})}})(r),className:"h-6 px-2 text-xs text-red-400 hover:text-red-300 hover:bg-red-900/20",children:[Z.jsx(kg,{size:12,className:"mr-1"}),iy("undo",e)]})]})]}),u.has(r.id)&&Z.jsxs("div",{className:"mt-3 space-y-2 border-t border-slate-600 pt-2",children:[Z.jsxs("div",{children:[Z.jsxs("p",{className:"text-xs text-slate-400 mb-1 flex items-center gap-1",children:[Z.jsx(Og,{size:10}),iy("beforeLabel",e),":"]}),Z.jsx("div",{className:"bg-slate-800 p-2 rounded text-xs text-slate-300 font-mono whitespace-pre-wrap max-h-24 overflow-y-auto",children:r.content_before||"(empty)"})]}),Z.jsxs("div",{children:[Z.jsxs("p",{className:"text-xs text-slate-400 mb-1 flex items-center gap-1",children:[Z.jsx(gp,{size:10}),iy("afterLabel",e),":"]}),Z.jsx("div",{className:"bg-slate-800 p-2 rounded text-xs text-green-300 font-mono whitespace-pre-wrap max-h-24 overflow-y-auto",children:r.content_after||"(empty)"})]}),r.is_rolled_back&&Z.jsxs("div",{className:"bg-amber-900/20 p-2 rounded",children:[Z.jsxs("p",{className:"text-xs text-amber-300",children:[iy("rolledBack",e)," ",sk(new Date(r.rolled_back_at),{addSuffix:!0})]}),r.rollback_reason&&Z.jsxs("p",{className:"text-xs text-amber-200 mt-1",children:[iy("reason",e),": ",r.rollback_reason]})]})]})]})},r.id)))})]})})]})},ok=({currentLanguage:e})=>{rh();const[t,r]=q.useState(!1),n=eh(),i=n.pathname.includes("/episodes")||n.pathname.includes("/episode/");return Z.jsxs(Z.Fragment,{children:[Z.jsx("footer",{className:"bg-transparent px-4 py-3",children:Z.jsx("div",{className:"max-w-4xl mx-auto flex items-center justify-center gap-3",children:i&&Z.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-800/60 hover:bg-slate-700/80 border border-slate-600/30 text-white rounded-lg shadow-lg backdrop-blur-sm transition-all hover:scale-105",title:iy("editHistoryTitle",e),children:[Z.jsx(zp,{className:"h-4 w-4"}),Z.jsx("span",{className:"text-sm font-medium",children:iy("editHistoryTitle",e)})]})})}),t&&Z.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:Z.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden",children:[Z.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[Z.jsxs("div",{className:"flex items-center gap-3",children:[Z.jsx(zp,{className:"h-6 w-6 text-blue-400"}),Z.jsx("h2",{className:"text-xl font-bold text-white",children:iy("editHistoryTitle",e)})]}),Z.jsx("button",{onClick:()=>{r(!1)},className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",children:Z.jsx(Ng,{className:"h-5 w-5"})})]}),Z.jsx("div",{className:"h-[500px] overflow-y-auto",children:Z.jsx(ak,{currentLanguage:e})})]})})]})},lk=({onLanguageSelect:e,currentLanguage:t,compact:r=!1})=>{const n=[{code:"ru",name:"",Flag:Bm},{code:"es",name:"Espaol",Flag:$m},{code:"en",name:"English",Flag:zm},{code:"de",name:"Deutsch",Flag:qm},{code:"fr",name:"Franais",Flag:Vm},{code:"pl",name:"Polski",Flag:Km}];return r?Z.jsx("div",{className:"space-y-3",children:n.map((r=>Z.jsxs("button",{onClick:()=>e(r.code),className:"w-full py-2 px-3 rounded-lg transition-colors flex items-center gap-3 text-left\n              "+(t===r.code?"bg-purple-600 text-white":"bg-slate-700 hover:bg-slate-600 text-slate-300 hover:text-white"),children:[Z.jsx(r.Flag,{className:"w-4 h-3 flex-shrink-0"}),r.name]},r.code)))}):Z.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in",children:Z.jsxs("div",{className:"bg-slate-800 p-6 sm:p-8 rounded-xl shadow-2xl border border-slate-700 max-w-md w-full text-center animate-scale-in",children:[Z.jsx("div",{className:"flex justify-center mb-4",children:Z.jsx("div",{className:"h-12 w-12 text-purple-400",children:""})}),Z.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-3",children:iy("selectLanguageModalTitle",t)}),Z.jsx("p",{className:"text-slate-400 text-sm mb-6",children:iy("selectLanguageModalDescription",t)}),Z.jsx("div",{className:"flex flex-col gap-3 sm:gap-4",children:n.map((t=>Z.jsxs("button",{onClick:()=>e(t.code),className:"w-full bg-purple-600 hover:bg-purple-700 text-white text-base py-3 rounded-lg transition-colors flex items-center justify-center gap-3",children:[Z.jsx(t.Flag,{className:"w-5 h-4 flex-shrink-0"}),t.name]},t.code)))})]})})},ck=q.createContext(null),uk=({children:e})=>{const[t,r]=q.useState(null),[n,i]=q.useState(null),[s,a]=q.useState(!1);q.useEffect((()=>{if(window.Telegram&&window.Telegram.WebApp){const e=window.Telegram.WebApp;e.expand(),e.ready(),r(e),e.initDataUnsafe&&e.initDataUnsafe.user?i(e.initDataUnsafe.user):i({id:12345,first_name:"",last_name:"",username:"test_user",language_code:"ru"}),a(!0)}else i({id:12345,first_name:"",last_name:"",username:"test_user",language_code:"ru"}),a(!0)}),[]);return Z.jsx(ck.Provider,{value:{telegram:t,user:n,isReady:s,sendData:e=>{t&&t.sendData(JSON.stringify(e))},showAlert:e=>{t?t.showAlert(e):alert(e)},showConfirm:(e,r)=>{if(t)t.showConfirm(e,r);else{r(window.confirm(e))}},closeApp:()=>{t&&t.close()}},children:e})},dk=V.memo((({questions:e,episodeSlug:t,currentLanguage:r,updateTimestamp:n})=>{const i=rh(),{lang:s}=nh(),a=s||r||"ru";if(!e||0===e.length)return Z.jsx("div",{className:"mt-3 pl-2 py-1 text-xs text-slate-400",children:iy("noQuestionsAddedYet",r)});const o=[...e].sort(((e,t)=>(e.time||0)-(t.time||0)));return Z.jsxs("div",{className:"mt-3 pl-2",children:[Z.jsx("div",{className:"text-xs text-purple-300 font-semibold mb-1 py-1",children:iy("questions",r)}),Z.jsx("ul",{className:"space-y-1.5 overflow-hidden pl-2 border-l-2 border-purple-500/20 animate-fade-in",children:o.map((e=>Z.jsx("li",{className:"animate-slide-in-left",children:Z.jsxs("button",{onClick:()=>(e=>{const r=Math.floor(e.time||0);i(`/${a}/${t}#${r}`)})(e),className:"text-xs text-slate-300 hover:text-purple-200 hover:underline flex items-start gap-1.5 text-left w-full",children:[Z.jsx($p,{className:"h-3 w-3 text-purple-400 shrink-0 mt-0.5"}),Z.jsx("span",{className:"flex-grow",title:e.title,children:e.title||iy("untitledQuestion",r)})]})},`${e.id}-${e.lang||"unknown"}-${t}`)))})]},`questions-${t}-${n||""}`)})),hk=V.memo((({episode:e,currentLanguage:t,questionsCount:r,questionsForEpisode:n,updateTimestamp:i})=>{const{lang:s}=nh(),a=s||t||"ru",o=((e,r)=>{if(e&&""!==e.trim())return e;const n=iy("meditationTitlePrefix",t);let i="";return r&&(i=km(r,t)),i?`${n} ${i}`:n})(e.title,e.date);return Z.jsx("li",{className:"bg-slate-800/70 rounded-xl shadow-lg hover:shadow-purple-500/20 transition-all duration-300 ease-in-out border border-slate-700/50 hover:border-purple-500/60 animate-fade-in-up",children:Z.jsxs("div",{className:"p-4",children:[Z.jsxs(Ah,{to:`/${a}/${e.slug}`,className:"block group mb-2",children:[Z.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-2",children:Z.jsx("h2",{className:"text-lg font-semibold group-hover:text-purple-200 transition-colors truncate flex-grow text-purple-300",title:o,children:o})}),Z.jsxs("div",{className:"text-sm text-slate-400 flex flex-wrap gap-x-4 gap-y-1",children:[e.duration>0&&Z.jsxs("span",{children:[iy("duration",t),": ",Z.jsx("span",{className:"font-medium text-slate-300",children:Tm(e.duration,!1)})]}),Z.jsx("span",{children:sy("questionCount",t,r||0,{count:r||0})})]})]}),Z.jsx(dk,{questions:n,episodeSlug:e.slug,currentLanguage:t,updateTimestamp:i})]})})})),fk=V.memo((({episodes:e,currentLanguage:t,episodeQuestionsCount:r,allQuestions:n,updateTimestamp:i})=>{if(0===e.length)return null;const s=q.useMemo((()=>e.map((e=>{var i;const s="all"===e.lang?t:e.lang;return{episodeSlug:e.slug,questions:n.filter((t=>t.episode_slug===e.slug&&t.lang===s))||[],questionsCount:(null==(i=r[e.slug])?void 0:i[s])||0}}))),[e,t,r,n,i]);return Z.jsx("ul",{className:"space-y-4 animate-fade-in",children:s.map((r=>{const n=e.find((e=>e.slug===r.episodeSlug)),s=r.questionsCount;return Z.jsx(hk,{episode:n,currentLanguage:t,questionsCount:s,questionsForEpisode:r.questions,updateTimestamp:i},`${n.slug}-${"all"===n.lang?t:n.lang}-${i||""}`)}))})})),pk=({value:e,onChange:t,options:r=[],placeholder:n="",disabled:i=!1,className:s="",...a})=>{const[o,l]=q.useState(!1),[c,u]=q.useState(-1),d=q.useRef(null),h=q.useRef(null);q.useEffect((()=>{const e=e=>{d.current&&!d.current.contains(e.target)&&(l(!1),u(-1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]),q.useEffect((()=>{var t;if(o&&h.current){const n=r.findIndex((t=>t.value===e));n>=0&&(u(n),null==(t=h.current.children[n])||t.scrollIntoView({block:"nearest",behavior:"smooth"}))}}),[o,e,r]);const f=e=>{t(e.value),l(!1),u(-1)},p=r.find((t=>t.value===e));return Z.jsxs("div",{ref:d,className:`relative ${s}`,...a,children:[Z.jsxs("button",{type:"button",onClick:()=>!i&&l(!o),onKeyDown:e=>{if(o)switch(e.key){case"ArrowDown":e.preventDefault(),u((e=>e<r.length-1?e+1:0));break;case"ArrowUp":e.preventDefault(),u((e=>e>0?e-1:r.length-1));break;case"Enter":e.preventDefault(),c>=0&&f(r[c]);break;case"Escape":l(!1),u(-1)}else"Enter"!==e.key&&" "!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),l(!0))},disabled:i,className:"\n          w-full h-9 px-3 pr-8 text-left text-xs sm:text-sm\n          bg-slate-800/50 border border-slate-700/50 rounded-lg\n          text-slate-100 hover:border-purple-500/70 focus:border-purple-500/70\n          focus:outline-none focus:ring-2 focus:ring-purple-500/20\n          disabled:opacity-50 disabled:cursor-not-allowed\n          transition-all duration-200 flex items-center justify-between\n          shadow-lg\n        ","aria-haspopup":"listbox","aria-expanded":o,"aria-label":(null==p?void 0:p.label)||n,children:[Z.jsx("span",{className:"truncate",children:(null==p?void 0:p.label)||n}),Z.jsx(vp,{className:"h-4 w-4 text-slate-400 transition-transform duration-200 "+(o?"rotate-180":"")})]}),o&&Z.jsx("div",{className:"absolute z-50 w-full mt-1 bg-slate-800/95 border border-slate-700/50 rounded-lg shadow-xl backdrop-blur-sm",children:Z.jsx("ul",{ref:h,role:"listbox",className:"py-1 max-h-60 overflow-auto",children:r.map(((t,n)=>Z.jsx("li",{role:"option","aria-selected":t.value===e,className:`\n                  px-3 py-2 text-xs sm:text-sm cursor-pointer\n                  transition-colors duration-150\n                  ${t.value===e?"bg-purple-600/30 text-purple-200":c===n?"bg-slate-700/50 text-slate-200":"text-slate-300 hover:bg-slate-700/30 hover:text-slate-200"}\n                  ${0===n?"rounded-t-lg":""}\n                  ${n===r.length-1?"rounded-b-lg":""}\n                `,onClick:()=>f(t),onMouseEnter:()=>u(n),children:t.label},t.value)))})})]})},gk=({years:e,months:t,selectedYear:r,setSelectedYear:n,selectedMonth:i,setSelectedMonth:s,currentLanguage:a})=>{const o=rh(),{lang:l}=nh(),c=l||a||"ru",u=[{value:"all",label:iy("allYears",a)},...e.map((e=>({value:e,label:e})))],d=[{value:"all",label:iy("allMonths",a)},...t.map((e=>({value:e.value,label:iy(e.labelKey,a)})))];return Z.jsx("div",{className:"mb-6 p-3 sm:p-4 bg-slate-800/50 rounded-lg border border-slate-700/50",children:Z.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 sm:gap-3",children:[Z.jsx("div",{className:"w-full sm:flex-1",children:Z.jsx(pk,{value:r||"all",onChange:e=>n("all"===e?null:e),options:u,placeholder:iy("allYears",a)})}),Z.jsx("div",{className:"w-full sm:flex-1",children:Z.jsx(pk,{value:i||"all",onChange:e=>s("all"===e?null:e),options:d,placeholder:iy("allMonths",a),disabled:!r})}),Z.jsxs("button",{onClick:()=>o(`/${c}/deep-search`),className:"w-full sm:w-auto bg-purple-600/10 hover:bg-purple-700/20 border-purple-500/50 text-purple-300 hover:text-purple-200 font-semibold shadow-md hover:shadow-lg transition-all duration-300 h-9 rounded-lg flex items-center justify-center gap-1.5 px-3 text-xs sm:text-sm border",title:iy("navigateToDeepSearch",a),children:[Z.jsx(mg,{className:"h-3.5 w-3.5"}),Z.jsx("span",{children:iy("search",a)})]})]})})},mk=({currentLanguage:e,isLoading:t=!1})=>{const r={ru:"languageRussian",es:"languageSpanish",en:"languageEnglish",de:"languageGerman",fr:"languageFrench",pl:"languagePolish"}[e]||"languageRussian";return Z.jsx("div",{className:"text-center py-12 animate-fade-in-up",children:t?Z.jsxs(Z.Fragment,{children:[Z.jsx(Hp,{className:"mx-auto h-16 w-16 text-purple-400 animate-spin mb-4"}),Z.jsx("p",{className:"mt-4 text-lg text-slate-300",children:iy("loadingEpisodes",e)})]}):Z.jsxs(Z.Fragment,{children:[Z.jsx(Ip,{className:"mx-auto h-16 w-16 text-slate-500 mb-4"}),Z.jsx("p",{className:"mt-4 text-lg text-slate-300",children:iy("noEpisodesFoundForLanguage",e,{language:iy(r,e)})}),Z.jsx("p",{className:"mt-2 text-sm text-slate-400",children:iy("tryUploadingAudioOrFilter",e)})]})})},yk="dosmundos_episodes_cache_",vk=()=>Z.jsxs("div",{className:"bg-slate-800/40 rounded-xl p-4 border border-slate-700/30 mb-4 animate-pulse h-[120px]",children:[Z.jsx("div",{className:"h-6 bg-slate-700/50 rounded w-3/4 mb-3"}),Z.jsxs("div",{className:"flex gap-4 mb-4",children:[Z.jsx("div",{className:"h-4 bg-slate-700/50 rounded w-20"}),Z.jsx("div",{className:"h-4 bg-slate-700/50 rounded w-24"})]}),Z.jsxs("div",{className:"space-y-2 pl-4 border-l-2 border-slate-700/30",children:[Z.jsx("div",{className:"h-3 bg-slate-700/30 rounded w-full"}),Z.jsx("div",{className:"h-3 bg-slate-700/30 rounded w-5/6"})]})]}),bk=({currentLanguage:e})=>{const[t,r]=q.useState([]),[n,i]=q.useState([]),[s,a]=q.useState(!1),[o,l]=q.useState(null),[c,u]=q.useState({}),[d,h]=q.useState(!0),[f,p]=q.useState(0),[g,m]=q.useState([]),[y,v]=q.useState(null),[b,w]=q.useState(null),x=q.useRef(null),S=q.useRef(null),E=q.useRef(e),T=["january","february","march","april","may","june","july","august","september","october","november","december"];q.useEffect((()=>{E.current=e}),[e]),q.useEffect((()=>{(async()=>{const{data:e,error:t}=await uS.from("episodes").select("date").order("date",{ascending:!1});if(!t&&e){const t=new Set;e.forEach((e=>{e.date&&t.add(new Date(e.date).getFullYear().toString())})),m(Array.from(t).sort(((e,t)=>Number(t)-Number(e))))}})()}),[]);const k=q.useCallback(((e,t)=>e.map((e=>{const r=e.transcripts||[],n=e.episode_audios||[],i=r.find((e=>e.lang===t)),s=n.find((e=>e.lang===t))||n.find((e=>"es"===e.lang))||n.find((e=>"mixed"===e.lang))||n[0];return{slug:e.slug,date:e.date,created_at:e.created_at,title:null==i?void 0:i.title,translations:r,lang:"all",audio_url:null==s?void 0:s.audio_url,duration:(null==s?void 0:s.duration)||0,available_variants:n.map((e=>e.lang))}}))),[]),A=q.useCallback((async(e,t=!1,n=!1)=>{const o=E.current;if(!s||n){a(!0),l(null);try{let n=uS.from("episodes").select("\n          slug,\n          date,\n          created_at,\n          transcripts (title, lang),\n          episode_audios (audio_url, lang, duration)\n        ").order("date",{ascending:!1});if(y){const e=`${y}-01-01`,t=`${y}-12-31`;if(b){const e=parseInt(y),t=parseInt(b)-1,r=new Date(e,t,1),i=new Date(e,t+1,0),s=e=>e.toISOString().split("T")[0];n=n.gte("date",s(r)).lte("date",s(i))}else n=n.gte("date",e).lte("date",t)}const s=20*e,l=s+20-1;n=n.range(s,l);const{data:c,error:d}=await n;if(d)throw d;if(o!==E.current)return;const f=k(c,o);if(0===f.length)return t&&(r([]),i([]),u({})),h(!1),void a(!1);const g=f.slice(0,5),m=f.slice(5);let v=[];try{const e=g.map((e=>e.slug));if(e.length>0){const{data:t}=await uS.from("timecodes").select("episode_slug, id, title, lang, time").in("episode_slug",e).eq("lang",o).order("time",{ascending:!0});t&&(v=t)}}catch(Jce){}if(o!==E.current)return;if(r((r=>{const n=t?f:[...r,...f];return 0!==e||y||b||localStorage.setItem(`${yk}${o}`,JSON.stringify({episodes:f,questions:v,timestamp:Date.now()})),n})),i((e=>{const r=new Set(e.map((e=>`${e.episode_slug}-${e.id}-${e.lang}`))),n=v.filter((e=>!r.has(`${e.episode_slug}-${e.id}-${e.lang}`)));return t?v:[...e,...n]})),u((e=>{const r=t?{}:{...e};return f.forEach((e=>{r[e.slug]||(r[e.slug]={}),r[e.slug][o]=0})),g.forEach((e=>{const t=v.filter((t=>t.episode_slug===e.slug)).length;r[e.slug][o]=t})),r})),h(20===f.length),p(e+1),a(!1),m.length>0)try{const t=m.map((e=>e.slug)),{data:r}=await uS.from("timecodes").select("episode_slug, id, title, lang, time").in("episode_slug",t).eq("lang",o).order("time",{ascending:!0});if(r){if(o!==E.current)return;i((e=>{const t=new Set(e.map((e=>`${e.episode_slug}-${e.id}-${e.lang}`))),n=r.filter((e=>!t.has(`${e.episode_slug}-${e.id}-${e.lang}`)));return[...e,...n]})),u((e=>{const t={...e};return m.forEach((e=>{const n=r.filter((t=>t.episode_slug===e.slug)).length;t[e.slug]||(t[e.slug]={}),t[e.slug][o]=n})),t})),0!==e||y||b||localStorage.setItem(`${yk}${o}`,JSON.stringify({episodes:f,questions:[...v,...r],timestamp:Date.now()}))}}catch(Jce){}}catch(mEe){o===E.current&&(l(mEe.message),a(!1))}}}),[s,y,b,k]);q.useEffect((()=>{if(S.current===e)return;S.current=e;(async()=>{const t=localStorage.getItem(`${yk}${e}`);if(t&&!y&&!b)try{const{episodes:n,questions:s}=JSON.parse(t);if(n&&n.length>0){r(n),i(s||[]);const t={};n.forEach((r=>{const n=(s||[]).filter((e=>e.episode_slug===r.slug));t[r.slug]={},t[r.slug][e]=n.length})),u(t),p(1)}}catch(Jce){}await A(0,!0,!0)})()}),[e,A,y,b]),q.useEffect((()=>{S.current&&(p(0),h(!0),r([]),A(0,!0,!0))}),[y,b,A]),q.useEffect((()=>{const e=new IntersectionObserver((e=>{e[0].isIntersecting&&d&&!s&&A(f,!1)}),{threshold:.1});return x.current&&e.observe(x.current),()=>e.disconnect()}),[d,s,f,A]);const _=q.useMemo((()=>y?T.map(((e,t)=>({value:(t+1).toString(),labelKey:e}))):[]),[y]);return Z.jsxs("div",{className:"container mx-auto p-2 sm:p-4 max-w-2xl",children:[Z.jsx("div",{className:"mb-6",children:Z.jsx("h1",{className:"text-3xl sm:text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-500",children:iy("episodes",e)})}),Z.jsx(gk,{years:g,months:_,selectedYear:y,setSelectedYear:v,selectedMonth:b,setSelectedMonth:w,currentLanguage:e,onResetFilters:()=>{v(null),w(null)}}),o&&Z.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 p-4 rounded-lg mb-6",children:[Z.jsx("h3",{className:"font-bold",children:"Error loading episodes:"}),Z.jsx("p",{children:o}),Z.jsx(AT,{variant:"outline",size:"sm",className:"mt-2 border-red-500/50 hover:bg-red-500/20",onClick:()=>A(f,!1),children:"Retry"})]}),s&&0===t.length&&Z.jsx("div",{className:"space-y-4",children:[...Array(5)].map(((e,t)=>Z.jsx(vk,{},t)))}),Z.jsx(fk,{episodes:t,currentLanguage:e,episodeQuestionsCount:c,allQuestions:n}),Z.jsxs("div",{ref:x,className:"h-10 flex justify-center items-center mt-4",children:[s&&t.length>0&&Z.jsx(Hp,{className:"h-6 w-6 animate-spin text-purple-400"}),!d&&t.length>0&&Z.jsx("p",{className:"text-gray-500 text-sm",children:iy("noMoreEpisodes",e)||"No more episodes"}),0===t.length&&!s&&!o&&Z.jsx(mk,{currentLanguage:e,isLoading:!1})]})]})},wk={},xk=function(e,t,r){if(!t||0===t.length)return e();const n=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e=function(e){return"/"+e}(e))in wk)return;wk[e]=!0;const t=e.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(!!r)for(let r=n.length-1;r>=0;r--){const i=n[r];if(i.href===e&&(!t||"stylesheet"===i.rel))return}else if(document.querySelector(`link[href="${e}"]${i}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script",s.crossOrigin=""),s.href=e,document.head.appendChild(s),t?new Promise(((t,r)=>{s.addEventListener("load",t),s.addEventListener("error",(()=>r(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e())).catch((e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))},Sk=({episodeTitle:e,episodeDate:t,onNavigateBack:r,onNavigateHistory:n,currentLanguage:i,isReadingMode:s})=>{const{lang:a}=nh(),o=a||i||"ru";return Z.jsxs("div",{className:"relative flex items-center justify-center mb-3 sm:mb-4",children:[!s&&Z.jsxs("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[n&&Z.jsx(AT,{variant:"ghost",size:"icon",onClick:n,className:"text-slate-300 hover:text-white hover:bg-white/10 shrink-0","aria-label":iy("back",i),children:Z.jsx(dp,{className:"h-5 w-5"})}),r&&Z.jsx(AT,{variant:"ghost",size:"icon",onClick:r,className:"text-slate-300 hover:text-white hover:bg-white/10 shrink-0","aria-label":iy("backToEpisodesShort",i),children:Z.jsx(Kp,{className:"h-5 w-5"})}),!r&&!n&&Z.jsx(Ah,{to:`/${o}/episodes`,className:"p-1 rounded-md hover:bg-white/10 transition-colors shrink-0","aria-label":iy("backToEpisodes",i),children:Z.jsx("img",{src:"/img/logo-5-120x120.png",alt:"Dos Mundos Logo",className:"h-8 w-8 rounded-sm"})})]}),Z.jsx("div",{className:"flex-grow text-center px-16",children:Z.jsx("h1",{className:"font-bold truncate "+(s?"text-3xl text-slate-900":"text-xl sm:text-2xl text-white"),title:e,children:e})})]})},Ek=({isPlaying:e,isLoading:t,onPlayPause:r,onSkip:n,variant:i="default",onAdjustTime:s,seekAudio:a,currentTime:o,mainPlayerIsPlaying:l,mainPlayerTogglePlayPause:c,mainPlayerSeekAudio:u,audioRefCurrentTime:d,playerDuration:h,currentLanguage:f="ru"})=>{const p="compact"===i?"h-10 w-10 md:h-11 md:w-11":"h-11 w-11 md:h-13 md:w-13",g="compact"===i?"h-5 w-5 md:h-5 md:w-5":"h-5 w-5 md:h-6 md:w-6",m="compact"===i?"h-14 w-14 md:h-16 md:w-16":"h-16 w-16 md:h-18 md:w-18",y="compact"===i?"h-7 w-7 md:h-8 md:w-8":"h-8 w-8 md:h-9 md:w-9";if("timeAdjustment"===i){const t=e=>{const t=d??0,r=h||1/0,n=Math.max(0,Math.min(r,t+e));s?s(e):u?u(n,!0):a&&a(n,!0)};return Z.jsxs("div",{className:"flex items-center justify-center gap-1",children:[Z.jsxs(AT,{variant:"outline",size:"sm",className:"px-2 py-1 h-auto bg-white/10 hover:bg-white/20 border-white/20",onClick:()=>t(-10),children:[Z.jsx(hg,{className:"h-3.5 w-3.5 mr-1"})," -10s"]}),Z.jsxs(AT,{variant:"outline",size:"sm",className:"px-2 py-1 h-auto bg-white/10 hover:bg-white/20 border-white/20",onClick:()=>t(-1),children:[Z.jsx(hg,{className:"h-3.5 w-3.5 mr-1"})," -1s"]}),Z.jsx(AT,{variant:"outline",size:"icon",className:"h-8 w-8 bg-white/10 hover:bg-white/20 border-white/20",onClick:()=>{c?c():r&&r()},children:(void 0!==l?l:e)?Z.jsx(ng,{className:"h-4 w-4"}):Z.jsx(lg,{className:"h-4 w-4"})}),Z.jsxs(AT,{variant:"outline",size:"sm",className:"px-2 py-1 h-auto bg-white/10 hover:bg-white/20 border-white/20",onClick:()=>t(1),children:["+1s ",Z.jsx(fg,{className:"h-3.5 w-3.5 ml-1"})]}),Z.jsxs(AT,{variant:"outline",size:"sm",className:"px-2 py-1 h-auto bg-white/10 hover:bg-white/20 border-white/20",onClick:()=>t(10),children:["+10s ",Z.jsx(fg,{className:"h-3.5 w-3.5 ml-1"})]})]})}return Z.jsxs("div",{className:"flex items-center justify-center gap-2 md:gap-2.5 "+("compact"===i?"my-0":""),children:[Z.jsx(AT,{variant:"ghost",size:"icon",onClick:()=>{n(-10)},className:`text-white hover:text-white/80 hover:bg-white/15 flex items-center justify-center ${p}`,"aria-label":iy("playerRewindBack10",f),children:Z.jsx(hg,{className:g})}),Z.jsx(AT,{variant:"default",size:"icon",onClick:()=>{r()},className:`bg-purple-600 text-white hover:bg-purple-700 rounded-full flex items-center justify-center shadow-lg ${m}`,"aria-label":iy(e?"playerPause":"playerPlay",f),children:t?Z.jsx(Hp,{className:`${y} animate-spin`}):e?Z.jsx(ng,{className:y}):Z.jsx(lg,{className:y})}),Z.jsx(AT,{variant:"ghost",size:"icon",onClick:()=>{n(10)},className:`text-white hover:text-white/80 hover:bg-white/15 flex items-center justify-center ${p}`,"aria-label":iy("playerForward10",f),children:Z.jsx(fg,{className:g})})]})},Tk=({currentTime:e,duration:t,sections:r,onProgressChange:n,onSectionJump:i,currentLanguage:s="ru"})=>{const a=q.useRef(null),o=q.useRef(!1),l=q.useRef(0),c=q.useCallback((e=>{if(a.current&&t>0){const r=a.current.getBoundingClientRect(),i=(e-r.left)/r.width,s=Math.max(0,Math.min(t,i*t));if("function"==typeof n&&!isNaN(s)){const e=Date.now();(!o.current||e-l.current>50)&&(n(s),l.current=e)}}}),[t,n]),u=e=>{c(e.clientX)},d=q.useCallback(((e,t,r)=>{e.stopPropagation(),"function"!=typeof i||isNaN(t)||i(t,r)}),[i]);return V.useEffect((()=>{const e=e=>{o.current&&(e=>{o.current&&c(e.clientX)})(e)},t=()=>{o.current&&(o.current=!1)};return o.current&&(document.addEventListener("mousemove",e),document.addEventListener("mouseup",t)),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}}),[]),Z.jsxs("div",{className:"h-6 md:h-7 w-full relative cursor-pointer group",onClick:e=>{c(e.clientX)},onMouseDown:e=>{o.current=!0,c(e.clientX)},onTouchStart:e=>{e.touches.length>0&&(o.current=!0,u(e.touches[0]))},onTouchMove:e=>{e.preventDefault(),e.touches.length>0&&o.current&&u(e.touches[0])},onTouchEnd:()=>{o.current=!1},ref:a,role:"slider","aria-valuemin":"0","aria-valuemax":t,"aria-valuenow":e,"aria-label":iy("playerProgressBar",s),children:[Z.jsx("div",{className:"absolute top-1/2 left-0 transform -translate-y-1/2 w-full h-1.5 md:h-2 bg-white/20 rounded-full group-hover:h-2 md:group-hover:h-2.5 transition-all"}),Z.jsx("div",{className:"absolute top-1/2 left-0 transform -translate-y-1/2 progress-bar group-hover:h-2 md:group-hover:h-2.5 transition-all",style:{width:t>0?e/t*100+"%":"0%"}}),r.map((e=>Z.jsx("button",{className:"absolute w-2.5 h-2.5 md:w-3 md:h-3 rounded-full shadow-md hover:scale-150 transition-transform duration-150 focus:outline-none focus:ring-2 focus:ring-white",style:{left:t>0?`calc(${e.time/t*100}% - 5px)`:"0%",top:"50%",transform:"translateY(-50%)",backgroundColor:"#FFC107"},onClick:t=>d(t,e.time,e.id),onTouchStart:t=>d(t,e.time,e.id),title:`${e.title} (${Em(e.time)})`,"aria-label":iy("playerJumpToQuestion",s,{title:e.title})},e.id))),Z.jsx("div",{className:"absolute top-1/2 h-3 w-3 md:h-3.5 md:w-3.5 bg-white rounded-full shadow-md transform -translate-y-1/2 -translate-x-1/2 pointer-events-none transition-all group-hover:h-4 group-hover:w-4",style:{left:t>0?e/t*100+"%":"0%"}})]})};var kk=q.createContext(void 0);function Ak(e){const t=q.useContext(kk);return e||t||"ltr"}const _k=["top","right","bottom","left"],Ck=Math.min,Pk=Math.max,Dk=Math.round,Rk=Math.floor,Ik=e=>({x:e,y:e}),Ok={left:"right",right:"left",bottom:"top",top:"bottom"},Nk={start:"end",end:"start"};function jk(e,t,r){return Pk(e,Ck(t,r))}function Lk(e,t){return"function"==typeof e?e(t):e}function Mk(e){return e.split("-")[0]}function Fk(e){return e.split("-")[1]}function Uk(e){return"x"===e?"y":"x"}function Bk(e){return"y"===e?"height":"width"}function $k(e){return["top","bottom"].includes(Mk(e))?"y":"x"}function zk(e){return Uk($k(e))}function qk(e){return e.replace(/start|end/g,(e=>Nk[e]))}function Vk(e){return e.replace(/left|right|bottom|top/g,(e=>Ok[e]))}function Kk(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function Hk(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function Gk(e,t,r){let{reference:n,floating:i}=e;const s=$k(t),a=zk(t),o=Bk(a),l=Mk(t),c="y"===s,u=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,h=n[o]/2-i[o]/2;let f;switch(l){case"top":f={x:u,y:n.y-i.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:d};break;case"left":f={x:n.x-i.width,y:d};break;default:f={x:n.x,y:n.y}}switch(Fk(t)){case"start":f[a]-=h*(r&&c?-1:1);break;case"end":f[a]+=h*(r&&c?-1:1)}return f}async function Wk(e,t){var r;void 0===t&&(t={});const{x:n,y:i,platform:s,rects:a,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Lk(t,e),p=Kk(f),g=o[h?"floating"===d?"reference":"floating":d],m=Hk(await s.getClippingRect({element:null==(r=await(null==s.isElement?void 0:s.isElement(g)))||r?g:g.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),y="floating"===d?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,v=await(null==s.getOffsetParent?void 0:s.getOffsetParent(o.floating)),b=await(null==s.isElement?void 0:s.isElement(v))&&await(null==s.getScale?void 0:s.getScale(v))||{x:1,y:1},w=Hk(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:y,offsetParent:v,strategy:l}):y);return{top:(m.top-w.top+p.top)/b.y,bottom:(w.bottom-m.bottom+p.bottom)/b.y,left:(m.left-w.left+p.left)/b.x,right:(w.right-m.right+p.right)/b.x}}function Qk(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Yk(e){return _k.some((t=>e[t]>=0))}function Xk(){return"undefined"!=typeof window}function Jk(e){return tA(e)?(e.nodeName||"").toLowerCase():"#document"}function Zk(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function eA(e){var t;return null==(t=(tA(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function tA(e){return!!Xk()&&(e instanceof Node||e instanceof Zk(e).Node)}function rA(e){return!!Xk()&&(e instanceof Element||e instanceof Zk(e).Element)}function nA(e){return!!Xk()&&(e instanceof HTMLElement||e instanceof Zk(e).HTMLElement)}function iA(e){return!(!Xk()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof Zk(e).ShadowRoot)}function sA(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=dA(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function aA(e){return["table","td","th"].includes(Jk(e))}function oA(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(Jce){return!1}}))}function lA(e){const t=cA(),r=rA(e)?dA(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!r[e]&&"none"!==r[e]))||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(r.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(r.contain||"").includes(e)))}function cA(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function uA(e){return["html","body","#document"].includes(Jk(e))}function dA(e){return Zk(e).getComputedStyle(e)}function hA(e){return rA(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function fA(e){if("html"===Jk(e))return e;const t=e.assignedSlot||e.parentNode||iA(e)&&e.host||eA(e);return iA(t)?t.host:t}function pA(e){const t=fA(e);return uA(t)?e.ownerDocument?e.ownerDocument.body:e.body:nA(t)&&sA(t)?t:pA(t)}function gA(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);const i=pA(e),s=i===(null==(n=e.ownerDocument)?void 0:n.body),a=Zk(i);if(s){const e=mA(a);return t.concat(a,a.visualViewport||[],sA(i)?i:[],e&&r?gA(e):[])}return t.concat(i,gA(i,[],r))}function mA(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function yA(e){const t=dA(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=nA(e),s=i?e.offsetWidth:r,a=i?e.offsetHeight:n,o=Dk(r)!==s||Dk(n)!==a;return o&&(r=s,n=a),{width:r,height:n,$:o}}function vA(e){return rA(e)?e:e.contextElement}function bA(e){const t=vA(e);if(!nA(t))return Ik(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:s}=yA(t);let a=(s?Dk(r.width):r.width)/n,o=(s?Dk(r.height):r.height)/i;return a&&Number.isFinite(a)||(a=1),o&&Number.isFinite(o)||(o=1),{x:a,y:o}}const wA=Ik(0);function xA(e){const t=Zk(e);return cA()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:wA}function SA(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=!1);const i=e.getBoundingClientRect(),s=vA(e);let a=Ik(1);t&&(n?rA(n)&&(a=bA(n)):a=bA(e));const o=function(e,t,r){return void 0===t&&(t=!1),!(!r||t&&r!==Zk(e))&&t}(s,r,n)?xA(s):Ik(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,u=i.width/a.x,d=i.height/a.y;if(s){const e=Zk(s),t=n&&rA(n)?Zk(n):n;let r=e,i=mA(r);for(;i&&n&&t!==r;){const e=bA(i),t=i.getBoundingClientRect(),n=dA(i),s=t.left+(i.clientLeft+parseFloat(n.paddingLeft))*e.x,a=t.top+(i.clientTop+parseFloat(n.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=s,c+=a,r=Zk(i),i=mA(r)}}return Hk({width:u,height:d,x:l,y:c})}function EA(e,t){const r=hA(e).scrollLeft;return t?t.left+r:SA(eA(e)).left+r}function TA(e,t,r){void 0===r&&(r=!1);const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-(r?0:EA(e,n)),y:n.top+t.scrollTop}}function kA(e,t,r){let n;if("viewport"===t)n=function(e,t){const r=Zk(e),n=eA(e),i=r.visualViewport;let s=n.clientWidth,a=n.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const e=cA();(!e||e&&"fixed"===t)&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o,y:l}}(e,r);else if("document"===t)n=function(e){const t=eA(e),r=hA(e),n=e.ownerDocument.body,i=Pk(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=Pk(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+EA(e);const o=-r.scrollTop;return"rtl"===dA(n).direction&&(a+=Pk(t.clientWidth,n.clientWidth)-i),{width:i,height:s,x:a,y:o}}(eA(e));else if(rA(t))n=function(e,t){const r=SA(e,!0,"fixed"===t),n=r.top+e.clientTop,i=r.left+e.clientLeft,s=nA(e)?bA(e):Ik(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:i*s.x,y:n*s.y}}(t,r);else{const r=xA(e);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return Hk(n)}function AA(e,t){const r=fA(e);return!(r===t||!rA(r)||uA(r))&&("fixed"===dA(r).position||AA(r,t))}function _A(e,t,r){const n=nA(t),i=eA(t),s="fixed"===r,a=SA(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const l=Ik(0);function c(){l.x=EA(i)}if(n||!n&&!s)if(("body"!==Jk(t)||sA(i))&&(o=hA(t)),n){const e=SA(t,!0,s,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&c();s&&!n&&i&&c();const u=!i||n||s?Ik(0):TA(i,o);return{x:a.left+o.scrollLeft-l.x-u.x,y:a.top+o.scrollTop-l.y-u.y,width:a.width,height:a.height}}function CA(e){return"static"===dA(e).position}function PA(e,t){if(!nA(e)||"fixed"===dA(e).position)return null;if(t)return t(e);let r=e.offsetParent;return eA(e)===r&&(r=r.ownerDocument.body),r}function DA(e,t){const r=Zk(e);if(oA(e))return r;if(!nA(e)){let t=fA(e);for(;t&&!uA(t);){if(rA(t)&&!CA(t))return t;t=fA(t)}return r}let n=PA(e,t);for(;n&&aA(n)&&CA(n);)n=PA(n,t);return n&&uA(n)&&CA(n)&&!lA(n)?r:n||function(e){let t=fA(e);for(;nA(t)&&!uA(t);){if(lA(t))return t;if(oA(t))return null;t=fA(t)}return null}(e)||r}const RA={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const s="fixed"===i,a=eA(n),o=!!t&&oA(t.floating);if(n===a||o&&s)return r;let l={scrollLeft:0,scrollTop:0},c=Ik(1);const u=Ik(0),d=nA(n);if((d||!d&&!s)&&(("body"!==Jk(n)||sA(a))&&(l=hA(n)),nA(n))){const e=SA(n);c=bA(n),u.x=e.x+n.clientLeft,u.y=e.y+n.clientTop}const h=!a||d||s?Ik(0):TA(a,l,!0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:r.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:eA,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const s=[..."clippingAncestors"===r?oA(t)?[]:function(e,t){const r=t.get(e);if(r)return r;let n=gA(e,[],!1).filter((e=>rA(e)&&"body"!==Jk(e))),i=null;const s="fixed"===dA(e).position;let a=s?fA(e):e;for(;rA(a)&&!uA(a);){const t=dA(a),r=lA(a);r||"fixed"!==t.position||(i=null),(s?!r&&!i:!r&&"static"===t.position&&i&&["absolute","fixed"].includes(i.position)||sA(a)&&!r&&AA(e,a))?n=n.filter((e=>e!==a)):i=t,a=fA(a)}return t.set(e,n),n}(t,this._c):[].concat(r),n],a=s[0],o=s.reduce(((e,r)=>{const n=kA(t,r,i);return e.top=Pk(n.top,e.top),e.right=Ck(n.right,e.right),e.bottom=Ck(n.bottom,e.bottom),e.left=Pk(n.left,e.left),e}),kA(t,a,i));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:DA,getElementRects:async function(e){const t=this.getOffsetParent||DA,r=this.getDimensions,n=await r(e.floating);return{reference:_A(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:r}=yA(e);return{width:t,height:r}},getScale:bA,isElement:rA,isRTL:function(e){return"rtl"===dA(e).direction}};function IA(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function OA(e,t,r,n){void 0===n&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:l=!1}=n,c=vA(e),u=i||s?[...c?gA(c):[],...gA(t)]:[];u.forEach((e=>{i&&e.addEventListener("scroll",r,{passive:!0}),s&&e.addEventListener("resize",r)}));const d=c&&o?function(e,t){let r,n=null;const i=eA(e);function s(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function a(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),s();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=c;if(o||t(),!h||!f)return;const p={rootMargin:-Rk(d)+"px "+-Rk(i.clientWidth-(u+h))+"px "+-Rk(i.clientHeight-(d+f))+"px "+-Rk(u)+"px",threshold:Pk(0,Ck(1,l))||1};let g=!0;function m(t){const n=t[0].intersectionRatio;if(n!==l){if(!g)return a();n?a(!1,n):r=setTimeout((()=>{a(!1,1e-7)}),1e3)}1!==n||IA(c,e.getBoundingClientRect())||a(),g=!1}try{n=new IntersectionObserver(m,{...p,root:i.ownerDocument})}catch(y){n=new IntersectionObserver(m,p)}n.observe(e)}(!0),s}(c,r):null;let h,f=-1,p=null;a&&(p=new ResizeObserver((e=>{let[n]=e;n&&n.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame((()=>{var e;null==(e=p)||e.observe(t)}))),r()})),c&&!l&&p.observe(c),p.observe(t));let g=l?SA(e):null;return l&&function t(){const n=SA(e);g&&!IA(g,n)&&r();g=n,h=requestAnimationFrame(t)}(),r(),()=>{var e;u.forEach((e=>{i&&e.removeEventListener("scroll",r),s&&e.removeEventListener("resize",r)})),null==d||d(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const NA=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:s,placement:a,middlewareData:o}=t,l=await async function(e,t){const{placement:r,platform:n,elements:i}=e,s=await(null==n.isRTL?void 0:n.isRTL(i.floating)),a=Mk(r),o=Fk(r),l="y"===$k(r),c=["left","top"].includes(a)?-1:1,u=s&&l?-1:1,d=Lk(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&"number"==typeof p&&(f="end"===o?-1*p:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}(t,e);return a===(null==(r=o.offset)?void 0:r.placement)&&null!=(n=o.arrow)&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:a}}}}},jA=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...l}=Lk(e,t),c={x:r,y:n},u=await Wk(t,l),d=$k(Mk(i)),h=Uk(d);let f=c[h],p=c[d];if(s){const e="y"===h?"bottom":"right";f=jk(f+u["y"===h?"top":"left"],f,f-u[e])}if(a){const e="y"===d?"bottom":"right";p=jk(p+u["y"===d?"top":"left"],p,p-u[e])}const g=o.fn({...t,[h]:f,[d]:p});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[h]:s,[d]:a}}}}}},LA=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...m}=Lk(e,t);if(null!=(r=s.arrow)&&r.alignmentOffset)return{};const y=Mk(i),v=$k(o),b=Mk(o)===o,w=await(null==l.isRTL?void 0:l.isRTL(c.floating)),x=h||(b||!g?[Vk(o)]:function(e){const t=Vk(e);return[qk(e),t,qk(t)]}(o)),S="none"!==p;!h&&S&&x.push(...function(e,t,r,n){const i=Fk(e);let s=function(e,t,r){const n=["left","right"],i=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return r?t?i:n:t?n:i;case"left":case"right":return t?s:a;default:return[]}}(Mk(e),"start"===r,n);return i&&(s=s.map((e=>e+"-"+i)),t&&(s=s.concat(s.map(qk)))),s}(o,g,p,w));const E=[o,...x],T=await Wk(t,m),k=[];let A=(null==(n=s.flip)?void 0:n.overflows)||[];if(u&&k.push(T[y]),d){const e=function(e,t,r){void 0===r&&(r=!1);const n=Fk(e),i=zk(e),s=Bk(i);let a="x"===i?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=Vk(a)),[a,Vk(a)]}(i,a,w);k.push(T[e[0]],T[e[1]])}if(A=[...A,{placement:i,overflows:k}],!k.every((e=>e<=0))){var _,C;const e=((null==(_=s.flip)?void 0:_.index)||0)+1,t=E[e];if(t){var P;const r="alignment"===d&&v!==$k(t),n=(null==(P=A[0])?void 0:P.overflows[0])>0;if(!r||n)return{data:{index:e,overflows:A},reset:{placement:t}}}let r=null==(C=A.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:C.placement;if(!r)switch(f){case"bestFit":{var D;const e=null==(D=A.filter((e=>{if(S){const t=$k(e.placement);return t===v||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:D[0];e&&(r=e);break}case"initialPlacement":r=o}if(i!==r)return{reset:{placement:r}}}return{}}}},MA=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:i,rects:s,platform:a,elements:o}=t,{apply:l=()=>{},...c}=Lk(e,t),u=await Wk(t,c),d=Mk(i),h=Fk(i),f="y"===$k(i),{width:p,height:g}=s.floating;let m,y;"top"===d||"bottom"===d?(m=d,y=h===(await(null==a.isRTL?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(y=d,m="end"===h?"top":"bottom");const v=g-u.top-u.bottom,b=p-u.left-u.right,w=Ck(g-u[m],v),x=Ck(p-u[y],b),S=!t.middlewareData.shift;let E=w,T=x;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(T=b),null!=(n=t.middlewareData.shift)&&n.enabled.y&&(E=v),S&&!h){const e=Pk(u.left,0),t=Pk(u.right,0),r=Pk(u.top,0),n=Pk(u.bottom,0);f?T=p-2*(0!==e||0!==t?e+t:Pk(u.left,u.right)):E=g-2*(0!==r||0!==n?r+n:Pk(u.top,u.bottom))}await l({...t,availableWidth:T,availableHeight:E});const k=await a.getDimensions(o.floating);return p!==k.width||g!==k.height?{reset:{rects:!0}}:{}}}},FA=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...i}=Lk(e,t);switch(n){case"referenceHidden":{const e=Qk(await Wk(t,{...i,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:Yk(e)}}}case"escaped":{const e=Qk(await Wk(t,{...i,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:Yk(e)}}}default:return{}}}}},UA=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:s,platform:a,elements:o,middlewareData:l}=t,{element:c,padding:u=0}=Lk(e,t)||{};if(null==c)return{};const d=Kk(u),h={x:r,y:n},f=zk(i),p=Bk(f),g=await a.getDimensions(c),m="y"===f,y=m?"top":"left",v=m?"bottom":"right",b=m?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[f]-h[f]-s.floating[p],x=h[f]-s.reference[f],S=await(null==a.getOffsetParent?void 0:a.getOffsetParent(c));let E=S?S[b]:0;E&&await(null==a.isElement?void 0:a.isElement(S))||(E=o.floating[b]||s.floating[p]);const T=w/2-x/2,k=E/2-g[p]/2-1,A=Ck(d[y],k),_=Ck(d[v],k),C=A,P=E-g[p]-_,D=E/2-g[p]/2+T,R=jk(C,D,P),I=!l.arrow&&null!=Fk(i)&&D!==R&&s.reference[p]/2-(D<C?A:_)-g[p]/2<0,O=I?D<C?D-C:D-P:0;return{[f]:h[f]+O,data:{[f]:R,centerOffset:D-R-O,...I&&{alignmentOffset:O}},reset:I}}}),BA=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:s,middlewareData:a}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=Lk(e,t),u={x:r,y:n},d=$k(i),h=Uk(d);let f=u[h],p=u[d];const g=Lk(o,t),m="number"==typeof g?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const e="y"===h?"height":"width",t=s.reference[h]-s.floating[e]+m.mainAxis,r=s.reference[h]+s.reference[e]-m.mainAxis;f<t?f=t:f>r&&(f=r)}if(c){var y,v;const e="y"===h?"width":"height",t=["top","left"].includes(Mk(i)),r=s.reference[d]-s.floating[e]+(t&&(null==(y=a.offset)?void 0:y[d])||0)+(t?0:m.crossAxis),n=s.reference[d]+s.reference[e]+(t?0:(null==(v=a.offset)?void 0:v[d])||0)-(t?m.crossAxis:0);p<r?p=r:p>n&&(p=n)}return{[h]:f,[d]:p}}}},$A=(e,t,r)=>{const n=new Map,i={platform:RA,...r},s={...i.platform,_c:n};return(async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:a}=r,o=s.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=Gk(c,n,l),h=n,f={},p=0;for(let g=0;g<o.length;g++){const{name:r,fn:s}=o[g],{x:m,y:y,data:v,reset:b}=await s({x:u,y:d,initialPlacement:n,placement:h,strategy:i,middlewareData:f,rects:c,platform:a,elements:{reference:e,floating:t}});u=null!=m?m:u,d=null!=y?y:d,f={...f,[r]:{...f[r],...v}},b&&p<=50&&(p++,"object"==typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await a.getElementRects({reference:e,floating:t,strategy:i}):b.rects),({x:u,y:d}=Gk(c,h,l))),g=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}})(e,t,{...i,platform:s})};var zA="undefined"!=typeof document?q.useLayoutEffect:q.useEffect;function qA(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;0!==n--;)if(!qA(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;0!==n--;){const r=i[n];if(("_owner"!==r||!e.$$typeof)&&!qA(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function VA(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function KA(e,t){const r=VA(e);return Math.round(t*r)/r}function HA(e){const t=q.useRef(e);return zA((()=>{t.current=e})),t}function GA(e){void 0===e&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[u,d]=q.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,f]=q.useState(n);qA(h,n)||f(n);const[p,g]=q.useState(null),[m,y]=q.useState(null),v=q.useCallback((e=>{e!==S.current&&(S.current=e,g(e))}),[]),b=q.useCallback((e=>{e!==E.current&&(E.current=e,y(e))}),[]),w=s||p,x=a||m,S=q.useRef(null),E=q.useRef(null),T=q.useRef(u),k=null!=l,A=HA(l),_=HA(i),C=HA(c),P=q.useCallback((()=>{if(!S.current||!E.current)return;const e={placement:t,strategy:r,middleware:h};_.current&&(e.platform=_.current),$A(S.current,E.current,e).then((e=>{const t={...e,isPositioned:!1!==C.current};D.current&&!qA(T.current,t)&&(T.current=t,ad.flushSync((()=>{d(t)})))}))}),[h,t,r,_,C]);zA((()=>{!1===c&&T.current.isPositioned&&(T.current.isPositioned=!1,d((e=>({...e,isPositioned:!1}))))}),[c]);const D=q.useRef(!1);zA((()=>(D.current=!0,()=>{D.current=!1})),[]),zA((()=>{if(w&&(S.current=w),x&&(E.current=x),w&&x){if(A.current)return A.current(w,x,P);P()}}),[w,x,P,A,k]);const R=q.useMemo((()=>({reference:S,floating:E,setReference:v,setFloating:b})),[v,b]),I=q.useMemo((()=>({reference:w,floating:x})),[w,x]),O=q.useMemo((()=>{const e={position:r,left:0,top:0};if(!I.floating)return e;const t=KA(I.floating,u.x),n=KA(I.floating,u.y);return o?{...e,transform:"translate("+t+"px, "+n+"px)",...VA(I.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}}),[r,o,I.floating,u.x,u.y]);return q.useMemo((()=>({...u,update:P,refs:R,elements:I,floatingStyles:O})),[u,P,R,I,O])}const WA=e=>({name:"arrow",options:e,fn(t){const{element:r,padding:n}="function"==typeof e?e(t):e;return r&&(i=r,{}.hasOwnProperty.call(i,"current"))?null!=r.current?UA({element:r.current,padding:n}).fn(t):{}:r?UA({element:r,padding:n}).fn(t):{};var i}}),QA=(e,t)=>({...NA(e),options:[e,t]}),YA=(e,t)=>({...jA(e),options:[e,t]}),XA=(e,t)=>({...BA(e),options:[e,t]}),JA=(e,t)=>({...LA(e),options:[e,t]}),ZA=(e,t)=>({...MA(e),options:[e,t]}),e_=(e,t)=>({...FA(e),options:[e,t]}),t_=(e,t)=>({...WA(e),options:[e,t]});var r_=q.forwardRef(((e,t)=>{const{children:r,width:n=10,height:i=5,...s}=e;return Z.jsx(Kh.svg,{...s,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:Z.jsx("polygon",{points:"0,0 30,0 15,10"})})}));r_.displayName="Arrow";var n_=r_;function i_(e){const[t,r]=q.useState(void 0);return of((()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver((t=>{if(!Array.isArray(t))return;if(!t.length)return;const n=t[0];let i,s;if("borderBoxSize"in n){const e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,s=t.blockSize}else i=e.offsetWidth,s=e.offsetHeight;r({width:i,height:s})}));return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)}),[e]),t}var s_="Popper",[a_,o_]=Lh(s_),[l_,c_]=a_(s_),u_=e=>{const{__scopePopper:t,children:r}=e,[n,i]=q.useState(null);return Z.jsx(l_,{scope:t,anchor:n,onAnchorChange:i,children:r})};u_.displayName=s_;var d_="PopperAnchor",h_=q.forwardRef(((e,t)=>{const{__scopePopper:r,virtualRef:n,...i}=e,s=c_(d_,r),a=q.useRef(null),o=jh(t,a);return q.useEffect((()=>{s.onAnchorChange((null==n?void 0:n.current)||a.current)})),n?null:Z.jsx(Kh.div,{...i,ref:o})}));h_.displayName=d_;var f_="PopperContent",[p_,g_]=a_(f_),m_=q.forwardRef(((e,t)=>{var r,n,i,s,a,o;const{__scopePopper:l,side:c="bottom",sideOffset:u=0,align:d="center",alignOffset:h=0,arrowPadding:f=0,avoidCollisions:p=!0,collisionBoundary:g=[],collisionPadding:m=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:b="optimized",onPlaced:w,...x}=e,S=c_(f_,l),[E,T]=q.useState(null),k=jh(t,(e=>T(e))),[A,_]=q.useState(null),C=i_(A),P=(null==C?void 0:C.width)??0,D=(null==C?void 0:C.height)??0,R=c+("center"!==d?"-"+d:""),I="number"==typeof m?m:{top:0,right:0,bottom:0,left:0,...m},O=Array.isArray(g)?g:[g],N=O.length>0,j={padding:I,boundary:O.filter(w_),altBoundary:N},{refs:L,floatingStyles:M,placement:F,isPositioned:U,middlewareData:B}=GA({strategy:"fixed",placement:R,whileElementsMounted:(...e)=>OA(...e,{animationFrame:"always"===b}),elements:{reference:S.anchor},middleware:[QA({mainAxis:u+D,alignmentAxis:h}),p&&YA({mainAxis:!0,crossAxis:!1,limiter:"partial"===y?XA():void 0,...j}),p&&JA({...j}),ZA({...j,apply:({elements:e,rects:t,availableWidth:r,availableHeight:n})=>{const{width:i,height:s}=t.reference,a=e.floating.style;a.setProperty("--radix-popper-available-width",`${r}px`),a.setProperty("--radix-popper-available-height",`${n}px`),a.setProperty("--radix-popper-anchor-width",`${i}px`),a.setProperty("--radix-popper-anchor-height",`${s}px`)}}),A&&t_({element:A,padding:f}),x_({arrowWidth:P,arrowHeight:D}),v&&e_({strategy:"referenceHidden",...j})]}),[$,z]=S_(F),V=Gh(w);of((()=>{U&&(null==V||V())}),[U,V]);const K=null==(r=B.arrow)?void 0:r.x,H=null==(n=B.arrow)?void 0:n.y,G=0!==(null==(i=B.arrow)?void 0:i.centerOffset),[W,Q]=q.useState();return of((()=>{E&&Q(window.getComputedStyle(E).zIndex)}),[E]),Z.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:U?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[null==(s=B.transformOrigin)?void 0:s.x,null==(a=B.transformOrigin)?void 0:a.y].join(" "),...(null==(o=B.hide)?void 0:o.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:Z.jsx(p_,{scope:l,placedSide:$,onArrowChange:_,arrowX:K,arrowY:H,shouldHideArrow:G,children:Z.jsx(Kh.div,{"data-side":$,"data-align":z,...x,ref:k,style:{...x.style,animation:U?void 0:"none"}})})})}));m_.displayName=f_;var y_="PopperArrow",v_={top:"bottom",right:"left",bottom:"top",left:"right"},b_=q.forwardRef((function(e,t){const{__scopePopper:r,...n}=e,i=g_(y_,r),s=v_[i.placedSide];return Z.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:Z.jsx(n_,{...n,ref:t,style:{...n.style,display:"block"}})})}));function w_(e){return null!==e}b_.displayName=y_;var x_=e=>({name:"transformOrigin",options:e,fn(t){var r,n,i;const{placement:s,rects:a,middlewareData:o}=t,l=0!==(null==(r=o.arrow)?void 0:r.centerOffset),c=l?0:e.arrowWidth,u=l?0:e.arrowHeight,[d,h]=S_(s),f={start:"0%",center:"50%",end:"100%"}[h],p=((null==(n=o.arrow)?void 0:n.x)??0)+c/2,g=((null==(i=o.arrow)?void 0:i.y)??0)+u/2;let m="",y="";return"bottom"===d?(m=l?f:`${p}px`,y=-u+"px"):"top"===d?(m=l?f:`${p}px`,y=`${a.floating.height+u}px`):"right"===d?(m=-u+"px",y=l?f:`${g}px`):"left"===d&&(m=`${a.floating.width+u}px`,y=l?f:`${g}px`),{data:{x:m,y:y}}}});function S_(e){const[t,r="center"]=e.split("-");return[t,r]}var E_=u_,T_=h_,k_=m_,A_=b_,__="rovingFocusGroup.onEntryFocus",C_={bubbles:!1,cancelable:!0},P_="RovingFocusGroup",[D_,R_,I_]=Vh(P_),[O_,N_]=Lh(P_,[I_]),[j_,L_]=O_(P_),M_=q.forwardRef(((e,t)=>Z.jsx(D_.Provider,{scope:e.__scopeRovingFocusGroup,children:Z.jsx(D_.Slot,{scope:e.__scopeRovingFocusGroup,children:Z.jsx(F_,{...e,ref:t})})})));M_.displayName=P_;var F_=q.forwardRef(((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,h=q.useRef(null),f=jh(t,h),p=Ak(s),[g,m]=hf({prop:a,defaultProp:o??null,onChange:l,caller:P_}),[y,v]=q.useState(!1),b=Gh(c),w=R_(r),x=q.useRef(!1),[S,E]=q.useState(0);return q.useEffect((()=>{const e=h.current;if(e)return e.addEventListener(__,b),()=>e.removeEventListener(__,b)}),[b]),Z.jsx(j_,{scope:r,orientation:n,dir:p,loop:i,currentTabStopId:g,onItemFocus:q.useCallback((e=>m(e)),[m]),onItemShiftTab:q.useCallback((()=>v(!0)),[]),onFocusableItemAdd:q.useCallback((()=>E((e=>e+1))),[]),onFocusableItemRemove:q.useCallback((()=>E((e=>e-1))),[]),children:Z.jsx(Kh.div,{tabIndex:y||0===S?-1:0,"data-orientation":n,...d,ref:f,style:{outline:"none",...e.style},onMouseDown:Ih(e.onMouseDown,(()=>{x.current=!0})),onFocus:Ih(e.onFocus,(e=>{const t=!x.current;if(e.target===e.currentTarget&&t&&!y){const t=new CustomEvent(__,C_);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=w().filter((e=>e.focusable));z_([e.find((e=>e.active)),e.find((e=>e.id===g)),...e].filter(Boolean).map((e=>e.ref.current)),u)}}x.current=!1})),onBlur:Ih(e.onBlur,(()=>v(!1)))})})})),U_="RovingFocusGroupItem",B_=q.forwardRef(((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:s,children:a,...o}=e,l=ES(),c=s||l,u=L_(U_,r),d=u.currentTabStopId===c,h=R_(r),{onFocusableItemAdd:f,onFocusableItemRemove:p,currentTabStopId:g}=u;return q.useEffect((()=>{if(n)return f(),()=>p()}),[n,f,p]),Z.jsx(D_.ItemSlot,{scope:r,id:c,focusable:n,active:i,children:Z.jsx(Kh.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:Ih(e.onMouseDown,(e=>{n?u.onItemFocus(c):e.preventDefault()})),onFocus:Ih(e.onFocus,(()=>u.onItemFocus(c))),onKeyDown:Ih(e.onKeyDown,(e=>{if("Tab"===e.key&&e.shiftKey)return void u.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,r){const n=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,r);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(n)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)?void 0:$_[n]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let i=h().filter((e=>e.focusable)).map((e=>e.ref.current));if("last"===t)i.reverse();else if("prev"===t||"next"===t){"prev"===t&&i.reverse();const s=i.indexOf(e.currentTarget);i=u.loop?(n=s+1,(r=i).map(((e,t)=>r[(n+t)%r.length]))):i.slice(s+1)}setTimeout((()=>z_(i)))}var r,n})),children:"function"==typeof a?a({isCurrentTabStop:d,hasTabStop:null!=g}):a})})}));B_.displayName=U_;var $_={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function z_(e,t=!1){const r=document.activeElement;for(const n of e){if(n===r)return;if(n.focus({preventScroll:t}),document.activeElement!==r)return}}var q_=M_,V_=B_,K_=["Enter"," "],H_=["ArrowUp","PageDown","End"],G_=["ArrowDown","PageUp","Home",...H_],W_={ltr:[...K_,"ArrowRight"],rtl:[...K_,"ArrowLeft"]},Q_={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Y_="Menu",[X_,J_,Z_]=Vh(Y_),[eC,tC]=Lh(Y_,[Z_,o_,N_]),rC=o_(),nC=N_(),[iC,sC]=eC(Y_),[aC,oC]=eC(Y_),lC=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:i,onOpenChange:s,modal:a=!0}=e,o=rC(t),[l,c]=q.useState(null),u=q.useRef(!1),d=Gh(s),h=Ak(i);return q.useEffect((()=>{const e=()=>{u.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>u.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}}),[]),Z.jsx(E_,{...o,children:Z.jsx(iC,{scope:t,open:r,onOpenChange:d,content:l,onContentChange:c,children:Z.jsx(aC,{scope:t,onClose:q.useCallback((()=>d(!1)),[d]),isUsingKeyboardRef:u,dir:h,modal:a,children:n})})})};lC.displayName=Y_;var cC=q.forwardRef(((e,t)=>{const{__scopeMenu:r,...n}=e,i=rC(r);return Z.jsx(T_,{...i,...n,ref:t})}));cC.displayName="MenuAnchor";var uC="MenuPortal",[dC,hC]=eC(uC,{forceMount:void 0}),fC=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:i}=e,s=sC(uC,t);return Z.jsx(dC,{scope:t,forceMount:r,children:Z.jsx(cf,{present:r||s.open,children:Z.jsx(lf,{asChild:!0,container:i,children:n})})})};fC.displayName=uC;var pC="MenuContent",[gC,mC]=eC(pC),yC=q.forwardRef(((e,t)=>{const r=hC(pC,e.__scopeMenu),{forceMount:n=r.forceMount,...i}=e,s=sC(pC,e.__scopeMenu),a=oC(pC,e.__scopeMenu);return Z.jsx(X_.Provider,{scope:e.__scopeMenu,children:Z.jsx(cf,{present:n||s.open,children:Z.jsx(X_.Slot,{scope:e.__scopeMenu,children:a.modal?Z.jsx(vC,{...i,ref:t}):Z.jsx(bC,{...i,ref:t})})})})})),vC=q.forwardRef(((e,t)=>{const r=sC(pC,e.__scopeMenu),n=q.useRef(null),i=jh(t,n);return q.useEffect((()=>{const e=n.current;if(e)return PE(e)}),[]),Z.jsx(xC,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Ih(e.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})})),bC=q.forwardRef(((e,t)=>{const r=sC(pC,e.__scopeMenu);return Z.jsx(xC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})})),wC=Fh("MenuContent.ScrollLock"),xC=q.forwardRef(((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:f,disableOutsideScroll:p,...g}=e,m=sC(pC,r),y=oC(pC,r),v=rC(r),b=nC(r),w=J_(r),[x,S]=q.useState(null),E=q.useRef(null),T=jh(t,E,m.onContentChange),k=q.useRef(0),A=q.useRef(""),_=q.useRef(0),C=q.useRef(null),P=q.useRef("right"),D=q.useRef(0),R=p?SE:q.Fragment,I=p?{as:wC,allowPinchZoom:!0}:void 0,O=e=>{var t,r;const n=A.current+e,i=w().filter((e=>!e.disabled)),s=document.activeElement,a=null==(t=i.find((e=>e.ref.current===s)))?void 0:t.textValue,o=function(e,t,r){const n=t.length>1&&Array.from(t).every((e=>e===t[0])),i=n?t[0]:t,s=r?e.indexOf(r):-1;let a=(o=e,l=Math.max(s,0),o.map(((e,t)=>o[(l+t)%o.length])));var o,l;1===i.length&&(a=a.filter((e=>e!==r)));const c=a.find((e=>e.toLowerCase().startsWith(i.toLowerCase())));return c!==r?c:void 0}(i.map((e=>e.textValue)),n,a),l=null==(r=i.find((e=>e.textValue===o)))?void 0:r.ref.current;!function e(t){A.current=t,window.clearTimeout(k.current),""!==t&&(k.current=window.setTimeout((()=>e("")),1e3))}(n),l&&setTimeout((()=>l.focus()))};q.useEffect((()=>()=>window.clearTimeout(k.current)),[]),jS();const N=q.useCallback((e=>{var t,r;return P.current===(null==(t=C.current)?void 0:t.side)&&function(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return function(e,t){const{x:r,y:n}=e;let i=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const e=t[s],o=t[a],l=e.x,c=e.y,u=o.x,d=o.y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(i=!i)}return i}(r,t)}(e,null==(r=C.current)?void 0:r.area)}),[]);return Z.jsx(gC,{scope:r,searchRef:A,onItemEnter:q.useCallback((e=>{N(e)&&e.preventDefault()}),[N]),onItemLeave:q.useCallback((e=>{var t;N(e)||(null==(t=E.current)||t.focus(),S(null))}),[N]),onTriggerLeave:q.useCallback((e=>{N(e)&&e.preventDefault()}),[N]),pointerGraceTimerRef:_,onPointerGraceIntentChange:q.useCallback((e=>{C.current=e}),[]),children:Z.jsx(R,{...I,children:Z.jsx(_S,{asChild:!0,trapped:i,onMountAutoFocus:Ih(s,(e=>{var t;e.preventDefault(),null==(t=E.current)||t.focus({preventScroll:!0})})),onUnmountAutoFocus:a,children:Z.jsx(ef,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:f,children:Z.jsx(q_,{asChild:!0,...b,dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:x,onCurrentTabStopIdChange:S,onEntryFocus:Ih(l,(e=>{y.isUsingKeyboardRef.current||e.preventDefault()})),preventScrollOnEntryFocus:!0,children:Z.jsx(k_,{role:"menu","aria-orientation":"vertical","data-state":GC(m.open),"data-radix-menu-content":"",dir:y.dir,...v,...g,ref:T,style:{outline:"none",...g.style},onKeyDown:Ih(g.onKeyDown,(e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,r=e.ctrlKey||e.altKey||e.metaKey,n=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!r&&n&&O(e.key));const i=E.current;if(e.target!==i)return;if(!G_.includes(e.key))return;e.preventDefault();const s=w().filter((e=>!e.disabled)).map((e=>e.ref.current));H_.includes(e.key)&&s.reverse(),function(e){const t=document.activeElement;for(const r of e){if(r===t)return;if(r.focus(),document.activeElement!==t)return}}(s)})),onBlur:Ih(e.onBlur,(e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(k.current),A.current="")})),onPointerMove:Ih(e.onPointerMove,YC((e=>{const t=e.target,r=D.current!==e.clientX;if(e.currentTarget.contains(t)&&r){const t=e.clientX>D.current?"right":"left";P.current=t,D.current=e.clientX}})))})})})})})})}));yC.displayName=pC;var SC=q.forwardRef(((e,t)=>{const{__scopeMenu:r,...n}=e;return Z.jsx(Kh.div,{role:"group",...n,ref:t})}));SC.displayName="MenuGroup";var EC=q.forwardRef(((e,t)=>{const{__scopeMenu:r,...n}=e;return Z.jsx(Kh.div,{...n,ref:t})}));EC.displayName="MenuLabel";var TC="MenuItem",kC="menu.itemSelect",AC=q.forwardRef(((e,t)=>{const{disabled:r=!1,onSelect:n,...i}=e,s=q.useRef(null),a=oC(TC,e.__scopeMenu),o=mC(TC,e.__scopeMenu),l=jh(t,s),c=q.useRef(!1);return Z.jsx(_C,{...i,ref:l,disabled:r,onClick:Ih(e.onClick,(()=>{const e=s.current;if(!r&&e){const t=new CustomEvent(kC,{bubbles:!0,cancelable:!0});e.addEventListener(kC,(e=>null==n?void 0:n(e)),{once:!0}),Hh(e,t),t.defaultPrevented?c.current=!1:a.onClose()}})),onPointerDown:t=>{var r;null==(r=e.onPointerDown)||r.call(e,t),c.current=!0},onPointerUp:Ih(e.onPointerUp,(e=>{var t;c.current||null==(t=e.currentTarget)||t.click()})),onKeyDown:Ih(e.onKeyDown,(e=>{const t=""!==o.searchRef.current;r||t&&" "===e.key||K_.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())}))})}));AC.displayName=TC;var _C=q.forwardRef(((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:i,...s}=e,a=mC(TC,r),o=nC(r),l=q.useRef(null),c=jh(t,l),[u,d]=q.useState(!1),[h,f]=q.useState("");return q.useEffect((()=>{const e=l.current;e&&f((e.textContent??"").trim())}),[s.children]),Z.jsx(X_.ItemSlot,{scope:r,disabled:n,textValue:i??h,children:Z.jsx(V_,{asChild:!0,...o,focusable:!n,children:Z.jsx(Kh.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...s,ref:c,onPointerMove:Ih(e.onPointerMove,YC((e=>{if(n)a.onItemLeave(e);else if(a.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}}))),onPointerLeave:Ih(e.onPointerLeave,YC((e=>a.onItemLeave(e)))),onFocus:Ih(e.onFocus,(()=>d(!0))),onBlur:Ih(e.onBlur,(()=>d(!1)))})})})})),CC=q.forwardRef(((e,t)=>{const{checked:r=!1,onCheckedChange:n,...i}=e;return Z.jsx(LC,{scope:e.__scopeMenu,checked:r,children:Z.jsx(AC,{role:"menuitemcheckbox","aria-checked":WC(r)?"mixed":r,...i,ref:t,"data-state":QC(r),onSelect:Ih(i.onSelect,(()=>null==n?void 0:n(!!WC(r)||!r)),{checkForDefaultPrevented:!1})})})}));CC.displayName="MenuCheckboxItem";var PC="MenuRadioGroup",[DC,RC]=eC(PC,{value:void 0,onValueChange:()=>{}}),IC=q.forwardRef(((e,t)=>{const{value:r,onValueChange:n,...i}=e,s=Gh(n);return Z.jsx(DC,{scope:e.__scopeMenu,value:r,onValueChange:s,children:Z.jsx(SC,{...i,ref:t})})}));IC.displayName=PC;var OC="MenuRadioItem",NC=q.forwardRef(((e,t)=>{const{value:r,...n}=e,i=RC(OC,e.__scopeMenu),s=r===i.value;return Z.jsx(LC,{scope:e.__scopeMenu,checked:s,children:Z.jsx(AC,{role:"menuitemradio","aria-checked":s,...n,ref:t,"data-state":QC(s),onSelect:Ih(n.onSelect,(()=>{var e;return null==(e=i.onValueChange)?void 0:e.call(i,r)}),{checkForDefaultPrevented:!1})})})}));NC.displayName=OC;var jC="MenuItemIndicator",[LC,MC]=eC(jC,{checked:!1}),FC=q.forwardRef(((e,t)=>{const{__scopeMenu:r,forceMount:n,...i}=e,s=MC(jC,r);return Z.jsx(cf,{present:n||WC(s.checked)||!0===s.checked,children:Z.jsx(Kh.span,{...i,ref:t,"data-state":QC(s.checked)})})}));FC.displayName=jC;var UC=q.forwardRef(((e,t)=>{const{__scopeMenu:r,...n}=e;return Z.jsx(Kh.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})}));UC.displayName="MenuSeparator";var BC=q.forwardRef(((e,t)=>{const{__scopeMenu:r,...n}=e,i=rC(r);return Z.jsx(A_,{...i,...n,ref:t})}));BC.displayName="MenuArrow";var[$C,zC]=eC("MenuSub"),qC="MenuSubTrigger",VC=q.forwardRef(((e,t)=>{const r=sC(qC,e.__scopeMenu),n=oC(qC,e.__scopeMenu),i=zC(qC,e.__scopeMenu),s=mC(qC,e.__scopeMenu),a=q.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=s,c={__scopeMenu:e.__scopeMenu},u=q.useCallback((()=>{a.current&&window.clearTimeout(a.current),a.current=null}),[]);return q.useEffect((()=>u),[u]),q.useEffect((()=>{const e=o.current;return()=>{window.clearTimeout(e),l(null)}}),[o,l]),Z.jsx(cC,{asChild:!0,...c,children:Z.jsx(_C,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":i.contentId,"data-state":GC(r.open),...e,ref:Nh(t,i.onTriggerChange),onClick:t=>{var n;null==(n=e.onClick)||n.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Ih(e.onPointerMove,YC((t=>{s.onItemEnter(t),t.defaultPrevented||e.disabled||r.open||a.current||(s.onPointerGraceIntentChange(null),a.current=window.setTimeout((()=>{r.onOpenChange(!0),u()}),100))}))),onPointerLeave:Ih(e.onPointerLeave,YC((e=>{var t,n;u();const i=null==(t=r.content)?void 0:t.getBoundingClientRect();if(i){const t=null==(n=r.content)?void 0:n.dataset.side,a="right"===t,l=a?-5:5,c=i[a?"left":"right"],u=i[a?"right":"left"];s.onPointerGraceIntentChange({area:[{x:e.clientX+l,y:e.clientY},{x:c,y:i.top},{x:u,y:i.top},{x:u,y:i.bottom},{x:c,y:i.bottom}],side:t}),window.clearTimeout(o.current),o.current=window.setTimeout((()=>s.onPointerGraceIntentChange(null)),300)}else{if(s.onTriggerLeave(e),e.defaultPrevented)return;s.onPointerGraceIntentChange(null)}}))),onKeyDown:Ih(e.onKeyDown,(t=>{var i;const a=""!==s.searchRef.current;e.disabled||a&&" "===t.key||W_[n.dir].includes(t.key)&&(r.onOpenChange(!0),null==(i=r.content)||i.focus(),t.preventDefault())}))})})}));VC.displayName=qC;var KC="MenuSubContent",HC=q.forwardRef(((e,t)=>{const r=hC(pC,e.__scopeMenu),{forceMount:n=r.forceMount,...i}=e,s=sC(pC,e.__scopeMenu),a=oC(pC,e.__scopeMenu),o=zC(KC,e.__scopeMenu),l=q.useRef(null),c=jh(t,l);return Z.jsx(X_.Provider,{scope:e.__scopeMenu,children:Z.jsx(cf,{present:n||s.open,children:Z.jsx(X_.Slot,{scope:e.__scopeMenu,children:Z.jsx(xC,{id:o.contentId,"aria-labelledby":o.triggerId,...i,ref:c,align:"start",side:"rtl"===a.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;a.isUsingKeyboardRef.current&&(null==(t=l.current)||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:Ih(e.onFocusOutside,(e=>{e.target!==o.trigger&&s.onOpenChange(!1)})),onEscapeKeyDown:Ih(e.onEscapeKeyDown,(e=>{a.onClose(),e.preventDefault()})),onKeyDown:Ih(e.onKeyDown,(e=>{var t;const r=e.currentTarget.contains(e.target),n=Q_[a.dir].includes(e.key);r&&n&&(s.onOpenChange(!1),null==(t=o.trigger)||t.focus(),e.preventDefault())}))})})})})}));function GC(e){return e?"open":"closed"}function WC(e){return"indeterminate"===e}function QC(e){return WC(e)?"indeterminate":e?"checked":"unchecked"}function YC(e){return t=>"mouse"===t.pointerType?e(t):void 0}HC.displayName=KC;var XC=lC,JC=cC,ZC=fC,eP=yC,tP=SC,rP=EC,nP=AC,iP=CC,sP=IC,aP=NC,oP=FC,lP=UC,cP=BC,uP=VC,dP=HC,hP="DropdownMenu",[fP,pP]=Lh(hP,[tC]),gP=tC(),[mP,yP]=fP(hP),vP=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:i,defaultOpen:s,onOpenChange:a,modal:o=!0}=e,l=gP(t),c=q.useRef(null),[u,d]=hf({prop:i,defaultProp:s??!1,onChange:a,caller:hP});return Z.jsx(mP,{scope:t,triggerId:ES(),triggerRef:c,contentId:ES(),open:u,onOpenChange:d,onOpenToggle:q.useCallback((()=>d((e=>!e))),[d]),modal:o,children:Z.jsx(XC,{...l,open:u,onOpenChange:d,dir:n,modal:o,children:r})})};vP.displayName=hP;var bP="DropdownMenuTrigger",wP=q.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...i}=e,s=yP(bP,r),a=gP(r);return Z.jsx(JC,{asChild:!0,...a,children:Z.jsx(Kh.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:Nh(t,s.triggerRef),onPointerDown:Ih(e.onPointerDown,(e=>{n||0!==e.button||!1!==e.ctrlKey||(s.onOpenToggle(),s.open||e.preventDefault())})),onKeyDown:Ih(e.onKeyDown,(e=>{n||(["Enter"," "].includes(e.key)&&s.onOpenToggle(),"ArrowDown"===e.key&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())}))})})}));wP.displayName=bP;var xP=e=>{const{__scopeDropdownMenu:t,...r}=e,n=gP(t);return Z.jsx(ZC,{...n,...r})};xP.displayName="DropdownMenuPortal";var SP="DropdownMenuContent",EP=q.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=yP(SP,r),s=gP(r),a=q.useRef(!1);return Z.jsx(eP,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...n,ref:t,onCloseAutoFocus:Ih(e.onCloseAutoFocus,(e=>{var t;a.current||null==(t=i.triggerRef.current)||t.focus(),a.current=!1,e.preventDefault()})),onInteractOutside:Ih(e.onInteractOutside,(e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,n=2===t.button||r;i.modal&&!n||(a.current=!0)})),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}));EP.displayName=SP;q.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=gP(r);return Z.jsx(tP,{...i,...n,ref:t})})).displayName="DropdownMenuGroup";var TP=q.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=gP(r);return Z.jsx(rP,{...i,...n,ref:t})}));TP.displayName="DropdownMenuLabel";var kP=q.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=gP(r);return Z.jsx(nP,{...i,...n,ref:t})}));kP.displayName="DropdownMenuItem";var AP=q.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=gP(r);return Z.jsx(iP,{...i,...n,ref:t})}));AP.displayName="DropdownMenuCheckboxItem";var _P=q.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=gP(r);return Z.jsx(sP,{...i,...n,ref:t})}));_P.displayName="DropdownMenuRadioGroup";var CP=q.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=gP(r);return Z.jsx(aP,{...i,...n,ref:t})}));CP.displayName="DropdownMenuRadioItem";var PP=q.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=gP(r);return Z.jsx(oP,{...i,...n,ref:t})}));PP.displayName="DropdownMenuItemIndicator";var DP=q.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=gP(r);return Z.jsx(lP,{...i,...n,ref:t})}));DP.displayName="DropdownMenuSeparator";q.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=gP(r);return Z.jsx(cP,{...i,...n,ref:t})})).displayName="DropdownMenuArrow";var RP=q.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=gP(r);return Z.jsx(uP,{...i,...n,ref:t})}));RP.displayName="DropdownMenuSubTrigger";var IP=q.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=gP(r);return Z.jsx(dP,{...i,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}));IP.displayName="DropdownMenuSubContent";var OP=xP,NP=EP,jP=TP,LP=kP,MP=AP,FP=CP,UP=PP,BP=DP,$P=RP,zP=IP;const qP=vP,VP=wP,KP=_P;V.forwardRef((({className:e,inset:t,children:r,...n},i)=>Z.jsxs($P,{ref:i,className:Sm("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,Z.jsx(wp,{className:"ml-auto h-4 w-4"})]}))).displayName=$P.displayName;V.forwardRef((({className:e,...t},r)=>Z.jsx(zP,{ref:r,className:Sm("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}))).displayName=zP.displayName;const HP=V.forwardRef((({className:e,sideOffset:t=4,...r},n)=>Z.jsx(OP,{children:Z.jsx(NP,{ref:n,sideOffset:t,className:Sm("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})})));HP.displayName=NP.displayName;const GP=V.forwardRef((({className:e,inset:t,...r},n)=>Z.jsx(LP,{ref:n,className:Sm("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r})));GP.displayName=LP.displayName;const WP=V.forwardRef((({className:e,children:t,checked:r,...n},i)=>Z.jsxs(MP,{ref:i,className:Sm("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[Z.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Z.jsx(UP,{children:Z.jsx(yp,{className:"h-4 w-4"})})}),t]})));WP.displayName=MP.displayName;const QP=V.forwardRef((({className:e,children:t,...r},n)=>Z.jsxs(FP,{ref:n,className:Sm("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[Z.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Z.jsx(UP,{children:Z.jsx(Sp,{className:"h-2 w-2 fill-current"})})}),t]})));QP.displayName=FP.displayName;const YP=V.forwardRef((({className:e,inset:t,...r},n)=>Z.jsx(jP,{ref:n,className:Sm("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r})));YP.displayName=jP.displayName;const XP=V.forwardRef((({className:e,...t},r)=>Z.jsx(BP,{ref:r,className:Sm("-mx-1 my-1 h-px bg-muted",e),...t})));XP.displayName=BP.displayName;const JP=({currentLanguage:e,showTranscript:t,onToggleShowTranscript:r,onDownloadAudio:n,onDownloadText:i,isCompact:s=!1,playbackRateOptions:a,currentPlaybackRateValue:o,onSetPlaybackRate:l,isOfflineMode:c=!1,availableAudioVariants:u=[],selectedAudioLang:d,onAudioTrackChange:h,hasTranscript:f=!1,hasQuestions:p=!1,onRecognizeText:g,onRecognizeQuestions:m,onSmartSegmentation:y,isRecognizingText:v=!1,isRecognizingQuestions:b=!1,isSmartSegmenting:w=!1})=>{const x=new Map;(u||[]).forEach((e=>{const t=(e=>{const t=("string"==typeof e?e:null==e?void 0:e.lang)||"",r=String(t).toLowerCase();return["spanish","es-es","spa"].includes(r)?"es":["russian","ru-ru","rus"].includes(r)?"ru":["mix","mx"].includes(r)?"mixed":r})(e);t&&(x.has(t)||x.set(t,{lang:t}))}));const S={ru:0,es:1,mixed:2},E=Array.from(x.values()).sort(((e,t)=>(S[e.lang]??100)-(S[t.lang]??100)||e.lang.localeCompare(t.lang))).filter((e=>"en"!==e.lang)),T=E.length>1,k=E.some((e=>"mixed"===e.lang)),A=E.some((e=>"ru"===e.lang||"es"===e.lang)),_=T||k&&A;return Z.jsxs(qP,{children:[Z.jsx(VP,{asChild:!0,children:Z.jsx(AT,{variant:"ghost",size:s?"icon_sm":"icon",className:"text-white/80 hover:text-white hover:bg-white/15 "+(s?"h-8 w-8":"h-9 w-9 sm:h-10 sm:w-10 md:h-11 md:w-11"),"aria-label":iy("settings",e),children:Z.jsx(yg,{className:s?"h-4 w-4":"h-4 w-4 sm:h-5 sm:w-5 md:h-5 md:w-5"})})}),Z.jsxs(HP,{className:"w-60 bg-slate-800 border-slate-600 text-slate-200 shadow-xl",side:"top",align:"start",children:[Z.jsx(YP,{className:"text-white font-medium",children:iy("settings",e)}),Z.jsx(XP,{className:"bg-slate-600"}),Z.jsxs(WP,{checked:t,onCheckedChange:r,className:"focus:bg-slate-600 data-[state=checked]:bg-slate-600 data-[state=checked]:text-white text-slate-200 focus:text-slate-100 data-[state=checked]:text-white",children:[Z.jsx(gg,{className:"mr-2 h-4 w-4 text-slate-200"}),Z.jsx("span",{children:iy("showTranscript",e)})]}),Z.jsx(XP,{className:"bg-slate-700"}),_&&Z.jsxs(Z.Fragment,{children:[Z.jsxs(YP,{className:"text-white font-medium flex items-center",children:[Z.jsx(Pg,{className:"mr-2 h-4 w-4 text-slate-200"}),iy("audioTrack",e)||"Audio Track"]}),Z.jsx(KP,{value:(d||"").toLowerCase(),onValueChange:e=>h(String(e).toLowerCase()),children:E.map((({lang:t})=>{if(!t)return null;let r;return r="ru"===t?iy("audioTrackRussian",e)||"":"es"===t?iy("audioTrackSpanish",e)||"":"mixed"===t?iy("audioTrackMixed",e)||"":t.toUpperCase(),Z.jsx(QP,{value:t,className:"focus:bg-slate-600 data-[state=checked]:bg-slate-600 data-[state=checked]:text-white text-slate-200 focus:text-slate-100 data-[state=checked]:text-white",children:r},t)}))}),Z.jsx(XP,{className:"bg-slate-700"})]}),Z.jsxs(YP,{className:"text-white font-medium flex items-center",children:[Z.jsx(Lp,{className:"mr-2 h-4 w-4 text-slate-200"}),iy("playbackSpeed",e)]}),Z.jsx(KP,{value:String(o),onValueChange:e=>l(parseFloat(e)),children:a.map((e=>Z.jsx(QP,{value:String(e.value),className:"focus:bg-slate-600 data-[state=checked]:bg-slate-600 data-[state=checked]:text-white text-slate-200 focus:text-slate-100 data-[state=checked]:text-white",children:e.label},e.value)))}),Z.jsx(XP,{className:"bg-slate-600"}),Z.jsxs(GP,{onClick:i,className:"focus:bg-slate-600 text-slate-200",children:[Z.jsx(Ip,{className:"mr-2 h-4 w-4 text-slate-200"}),Z.jsx("span",{children:iy("downloadText",e)})]}),Z.jsxs(GP,{onClick:n,className:"focus:bg-slate-600 text-slate-200 relative",children:[Z.jsx(_p,{className:"mr-2 h-4 w-4 text-slate-200"}),Z.jsx("span",{children:iy("downloadAudio",e)}),c&&Z.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 w-2 h-2 bg-orange-500 rounded-full border border-white/20"})]})]})]})},ZP=V.memo((({activeQuestionTitle:e,isPlaying:t,isLoading:r,currentLanguage:n,currentTime:i,duration:s,onProgressChange:a,questions:o,onQuestionSelectJump:l,onNavigateQuestion:c,onTogglePlayPause:u,onSkip:d,playerControlsContainerRef:h,showTranscript:f,onToggleShowTranscript:p,onDownloadAudio:g,onDownloadText:m,playbackRateOptions:y,currentPlaybackRateValue:v,onSetPlaybackRate:b,onOpenAddQuestionDialog:w,episodeDate:x,isOfflineMode:S=!1,availableAudioVariants:E=[],selectedAudioLang:T,onAudioTrackChange:k,hasTranscript:A=!1,hasQuestions:_=!1,onRecognizeText:C,onRecognizeQuestions:P,onSmartSegmentation:D,isRecognizingText:R=!1,isRecognizingQuestions:I=!1,isSmartSegmenting:O=!1,isEditMode:N,setIsEditMode:j,isAuthenticated:L,openAuthModal:M})=>Z.jsxs("div",{ref:h,className:"w-full flex flex-col items-center justify-center",children:[Z.jsxs("div",{className:"w-full flex flex-col items-center justify-center px-1 sm:px-1.5",children:[Z.jsx("div",{className:"h-5 text-center mb-1 text-xs sm:text-sm text-white truncate px-1 w-full flex items-center justify-center",children:e||iy(t?"nowPlaying":"paused",n)}),Z.jsx("div",{className:"w-full px-3 mb-3",children:Z.jsx(Tk,{currentTime:i,duration:s,sections:o||[],onProgressChange:a,onSectionJump:l,currentLanguage:n})})]}),Z.jsx("div",{className:"mt-2.5 flex flex-col items-center gap-1.5 md:gap-2.5",children:Z.jsxs("div",{className:"flex items-center justify-center w-full gap-1.5 sm:gap-2 md:gap-2.5",children:[Z.jsx(JP,{currentLanguage:n,showTranscript:f,onToggleShowTranscript:p,onDownloadAudio:g,onDownloadText:m,playbackRateOptions:y,currentPlaybackRateValue:v,onSetPlaybackRate:b,isCompact:!1,isOfflineMode:S,availableAudioVariants:E,selectedAudioLang:T,onAudioTrackChange:k,hasTranscript:A,hasQuestions:_,onRecognizeText:C,onRecognizeQuestions:P,onSmartSegmentation:D,isRecognizingText:R,isRecognizingQuestions:I,isSmartSegmenting:O}),Z.jsx(AT,{variant:"ghost",size:"icon",onClick:()=>c(-1),className:"text-white/80 hover:text-white hover:bg-white/15 h-9 w-9 sm:h-10 sm:w-10 md:h-11 md:w-11","aria-label":iy("previousQuestion",n),children:Z.jsx(bp,{className:"h-5 w-5 sm:h-5 sm:w-5 md:h-6 md:w-6"})}),Z.jsx(Ek,{isPlaying:t,isLoading:r,onPlayPause:u,onSkip:d,variant:"compact",currentLanguage:n}),Z.jsx(AT,{variant:"ghost",size:"icon",onClick:()=>c(1),className:"text-white/80 hover:text-white hover:bg-white/15 h-9 w-9 sm:h-10 sm:w-10 md:h-11 md:w-11","aria-label":iy("nextQuestion",n),children:Z.jsx(wp,{className:"h-5 w-5 sm:h-5 sm:w-5 md:h-6 md:w-6"})}),L?N?Z.jsxs("div",{className:"flex items-center",children:[Z.jsx(AT,{variant:"ghost",size:"icon",onClick:w,className:"text-white/80 hover:text-white hover:bg-white/15 h-9 w-9 sm:h-10 sm:w-10 md:h-11 md:w-11","aria-label":iy("addQuestion",n),children:Z.jsx(cg,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-5 md:w-5"})}),Z.jsx(AT,{variant:"ghost",size:"icon",onClick:()=>j(!1),className:"text-white/80 hover:text-white hover:bg-white/15 h-9 w-9 sm:h-10 sm:w-10 md:h-11 md:w-11","aria-label":iy("exitEditMode",n),children:Z.jsx(Ng,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-5 md:w-5"})})]}):Z.jsx(AT,{variant:"ghost",size:"icon",onClick:()=>j(!0),className:"text-white/80 hover:text-white hover:bg-white/15 h-9 w-9 sm:h-10 sm:w-10 md:h-11 md:w-11","aria-label":iy("enterEditMode",n),children:Z.jsx(ag,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-5 md:w-5"})}):Z.jsx(AT,{variant:"ghost",size:"icon",onClick:M,className:"text-white/80 hover:text-white hover:bg-white/15 h-9 w-9 sm:h-10 sm:w-10 md:h-11 md:w-11","aria-label":iy("enterEditMode",n),children:Z.jsx(ag,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-5 md:w-5"})})]})})]})));function eD(e,[t,r]){return Math.min(r,Math.max(t,e))}function tD(e){const t=rD(e),r=q.forwardRef(((e,r)=>{const{children:n,...i}=e,s=q.Children.toArray(n),a=s.find(iD);if(a){const e=a.props.children,n=s.map((t=>t===a?q.Children.count(e)>1?q.Children.only(null):q.isValidElement(e)?e.props.children:null:t));return Z.jsx(t,{...i,ref:r,children:q.isValidElement(e)?q.cloneElement(e,void 0,n):null})}return Z.jsx(t,{...i,ref:r,children:n})}));return r.displayName=`${e}.Slot`,r}function rD(e){const t=q.forwardRef(((e,t)=>{const{children:r,...n}=e;if(q.isValidElement(r)){const e=function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;if(i)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(r),i=function(e,t){const r={...t};for(const n in t){const i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]={...i,...s}:"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==q.Fragment&&(i.ref=t?Nh(t,e):e),q.cloneElement(r,i)}return q.Children.count(r)>1?q.Children.only(null):null}));return t.displayName=`${e}.SlotClone`,t}var nD=Symbol("radix.slottable");function iD(e){return q.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===nD}var sD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce(((e,t)=>{const r=tD(`Primitive.${t}`),n=q.forwardRef(((e,n)=>{const{asChild:i,...s}=e,a=i?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),Z.jsx(a,{...s,ref:n})}));return n.displayName=`Primitive.${t}`,{...e,[t]:n}}),{});var aD,oD="dismissableLayer.update",lD="dismissableLayer.pointerDownOutside",cD="dismissableLayer.focusOutside",uD=q.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),dD=q.forwardRef(((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...l}=e,c=q.useContext(uD),[u,d]=q.useState(null),h=(null==u?void 0:u.ownerDocument)??(null==globalThis?void 0:globalThis.document),[,f]=q.useState({}),p=jh(t,(e=>d(e))),g=Array.from(c.layers),[m]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(m),v=u?g.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,w=v>=y,x=function(e,t=(null==globalThis?void 0:globalThis.document)){const r=Gh(e),n=q.useRef(!1),i=q.useRef((()=>{}));return q.useEffect((()=>{const e=e=>{if(e.target&&!n.current){let n=function(){fD(lD,r,s,{discrete:!0})};const s={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=n,t.addEventListener("click",i.current,{once:!0})):n()}else t.removeEventListener("click",i.current);n.current=!1},s=window.setTimeout((()=>{t.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}}),[t,r]),{onPointerDownCapture:()=>n.current=!0}}((e=>{const t=e.target,r=[...c.branches].some((e=>e.contains(t)));w&&!r&&(null==i||i(e),null==a||a(e),e.defaultPrevented||null==o||o())}),h),S=function(e,t=(null==globalThis?void 0:globalThis.document)){const r=Gh(e),n=q.useRef(!1);return q.useEffect((()=>{const e=e=>{if(e.target&&!n.current){fD(cD,r,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)}),[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}((e=>{const t=e.target;[...c.branches].some((e=>e.contains(t)))||(null==s||s(e),null==a||a(e),e.defaultPrevented||null==o||o())}),h);return Wh((e=>{v===c.layers.size-1&&(null==n||n(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))}),h),q.useEffect((()=>{if(u)return r&&(0===c.layersWithOutsidePointerEventsDisabled.size&&(aD=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),hD(),()=>{r&&1===c.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=aD)}}),[u,h,r,c]),q.useEffect((()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),hD())}),[u,c]),q.useEffect((()=>{const e=()=>f({});return document.addEventListener(oD,e),()=>document.removeEventListener(oD,e)}),[]),Z.jsx(sD.div,{...l,ref:p,style:{pointerEvents:b?w?"auto":"none":void 0,...e.style},onFocusCapture:Ih(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Ih(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Ih(e.onPointerDownCapture,x.onPointerDownCapture)})}));dD.displayName="DismissableLayer";function hD(){const e=new CustomEvent(oD);document.dispatchEvent(e)}function fD(e,t,r,{discrete:n}){const i=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?function(e,t){e&&ad.flushSync((()=>e.dispatchEvent(t)))}(i,s):i.dispatchEvent(s)}q.forwardRef(((e,t)=>{const r=q.useContext(uD),n=q.useRef(null),i=jh(t,n);return q.useEffect((()=>{const e=n.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}}),[r.branches]),Z.jsx(sD.div,{...e,ref:i})})).displayName="DismissableLayerBranch";var pD="focusScope.autoFocusOnMount",gD="focusScope.autoFocusOnUnmount",mD={bubbles:!1,cancelable:!0},yD=q.forwardRef(((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[o,l]=q.useState(null),c=Gh(i),u=Gh(s),d=q.useRef(null),h=jh(t,(e=>l(e))),f=q.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;q.useEffect((()=>{if(n){let e=function(e){if(f.paused||!o)return;const t=e.target;o.contains(t)?d.current=t:xD(d.current,{select:!0})},t=function(e){if(f.paused||!o)return;const t=e.relatedTarget;null!==t&&(o.contains(t)||xD(d.current,{select:!0}))},r=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&xD(o)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const n=new MutationObserver(r);return o&&n.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}}),[n,o,f.paused]),q.useEffect((()=>{if(o){SD.add(f);const t=document.activeElement;if(!o.contains(t)){const r=new CustomEvent(pD,mD);o.addEventListener(pD,c),o.dispatchEvent(r),r.defaultPrevented||(!function(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(xD(n,{select:t}),document.activeElement!==r)return}((e=vD(o),e.filter((e=>"A"!==e.tagName))),{select:!0}),document.activeElement===t&&xD(o))}return()=>{o.removeEventListener(pD,c),setTimeout((()=>{const e=new CustomEvent(gD,mD);o.addEventListener(gD,u),o.dispatchEvent(e),e.defaultPrevented||xD(t??document.body,{select:!0}),o.removeEventListener(gD,u),SD.remove(f)}),0)}}var e}),[o,c,u,f]);const p=q.useCallback((e=>{if(!r&&!n)return;if(f.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,i=document.activeElement;if(t&&i){const t=e.currentTarget,[n,s]=function(e){const t=vD(e),r=bD(t,e),n=bD(t.reverse(),e);return[r,n]}(t);n&&s?e.shiftKey||i!==s?e.shiftKey&&i===n&&(e.preventDefault(),r&&xD(s,{select:!0})):(e.preventDefault(),r&&xD(n,{select:!0})):i===t&&e.preventDefault()}}),[r,n,f.paused]);return Z.jsx(sD.div,{tabIndex:-1,...a,ref:h,onKeyDown:p})}));function vD(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function bD(e,t){for(const r of e)if(!wD(r,{upTo:t}))return r}function wD(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function xD(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}yD.displayName="FocusScope";var SD=function(){let e=[];return{add(t){const r=e[0];t!==r&&(null==r||r.pause()),e=ED(e,t),e.unshift(t)},remove(t){var r;e=ED(e,t),null==(r=e[0])||r.resume()}}}();function ED(e,t){const r=[...e],n=r.indexOf(t);return-1!==n&&r.splice(n,1),r}var TD=q.forwardRef(((e,t)=>{const{children:r,width:n=10,height:i=5,...s}=e;return Z.jsx(sD.svg,{...s,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:Z.jsx("polygon",{points:"0,0 30,0 15,10"})})}));TD.displayName="Arrow";var kD=TD,AD="Popper",[_D,CD]=Lh(AD),[PD,DD]=_D(AD),RD=e=>{const{__scopePopper:t,children:r}=e,[n,i]=q.useState(null);return Z.jsx(PD,{scope:t,anchor:n,onAnchorChange:i,children:r})};RD.displayName=AD;var ID="PopperAnchor",OD=q.forwardRef(((e,t)=>{const{__scopePopper:r,virtualRef:n,...i}=e,s=DD(ID,r),a=q.useRef(null),o=jh(t,a);return q.useEffect((()=>{s.onAnchorChange((null==n?void 0:n.current)||a.current)})),n?null:Z.jsx(sD.div,{...i,ref:o})}));OD.displayName=ID;var ND="PopperContent",[jD,LD]=_D(ND),MD=q.forwardRef(((e,t)=>{var r,n,i,s,a,o;const{__scopePopper:l,side:c="bottom",sideOffset:u=0,align:d="center",alignOffset:h=0,arrowPadding:f=0,avoidCollisions:p=!0,collisionBoundary:g=[],collisionPadding:m=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:b="optimized",onPlaced:w,...x}=e,S=DD(ND,l),[E,T]=q.useState(null),k=jh(t,(e=>T(e))),[A,_]=q.useState(null),C=i_(A),P=(null==C?void 0:C.width)??0,D=(null==C?void 0:C.height)??0,R=c+("center"!==d?"-"+d:""),I="number"==typeof m?m:{top:0,right:0,bottom:0,left:0,...m},O=Array.isArray(g)?g:[g],N=O.length>0,j={padding:I,boundary:O.filter($D),altBoundary:N},{refs:L,floatingStyles:M,placement:F,isPositioned:U,middlewareData:B}=GA({strategy:"fixed",placement:R,whileElementsMounted:(...e)=>OA(...e,{animationFrame:"always"===b}),elements:{reference:S.anchor},middleware:[QA({mainAxis:u+D,alignmentAxis:h}),p&&YA({mainAxis:!0,crossAxis:!1,limiter:"partial"===y?XA():void 0,...j}),p&&JA({...j}),ZA({...j,apply:({elements:e,rects:t,availableWidth:r,availableHeight:n})=>{const{width:i,height:s}=t.reference,a=e.floating.style;a.setProperty("--radix-popper-available-width",`${r}px`),a.setProperty("--radix-popper-available-height",`${n}px`),a.setProperty("--radix-popper-anchor-width",`${i}px`),a.setProperty("--radix-popper-anchor-height",`${s}px`)}}),A&&t_({element:A,padding:f}),zD({arrowWidth:P,arrowHeight:D}),v&&e_({strategy:"referenceHidden",...j})]}),[$,z]=qD(F),V=Gh(w);of((()=>{U&&(null==V||V())}),[U,V]);const K=null==(r=B.arrow)?void 0:r.x,H=null==(n=B.arrow)?void 0:n.y,G=0!==(null==(i=B.arrow)?void 0:i.centerOffset),[W,Q]=q.useState();return of((()=>{E&&Q(window.getComputedStyle(E).zIndex)}),[E]),Z.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:U?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[null==(s=B.transformOrigin)?void 0:s.x,null==(a=B.transformOrigin)?void 0:a.y].join(" "),...(null==(o=B.hide)?void 0:o.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:Z.jsx(jD,{scope:l,placedSide:$,onArrowChange:_,arrowX:K,arrowY:H,shouldHideArrow:G,children:Z.jsx(sD.div,{"data-side":$,"data-align":z,...x,ref:k,style:{...x.style,animation:U?void 0:"none"}})})})}));MD.displayName=ND;var FD="PopperArrow",UD={top:"bottom",right:"left",bottom:"top",left:"right"},BD=q.forwardRef((function(e,t){const{__scopePopper:r,...n}=e,i=LD(FD,r),s=UD[i.placedSide];return Z.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:Z.jsx(kD,{...n,ref:t,style:{...n.style,display:"block"}})})}));function $D(e){return null!==e}BD.displayName=FD;var zD=e=>({name:"transformOrigin",options:e,fn(t){var r,n,i;const{placement:s,rects:a,middlewareData:o}=t,l=0!==(null==(r=o.arrow)?void 0:r.centerOffset),c=l?0:e.arrowWidth,u=l?0:e.arrowHeight,[d,h]=qD(s),f={start:"0%",center:"50%",end:"100%"}[h],p=((null==(n=o.arrow)?void 0:n.x)??0)+c/2,g=((null==(i=o.arrow)?void 0:i.y)??0)+u/2;let m="",y="";return"bottom"===d?(m=l?f:`${p}px`,y=-u+"px"):"top"===d?(m=l?f:`${p}px`,y=`${a.floating.height+u}px`):"right"===d?(m=-u+"px",y=l?f:`${g}px`):"left"===d&&(m=`${a.floating.width+u}px`,y=l?f:`${g}px`),{data:{x:m,y:y}}}});function qD(e){const[t,r="center"]=e.split("-");return[t,r]}var VD=RD,KD=OD,HD=MD,GD=BD,WD=q.forwardRef(((e,t)=>{var r;const{container:n,...i}=e,[s,a]=q.useState(!1);of((()=>a(!0)),[]);const o=n||s&&(null==(r=null==globalThis?void 0:globalThis.document)?void 0:r.body);return o?od.createPortal(Z.jsx(sD.div,{...i,ref:t}),o):null}));function QD(e){const t=q.useRef({value:e,previous:e});return q.useMemo((()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous)),[e])}WD.displayName="Portal";var YD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"});q.forwardRef(((e,t)=>Z.jsx(sD.span,{...e,ref:t,style:{...YD,...e.style}}))).displayName="VisuallyHidden";var XD=[" ","Enter","ArrowUp","ArrowDown"],JD=[" ","Enter"],ZD="Select",[eR,tR,rR]=function(e){const t=e+"CollectionProvider",[r,n]=Lh(t),[i,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=e=>{const{scope:t,children:r}=e,n=V.useRef(null),s=V.useRef(new Map).current;return Z.jsx(i,{scope:t,itemMap:s,collectionRef:n,children:r})};a.displayName=t;const o=e+"CollectionSlot",l=tD(o),c=V.forwardRef(((e,t)=>{const{scope:r,children:n}=e,i=jh(t,s(o,r).collectionRef);return Z.jsx(l,{ref:i,children:n})}));c.displayName=o;const u=e+"CollectionItemSlot",d="data-radix-collection-item",h=tD(u),f=V.forwardRef(((e,t)=>{const{scope:r,children:n,...i}=e,a=V.useRef(null),o=jh(t,a),l=s(u,r);return V.useEffect((()=>(l.itemMap.set(a,{ref:a,...i}),()=>{l.itemMap.delete(a)}))),Z.jsx(h,{[d]:"",ref:o,children:n})}));return f.displayName=u,[{Provider:a,Slot:c,ItemSlot:f},function(t){const r=s(e+"CollectionConsumer",t),n=V.useCallback((()=>{const e=r.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${d}]`)),n=Array.from(r.itemMap.values()).sort(((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current)));return n}),[r.collectionRef,r.itemMap]);return n},n]}(ZD),[nR,iR]=Lh(ZD,[rR,CD]),sR=CD(),[aR,oR]=nR(ZD),[lR,cR]=nR(ZD),uR=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:i,onOpenChange:s,value:a,defaultValue:o,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:f,form:p}=e,g=sR(t),[m,y]=q.useState(null),[v,b]=q.useState(null),[w,x]=q.useState(!1),S=Ak(c),[E,T]=hf({prop:n,defaultProp:i??!1,onChange:s,caller:ZD}),[k,A]=hf({prop:a,defaultProp:o,onChange:l,caller:ZD}),_=q.useRef(null),C=!m||(p||!!m.closest("form")),[P,D]=q.useState(new Set),R=Array.from(P).map((e=>e.props.value)).join(";");return Z.jsx(VD,{...g,children:Z.jsxs(aR,{required:f,scope:t,trigger:m,onTriggerChange:y,valueNode:v,onValueNodeChange:b,valueNodeHasChildren:w,onValueNodeHasChildrenChange:x,contentId:ES(),value:k,onValueChange:A,open:E,onOpenChange:T,dir:S,triggerPointerDownPosRef:_,disabled:h,children:[Z.jsx(eR.Provider,{scope:t,children:Z.jsx(lR,{scope:e.__scopeSelect,onNativeOptionAdd:q.useCallback((e=>{D((t=>new Set(t).add(e)))}),[]),onNativeOptionRemove:q.useCallback((e=>{D((t=>{const r=new Set(t);return r.delete(e),r}))}),[]),children:r})}),C?Z.jsxs(YR,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:d,value:k,onChange:e=>A(e.target.value),disabled:h,form:p,children:[void 0===k?Z.jsx("option",{value:""}):null,Array.from(P)]},R):null]})})};uR.displayName=ZD;var dR="SelectTrigger",hR=q.forwardRef(((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...i}=e,s=sR(r),a=oR(dR,r),o=a.disabled||n,l=jh(t,a.onTriggerChange),c=tR(r),u=q.useRef("touch"),[d,h,f]=JR((e=>{const t=c().filter((e=>!e.disabled)),r=t.find((e=>e.value===a.value)),n=ZR(t,e,r);void 0!==n&&a.onValueChange(n.value)})),p=e=>{o||(a.onOpenChange(!0),f()),e&&(a.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return Z.jsx(KD,{asChild:!0,...s,children:Z.jsx(sD.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":XR(a.value)?"":void 0,...i,ref:l,onClick:Ih(i.onClick,(e=>{e.currentTarget.focus(),"mouse"!==u.current&&p(e)})),onPointerDown:Ih(i.onPointerDown,(e=>{u.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(p(e),e.preventDefault())})),onKeyDown:Ih(i.onKeyDown,(e=>{const t=""!==d.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||h(e.key),t&&" "===e.key||XD.includes(e.key)&&(p(),e.preventDefault())}))})})}));hR.displayName=dR;var fR="SelectValue",pR=q.forwardRef(((e,t)=>{const{__scopeSelect:r,className:n,style:i,children:s,placeholder:a="",...o}=e,l=oR(fR,r),{onValueNodeHasChildrenChange:c}=l,u=void 0!==s,d=jh(t,l.onValueNodeChange);return of((()=>{c(u)}),[c,u]),Z.jsx(sD.span,{...o,ref:d,style:{pointerEvents:"none"},children:XR(l.value)?Z.jsx(Z.Fragment,{children:a}):s})}));pR.displayName=fR;var gR=q.forwardRef(((e,t)=>{const{__scopeSelect:r,children:n,...i}=e;return Z.jsx(sD.span,{"aria-hidden":!0,...i,ref:t,children:n||""})}));gR.displayName="SelectIcon";var mR=e=>Z.jsx(WD,{asChild:!0,...e});mR.displayName="SelectPortal";var yR="SelectContent",vR=q.forwardRef(((e,t)=>{const r=oR(yR,e.__scopeSelect),[n,i]=q.useState();if(of((()=>{i(new DocumentFragment)}),[]),!r.open){const t=n;return t?ad.createPortal(Z.jsx(wR,{scope:e.__scopeSelect,children:Z.jsx(eR.Slot,{scope:e.__scopeSelect,children:Z.jsx("div",{children:e.children})})}),t):null}return Z.jsx(ER,{...e,ref:t})}));vR.displayName=yR;var bR=10,[wR,xR]=nR(yR),SR=tD("SelectContent.RemoveScroll"),ER=q.forwardRef(((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:g,avoidCollisions:m,...y}=e,v=oR(yR,r),[b,w]=q.useState(null),[x,S]=q.useState(null),E=jh(t,(e=>w(e))),[T,k]=q.useState(null),[A,_]=q.useState(null),C=tR(r),[P,D]=q.useState(!1),R=q.useRef(!1);q.useEffect((()=>{if(b)return PE(b)}),[b]),jS();const I=q.useCallback((e=>{const[t,...r]=C().map((e=>e.ref.current)),[n]=r.slice(-1),i=document.activeElement;for(const s of e){if(s===i)return;if(null==s||s.scrollIntoView({block:"nearest"}),s===t&&x&&(x.scrollTop=0),s===n&&x&&(x.scrollTop=x.scrollHeight),null==s||s.focus(),document.activeElement!==i)return}}),[C,x]),O=q.useCallback((()=>I([T,b])),[I,T,b]);q.useEffect((()=>{P&&O()}),[P,O]);const{onOpenChange:N,triggerPointerDownPosRef:j}=v;q.useEffect((()=>{if(b){let e={x:0,y:0};const t=t=>{var r,n;e={x:Math.abs(Math.round(t.pageX)-((null==(r=j.current)?void 0:r.x)??0)),y:Math.abs(Math.round(t.pageY)-((null==(n=j.current)?void 0:n.y)??0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():b.contains(r.target)||N(!1),document.removeEventListener("pointermove",t),j.current=null};return null!==j.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}}),[b,N,j]),q.useEffect((()=>{const e=()=>N(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}}),[N]);const[L,M]=JR((e=>{const t=C().filter((e=>!e.disabled)),r=t.find((e=>e.ref.current===document.activeElement)),n=ZR(t,e,r);n&&setTimeout((()=>n.ref.current.focus()))})),F=q.useCallback(((e,t,r)=>{const n=!R.current&&!r;(void 0!==v.value&&v.value===t||n)&&(k(e),n&&(R.current=!0))}),[v.value]),U=q.useCallback((()=>null==b?void 0:b.focus()),[b]),B=q.useCallback(((e,t,r)=>{const n=!R.current&&!r;(void 0!==v.value&&v.value===t||n)&&_(e)}),[v.value]),$="popper"===n?kR:TR,z=$===kR?{side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:g,avoidCollisions:m}:{};return Z.jsx(wR,{scope:r,content:b,viewport:x,onViewportChange:S,itemRefCallback:F,selectedItem:T,onItemLeave:U,itemTextRefCallback:B,focusSelectedItem:O,selectedItemText:A,position:n,isPositioned:P,searchRef:L,children:Z.jsx(SE,{as:SR,allowPinchZoom:!0,children:Z.jsx(yD,{asChild:!0,trapped:v.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:Ih(i,(e=>{var t;null==(t=v.trigger)||t.focus({preventScroll:!0}),e.preventDefault()})),children:Z.jsx(dD,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:Z.jsx($,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:e=>e.preventDefault(),...y,...z,onPlaced:()=>D(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Ih(y.onKeyDown,(e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||M(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=C().filter((e=>!e.disabled)).map((e=>e.ref.current));if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const r=e.target,n=t.indexOf(r);t=t.slice(n+1)}setTimeout((()=>I(t))),e.preventDefault()}}))})})})})})}));ER.displayName="SelectContentImpl";var TR=q.forwardRef(((e,t)=>{const{__scopeSelect:r,onPlaced:n,...i}=e,s=oR(yR,r),a=xR(yR,r),[o,l]=q.useState(null),[c,u]=q.useState(null),d=jh(t,(e=>u(e))),h=tR(r),f=q.useRef(!1),p=q.useRef(!0),{viewport:g,selectedItem:m,selectedItemText:y,focusSelectedItem:v}=a,b=q.useCallback((()=>{if(s.trigger&&s.valueNode&&o&&c&&g&&m&&y){const e=s.trigger.getBoundingClientRect(),t=c.getBoundingClientRect(),r=s.valueNode.getBoundingClientRect(),i=y.getBoundingClientRect();if("rtl"!==s.dir){const n=i.left-t.left,s=r.left-n,a=e.left-s,l=e.width+a,c=Math.max(l,t.width),u=window.innerWidth-bR,d=eD(s,[bR,Math.max(bR,u-c)]);o.style.minWidth=l+"px",o.style.left=d+"px"}else{const n=t.right-i.right,s=window.innerWidth-r.right-n,a=window.innerWidth-e.right-s,l=e.width+a,c=Math.max(l,t.width),u=window.innerWidth-bR,d=eD(s,[bR,Math.max(bR,u-c)]);o.style.minWidth=l+"px",o.style.right=d+"px"}const a=h(),l=window.innerHeight-2*bR,u=g.scrollHeight,d=window.getComputedStyle(c),p=parseInt(d.borderTopWidth,10),v=parseInt(d.paddingTop,10),b=parseInt(d.borderBottomWidth,10),w=p+v+u+parseInt(d.paddingBottom,10)+b,x=Math.min(5*m.offsetHeight,w),S=window.getComputedStyle(g),E=parseInt(S.paddingTop,10),T=parseInt(S.paddingBottom,10),k=e.top+e.height/2-bR,A=l-k,_=m.offsetHeight/2,C=p+v+(m.offsetTop+_),P=w-C;if(C<=k){const e=a.length>0&&m===a[a.length-1].ref.current;o.style.bottom="0px";const t=c.clientHeight-g.offsetTop-g.offsetHeight,r=C+Math.max(A,_+(e?T:0)+t+b);o.style.height=r+"px"}else{const e=a.length>0&&m===a[0].ref.current;o.style.top="0px";const t=Math.max(k,p+g.offsetTop+(e?E:0)+_)+P;o.style.height=t+"px",g.scrollTop=C-k+g.offsetTop}o.style.margin=`${bR}px 0`,o.style.minHeight=x+"px",o.style.maxHeight=l+"px",null==n||n(),requestAnimationFrame((()=>f.current=!0))}}),[h,s.trigger,s.valueNode,o,c,g,m,y,s.dir,n]);of((()=>b()),[b]);const[w,x]=q.useState();of((()=>{c&&x(window.getComputedStyle(c).zIndex)}),[c]);const S=q.useCallback((e=>{e&&!0===p.current&&(b(),null==v||v(),p.current=!1)}),[b,v]);return Z.jsx(AR,{scope:r,contentWrapper:o,shouldExpandOnScrollRef:f,onScrollButtonChange:S,children:Z.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:Z.jsx(sD.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})}));TR.displayName="SelectItemAlignedPosition";var kR=q.forwardRef(((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=bR,...s}=e,a=sR(r);return Z.jsx(HD,{...a,...s,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})}));kR.displayName="SelectPopperPosition";var[AR,_R]=nR(yR,{}),CR="SelectViewport",PR=q.forwardRef(((e,t)=>{const{__scopeSelect:r,nonce:n,...i}=e,s=xR(CR,r),a=_R(CR,r),o=jh(t,s.onViewportChange),l=q.useRef(0);return Z.jsxs(Z.Fragment,{children:[Z.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),Z.jsx(eR.Slot,{scope:r,children:Z.jsx(sD.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Ih(i.onScroll,(e=>{const t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:n}=a;if((null==n?void 0:n.current)&&r){const e=Math.abs(l.current-t.scrollTop);if(e>0){const n=window.innerHeight-2*bR,i=parseFloat(r.style.minHeight),s=parseFloat(r.style.height),a=Math.max(i,s);if(a<n){const i=a+e,s=Math.min(n,i),o=i-s;r.style.height=s+"px","0px"===r.style.bottom&&(t.scrollTop=o>0?o:0,r.style.justifyContent="flex-end")}}}l.current=t.scrollTop}))})})]})}));PR.displayName=CR;var DR="SelectGroup",[RR,IR]=nR(DR);q.forwardRef(((e,t)=>{const{__scopeSelect:r,...n}=e,i=ES();return Z.jsx(RR,{scope:r,id:i,children:Z.jsx(sD.div,{role:"group","aria-labelledby":i,...n,ref:t})})})).displayName=DR;var OR="SelectLabel",NR=q.forwardRef(((e,t)=>{const{__scopeSelect:r,...n}=e,i=IR(OR,r);return Z.jsx(sD.div,{id:i.id,...n,ref:t})}));NR.displayName=OR;var jR="SelectItem",[LR,MR]=nR(jR),FR=q.forwardRef(((e,t)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:s,...a}=e,o=oR(jR,r),l=xR(jR,r),c=o.value===n,[u,d]=q.useState(s??""),[h,f]=q.useState(!1),p=jh(t,(e=>{var t;return null==(t=l.itemRefCallback)?void 0:t.call(l,e,n,i)})),g=ES(),m=q.useRef("touch"),y=()=>{i||(o.onValueChange(n),o.onOpenChange(!1))};if(""===n)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return Z.jsx(LR,{scope:r,value:n,disabled:i,textId:g,isSelected:c,onItemTextChange:q.useCallback((e=>{d((t=>t||((null==e?void 0:e.textContent)??"").trim()))}),[]),children:Z.jsx(eR.ItemSlot,{scope:r,value:n,disabled:i,textValue:u,children:Z.jsx(sD.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:p,onFocus:Ih(a.onFocus,(()=>f(!0))),onBlur:Ih(a.onBlur,(()=>f(!1))),onClick:Ih(a.onClick,(()=>{"mouse"!==m.current&&y()})),onPointerUp:Ih(a.onPointerUp,(()=>{"mouse"===m.current&&y()})),onPointerDown:Ih(a.onPointerDown,(e=>{m.current=e.pointerType})),onPointerMove:Ih(a.onPointerMove,(e=>{var t;m.current=e.pointerType,i?null==(t=l.onItemLeave)||t.call(l):"mouse"===m.current&&e.currentTarget.focus({preventScroll:!0})})),onPointerLeave:Ih(a.onPointerLeave,(e=>{var t;e.currentTarget===document.activeElement&&(null==(t=l.onItemLeave)||t.call(l))})),onKeyDown:Ih(a.onKeyDown,(e=>{var t;""!==(null==(t=l.searchRef)?void 0:t.current)&&" "===e.key||(JD.includes(e.key)&&y()," "===e.key&&e.preventDefault())}))})})})}));FR.displayName=jR;var UR="SelectItemText",BR=q.forwardRef(((e,t)=>{const{__scopeSelect:r,className:n,style:i,...s}=e,a=oR(UR,r),o=xR(UR,r),l=MR(UR,r),c=cR(UR,r),[u,d]=q.useState(null),h=jh(t,(e=>d(e)),l.onItemTextChange,(e=>{var t;return null==(t=o.itemTextRefCallback)?void 0:t.call(o,e,l.value,l.disabled)})),f=null==u?void 0:u.textContent,p=q.useMemo((()=>Z.jsx("option",{value:l.value,disabled:l.disabled,children:f},l.value)),[l.disabled,l.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:m}=c;return of((()=>(g(p),()=>m(p))),[g,m,p]),Z.jsxs(Z.Fragment,{children:[Z.jsx(sD.span,{id:l.textId,...s,ref:h}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?ad.createPortal(s.children,a.valueNode):null]})}));BR.displayName=UR;var $R="SelectItemIndicator",zR=q.forwardRef(((e,t)=>{const{__scopeSelect:r,...n}=e;return MR($R,r).isSelected?Z.jsx(sD.span,{"aria-hidden":!0,...n,ref:t}):null}));zR.displayName=$R;var qR="SelectScrollUpButton",VR=q.forwardRef(((e,t)=>{const r=xR(qR,e.__scopeSelect),n=_R(qR,e.__scopeSelect),[i,s]=q.useState(!1),a=jh(t,n.onScrollButtonChange);return of((()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollTop>0;s(e)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}}),[r.viewport,r.isPositioned]),i?Z.jsx(GR,{...e,ref:a,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null}));VR.displayName=qR;var KR="SelectScrollDownButton",HR=q.forwardRef(((e,t)=>{const r=xR(KR,e.__scopeSelect),n=_R(KR,e.__scopeSelect),[i,s]=q.useState(!1),a=jh(t,n.onScrollButtonChange);return of((()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,r=Math.ceil(t.scrollTop)<e;s(r)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}}),[r.viewport,r.isPositioned]),i?Z.jsx(GR,{...e,ref:a,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null}));HR.displayName=KR;var GR=q.forwardRef(((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=e,s=xR("SelectScrollButton",r),a=q.useRef(null),o=tR(r),l=q.useCallback((()=>{null!==a.current&&(window.clearInterval(a.current),a.current=null)}),[]);return q.useEffect((()=>()=>l()),[l]),of((()=>{var e;const t=o().find((e=>e.ref.current===document.activeElement));null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})}),[o]),Z.jsx(sD.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Ih(i.onPointerDown,(()=>{null===a.current&&(a.current=window.setInterval(n,50))})),onPointerMove:Ih(i.onPointerMove,(()=>{var e;null==(e=s.onItemLeave)||e.call(s),null===a.current&&(a.current=window.setInterval(n,50))})),onPointerLeave:Ih(i.onPointerLeave,(()=>{l()}))})})),WR=q.forwardRef(((e,t)=>{const{__scopeSelect:r,...n}=e;return Z.jsx(sD.div,{"aria-hidden":!0,...n,ref:t})}));WR.displayName="SelectSeparator";var QR="SelectArrow";q.forwardRef(((e,t)=>{const{__scopeSelect:r,...n}=e,i=sR(r),s=oR(QR,r),a=xR(QR,r);return s.open&&"popper"===a.position?Z.jsx(GD,{...i,...n,ref:t}):null})).displayName=QR;var YR=q.forwardRef((({__scopeSelect:e,value:t,...r},n)=>{const i=q.useRef(null),s=jh(n,i),a=QD(t);return q.useEffect((()=>{const e=i.current;if(!e)return;const r=window.HTMLSelectElement.prototype,n=Object.getOwnPropertyDescriptor(r,"value").set;if(a!==t&&n){const r=new Event("change",{bubbles:!0});n.call(e,t),e.dispatchEvent(r)}}),[a,t]),Z.jsx(sD.select,{...r,style:{...YD,...r.style},ref:s,defaultValue:t})}));function XR(e){return""===e||void 0===e}function JR(e){const t=Gh(e),r=q.useRef(""),n=q.useRef(0),i=q.useCallback((e=>{const i=r.current+e;t(i),function e(t){r.current=t,window.clearTimeout(n.current),""!==t&&(n.current=window.setTimeout((()=>e("")),1e3))}(i)}),[t]),s=q.useCallback((()=>{r.current="",window.clearTimeout(n.current)}),[]);return q.useEffect((()=>()=>window.clearTimeout(n.current)),[]),[r,i,s]}function ZR(e,t,r){const n=t.length>1&&Array.from(t).every((e=>e===t[0]))?t[0]:t,i=r?e.indexOf(r):-1;let s=(a=e,o=Math.max(i,0),a.map(((e,t)=>a[(o+t)%a.length])));var a,o;1===n.length&&(s=s.filter((e=>e!==r)));const l=s.find((e=>e.textValue.toLowerCase().startsWith(n.toLowerCase())));return l!==r?l:void 0}YR.displayName="SelectBubbleInput";var eI=hR,tI=gR,rI=mR,nI=vR,iI=PR,sI=NR,aI=FR,oI=BR,lI=zR,cI=VR,uI=HR,dI=WR;const hI=uR,fI=pR,pI=V.forwardRef((({className:e,children:t,...r},n)=>Z.jsxs(eI,{ref:n,className:Sm("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,Z.jsx(tI,{asChild:!0,children:Z.jsx(vp,{className:"h-4 w-4 opacity-50"})})]})));pI.displayName=eI.displayName;const gI=V.forwardRef((({className:e,...t},r)=>Z.jsx(cI,{ref:r,className:Sm("flex cursor-default items-center justify-center py-1",e),...t,children:Z.jsx(xp,{className:"h-4 w-4"})})));gI.displayName=cI.displayName;const mI=V.forwardRef((({className:e,...t},r)=>Z.jsx(uI,{ref:r,className:Sm("flex cursor-default items-center justify-center py-1",e),...t,children:Z.jsx(vp,{className:"h-4 w-4"})})));mI.displayName=uI.displayName;const yI=V.forwardRef((({className:e,children:t,position:r="popper",...n},i)=>Z.jsx(rI,{children:Z.jsxs(nI,{ref:i,className:Sm("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[Z.jsx(gI,{}),Z.jsx(iI,{className:Sm("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),Z.jsx(mI,{})]})})));yI.displayName=nI.displayName;V.forwardRef((({className:e,...t},r)=>Z.jsx(sI,{ref:r,className:Sm("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}))).displayName=sI.displayName;const vI=V.forwardRef((({className:e,children:t,...r},n)=>Z.jsxs(aI,{ref:n,className:Sm("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[Z.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Z.jsx(lI,{children:Z.jsx(yp,{className:"h-4 w-4"})})}),Z.jsx(oI,{children:t})]})));vI.displayName=aI.displayName;function bI(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(null==e||e(n),!1===r||!n.defaultPrevented)return null==t?void 0:t(n)}}function wI(e){const t=xI(e),r=q.forwardRef(((e,r)=>{const{children:n,...i}=e,s=q.Children.toArray(n),a=s.find(EI);if(a){const e=a.props.children,n=s.map((t=>t===a?q.Children.count(e)>1?q.Children.only(null):q.isValidElement(e)?e.props.children:null:t));return Z.jsx(t,{...i,ref:r,children:q.isValidElement(e)?q.cloneElement(e,void 0,n):null})}return Z.jsx(t,{...i,ref:r,children:n})}));return r.displayName=`${e}.Slot`,r}function xI(e){const t=q.forwardRef(((e,t)=>{const{children:r,...n}=e;if(q.isValidElement(r)){const e=function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;if(i)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(r),i=function(e,t){const r={...t};for(const n in t){const i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]={...i,...s}:"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==q.Fragment&&(i.ref=t?Nh(t,e):e),q.cloneElement(r,i)}return q.Children.count(r)>1?q.Children.only(null):null}));return t.displayName=`${e}.SlotClone`,t}V.forwardRef((({className:e,...t},r)=>Z.jsx(dI,{ref:r,className:Sm("-mx-1 my-1 h-px bg-muted",e),...t}))).displayName=dI.displayName;var SI=Symbol("radix.slottable");function EI(e){return q.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===SI}var TI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce(((e,t)=>{const r=wI(`Primitive.${t}`),n=q.forwardRef(((e,n)=>{const{asChild:i,...s}=e,a=i?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),Z.jsx(a,{...s,ref:n})}));return n.displayName=`Primitive.${t}`,{...e,[t]:n}}),{});var kI="rovingFocusGroup.onEntryFocus",AI={bubbles:!1,cancelable:!0},_I="RovingFocusGroup",[CI,PI,DI]=function(e){const t=e+"CollectionProvider",[r,n]=Lh(t),[i,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=e=>{const{scope:t,children:r}=e,n=V.useRef(null),s=V.useRef(new Map).current;return Z.jsx(i,{scope:t,itemMap:s,collectionRef:n,children:r})};a.displayName=t;const o=e+"CollectionSlot",l=wI(o),c=V.forwardRef(((e,t)=>{const{scope:r,children:n}=e,i=jh(t,s(o,r).collectionRef);return Z.jsx(l,{ref:i,children:n})}));c.displayName=o;const u=e+"CollectionItemSlot",d="data-radix-collection-item",h=wI(u),f=V.forwardRef(((e,t)=>{const{scope:r,children:n,...i}=e,a=V.useRef(null),o=jh(t,a),l=s(u,r);return V.useEffect((()=>(l.itemMap.set(a,{ref:a,...i}),()=>{l.itemMap.delete(a)}))),Z.jsx(h,{[d]:"",ref:o,children:n})}));return f.displayName=u,[{Provider:a,Slot:c,ItemSlot:f},function(t){const r=s(e+"CollectionConsumer",t),n=V.useCallback((()=>{const e=r.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${d}]`)),n=Array.from(r.itemMap.values()).sort(((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current)));return n}),[r.collectionRef,r.itemMap]);return n},n]}(_I),[RI,II]=Lh(_I,[DI]),[OI,NI]=RI(_I),jI=q.forwardRef(((e,t)=>Z.jsx(CI.Provider,{scope:e.__scopeRovingFocusGroup,children:Z.jsx(CI.Slot,{scope:e.__scopeRovingFocusGroup,children:Z.jsx(LI,{...e,ref:t})})})));jI.displayName=_I;var LI=q.forwardRef(((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,h=q.useRef(null),f=jh(t,h),p=Ak(s),[g,m]=hf({prop:a,defaultProp:o??null,onChange:l,caller:_I}),[y,v]=q.useState(!1),b=Gh(c),w=PI(r),x=q.useRef(!1),[S,E]=q.useState(0);return q.useEffect((()=>{const e=h.current;if(e)return e.addEventListener(kI,b),()=>e.removeEventListener(kI,b)}),[b]),Z.jsx(OI,{scope:r,orientation:n,dir:p,loop:i,currentTabStopId:g,onItemFocus:q.useCallback((e=>m(e)),[m]),onItemShiftTab:q.useCallback((()=>v(!0)),[]),onFocusableItemAdd:q.useCallback((()=>E((e=>e+1))),[]),onFocusableItemRemove:q.useCallback((()=>E((e=>e-1))),[]),children:Z.jsx(TI.div,{tabIndex:y||0===S?-1:0,"data-orientation":n,...d,ref:f,style:{outline:"none",...e.style},onMouseDown:bI(e.onMouseDown,(()=>{x.current=!0})),onFocus:bI(e.onFocus,(e=>{const t=!x.current;if(e.target===e.currentTarget&&t&&!y){const t=new CustomEvent(kI,AI);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=w().filter((e=>e.focusable));BI([e.find((e=>e.active)),e.find((e=>e.id===g)),...e].filter(Boolean).map((e=>e.ref.current)),u)}}x.current=!1})),onBlur:bI(e.onBlur,(()=>v(!1)))})})})),MI="RovingFocusGroupItem",FI=q.forwardRef(((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:s,children:a,...o}=e,l=ES(),c=s||l,u=NI(MI,r),d=u.currentTabStopId===c,h=PI(r),{onFocusableItemAdd:f,onFocusableItemRemove:p,currentTabStopId:g}=u;return q.useEffect((()=>{if(n)return f(),()=>p()}),[n,f,p]),Z.jsx(CI.ItemSlot,{scope:r,id:c,focusable:n,active:i,children:Z.jsx(TI.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:bI(e.onMouseDown,(e=>{n?u.onItemFocus(c):e.preventDefault()})),onFocus:bI(e.onFocus,(()=>u.onItemFocus(c))),onKeyDown:bI(e.onKeyDown,(e=>{if("Tab"===e.key&&e.shiftKey)return void u.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,r){const n=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,r);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(n)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)?void 0:UI[n]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let i=h().filter((e=>e.focusable)).map((e=>e.ref.current));if("last"===t)i.reverse();else if("prev"===t||"next"===t){"prev"===t&&i.reverse();const s=i.indexOf(e.currentTarget);i=u.loop?(n=s+1,(r=i).map(((e,t)=>r[(n+t)%r.length]))):i.slice(s+1)}setTimeout((()=>BI(i)))}var r,n})),children:"function"==typeof a?a({isCurrentTabStop:d,hasTabStop:null!=g}):a})})}));FI.displayName=MI;var UI={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function BI(e,t=!1){const r=document.activeElement;for(const n of e){if(n===r)return;if(n.focus({preventScroll:t}),document.activeElement!==r)return}}var $I=jI,zI=FI;var qI=e=>{const{present:t,children:r}=e,n=function(e){const[t,r]=q.useState(),n=q.useRef(null),i=q.useRef(e),s=q.useRef("none"),a=e?"mounted":"unmounted",[o,l]=function(e,t){return q.useReducer(((e,r)=>t[e][r]??e),e)}(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return q.useEffect((()=>{const e=VI(n.current);s.current="mounted"===o?e:"none"}),[o]),of((()=>{const t=n.current,r=i.current;if(r!==e){const n=s.current,a=VI(t);if(e)l("MOUNT");else if("none"===a||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(r&&n!==a?"ANIMATION_OUT":"UNMOUNT")}i.current=e}}),[e,l]),of((()=>{if(t){let e;const r=t.ownerDocument.defaultView??window,a=s=>{const a=VI(n.current).includes(CSS.escape(s.animationName));if(s.target===t&&a&&(l("ANIMATION_END"),!i.current)){const n=t.style.animationFillMode;t.style.animationFillMode="forwards",e=r.setTimeout((()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=n)}))}},o=e=>{e.target===t&&(s.current=VI(n.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",a),t.addEventListener("animationend",a),()=>{r.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",a),t.removeEventListener("animationend",a)}}l("ANIMATION_END")}),[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:q.useCallback((e=>{n.current=e?getComputedStyle(e):null,r(e)}),[])}}(t),i="function"==typeof r?r({present:n.isPresent}):q.Children.only(r),s=jh(n.ref,function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;if(i)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(i));return"function"==typeof r||n.isPresent?q.cloneElement(i,{ref:s}):null};function VI(e){return(null==e?void 0:e.animationName)||"none"}qI.displayName="Presence";var KI="Radio",[HI,GI]=Lh(KI),[WI,QI]=HI(KI),YI=q.forwardRef(((e,t)=>{const{__scopeRadio:r,name:n,checked:i=!1,required:s,disabled:a,value:o="on",onCheck:l,form:c,...u}=e,[d,h]=q.useState(null),f=jh(t,(e=>h(e))),p=q.useRef(!1),g=!d||(c||!!d.closest("form"));return Z.jsxs(WI,{scope:r,checked:i,disabled:a,children:[Z.jsx(TI.button,{type:"button",role:"radio","aria-checked":i,"data-state":eO(i),"data-disabled":a?"":void 0,disabled:a,value:o,...u,ref:f,onClick:bI(e.onClick,(e=>{i||null==l||l(),g&&(p.current=e.isPropagationStopped(),p.current||e.stopPropagation())}))}),g&&Z.jsx(ZI,{control:d,bubbles:!p.current,name:n,value:o,checked:i,required:s,disabled:a,form:c,style:{transform:"translateX(-100%)"}})]})}));YI.displayName=KI;var XI="RadioIndicator",JI=q.forwardRef(((e,t)=>{const{__scopeRadio:r,forceMount:n,...i}=e,s=QI(XI,r);return Z.jsx(qI,{present:n||s.checked,children:Z.jsx(TI.span,{"data-state":eO(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:t})})}));JI.displayName=XI;var ZI=q.forwardRef((({__scopeRadio:e,control:t,checked:r,bubbles:n=!0,...i},s)=>{const a=q.useRef(null),o=jh(a,s),l=QD(r),c=i_(t);return q.useEffect((()=>{const e=a.current;if(!e)return;const t=window.HTMLInputElement.prototype,i=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==r&&i){const t=new Event("click",{bubbles:n});i.call(e,r),e.dispatchEvent(t)}}),[l,r,n]),Z.jsx(TI.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:o,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})}));function eO(e){return e?"checked":"unchecked"}ZI.displayName="RadioBubbleInput";var tO=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],rO="RadioGroup",[nO,iO]=Lh(rO,[II,GI]),sO=II(),aO=GI(),[oO,lO]=nO(rO),cO=q.forwardRef(((e,t)=>{const{__scopeRadioGroup:r,name:n,defaultValue:i,value:s,required:a=!1,disabled:o=!1,orientation:l,dir:c,loop:u=!0,onValueChange:d,...h}=e,f=sO(r),p=Ak(c),[g,m]=hf({prop:s,defaultProp:i??null,onChange:d,caller:rO});return Z.jsx(oO,{scope:r,name:n,required:a,disabled:o,value:g,onValueChange:m,children:Z.jsx($I,{asChild:!0,...f,orientation:l,dir:p,loop:u,children:Z.jsx(TI.div,{role:"radiogroup","aria-required":a,"aria-orientation":l,"data-disabled":o?"":void 0,dir:p,...h,ref:t})})})}));cO.displayName=rO;var uO="RadioGroupItem",dO=q.forwardRef(((e,t)=>{const{__scopeRadioGroup:r,disabled:n,...i}=e,s=lO(uO,r),a=s.disabled||n,o=sO(r),l=aO(r),c=q.useRef(null),u=jh(t,c),d=s.value===i.value,h=q.useRef(!1);return q.useEffect((()=>{const e=e=>{tO.includes(e.key)&&(h.current=!0)},t=()=>h.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}}),[]),Z.jsx(zI,{asChild:!0,...o,focusable:!a,active:d,children:Z.jsx(YI,{disabled:a,required:s.required,checked:d,...l,...i,name:s.name,ref:u,onCheck:()=>s.onValueChange(i.value),onKeyDown:bI((e=>{"Enter"===e.key&&e.preventDefault()})),onFocus:bI(i.onFocus,(()=>{var e;h.current&&(null==(e=c.current)||e.click())}))})})}));dO.displayName=uO;var hO=q.forwardRef(((e,t)=>{const{__scopeRadioGroup:r,...n}=e,i=aO(r);return Z.jsx(JI,{...i,...n,ref:t})}));hO.displayName="RadioGroupIndicator";var fO=cO,pO=dO,gO=hO;const mO=V.forwardRef((({className:e,...t},r)=>Z.jsx(fO,{className:Sm("grid gap-2",e),...t,ref:r})));mO.displayName=fO.displayName;const yO=V.forwardRef((({className:e,...t},r)=>Z.jsx(pO,{ref:r,className:Sm("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:Z.jsx(gO,{className:"flex items-center justify-center",children:Z.jsx(Sp,{className:"h-2.5 w-2.5 fill-current text-current"})})})));yO.displayName=pO.displayName;const vO=["text-sky-400","text-emerald-400","text-amber-400","text-rose-400","text-indigo-400","text-pink-400","text-teal-400","text-orange-400","text-cyan-400","text-lime-400","text-fuchsia-400","text-violet-400"],bO={},wO=e=>{if(null==e||""===String(e).trim())return"text-slate-400";const t=String(e).trim();if("pepe"===t.toLowerCase())return"text-fuchsia-400";if("maria"===t.toLowerCase())return"text-sky-400";if(bO[t])return bO[t].color;let r=0;for(let s=0;s<t.length;s++)r=(r<<5)-r+t.charCodeAt(s),r|=0;const n=Math.abs(r)%vO.length,i=vO[n]||"text-slate-400";return bO[t]={color:i},i},xO=({isOpen:e,onClose:t,segment:r,onSave:n,currentLanguage:i,allUtterances:s=[]})=>{const[a,o]=q.useState(""),[l,c]=q.useState(""),[u,d]=q.useState("rename"),h=q.useMemo((()=>"ru"===i?{pepe:"",maria:""}:{pepe:"Pepe",maria:"Maria"}),[i]),f=q.useMemo((()=>{const e=new Set;return(s||[]).forEach((t=>{const r=t&&void 0!==t.speaker&&null!==t.speaker?String(t.speaker).trim():"";r&&e.add(r)})),Array.from(e).sort(((e,t)=>e.localeCompare(t)))}),[s]),p=null==r?void 0:r.speaker,g=null!=p&&""!==String(p).trim(),m=g&&(/^\d+$/.test(String(p))||/^SPEAKER\s[A-Z0-9]+$/.test(String(p).toUpperCase())||/^SPEAKER_[A-Z]$/.test(String(p).toUpperCase()));q.useEffect((()=>{e&&r?(g&&!m?(o(String(p)),d("rename")):(o(""),d("create")),c("")):e||(o(""),c(""),d("rename"))}),[e,r,g,m,p]);const y=e=>{"rename"!==u&&"create"!==u||o(e)};return e&&r?Z.jsx(yT,{open:e,onOpenChange:t,children:Z.jsxs(wT,{className:"bg-slate-900 border-slate-800 text-white sm:max-w-md shadow-2xl rounded-xl",children:[Z.jsxs(xT,{children:[Z.jsx(ET,{className:"text-xl font-semibold text-purple-300",children:iy("assignSpeakerTitle",i)}),Z.jsxs(TT,{className:"text-sm text-slate-400",children:[iy("assignSpeakerDescription",i),' "',r.text.substring(0,50),'..."',g&&Z.jsxs("div",{className:"mt-2 text-xs",children:[iy("currentSpeaker",i),": ",Z.jsx("span",{className:wO(p),children:String(p)})]})]})]}),Z.jsxs("div",{className:"grid gap-5 py-4",children:[Z.jsx("div",{className:"space-y-4",children:Z.jsxs(mO,{value:u,onValueChange:d,className:"space-y-3",children:[g&&!m&&Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx(yO,{value:"rename",id:"rename",className:"border-slate-600 text-purple-400"}),Z.jsxs(RT,{htmlFor:"rename",className:"text-slate-300 text-sm cursor-pointer",children:[iy("renameSpeakerGlobally",i),' "',Z.jsx("span",{className:wO(p),children:String(p)}),'"']})]}),f.length>0&&Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx(yO,{value:"reassign",id:"reassign",className:"border-slate-600 text-purple-400"}),Z.jsx(RT,{htmlFor:"reassign",className:"text-slate-300 text-sm cursor-pointer",children:iy("reassignToExistingSpeaker",i)})]}),Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx(yO,{value:"create",id:"create",className:"border-slate-600 text-purple-400"}),Z.jsx(RT,{htmlFor:"create",className:"text-slate-300 text-sm cursor-pointer",children:iy("createNewSpeaker",i)})]})]})}),"reassign"===u&&Z.jsxs("div",{className:"space-y-2",children:[Z.jsx(RT,{className:"text-slate-300 font-medium",children:iy("selectExistingSpeaker",i)}),Z.jsxs(hI,{value:l||"__none__",onValueChange:e=>c("__none__"===e?"":e),children:[Z.jsx(pI,{className:"bg-slate-800 border-slate-700 focus:border-purple-500 focus:ring-purple-500",children:Z.jsx(fI,{placeholder:iy("selectSpeakerPlaceholder",i),children:l&&"__none__"!==l&&Z.jsx("span",{className:wO(l),children:l})})}),Z.jsxs(yI,{className:"bg-slate-900 border-slate-800 text-white",children:[Z.jsx(vI,{value:"__none__",children:Z.jsx("span",{className:"text-slate-400",children:iy("unknownSpeaker",i)})}),f.map((e=>Z.jsx(vI,{value:e,children:Z.jsx("span",{className:wO(e),children:e})},e)))]})]})]}),("rename"===u||"create"===u)&&Z.jsxs("div",{className:"space-y-2",children:[Z.jsx(RT,{htmlFor:"speaker-name-input",className:"text-slate-300 font-medium",children:iy("rename"===u?"newSpeakerName":"speakerName",i)}),Z.jsx(_T,{id:"speaker-name-input",value:a,onChange:e=>o(e.target.value),className:"bg-slate-800 border-slate-700 focus:border-purple-500 focus:ring-purple-500",placeholder:iy("enterSpeakerNamePlaceholder",i)}),Z.jsxs("div",{className:"flex gap-2 mt-1.5",children:[Z.jsx(AT,{size:"xs",variant:"outlineSubtle",onClick:()=>y(h.pepe),className:"text-xs",children:Z.jsx("span",{className:wO("pepe"),children:h.pepe})}),Z.jsx(AT,{size:"xs",variant:"outlineSubtle",onClick:()=>y(h.maria),className:"text-xs",children:Z.jsx("span",{className:wO("maria"),children:h.maria})})]})]})]}),Z.jsxs(ST,{className:"flex flex-col-reverse sm:flex-row justify-end items-center mt-4 pt-4 border-t border-slate-700/50",children:[Z.jsx(AT,{variant:"outline",onClick:t,className:"bg-slate-700 hover:bg-slate-600 border-slate-600 text-slate-300 w-full sm:w-auto sm:mr-2",children:iy("cancel",i)}),Z.jsx(AT,{onClick:()=>{const e=p;let i,s=!1;switch(u){case"rename":i=a.trim()||null,s=!0;break;case"reassign":i="__none__"===l?null:l;break;case"create":i=a.trim()||null;break;default:i=null}n(r,e,i,s),t()},className:"bg-purple-600 hover:bg-purple-700 text-white font-semibold w-full sm:w-auto",children:iy("rename"===u?"renameSpeaker":"reassign"===u?"reassignSpeaker":"createSpeaker",i)})]})]})}):null},SO=({isOpen:e,onClose:t,segment:r,initialTime:n,initialTitle:i,onSave:s,onDelete:a,currentLanguage:o,audioRef:l,mainPlayerIsPlaying:c,mainPlayerTogglePlayPause:u,mainPlayerSeekAudio:d,duration:h,isEditing:f=!1,disableTimeEditing:p=!1,hideDelete:g=!1})=>{var m;const[y,v]=q.useState(""),[b,w]=q.useState(0);q.useEffect((()=>{e&&(w(r?r.start/1e3:void 0!==n?n:0),v(i||""))}),[r,n,i,e]);return e?Z.jsx(yT,{open:e,onOpenChange:t,children:Z.jsxs(wT,{className:"bg-slate-900 border-slate-800 text-white sm:max-w-md shadow-2xl rounded-xl",children:[Z.jsxs(xT,{children:[Z.jsx(ET,{className:"text-xl font-semibold text-purple-300",children:iy(f?"editQuestionDialogTitle":"addQuestionDialogTitle",o)}),Z.jsx(TT,{className:"text-sm text-slate-400",children:r?iy("addQuestionDialogDescriptionSegment",o,{segmentText:r.text.substring(0,70)+"..."}):iy("addQuestionDialogDescription",o)})]}),Z.jsxs("div",{className:"grid gap-5 py-4",children:[Z.jsxs("div",{className:"space-y-2",children:[Z.jsx(RT,{htmlFor:"dialog-question-time",className:"text-slate-300 font-medium",children:iy("questionTime",o)}),Z.jsx(_T,{id:"dialog-question-time",type:"text",value:Tm(b,!0),onChange:e=>{const t=e.target.value.split(":").map(Number);let r=0;if(3===t.length)r=3600*t[0]+60*t[1]+t[2];else if(2===t.length)r=60*t[0]+t[1];else{if(1!==t.length||isNaN(t[0]))return void w(NaN);r=t[0]}!isNaN(r)&&r>=0&&r<=(h||1/0)?(w(r),d&&d(r,!1)):""===e.target.value&&w(0)},className:"bg-slate-800 border-slate-700 focus:border-purple-500 focus:ring-purple-500 col-span-3 tabular-nums",placeholder:"HH:MM:SS",disabled:p}),!p&&Z.jsx(Ek,{variant:"timeAdjustment",isPlaying:c,onPlayPause:u,onAdjustTime:e=>{const t=Math.max(0,Math.min(h||1/0,b+e));w(t),d&&d(t,!0)},currentTime:b,mainPlayerSeekAudio:d,currentLanguage:o,audioRefCurrentTime:null==(m=null==l?void 0:l.current)?void 0:m.currentTime,playerDuration:h})]}),Z.jsxs("div",{className:"space-y-2",children:[Z.jsx(RT,{htmlFor:"dialog-question-title",className:"text-slate-300 font-medium",children:iy("questionTitle",o)}),Z.jsx(_T,{id:"dialog-question-title",value:y,onChange:e=>v(e.target.value),className:"bg-slate-800 border-slate-700 focus:border-purple-500 focus:ring-purple-500",placeholder:iy("questionTitlePlaceholder",o)})]})]}),Z.jsxs(ST,{className:"flex flex-col-reverse sm:flex-row justify-between items-center mt-4 pt-4 border-t border-slate-700/50",children:[Z.jsx("div",{className:"flex flex-col-reverse sm:flex-row gap-2 w-full sm:w-auto",children:f&&a&&!g&&Z.jsxs(AT,{variant:"outline",onClick:()=>{a&&(a(),t())},className:"bg-red-600/10 hover:bg-red-600/20 border-red-500/30 text-red-400 hover:text-red-300 w-full sm:w-auto",children:[Z.jsx(Sg,{className:"h-4 w-4 mr-2"}),iy("deleteQuestion",o)]})}),Z.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-2 w-full sm:w-auto mb-2 sm:mb-0",children:[Z.jsx(AT,{variant:"outline",onClick:t,className:"bg-slate-700 hover:bg-slate-600 border-slate-600 text-slate-300 w-full sm:w-auto",children:iy("cancel",o)}),Z.jsxs(AT,{onClick:()=>{y.trim()&&(s(y,b),t())},className:"bg-purple-600 hover:bg-purple-700 text-white font-semibold w-full sm:w-auto",children:[Z.jsx(pg,{className:"h-4 w-4 mr-2"}),iy("saveQuestion",o)]})]})]})]})}):null};var EO="Checkbox",[TO,kO]=Lh(EO),[AO,_O]=TO(EO);function CO(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:i,disabled:s,form:a,name:o,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:d}=e,[h,f]=hf({prop:r,defaultProp:i??!1,onChange:l,caller:EO}),[p,g]=q.useState(null),[m,y]=q.useState(null),v=q.useRef(!1),b=!p||(!!a||!!p.closest("form")),w={checked:h,disabled:s,setChecked:f,control:p,setControl:g,name:o,form:a,value:u,hasConsumerStoppedPropagationRef:v,required:c,defaultChecked:!MO(i)&&i,isFormControl:b,bubbleInput:m,setBubbleInput:y};return Z.jsx(AO,{scope:t,...w,children:LO(d)?d(w):n})}var PO="CheckboxTrigger",DO=q.forwardRef((({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},i)=>{const{control:s,value:a,disabled:o,checked:l,required:c,setControl:u,setChecked:d,hasConsumerStoppedPropagationRef:h,isFormControl:f,bubbleInput:p}=_O(PO,e),g=jh(i,u),m=q.useRef(l);return q.useEffect((()=>{const e=null==s?void 0:s.form;if(e){const t=()=>d(m.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}}),[s,d]),Z.jsx(Kh.button,{type:"button",role:"checkbox","aria-checked":MO(l)?"mixed":l,"aria-required":c,"data-state":FO(l),"data-disabled":o?"":void 0,disabled:o,value:a,...n,ref:g,onKeyDown:Ih(t,(e=>{"Enter"===e.key&&e.preventDefault()})),onClick:Ih(r,(e=>{d((e=>!!MO(e)||!e)),p&&f&&(h.current=e.isPropagationStopped(),h.current||e.stopPropagation())}))})}));DO.displayName=PO;var RO=q.forwardRef(((e,t)=>{const{__scopeCheckbox:r,name:n,checked:i,defaultChecked:s,required:a,disabled:o,value:l,onCheckedChange:c,form:u,...d}=e;return Z.jsx(CO,{__scopeCheckbox:r,checked:i,defaultChecked:s,disabled:o,required:a,onCheckedChange:c,name:n,form:u,value:l,internal_do_not_use_render:({isFormControl:e})=>Z.jsxs(Z.Fragment,{children:[Z.jsx(DO,{...d,ref:t,__scopeCheckbox:r}),e&&Z.jsx(jO,{__scopeCheckbox:r})]})})}));RO.displayName=EO;var IO="CheckboxIndicator",OO=q.forwardRef(((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...i}=e,s=_O(IO,r);return Z.jsx(cf,{present:n||MO(s.checked)||!0===s.checked,children:Z.jsx(Kh.span,{"data-state":FO(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})}));OO.displayName=IO;var NO="CheckboxBubbleInput",jO=q.forwardRef((({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:a,required:o,disabled:l,name:c,value:u,form:d,bubbleInput:h,setBubbleInput:f}=_O(NO,e),p=jh(r,f),g=QD(s),m=i_(n);q.useEffect((()=>{const e=h;if(!e)return;const t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set,n=!i.current;if(g!==s&&r){const t=new Event("click",{bubbles:n});e.indeterminate=MO(s),r.call(e,!MO(s)&&s),e.dispatchEvent(t)}}),[h,g,s,i]);const y=q.useRef(!MO(s)&&s);return Z.jsx(Kh.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??y.current,required:o,disabled:l,name:c,value:u,form:d,...t,tabIndex:-1,ref:p,style:{...t.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})}));function LO(e){return"function"==typeof e}function MO(e){return"indeterminate"===e}function FO(e){return MO(e)?"indeterminate":e?"checked":"unchecked"}jO.displayName=NO;const UO=V.forwardRef((({className:e,...t},r)=>Z.jsx(RO,{ref:r,className:Sm("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground","border-slate-600 data-[state=checked]:bg-purple-600 data-[state=checked]:text-white data-[state=checked]:border-purple-600 focus-visible:ring-purple-500",e),...t,children:Z.jsx(OO,{className:Sm("flex items-center justify-center text-current"),children:Z.jsx(yp,{className:"h-4 w-4"})})})));UO.displayName=RO.displayName;const BO=({isOpen:e,onClose:t,currentLanguage:r,questions:n=[],transcript:i=[],episodeTitle:s="",onDownload:a})=>{const[o,l]=q.useState("all"),[c,u]=q.useState(!0),[d,h]=q.useState(!1),[f,p]=q.useState("txt"),[g,m]=q.useState([]),y=e=>{switch(e){case"txt":default:return Z.jsx(Ip,{className:"h-4 w-4"});case"doc":return Z.jsx(Op,{className:"h-4 w-4"})}};return Z.jsx(yT,{open:e,onOpenChange:t,children:Z.jsxs(wT,{className:"sm:max-w-md bg-slate-800 border-slate-700 text-slate-100",children:[Z.jsx(xT,{children:Z.jsxs(ET,{className:"text-purple-300 flex items-center gap-2",children:[Z.jsx(_p,{className:"h-5 w-5"}),iy("downloadTextSettings",r)]})}),Z.jsxs("div",{className:"space-y-6",children:[Z.jsxs("div",{className:"space-y-3",children:[Z.jsx(RT,{className:"text-slate-300 font-medium",children:iy("contentType",r)}),Z.jsxs(mO,{value:o,onValueChange:l,children:[Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx(yO,{value:"all",id:"all"}),Z.jsx(RT,{htmlFor:"all",className:"text-slate-200",children:iy("allText",r)})]}),Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx(yO,{value:"questions",id:"questions"}),Z.jsx(RT,{htmlFor:"questions",className:"text-slate-200",children:iy("selectedQuestions",r)})]})]})]}),"questions"===o&&Z.jsxs("div",{className:"space-y-3",children:[Z.jsx(RT,{className:"text-slate-300 font-medium",children:iy("selectQuestions",r)}),Z.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2 bg-slate-700/50 rounded-lg p-3",children:n.map((e=>Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx(UO,{id:`question-${e.id}`,checked:g.includes(e.id),onCheckedChange:()=>{return t=e.id,void m((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t}}),Z.jsx(RT,{htmlFor:`question-${e.id}`,className:"text-slate-200 text-sm cursor-pointer flex-1",children:e.title||iy("untitledQuestion",r)})]},e.id)))})]}),Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx(UO,{id:"includeTimings",checked:c,onCheckedChange:u}),Z.jsx(RT,{htmlFor:"includeTimings",className:"text-slate-200",children:iy("includeTimings",r)})]}),Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx(UO,{id:"includeSpeakers",checked:d,onCheckedChange:h}),Z.jsx(RT,{htmlFor:"includeSpeakers",className:"text-slate-200",children:iy("includeSpeakers",r)})]}),Z.jsxs("div",{className:"space-y-3",children:[Z.jsx(RT,{className:"text-slate-300 font-medium",children:iy("format",r)}),Z.jsxs(hI,{value:f,onValueChange:p,children:[Z.jsx(pI,{className:"bg-slate-700 border-slate-600 text-slate-100",children:Z.jsx(fI,{})}),Z.jsxs(yI,{className:"bg-slate-700 border-slate-600",children:[Z.jsx(vI,{value:"txt",className:"text-slate-100 focus:bg-slate-600",children:Z.jsxs("div",{className:"flex items-center gap-2",children:[y("txt"),Z.jsx("span",{children:"TXT"})]})}),Z.jsx(vI,{value:"doc",className:"text-slate-100 focus:bg-slate-600",children:Z.jsxs("div",{className:"flex items-center gap-2",children:[y("doc"),Z.jsx("span",{children:"DOC"})]})})]})]})]})]}),Z.jsxs(ST,{className:"gap-2",children:[Z.jsx(AT,{variant:"outline",onClick:t,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:iy("cancel",r)}),Z.jsxs(AT,{onClick:()=>{a({contentType:o,includeTimings:c,includeSpeakers:d,format:f,selectedQuestions:"questions"===o?g:null}),t()},className:"bg-purple-600 hover:bg-purple-700 text-white",disabled:"questions"===o&&0===g.length,children:[Z.jsx(_p,{className:"h-4 w-4 mr-2"}),iy("download",r)]})]})]})})},$O=void 0!==import.meta&&{VITE_SUPABASE_URL:"https://supabase.dosmundos.pe",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlLWRlbW8iLCJpYXQiOjE2NDE3NjkyMDAsImV4cCI6MTk5OTk5OTk5OX0.A4_N08ZorXYT17zhZReBXPlY6L5-9d8thMbm7TcDWl8",VITE_VPS_IP:"72.61.186.175",VITE_VPS_USER:"root",VITE_VPS_PASSWORD:"Qazsxdc@1234",VITE_AUDIO_PUBLIC_BASE:"https://dosmundos.pe/files/audio",VITE_DEEPGRAM_API_KEY:"84ca6271b47706ef558452cffe25ec353cfad7fb",VITE_DEEPSEEK_API_KEY:"sk-2cfb1cedbb164adeaac8bea846086fcc",VITE_ASSEMBLYAI_API_KEY:"84e48d90988e4671a74e78f37fc5abfd",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&!0;let zO=(()=>{try{if(void 0!==import.meta&&void 0!=={}.VITE_DEBUG)return"true"===String({}.VITE_DEBUG).toLowerCase()}catch(e){}try{if("undefined"!=typeof window&&window.localStorage){const e=window.localStorage.getItem("DEBUG");if(null!=e)return"true"===String(e).toLowerCase()}}catch(e){}return!$O})();const qO=(e,...t)=>{try{e(...t)}catch(r){}},VO={debug:(...e)=>{if(!zO)return;const t={level:"debug",args:e,ts:Date.now()};try{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("app-log",{detail:t}))}catch(r){}qO(console.debug||console.log,...e)},info:(...e)=>{const t={level:"info",args:e,ts:Date.now()};try{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("app-log",{detail:t}))}catch(r){}qO(console.info||console.log,...e)},warn:(...e)=>{const t={level:"warn",args:e,ts:Date.now()};try{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("app-log",{detail:t}))}catch(r){}qO(console.warn,...e)},error:(...e)=>{const t={level:"error",args:e,ts:Date.now()};try{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("app-log",{detail:t}))}catch(r){}qO(console.error,...e)}},KO=(e,t,r,n,i,s,a)=>{const o=Fm(),{toast:l}=r||o,{editor:c,isAuthenticated:u,openAuthModal:d}=pS(),[h,f]=q.useState(!1),[p,g]=q.useState(null),m=q.useCallback((e=>{u?(g(e),f(!0)):d()}),[u,d]),y=q.useCallback((()=>{f(!1),g(null)}),[]);return{isSpeakerAssignmentDialogOpen:h,segmentForSpeakerAssignment:p,handleOpenSpeakerAssignmentDialog:m,handleSaveSpeakerAssignment:q.useCallback((async(r,o,h,f=!1)=>{if(!u)return d(),void y();if(!(e&&e.transcript&&e.transcript.utterances&&t))return void(l&&l({title:iy("errorGeneric",n),description:iy("errorSavingSpeakerAssignment",n),variant:"destructive"}));let p=!1;const g=r.id||r.start,m=[],v=e.transcript.utterances.map((e=>{let t=null!==e.speaker&&void 0!==e.speaker?String(e.speaker):null,n={...e};const i=e.id||e.start;return f&&null!=o&&t===String(o)?t!==String(h)&&(n.speaker=h,p=!0,m.push(i)):!f&&r&&i===g&&t!==String(h)&&(n.speaker=h,p=!0,m.push(i)),n}));if(!p)return l&&l({title:iy("speakerAssignedTitle",n),description:"No changes detected for speaker assignment.",className:"bg-yellow-600/80 border-yellow-500 text-white"}),void y();const b={...e.transcript,utterances:v};try{if(await t(b,`Assigned speaker ${h} (was ${o}) for segment starting at ${null==r?void 0:r.start}`),c&&s)try{const e=f?"RenameSpeakerGlobally":"ReassignSpeaker",t=r.id||r.start;await gS({editorId:c.id,editorEmail:c.email,editorName:c.name,editType:"transcript",targetType:"speaker",targetId:`${s}_speaker_${t}`,contentBefore:`Speaker: ${o||"None"}`,contentAfter:`Speaker: ${h||"None"}`,filePath:null,metadata:{episodeSlug:s,lang:n,segmentId:t,action:e,oldSpeaker:o,newSpeaker:h,isGlobalRename:f,affectedSegmentsCount:m.length,affectedSegmentIds:m.slice(0,10),segmentStart:r.start,segmentEnd:r.end,timestamp:(new Date).toISOString()}})}catch(w){}l&&l({title:iy("speakerAssignedTitle",n),description:iy("speakerAssignedDesc",n,{newSpeaker:h}),className:"bg-green-600/80 border-green-500 text-white"}),i&&s&&a&&await i(s,a)}catch(x){l&&l({title:iy("errorGeneric",n),description:iy("errorSavingSpeakerAssignment",n),variant:"destructive"})}y()}),[e,t,l,n,y,i,s,a,u,c]),handleCloseSpeakerAssignmentDialog:y}};const HO=new class{generateTXT(e,t){let r="";return t.includeTimings&&(r+=`: ${this.formatTime(e.startTime)}\n`),"question"===e.type?(r+=`: ${e.title}\n`,r+=`${e.text}\n\n`):r+=`${e.text}\n\n`,r}generateDOC(e,t){let r='<html><head><meta charset="UTF-8"><title></title></head><body>';return t.includeTimings&&(r+=`<p><strong>:</strong> ${this.formatTime(e.startTime)}</p>`),"question"===e.type?(r+=`<h2>${e.title}</h2>`,r+=`<p>${e.text}</p>`):r+=`<p>${e.text}</p>`,r+="</body></html>",r}generatePDF(e,t){return this.generateDOC(e,t)}formatTime(e){if(!e||isNaN(e)||!isFinite(e))return"0:00";const t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=Math.floor(e%60);return t>0?`${t}:${r.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`:`${r}:${n.toString().padStart(2,"0")}`}downloadFile(e,t,r){const n=new Blob([e],{type:r}),i=URL.createObjectURL(n),s=document.createElement("a");s.href=i,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}getQuestionText(e,t,r,n,i={}){if(!n||!n.utterances)return"";const s=1e3*e.time,a=t[r+1],o=a?1e3*a.time:1/0;return n.utterances.filter((e=>e.start>=s&&e.start<o)).map((e=>{let t=e.text||"",r="";if(i.includeTimings&&void 0!==e.start){const t=e.start/1e3;r+=`[${this.formatTime(t)}] `}return i.includeSpeakers&&e.speaker&&(r+=`${e.speaker}: `),r+=t,r})).join("\n")}exportText(e,t,r,n){const{contentType:i,includeTimings:s,includeSpeakers:a,format:o,selectedQuestions:l}=r;let c,u="",d=`${n||"transcript"}.${o}`;if("all"===i)u=this.generateFullText(e,t,r,o);else{const n=t.filter((e=>l.includes(e.id)));"txt"===o?u=this.generateQuestionsTXT(n,r,e,t):"doc"===o&&(u=this.generateQuestionsDOC(n,r,e,t))}switch(o){case"txt":default:c="text/plain;charset=utf-8";break;case"doc":c="application/msword"}this.downloadFile(u,d,c)}generateFullText(e,t,r,n){let i="";return"txt"===n?i=this.generateFullTXT(e,t,r):"doc"===n&&(i=this.generateFullDOC(e,t,r)),i}generateFullTXT(e,t,r){let n="";const i=[];return t.forEach((e=>{i.push({type:"question",time:e.time,title:e.title,text:e.title||""})})),e.utterances&&e.utterances.forEach((e=>{i.push({type:"transcript",time:e.start/1e3,text:e.text,speaker:e.speaker})})),i.sort(((e,t)=>e.time-t.time)),i.forEach((e=>{r.includeTimings&&(n+=`[${this.formatTime(e.time)}] `),"question"===e.type?n+=`: ${e.title}\n`:(r.includeSpeakers&&e.speaker&&(n+=`${e.speaker}: `),n+=`${e.text}`),n+="\n\n"})),n}generateFullDOC(e,t,r){let n='<html><head><meta charset="UTF-8"><title></title></head><body>';const i=[];return t.forEach((e=>{i.push({type:"question",time:e.time,title:e.title,text:e.title||""})})),e.utterances&&e.utterances.forEach((e=>{i.push({type:"transcript",time:e.start/1e3,text:e.text,speaker:e.speaker})})),i.sort(((e,t)=>e.time-t.time)),i.forEach((e=>{"question"===e.type?(n+="<h2>",r.includeTimings&&(n+=`[${this.formatTime(e.time)}] `),n+=`${e.title}</h2>`):(n+="<p>",r.includeTimings&&(n+=`<strong>[${this.formatTime(e.time)}]</strong> `),r.includeSpeakers&&e.speaker&&(n+=`<strong>${e.speaker}:</strong> `),n+=`${e.text}</p>`)})),n+="</body></html>",n}generateQuestionsText(e,t){let r="";return"txt"===t.format?r=this.generateQuestionsTXT(e,t):"doc"===t.format&&(r=this.generateQuestionsDOC(e,t)),r}generateQuestionsTXT(e,t,r=null,n=null){let i="";const s=n||e;return e.forEach((e=>{t.includeTimings&&(i+=`[${this.formatTime(e.time)}] `),i+=`: ${e.title}\n`;const n=s.findIndex((t=>t.id===e.id)),a=-1!==n?n:s.indexOf(e),o=this.getQuestionText(e,s,a,r,t);o.trim()&&(i+=`${o}\n`),i+="\n"})),i}generateQuestionsDOC(e,t,r=null,n=null){let i='<html><head><meta charset="UTF-8"><title></title></head><body>';const s=n||e;return e.forEach((e=>{i+="<h2>",t.includeTimings&&(i+=`[${this.formatTime(e.time)}] `),i+=`${e.title}</h2>`;const n=s.findIndex((t=>t.id===e.id)),a=-1!==n?n:s.indexOf(e),o=this.getQuestionText(e,s,a,r,t);o.trim()&&(i+=`<p>${o}</p>`)})),i+="</body></html>",i}generateSRTFromEditedTranscript(e){if(!e||!e.utterances)throw new Error("Invalid transcript data: missing utterances");const t=e.utterances,r=[];let n=1;for(let s=0;s<t.length;s++){const e=t[s],i=(e.text||"").trim();if(!i)continue;const a=e.start||0,o=(e.end||a+3e3)-a,l=this.splitTextForSRT(i,o);l.forEach(((e,t)=>{const i=o/l.length,s=a+t*i,c=s+i,u=Math.max(c,s+1e3);r.push({index:n++,startTime:this.formatSRTTime(s),endTime:this.formatSRTTime(u),text:e})}))}const i=this.mergeShortSubtitles(r);return this.splitLongSubtitles(i).map((e=>`${e.index}\n${e.startTime} --\x3e ${e.endTime}\n${e.text}\n`)).join("\n")}splitTextForSRT(e,t){const r=e.split(/\s+/),n=[];let i=[],s=0;for(const a of r){const e=i.length>=10,t=s+a.length+1>40;(e||t)&&i.length>0&&(n.push(i.join(" ")),i=[],s=0),i.push(a),s+=a.length+1}return i.length>0&&n.push(i.join(" ")),n.length>0?n:[e]}formatSRTTime(e){const t=Math.floor(e/1e3),r=Math.floor(e%1e3),n=Math.floor(t/3600),i=Math.floor(t%3600/60),s=t%60;return`${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")},${r.toString().padStart(3,"0")}`}mergeShortSubtitles(e){const t=[];let r=0;for(;r<e.length;){const n=e[r];if(this.parseSRTTimeToMs(n.endTime)-this.parseSRTTimeToMs(n.startTime)<1e3&&r+1<e.length){const i=e[r+1];t.push({index:t.length+1,startTime:n.startTime,endTime:i.endTime,text:`${n.text} ${i.text}`}),r+=2}else t.push({...n,index:t.length+1}),r++}return t}splitLongSubtitles(e){const t=[];return e.forEach((e=>{const r=this.parseSRTTimeToMs(e.startTime),n=this.parseSRTTimeToMs(e.endTime)-r;if(n>6e3){const i=this.splitTextForSRT(e.text,n),s=n/i.length;i.forEach(((e,n)=>{const i=r+n*s,a=i+s;t.push({index:t.length+1,startTime:this.formatSRTTime(i),endTime:this.formatSRTTime(a),text:e})}))}else t.push({...e,index:t.length+1})})),t}parseSRTTimeToMs(e){const[t,r]=e.split(","),[n,i,s]=t.split(":").map(Number);return 1e3*(3600*n+60*i+s)+parseInt(r)}},GO=[{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}],WO=V.memo((({episodeData:e,onQuestionUpdate:t,currentLanguage:r,onQuestionSelectJump:n,audioRef:i,episodeSlug:s,episodeAudioUrl:a,episodeLang:o,episodeDate:l,navigateBack:c,navigateHistory:u,onPlayerStateChange:d,playerControlsContainerRef:h,showTranscript:f,onToggleShowTranscript:p,skipEmptySegments:g,onToggleSkipEmptySegments:m,onDownloadAudio:y,onDownloadText:v,playbackRateOptions:b=GO,currentPlaybackRateValue:w,onSetPlaybackRate:x,onOpenAddQuestionDialog:S,transcriptUtterances:E,transcriptId:T,transcriptWords:k,segmentToHighlight:A,user:_,isOfflineMode:C,onTranscriptUpdate:P,fetchTranscriptForEpisode:D,onRecognizeText:R,onRecognizeQuestions:I,onSmartSegmentation:O,isRecognizingText:N,isRecognizingQuestions:j,isSmartSegmenting:L,shouldPreserveState:M=!1,isEditMode:F,setIsEditMode:U})=>{var B,$,z,V;const{toast:K}=Fm(),{isAuthenticated:H,openAuthModal:G}=pS(),W=(null==e?void 0:e.questions)||[],Q=(null==(B=null==e?void 0:e.transcript)?void 0:B.utterances)||[],{currentTime:Y,setCurrentTime:X,duration:J,setDuration:ee,isPlaying:te,setIsPlaying:re,togglePlay:ne,seek:ie,playbackRate:se,setPlaybackRate:ae,currentEpisode:oe,audioRef:le,playEpisode:ce,autoplayBlocked:ue,setAutoplayBlocked:de,isLoading:he}=Ym();q.useEffect((()=>{ue&&Oe(!0)}),[ue]);const fe=le||i,[pe,ge]=q.useState(o||"mixed");q.useEffect((()=>{(null==e?void 0:e.lang)&&ge(String(e.lang).toLowerCase())}),[null==e?void 0:e.lang,null==e?void 0:e.slug]);const me=q.useCallback((t=>{const n=String(t||"").toLowerCase();ge(n);const i=((null==e?void 0:e.audio_variants)||(null==e?void 0:e.available_variants)||[]).map((e=>e?"string"==typeof e?{lang:String(e).toLowerCase(),audio_url:null}:{lang:String(e.lang||"").toLowerCase(),audio_url:e.audio_url||e.audioUrl||null}:null)).filter(Boolean).find((e=>e.lang===n)),s=(null==i?void 0:i.audio_url)||null;if(!s)return;let a;a="ru"===n?iy("audioTrackRussian",r)||"":"es"===n?iy("audioTrackSpanish",r)||"":"mixed"===n?iy("audioTrackMixed",r)||"":n.toUpperCase();const o=Y;if(fe.current&&fe.current.pause(),e){const t={...e,lang:n,audio_url:s,audioUrl:s};ce(t,o),K({title:iy("audioTrackSwitched",r)||"Audio track switched",description:iy("audioTrackSwitchedDesc",r,{track:a})||`Audio track changed to ${a}`})}}),[e,te,Y,fe,ce,ne,r,K]),ye=q.useRef(null);q.useEffect((()=>{if(e&&e.slug!==(null==oe?void 0:oe.slug)){const t=a||Wm(e);t&&(ce({...e,audioUrl:t},e.jumpToTime||0),ye.current=e.jumpId)}else e&&e.slug===(null==oe?void 0:oe.slug)&&e.jumpId&&e.jumpId!==ye.current&&(ie(e.jumpToTime),ye.current=e.jumpId,e.playAfterJump&&!te&&ne())}),[null==e?void 0:e.slug,null==e?void 0:e.jumpToTime,null==e?void 0:e.jumpId,a,null==oe?void 0:oe.slug,ce,ie,te,ne]);const[ve,be]=q.useState(!1),{currentPlaybackRateIndex:we,setCurrentPlaybackRateIndex:xe,activeQuestionTitleState:Se,setActiveQuestionTitleState:Ee,isAddQuestionPlayerDialogOpen:Te,setIsAddQuestionPlayerDialogOpen:ke,addQuestionDialogInitialTime:Ae,setAddQuestionDialogInitialTime:_e}=((e=0)=>{const[t,r]=q.useState(!1),[n,i]=q.useState(0),[s,a]=q.useState(e),[o,l]=q.useState(0),[c,u]=q.useState(""),[d,h]=q.useState(!1),[f,p]=q.useState(0);return{isPlayingState:t,setIsPlayingState:q.useCallback((e=>{r(e)}),[]),currentTimeState:n,setCurrentTimeState:i,durationState:s,setDurationState:a,currentPlaybackRateIndex:o,setCurrentPlaybackRateIndex:l,activeQuestionTitleState:c,setActiveQuestionTitleState:u,isAddQuestionPlayerDialogOpen:d,setIsAddQuestionPlayerDialogOpen:h,addQuestionDialogInitialTime:f,setAddQuestionDialogInitialTime:p}})(null==e?void 0:e.duration),Ce=te,Pe=re,De=Y,Re=J;q.useRef(null),q.useRef(!1),q.useRef(null);const[Ie,Oe]=q.useState(!1),Ne="all"===(null==e?void 0:e.lang)?r:null==e?void 0:e.lang,{isSpeakerAssignmentDialogOpen:je,segmentForSpeakerAssignment:Le,handleSaveSpeakerAssignment:Me,handleCloseSpeakerAssignmentDialog:Fe}=KO(e,P,K,r,D,s,Ne);null==oe||oe.slug,null==e||e.slug;const Ue=e=>{ie(Y+e)},Be=e=>{if(!W||0===W.length)return;const t=[...W].sort(((e,t)=>e.time-t.time));let r,n=-1;for(let i=0;i<t.length&&t[i].time<=Y+.5;i++)n=i;if(1===e){if(n>=t.length-1)return;r=n+1}else if(n<=0)r=0;else{const e=t[n].time;r=Y-e>3?n:n-1}r>=0&&r<t.length&&ie(t[r].time)},$e=(e,t=!1)=>{ie(e),t&&!te&&ne()},ze=()=>{ne()},qe=q.useCallback(((e,r)=>{"add"!==e&&"update"!==e&&"delete"!==e||H?t(e,r):G()}),[t,H,G]),Ve=q.useCallback((e=>{const t=b.findIndex((t=>t.value===e));-1!==t&&(xe(t),fe.current&&(fe.current.playbackRate=e),ae(e),null==d||d({playbackRate:e}))}),[xe,fe,ae,d]);q.useEffect((()=>("undefined"!=typeof window&&(window.__navigateQuestion=Be,window.__skipPlayerTime=Ue,window.__togglePlayPause=ze,window.__seekAudio=$e),()=>{"undefined"!=typeof window&&(delete window.__navigateQuestion,delete window.__skipPlayerTime,delete window.__togglePlayPause,delete window.__seekAudio)})),[Be,Ue,ze,$e]);const Ke=q.useCallback((()=>{be(!0)}),[]),He=q.useCallback((t=>{try{const n=(null==e?void 0:e.title)||` ${s}`;HO.exportText(null==e?void 0:e.transcript,W,t,n),K({title:iy("success",r),description:iy("textDownloadStarted",r)})}catch(n){K({title:iy("error",r),description:iy("downloadError",r),variant:"destructive"})}}),[e,s,Q,W,r,K]),Ge=q.useCallback(((e,t,r=!1,n=!1)=>{qe("add",{title:e,time:t,lang:Ne,isFullTranscript:r,isIntro:n}),ke(!1)}),[qe,Ne,ke]),We=q.useCallback((()=>{H?(_e(De),ke(!0)):G()}),[De,_e,ke,H,G]),Qe="completed"===(null==($=null==e?void 0:e.transcript)?void 0:$.status)&&(null==(V=null==(z=null==e?void 0:e.transcript)?void 0:z.utterances)?void 0:V.length)>0,Ye=W.length>0;return e?Z.jsxs(Z.Fragment,{children:[Z.jsxs("div",{className:"relative podcast-player bg-slate-800/50 p-2 sm:p-3 md:p-4 rounded-xl shadow-2xl border border-slate-700/40",children:[Z.jsx(Sk,{episodeTitle:e.displayTitle,episodeDate:e.date,onNavigateBack:c,onNavigateHistory:u,currentLanguage:r}),Z.jsxs("div",{children:[Ie&&Z.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center rounded-xl bg-slate-900/70 backdrop-blur-sm cursor-pointer",onClick:()=>{var e;try{fe.current&&(fe.current.muted=!1,null==(e=fe.current.play())||e.then((()=>{Pe(!0),null==d||d({isPlaying:!0}),Oe(!1),de&&de(!1)})).catch((()=>{})))}catch{}},children:Z.jsx("div",{className:"px-4 py-2 rounded-lg bg-slate-800/80 border border-slate-700 text-slate-100 text-sm",children:iy("tapToUnmuteAndPlay",r)||",      "})}),Z.jsx(ZP,{activeQuestionTitle:Se,isPlaying:Ce,isLoading:he,currentLanguage:r,currentTime:De,duration:Re,onProgressChange:e=>{ie(e)},questions:W,onQuestionSelectJump:n,onNavigateQuestion:Be,onTogglePlayPause:ze,onSkip:Ue,playerControlsContainerRef:h,showTranscript:f,onToggleShowTranscript:p,skipEmptySegments:g,onToggleSkipEmptySegments:m,onDownloadAudio:()=>{let t=a;if(a&&a.includes("localhost")&&(t=Wm(e)),t){const e=document.createElement("a");e.href=t,e.download=`${s||"podcast_episode"}.mp3`,e.setAttribute("target","_blank"),document.body.appendChild(e),e.click(),document.body.removeChild(e),K({title:iy("downloadStartedTitle",r),description:iy("downloadStartedDesc",r)})}else K({title:iy("errorGeneric",r),description:iy("audioNotAvailableForDownload",r),variant:"destructive"})},onDownloadText:Ke,playbackRateOptions:b,currentPlaybackRateValue:se,onSetPlaybackRate:Ve,onOpenAddQuestionDialog:We,episodeDate:l,isOfflineMode:C,isEditMode:F,setIsEditMode:U,isAuthenticated:H,openAuthModal:G,availableAudioVariants:(null==e?void 0:e.available_variants)||[],selectedAudioLang:pe,onAudioTrackChange:me,hasTranscript:Qe,hasQuestions:Ye,onRecognizeText:R,onRecognizeQuestions:I,onSmartSegmentation:O,isRecognizingText:N,isRecognizingQuestions:j,isSmartSegmenting:L})]})]}),Le&&Z.jsx(xO,{isOpen:je,onClose:Fe,segment:Le,allUtterances:Q,onSave:Me,currentLanguage:r}),Te&&Z.jsx(SO,{isOpen:Te,onClose:()=>ke(!1),onSave:Ge,maxDuration:Re,currentLanguage:r,initialTime:Ae,episodeDate:l,segment:null,audioRef:fe,mainPlayerIsPlaying:Ce,mainPlayerTogglePlayPause:ze,mainPlayerSeekAudio:$e}),Z.jsx(BO,{isOpen:ve,onClose:()=>be(!1),currentLanguage:r,questions:W,transcript:Q,episodeTitle:null==e?void 0:e.title,onDownload:He})]}):Z.jsx("div",{className:"p-4 text-center",children:iy("selectAnEpisode",r)})}));var QO="AlertDialog",[YO,XO]=Lh(QO,[IE]),JO=IE(),ZO=e=>{const{__scopeAlertDialog:t,...r}=e,n=JO(t);return Z.jsx(cT,{...n,...r,modal:!0})};ZO.displayName=QO;q.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=JO(r);return Z.jsx(uT,{...i,...n,ref:t})})).displayName="AlertDialogTrigger";var eN=e=>{const{__scopeAlertDialog:t,...r}=e,n=JO(t);return Z.jsx(dT,{...n,...r})};eN.displayName="AlertDialogPortal";var tN=q.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=JO(r);return Z.jsx(hT,{...i,...n,ref:t})}));tN.displayName="AlertDialogOverlay";var rN="AlertDialogContent",[nN,iN]=YO(rN),sN=zh("AlertDialogContent"),aN=q.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,children:n,...i}=e,s=JO(r),a=q.useRef(null),o=jh(t,a),l=q.useRef(null);return Z.jsx(sT,{contentName:rN,titleName:oN,docsSlug:"alert-dialog",children:Z.jsx(nN,{scope:r,cancelRef:l,children:Z.jsxs(fT,{role:"alertdialog",...s,...i,ref:o,onOpenAutoFocus:Ih(i.onOpenAutoFocus,(e=>{var t;e.preventDefault(),null==(t=l.current)||t.focus({preventScroll:!0})})),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[Z.jsx(sN,{children:n}),Z.jsx(pN,{contentRef:a})]})})})}));aN.displayName=rN;var oN="AlertDialogTitle",lN=q.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=JO(r);return Z.jsx(pT,{...i,...n,ref:t})}));lN.displayName=oN;var cN="AlertDialogDescription",uN=q.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=JO(r);return Z.jsx(gT,{...i,...n,ref:t})}));uN.displayName=cN;var dN=q.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=JO(r);return Z.jsx(mT,{...i,...n,ref:t})}));dN.displayName="AlertDialogAction";var hN="AlertDialogCancel",fN=q.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:i}=iN(hN,r),s=JO(r),a=jh(t,i);return Z.jsx(mT,{...s,...n,ref:a})}));fN.displayName=hN;var pN=({contentRef:e})=>{const t=`\`${rN}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${rN}\` by passing a \`${cN}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${rN}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return q.useEffect((()=>{var t;document.getElementById(null==(t=e.current)?void 0:t.getAttribute("aria-describedby"))}),[t,e]),null},gN=tN,mN=aN,yN=dN,vN=fN,bN=lN,wN=uN;const xN=ZO,SN=eN,EN=V.forwardRef((({className:e,...t},r)=>Z.jsx(gN,{className:Sm("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r})));EN.displayName=gN.displayName;const TN=V.forwardRef((({className:e,...t},r)=>Z.jsxs(SN,{children:[Z.jsx(EN,{}),Z.jsx(mN,{ref:r,className:Sm("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-700 bg-slate-800 p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]})));TN.displayName=mN.displayName;const kN=({className:e,...t})=>Z.jsx("div",{className:Sm("flex flex-col space-y-2 text-center sm:text-left",e),...t});kN.displayName="AlertDialogHeader";const AN=({className:e,...t})=>Z.jsx("div",{className:Sm("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});AN.displayName="AlertDialogFooter";const _N=V.forwardRef((({className:e,...t},r)=>Z.jsx(bN,{ref:r,className:Sm("text-lg font-semibold text-slate-50",e),...t})));_N.displayName=bN.displayName;const CN=V.forwardRef((({className:e,...t},r)=>Z.jsx(wN,{ref:r,className:Sm("text-sm text-slate-400",e),...t})));CN.displayName=wN.displayName;const PN=V.forwardRef((({className:e,...t},r)=>Z.jsx(yN,{ref:r,className:Sm(kT(),e),...t})));PN.displayName=yN.displayName;const DN=V.forwardRef((({className:e,...t},r)=>Z.jsx(vN,{ref:r,className:Sm(kT({variant:"outline"}),"mt-2 sm:mt-0 border-slate-600 hover:bg-slate-700 text-slate-300",e),...t})));DN.displayName=vN.displayName;const RN=({isOpen:e,onOpenChange:t,title:r,description:n,onConfirm:i,onCancel:s,actionType:a,currentLanguage:o})=>{const l=`confirm${a}SegmentDisabled`,c="true"===localStorage.getItem(l);return Z.jsx(xN,{open:e,onOpenChange:t,children:Z.jsxs(TN,{className:"bg-slate-900 border-slate-800 text-white",children:[Z.jsxs(kN,{children:[Z.jsx(_N,{className:"Delete"===a?"text-red-500":"Merge"===a?"text-orange-400":"Split"===a?"text-blue-400":"text-slate-50",children:r}),Z.jsx(CN,{className:"text-slate-300",children:n})]}),Z.jsxs("div",{className:"flex items-center space-x-2 my-4",children:[Z.jsx(UO,{id:`dont-ask-${a}`,checked:c,onCheckedChange:e=>{localStorage.setItem(l,e.toString())},className:"Delete"===a?"border-slate-600 data-[state=checked]:bg-red-600 data-[state=checked]:text-white":"Merge"===a?"border-slate-600 data-[state=checked]:bg-orange-500 data-[state=checked]:text-white":"Split"===a?"border-slate-600 data-[state=checked]:bg-blue-500 data-[state=checked]:text-white":"border-slate-600 data-[state=checked]:bg-purple-600 data-[state=checked]:text-white"}),Z.jsx("label",{htmlFor:`dont-ask-${a}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-slate-300",children:iy("doNotAskAgain",o)})]}),Z.jsxs(AN,{children:[Z.jsx(DN,{onClick:s,className:"bg-slate-700 hover:bg-slate-600 border-slate-600 text-slate-300",children:iy("cancel",o)}),Z.jsx(PN,{onClick:i,className:"Delete"===a?"bg-red-600 hover:bg-red-700 text-white":"Merge"===a?"bg-orange-600 hover:bg-orange-700 text-white":"Split"===a?"bg-blue-600 hover:bg-blue-700 text-white":"bg-purple-600 hover:bg-purple-700 text-white",children:iy("confirm",o)||"Confirm"})]})]})})},IN=V.forwardRef((({className:e,...t},r)=>Z.jsx("textarea",{className:Sm("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t})));function ON(e){const t=NN(e),r=q.forwardRef(((e,r)=>{const{children:n,...i}=e,s=q.Children.toArray(n),a=s.find(MN);if(a){const e=a.props.children,n=s.map((t=>t===a?q.Children.count(e)>1?q.Children.only(null):q.isValidElement(e)?e.props.children:null:t));return Z.jsx(t,{...i,ref:r,children:q.isValidElement(e)?q.cloneElement(e,void 0,n):null})}return Z.jsx(t,{...i,ref:r,children:n})}));return r.displayName=`${e}.Slot`,r}function NN(e){const t=q.forwardRef(((e,t)=>{const{children:r,...n}=e;if(q.isValidElement(r)){const e=function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;if(i)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(r),i=function(e,t){const r={...t};for(const n in t){const i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]={...i,...s}:"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==q.Fragment&&(i.ref=t?Nh(t,e):e),q.cloneElement(r,i)}return q.Children.count(r)>1?q.Children.only(null):null}));return t.displayName=`${e}.SlotClone`,t}IN.displayName="Textarea";var jN=Symbol("radix.slottable");function LN(e){const t=({children:e})=>Z.jsx(Z.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=jN,t}function MN(e){return q.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===jN}var FN=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce(((e,t)=>{const r=ON(`Primitive.${t}`),n=q.forwardRef(((e,n)=>{const{asChild:i,...s}=e,a=i?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),Z.jsx(a,{...s,ref:n})}));return n.displayName=`Primitive.${t}`,{...e,[t]:n}}),{});var UN,BN="dismissableLayer.update",$N="dismissableLayer.pointerDownOutside",zN="dismissableLayer.focusOutside",qN=q.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),VN=q.forwardRef(((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...l}=e,c=q.useContext(qN),[u,d]=q.useState(null),h=(null==u?void 0:u.ownerDocument)??(null==globalThis?void 0:globalThis.document),[,f]=q.useState({}),p=jh(t,(e=>d(e))),g=Array.from(c.layers),[m]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(m),v=u?g.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,w=v>=y,x=function(e,t=(null==globalThis?void 0:globalThis.document)){const r=Gh(e),n=q.useRef(!1),i=q.useRef((()=>{}));return q.useEffect((()=>{const e=e=>{if(e.target&&!n.current){let n=function(){HN($N,r,s,{discrete:!0})};const s={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=n,t.addEventListener("click",i.current,{once:!0})):n()}else t.removeEventListener("click",i.current);n.current=!1},s=window.setTimeout((()=>{t.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}}),[t,r]),{onPointerDownCapture:()=>n.current=!0}}((e=>{const t=e.target,r=[...c.branches].some((e=>e.contains(t)));w&&!r&&(null==i||i(e),null==a||a(e),e.defaultPrevented||null==o||o())}),h),S=function(e,t=(null==globalThis?void 0:globalThis.document)){const r=Gh(e),n=q.useRef(!1);return q.useEffect((()=>{const e=e=>{if(e.target&&!n.current){HN(zN,r,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)}),[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}((e=>{const t=e.target;[...c.branches].some((e=>e.contains(t)))||(null==s||s(e),null==a||a(e),e.defaultPrevented||null==o||o())}),h);return Wh((e=>{v===c.layers.size-1&&(null==n||n(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))}),h),q.useEffect((()=>{if(u)return r&&(0===c.layersWithOutsidePointerEventsDisabled.size&&(UN=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),KN(),()=>{r&&1===c.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=UN)}}),[u,h,r,c]),q.useEffect((()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),KN())}),[u,c]),q.useEffect((()=>{const e=()=>f({});return document.addEventListener(BN,e),()=>document.removeEventListener(BN,e)}),[]),Z.jsx(FN.div,{...l,ref:p,style:{pointerEvents:b?w?"auto":"none":void 0,...e.style},onFocusCapture:Ih(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Ih(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Ih(e.onPointerDownCapture,x.onPointerDownCapture)})}));VN.displayName="DismissableLayer";function KN(){const e=new CustomEvent(BN);document.dispatchEvent(e)}function HN(e,t,r,{discrete:n}){const i=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?function(e,t){e&&ad.flushSync((()=>e.dispatchEvent(t)))}(i,s):i.dispatchEvent(s)}q.forwardRef(((e,t)=>{const r=q.useContext(qN),n=q.useRef(null),i=jh(t,n);return q.useEffect((()=>{const e=n.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}}),[r.branches]),Z.jsx(FN.div,{...e,ref:i})})).displayName="DismissableLayerBranch";var GN=q.forwardRef(((e,t)=>{const{children:r,width:n=10,height:i=5,...s}=e;return Z.jsx(FN.svg,{...s,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:Z.jsx("polygon",{points:"0,0 30,0 15,10"})})}));GN.displayName="Arrow";var WN=GN,QN="Popper",[YN,XN]=Lh(QN),[JN,ZN]=YN(QN),ej=e=>{const{__scopePopper:t,children:r}=e,[n,i]=q.useState(null);return Z.jsx(JN,{scope:t,anchor:n,onAnchorChange:i,children:r})};ej.displayName=QN;var tj="PopperAnchor",rj=q.forwardRef(((e,t)=>{const{__scopePopper:r,virtualRef:n,...i}=e,s=ZN(tj,r),a=q.useRef(null),o=jh(t,a);return q.useEffect((()=>{s.onAnchorChange((null==n?void 0:n.current)||a.current)})),n?null:Z.jsx(FN.div,{...i,ref:o})}));rj.displayName=tj;var nj="PopperContent",[ij,sj]=YN(nj),aj=q.forwardRef(((e,t)=>{var r,n,i,s,a,o;const{__scopePopper:l,side:c="bottom",sideOffset:u=0,align:d="center",alignOffset:h=0,arrowPadding:f=0,avoidCollisions:p=!0,collisionBoundary:g=[],collisionPadding:m=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:b="optimized",onPlaced:w,...x}=e,S=ZN(nj,l),[E,T]=q.useState(null),k=jh(t,(e=>T(e))),[A,_]=q.useState(null),C=i_(A),P=(null==C?void 0:C.width)??0,D=(null==C?void 0:C.height)??0,R=c+("center"!==d?"-"+d:""),I="number"==typeof m?m:{top:0,right:0,bottom:0,left:0,...m},O=Array.isArray(g)?g:[g],N=O.length>0,j={padding:I,boundary:O.filter(uj),altBoundary:N},{refs:L,floatingStyles:M,placement:F,isPositioned:U,middlewareData:B}=GA({strategy:"fixed",placement:R,whileElementsMounted:(...e)=>OA(...e,{animationFrame:"always"===b}),elements:{reference:S.anchor},middleware:[QA({mainAxis:u+D,alignmentAxis:h}),p&&YA({mainAxis:!0,crossAxis:!1,limiter:"partial"===y?XA():void 0,...j}),p&&JA({...j}),ZA({...j,apply:({elements:e,rects:t,availableWidth:r,availableHeight:n})=>{const{width:i,height:s}=t.reference,a=e.floating.style;a.setProperty("--radix-popper-available-width",`${r}px`),a.setProperty("--radix-popper-available-height",`${n}px`),a.setProperty("--radix-popper-anchor-width",`${i}px`),a.setProperty("--radix-popper-anchor-height",`${s}px`)}}),A&&t_({element:A,padding:f}),dj({arrowWidth:P,arrowHeight:D}),v&&e_({strategy:"referenceHidden",...j})]}),[$,z]=hj(F),V=Gh(w);of((()=>{U&&(null==V||V())}),[U,V]);const K=null==(r=B.arrow)?void 0:r.x,H=null==(n=B.arrow)?void 0:n.y,G=0!==(null==(i=B.arrow)?void 0:i.centerOffset),[W,Q]=q.useState();return of((()=>{E&&Q(window.getComputedStyle(E).zIndex)}),[E]),Z.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:U?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[null==(s=B.transformOrigin)?void 0:s.x,null==(a=B.transformOrigin)?void 0:a.y].join(" "),...(null==(o=B.hide)?void 0:o.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:Z.jsx(ij,{scope:l,placedSide:$,onArrowChange:_,arrowX:K,arrowY:H,shouldHideArrow:G,children:Z.jsx(FN.div,{"data-side":$,"data-align":z,...x,ref:k,style:{...x.style,animation:U?void 0:"none"}})})})}));aj.displayName=nj;var oj="PopperArrow",lj={top:"bottom",right:"left",bottom:"top",left:"right"},cj=q.forwardRef((function(e,t){const{__scopePopper:r,...n}=e,i=sj(oj,r),s=lj[i.placedSide];return Z.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:Z.jsx(WN,{...n,ref:t,style:{...n.style,display:"block"}})})}));function uj(e){return null!==e}cj.displayName=oj;var dj=e=>({name:"transformOrigin",options:e,fn(t){var r,n,i;const{placement:s,rects:a,middlewareData:o}=t,l=0!==(null==(r=o.arrow)?void 0:r.centerOffset),c=l?0:e.arrowWidth,u=l?0:e.arrowHeight,[d,h]=hj(s),f={start:"0%",center:"50%",end:"100%"}[h],p=((null==(n=o.arrow)?void 0:n.x)??0)+c/2,g=((null==(i=o.arrow)?void 0:i.y)??0)+u/2;let m="",y="";return"bottom"===d?(m=l?f:`${p}px`,y=-u+"px"):"top"===d?(m=l?f:`${p}px`,y=`${a.floating.height+u}px`):"right"===d?(m=-u+"px",y=l?f:`${g}px`):"left"===d&&(m=`${a.floating.width+u}px`,y=l?f:`${g}px`),{data:{x:m,y:y}}}});function hj(e){const[t,r="center"]=e.split("-");return[t,r]}var fj=ej,pj=rj,gj=aj,mj=cj,yj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),vj=q.forwardRef(((e,t)=>Z.jsx(FN.span,{...e,ref:t,style:{...yj,...e.style}})));vj.displayName="VisuallyHidden";var bj=vj,[wj,xj]=Lh("Tooltip",[XN]),Sj=XN(),Ej="TooltipProvider",Tj=700,kj="tooltip.open",[Aj,_j]=wj(Ej),Cj=e=>{const{__scopeTooltip:t,delayDuration:r=Tj,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:s}=e,a=q.useRef(!0),o=q.useRef(!1),l=q.useRef(0);return q.useEffect((()=>{const e=l.current;return()=>window.clearTimeout(e)}),[]),Z.jsx(Aj,{scope:t,isOpenDelayedRef:a,delayDuration:r,onOpen:q.useCallback((()=>{window.clearTimeout(l.current),a.current=!1}),[]),onClose:q.useCallback((()=>{window.clearTimeout(l.current),l.current=window.setTimeout((()=>a.current=!0),n)}),[n]),isPointerInTransitRef:o,onPointerInTransitChange:q.useCallback((e=>{o.current=e}),[]),disableHoverableContent:i,children:s})};Cj.displayName=Ej;var Pj="Tooltip",[Dj,Rj]=wj(Pj),Ij=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:i,onOpenChange:s,disableHoverableContent:a,delayDuration:o}=e,l=_j(Pj,e.__scopeTooltip),c=Sj(t),[u,d]=q.useState(null),h=ES(),f=q.useRef(0),p=a??l.disableHoverableContent,g=o??l.delayDuration,m=q.useRef(!1),[y,v]=hf({prop:n,defaultProp:i??!1,onChange:e=>{e?(l.onOpen(),document.dispatchEvent(new CustomEvent(kj))):l.onClose(),null==s||s(e)},caller:Pj}),b=q.useMemo((()=>y?m.current?"delayed-open":"instant-open":"closed"),[y]),w=q.useCallback((()=>{window.clearTimeout(f.current),f.current=0,m.current=!1,v(!0)}),[v]),x=q.useCallback((()=>{window.clearTimeout(f.current),f.current=0,v(!1)}),[v]),S=q.useCallback((()=>{window.clearTimeout(f.current),f.current=window.setTimeout((()=>{m.current=!0,v(!0),f.current=0}),g)}),[g,v]);return q.useEffect((()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)}),[]),Z.jsx(fj,{...c,children:Z.jsx(Dj,{scope:t,contentId:h,open:y,stateAttribute:b,trigger:u,onTriggerChange:d,onTriggerEnter:q.useCallback((()=>{l.isOpenDelayedRef.current?S():w()}),[l.isOpenDelayedRef,S,w]),onTriggerLeave:q.useCallback((()=>{p?x():(window.clearTimeout(f.current),f.current=0)}),[x,p]),onOpen:w,onClose:x,disableHoverableContent:p,children:r})})};Ij.displayName=Pj;var Oj="TooltipTrigger",Nj=q.forwardRef(((e,t)=>{const{__scopeTooltip:r,...n}=e,i=Rj(Oj,r),s=_j(Oj,r),a=Sj(r),o=jh(t,q.useRef(null),i.onTriggerChange),l=q.useRef(!1),c=q.useRef(!1),u=q.useCallback((()=>l.current=!1),[]);return q.useEffect((()=>()=>document.removeEventListener("pointerup",u)),[u]),Z.jsx(pj,{asChild:!0,...a,children:Z.jsx(FN.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:o,onPointerMove:Ih(e.onPointerMove,(e=>{"touch"!==e.pointerType&&(c.current||s.isPointerInTransitRef.current||(i.onTriggerEnter(),c.current=!0))})),onPointerLeave:Ih(e.onPointerLeave,(()=>{i.onTriggerLeave(),c.current=!1})),onPointerDown:Ih(e.onPointerDown,(()=>{i.open&&i.onClose(),l.current=!0,document.addEventListener("pointerup",u,{once:!0})})),onFocus:Ih(e.onFocus,(()=>{l.current||i.onOpen()})),onBlur:Ih(e.onBlur,i.onClose),onClick:Ih(e.onClick,i.onClose)})})}));Nj.displayName=Oj;var[jj,Lj]=wj("TooltipPortal",{forceMount:void 0}),Mj="TooltipContent",Fj=q.forwardRef(((e,t)=>{const r=Lj(Mj,e.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...s}=e,a=Rj(Mj,e.__scopeTooltip);return Z.jsx(cf,{present:n||a.open,children:a.disableHoverableContent?Z.jsx(qj,{side:i,...s,ref:t}):Z.jsx(Uj,{side:i,...s,ref:t})})})),Uj=q.forwardRef(((e,t)=>{const r=Rj(Mj,e.__scopeTooltip),n=_j(Mj,e.__scopeTooltip),i=q.useRef(null),s=jh(t,i),[a,o]=q.useState(null),{trigger:l,onClose:c}=r,u=i.current,{onPointerInTransitChange:d}=n,h=q.useCallback((()=>{o(null),d(!1)}),[d]),f=q.useCallback(((e,t)=>{const r=e.currentTarget,n={x:e.clientX,y:e.clientY},i=function(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return n}(n,function(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,n,i,s)){case s:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}(n,r.getBoundingClientRect())),s=function(e){const t=e.slice();return t.sort(((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0)),function(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const r=e[n];for(;t.length>=2;){const e=t[t.length-1],n=t[t.length-2];if(!((e.x-n.x)*(r.y-n.y)>=(e.y-n.y)*(r.x-n.x)))break;t.pop()}t.push(r)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const t=e[n];for(;r.length>=2;){const e=r[r.length-1],n=r[r.length-2];if(!((e.x-n.x)*(t.y-n.y)>=(e.y-n.y)*(t.x-n.x)))break;r.pop()}r.push(t)}return r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}(t)}([...i,...function(e){const{top:t,right:r,bottom:n,left:i}=e;return[{x:i,y:t},{x:r,y:t},{x:r,y:n},{x:i,y:n}]}(t.getBoundingClientRect())]);o(s),d(!0)}),[d]);return q.useEffect((()=>()=>h()),[h]),q.useEffect((()=>{if(l&&u){const e=e=>f(e,u),t=e=>f(e,l);return l.addEventListener("pointerleave",e),u.addEventListener("pointerleave",t),()=>{l.removeEventListener("pointerleave",e),u.removeEventListener("pointerleave",t)}}}),[l,u,f,h]),q.useEffect((()=>{if(a){const e=e=>{const t=e.target,r={x:e.clientX,y:e.clientY},n=(null==l?void 0:l.contains(t))||(null==u?void 0:u.contains(t)),i=!function(e,t){const{x:r,y:n}=e;let i=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const e=t[s],o=t[a],l=e.x,c=e.y,u=o.x,d=o.y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(i=!i)}return i}(r,a);n?h():i&&(h(),c())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}}),[l,u,a,c,h]),Z.jsx(qj,{...e,ref:s})})),[Bj,$j]=wj(Pj,{isInside:!1}),zj=LN("TooltipContent"),qj=q.forwardRef(((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:a,...o}=e,l=Rj(Mj,r),c=Sj(r),{onClose:u}=l;return q.useEffect((()=>(document.addEventListener(kj,u),()=>document.removeEventListener(kj,u))),[u]),q.useEffect((()=>{if(l.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(l.trigger))&&u()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}}),[l.trigger,u]),Z.jsx(VN,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:u,children:Z.jsxs(gj,{"data-state":l.stateAttribute,...c,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[Z.jsx(zj,{children:n}),Z.jsx(Bj,{scope:r,isInside:!0,children:Z.jsx(bj,{id:l.contentId,role:"tooltip",children:i||n})})]})})}));Fj.displayName=Mj;var Vj="TooltipArrow";q.forwardRef(((e,t)=>{const{__scopeTooltip:r,...n}=e,i=Sj(r);return $j(Vj,r).isInside?null:Z.jsx(mj,{...i,...n,ref:t})})).displayName=Vj;var Kj=Fj;const Hj=Cj,Gj=Ij,Wj=Nj,Qj=V.forwardRef((({className:e,sideOffset:t=4,...r},n)=>Z.jsx(Kj,{ref:n,sideOffset:t,className:Sm("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})));Qj.displayName=Kj.displayName;const Yj=({onSave:e,onCancel:t,onSplit:r,onMerge:n,onDelete:i,onAdd:s,isFirstOverallSegment:a,currentLanguage:o})=>Z.jsxs("div",{className:"flex flex-wrap items-center justify-start gap-1 pt-1.5",children:[Z.jsxs(Hj,{delayDuration:200,children:[!a&&Z.jsxs(Gj,{children:[Z.jsx(Wj,{asChild:!0,children:Z.jsx(AT,{onClick:n,variant:"ghost",size:"icon_sm",className:"h-7 w-7 text-white hover:bg-slate-700/70",children:Z.jsx(Tp,{size:16})})}),Z.jsx(Qj,{side:"top",className:"bg-slate-800 text-white border-slate-700",children:Z.jsx("p",{children:iy("mergeWithPreviousSegment",o)})})]}),Z.jsxs(Gj,{children:[Z.jsx(Wj,{asChild:!0,children:Z.jsx(AT,{onClick:r,variant:"ghost",size:"icon_sm",className:"h-7 w-7 text-white hover:bg-slate-700/70",children:Z.jsx(Ap,{size:16})})}),Z.jsx(Qj,{side:"top",className:"bg-slate-800 text-white border-slate-700",children:Z.jsx("p",{children:iy("splitSegmentAtCursor",o)})})]}),Z.jsxs(Gj,{children:[Z.jsx(Wj,{asChild:!0,children:Z.jsx(AT,{onClick:s,variant:"ghost",size:"icon_sm",className:"h-7 w-7 text-white hover:bg-slate-700/70",children:Z.jsx(ug,{size:16})})}),Z.jsx(Qj,{side:"top",className:"bg-slate-800 text-white border-slate-700",children:Z.jsx("p",{children:iy("addSegment",o)})})]}),Z.jsxs(Gj,{children:[Z.jsx(Wj,{asChild:!0,children:Z.jsx(AT,{onClick:i,variant:"ghost",size:"icon_sm",className:"h-7 w-7 text-white hover:bg-slate-700/70",children:Z.jsx(Sg,{size:16})})}),Z.jsx(Qj,{side:"top",className:"bg-slate-800 text-white border-slate-700",children:Z.jsx("p",{children:iy("deleteSegment",o)})})]})]}),Z.jsx("div",{className:"flex-grow"}),Z.jsx(AT,{onClick:t,variant:"ghost",size:"icon_sm",className:"h-7 w-7 text-white hover:bg-slate-700/70",children:Z.jsx(Ng,{size:18})}),Z.jsx(AT,{onClick:e,variant:"ghost",size:"icon_sm",className:"h-7 w-7 text-white hover:bg-slate-700/70",children:Z.jsx(yp,{size:18})})]}),Xj=e=>{if("number"==typeof e)return e;const t=String(e||"").trim().split(":").map(Number);let r=NaN;return 3===t.length?r=3600*t[0]+60*t[1]+t[2]:2===t.length?r=60*t[0]+t[1]:1!==t.length||isNaN(t[0])||(r=t[0]),r},Jj=e=>{const t=String(e||"").replace(/\D/g,"").slice(0,6);if(!t)return"";let r="",n="",i="";return t.length<=2?i=t:t.length<=4?(n=t.slice(0,t.length-2),i=t.slice(-2)):(r=t.slice(0,t.length-4),n=t.slice(-4,-2),i=t.slice(-2)),[r,n,i].filter(Boolean).map(((e,t)=>e.padStart(2,"0"))).join(":")},Zj=({isOpen:e,onClose:t,onSave:r,currentLanguage:n,defaultStartSec:i,defaultEndSec:s})=>{const[a,o]=q.useState(""),[l,c]=q.useState(""),[u,d]=q.useState("");q.useEffect((()=>{if(e){const e="number"==typeof i?i:void 0,t="number"==typeof s?s:"number"==typeof e?e+1:void 0;o("number"==typeof e?Tm(e,!0):""),c("number"==typeof t?Tm(t,!0):""),d("")}}),[e,i,s]);return Z.jsx(yT,{open:e,onOpenChange:t,children:Z.jsxs(wT,{className:"bg-slate-900 border-slate-800 text-white sm:max-w-md shadow-2xl rounded-xl",children:[Z.jsxs(xT,{children:[Z.jsx(ET,{className:"text-xl font-semibold text-purple-300",children:iy("addSegment",n)}),Z.jsx(TT,{className:"text-sm text-slate-400",children:iy("addSegmentDescription",n)})]}),Z.jsxs("div",{className:"grid gap-4 py-2",children:[Z.jsxs("div",{className:"space-y-2",children:[Z.jsx(RT,{htmlFor:"segment-start",className:"text-slate-300 font-medium",children:iy("segmentStartTime",n)}),Z.jsx(_T,{id:"segment-start",value:a,onChange:e=>o(Jj(e.target.value)),placeholder:"HH:MM:SS",className:"bg-slate-800 border-slate-700 focus:border-purple-500 focus:ring-purple-500"})]}),Z.jsxs("div",{className:"space-y-2",children:[Z.jsx(RT,{htmlFor:"segment-end",className:"text-slate-300 font-medium",children:iy("segmentEndTime",n)}),Z.jsx(_T,{id:"segment-end",value:l,onChange:e=>c(Jj(e.target.value)),placeholder:"HH:MM:SS",className:"bg-slate-800 border-slate-700 focus:border-purple-500 focus:ring-purple-500"})]}),Z.jsxs("div",{className:"space-y-2",children:[Z.jsx(RT,{htmlFor:"segment-text",className:"text-slate-300 font-medium",children:iy("segmentText",n)}),Z.jsx(_T,{id:"segment-text",value:u,onChange:e=>d(e.target.value),placeholder:iy("editTextSegmentPlaceholder",n),className:"bg-slate-800 border-slate-700 focus:border-purple-500 focus:ring-purple-500"})]})]}),Z.jsxs(ST,{className:"flex flex-col-reverse sm:flex-row justify-end items-center mt-2 pt-3 border-t border-slate-700/50 gap-2",children:[Z.jsxs(AT,{variant:"outline",onClick:t,className:"bg-slate-700 hover:bg-slate-600 border-slate-600 text-slate-300 w-full sm:w-auto",children:[Z.jsx(Ng,{className:"h-4 w-4 mr-2"})," ",iy("cancel",n)]}),Z.jsxs(AT,{onClick:()=>{const e=Xj(a),t=Xj(l);isNaN(e)||isNaN(t)||e<0||t<=e||r({startSec:e,endSec:t,text:u||""})},className:"bg-purple-600 hover:bg-purple-700 text-white font-semibold w-full sm:w-auto",children:[Z.jsx(pg,{className:"h-4 w-4 mr-2"})," ",iy("saveSegment",n)]})]})]})})},eL=["text-sky-400","text-emerald-400","text-amber-400","text-rose-400","text-indigo-400","text-pink-400","text-teal-400","text-orange-400","text-cyan-400","text-lime-400","text-fuchsia-400","text-violet-400"],tL={},rL=(e,t)=>{if(null==e||""===String(e).trim())return{name:iy("unknownSpeaker",t),color:"text-slate-400"};const r=String(e).trim();if("pepe"===r.toLowerCase())return{name:r,color:"text-fuchsia-400"};if("maria"===r.toLowerCase())return{name:r,color:"text-sky-400"};if(tL[r]){const e=tL[r];return{name:/^\d+$/.test(r)||/^SPEAKER_[A-Z]$/.test(r.toUpperCase())||/^SPEAKER\s[A-Z0-9]+$/.test(r.toUpperCase())?`${iy("speaker",t)} ${r.replace(/^SPEAKER\s?/i,"")}`:r,color:e.color}}let n=0;for(let a=0;a<r.length;a++)n=(n<<5)-n+r.charCodeAt(a),n|=0;const i=Math.abs(n)%eL.length,s=eL[i]||"text-slate-400";tL[r]={color:s};return{name:/^\d+$/.test(r)||/^SPEAKER_[A-Z]$/.test(r.toUpperCase())||/^SPEAKER\s[A-Z0-9]+$/.test(r.toUpperCase())?`${iy("speaker",t)} ${r.replace(/^SPEAKER\s?/i,"")}`:r,color:s}},nL=({segment:e,isActive:t,isEditingThisSegment:r,editedText:n,onSegmentClick:i,onEditSegment:s,onSaveEdit:a,onCancelEdit:o,onTextChange:l,currentLanguage:c,onAddQuestionFromSegment:u,highlightTextFn:d,onSplitSegment:h,onMergeWithPreviousSegment:f,onDeleteSegment:p,isFirstOverallSegment:g,setTextareaRef:m,isActiveQuestionBlock:y,isJumpTargetPreview:v,onOpenSpeakerAssignmentDialog:b,availableSpeakers:w=[],onSetSegmentSpeaker:x,onInsertManualSegment:S,isEditMode:E})=>{const[T,k]=q.useState(null),A=q.useRef(null),[_,C]=q.useState("auto"),[P,D]=q.useState(!1),[R,I]=q.useState(void 0),[O,N]=q.useState(void 0);q.useEffect((()=>{m&&A.current&&m(A.current)}),[m,A]),q.useEffect((()=>{if(r&&A.current){A.current.focus();const e=A.current.scrollHeight;A.current.style.height="auto",A.current.style.height=`${e}px`,C(`${e}px`)}else C("auto")}),[r,n]),q.useEffect((()=>{const e=e=>{r&&"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),a&&a())},t=A.current;return t&&r&&t.addEventListener("keydown",e),()=>{t&&r&&t.removeEventListener("keydown",e)}}),[r,a]);const j=t=>{t.stopPropagation(),i&&e&&"number"==typeof e.start&&i(e.start/1e3,e)},L=d&&(null==e?void 0:e.text)?d(e.text):null==e?void 0:e.text,M=()=>D(!1);let F="";if(F=r?"bg-slate-500 ring-1 ring-purple-400 shadow-purple-400/20":t?"bg-purple-700/20 ring-2 ring-purple-400 shadow-lg shadow-purple-400/20 z-10 segment-active-highlight":v&&y?"bg-purple-600/15":"bg-slate-700/30 hover:bg-slate-600/40",!e||"number"!=typeof e.start||"number"!=typeof e.end)return null;const U=rL(e.speaker,c),B=U.color;return Z.jsxs(Z.Fragment,{children:[Z.jsx("div",{className:`p-1.5 mb-1 rounded-md transition-all duration-200 ease-in-out shadow-sm text-sm relative ${F}`,id:`segment-${e.start}`,children:Z.jsxs("div",{className:"min-w-0",children:[Z.jsxs("div",{className:"flex justify-between items-center mb-px text-xs",children:[Z.jsxs("div",{className:"flex items-center",children:[Z.jsxs("span",{onClick:j,className:"hover:underline "+(r?"text-slate-300 cursor-default":`${B} cursor-pointer`),role:"button",tabIndex:r?-1:0,onKeyPress:e=>{"Enter"!==e.key||r||j(e)},children:[Tm(e.start/1e3)," - ",Tm(e.end/1e3)]}),null!==e.speaker&&void 0!==e.speaker&&!r&&Z.jsxs("span",{onClick:t=>{t.stopPropagation(),b&&e&&b(e)},className:`ml-2 font-medium cursor-pointer hover:opacity-80 ${U.color}`,title:`${iy("assignSpeakerTooltip",c)}: ${U.name}`,children:["(",U.name,")"]})]}),!r&&E&&Z.jsx("div",{className:"flex items-center gap-0.5",children:Z.jsxs(Hj,{delayDuration:200,children:[Z.jsxs(Gj,{children:[Z.jsx(Wj,{asChild:!0,children:Z.jsx(AT,{variant:"ghost",size:"icon_xs",className:"text-slate-300 hover:text-purple-300 hover:bg-slate-700/70 h-6 w-6",onClick:t=>{t.stopPropagation(),u&&u(e)},children:Z.jsx($p,{size:14})})}),Z.jsx(Qj,{side:"top",className:"bg-slate-800 text-white border-slate-700",children:Z.jsx("p",{children:iy("addQuestionToSegment",c)})})]}),Z.jsxs(Gj,{children:[Z.jsx(Wj,{asChild:!0,children:Z.jsx(AT,{variant:"ghost",size:"icon_xs",className:"text-slate-300 hover:text-purple-300 hover:bg-slate-700/70 h-6 w-6",onClick:t=>{t.stopPropagation(),s&&s(e)},children:Z.jsx(ig,{size:13})})}),Z.jsx(Qj,{side:"top",className:"bg-slate-800 text-white border-slate-700",children:Z.jsx("p",{children:iy("editSegment",c)})})]})]})})]}),Z.jsx("div",{className:"flex items-start gap-1",children:Z.jsx("div",{className:"flex-grow min-w-0",children:r?Z.jsxs(Z.Fragment,{children:[Z.jsx("div",{className:"mb-2 w-full max-w-xs",children:Z.jsxs(hI,{value:String((null==e?void 0:e.speaker)||"")||"__none__",onValueChange:t=>(t=>{if(!x)return;const r=null==e?void 0:e.speaker;x(e,r,""===t?null:t)})("__none__"===t?"":t),children:[Z.jsx(pI,{className:"bg-slate-800 border-slate-700 text-slate-200 h-8",children:Z.jsx(fI,{placeholder:iy("selectSpeakerPlaceholder",c),children:(null==e?void 0:e.speaker)&&Z.jsx("span",{className:rL(e.speaker,c).color,children:rL(e.speaker,c).name})})}),Z.jsxs(yI,{className:"bg-slate-900 border-slate-800 text-white",children:[Z.jsx(vI,{value:"__none__",children:Z.jsx("span",{className:"text-slate-400",children:iy("unknownSpeaker",c)})}),w.map((e=>Z.jsx(vI,{value:e,children:Z.jsx("span",{className:rL(e,c).color,children:e})},e)))]})]})}),Z.jsx(IN,{ref:A,value:n||"",onChange:e=>{l&&l(e.target.value),A.current&&(A.current.style.height="auto",A.current.style.height=`${A.current.scrollHeight}px`,C(`${A.current.scrollHeight}px`))},onClick:e=>{e.stopPropagation(),(e=>{k(e.target.selectionStart)})(e)},onKeyUp:e=>{k(e.target.selectionStart)},className:"w-full p-2 rounded border-slate-400 focus:ring-purple-500 focus:border-purple-500 text-sm leading-relaxed placeholder-slate-500 overflow-hidden resize-none bg-slate-200 text-slate-900",style:{height:_},placeholder:iy("editTextSegmentPlaceholder",c)})]}):Z.jsx(Z.Fragment,{children:Z.jsx("p",{className:"leading-relaxed whitespace-pre-wrap pt-0.5 pb-0 rounded-sm text-sm text-slate-100",children:L})})})}),r&&Z.jsx(Yj,{onSave:a,onCancel:o,onSplit:()=>{if(h&&e){const t="number"==typeof T&&T>=0&&T<=(n||"").length?T:void 0;h(e,n,t)}},onMerge:()=>{f&&e&&f(e)},onDelete:()=>{p&&e&&p(e)},onAdd:t=>{t&&t.stopPropagation(),(()=>{if(e&&"number"==typeof e.end){const t=Math.round(e.end/1e3);I(t),N(t+1)}else I(void 0),N(void 0);D(!0)})()},isFirstOverallSegment:g,currentLanguage:c})]})}),Z.jsx(Zj,{isOpen:P,onClose:M,onSave:({startSec:e,endSec:t,text:r})=>{"function"==typeof S&&S(e,t,r),M()},currentLanguage:c,defaultStartSec:R,defaultEndSec:O})]})},iL=({segments:e,visibleSegmentsCount:t,editingSegment:r,editedText:n,activeSegmentTime:i,question:s,blockIndex:a,currentLanguage:o,onSegmentClick:l,handleEditSegment:c,handleSaveCurrentSegmentEdit:u,handleCancelEdit:d,isSaving:h,setEditedText:f,audioRef:p,segmentPlaying:g,onAddQuestionFromSegment:m,performActionWithConfirmation:y,setTextareaRef:v,handleLoadMoreSegments:b,toggleTextExpansion:w,isJumpTarget:x,isActiveQuestionBlock:S,isExpanded:E,isReadingMode:T,readingModeEditingActive:k,onOpenSpeakerAssignmentDialog:A,onInsertManualSegment:_,availableSpeakers:C=[],onSetSegmentSpeaker:P,isEditMode:D})=>{const R=e.slice(0,t),I=e.length>t&&!T;return Z.jsxs("div",{className:`overflow-hidden pl-1 pr-0.5 pt-1.5 mt-1 rounded-b-md \n        ${x&&S&&!T?"border-x border-b border-purple-500/30":"border-t border-slate-700/20"}\n        ${T?"reading-mode-segment-list":""}\n      `,children:[R.map(((e,t)=>Z.jsx(nL,{segment:e,isActive:!T&&"number"==typeof i&&"number"==typeof e.start&&"number"==typeof e.end&&i>=e.start&&i<e.end,isEditingThisSegment:T&&k&&(null==r?void 0:r.id)===e.id||!T&&r&&(r.id||r.start)===(e.id||e.start),editedText:n,isSaving:h,onSegmentClick:l,onEditSegment:c,onSaveEdit:u,onCancelEdit:d,onTextChange:f,audioRef:p,currentLanguage:o,segmentPlaying:g,onAddQuestionFromSegment:m,activeSegmentTime:i,highlightTextFn:e=>e,isFirstSegmentInQuestion:0===t&&s&&!s.isIntro&&!s.isFullTranscript&&Math.abs(1e3*s.time-e.start)<1e3,onSplitSegment:(e,t,r)=>y("Split",e,t,r),onMergeWithPreviousSegment:e=>y("Merge",e),onDeleteSegment:e=>y("Delete",e),isFirstOverallSegment:0===a&&0===t,setTextareaRef:v,isActiveQuestionBlock:S,isJumpTargetPreview:x&&0===t,isReadingMode:T,readingModeEditingActive:k,onOpenSpeakerAssignmentDialog:A,onInsertManualSegment:_,availableSpeakers:C,onSetSegmentSpeaker:P,isEditMode:D},e.id||`${e.start}-${t}`))),!T&&Z.jsxs("div",{className:"flex justify-start items-center gap-2 mt-1 min-h-[26px]",children:[I&&Z.jsxs(AT,{onClick:b,variant:"link",size:"sm",className:"text-purple-300 hover:text-purple-200 text-xs focus-visible:ring-purple-400 focus-visible:ring-offset-slate-900 focus-visible:ring-1 border border-purple-400/30 hover:border-purple-400/60 px-2 py-1 h-auto",children:[iy("loadMoreSegments",o)," (",e.length-t,")"]}),E&&e.length>0&&Z.jsx(AT,{onClick:e=>{e.stopPropagation(),w(e)},variant:"link",size:"sm",className:"text-slate-400 hover:text-slate-200 text-xs focus-visible:ring-slate-400 focus-visible:ring-offset-slate-900 focus-visible:ring-1",children:iy("hide",o)})]})]})},sL=({question:e,isActiveQuestion:t,isExpanded:r,editingSegment:n,onActivate:i,onToggleExpansion:s,onEditQuestion:a,currentLanguage:o,segmentsAvailable:l,isReadingMode:c,isEditMode:u})=>Z.jsxs("div",{className:`flex justify-between items-center p-1.5 rounded-t-md transition-colors\n      ${c?"cursor-default":"cursor-pointer hover:bg-slate-700/20"}\n      ${t&&!c?"bg-purple-600/15":""}\n      ${c?"mb-1 pb-2":""} \n    `,onClick:c?void 0:i,role:c?void 0:"button",tabIndex:c?void 0:0,onKeyPress:e=>{"Enter"!==e.key||c||i()},children:[Z.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[!c&&Z.jsx("div",{className:"text-white text-xs px-1.5 py-0.5 rounded tabular-nums "+(t?"bg-purple-500":"bg-blue-500/70"),children:Tm(e.time,!0)}),Z.jsx("span",{className:"font-medium line-clamp-1 flex-grow min-w-0 "+(c?"text-xl font-semibold text-slate-900":"text-sm text-slate-100"),children:e.title||""})]}),!c&&Z.jsxs("div",{className:"flex items-center shrink-0",children:[!n&&l&&Z.jsx(AT,{variant:"ghost",size:"icon_sm",onClick:e=>{e.stopPropagation(),s()},className:"text-slate-300 hover:text-white hover:bg-white/15 h-7 w-7","aria-label":iy(r?"hide":"showText",o),children:r?Z.jsx(xp,{size:18}):Z.jsx(vp,{size:18})}),!n&&u&&Z.jsx(AT,{variant:"ghost",size:"icon_sm",onClick:t=>{t.stopPropagation(),a&&a(e)},className:"text-slate-300 hover:text-white hover:bg-white/15 h-7 w-7","aria-label":`${iy("editQuestion",o)} ${e.title}`,children:Z.jsx(sg,{className:"h-3.5 w-3.5"})})]})]}),aL=V.memo((({question:e,segments:t,isActiveQuestion:r,isJumpTarget:n,isExpanded:i,onToggleExpansion:s,onActivate:a,onEditQuestion:o,currentLanguage:l,onSegmentClick:c,audioRef:u,onSaveEditedSegment:d,activeSegmentTime:h,onAddQuestionFromSegment:f,utterances:p,mainPlayerIsPlaying:g,showTranscript:m,user:y,episodeSlug:v,isReadingMode:b,readingModeEditingActive:w,setReadingModeEditingSegmentRef:x,onOpenSpeakerAssignmentDialog:S,segmentToHighlight:E,transcriptLoading:T,questionRangeEndMs:k,isEditMode:A})=>{const[_,C]=q.useState(b?1/0:5),{editor:P,isAuthenticated:D,openAuthModal:R}=pS(),{toast:I}=Fm(),{editingSegment:O,setEditingSegment:N,editedText:j,setEditedText:L,showConfirmDialog:M,confirmDialogProps:F,textareaRef:U,setTextareaRef:B,handleEditSegment:$,handleSaveCurrentSegmentEdit:z,handleCancelEdit:K,performActionWithConfirmation:H,setShowConfirmDialog:G,isSaving:W,insertSegmentManually:Q}=((e,t,r,n,i,s)=>{const[a,o]=q.useState(null),[l,c]=q.useState(""),[u,d]=q.useState(!1),[h,f]=q.useState({}),[p,g]=q.useState(null),[m,y]=q.useState(!1),v=q.useRef({isPlaying:!1,currentTime:0}),{toast:b}=Fm(),{editor:w,isAuthenticated:x,openAuthModal:S}=pS(),E=q.useCallback((e=>{x?((null==r?void 0:r.current)&&(v.current={isPlaying:!r.current.paused,currentTime:r.current.currentTime}),o(e),c(e?e.text:"")):S()}),[r,x,b]),T=q.useCallback((()=>{(null==r?void 0:r.current)&&v.current.isPlaying&&r.current.paused?(r.current.currentTime=v.current.currentTime,r.current.play().catch((e=>{}))):(null==r?void 0:r.current)&&(r.current.currentTime=v.current.currentTime)}),[r]),k=q.useCallback((async()=>{if(a&&!m){y(!0);try{const i={...a,text:l},c=e.map((e=>(e.id||e.start)===(a.id||a.start)?i:e)),u=e.find((e=>(e.id||e.start)===(a.id||a.start)));if(await t(c,"update",u,i),x&&w)try{const e=a.id||a.start;await gS({editorId:w.id,editorEmail:w.email,editorName:w.name,editType:"transcript",targetType:"segment",targetId:`${s}_segment_${e}`,contentBefore:(null==u?void 0:u.text)||"",contentAfter:l,filePath:null,metadata:{episodeSlug:s,lang:n,segmentId:e,segmentStart:a.start,segmentEnd:a.end,speaker:a.speaker,timestamp:(new Date).toISOString()}})}catch(r){}o(null),b({title:iy("transcriptSegmentUpdatedTitle",n),description:iy("transcriptSegmentUpdatedDesc",n),className:"bg-green-600/80 border-green-500 text-white"})}catch(i){b({title:"Save Error",description:i.message,variant:"destructive"})}finally{y(!1)}}}),[a,m,l,e,t,b,n,T,x,w,s]),A=q.useCallback((()=>{o(null),T()}),[T]),_=q.useCallback((async(r,i,a,l)=>{let c;const u=JSON.parse(JSON.stringify(e));i.id||i.start;let d={};switch(r){case"Split":{if((null==p?void 0:p.current)&&void 0!==p.current.selectionStart)l=p.current.selectionStart;else if(null==l)return void b({title:iy("errorSplittingSegment",n),description:iy("cursorPositionRequired",n),variant:"destructive"});const t=a.substring(0,l).trim(),r=a.substring(l).trim();if(!t||!r)return void b({title:iy("errorSplittingSegment",n),description:iy("cannotSplitEmpty",n),variant:"destructive"});if(i.words&&Array.isArray(i.words)&&i.words.length>0){let s=-1,a=0;for(let e=0;e<i.words.length;e++)if(a+=i.words[e].text.length+(e>0?1:0),a>=l){s=e;break}if(-1===s||s>=i.words.length-1)return void b({title:iy("errorSplittingSegment",n),description:iy("cannotSplitAtPosition",n),variant:"destructive"});const o=i.words.slice(0,s+1),u=i.words.slice(s+1);if(0===o.length||0===u.length)return void b({title:iy("errorSplittingSegment",n),description:iy("cannotSplitIntoEmpty",n),variant:"destructive"});const h={...i,text:t,end:o[o.length-1].end,words:o,id:i.id||`${i.start}-split1-${Date.now()}`},f={...i,start:u[0].start,text:r,words:u,id:`${i.start}-split2-${Date.now()}`},p=e.findIndex((e=>(e.id||e.start)===(i.id||i.start)));if(-1===p)return;c=[...e.slice(0,p),h,f,...e.slice(p+1)],d={splitAt:l,segment1:h,segment2:f}}else{const n=t.length+r.length,s=n>0?t.length/n:.5,a=(i.end||0)-(i.start||0),o=Math.round(a*s),u=(i.start||0)+o,h={...i,text:t,end:u,words:[],id:i.id||`${i.start}-split1-${Date.now()}`},f={...i,start:u,text:r,words:[],id:`${i.start}-split2-${Date.now()}`},p=e.findIndex((e=>(e.id||e.start)===(i.id||i.start)));if(-1===p)return;c=[...e.slice(0,p),h,f,...e.slice(p+1)],d={splitAt:l,segment1:h,segment2:f,proportional:!0}}break}case"Merge":{const t=e.findIndex((e=>(e.id||e.start)===(i.id||i.start)));if(t<=0)return void b({title:iy("errorMergingSegment",n),description:iy("cannotMergeFirstSegment",n),variant:"destructive"});const r=e[t-1],s=`${r.text} ${i.text}`.trim(),a=[...r.words||[],...i.words||[]].sort(((e,t)=>e.start-t.start)),o={...r,text:s,end:i.end,words:a,id:r.id||`${r.start}-merged-${Date.now()}`};c=[...e.slice(0,t-1),o,...e.slice(t+1)],d={mergedWith:r.id||r.start,resultingSegment:o};break}case"Delete":c=e.filter((e=>(e.id||e.start)!==(i.id||i.start))),d={deletedSegment:i};break;default:return}if(c){if(await t(c,r.toLowerCase(),i,c.find((e=>{var t,r;return e.id===((null==(t=d.resultingSegment)?void 0:t.id)||(null==(r=d.segment1)?void 0:r.id))}))||null,u),x&&w)try{const e=i.id||i.start;let t=i.text,a="",o={};const l=u.findIndex((e=>(e.id||e.start)===(i.id||i.start)));if("Split"===r)t=JSON.stringify(i),a=`${d.segment1.text} | ${d.segment2.text}`,o={segmentIndex:l,createdSegmentsCount:2};else if("Merge"===r){const e=u[l-1];t=JSON.stringify([e,i]),a=d.resultingSegment.text,o={segmentIndex:l-1}}else"Delete"===r&&(t=JSON.stringify(i),a="[DELETED]",o={segmentIndex:l});await gS({editorId:w.id,editorEmail:w.email,editorName:w.name,editType:"transcript",targetType:"segment",targetId:`${s}_segment_${e}`,contentBefore:t,contentAfter:a,filePath:null,metadata:{episodeSlug:s,lang:n,segmentId:e,action:r,actionDetail:d,timestamp:(new Date).toISOString(),...o}})}catch(h){}o(null)}}),[e,t,b,n,T,p,i,s,x,w]),C=q.useCallback((async(r,i,a)=>{if(x)try{if("number"!=typeof r||"number"!=typeof i||isNaN(r)||isNaN(i)||r<0||i<=r)return void b({title:iy("errorAddingSegment",n),description:iy("invalidTimeRange",n),variant:"destructive"});const l=Math.round(1e3*r),c=Math.round(1e3*i);if(e.some((e=>"number"==typeof e.start&&"number"==typeof e.end&&!(c<=e.start||l>=e.end))))return void b({title:iy("errorAddingSegment",n),description:iy("segmentOverlaps",n),variant:"destructive"});const u={id:`manual-${l}-${Date.now()}`,start:l,end:c,text:(a||"").trim(),speaker:null,words:[]},d=[...e,u].sort(((e,t)=>(e.start||0)-(t.start||0)));if(await t(d,"insert",null,u,e),x&&w)try{await gS({editorId:w.id,editorEmail:w.email,editorName:w.name,editType:"transcript",targetType:"segment",targetId:`${s}_segment_${u.id}`,contentBefore:"",contentAfter:a||"",filePath:null,metadata:{episodeSlug:s,segmentId:u.id,action:"Insert",startMs:l,endMs:c,timestamp:(new Date).toISOString()}})}catch(o){}b({title:iy("segmentAddedTitle",n),description:iy("segmentAddedDesc",n),className:"bg-green-600/80 border-green-500 text-white"})}catch(l){b({title:iy("errorAddingSegment",n),description:l.message,variant:"destructive"})}else S()}),[e,t,b,n,x,w,s,S]),P=q.useCallback(((e,t,r,i)=>{const s=`confirm${e}SegmentDisabled`;if("true"===localStorage.getItem(s))return void _(e,t,r,i);let a,o;switch(e){case"Split":a="confirmSplitTitle",o="confirmSplitDescription";break;case"Merge":a="confirmMergeTitle",o="confirmMergeDescription";break;case"Delete":a="confirmDeleteSegmentTitle",o="confirmDeleteSegmentDescription";break;default:return}f({title:iy(a,n),description:iy(o,n),onConfirm:()=>{_(e,t,r,i),d(!1)},onCancel:()=>d(!1),actionType:e}),d(!0)}),[_,n]);return{editingSegment:a,setEditingSegment:o,editedText:l,setEditedText:c,showConfirmDialog:u,confirmDialogProps:h,textareaRef:p,setTextareaRef:g,handleEditSegment:E,handleSaveCurrentSegmentEdit:k,handleCancelEdit:A,performActionWithConfirmation:P,setShowConfirmDialog:d,isSaving:m,insertSegmentManually:C}})(p||[],d,u,l,y,v);q.useEffect((()=>{!i||O||b?b&&C(1/0):C(5)}),[i,O,b]),q.useEffect((()=>{if(E&&i&&t.length>_){const e=t.findIndex((e=>e.start===E));if(-1!==e){const r=Math.min(t.length,e+6);r>_&&C(r)}}}),[E,i,t,_]);const Y=q.useCallback((()=>{C((e=>e+10))}),[]),X=Boolean(null==e?void 0:e.is_full_transcript)||"full-transcript-virtual"===(null==e?void 0:e.id),J=1e3*((null==e?void 0:e.time)||0),ee=!b&&!X&&"number"==typeof h&&h>=J&&(k===1/0||"number"==typeof k)&&h<(k===1/0?Number.POSITIVE_INFINITY:k),te=!b&&(g&&ee||!g&&r),re=te&&!b?n&&i?"ring-1 ring-purple-500/30":"bg-purple-600/10 ring-1 ring-purple-500/20":"",ne=t&&t.length>0&&m,ie=t,se=O||b&&w?t?t.length:0:_,ae=V.useMemo((()=>{const e=new Set;return(p||[]).forEach((t=>{const r=t&&void 0!==t.speaker&&null!==t.speaker?String(t.speaker).trim():"";r&&e.add(r)})),Array.from(e).sort(((e,t)=>e.localeCompare(t)))}),[p]),oe=q.useCallback((async(e,t,r)=>{if(!D)return void R();if(!Array.isArray(p)||!d)return;const n=(null==e?void 0:e.id)||(null==e?void 0:e.start),i=(p||[]).map((e=>(e.id||e.start)===n&&String(e.speaker||"")!==String(r||"")?{...e,speaker:r}:e));if(await d(i,"update",e,{...e,speaker:r}),P)try{const n=e.id||e.start;await gS({editorId:P.id,editorEmail:P.email,editorName:P.name,editType:"transcript",targetType:"segment",targetId:`${v}_segment_${n}`,contentBefore:`Speaker: ${t||"None"}`,contentAfter:`Speaker: ${r||"None"}`,filePath:null,metadata:{episodeSlug:v,lang:l,segmentId:n,action:"ChangeSpeaker",oldSpeaker:t,newSpeaker:r,segmentStart:e.start,segmentEnd:e.end,timestamp:(new Date).toISOString()}})}catch(s){}}),[p,d,D,P,v,I]),le=q.useCallback((e=>{b&&w?($(e),x&&x({segment:e,setText:L,save:()=>z(e.id||e.start)})):b||$(e)}),[b,w,$,x,L,z]),ce=q.useCallback((async()=>{await z((null==O?void 0:O.id)||(null==O?void 0:O.start)),b&&w&&x&&x(null)}),[z,O,b,w,x]),ue=q.useCallback((()=>{K(),b&&w&&x&&x(null)}),[K,b,w,x]);return Z.jsxs(Z.Fragment,{children:[Z.jsxs("div",{className:`mb-0.5 rounded-md ${re} ${b?"reading-mode-block":""}`,children:[Z.jsx(sL,{question:e,isActiveQuestion:te,isExpanded:i||!!O,editingSegment:O,onActivate:a,onToggleExpansion:s,onEditQuestion:o,currentLanguage:l,segmentsAvailable:ne,isReadingMode:b,isEditMode:A}),(i||O)&&ie&&ie.length>0&&m&&Z.jsx("div",{className:"animate-expand-collapse overflow-hidden",children:Z.jsx(iL,{segments:ie,visibleSegmentsCount:se,editingSegment:O,editedText:j,activeSegmentTime:h,question:e,blockIndex:0,currentLanguage:l,onSegmentClick:c,handleEditSegment:le,handleSaveCurrentSegmentEdit:ce,handleCancelEdit:ue,isSaving:W,setEditedText:L,audioRef:u,segmentPlaying:g,onAddQuestionFromSegment:f,performActionWithConfirmation:H,setTextareaRef:B,handleLoadMoreSegments:Y,toggleTextExpansion:s,isJumpTarget:n,isActiveQuestionBlock:te,isExpanded:i,isReadingMode:b,readingModeEditingActive:w,onOpenSpeakerAssignmentDialog:S,onInsertManualSegment:Q,availableSpeakers:ae,onSetSegmentSpeaker:oe,isEditMode:A})}),(i||O)&&m&&T&&Z.jsx("div",{className:"text-xs pt-1.5 pl-1.5 mt-1 rounded-b-md pb-2 "+(b?"text-slate-600":"text-slate-400 border-t border-slate-700/20"),children:Z.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[Z.jsx(Hp,{className:"h-3.5 w-3.5 animate-spin text-purple-400"}),iy("loadingTranscript",l)]})})]}),M&&Z.jsx(RN,{isOpen:M,onOpenChange:G,title:F.title,description:F.description,onConfirm:F.onConfirm,onCancel:()=>G(!1),actionType:F.actionType,currentLanguage:l})]})})),oL=({questions:e,currentTime:t,duration:r,onQuestionsChange:n,onQuestionJump:i,episodeSlug:s,episodeDate:a,audioRef:o,mainPlayerIsPlaying:l,mainPlayerTogglePlayPause:c,mainPlayerSeekAudio:u,currentLanguage:d,episodeLang:h,episodeAudioUrl:f,jumpToQuestionId:p,showTranscript:g,user:m,disableAutomaticCollapse:y=!1,onOpenSpeakerAssignmentDialog:v,transcriptUtterances:b,transcriptId:w,transcriptWords:x,segmentToHighlight:S,isLoading:E,transcriptLoading:T,onTranscriptLocalUpdate:k,onSaveEditedSegment:A,onAddQuestionFromSegment:_,onEditQuestion:C,isEditMode:P})=>{const[D,R]=q.useState(null),[I,O]=q.useState({}),N="all"===h?d:h,j=b||[],L=q.useMemo((()=>{if(!g||0===j.length)return{};const t={},n=[...e].sort(((e,t)=>e.time-t.time));return n.forEach(((e,i)=>{const s=1e3*(e.time||0),a=n[i+1],o=a?1e3*a.time:r?1e3*r:1/0;t[e.id]=j.filter((e=>"number"==typeof e.start&&e.start>=s&&e.start<o)).sort(((e,t)=>e.start-t.start))})),t}),[e,j,r,g]),M=q.useMemo((()=>{const t={};if(!Array.isArray(e)||0===e.length)return t;const n=[...e].sort(((e,t)=>e.time-t.time));return n.forEach(((e,i)=>{const s=n[i+1],a=s?s.time:"number"==typeof r?r:1/0;t[e.id]=a===1/0?1/0:1e3*a})),t}),[e,r]);q.useEffect((()=>{if(Array.isArray(e)&&e.length>0){const r=[...e].sort(((e,t)=>e.time-t.time)),n=r.find(((e,n)=>{const i=r[n+1];return t>=e.time&&(!i||t<i.time)}));n&&n.id!==D&&(R(n.id),y||O((e=>({...e,[n.id]:!0}))))}}),[t,e,D,y]),q.useEffect((()=>{if(!p)return;const t=e.find((e=>String(e.id)===String(p)));if(t){R(t.id),O((e=>({...e,[t.id]:!0})));const e=document.getElementById(`question-block-${t.id}`);e&&e.scrollIntoView({behavior:"smooth",block:"center"})}}),[p,e]);const F=q.useCallback((e=>{O((t=>({...t,[e]:!t[e]})))}),[]),U=q.useCallback((e=>{i(e.time,`question-${e.id}`,!0),R(e.id),O(y?t=>({...t,[e.id]:!0}):{[e.id]:!0})}),[i,y]),B=q.useCallback((e=>{u&&u(e,!0)}),[u]),$=q.useMemo((()=>{if(!Array.isArray(e))return[];const t=[...e].sort(((e,t)=>e.time-t.time)),r=t.filter((e=>!(!e.is_intro&&!e.is_full_transcript&&"intro-virtual"!==e.id)||e.title&&""!==e.title.trim()));return[...!r.some((e=>"intro-virtual"!==e.id))&&j.length>0&&g?[{id:"full-transcript-virtual",title:"",time:0,is_full_transcript:!0,is_intro:!1,lang:N}]:[],...r]}),[e,j,g,N]);return Z.jsx("div",{className:"mt-1",children:$.map((e=>Z.jsx(aL,{id:`question-block-${e.id}`,question:e,segments:L[e.id]||[],isActiveQuestion:D===e.id,isJumpTarget:S&&(L[e.id]||[]).some((e=>e.start===S)),isExpanded:!!I[e.id],onToggleExpansion:()=>F(e.id),onActivate:()=>U(e),onEditQuestion:()=>C(e),currentLanguage:d,onSegmentClick:B,audioRef:o,onSaveEditedSegment:A,activeSegmentTime:1e3*t,onAddQuestionFromSegment:_,utterances:j,mainPlayerIsPlaying:l,showTranscript:g,user:m,episodeSlug:s,isReadingMode:!1,readingModeEditingActive:!1,setReadingModeEditingSegmentRef:null,onOpenSpeakerAssignmentDialog:v,segmentToHighlight:S,transcriptLoading:T,questionRangeEndMs:M[e.id],isEditMode:P},e.id)))})},lL=({episodeTitle:e,isPlaying:t,activeQuestionTitle:r,onPlayPause:n,onSkipSeconds:i,currentLanguage:s})=>e?Z.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-slate-900/80 backdrop-blur-md shadow-xl border-b border-slate-700/50",children:Z.jsxs("div",{className:"container mx-auto px-3 py-2 flex items-center justify-between max-w-4xl",children:[Z.jsxs("div",{className:"flex-grow min-w-0 mr-2",children:[Z.jsx("p",{className:"text-sm font-semibold text-purple-300 truncate",title:e,children:e}),Z.jsx("p",{className:"text-xs text-slate-300 truncate",title:r||iy("paused",s),children:r||iy(t?"nowPlaying":"paused",s)})]}),Z.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[Z.jsx("button",{onClick:()=>{i&&i(-10)},className:"text-slate-200 hover:text-white hover:bg-white/15 h-9 w-9 bg-transparent border-none cursor-pointer rounded flex items-center justify-center","aria-label":iy("skipBackward10",s)||"Skip backward 10s",children:Z.jsx(hg,{className:"h-5 w-5"})}),Z.jsx("button",{onClick:n,className:"text-white hover:text-white bg-purple-600 hover:bg-purple-700 rounded-full h-10 w-10 border-none cursor-pointer flex items-center justify-center","aria-label":iy(t?"pause":"play",s),children:t?Z.jsx(ng,{className:"h-5 w-5"}):Z.jsx(lg,{className:"h-5 w-5"})}),Z.jsx("button",{onClick:()=>{i&&i(10)},className:"text-slate-200 hover:text-white hover:bg-white/15 h-9 w-9 bg-transparent border-none cursor-pointer rounded flex items-center justify-center","aria-label":iy("skipForward10",s)||"Skip forward 10s",children:Z.jsx(fg,{className:"h-5 w-5"})})]})]})}):null,cL=e=>{if(!e||"object"!=typeof e)return{id:Date.now(),episode_slug:"unknown",lang:"en",utterances:[],words:[],text:"No text content",status:"completed",cached_at:Date.now(),last_updated:Date.now()};const t=(r=e.utterances,Array.isArray(r)?r.map(((e,t,r)=>{if(!e||"object"!=typeof e)return null;let n="number"==typeof e.start&&!isNaN(e.start)&&e.start>=0?e.start:0;0===n&&t>0&&r[t-1]&&"number"==typeof r[t-1].end&&(n=r[t-1].end+100);let i="number"!=typeof e.end||isNaN(e.end)?0:e.end;if(i<=n)if(t<r.length-1&&r[t+1]&&"number"==typeof r[t+1].start&&r[t+1].start>n)i=Math.max(n+100,r[t+1].start-100);else{const t=e.text?e.text.length:0;i=n+(t>0?Math.max(1e3,50*t):2e3)}return{...e,start:n,end:i,text:e.text||""}})).filter((e=>null!==e)):[]);var r;const n={...e,utterances:t},{isValid:i,errors:s,sanitizedData:a}=(e=>{const t=[];if(!e||"object"!=typeof e)return t.push("Transcript must be a valid object"),{isValid:!1,errors:t,sanitizedData:null};e.episode_slug&&"string"==typeof e.episode_slug||t.push("Episode slug is required and must be a string"),e.lang&&"string"==typeof e.lang||t.push("Language is required and must be a string"),Array.isArray(e.utterances)?e.utterances.forEach(((e,r)=>{e&&"object"==typeof e?(("number"!=typeof e.start||e.start<0)&&t.push(`Utterance at index ${r} must have a valid start time (number >= 0)`),("number"!=typeof e.end||e.end<=e.start)&&t.push(`Utterance at index ${r} must have a valid end time (number > start)`),e.text&&"string"==typeof e.text||t.push(`Utterance at index ${r} must have text content`)):t.push(`Utterance at index ${r} must be an object`)})):t.push("Utterances must be an array"),void 0===e.words||Array.isArray(e.words)||t.push("Words must be an array if provided"),void 0!==e.text&&"string"!=typeof e.text&&t.push("Text must be a string if provided");const r=0===t.length;let n=null;return r&&(n={...e,id:void 0!==e.id?Number(e.id):void 0,utterances:e.utterances||[],words:e.words||[],text:e.text||(e.utterances||[]).map((e=>e.text)).join(" "),cached_at:e.cached_at||Date.now(),last_updated:e.last_updated||Date.now()}),{isValid:r,errors:t,sanitizedData:n}})(n);return i?a:{id:void 0!==e.id&&Number(e.id)||Date.now(),episode_slug:e.episode_slug||"unknown",lang:e.lang||"en",utterances:t,words:Array.isArray(e.words)?e.words:[],text:e.text||"No text content",status:e.status||"completed",cached_at:Date.now(),last_updated:Date.now()}},uL=e=>{if(!e||!e.id)return!1;const t=Number(e.id);return!isNaN(t)&&t>0};const dL=new class{constructor(){this.dbName="PodcastAppDB",this.version=3,this.db=null,this.fallbackStorage=new Map,this.useFallback=!1,this.initializing=!1,this.initPromise=null,this.isInitialized=!1,this.logCounts=new Map,this.lastLogTime=new Map,this.logThrottleInterval=5e3,this.maxLogCount=10}compactLog(e,t="default"){const r=Date.now(),n=`${t}:${e}`;this.logCounts.has(n)||(this.logCounts.set(n,0),this.lastLogTime.set(n,0));const i=this.logCounts.get(n),s=this.lastLogTime.get(n);this.logCounts.set(n,i+1),this.lastLogTime.set(n,r),0===i||r-s>this.logThrottleInterval?0===i||i>=this.maxLogCount&&this.logCounts.set(n,0):i===this.maxLogCount-1&&this.logCounts.set(n,0)}async attemptRecovery(){if(!this.useFallback)return!0;this.useFallback=!1,this.isInitialized=!1,this.db=null,this.initPromise=null;try{return null!==await this.init()}catch(e){return!1}}async init(){return this.isInitialized?this.db:this.initPromise?this.initPromise:window.indexedDB?this.db?this.db:(this.initializing=!0,this.initPromise=new Promise(((e,t)=>{const r=setTimeout((()=>{this.useFallback=!0,this.isInitialized=!0,this.initializing=!1,e(null)}),1e4),n=indexedDB.open(this.dbName,this.version);n.onerror=t=>{clearTimeout(r),this.useFallback=!0,this.isInitialized=!0,e(null)},n.onblocked=t=>{clearTimeout(r),this.useFallback=!0,this.isInitialized=!0,e(null)},n.onupgradeneeded=t=>{try{const e=t.target.result;if(!e.objectStoreNames.contains("episodes")){const t=e.createObjectStore("episodes",{keyPath:"slug"});t.createIndex("date","date"),t.createIndex("lang","lang")}if(!e.objectStoreNames.contains("transcripts")){const t=e.createObjectStore("transcripts",{keyPath:"id",autoIncrement:!0});t.createIndex("episode_slug","episode_slug"),t.createIndex("lang","lang")}if(e.objectStoreNames.contains("questions")&&e.deleteObjectStore("questions"),!e.objectStoreNames.contains("timecodes")){const t=e.createObjectStore("timecodes",{keyPath:"id",autoIncrement:!0});t.createIndex("episode_slug","episode_slug"),t.createIndex("lang","lang"),t.createIndex("time","time")}if(!e.objectStoreNames.contains("audioFiles")){const t=e.createObjectStore("audioFiles",{keyPath:"url"});t.createIndex("episode_slug","episode_slug"),t.createIndex("cached_at","cached_at")}if(!e.objectStoreNames.contains("syncQueue")){const t=e.createObjectStore("syncQueue",{keyPath:"id",autoIncrement:!0});t.createIndex("type","type"),t.createIndex("timestamp","timestamp")}if(!e.objectStoreNames.contains("cacheSettings")){e.createObjectStore("cacheSettings",{keyPath:"key"})}}catch(n){clearTimeout(r),this.useFallback=!0,e(null)}},n.onsuccess=t=>{clearTimeout(r),this.db=t.target.result,this.isInitialized=!0,this.db.onerror=e=>{},this.initializing=!1,e(this.db)}})),this.initPromise):(this.useFallback=!0,this.fallbackStorage=new Map,this.isInitialized=!0,null)}async getTransaction(e,t="readonly",r=0){try{if(this.useFallback)return null;if(!this.db||"open"!==this.db.readyState){this.compactLog(" Initializing or reinitializing database...","database_init");if(null===await this.init())return null}if(!this.db||"open"!==this.db.readyState)return this.useFallback=!0,this.db=null,this.isInitialized=!0,null;for(const t of e)if(!this.db.objectStoreNames.contains(t))throw new Error(`Object store '${t}' does not exist`);const r=this.db.transaction(e,t);r.onerror=e=>{},r.onabort=e=>{};const n=setTimeout((()=>{try{r.abort()}catch(Jce){}}),15e3);return r.oncomplete=()=>clearTimeout(n),r.onerror=()=>clearTimeout(n),r.onabort=()=>clearTimeout(n),r}catch(n){if("InvalidStateError"===n.name&&r<2)return this.compactLog("Database connection was lost, attempting to reinitialize...","database_init"),this.db=null,this.useFallback=!1,this.isInitialized=!1,this.getTransaction(e,t,r+1);throw new Error(`  : ${n.message}`)}}async saveEpisode(e){if(!e||!e.slug)throw new Error("Episode data with slug is required");const t={...e,cached_at:Date.now(),last_updated:Date.now()};if(this.useFallback&&(this.recoveryCounter||(this.recoveryCounter=0),this.recoveryCounter++,this.recoveryCounter%10==0)){this.compactLog(" Attempting to recover IndexedDB...","recovery");await this.attemptRecovery()&&this.compactLog(" IndexedDB recovered successfully","recovery")}if(this.useFallback){const r=`episode_${e.slug}`;return this.fallbackStorage.set(r,t),this.compactLog(` Episode saved to fallback storage: ${e.slug}`,"episode_save"),e.slug}try{const r=await this.getTransaction(["episodes"],"readwrite");if(!r){this.compactLog(` Transaction failed, falling back to fallback storage for episode: ${e.slug}`,"fallback"),this.useFallback=!0;const r=`episode_${e.slug}`;return this.fallbackStorage.set(r,t),e.slug}const n=r.objectStore("episodes");return new Promise(((r,i)=>{const s=n.put(t);s.onsuccess=()=>{this.compactLog(` Episode saved to IndexedDB: ${e.slug}`,"episode_save"),r(s.result)},s.onerror=()=>{i(s.error)}}))}catch(r){this.compactLog(` Falling back to fallback storage for episode: ${e.slug}`,"fallback"),this.useFallback=!0;const n=`episode_${e.slug}`;return this.fallbackStorage.set(n,t),e.slug}}async getEpisode(e){if(this.useFallback){const t=`episode_${e}`;return this.fallbackStorage.get(t)||null}const t=await this.getTransaction(["episodes"]);if(!t)return null;const r=t.objectStore("episodes");return new Promise(((t,n)=>{const i=r.get(e);i.onsuccess=()=>t(i.result),i.onerror=()=>n(i.error)}))}async getAllEpisodes(){if(this.useFallback){const e=[];for(const[t,r]of this.fallbackStorage.entries())t.startsWith("episode_")&&e.push(r);return e.sort(((e,t)=>new Date(t.date||0)-new Date(e.date||0)))}const e=await this.getTransaction(["episodes"]);if(!e)return[];const t=e.objectStore("episodes");return new Promise(((e,r)=>{const n=t.getAll();n.onsuccess=()=>{const t=n.result||[];t.sort(((e,t)=>new Date(t.date||0)-new Date(e.date||0))),e(t)},n.onerror=()=>r(n.error)}))}async saveTranscript(e){if(!e)throw new Error("Transcript data is required");const t=cL(e);if(!this.useFallback&&void 0!==t.id){const e=Number(t.id);isNaN(e)&&(t.id=Date.now())}if(this.useFallback){const e=`transcript_${t.episode_slug}_${t.lang}`,r={...t,cached_at:Date.now(),last_updated:Date.now()};return this.fallbackStorage.set(e,r),Date.now()}try{const e=await this.getTransaction(["transcripts"],"readwrite");if(!e){this.compactLog(` Transaction failed, falling back to fallback storage for transcript: ${t.episode_slug}`,"fallback"),this.useFallback=!0;const e=`transcript_${t.episode_slug}_${t.lang}`,r={...t,cached_at:Date.now(),last_updated:Date.now()};return this.fallbackStorage.set(e,r),Date.now()}const r=e.objectStore("transcripts"),n={...t,cached_at:Date.now(),last_updated:Date.now()};return new Promise(((t,i)=>{const s=setTimeout((()=>{i(new Error("Timeout:      "))}),1e4),a=r.put(n);a.onsuccess=()=>{clearTimeout(s),t(a.result)},a.onerror=e=>{var t;clearTimeout(s),i(new Error(`  : ${(null==(t=e.target.error)?void 0:t.message)||" "}`))},e.oncomplete=()=>{clearTimeout(s)},e.onerror=e=>{var t;clearTimeout(s),i(new Error(`Transaction error: ${(null==(t=e.target.error)?void 0:t.message)||"Transaction failed"}`))}}))}catch(r){throw r}}async getTranscript(e,t){if(this.useFallback){const r=`transcript_${e}_${t}`;return this.fallbackStorage.get(r)||null}try{const r=await this.getTransaction(["transcripts"]),n=r.objectStore("transcripts").index("episode_slug");return new Promise(((r,i)=>{const s=n.getAll(e);s.onsuccess=()=>{const e=s.result.filter((e=>e.lang===t));r(e.length>0?e[0]:null)},s.onerror=()=>i(s.error)}))}catch(r){return null}}async saveQuestions(e,t,r){if(Array.isArray(e)||(e=[]),this.useFallback){const n=`timecodes_${t}_${r}`,i=[...e].sort(((e,t)=>(e.time||0)-(t.time||0))),s={questions:i,episode_slug:t,lang:r,cached_at:Date.now(),last_updated:Date.now()};return this.fallbackStorage.set(n,s),i.length}try{if(await this.deleteQuestions(t,r),0===e.length)return 0;const n=await this.getTransaction(["timecodes"],"readwrite");if(!n){this.compactLog(` Transaction failed, falling back to fallback storage for timecodes: ${t}`,"fallback"),this.useFallback=!0;const n=`timecodes_${t}_${r}`,i={questions:e,episode_slug:t,lang:r,cached_at:Date.now(),last_updated:Date.now()};return this.fallbackStorage.set(n,i),e.length}const i=n.objectStore("timecodes"),s=[...e].sort(((e,t)=>(e.time||0)-(t.time||0))),a=s.map((e=>{const n={...e,episode_slug:t,lang:r,cached_at:Date.now(),last_updated:Date.now()};return new Promise(((e,t)=>{const r=i.add(n);r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)}))}));await Promise.all(a);return new Promise(((e,t)=>{n.oncomplete=()=>e(s.length),n.onerror=e=>{var r;return t(new Error(`Transaction error: ${(null==(r=e.target.error)?void 0:r.message)||"Transaction failed"}`))}}))}catch(n){throw n}}async getQuestions(e,t){if(this.useFallback){const r=`timecodes_${e}_${t}`,n=this.fallbackStorage.get(r);return n&&n.questions?n.questions.sort(((e,t)=>(e.time||0)-(t.time||0))):[]}try{const r=await this.getTransaction(["timecodes"]);if(!r){const r=`timecodes_${e}_${t}`,n=this.fallbackStorage.get(r);return n&&n.questions?n.questions.sort(((e,t)=>(e.time||0)-(t.time||0))):[]}const n=r.objectStore("timecodes").index("episode_slug");return new Promise(((r,i)=>{const s=n.getAll(e);s.onsuccess=()=>{const e=s.result.filter((e=>e.lang===t)).sort(((e,t)=>(e.time||0)-(t.time||0)));r(e)},s.onerror=()=>i(s.error)}))}catch(r){return[]}}async deleteQuestions(e,t){if(this.useFallback){const r=`timecodes_${e}_${t}`;return this.fallbackStorage.delete(r),!0}try{const r=await this.getTransaction(["timecodes"],"readwrite");if(!r){const r=`timecodes_${e}_${t}`;return this.fallbackStorage.delete(r),!0}const n=r.objectStore("timecodes"),i=n.index("episode_slug");return new Promise(((r,s)=>{const a=i.getAll(e);a.onsuccess=()=>{const e=a.result.filter((e=>e.lang===t));if(0===e.length)return void r(!0);const i=e.map((e=>new Promise(((t,r)=>{const i=n.delete(e.id);i.onsuccess=()=>t(),i.onerror=()=>r(i.error)}))));Promise.all(i).then(r).catch(s)},a.onerror=()=>s(a.error)}))}catch(r){return!1}}async saveAudioFileMetadata(e,t,r=null){if(this.useFallback)return e;const n=await this.getTransaction(["audioFiles"],"readwrite");if(!n)return e;const i=n.objectStore("audioFiles"),s={url:e,episode_slug:t,size:r,cached_at:Date.now(),last_accessed:Date.now()};return new Promise(((e,t)=>{const r=i.put(s);r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)}))}async getAudioFileMetadata(e){if(this.useFallback)return null;const t=await this.getTransaction(["audioFiles"]);if(!t)return null;const r=t.objectStore("audioFiles");return new Promise(((t,n)=>{const i=r.get(e);i.onsuccess=()=>t(i.result),i.onerror=()=>n(i.error)}))}async updateAudioFileAccess(e){if(this.useFallback)return;const t=await this.getTransaction(["audioFiles"],"readwrite");if(!t)return;const r=t.objectStore("audioFiles");return new Promise(((t,n)=>{const i=r.get(e);i.onsuccess=()=>{const e=i.result;if(e){e.last_accessed=Date.now();const i=r.put(e);i.onsuccess=()=>t(),i.onerror=()=>n(i.error)}else t()},i.onerror=()=>n(i.error)}))}async addToSyncQueue(e,t,r="update"){if(this.useFallback){const n=`sync_${Date.now()}_${Math.random()}`,i={id:n,type:e,operation:r,data:t,timestamp:Date.now(),attempts:0,max_attempts:3};return this.fallbackStorage.set(n,i),n}try{const n=(await this.getTransaction(["syncQueue"],"readwrite")).objectStore("syncQueue"),i={type:e,operation:r,data:t,timestamp:Date.now(),attempts:0,max_attempts:3};return new Promise(((e,t)=>{const r=n.add(i);r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)}))}catch(n){throw n}}async getSyncQueue(){if(this.useFallback){const e=[];for(const[t,r]of this.fallbackStorage.entries())t.startsWith("sync_")&&e.push(r);return e.sort(((e,t)=>e.timestamp-t.timestamp))}try{const e=await this.getTransaction(["syncQueue"]);if(!e){if(this.useFallback){const e=[];for(const[t,r]of this.fallbackStorage.entries())t.startsWith("sync_")&&e.push(r);return e.sort(((e,t)=>e.timestamp-t.timestamp))}throw new Error("Failed to get transaction")}const t=e.objectStore("syncQueue");return new Promise(((e,r)=>{const n=t.getAll();n.onsuccess=()=>e(n.result),n.onerror=()=>r(n.error)}))}catch(e){this.compactLog(" Falling back to fallback storage for sync queue","fallback"),this.useFallback=!0;const t=[];for(const[r,n]of this.fallbackStorage.entries())r.startsWith("sync_")&&t.push(n);return t.sort(((e,t)=>e.timestamp-t.timestamp))}}async removeSyncItem(e){const t=await this.getTransaction(["syncQueue"],"readwrite");if(!t)return;const r=t.objectStore("syncQueue");return new Promise(((t,n)=>{const i=r.delete(e);i.onsuccess=()=>t(),i.onerror=()=>n(i.error)}))}async incrementSyncAttempts(e){const t=await this.getTransaction(["syncQueue"],"readwrite");if(!t)return null;const r=t.objectStore("syncQueue");return new Promise(((t,n)=>{const i=r.get(e);i.onsuccess=()=>{const e=i.result;if(e){e.attempts+=1,e.last_attempt=Date.now();const i=r.put(e);i.onsuccess=()=>t(e),i.onerror=()=>n(i.error)}else t(null)},i.onerror=()=>n(i.error)}))}async saveCacheSetting(e,t){const r=await this.getTransaction(["cacheSettings"],"readwrite");if(!r)return;const n=r.objectStore("cacheSettings");return new Promise(((r,i)=>{const s=n.put({key:e,value:t,updated_at:Date.now()});s.onsuccess=()=>r(),s.onerror=()=>i(s.error)}))}async getCacheSetting(e,t=null){const r=await this.getTransaction(["cacheSettings"]);if(!r)return t;const n=r.objectStore("cacheSettings");return new Promise(((r,i)=>{const s=n.get(e);s.onsuccess=()=>{const e=s.result;r(e?e.value:t)},s.onerror=()=>i(s.error)}))}async clearExpiredData(e=6048e5){const t=Date.now()-e,r=["episodes","transcripts","timecodes","audioFiles"];for(const n of r){const e=await this.getTransaction([n],"readwrite");if(!e)continue;const r=e.objectStore(n);await new Promise(((e,n)=>{const i=r.getAll();i.onsuccess=()=>{const s=i.result.filter((e=>e.cached_at&&e.cached_at<t)).map((e=>new Promise(((t,n)=>{const i=r.delete(e.id||e.slug||e.url);i.onsuccess=()=>t(),i.onerror=()=>n(i.error)}))));Promise.all(s).then(e).catch(n)},i.onerror=()=>n(i.error)}))}}async getStorageUsage(){try{if(this.useFallback)return{audioSize:0,dataSize:0,episodeCount:this.fallbackStorage.size,transcriptCount:0,questionCount:0,syncQueueCount:0};const t={audioSize:0,dataSize:0,episodeCount:0,transcriptCount:0,questionCount:0,syncQueueCount:0};try{const e=await this.getTransaction(["episodes"]);if(e){const r=e.objectStore("episodes").count();r.onsuccess=()=>{t.episodeCount=r.result}}}catch(e){}try{const e=await this.getTransaction(["transcripts"]);if(e){const r=e.objectStore("transcripts").count();r.onsuccess=()=>{t.transcriptCount=r.result}}}catch(e){}try{const e=await this.getTransaction(["timecodes"]);if(e){const r=e.objectStore("timecodes").count();r.onsuccess=()=>{t.questionCount=r.result}}}catch(e){}try{const e=await this.getTransaction(["syncQueue"]);if(e){const r=e.objectStore("syncQueue").count();r.onsuccess=()=>{t.syncQueueCount=r.result}}}catch(e){}return t.dataSize=1024*t.episodeCount+5120*t.transcriptCount+512*t.questionCount,t}catch(e){return{audioSize:0,dataSize:0,episodeCount:0,transcriptCount:0,questionCount:0,syncQueueCount:0}}}async deleteEpisode(e){if(this.useFallback){const t=`episode_${e}`;return this.fallbackStorage.delete(t),!0}try{const t=await this.getTransaction(["episodes"],"readwrite");if(!t)return!1;const r=t.objectStore("episodes");return new Promise(((t,n)=>{const i=r.delete(e);i.onsuccess=()=>t(!0),i.onerror=()=>n(i.error)}))}catch(t){throw t}}close(){this.db&&(this.db.close(),this.db=null)}};const hL=new class{constructor(){this.isOnline=navigator.onLine,this.syncInProgress=!1,this.syncListeners=[],this.networkListeners=[],this.lastNetworkCheck=Date.now(),this.initNetworkListeners(),this.setupAutoSync()}initNetworkListeners(){window.addEventListener("online",(()=>{VO.info("[Sync] Network connection restored"),this.isOnline=!0,this.lastNetworkCheck=Date.now(),this.notifyNetworkListeners(!0),this.syncOfflineChanges()})),window.addEventListener("offline",(()=>{VO.warn("[Sync] Network connection lost"),this.isOnline=!1,this.lastNetworkCheck=Date.now(),this.notifyNetworkListeners(!1)})),setInterval((()=>{this.checkConnection()}),3e4)}setupAutoSync(){this.isOnline&&setTimeout((()=>this.syncOfflineChanges()),1e3),setInterval((()=>{this.isOnline&&!this.syncInProgress&&this.syncOfflineChanges()}),3e5)}async checkConnection(){try{const e=new AbortController,t=setTimeout((()=>e.abort()),5e3),r=await fetch("/ping",{method:"HEAD",cache:"no-cache",signal:e.signal});clearTimeout(t);const n=this.isOnline;this.isOnline=r.ok,this.lastNetworkCheck=Date.now(),!n&&this.isOnline?(VO.info("[Sync] Connection restored via ping"),this.notifyNetworkListeners(!0),this.syncOfflineChanges()):n&&!this.isOnline&&(VO.warn("[Sync] Connection lost via ping"),this.notifyNetworkListeners(!1))}catch(e){this.isOnline&&(VO.warn("[Sync] Connection lost via ping error"),this.isOnline=!1,this.notifyNetworkListeners(!1)),this.lastNetworkCheck=Date.now()}}notifyNetworkListeners(e){this.networkListeners.forEach((t=>{try{t(e)}catch(r){}}))}notifySyncListeners(e,t=null){this.syncListeners.forEach((r=>{try{r(e,t)}catch(n){}}))}async saveData(e,t,r="update"){try{await dL.init()}catch(n){throw VO.error("[Sync] Failed to initialize offline service:",n),new Error(`    : ${n.message}`)}try{switch(e){case"episode":await dL.saveEpisode(t);break;case"transcript":await dL.saveTranscript(t);break;case"timecodes":await dL.saveQuestions(t.questions,t.episodeSlug,t.lang);break;default:throw new Error(`  : ${e}`)}if(this.isOnline)try{await this.syncDataToServer(e,t,r)}catch(n){VO.warn("[Sync] Immediate sync failed, adding to queue:",n),await dL.addToSyncQueue(e,t,r)}else await dL.addToSyncQueue(e,t,r);return{success:!0,offline:!this.isOnline}}catch(n){if(VO.error("[Sync] Failed to save data:",n),"transcript"===e&&!uL(t))throw VO.error("[Sync] Cannot add invalid transcript to sync queue:",t.id),new Error(`Invalid transcript ID: ${t.id}. Cannot sync invalid data.`);try{await dL.addToSyncQueue(e,t,r),VO.info("[Sync] Data added to sync queue after local save failure")}catch(i){VO.error("[Sync] Failed to add to sync queue:",i)}throw n}}async loadData(e,t){var r,n,i;await dL.init();try{if(this.isOnline)try{const s=await this.loadDataFromServer(e,t);switch(e){case"episode":s&&"object"==typeof s&&s.slug&&await dL.saveEpisode(s);break;case"transcript":if(s&&"object"==typeof s){const e={id:s.id,episode_slug:s.episode_slug||t.episodeSlug,lang:s.lang||t.lang,utterances:Array.isArray(s.utterances)?s.utterances:(null==(r=s.edited_transcript_data)?void 0:r.utterances)||[],words:Array.isArray(s.words)?s.words:(null==(n=s.edited_transcript_data)?void 0:n.words)||[],text:s.text||(null==(i=s.edited_transcript_data)?void 0:i.text)||"",status:s.status||"completed",created_at:s.created_at||(new Date).toISOString(),updated_at:s.updated_at||(new Date).toISOString(),edited_transcript_data:s.edited_transcript_data||null};await dL.saveTranscript(e)}break;case"timecodes":Array.isArray(s)?await dL.saveQuestions(s,t.episodeSlug,t.lang):await dL.saveQuestions([],t.episodeSlug,t.lang)}return{data:s,source:"server"}}catch(s){s.message.includes("HTTP2")||s.message.includes("ERR_HTTP2_PROTOCOL_ERROR")||s.message.includes("Failed to fetch")?VO.warn("[Sync] HTTP/2 protocol error detected, falling back to cache:",{error:s.message,type:e,params:t}):VO.warn("[Sync] Server load failed, trying cache:",s)}let o;try{switch(e){case"episode":o=await dL.getEpisode(t.slug);break;case"transcript":o=await dL.getTranscript(t.episodeSlug,t.lang);break;case"timecodes":o=await dL.getQuestions(t.episodeSlug,t.lang);break;case"episodes":o=await dL.getAllEpisodes()}}catch(a){VO.warn(`[Sync] Cache load failed for ${e}:`,a),o=null}if(o)return{data:o,source:"cache"};throw new Error(`No ${e} data available offline`)}catch(s){throw VO.error(`[Sync] Failed to load ${e}:`,s),s}}async syncDataToServer(e,t,r){switch(e){case"transcript":return await this.syncTranscriptToServer(t,r);case"timecodes":return await this.syncQuestionsToServer(t,r);case"episode":return await this.syncEpisodeToServer(t,r);default:throw new Error(`Unknown sync type: ${e}`)}}async loadDataFromServer(e,t){const r=async(e,t=3)=>{for(let n=1;n<=t;n++)try{return await e()}catch(r){if((r.message.includes("HTTP2")||r.message.includes("ERR_HTTP2_PROTOCOL_ERROR")||r.message.includes("Failed to fetch"))&&n<t){VO.warn(`[Sync] HTTP/2 error on attempt ${n}/${t}, retrying...:`,r.message),await new Promise((e=>setTimeout(e,500*Math.pow(2,n-1))));continue}throw r}};switch(e){case"episode":{const e=async()=>{const{data:e,error:r}=await uS.from("episodes").select("\n              slug,\n              date,\n              created_at,\n              transcripts (\n                title,\n                lang\n              ),\n              episode_audios (\n                audio_url,\n                lang,\n                duration\n              )\n            ").eq("slug",t.slug).maybeSingle();if(r)throw r;if(!e)throw new Error("Episode not found on server");const n=e.transcripts||[],i=e.episode_audios||[],s=t.lang||"es";t.slug;const a=n.find((e=>e.lang===s))||n.find((e=>"es"===e.lang))||n[0],o=i.find((e=>e.lang===s))||i.find((e=>"es"===e.lang))||i.find((e=>"mixed"===e.lang))||i[0],l={slug:e.slug,date:e.date,created_at:e.created_at,title:(null==a?void 0:a.title)||e.slug,translations:n,lang:(null==o?void 0:o.lang)||"mixed",audio_url:null==o?void 0:o.audio_url,duration:(null==o?void 0:o.duration)||0,available_variants:i.map((e=>e.lang)).filter(Boolean),audio_variants:i};if(l.slug)return l;throw new Error("Invalid episode data received from server")};return await r(e)}case"transcript":{const e=async()=>{const{data:e,error:r}=await uS.from("transcripts").select("id, episode_slug, lang, status, created_at, updated_at, edited_transcript_data").eq("episode_slug",t.episodeSlug).eq("lang",t.lang).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(r)throw r;if(e&&"object"==typeof e){const r=e.edited_transcript_data||{};return{id:e.id,episode_slug:e.episode_slug||t.episodeSlug,lang:e.lang||t.lang,utterances:Array.isArray(r.utterances)?r.utterances:[],words:Array.isArray(r.words)?r.words:[],text:r.text||"",status:e.status||"completed",created_at:e.created_at||(new Date).toISOString(),updated_at:e.updated_at||(new Date).toISOString(),edited_transcript_data:e.edited_transcript_data}}return e};return await r(e)}case"timecodes":{const e=async()=>{const{data:e,error:r}=await uS.from("timecodes").select("*").eq("episode_slug",t.episodeSlug).eq("lang",t.lang).order("time",{ascending:!0});if(r)throw r;return Array.isArray(e)?e.filter((e=>e&&"object"==typeof e&&(e.id||void 0!==e.time)&&e.lang===t.lang)):e||[]};return await r(e)}case"episodes":{const e=async()=>{const{data:e,error:t}=await uS.from("episodes").select("\n              *,\n              transcripts (\n                lang,\n                title\n              ),\n              episode_audios (\n                lang,\n                audio_url,\n                duration\n              )\n            ").order("date",{ascending:!1});if(t)throw t;return Array.isArray(e)?e.map((e=>({...e,translations:e.transcripts||[],audios:e.episode_audios||[]}))).filter((e=>e&&"object"==typeof e&&e.slug)):e||[]};return await r(e)}default:throw new Error(`Unknown load type: ${e}`)}}async syncTranscriptToServer(e,t){switch(t){case"update":{if(!uL(e))throw new Error(`Invalid transcript ID: ${e.id}. ID must be a valid integer.`);const t={utterances:(e.utterances||[]).map((e=>{const t={start:e.start,end:e.end,text:e.text};return void 0!==e.id&&(t.id=e.id),void 0!==e.speaker&&null!==e.speaker&&""!==String(e.speaker).trim()&&(t.speaker=e.speaker),t}))};let r=0;const n=3;for(;r<n;)try{const{error:r}=await uS.from("transcripts").update({edited_transcript_data:t}).eq("id",Number(e.id));if(r)throw r;break}catch(mEe){if(r++,r>=n)throw mEe;await new Promise((e=>setTimeout(e,1e3*r)))}break}case"create":{const{error:t}=await uS.from("transcripts").insert(e);if(t)throw t;break}default:throw new Error(`Unknown transcript operation: ${t}`)}}async syncQuestionsToServer(e,t){switch(t){case"update":case"create":{const{error:t}=await uS.from("timecodes").delete().eq("episode_slug",e.episodeSlug).eq("lang",e.lang);if(t)throw t;if(e.questions&&e.questions.length>0){const{error:t}=await uS.from("timecodes").insert(e.questions);if(t)throw t}break}default:throw new Error(`Unknown questions operation: ${t}`)}}async syncEpisodeToServer(e,t){switch(t){case"update":{const{error:t}=await uS.from("episodes").update(e).eq("slug",e.slug);if(t)throw t;break}case"create":{const{error:t}=await uS.from("episodes").insert(e);if(t)throw t;break}default:throw new Error(`Unknown episode operation: ${t}`)}}async syncOfflineChanges(){if(!this.syncInProgress&&this.isOnline){this.syncInProgress=!0,this.notifySyncListeners("sync_start");try{await dL.init();const t=await dL.getSyncQueue();VO.info(`[Sync] Processing ${t.length} offline changes`);let r=0,n=0;for(const i of t)try{await this.syncDataToServer(i.type,i.data,i.operation),await dL.removeSyncItem(i.id),r++,this.notifySyncListeners("sync_item_success",{type:i.type,operation:i.operation})}catch(e){VO.error(`[Sync] Failed to sync ${i.type}:`,e);const t=await dL.incrementSyncAttempts(i.id);t&&t.attempts>=t.max_attempts&&(VO.warn(`[Sync] Max attempts reached for ${i.type}, removing from queue`),await dL.removeSyncItem(i.id)),n++,this.notifySyncListeners("sync_item_error",{type:i.type,operation:i.operation,error:e.message})}VO.info(`[Sync] Completed: ${r} success, ${n} errors`),this.notifySyncListeners("sync_complete",{successCount:r,errorCount:n,totalCount:t.length})}catch(e){VO.error("[Sync] Sync process failed:",e),this.notifySyncListeners("sync_error",{error:e.message})}finally{this.syncInProgress=!1}}}async forcSync(){if(!this.isOnline)throw new Error("Cannot sync while offline");return this.syncOfflineChanges()}async cleanupOldData(e=6048e5){await dL.init(),await dL.clearExpiredData(e),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CLEAR_OLD_CACHE",maxAge:e})}async getStorageStats(){return await dL.init(),await dL.getStorageUsage()}getNetworkStatus(){var e;return{isOnline:this.isOnline,lastCheck:this.lastNetworkCheck,connectionType:(null==(e=navigator.connection)?void 0:e.type)||"unknown"}}onNetworkChange(e){return this.networkListeners.push(e),()=>{const t=this.networkListeners.indexOf(e);t>-1&&this.networkListeners.splice(t,1)}}onSyncChange(e){return this.syncListeners.push(e),()=>{const t=this.syncListeners.indexOf(e);t>-1&&this.syncListeners.splice(t,1)}}};const fL=new class{constructor(){this.cacheInProgress=new Set,this.maxCacheSize=this.getMaxCacheSize(),this.downloadListeners=[]}getMaxCacheSize(){const e=localStorage.getItem("audioCacheMaxSize");return e?parseInt(e,10):1073741824}setMaxCacheSize(e){this.maxCacheSize=e,localStorage.setItem("audioCacheMaxSize",e.toString())}onDownloadProgress(e){return this.downloadListeners.push(e),()=>{this.downloadListeners=this.downloadListeners.filter((t=>t!==e))}}notifyDownloadListeners(e,t={}){this.downloadListeners.forEach((r=>{try{r(e,t)}catch(n){}}))}async isAudioCached(e){try{if("caches"in window){const t=await caches.open("audio-v1");if(await t.match(e))return!0}await dL.init();return!!(await dL.getAudioFileMetadata(e))}catch(t){return!1}}async getCachedAudioSize(e){try{await dL.init();const t=await dL.getAudioFileMetadata(e);return t?t.size:0}catch(t){return 0}}async cacheAudio(e,t,r=!1){if(this.cacheInProgress.has(e))return!1;if(!e||"string"!=typeof e||!e.startsWith("http"))return!1;if(!r&&await this.isAudioCached(e))return await dL.updateAudioFileAccess(e),!0;this.cacheInProgress.add(e);try{await dL.init(),this.notifyDownloadListeners("download_start",{url:e,episodeSlug:t});const r=await dL.getStorageUsage();if(r.quota-r.usage<52428800)throw new Error("Insufficient storage space");const n=await this.fetchWithProgress(e,((r,n)=>{const i=n>0?Math.round(r/n*100):0;this.notifyDownloadListeners("download_progress",{url:e,episodeSlug:t,loaded:r,total:n,progress:i})}));if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const i=n.headers.get("content-length"),s=i?parseInt(i):0;if(s>.5*this.maxCacheSize)throw new Error("File too large for caching");if("caches"in window){const t=await caches.open("audio-v1");await this.manageCacheSize(t,s),await t.put(e,n.clone())}return await dL.saveAudioFileMetadata(e,t,s),this.notifyDownloadListeners("download_complete",{url:e,episodeSlug:t,size:s}),!0}catch(n){throw this.notifyDownloadListeners("download_error",{url:e,episodeSlug:t,error:n.message}),n}finally{this.cacheInProgress.delete(e)}}async fetchWithProgress(e,t,r=2){let n;for(let s=0;s<=r;s++)try{const n={};e.includes("dosmundos.pe")&&(n.mode="cors",n.credentials="omit",n.headers={Connection:"keep-alive","User-Agent":"DosMundos-Podcast-App/1.0"});const i=await fetch(e,n);if(!i.ok){if(s<r){await new Promise((e=>setTimeout(e,1e3*(s+1))));continue}throw new Error(`HTTP ${i.status}: ${i.statusText}`)}if(!i.body)return i;const a=i.headers.get("content-length"),o=a?parseInt(a):0;let l=0;const c=i.body.getReader(),u=[];for(;;){const{done:e,value:r}=await c.read();if(e)break;u.push(r),l+=r.length,t&&t(l,o)}const d=new Uint8Array(l);let h=0;for(const e of u)d.set(e,h),h+=e.length;return new Response(d,{status:i.status,statusText:i.statusText,headers:i.headers})}catch(i){if(n=i,s<r&&(i.message.includes("Failed to fetch")||i.message.includes("NetworkError")||i.message.includes("ERR_CONNECTION_RESET")||"TypeError"===i.name)){await new Promise((e=>setTimeout(e,2e3*(s+1))));continue}break}throw n}async manageCacheSize(e,t){try{const r=await e.keys();let n=t;const i=[];for(const t of r){const r=await e.match(t);if(r){const e=await this.getResponseSize(r);n+=e,i.push({request:t,size:e,url:t.url})}}if(n>this.maxCacheSize){await dL.init();const t=[];for(const e of i){const r=await dL.getAudioFileMetadata(e.url);t.push({...e,lastAccessed:r?r.last_accessed:0})}t.sort(((e,t)=>e.lastAccessed-t.lastAccessed));let r=0;const n=.3*this.maxCacheSize;for(const i of t){if(r>=n)break;await e.delete(i.request);const t=await dL.getTransaction(["audioFiles"],"readwrite");if(t){const e=t.objectStore("audioFiles");await new Promise(((t,r)=>{const n=e.delete(i.url);n.onsuccess=()=>t(),n.onerror=()=>r(n.error)}))}r+=i.size}}}catch(r){}}async getResponseSize(e){try{const t=e.headers.get("content-length");if(t)return parseInt(t);const r=e.clone();return(await r.arrayBuffer()).byteLength}catch(t){return 0}}async removeAudioFromCache(e){try{if("caches"in window){const t=await caches.open("audio-v1");await t.delete(e)}await dL.init();const t=await dL.getTransaction(["audioFiles"],"readwrite");if(!t)return this.notifyDownloadListeners("remove_complete",{url:e}),!0;const r=t.objectStore("audioFiles");return await new Promise(((t,n)=>{const i=r.delete(e);i.onsuccess=()=>t(),i.onerror=()=>n(i.error)})),this.notifyDownloadListeners("remove_complete",{url:e}),!0}catch(t){return this.notifyDownloadListeners("remove_error",{url:e,error:t.message}),!1}}async getCachedAudioList(){try{await dL.init();const e=(await dL.getTransaction(["audioFiles"])).objectStore("audioFiles");return new Promise(((t,r)=>{const n=e.getAll();n.onsuccess=()=>t(n.result),n.onerror=()=>r(n.error)}))}catch(e){return[]}}async getCacheSize(){try{return(await this.getCachedAudioList()).reduce(((e,t)=>e+(t.size||0)),0)}catch(e){return 0}}async clearCache(){try{"caches"in window&&await caches.delete("audio-v1"),await dL.init();const e=(await dL.getTransaction(["audioFiles"],"readwrite")).objectStore("audioFiles");return await new Promise(((t,r)=>{const n=e.clear();n.onsuccess=()=>t(),n.onerror=()=>r(n.error)})),!0}catch(e){return!1}}async preloadAudio(e){if(!e.audio_url)return!1;try{return await this.cacheAudio(e.audio_url,e.slug)}catch(t){return!1}}async updateLastAccessed(e){try{await dL.init(),await dL.updateAudioFileAccess(e)}catch(t){}}async getCacheStats(){try{const e=await this.getCachedAudioList(),t=e.reduce(((e,t)=>e+(t.size||0)),0),r=await dL.getStorageUsage();return{fileCount:e.length,totalSize:t,maxSize:this.maxCacheSize,usagePercentage:Math.round(t/this.maxCacheSize*100),storageQuota:r.quota,storageUsage:r.usage,files:e.map((e=>({url:e.url,episodeSlug:e.episode_slug,size:e.size,cachedAt:e.cached_at,lastAccessed:e.last_accessed})))}}catch(e){return{fileCount:0,totalSize:0,maxSize:this.maxCacheSize,usagePercentage:0,storageQuota:0,storageUsage:0,files:[]}}}async refreshCachedAudio(e){try{await this.removeAudioFromCache(e),await dL.init();const t=await dL.getAudioFileMetadata(e);return!!t&&await this.cacheAudio(e,t.episode_slug,!0)}catch(t){return!1}}};"undefined"!=typeof window&&(window.audioCacheService=fL);const pL=(e,t,r)=>{const[n,i]=q.useState(null),[s,a]=q.useState([]),[o,l]=q.useState(null),[c,u]=q.useState(!0),[d,h]=q.useState(!1),[f,p]=q.useState(!1),[g,m]=q.useState(null),[y,v]=q.useState(Date.now()),[b,w]=q.useState(!1);q.useEffect((()=>{(async()=>{try{await dL.init()}catch(e){}})();const t=hL.onNetworkChange((t=>{w(!t),t&&e&&A()}));return w(!hL.getNetworkStatus().isOnline),t}),[e]);const x=q.useCallback((async e=>{if(e){u(!0),m(null);try{const r=await hL.loadData("episode",{slug:e,lang:t});r.data&&"object"==typeof r.data&&r.data.slug?(i(r.data),r.source):m(iy("invalidEpisodeData",t)||"Invalid episode data received")}catch(n){m(iy("errorLoadingEpisode",t)||"Error loading episode data"),b&&r({title:iy("offlineDataUnavailable",t)||"Offline data unavailable",description:iy("episodeNotCached",t)||"Episode is not cached for offline use",variant:"destructive"})}finally{u(!1)}}}),[t,r,b]),S=q.useCallback((async(e,n)=>{if(e){p(!0);try{const t=await hL.loadData("transcript",{episodeSlug:e,lang:n});if(t.data&&"object"==typeof t.data){const e=t.data;let r=[],n=[],i="";e.edited_transcript_data&&e.edited_transcript_data.utterances?r=Array.isArray(e.edited_transcript_data.utterances)?e.edited_transcript_data.utterances:[]:e.utterances&&(r=Array.isArray(e.utterances)?e.utterances:[]),e.edited_transcript_data&&e.edited_transcript_data.words?n=Array.isArray(e.edited_transcript_data.words)?e.edited_transcript_data.words:[]:e.words&&(n=Array.isArray(e.words)?e.words:[]),e.edited_transcript_data&&e.edited_transcript_data.text?i=e.edited_transcript_data.text:e.text?i=e.text:r.length>0&&(i=r.map((e=>e.text||"")).join(" ")),l({id:e.id,utterances:r,words:n,text:i,status:e.status||"completed"})}else l(null)}catch(i){l(null),b&&r({title:iy("transcriptUnavailableOffline",t)||"Transcript unavailable offline",description:iy("transcriptNotCached",t)||"Transcript is not cached for offline use",variant:"destructive"})}finally{p(!1)}}}),[t,r,b]),E=q.useCallback((async(e,n)=>{if(e){h(!0);try{let t=(await hL.loadData("timecodes",{episodeSlug:e,lang:n})).data||[];Array.isArray(t)||(t=[]),t=t.filter((e=>e&&"object"==typeof e&&(e.id||void 0!==e.time)&&e.lang===n));const r=e=>(e||"").trim().toLowerCase(),i=new Set,s=[];for(const e of t){const t=`${r(e.title)}|${Math.round(Number(e.time||0))}`;i.has(t)||(i.add(t),s.push(e))}const o=new Map;for(const e of s)o.has(e.id)||o.set(e.id,e);t=Array.from(o.values());if(!t.some((e=>e.is_intro&&0===e.time))){t=[{id:"intro-virtual",time:0,title:iy("introduction",n)||"Introduction",lang:n,is_intro:!0,episode_slug:e,created_at:(new Date).toISOString()},...t]}a(t)}catch(i){a([]),b&&r({title:iy("questionsUnavailableOffline",t)||"Questions unavailable offline",description:iy("questionsNotCached",t)||"Questions are not cached for offline use",variant:"destructive"})}finally{h(!1)}}}),[t,r,b]),T=q.useCallback((async n=>{if(!(null==o?void 0:o.id))return;const i=(e=>{if(!e)return Date.now();const t=Number(e);return!isNaN(t)&&t>0?t:Date.now()})(o.id);o.id;try{let s,a,c;n.utterances?(s=n.utterances,a=n.words||o.words||[],c=s.map((e=>e.text)).join(" ")):Array.isArray(n)?(s=n,a=o.words||[],c=s.map((e=>e.text)).join(" ")):(s=n.utterances||[],a=n.words||o.words||[],c=n.text||s.map((e=>e.text)).join(" "));const u=cL({id:i,episode_slug:e,lang:t,utterances:s,words:a,text:c});await hL.saveData("transcript",u,"update"),l((e=>({...e,utterances:s,words:a,text:c}))),r(b?{title:iy("savedOffline",t),description:iy("transcriptSavedOffline",t),className:"bg-yellow-600/80 border-yellow-500 text-white"}:{title:iy("transcriptSaved",t),description:iy("transcriptSavedSuccessfully",t),className:"bg-green-600/80 border-green-500 text-white"})}catch(s){r({title:iy("saveError",t),description:s.message,variant:"destructive"})}}),[o,e,t,b,r]),k=q.useCallback((async(n,i)=>{try{const s={questions:n.filter((e=>"intro-virtual"!==e.id&&"full-transcript-virtual"!==e.id)),episodeSlug:e,lang:i};await hL.saveData("timecodes",s,"update"),a(n),v(Date.now()),r(b?{title:iy("savedOffline",t),description:iy("questionsSavedOffline",t),className:"bg-yellow-600/80 border-yellow-500 text-white"}:{title:iy("questionsSaved",t),description:iy("questionsSavedSuccessfully",t),className:"bg-green-600/80 border-green-500 text-white"})}catch(s){r({title:iy("saveError",t),description:s.message,variant:"destructive"})}}),[e,t,b,r]),A=q.useCallback((async()=>{if(!e)return;const i="all"===(null==n?void 0:n.lang)?t:(null==n?void 0:n.lang)||t;try{await Promise.allSettled([x(e),S(e,i),E(e,t)])}catch(s){r({title:iy("refreshError",t)||"Refresh error",description:iy("failedToRefreshData",t)||"Failed to refresh some data",variant:"destructive"})}}),[e,null==n?void 0:n.lang,t,x,S,E,r]),_=q.useCallback((async()=>{if(null==n?void 0:n.audio_url)try{await fL.isAudioCached(n.audio_url)||await fL.preloadAudio(n)}catch(e){}}),[n]);return q.useEffect((()=>{e&&x(e)}),[e,x]),q.useEffect((()=>{if(!n||!e)return;const r=t;(async()=>{try{await Promise.allSettled([S(e,r),E(e,t)])}catch(n){}})()}),[n,e,t,S,E]),{episodeData:n,questions:s,transcript:o,loading:c,questionsLoading:d,transcriptLoading:f,error:g,questionsUpdatedId:y,isOfflineMode:b,saveEditedTranscript:T,saveQuestions:k,refreshAllData:A,preloadAudio:_,setTranscript:l,fetchTranscriptForEpisode:S,fetchQuestionsForEpisode:E}},gL=({isOpen:e,onClose:t,segment:r,onSave:n,currentLanguage:i,audioRef:s,mainPlayerIsPlaying:a,mainPlayerTogglePlayPause:o,mainPlayerSeekAudio:l,duration:c})=>{const[u,d]=q.useState(""),[h,f]=q.useState(0),[p,g]=q.useState(!1);q.useEffect((()=>{r&&(f(r.start/1e3),d(""))}),[r]);return r?Z.jsx(yT,{open:e,onOpenChange:t,children:Z.jsxs(wT,{className:"bg-slate-900 border-slate-800 text-white sm:max-w-md shadow-2xl rounded-xl",children:[Z.jsxs(xT,{children:[Z.jsx(ET,{className:"text-xl font-semibold text-purple-300",children:iy("addQuestionDialogTitle",i)}),Z.jsx(TT,{className:"text-sm text-slate-400",children:iy("addQuestionDialogDescriptionSegment",i,{segmentText:r.text.substring(0,70)+"..."})})]}),Z.jsxs("div",{className:"grid gap-5 py-4",children:[Z.jsxs("div",{className:"space-y-2",children:[Z.jsx(RT,{htmlFor:"qfs-time",className:"text-slate-300 font-medium",children:iy("questionTime",i)}),Z.jsx("div",{className:"flex items-center gap-2",children:Z.jsx(_T,{id:"qfs-time",type:"text",value:Tm(h,!0),onFocus:()=>g(!0),onBlur:()=>g(!1),onChange:e=>{const t=e.target.value.split(":").map(Number);let r=0;if(3===t.length)r=3600*t[0]+60*t[1]+t[2];else if(2===t.length)r=60*t[0]+t[1];else{if(1!==t.length||isNaN(t[0]))return void f(NaN);r=t[0]}!isNaN(r)&&r>=0&&r<=(c||1/0)?(f(r),l&&l(r,!1)):""===e.target.value&&f(0)},className:"bg-slate-800 border-slate-700 focus:border-purple-500 focus:ring-purple-500 col-span-3 tabular-nums",placeholder:"HH:MM:SS"})}),Z.jsx(Ek,{variant:"timeAdjustment",isPlaying:a,onPlayPause:o,onAdjustTime:e=>{const t=Math.max(0,Math.min(c||1/0,h+e));f(t),l&&l(t,!0)},currentTime:h,mainPlayerSeekAudio:l,currentLanguage:i})]}),Z.jsxs("div",{className:"space-y-2",children:[Z.jsx(RT,{htmlFor:"qfs-title",className:"text-slate-300 font-medium",children:iy("questionTitle",i)}),Z.jsx(_T,{id:"qfs-title",value:u,onChange:e=>d(e.target.value),className:"bg-slate-800 border-slate-700 focus:border-purple-500 focus:ring-purple-500",placeholder:iy("questionTitlePlaceholder",i)})]})]}),Z.jsxs(ST,{className:"flex flex-col-reverse sm:flex-row justify-end items-center mt-4 pt-4 border-t border-slate-700/50",children:[Z.jsx(AT,{variant:"outline",onClick:t,className:"bg-slate-700 hover:bg-slate-600 border-slate-600 text-slate-300 w-full sm:w-auto mb-2 sm:mb-0 sm:mr-2",children:iy("cancel",i)}),Z.jsxs(AT,{onClick:()=>{u.trim()&&n(u,h)},className:"bg-purple-600 hover:bg-purple-700 text-white font-semibold w-full sm:w-auto",children:[Z.jsx(pg,{className:"h-4 w-4 mr-2"}),iy("saveQuestion",i)]})]})]})}):null};let mL=0;function yL(e,t){return function(){return e.apply(t,arguments)}}const{toString:vL}=Object.prototype,{getPrototypeOf:bL}=Object,{iterator:wL,toStringTag:xL}=Symbol,SL=(EL=Object.create(null),e=>{const t=vL.call(e);return EL[t]||(EL[t]=t.slice(8,-1).toLowerCase())});var EL;const TL=e=>(e=e.toLowerCase(),t=>SL(t)===e),kL=e=>t=>typeof t===e,{isArray:AL}=Array,_L=kL("undefined");function CL(e){return null!==e&&!_L(e)&&null!==e.constructor&&!_L(e.constructor)&&RL(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const PL=TL("ArrayBuffer");const DL=kL("string"),RL=kL("function"),IL=kL("number"),OL=e=>null!==e&&"object"==typeof e,NL=e=>{if("object"!==SL(e))return!1;const t=bL(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||xL in e||wL in e)},jL=TL("Date"),LL=TL("File"),ML=TL("Blob"),FL=TL("FileList"),UL=TL("URLSearchParams"),[BL,$L,zL,qL]=["ReadableStream","Request","Response","Headers"].map(TL);function VL(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,i;if("object"!=typeof e&&(e=[e]),AL(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{if(CL(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),s=i.length;let a;for(n=0;n<s;n++)a=i[n],t.call(null,e[a],a,e)}}function KL(e,t){if(CL(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n,i=r.length;for(;i-- >0;)if(n=r[i],t===n.toLowerCase())return n;return null}const HL="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,GL=e=>!_L(e)&&e!==HL;const WL=(QL="undefined"!=typeof Uint8Array&&bL(Uint8Array),e=>QL&&e instanceof QL);var QL;const YL=TL("HTMLFormElement"),XL=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),JL=TL("RegExp"),ZL=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};VL(r,((r,i)=>{let s;!1!==(s=t(r,i,e))&&(n[i]=s||r)})),Object.defineProperties(e,n)};const eM=TL("AsyncFunction"),tM=(rM="function"==typeof setImmediate,nM=RL(HL.postMessage),rM?setImmediate:nM?(iM=`axios@${Math.random()}`,sM=[],HL.addEventListener("message",(({source:e,data:t})=>{e===HL&&t===iM&&sM.length&&sM.shift()()}),!1),e=>{sM.push(e),HL.postMessage(iM,"*")}):e=>setTimeout(e));var rM,nM,iM,sM;const aM="undefined"!=typeof queueMicrotask?queueMicrotask.bind(HL):"undefined"!=typeof process&&process.nextTick||tM,oM={isArray:AL,isArrayBuffer:PL,isBuffer:CL,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||RL(e.append)&&("formdata"===(t=SL(e))||"object"===t&&RL(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&PL(e.buffer),t},isString:DL,isNumber:IL,isBoolean:e=>!0===e||!1===e,isObject:OL,isPlainObject:NL,isEmptyObject:e=>{if(!OL(e)||CL(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(Jce){return!1}},isReadableStream:BL,isRequest:$L,isResponse:zL,isHeaders:qL,isUndefined:_L,isDate:jL,isFile:LL,isBlob:ML,isRegExp:JL,isFunction:RL,isStream:e=>OL(e)&&RL(e.pipe),isURLSearchParams:UL,isTypedArray:WL,isFileList:FL,forEach:VL,merge:function e(){const{caseless:t,skipUndefined:r}=GL(this)&&this||{},n={},i=(i,s)=>{const a=t&&KL(n,s)||s;NL(n[a])&&NL(i)?n[a]=e(n[a],i):NL(i)?n[a]=e({},i):AL(i)?n[a]=i.slice():r&&_L(i)||(n[a]=i)};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&VL(arguments[s],i);return n},extend:(e,t,r,{allOwnKeys:n}={})=>(VL(t,((t,n)=>{r&&RL(t)?e[n]=yL(t,r):e[n]=t}),{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let i,s,a;const o={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)a=i[s],n&&!n(a,e,t)||o[a]||(t[a]=e[a],o[a]=!0);e=!1!==r&&bL(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:SL,kindOfTest:TL,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(AL(e))return e;let t=e.length;if(!IL(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[wL]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:YL,hasOwnProperty:XL,hasOwnProp:XL,reduceDescriptors:ZL,freezeMethods:e=>{ZL(e,((t,r)=>{if(RL(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];RL(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach((e=>{r[e]=!0}))};return AL(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:KL,global:HL,isContextDefined:GL,isSpecCompliantForm:function(e){return!!(e&&RL(e.append)&&"FormData"===e[xL]&&e[wL])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(OL(e)){if(t.indexOf(e)>=0)return;if(CL(e))return e;if(!("toJSON"in e)){t[n]=e;const i=AL(e)?[]:{};return VL(e,((e,t)=>{const s=r(e,n+1);!_L(s)&&(i[t]=s)})),t[n]=void 0,i}}return e};return r(e,0)},isAsyncFn:eM,isThenable:e=>e&&(OL(e)||RL(e))&&RL(e.then)&&RL(e.catch),setImmediate:tM,asap:aM,isIterable:e=>null!=e&&RL(e[wL])};function lM(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}oM.inherits(lM,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:oM.toJSONObject(this.config),code:this.code,status:this.status}}});const cM=lM.prototype,uM={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{uM[e]={value:e}})),Object.defineProperties(lM,uM),Object.defineProperty(cM,"isAxiosError",{value:!0}),lM.from=(e,t,r,n,i,s)=>{const a=Object.create(cM);oM.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e));const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return lM.call(a,o,l,r,n,i),e&&null==a.cause&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",s&&Object.assign(a,s),a};function dM(e){return oM.isPlainObject(e)||oM.isArray(e)}function hM(e){return oM.endsWith(e,"[]")?e.slice(0,-2):e}function fM(e,t,r){return e?e.concat(t).map((function(e,t){return e=hM(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}const pM=oM.toFlatObject(oM,{},null,(function(e){return/^is[A-Z]/.test(e)}));function gM(e,t,r){if(!oM.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=oM.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!oM.isUndefined(t[e])}))).metaTokens,i=r.visitor||c,s=r.dots,a=r.indexes,o=(r.Blob||"undefined"!=typeof Blob&&Blob)&&oM.isSpecCompliantForm(t);if(!oM.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(oM.isDate(e))return e.toISOString();if(oM.isBoolean(e))return e.toString();if(!o&&oM.isBlob(e))throw new lM("Blob is not supported. Use a Buffer instead.");return oM.isArrayBuffer(e)||oM.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,i){let o=e;if(e&&!i&&"object"==typeof e)if(oM.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(oM.isArray(e)&&function(e){return oM.isArray(e)&&!e.some(dM)}(e)||(oM.isFileList(e)||oM.endsWith(r,"[]"))&&(o=oM.toArray(e)))return r=hM(r),o.forEach((function(e,n){!oM.isUndefined(e)&&null!==e&&t.append(!0===a?fM([r],n,s):null===a?r:r+"[]",l(e))})),!1;return!!dM(e)||(t.append(fM(i,r,s),l(e)),!1)}const u=[],d=Object.assign(pM,{defaultVisitor:c,convertValue:l,isVisitable:dM});if(!oM.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!oM.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+n.join("."));u.push(r),oM.forEach(r,(function(r,s){!0===(!(oM.isUndefined(r)||null===r)&&i.call(t,r,oM.isString(s)?s.trim():s,n,d))&&e(r,n?n.concat(s):[s])})),u.pop()}}(e),t}function mM(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function yM(e,t){this._pairs=[],e&&gM(e,this,t)}const vM=yM.prototype;function bM(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function wM(e,t,r){if(!t)return e;const n=r&&r.encode||bM;oM.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(s=i?i(t,r):oM.isURLSearchParams(t)?t.toString():new yM(t,r).toString(n),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}vM.append=function(e,t){this._pairs.push([e,t])},vM.toString=function(e){const t=e?function(t){return e.call(this,t,mM)}:mM;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const xM=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){oM.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},SM={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},EM={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:yM,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},TM="undefined"!=typeof window&&"undefined"!=typeof document,kM="object"==typeof navigator&&navigator||void 0,AM=TM&&(!kM||["ReactNative","NativeScript","NS"].indexOf(kM.product)<0),_M="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,CM=TM&&window.location.href||"http://localhost",PM={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:TM,hasStandardBrowserEnv:AM,hasStandardBrowserWebWorkerEnv:_M,navigator:kM,origin:CM},Symbol.toStringTag,{value:"Module"})),...EM};function DM(e){function t(e,r,n,i){let s=e[i++];if("__proto__"===s)return!0;const a=Number.isFinite(+s),o=i>=e.length;if(s=!s&&oM.isArray(n)?n.length:s,o)return oM.hasOwnProp(n,s)?n[s]=[n[s],r]:n[s]=r,!a;n[s]&&oM.isObject(n[s])||(n[s]=[]);return t(e,r,n[s],i)&&oM.isArray(n[s])&&(n[s]=function(e){const t={},r=Object.keys(e);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],t[s]=e[s];return t}(n[s])),!a}if(oM.isFormData(e)&&oM.isFunction(e.entries)){const r={};return oM.forEachEntry(e,((e,n)=>{t(function(e){return oM.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,r,0)})),r}return null}const RM={transitional:SM,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,i=oM.isObject(e);i&&oM.isHTMLForm(e)&&(e=new FormData(e));if(oM.isFormData(e))return n?JSON.stringify(DM(e)):e;if(oM.isArrayBuffer(e)||oM.isBuffer(e)||oM.isStream(e)||oM.isFile(e)||oM.isBlob(e)||oM.isReadableStream(e))return e;if(oM.isArrayBufferView(e))return e.buffer;if(oM.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return gM(e,new PM.classes.URLSearchParams,{visitor:function(e,t,r,n){return PM.isNode&&oM.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((s=oM.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return gM(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||n?(t.setContentType("application/json",!1),function(e,t,r){if(oM.isString(e))try{return(t||JSON.parse)(e),oM.trim(e)}catch(Jce){if("SyntaxError"!==Jce.name)throw Jce}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||RM.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(oM.isResponse(e)||oM.isReadableStream(e))return e;if(e&&oM.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(Jce){if(r){if("SyntaxError"===Jce.name)throw lM.from(Jce,lM.ERR_BAD_RESPONSE,this,null,this.response);throw Jce}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:PM.classes.FormData,Blob:PM.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};oM.forEach(["delete","get","head","post","put","patch"],(e=>{RM.headers[e]={}}));const IM=RM,OM=oM.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),NM=Symbol("internals");function jM(e){return e&&String(e).trim().toLowerCase()}function LM(e){return!1===e||null==e?e:oM.isArray(e)?e.map(LM):String(e)}function MM(e,t,r,n,i){return oM.isFunction(n)?n.call(this,t,r):(i&&(t=r),oM.isString(t)?oM.isString(n)?-1!==t.indexOf(n):oM.isRegExp(n)?n.test(t):void 0:void 0)}class FM{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function i(e,t,r){const i=jM(t);if(!i)throw new Error("header name must be a non-empty string");const s=oM.findKey(n,i);(!s||void 0===n[s]||!0===r||void 0===r&&!1!==n[s])&&(n[s||t]=LM(e))}const s=(e,t)=>oM.forEach(e,((e,r)=>i(e,r,t)));if(oM.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(oM.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let r,n,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),r=e.substring(0,i).trim().toLowerCase(),n=e.substring(i+1).trim(),!r||t[r]&&OM[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)})),t})(e),t);else if(oM.isObject(e)&&oM.isIterable(e)){let r,n,i={};for(const t of e){if(!oM.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[n=t[0]]=(r=i[n])?oM.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}s(i,t)}else null!=e&&i(t,e,r);return this}get(e,t){if(e=jM(e)){const r=oM.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(oM.isFunction(t))return t.call(this,e,r);if(oM.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=jM(e)){const r=oM.findKey(this,e);return!(!r||void 0===this[r]||t&&!MM(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function i(e){if(e=jM(e)){const i=oM.findKey(r,e);!i||t&&!MM(0,r[i],i,t)||(delete r[i],n=!0)}}return oM.isArray(e)?e.forEach(i):i(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const i=t[r];e&&!MM(0,this[i],i,e,!0)||(delete this[i],n=!0)}return n}normalize(e){const t=this,r={};return oM.forEach(this,((n,i)=>{const s=oM.findKey(r,i);if(s)return t[s]=LM(n),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,r)=>t.toUpperCase()+r))}(i):String(i).trim();a!==i&&delete t[i],t[a]=LM(n),r[a]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return oM.forEach(this,((r,n)=>{null!=r&&!1!==r&&(t[n]=e&&oM.isArray(r)?r.join(", "):r)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach((e=>r.set(e))),r}static accessor(e){const t=(this[NM]=this[NM]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=jM(e);t[n]||(!function(e,t){const r=oM.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+r,{value:function(e,r,i){return this[n].call(this,t,e,r,i)},configurable:!0})}))}(r,e),t[n]=!0)}return oM.isArray(e)?e.forEach(n):n(e),this}}FM.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),oM.reduceDescriptors(FM.prototype,(({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}})),oM.freezeMethods(FM);const UM=FM;function BM(e,t){const r=this||IM,n=t||r,i=UM.from(n.headers);let s=n.data;return oM.forEach(e,(function(e){s=e.call(r,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function $M(e){return!(!e||!e.__CANCEL__)}function zM(e,t,r){lM.call(this,null==e?"canceled":e,lM.ERR_CANCELED,t,r),this.name="CanceledError"}function qM(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new lM("Request failed with status code "+r.status,[lM.ERR_BAD_REQUEST,lM.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}oM.inherits(zM,lM,{__CANCEL__:!0});const VM=(e,t,r=3)=>{let n=0;const i=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i,s=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=n[a];i||(i=l),r[s]=o,n[s]=l;let u=a,d=0;for(;u!==s;)d+=r[u++],u%=e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(e,t){let r,n,i=0,s=1e3/t;const a=(t,s=Date.now())=>{i=s,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[(...e)=>{const t=Date.now(),o=t-i;o>=s?a(e,t):(r=e,n||(n=setTimeout((()=>{n=null,a(r)}),s-o)))},()=>r&&a(r)]}((r=>{const s=r.loaded,a=r.lengthComputable?r.total:void 0,o=s-n,l=i(o);n=s;e({loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&s<=a?(a-s)/l:void 0,event:r,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),r)},KM=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},HM=e=>(...t)=>oM.asap((()=>e(...t))),GM=PM.hasStandardBrowserEnv?(WM=new URL(PM.origin),QM=PM.navigator&&/(msie|trident)/i.test(PM.navigator.userAgent),e=>(e=new URL(e,PM.origin),WM.protocol===e.protocol&&WM.host===e.host&&(QM||WM.port===e.port))):()=>!0;var WM,QM;const YM=PM.hasStandardBrowserEnv?{write(e,t,r,n,i,s,a){if("undefined"==typeof document)return;const o=[`${e}=${encodeURIComponent(t)}`];oM.isNumber(r)&&o.push(`expires=${new Date(r).toUTCString()}`),oM.isString(n)&&o.push(`path=${n}`),oM.isString(i)&&o.push(`domain=${i}`),!0===s&&o.push("secure"),oM.isString(a)&&o.push(`SameSite=${a}`),document.cookie=o.join("; ")},read(e){if("undefined"==typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function XM(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const JM=e=>e instanceof UM?{...e}:e;function ZM(e,t){t=t||{};const r={};function n(e,t,r,n){return oM.isPlainObject(e)&&oM.isPlainObject(t)?oM.merge.call({caseless:n},e,t):oM.isPlainObject(t)?oM.merge({},t):oM.isArray(t)?t.slice():t}function i(e,t,r,i){return oM.isUndefined(t)?oM.isUndefined(e)?void 0:n(void 0,e,0,i):n(e,t,0,i)}function s(e,t){if(!oM.isUndefined(t))return n(void 0,t)}function a(e,t){return oM.isUndefined(t)?oM.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function o(r,i,s){return s in t?n(r,i):s in e?n(void 0,r):void 0}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t,r)=>i(JM(e),JM(t),0,!0)};return oM.forEach(Object.keys({...e,...t}),(function(n){const s=l[n]||i,a=s(e[n],t[n],n);oM.isUndefined(a)&&s!==o||(r[n]=a)})),r}const eF=e=>{const t=ZM({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:o}=t;if(t.headers=a=UM.from(a),t.url=wM(XM(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),oM.isFormData(r))if(PM.hasStandardBrowserEnv||PM.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(oM.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach((([e,r])=>{t.includes(e.toLowerCase())&&a.set(e,r)}))}if(PM.hasStandardBrowserEnv&&(n&&oM.isFunction(n)&&(n=n(t)),n||!1!==n&&GM(t.url))){const e=i&&s&&YM.read(s);e&&a.set(i,e)}return t},tF="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,r){const n=eF(e);let i=n.data;const s=UM.from(n.headers).normalize();let a,o,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=n;function p(){c&&c(),u&&u(),n.cancelToken&&n.cancelToken.unsubscribe(a),n.signal&&n.signal.removeEventListener("abort",a)}let g=new XMLHttpRequest;function m(){if(!g)return;const n=UM.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());qM((function(e){t(e),p()}),(function(e){r(e),p()}),{data:d&&"text"!==d&&"json"!==d?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:n,config:e,request:g}),g=null}g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout,"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(m)},g.onabort=function(){g&&(r(new lM("Request aborted",lM.ECONNABORTED,e,g)),g=null)},g.onerror=function(t){const n=new lM(t&&t.message?t.message:"Network Error",lM.ERR_NETWORK,e,g);n.event=t||null,r(n),g=null},g.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const i=n.transitional||SM;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new lM(t,i.clarifyTimeoutError?lM.ETIMEDOUT:lM.ECONNABORTED,e,g)),g=null},void 0===i&&s.setContentType(null),"setRequestHeader"in g&&oM.forEach(s.toJSON(),(function(e,t){g.setRequestHeader(t,e)})),oM.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),d&&"json"!==d&&(g.responseType=n.responseType),f&&([l,u]=VM(f,!0),g.addEventListener("progress",l)),h&&g.upload&&([o,c]=VM(h),g.upload.addEventListener("progress",o),g.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(a=t=>{g&&(r(!t||t.type?new zM(null,e,g):t),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(a),n.signal&&(n.signal.aborted?a():n.signal.addEventListener("abort",a)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);y&&-1===PM.protocols.indexOf(y)?r(new lM("Unsupported protocol "+y+":",lM.ERR_BAD_REQUEST,e)):g.send(i||null)}))},rF=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const i=function(e){if(!r){r=!0,a();const t=e instanceof Error?e:this.reason;n.abort(t instanceof lM?t:new zM(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{s=null,i(new lM(`timeout ${t} of ms exceeded`,lM.ETIMEDOUT))}),t);const a=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:o}=n;return o.unsubscribe=()=>oM.asap(a),o}},nF=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,i=0;for(;i<r;)n=i+t,yield e.slice(i,n),i=n},iF=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},sF=(e,t,r,n)=>{const i=async function*(e,t){for await(const r of iF(e))yield*nF(r,t)}(e,t);let s,a=0,o=e=>{s||(s=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await i.next();if(t)return o(),void e.close();let s=n.byteLength;if(r){let e=a+=s;r(e)}e.enqueue(new Uint8Array(n))}catch(mEe){throw o(mEe),mEe}},cancel:e=>(o(e),i.return())},{highWaterMark:2})},{isFunction:aF}=oM,oF=(({Request:e,Response:t})=>({Request:e,Response:t}))(oM.global),{ReadableStream:lF,TextEncoder:cF}=oM.global,uF=(e,...t)=>{try{return!!e(...t)}catch(Jce){return!1}},dF=e=>{e=oM.merge.call({skipUndefined:!0},oF,e);const{fetch:t,Request:r,Response:n}=e,i=t?aF(t):"function"==typeof fetch,s=aF(r),a=aF(n);if(!i)return!1;const o=i&&aF(lF),l=i&&("function"==typeof cF?(c=new cF,e=>c.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer()));var c;const u=s&&o&&uF((()=>{let e=!1;const t=new r(PM.origin,{body:new lF,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),d=a&&o&&uF((()=>oM.isReadableStream(new n("").body))),h={stream:d&&(e=>e.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!h[e]&&(h[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new lM(`Response type '${e}' is not supported`,lM.ERR_NOT_SUPPORT,r)})}));const f=async(e,t)=>{const n=oM.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(oM.isBlob(e))return e.size;if(oM.isSpecCompliantForm(e)){const t=new r(PM.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return oM.isArrayBufferView(e)||oM.isArrayBuffer(e)?e.byteLength:(oM.isURLSearchParams(e)&&(e+=""),oM.isString(e)?(await l(e)).byteLength:void 0)})(t):n};return async e=>{let{url:i,method:a,data:o,signal:l,cancelToken:c,timeout:p,onDownloadProgress:g,onUploadProgress:m,responseType:y,headers:v,withCredentials:b="same-origin",fetchOptions:w}=eF(e),x=t||fetch;y=y?(y+"").toLowerCase():"text";let S=rF([l,c&&c.toAbortSignal()],p),E=null;const T=S&&S.unsubscribe&&(()=>{S.unsubscribe()});let k;try{if(m&&u&&"get"!==a&&"head"!==a&&0!==(k=await f(v,o))){let e,t=new r(i,{method:"POST",body:o,duplex:"half"});if(oM.isFormData(o)&&(e=t.headers.get("content-type"))&&v.setContentType(e),t.body){const[e,r]=KM(k,VM(HM(m)));o=sF(t.body,65536,e,r)}}oM.isString(b)||(b=b?"include":"omit");const t=s&&"credentials"in r.prototype,l={...w,signal:S,method:a.toUpperCase(),headers:v.normalize().toJSON(),body:o,duplex:"half",credentials:t?b:void 0};E=s&&new r(i,l);let c=await(s?x(E,w):x(i,l));const p=d&&("stream"===y||"response"===y);if(d&&(g||p&&T)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=c[t]}));const t=oM.toFiniteNumber(c.headers.get("content-length")),[r,i]=g&&KM(t,VM(HM(g),!0))||[];c=new n(sF(c.body,65536,r,(()=>{i&&i(),T&&T()})),e)}y=y||"text";let A=await h[oM.findKey(h,y)||"text"](c,e);return!p&&T&&T(),await new Promise(((t,r)=>{qM(t,r,{data:A,headers:UM.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:E})}))}catch(mEe){if(T&&T(),mEe&&"TypeError"===mEe.name&&/Load failed|fetch/i.test(mEe.message))throw Object.assign(new lM("Network Error",lM.ERR_NETWORK,e,E),{cause:mEe.cause||mEe});throw lM.from(mEe,mEe&&mEe.code,e,E)}}},hF=new Map,fF=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:i}=t,s=[n,i,r];let a,o,l=s.length,c=hF;for(;l--;)a=s[l],o=c.get(a),void 0===o&&c.set(a,o=l?new Map:dF(t)),c=o;return o};fF();const pF={http:null,xhr:tF,fetch:{get:fF}};oM.forEach(pF,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Jce){}Object.defineProperty(e,"adapterName",{value:t})}}));const gF=e=>`- ${e}`,mF=e=>oM.isFunction(e)||null===e||!1===e;const yF={getAdapter:function(e,t){e=oM.isArray(e)?e:[e];const{length:r}=e;let n,i;const s={};for(let a=0;a<r;a++){let r;if(n=e[a],i=n,!mF(n)&&(i=pF[(r=String(n)).toLowerCase()],void 0===i))throw new lM(`Unknown adapter '${r}'`);if(i&&(oM.isFunction(i)||(i=i.get(t))))break;s[r||"#"+a]=i}if(!i){const e=Object.entries(s).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new lM("There is no suitable adapter to dispatch the request "+(r?e.length>1?"since :\n"+e.map(gF).join("\n"):" "+gF(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return i},adapters:pF};function vF(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new zM(null,e)}function bF(e){vF(e),e.headers=UM.from(e.headers),e.data=BM.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return yF.getAdapter(e.adapter||IM.adapter,e)(e).then((function(t){return vF(e),t.data=BM.call(e,e.transformResponse,t),t.headers=UM.from(t.headers),t}),(function(t){return $M(t)||(vF(e),t&&t.response&&(t.response.data=BM.call(e,e.transformResponse,t.response),t.response.headers=UM.from(t.response.headers))),Promise.reject(t)}))}const wF="1.13.1",xF={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{xF[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));const SF={};xF.transitional=function(e,t,r){return(n,i,s)=>{if(!1===e)throw new lM(function(e,t){return"[Axios v"+wF+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}(i," has been removed"+(t?" in "+t:"")),lM.ERR_DEPRECATED);return t&&!SF[i]&&(SF[i]=!0),!e||e(n,i,s)}},xF.spelling=function(e){return(e,t)=>!0};const EF={assertOptions:function(e,t,r){if("object"!=typeof e)throw new lM("options must be an object",lM.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const s=n[i],a=t[s];if(a){const t=e[s],r=void 0===t||a(t,s,e);if(!0!==r)throw new lM("option "+s+" must be "+r,lM.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new lM("Unknown option "+s,lM.ERR_BAD_OPTION)}},validators:xF},TF=EF.validators;class kF{constructor(e){this.defaults=e||{},this.interceptors={request:new xM,response:new xM}}async request(e,t){try{return await this._request(e,t)}catch(mEe){if(mEe instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const r=t.stack?t.stack.replace(/^.+\n/,""):"";try{mEe.stack?r&&!String(mEe.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(mEe.stack+="\n"+r):mEe.stack=r}catch(Jce){}}throw mEe}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=ZM(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:i}=t;void 0!==r&&EF.assertOptions(r,{silentJSONParsing:TF.transitional(TF.boolean),forcedJSONParsing:TF.transitional(TF.boolean),clarifyTimeoutError:TF.transitional(TF.boolean)},!1),null!=n&&(oM.isFunction(n)?t.paramsSerializer={serialize:n}:EF.assertOptions(n,{encode:TF.function,serialize:TF.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),EF.assertOptions(t,{baseUrl:TF.spelling("baseURL"),withXsrfToken:TF.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&oM.merge(i.common,i[t.method]);i&&oM.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=UM.concat(s,i);const a=[];let o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!o){const e=[bF.bind(this),void 0];for(e.unshift(...a),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let h=t;for(;d<u;){const e=a[d++],t=a[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{c=bF.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return wM(XM((e=ZM(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}oM.forEach(["delete","get","head","options"],(function(e){kF.prototype[e]=function(t,r){return this.request(ZM(r||{},{method:e,url:t,data:(r||{}).data}))}})),oM.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,i){return this.request(ZM(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}kF.prototype[e]=t(),kF.prototype[e+"Form"]=t(!0)}));const AF=kF;class _F{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const r=this;this.promise.then((e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e,n,i){r.reason||(r.reason=new zM(e,n,i),t(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new _F((function(t){e=t})),cancel:e}}}const CF=_F;const PF={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(PF).forEach((([e,t])=>{PF[t]=e}));const DF=PF;const RF=function e(t){const r=new AF(t),n=yL(AF.prototype.request,r);return oM.extend(n,AF.prototype,r,{allOwnKeys:!0}),oM.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(ZM(t,r))},n}(IM);RF.Axios=AF,RF.CanceledError=zM,RF.CancelToken=CF,RF.isCancel=$M,RF.VERSION=wF,RF.toFormData=gM,RF.AxiosError=lM,RF.Cancel=RF.CanceledError,RF.all=function(e){return Promise.all(e)},RF.spread=function(e){return function(t){return e.apply(null,t)}},RF.isAxiosError=function(e){return oM.isObject(e)&&!0===e.isAxiosError},RF.mergeConfig=ZM,RF.AxiosHeaders=UM,RF.formToJSON=e=>DM(oM.isHTMLForm(e)?new FormData(e):e),RF.getAdapter=yF.getAdapter,RF.HttpStatusCode=DF,RF.default=RF;const IF=RF;let OF=null;const NF={chat:async(e,t)=>{var r;const n=await(async()=>{var e,t;if(OF)return OF;try{if(void 0!==import.meta&&(null==(e={VITE_SUPABASE_URL:"https://supabase.dosmundos.pe",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlLWRlbW8iLCJpYXQiOjE2NDE3NjkyMDAsImV4cCI6MTk5OTk5OTk5OX0.A4_N08ZorXYT17zhZReBXPlY6L5-9d8thMbm7TcDWl8",VITE_VPS_IP:"72.61.186.175",VITE_VPS_USER:"root",VITE_VPS_PASSWORD:"Qazsxdc@1234",VITE_AUDIO_PUBLIC_BASE:"https://dosmundos.pe/files/audio",VITE_DEEPGRAM_API_KEY:"84ca6271b47706ef558452cffe25ec353cfad7fb",VITE_DEEPSEEK_API_KEY:"sk-2cfb1cedbb164adeaac8bea846086fcc",VITE_ASSEMBLYAI_API_KEY:"84e48d90988e4671a74e78f37fc5abfd",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1})?void 0:e.VITE_DEEPSEEK_API_KEY))return OF="sk-2cfb1cedbb164adeaac8bea846086fcc",OF;if("undefined"!=typeof process&&(null==(t=process.env)?void 0:t.DEEPSEEK_API_KEY))return OF={}.DEEPSEEK_API_KEY,OF;if("undefined"!=typeof window&&window.localStorage){const e=window.localStorage.getItem("DEEPSEEK_API_KEY");if(e&&"string"==typeof e&&e.trim())return OF=e.trim(),OF}return VO.warn("No DeepSeek API key found"),null}catch(r){return VO.error("Error initializing DeepSeek:",r),null}})();if(!n)throw new Error("DeepSeek API key is not configured");try{return(await IF.post("https://api.deepseek.com/chat/completions",{model:"deepseek-chat",messages:[{role:"system",content:e},{role:"user",content:t}],temperature:.3,stream:!1},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},timeout:3e5})).data.choices[0].message.content}catch(i){throw VO.error("DeepSeek API error:",(null==(r=i.response)?void 0:r.data)||i.message),i}},testConnection:async()=>{try{return await NF.chat("You are a helpful assistant.","Ping"),!0}catch(e){return!1}}},jF={processTranscript:async e=>{if(!e||0===e.length)return[];const t=e.flatMap((e=>e.words||[])).map((e=>({...e,text:e.text||e.word||""})));if(0===t.length)return VO.warn("[SmartSegmentation] No words found in utterances, falling back to original"),e;const r=t.map((e=>e.text)).join(" ");VO.info("[SmartSegmentation] Sending text to DeepSeek for analysis...");const n=await jF.getSplitAnchorsFromLLM(r);if(!n||0===n.length)return VO.warn("[SmartSegmentation] No split anchors received, falling back to original"),e;VO.info(`[SmartSegmentation] Received ${n.length} split anchors`);return jF.resegmentByAnchors(t,n)},getSplitAnchorsFromLLM:async e=>{const t=`Here is the transcript text:\n"${e}"\n\nOutput the JSON array of the last 5 words for each segment.`;try{const e=(await NF.chat("You are an expert transcript editor. \nYour task is to split the transcript into semantically coherent segments.\nRules:\n1. Target segment length: ~1 minute (approx 150-200 words).\n2. Maximum segment length: 2 minutes.\n3. Segments must be split at sentence endings (., ?, !).\n4. Return the LAST 5 WORDS of each segment you create.\n5. Output strictly a JSON array of strings. No other text.",t)).replace(/```json/g,"").replace(/```/g,"").trim(),r=JSON.parse(e);if(Array.isArray(r))return r;throw new Error("Response is not an array")}catch(r){return VO.error("[SmartSegmentation] Error getting anchors from LLM:",r),null}},resegmentByAnchors:(e,t)=>{const r=[];let n=[],i=0,s=0;for(;i<e.length;){const a=e[i];if(n.push(a),s<t.length){const e=t[s].replace(/[.,?!]/g,"").toLowerCase().split(/\s+/);if(n.length>=e.length){n.slice(-e.length).every(((t,r)=>t.text.replace(/[.,?!]/g,"").toLowerCase()===e[r]))&&(r.push(jF.createSegment(n)),n=[],s++)}}if(n.length>0){const e=n[0].start;if(n[n.length-1].end-e>12e4){const e=jF.findLastSentenceEnd(n);if(e>0){const t=n.slice(0,e);r.push(jF.createSegment(t)),n=n.slice(e)}else r.push(jF.createSegment(n)),n=[]}}i++}return n.length>0&&r.push(jF.createSegment(n)),r},findLastSentenceEnd:e=>{for(let t=e.length-1;t>=0;t--)if(/[.?!]/.test(e[t].text))return t+1;return-1},createSegment:e=>e&&0!==e.length?{start:e[0].start,end:e[e.length-1].end,text:e.map((e=>e.text)).join(" "),words:e,id:`smart-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}:null};let LF=null;const MF="https://api.deepgram.com/v1",FF=async()=>{var e,t;if(LF)return LF;if(void 0!==import.meta&&(null==(e={VITE_SUPABASE_URL:"https://supabase.dosmundos.pe",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlLWRlbW8iLCJpYXQiOjE2NDE3NjkyMDAsImV4cCI6MTk5OTk5OTk5OX0.A4_N08ZorXYT17zhZReBXPlY6L5-9d8thMbm7TcDWl8",VITE_VPS_IP:"72.61.186.175",VITE_VPS_USER:"root",VITE_VPS_PASSWORD:"Qazsxdc@1234",VITE_AUDIO_PUBLIC_BASE:"https://dosmundos.pe/files/audio",VITE_DEEPGRAM_API_KEY:"84ca6271b47706ef558452cffe25ec353cfad7fb",VITE_DEEPSEEK_API_KEY:"sk-2cfb1cedbb164adeaac8bea846086fcc",VITE_ASSEMBLYAI_API_KEY:"84e48d90988e4671a74e78f37fc5abfd",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1})?void 0:e.VITE_DEEPGRAM_API_KEY))return LF="84ca6271b47706ef558452cffe25ec353cfad7fb",LF;if("undefined"!=typeof process&&(null==(t=process.env)?void 0:t.DEEPGRAM_API_KEY))return LF={}.DEEPGRAM_API_KEY,LF;try{const{data:e,error:t}=await uS.functions.invoke("get-env-variables",{body:{variable_names:["DEEPGRAM_API_KEY"]}});if(t)throw new Error(`Deepgram API  : ${t.message}`);if(!e||!e.DEEPGRAM_API_KEY)throw new Error("Deepgram API     .   .");return LF=e.DEEPGRAM_API_KEY,LF}catch(r){throw r}},UF=async(e,t,r)=>{try{const i=r.utterances||[],s=r.words||[];if("undefined"!=typeof window){const a=JSON.stringify(r);a.length;let o=null;try{const r=`${e}_${t.toUpperCase()}_DEEPGRAM.json`,{error:n}=await uS.storage.from("transcript").upload(r,a,{contentType:"application/json",upsert:!0});if(!n){const{data:{publicUrl:e}}=uS.storage.from("transcript").getPublicUrl(r);o=e}}catch(n){}const l={episode_slug:e,lang:t,status:"completed",provider:"deepgram",provider_id:r.id,storage_url:o,edited_transcript_data:{text:r.transcript||r.text||"",utterance_count:i.length,word_count:s.length,provider_id:r.id,has_full_data:!!o},updated_at:(new Date).toISOString()},{error:c}=await uS.from("transcripts").upsert(l,{onConflict:"episode_slug,lang"});if(c)throw c;return{success:!0}}{const{saveFullTranscriptToStorage:n}=await xk((()=>import("./transcriptStorageService-3d86be7d.js")),[]),a={episode_slug:e,lang:t,edited_transcript_data:{text:r.transcript||r.text||"",utterances:i.map((e=>({id:e.id||(e.start?e.start.toString():`u-${Math.random()}`),start:e.start,end:e.end,text:e.transcript||e.text,speaker:e.speaker,words:e.words||[]}))),words:s.map((e=>({text:e.word||e.text,start:e.start,end:e.end,confidence:e.confidence,speaker:e.speaker})))},status:"completed",provider:"deepgram",updated_at:(new Date).toISOString()},o=await n(e,t,r,"deepgram");o.success&&o.url&&(a.storage_url=o.url);const{error:l}=await uS.from("transcripts").upsert(a,{onConflict:"episode_slug,lang"});if(l)throw l}return{success:!0}}catch(i){throw i}},BF=async(e,t,r,n,i)=>{var s;try{await FF();const n=new URLSearchParams({model:"nova-3",language:"ru"===t?"ru":"es",punctuate:"true",smart_format:"true",utterances:"true",diarize:"true"}),o=await fetch(`${MF}/listen?${n.toString()}`,{method:"POST",headers:{Authorization:`Token ${LF}`,"Content-Type":"application/json"},body:JSON.stringify({url:e})});if(!o.ok){const e=await o.json();throw new Error(`Deepgram API error: ${e.error||o.statusText}`)}const l=await o.json(),c=(e=>{var t,r,n,i;if(!e||!e.results)return{utterances:[],words:[]};const s=e.results,a=s.utterances||[],o=null==(n=null==(r=null==(t=s.channels)?void 0:t[0])?void 0:r.alternatives)?void 0:n[0],l=(null==o?void 0:o.words)||[];return{utterances:a.map((e=>({start:Math.round(1e3*e.start),end:Math.round(1e3*e.end),text:e.transcript,speaker:e.speaker,words:(e.words||[]).map((e=>({start:Math.round(1e3*e.start),end:Math.round(1e3*e.end),text:e.word||e.punctuated_word,confidence:e.confidence})))}))),words:l.map((e=>({start:Math.round(1e3*e.start),end:Math.round(1e3*e.end),text:e.word||e.punctuated_word,confidence:e.confidence}))),confidence:null==o?void 0:o.confidence,text:null==o?void 0:o.transcript,id:null==(i=e.metadata)?void 0:i.request_id,status:"completed"}})(l);await uS.from("transcripts").upsert({episode_slug:r,lang:i,status:"processing",provider:"deepgram",provider_id:null==(s=l.metadata)?void 0:s.request_id,updated_at:(new Date).toISOString()},{onConflict:"episode_slug,lang"});try{const e=await jF.processTranscript(c.utterances);c.utterances=e}catch(a){}return await UF(r,i,c),c}catch(o){throw o}};let $F;const zF=async(e,t,r="en")=>{var n,i,s,a,o,l,c;VO.debug(" generateQuestionsOpenAI called",{utterancesCount:(null==(n=null==e?void 0:e.utterances)?void 0:n.length)||0,textLength:(null==(i=null==e?void 0:e.text)?void 0:i.length)||0,episodeLang:t,currentInterfaceLanguage:r});try{const r=await(async()=>{var e,t;if($F)return VO.debug(" Using existing OpenAI client"),$F;try{VO.debug(" Initializing OpenAI API key...");let r=null,n="https://api.openai.com/v1";if((null==(e={VITE_SUPABASE_URL:"https://supabase.dosmundos.pe",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlLWRlbW8iLCJpYXQiOjE2NDE3NjkyMDAsImV4cCI6MTk5OTk5OTk5OX0.A4_N08ZorXYT17zhZReBXPlY6L5-9d8thMbm7TcDWl8",VITE_VPS_IP:"72.61.186.175",VITE_VPS_USER:"root",VITE_VPS_PASSWORD:"Qazsxdc@1234",VITE_AUDIO_PUBLIC_BASE:"https://dosmundos.pe/files/audio",VITE_DEEPGRAM_API_KEY:"84ca6271b47706ef558452cffe25ec353cfad7fb",VITE_DEEPSEEK_API_KEY:"sk-2cfb1cedbb164adeaac8bea846086fcc",VITE_ASSEMBLYAI_API_KEY:"84e48d90988e4671a74e78f37fc5abfd",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1})?void 0:e.VITE_OPENAI_API_KEY)&&(r={}.VITE_OPENAI_API_KEY,n="https://api.openai.com/v1",VO.debug(" OpenAI API key loaded from environment variable")),!r&&(null==(t={VITE_SUPABASE_URL:"https://supabase.dosmundos.pe",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlLWRlbW8iLCJpYXQiOjE2NDE3NjkyMDAsImV4cCI6MTk5OTk5OTk5OX0.A4_N08ZorXYT17zhZReBXPlY6L5-9d8thMbm7TcDWl8",VITE_VPS_IP:"72.61.186.175",VITE_VPS_USER:"root",VITE_VPS_PASSWORD:"Qazsxdc@1234",VITE_AUDIO_PUBLIC_BASE:"https://dosmundos.pe/files/audio",VITE_DEEPGRAM_API_KEY:"84ca6271b47706ef558452cffe25ec353cfad7fb",VITE_DEEPSEEK_API_KEY:"sk-2cfb1cedbb164adeaac8bea846086fcc",VITE_ASSEMBLYAI_API_KEY:"84e48d90988e4671a74e78f37fc5abfd",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1})?void 0:t.VITE_DEEPSEEK_API_KEY)&&(r="sk-2cfb1cedbb164adeaac8bea846086fcc",n="https://api.deepseek.com",VO.debug(" DeepSeek API key loaded from environment variable (fallback)")),!r)throw VO.error(" No OpenAI or DeepSeek API key found in environment variables"),new Error("OpenAI API key is not configured. Please add VITE_OPENAI_API_KEY or VITE_DEEPSEEK_API_KEY to .env file.");VO.debug(" Initializing OpenAI client...");const i=(await xk((()=>import("./index-5f735de6.js")),[])).default;return $F=new i({apiKey:r,baseURL:n,dangerouslyAllowBrowser:!0,maxRetries:0}),VO.debug(" OpenAI client created successfully"),$F}catch(r){throw VO.error(" Error initializing OpenAI:",r),$F=null,r}})(),n=e.utterances||[];let i="";if(n.length>200){const e=(null==(s=n[n.length-1])?void 0:s.end)||0,t=[],r=Math.floor(e/10);for(let n=0;n<10;n++)t.push({start:n*r,end:(n+1)*r});const a=n.filter((t=>Math.floor(t.start/1e3)>=e-1800));let o=[];t.forEach((e=>{const t=n.filter((t=>{const r=Math.floor(t.start/1e3);return r>=e.start&&r<e.end})).slice(0,10);o.push(...t)}));const l=[...o,...a].filter(((e,t,r)=>t===r.findIndex((t=>t.start===e.start)))).slice(0,150);i=l.map(((e,t)=>`[${Math.floor(e.start/1e3)}s]${e.speaker?`[${e.speaker}]`:""} ${e.text||""}`)).join("\n"),VO.debug(` Reduced to ${l.length} interval segments (${i.length} chars)`)}else i=n.map(((e,t)=>`[${Math.floor(e.start/1e3)}s]${e.speaker?`[${e.speaker}]`:""} ${e.text||""}`)).join("\n");VO.debug(` Final text length: ${i.length} chars`);const a={ru:{name:"",prompt:"russian"},es:{name:"",prompt:"spanish"},en:{name:"",prompt:"english"}},o=`You are an expert content analyst specializing in multilingual podcast analysis. Your task is to identify key questions, topics, and discussions from healing/healer podcasts where people ask questions about health, wellness, and life advice.\n\nIMPORTANT CONTEXT:\n- The podcast has multiple listeners, a healer, and a translator\n- Different speakers are labeled with letters (A, B, C, etc.)\n- The translator translates questions from listeners and answers from the healer\n- You need to identify ORIGINAL questions from listeners, not translations\n- The transcript format includes timing markers: [125s][A] means 125 seconds, speaker A\n\nSTRATEGY: Focus on identifying NEW questions or topics that start new discussion threads. Look for:\n- When a NEW listener starts speaking about a different problem/topic\n- Changes in conversation direction to a new issue/question\n- New questions that haven't been discussed before\n- Different aspects of the same general topic (but as separate questions)\n- Pay attention to speaker changes - new speakers often indicate new questions\n- Look for explicit question markers like " ", " ", " ", "question from", "next question"\n- Pay special attention to phrases that introduce new listeners or their problems\n- MEDITATIONS: Look for when the healer starts guided meditations, relaxation exercises, or mindfulness practices at the end of Q&A sessions\n- Look for meditation phrases like " ", " ", " ", "", "", "let's meditate", "close your eyes", "deep breathing"\n\nFor each identified question/topic/meditation:\n1. Find the EXACT moment when this question/topic/meditation FIRST appears in the conversation\n2. Look for the ORIGINAL question from the listener (not the translation)\n3. Create a concise title (3-8 words) that captures the essence of the question/topic/meditation\n4. For MEDITATIONS: Create titles like "Guided Meditation", "Relaxation Exercise", "Breathing Practice", etc.\n5. CRITICAL: Extract the time from the [time] markers in the transcript (e.g., [125s] means 125 seconds)\n6. Use the timestamp from the very first utterance where this topic/question/meditation begins\n\nReturn ONLY a valid JSON array in this format:\n[\n  {\n    "title": "  /  ${(a[t]||a.en).name} ",\n    "time": _______\n  }\n]\n\nGuidelines:\n- Extract as many important questions/topics/MEDITATIONS as possible (aim for 10-30+ for longer podcasts)\n- Focus on genuine questions about health, relationships, personal growth, etc.\n- INCLUDE MEDITATIONS: Look for guided meditations, relaxation exercises, breathing practices\n- PRIORITY: Identify questions from different listeners (different speakers)\n- Pay attention to speaker changes - new speaker = potentially new question\n- Ignore meta-discussion about the podcast itself and technical issues\n- Ignore translations - focus on original questions from listeners and original meditations\n- TIME CRITICAL: Extract time from [time] markers (e.g., [125s] = 125 seconds)\n- Time should be from the FIRST utterance of each question/topic/meditation (usually when the listener starts speaking or healer starts meditation)\n- If you can't find exact timing markers, estimate based on text position\n- Ensure titles are concise but descriptive\n- Return only the JSON array, no additional text`,l=`           :\n\n${i}\n\n:       []    [A], [B]  ..\n\n      . :\n\n1.      (   [A], [B], [C]...)\n2.        \n3.       \n4. :     , ,  \n5.  : " ", " ", " ", " ", " ", " ", "", "", "", "", " ", " ", " ", " "\n6.  :          \n7.   -        \n\n:       -   5-10,          .\n\n:          []       . ,   [125s][A]  ,   = 125.\n\n  :\n-    A: "[125s][A]    ..."\n-    : 125 \n- : "[1800s]      ..."\n-   : 1800 `;VO.debug(" Sending questions generation request to DeepSeek",{textLength:i.length,systemPromptLength:o.length,userPromptLength:l.length});const c=(await r.chat.completions.create({model:"deepseek-chat",messages:[{role:"system",content:o},{role:"user",content:l}],temperature:.3,max_tokens:4e3})).choices[0].message.content.trim();if(VO.debug(" Received questions generation response",{responseLength:(null==c?void 0:c.length)||0,responsePreview:(null==c?void 0:c.substring(0,200))||"empty"}),!c)throw new Error("   ");let d;try{const e=c.match(/\[[\s\S]*\]/),t=e?e[0]:c;if(d=JSON.parse(t),!Array.isArray(d))throw new Error("   ");d=d.filter((e=>e&&"object"==typeof e&&"string"==typeof e.title&&e.title.trim().length>0)).map((e=>{let t=0;const r=e.title.trim(),i=r.match(/\[(\d+)s?\]/);if(i)t=parseInt(i[1]);else if("number"!=typeof e.time||isNaN(e.time))if("string"!=typeof e.time||isNaN(Number(e.time))){const e=r.toLowerCase();let i=null;if(i=n.find((t=>{const r=(t.text||"").toLowerCase();return r.includes(e.substring(0,15))||e.includes(r.substring(0,15))})),!i){const t=e.split(" ").filter((e=>e.length>3)).slice(0,3);i=n.find((e=>{const r=(e.text||"").toLowerCase();return t.some((e=>r.includes(e)))}))}if(!i){const e=n.filter(((e,t)=>0===t||e.speaker!==n[t-1].speaker));e.length>0&&(i=e[0])}i?(t=Math.floor(i.start/1e3),VO.debug(` Found matching utterance for question "${r}": time=${t}s`)):VO.warn(` Could not find matching utterance for question: "${r}"`)}else t=Math.max(0,Number(e.time));else t=Math.max(0,Number(e.time));return{title:r.replace(/\[\d+s?\]/g,"").trim(),time:Math.max(0,t)}})),VO.info(" Questions parsed successfully",{count:d.length,questions:d.map((e=>({title:e.title,time:e.time})))})}catch(u){VO.error(" Failed to parse questions JSON:",u.message),VO.error(" Raw response:",c);const t=["?","","",""," "," ","","","","","",""],r=["","","","",""," "," "," "," "," "," ","","",""," "," "," "," ",""," "," "," ","let's meditate","close your eyes","close our eyes","deep breathing","deep breaths","relaxation","guided meditation","mindfulness","breathing exercise","inner peace","spiritual practice"],n=i.split(/[.!?]+/).filter((e=>e.trim().length>10)),s=n.filter((e=>t.some((t=>e.toLowerCase().includes(t.toLowerCase()))))).slice(0,10),a=n.filter((e=>r.some((t=>e.toLowerCase().includes(t.toLowerCase()))))).slice(0,5),o=i.length,l=s.map(((t,r)=>{var n,s;return{title:t.trim().substring(0,60)+(t.length>60?"...":""),time:Math.floor(i.indexOf(t)/o*((null==(s=null==(n=e.utterances)?void 0:n[e.utterances.length-1])?void 0:s.end)||0)/1e3)}})),h=a.map(((t,r)=>{var n,s;return{title:": "+t.trim().substring(0,50)+(t.length>50?"...":""),time:Math.floor(i.indexOf(t)/o*((null==(s=null==(n=e.utterances)?void 0:n[e.utterances.length-1])?void 0:s.end)||0)/1e3)}}));d=[...l,...h],VO.info(" Fallback questions generated",{count:d.length,questions:d.map((e=>({title:e.title,time:e.time})))})}if(!d||0===d.length)throw new Error("   ");return d}catch(d){VO.error(" Error in generateQuestionsOpenAI:",d),VO.error(" Error details:",{name:d.name,message:d.message,status:d.status,code:d.code,type:d.type,stack:null==(a=d.stack)?void 0:a.substring(0,200)});let e=d.message;throw(null==(o=d.message)?void 0:o.toLowerCase().includes("connection"))?e=`   DeepSeek.  -. (${d.message})`:(null==(l=d.message)?void 0:l.toLowerCase().includes("timeout"))?e=`   DeepSeek.     . (${d.message})`:(null==(c=d.message)?void 0:c.toLowerCase().includes("api key"))&&(e=`  API  DeepSeek.   . (${d.message})`),new Error(iy("errorTranslatingTextOpenAI",r,{errorMessage:e}))}},qF=({currentLanguage:e,user:t})=>{var r,n,i,s;const{episodeSlug:a,lang:o}=nh(),l=rh(),{toast:c}=Fm(),u=eh(),d=o||e||"ru",{editor:h,isAuthenticated:f,openAuthModal:p}=pS(),g=new URLSearchParams(u.search).get("lang"),m=g||e;q.useEffect((()=>{if(g&&g!==e){localStorage.setItem("podcastLang",g);const e=u.pathname.match(/^\/(ru|es|en|de|fr|pl)(.*)$/),t=e?e[2]:u.pathname,r=`/${g}${t||""}`,n=new URLSearchParams(u.search);n.delete("lang");const i=n.toString(),s=`${r}${i?`?${i}`:""}${u.hash||""}`;`${u.pathname}${u.search}${u.hash||""}`!==s&&l(s,{replace:!0})}}),[g,e,u.pathname,u.search,u.hash,l]);const[y,v]=q.useState(!1),[b,w]=q.useState(!1),[x,S]=q.useState(!1),{playEpisode:E,audioRef:T,currentEpisode:k,currentTime:A,duration:_,isPlaying:C}=Ym(),P=q.useRef(null),[D,R]=q.useState([]),[I,O]=q.useState(null),[N,j]=q.useState(!1);q.useEffect((()=>{f||j(!1)}),[f]),q.useEffect((()=>{(async()=>{try{const{data:t,error:r}=await uS.from("episodes").select("\n            slug,\n            date,\n            episode_audios (\n              audio_url,\n              lang\n            )\n          ").order("date",{ascending:!1}).limit(50);if(!r&&t){const r=t.map((t=>{var r,n;const i=(null==(r=t.episode_audios)?void 0:r.find((t=>t.lang===e)))||(null==(n=t.episode_audios)?void 0:n[0]);return{slug:t.slug,date:t.date,audio_url:null==i?void 0:i.audio_url,lang:(null==i?void 0:i.lang)||"mixed"}}));R(r)}}catch(t){}})()}),[]);const{episodeData:L,questions:M,transcript:F,loading:U,questionsLoading:B,transcriptLoading:$,error:z,questionsUpdatedId:V,isOfflineMode:K,saveEditedTranscript:H,saveQuestions:G,refreshAllData:W,preloadAudio:Q,fetchTranscriptForEpisode:Y,fetchQuestionsForEpisode:X,setTranscript:J}=pL(a,d,c);q.useEffect((()=>{if(L&&L.slug){const e=(null==k?void 0:k.audioUrl)||(null==k?void 0:k.audio_url),t=L.audioUrl||L.audio_url;if((null==k?void 0:k.slug)!==L.slug||t&&t!==e){if(T.current&&T.current.src===t)return;const e=T&&T.current&&T.current.duration>0&&!T.current.ended?T.current.currentTime:A,r=(null==k?void 0:k.slug)===L.slug?e:0;E(L,r)}}}),[L,E,k,A]);const{jumpDetails:ee,showFloatingControls:te,playerState:re,showTranscriptUI:ne,handleSeekToTime:ie,handlePlayerStateChange:se,handleToggleShowTranscript:ae,handleFloatingPlayerSkip:oe,handleFloatingPlayPause:le,setShowFloatingControls:ce}=((e,t,r,n,i=!1)=>{const s=eh(),a=rh(),[o,l]=q.useState({time:null,id:null,questionId:null,playAfterJump:!1,segmentToHighlight:null}),[c,u]=q.useState(!1),[d,h]=q.useState({isPlaying:!1,currentTime:0,duration:0,activeQuestionTitle:""}),[f,p]=q.useState((()=>{const e=localStorage.getItem("showTranscriptUI");return null!==e?"true"===e:i})),g=q.useRef(!1);q.useEffect((()=>{const e=s.hash;if(VO.debug("usePlayerInteractions: Processing hash",e),e){const t=e.match(/^#segment-(\d+(?:\.\d+)?)(?:&play=true)?$/),r=e.match(/^#question-([^&]+)(?:&play=true)?$/),i=e.match(/^#(\d+(?:\.\d+)?)$/),s=e.match(/^#(\d+):(\d+)$/);if(VO.debug("usePlayerInteractions: matches",{segmentMatch:t,questionMatch:r,secondsMatch:i,timeMatch:s}),t){const r=parseFloat(t[1])/1e3,n=e.includes("&play=true");l({time:r,id:`segment-${t[1]}`,questionId:null,playAfterJump:n,segmentToHighlight:parseFloat(t[1])})}else if(r){const t=r[1],i=e.includes("&play=true");let s=n.find((e=>String(e.id)===t||e.slug===t));if(s)l({time:s.time,id:`question-${t}`,questionId:t,playAfterJump:i,segmentToHighlight:null});else{const e=setTimeout((()=>{const r=n.find((e=>String(e.id)===t||e.slug===t));r&&l({time:r.time,id:`question-${t}`,questionId:t,playAfterJump:i,segmentToHighlight:null}),clearTimeout(e)}),600)}}else if(i){const e=parseFloat(i[1]);l({time:e,id:`time-${e}`,questionId:null,playAfterJump:!0,segmentToHighlight:1e3*e})}else if(s){const e=60*parseInt(s[1],10)+parseInt(s[2],10);l({time:e,id:`time-${e}`,questionId:null,playAfterJump:!0,segmentToHighlight:1e3*e})}}else if(!g.current){g.current=!0;const e="#0";s.hash!==e&&a(`${s.pathname}${e}`,{replace:!0,state:s.state}),l({time:0,id:"time-0",questionId:null,playAfterJump:!0,segmentToHighlight:0})}}),[s.hash,n,r]);const m=q.useCallback(((e,t=null,r=!1,n=null)=>{VO.debug("usePlayerInteractions: handleSeekToTime called",{time:e,id:t,playAfterJump:r,questionId:n});const i=Math.round(1e3*e);l({time:e,id:t||`time-${e}`,questionId:n,playAfterJump:r,segmentToHighlight:i});const o=`#${Math.floor(e)}`;s.hash!==o&&a(o?`${s.pathname}${o}`:s.pathname,{replace:!0,state:s.state})}),[a,s.pathname,s.hash,s.state]),y=q.useCallback((e=>{VO.debug("usePlayerInteractions: handlePlayerStateChange called",e),h((t=>({...t,...e})))}),[]),v=q.useCallback((()=>{p((e=>{const t=!e;return localStorage.setItem("showTranscriptUI",String(t)),t}))}),[]),b=q.useCallback((t=>{if(e.current){const r=e.current.currentTime+t,n=!e.current.paused;m(r,null,n)}}),[e,m]),w=q.useCallback((()=>{if(e.current){const t=!e.current.paused;t?e.current.pause():e.current.play().catch((e=>{})),h((e=>({...e,isPlaying:!t})))}}),[e]);return{jumpDetails:o,showFloatingControls:c,playerState:d,showTranscriptUI:f,handleSeekToTime:m,handlePlayerStateChange:y,handleToggleShowTranscript:v,handleFloatingPlayerSkip:b,handleFloatingPlayPause:w,setShowFloatingControls:u}})(T,0,a,M,!0);((e,t,r,n,i,s=!1)=>{q.useEffect((()=>{if(!e)return;if(s||"undefined"!=typeof navigator&&!navigator.onLine)return;let a=null,o=null;try{a=uS.channel(`db-questions-changes-for-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"timecodes",filter:`episode_slug=eq.${e}`},(i=>{var s;const a="all"===(null==t?void 0:t.lang)?r:null==t?void 0:t.lang;a&&(null==(s=i.new)?void 0:s.lang)===a&&n(e,a)})).subscribe(((e,t)=>{})),o=uS.channel(`db-transcripts-changes-for-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"transcripts",filter:`episode_slug=eq.${e}`},(n=>{var s,a,o,l;const c="all"===(null==t?void 0:t.lang)?r:null==t?void 0:t.lang,u=n.eventType||n.event,d=null==(s=n.new)?void 0:s.lang,h=null==(a=n.old)?void 0:a.lang;c&&(d!==c&&h!==c||("INSERT"===u||"DELETE"===u||"UPDATE"===u&&(null==(o=n.old)?void 0:o.status)!==(null==(l=n.new)?void 0:l.status))&&i(e,c))})).subscribe(((e,t)=>{}))}catch(z){}return()=>{try{a&&uS.removeChannel(a),o&&uS.removeChannel(o)}catch(z){}}}),[e,t,r,n,i,s])})(a,L,m,X,Y,K);const{isAddQuestionFromSegmentDialogOpen:ue,segmentForQuestion:de,openAddQuestionFromSegmentDialog:he,closeAddQuestionFromSegmentDialog:fe}=((e,t,r,n,i,s,a,o)=>{const{isAuthenticated:l,openAuthModal:c}=pS(),[u,d]=q.useState(!1),[h,f]=q.useState(!1),[p,g]=q.useState(null),[m,y]=q.useState(!1),[v,b]=q.useState(0),[w,x]=q.useState(t),[S,E]=q.useState(""),[T,k]=q.useState(!1),[A,_]=q.useState(!1),[C,P]=q.useState(null),D=q.useCallback((e=>{if(!l)return void c();let r=e.lang||t;"en"===t&&"es"===o&&"en"!==e.lang&&(r="en"),g({...e,time:parseFloat(e.time.toFixed(2))}),b(parseFloat(e.time.toFixed(2))),x(r),y(!1),d(!0),k(!0)}),[t,o,l,c]),R=q.useCallback((()=>{var n;if(!l)return void c();const i=parseFloat((null==(n=r.current)?void 0:n.currentTime.toFixed(2))||e.toFixed(2));let a=t;"en"===t&&"es"===o&&(a="en"),g({id:null,time:i,title:"",episode_slug:s,lang:a}),b(i),x(a),y(!0),d(!0),k(!1)}),[e,t,r,s,o,l,c]),I=q.useCallback((()=>{f(!0)}),[]),O=q.useCallback((e=>{l?(P(e),_(!0)):c()}),[l,c]),N=q.useCallback((()=>{d(!1),k(!1)}),[]),j=q.useCallback((()=>{f(!1),E("")}),[]),L=q.useCallback((()=>{_(!1),P(null)}),[]),M=q.useCallback((e=>{const t=e.target.value.split(":").map(Number);let r=0;if(3===t.length)r=3600*t[0]+60*t[1]+t[2];else if(2===t.length)r=60*t[0]+t[1];else{if(1!==t.length||isNaN(t[0]))return void b(NaN);r=t[0]}!isNaN(r)&&r>=0&&r<=(i||1/0)?(b(r),g((e=>({...e,time:r}))),n&&n(r,!1)):""===e.target.value&&(b(0),g((e=>({...e,time:0}))))}),[i,n]),F=q.useCallback((e=>{const t=Math.max(0,Math.min(i||1/0,v+e));b(t),g((e=>({...e,time:t}))),n&&n(t,!0)}),[v,i,n]);return{isEditDialogOpen:u,isBatchAddDialogOpen:h,currentQuestionData:p,isAddingQuestion:m,dialogTime:v,questionLang:w,batchQuestionsText:S,isAddQuestionFromSegmentDialogOpen:A,segmentForQuestion:C,openEditDialog:D,openAddDialog:R,openBatchAddDialog:I,closeDialog:N,closeBatchAddDialog:j,handleDialogTimeInputChange:M,handleDialogTimeAdjust:F,setCurrentQuestionData:g,setBatchQuestionsText:E,setDialogTime:b,setQuestionLang:x,openAddQuestionFromSegmentDialog:O,closeAddQuestionFromSegmentDialog:L}})(re.currentTime,m,T,ie,re.duration,null==L?void 0:L.slug,null==L||L.date,null==L?void 0:L.lang);(({currentEpisodeSlug:e,allEpisodes:t,currentLanguage:r,isOfflineMode:n=!1})=>{const i=q.useRef(new Set),s=q.useRef(null);q.useEffect((()=>{if(!n&&e&&t&&0!==t.length)return s.current&&clearTimeout(s.current),s.current=setTimeout((async()=>{try{const n=t.findIndex((t=>t.slug===e));if(-1===n)return void VO.debug("useAudioPrefetch: Current episode not found in list");const s=t[n+1];if(!s||!s.audio_url)return void VO.debug("useAudioPrefetch: No next episode to prefetch");const a=`${s.slug}-${r}`;if(i.current.has(a))return void VO.debug("useAudioPrefetch: Already prefetched",a);if(await fL.isAudioCached(s.audio_url))return VO.debug("useAudioPrefetch: Next episode already cached",s.slug),void i.current.add(a);VO.debug("useAudioPrefetch: Prefetching next episode",{slug:s.slug,url:s.audio_url}),await fL.cacheAudio(s.audio_url,s.slug),i.current.add(a),mL=0,VO.debug("useAudioPrefetch: Successfully prefetched",s.slug)}catch(z){if(mL++,mL>=5)return void VO.warn(`useAudioPrefetch: Too many consecutive failures (${mL}), disabling prefetching`);z.message.includes("Failed to fetch")||z.message.includes("NetworkError")||z.message.includes("ERR_CONNECTION_RESET")||"TypeError"===z.name?VO.debug("useAudioPrefetch: Network issue during prefetch (non-critical)",z.message):VO.debug("useAudioPrefetch: Prefetch failed (non-critical)",z)}}),3e3),()=>{s.current&&clearTimeout(s.current)}}),[e,t,r,n])})({currentEpisodeSlug:null==L?void 0:L.slug,allEpisodes:D,currentLanguage:m,isOfflineMode:K}),q.useEffect((()=>{const e=()=>{const e=P.current;if(e){e.getBoundingClientRect().bottom<0?ce(!0):ce(!1)}else ce(!1)};return window.addEventListener("scroll",e),e(),()=>window.removeEventListener("scroll",e)}),[]);const pe=q.useCallback((async(e,t)=>{if(!L||!L.slug)return;if("intro-virtual"===t.id){const e="all"===L.lang||"mixed"===L.lang?m:L.lang,{data:r,error:n}=await uS.from("timecodes").select("*").eq("episode_slug",L.slug).eq("lang",e).eq("is_intro",!0).eq("time",0).maybeSingle();if(n&&"PGRST116"!==n.code)return void c({title:iy("errorGeneric",m),description:n.message,variant:"destructive"});const i={episode_slug:L.slug,time:0,title:t.title,lang:e,is_intro:!0,is_full_transcript:!1};let s;if(r&&r.id){const{error:e}=await uS.from("timecodes").update({title:i.title}).eq("id",r.id);s=e}else{const{error:e}=await uS.from("timecodes").insert(i).select().single();s=e}return void(s?c({title:iy("errorGeneric",m),description:s.message,variant:"destructive"}):X(L.slug,e))}if("full-transcript-virtual"===t.id)return;let r;const n="all"===L.lang||"mixed"===L.lang?m:L.lang;if("add"===e){const e={episode_slug:L.slug,time:Math.round(t.time),title:t.title,lang:t.lang||n},{error:i}=await uS.from("timecodes").insert(e).select().single();r=i}else if("update"===e){const e={title:t.title,time:Math.round(t.time),lang:t.lang||n},{error:i}=await uS.from("timecodes").update(e).eq("id",t.id).select().single();r=i}else if("delete"===e){const{error:e}=await uS.from("timecodes").delete().eq("id",t.id);r=e}if(r)c({title:iy("errorGeneric",m),description:r.message,variant:"destructive"});else{if(f&&h)try{let r="",n="",i="";if("add"===e)r="",n=`Title: ${t.title}, Time: ${t.time}s`,i=`${L.slug}_question_new_${Date.now()}`;else if("update"===e){const e=M.find((e=>e.id===t.id));e&&(r=`Title: ${e.title}, Time: ${e.time}s`,n=`Title: ${t.title}, Time: ${t.time}s`),i=`${L.slug}_question_${t.id}`}else if("delete"===e){const e=M.find((e=>e.id===t.id));e&&(r=`Title: ${e.title}, Time: ${e.time}s`,n=""),i=`${L.slug}_question_${t.id}`}await gS({editorId:h.id,editorEmail:h.email,editorName:h.name,editType:"question",targetType:"question",targetId:i,contentBefore:r,contentAfter:n,filePath:null,metadata:{episodeSlug:L.slug,questionId:t.id||"new",action:e,questionData:t,timestamp:(new Date).toISOString()}})}catch(i){}X(L.slug,n)}}),[L,m,c,X,f,h,M]),ge=q.useCallback((e=>{f?"full-transcript-virtual"!==e.id&&O(e):p()}),[f,p]),me=q.useCallback((async e=>{if(!L||!L.slug)return;const t="all"===L.lang||"mixed"===L.lang?m:L.lang,r=[];for(let s=0;s<e.utterances.length;s+=50){const n=e.utterances.slice(s,s+50);r.push({episode_slug:L.slug,lang:t,chunk_type:"edited_transcript",chunk_index:Math.floor(s/50),chunk_data:{utterances:n}})}const{error:n}=await uS.from("transcripts").update({edited_transcript_data:{utterance_count:e.utterances.length},updated_at:(new Date).toISOString()}).eq("episode_slug",L.slug).eq("lang",t);if(n)return void c({title:iy("errorGeneric",m),description:`Failed to update transcript: ${n.message}`,variant:"destructive"});const{error:i}=await uS.from("transcript_chunks").delete().eq("episode_slug",L.slug).eq("lang",t).eq("chunk_type","edited_transcript");for(let s=0;s<r.length;s+=5){const e=r.slice(s,s+5),{error:t}=await uS.from("transcript_chunks").upsert(e,{onConflict:"episode_slug,lang,chunk_type,chunk_index"});if(t)return void c({title:iy("errorGeneric",m),description:`Failed to save chunks: ${t.message}`,variant:"destructive"})}J(e),c({title:iy("success",m),description:" !"})}),[L,m,c,J]),ye=q.useCallback((async(e,t,r,n)=>{if(L&&L.slug&&F)try{await H(e)}catch(i){c({title:iy("saveError",m),description:i.message,variant:"destructive"})}}),[L,F,H,m,c]),ve=q.useMemo((()=>{if(!L)return null;const e="all"===L.lang||"mixed"===L.lang?m:L.lang;let t=null;if(L.translations&&Array.isArray(L.translations)){const e=L.translations.find((e=>e.lang===m));e&&e.title&&(t=e.title)}if(!t&&L.title){L.title.match(/^(Meditacin|Meditation|)\s+\d{2}\.\d{2}\.\d{4}/i)||(t=L.title)}if(!t||""===t.trim()){const r=iy("meditationTitlePrefix",e);let n="";L.date?n=km(L.date,e):L.created_at&&(n=km(L.created_at,e)),t=n?`${r} ${n}`:r}return{...L,displayTitle:t,questions:M,transcript:F,jumpToTime:ee.time,jumpId:ee.id,jumpToQuestionId:ee.questionId,playAfterJump:ee.playAfterJump,segmentToHighlight:ee.segmentToHighlight,questionsUpdatedId:V,lang:e,onTranscriptUpdate:me}}),[L,M,F,ee,V,m,me]),be=q.useMemo((()=>{if(!(null==ve?void 0:ve.questions))return"";const e=[...ve.questions].sort(((e,t)=>e.time-t.time));let t=null;for(const r of e){if(!(r.time<=A))break;t=r}return t?t.title:""}),[ve,A]),{isSpeakerAssignmentDialogOpen:we,segmentForSpeakerAssignment:xe,handleOpenSpeakerAssignmentDialog:Se,handleSaveSpeakerAssignment:Ee,handleCloseSpeakerAssignmentDialog:Te}=KO(ve,me,c,m,Y,null==ve?void 0:ve.slug,null==ve?void 0:ve.lang),ke=q.useCallback((async()=>{if(!(null==L?void 0:L.slug))return;const e=Wm(L);if(!e)return void c({title:iy("errorGeneric",m),description:iy("audioFileNotAvailable",m)||"  ",variant:"destructive"});const t="all"===L.lang||"mixed"===L.lang?m:L.lang,{data:r}=await uS.from("transcripts").select("*").eq("episode_slug",L.slug).eq("lang",t).maybeSingle();v(!0);try{let n=null==r?void 0:r.id;if(n)await uS.from("transcripts").update({status:"processing",provider:"deepgram"}).eq("id",n);else{const{data:e,error:r}=await uS.from("transcripts").upsert({episode_slug:L.slug,lang:t,status:"processing",provider:"deepgram"},{onConflict:"episode_slug,lang"}).select().single();if(r)throw r;n=e.id}c({title:iy("success",m),description:iy("transcriptionStarted",m)||" "});const i=await BF(e,t,L.slug,m,t);await(async(e,r)=>{let n=null;try{const r=await fetch("/api/save-transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({episodeSlug:L.slug,lang:t,transcriptData:e,provider:"deepgram"})});if(r.ok){const e=await r.json();e.success&&(n=e.url)}}catch(Jce){}const{processTranscriptData:i,buildEditedTranscriptData:s}=await xk((()=>import("./transcriptProcessingUtils-e2e36fe9.js")),[]),a=s(i(e)),o={status:"completed",provider:"deepgram",provider_id:e.id,edited_transcript_data:a,updated_at:(new Date).toISOString()};n&&(o.storage_url=n);const{error:l}=await uS.from("transcripts").update(o).eq("id",r);if(l)throw l;c({title:iy("success",m),description:iy("transcriptionCompleted",m)||" !"}),W()})(i,n)}catch(n){v(!1),c({title:iy("error",m),description:n.message||iy("transcriptionError",m),variant:"destructive"})}finally{v(!1)}}),[L,m,c,W]),Ae=q.useCallback((async()=>{if(null==L?void 0:L.slug){w(!0);try{const e="all"===L.lang||"mixed"===L.lang?m:L.lang,{data:t}=await uS.from("transcripts").select("edited_transcript_data").eq("episode_slug",L.slug).eq("lang",e).single();if(!t||!t.edited_transcript_data)throw new Error(iy("transcriptRequired",m));const r=await zF(t.edited_transcript_data,e,m);if(!Array.isArray(r)||0===r.length)throw new Error(iy("questionsGenerationFailed",m));await uS.from("timecodes").delete().eq("episode_slug",L.slug).eq("lang",e);const n=r.map(((t,r)=>({episode_slug:L.slug,lang:e,title:t.title,time:Number(t.time??0)})));await uS.from("timecodes").insert(n),c({title:iy("success",m),description:sy("questionsGeneratedForEpisode",m,r.length,{episodeSlug:L.slug,lang:e.toUpperCase()})})}catch(e){c({title:iy("error",m),description:e.message||iy("questionsGenerationError",m),variant:"destructive"})}finally{w(!1)}}}),[L,m,c]),_e=q.useCallback((async()=>{if((null==L?void 0:L.slug)&&F){S(!0);try{let e=[];if(F.words&&F.words.length>0?e=F.words:F.utterances&&F.utterances.forEach((t=>{t.words&&(e=[...e,...t.words])})),0===e.length)throw new Error("No words found in transcript to segment.");c({title:iy("processing",m),description:iy("segmenting",m)});const t=[{words:e}],r=await jF.processTranscript(t);await me({...F,utterances:r}),c({title:iy("success",m),description:"Smart segmentation completed!"})}catch(e){c({title:iy("error",m),description:e.message||"Smart segmentation failed",variant:"destructive"})}finally{S(!1)}}}),[L,F,m,c,me]);return U&&!L?Z.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)]",children:[Z.jsx(Hp,{className:"h-12 w-12 animate-spin text-purple-400"}),Z.jsx("p",{className:"mt-4 text-lg",children:iy("loadingEpisode",m)})]}):L||U?z&&!ve?Z.jsxs("div",{className:"text-center p-8 bg-red-700/30 rounded-lg shadow-xl",children:[Z.jsx("h2",{className:"text-xl font-bold mb-2",children:iy("errorLoadingData",m)}),Z.jsx("p",{className:"max-w-md mx-auto",children:z}),Z.jsxs(AT,{onClick:()=>l(`/${d}/episodes`),variant:"outline",className:"mt-4 bg-slate-700/50 hover:bg-slate-600/70 border-slate-600 text-slate-300 hover:text-white",children:[Z.jsx(dp,{className:"mr-2 h-4 w-4"})," ",iy("backToEpisodesShort",m)]})]}):Z.jsxs("div",{className:"w-full flex flex-col items-center",children:[te&&Z.jsx(lL,{episodeTitle:(null==ve?void 0:ve.displayTitle)||"",isPlaying:C,activeQuestionTitle:be,onPlayPause:le,onSkipSeconds:oe,currentLanguage:m}),Z.jsxs("div",{className:"w-full max-w-3xl",children:[Z.jsx("div",{ref:P,className:"mb-4",children:ve&&Z.jsx(WO,{episodeData:ve,onQuestionUpdate:pe,currentLanguage:m,onQuestionSelectJump:ie,audioRef:T,episodeSlug:ve.slug,episodeAudioUrl:Wm(ve),episodeLang:ve.lang,episodeDate:ve.date,navigateBack:()=>l(`/${d}/episodes`),navigateHistory:()=>l(-1),onPlayerStateChange:se,playerControlsContainerRef:P,showTranscript:ne,onToggleShowTranscript:ae,user:t,onTranscriptUpdate:me,isEditMode:N,setIsEditMode:j,fetchTranscriptForEpisode:Y,isOfflineMode:K,onRecognizeText:ke,onRecognizeQuestions:Ae,onSmartSegmentation:_e,isRecognizingText:y,isRecognizingQuestions:b,isSmartSegmenting:x},ve.slug)}),Z.jsxs("div",{className:"w-full relative",children:[(B||$)&&Z.jsxs("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10 px-2 py-1 rounded-md bg-slate-800/70 backdrop-blur border border-slate-700/70 text-slate-300 text-xs flex items-center gap-1.5 shadow-md",children:[Z.jsx(Hp,{className:"h-3.5 w-3.5 animate-spin text-purple-400"}),Z.jsx("span",{children:iy("loadingTranscriptAndQuestions",m)||"Loading transcript and questions..."})]}),Z.jsx(oL,{questions:ve.questions||[],currentTime:A,duration:_,onQuestionsChange:pe,onQuestionJump:(e,t,r)=>ie(e,t,r),episodeSlug:ve.slug,episodeDate:ve.date,audioRef:T,mainPlayerIsPlaying:C,mainPlayerTogglePlayPause:le,mainPlayerSeekAudio:(e,t)=>ie(e,null,t),currentLanguage:m,episodeLang:ve.lang||"all",episodeAudioUrl:Wm(ve),jumpToQuestionId:ve.jumpToQuestionId,isBatchAddDisabled:!0,showTranscript:ne,user:t,disableAutomaticCollapse:!0,onOpenSpeakerAssignmentDialog:Se,transcriptUtterances:(null==(r=ve.transcript)?void 0:r.utterances)||[],transcriptId:(null==(n=ve.transcript)?void 0:n.id)||null,transcriptWords:(null==(i=ve.transcript)?void 0:i.words)||[],segmentToHighlight:ve.segmentToHighlight,isLoading:Boolean(B),transcriptLoading:Boolean($),onTranscriptLocalUpdate:J,onSaveEditedSegment:ye,onAddQuestionFromSegment:he,onEditQuestion:ge,isEditMode:N})]})]}),xe&&Z.jsx(xO,{isOpen:we,onClose:Te,segment:xe,allUtterances:(null==(s=null==ve?void 0:ve.transcript)?void 0:s.utterances)||[],onSave:Ee,currentLanguage:m}),de&&Z.jsx(gL,{isOpen:ue,onClose:fe,segment:de,onSave:(e,t)=>{pe("add",{title:e,time:t,lang:m}),fe()},currentLanguage:m,audioRef:T,mainPlayerIsPlaying:C,mainPlayerTogglePlayPause:le,mainPlayerSeekAudio:ie,duration:_}),I&&Z.jsx(SO,{isOpen:!!I,onClose:()=>O(null),initialTime:I.time,initialTitle:I.title,onSave:(e,t)=>{pe("update",{id:I.id,title:e,time:t,lang:I.lang||m}),O(null)},onDelete:"intro-virtual"===I.id?void 0:()=>{pe("delete",{id:I.id}),O(null)},currentLanguage:m,audioRef:T,mainPlayerIsPlaying:C,mainPlayerTogglePlayPause:le,mainPlayerSeekAudio:ie,duration:_,isEditing:!0,disableTimeEditing:"intro-virtual"===I.id,hideDelete:"intro-virtual"===I.id})]}):Z.jsxs("div",{className:"text-center p-8 bg-red-700/30 rounded-lg shadow-xl",children:[Z.jsx("h2",{className:"text-xl font-bold mb-2",children:iy("errorLoadingData",m)}),Z.jsx("p",{className:"max-w-md mx-auto",children:iy("episodeNotFound",m)}),Z.jsxs(AT,{onClick:()=>l(`/${d}/episodes`),variant:"outline",className:"mt-4 bg-slate-700/50 hover:bg-slate-600/70 border-slate-600 text-slate-300 hover:text-white",children:[Z.jsx(dp,{className:"mr-2 h-4 w-4"})," ",iy("backToEpisodesShort",m)]})]})},VF=({currentLanguage:e})=>{const{lang:t}=nh(),r=t||e||"ru";return Z.jsxs("div",{className:"min-h-[calc(100vh-150px)] flex flex-col items-center justify-center text-center p-4",children:[Z.jsx(up,{className:"w-16 h-16 text-yellow-400 mb-6"}),Z.jsx("h1",{className:"text-4xl font-bold text-white mb-3",children:iy("pageNotFoundTitle",e)}),Z.jsx("p",{className:"text-lg text-slate-300 mb-8 max-w-md",children:iy("pageNotFoundDescription",e)}),Z.jsx(Ah,{to:`/${r}/episodes`,children:Z.jsx(AT,{className:"bg-purple-600 hover:bg-purple-700 text-lg px-8 py-6",children:iy("backToEpisodes",e)})})]})},KF=q.createContext({});const HF=q.createContext(null),GF=q.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});const WF="undefined"!=typeof window,QF=WF?q.useLayoutEffect:q.useEffect,YF=e=>e;let XF=YF;function JF(e){let t;return()=>(void 0===t&&(t=e()),t)}const ZF=(e,t,r)=>{const n=t-e;return 0===n?1:(r-e)/n},eU=e=>1e3*e,tU=e=>e/1e3,rU=!1;const nU=["read","resolveKeyframes","update","preRender","render","postRender"];function iU(e,t){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,a=nU.reduce(((e,t)=>(e[t]=function(e){let t=new Set,r=new Set,n=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(t){s.has(t)&&(l.schedule(t),e()),t(a)}const l={schedule:(e,i=!1,a=!1)=>{const o=a&&n?t:r;return i&&s.add(e),o.has(e)||o.add(e),e},cancel:e=>{r.delete(e),s.delete(e)},process:e=>{a=e,n?i=!0:(n=!0,[t,r]=[r,t],t.forEach(o),t.clear(),n=!1,i&&(i=!1,l.process(e)))}};return l}(s),e)),{}),{read:o,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:h}=a,f=()=>{const s=performance.now();r=!1,i.delta=n?1e3/60:Math.max(Math.min(s-i.timestamp,40),1),i.timestamp=s,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),i.isProcessing=!1,r&&t&&(n=!1,e(f))};return{schedule:nU.reduce(((t,s)=>{const o=a[s];return t[s]=(t,s=!1,a=!1)=>(r||(r=!0,n=!0,i.isProcessing||e(f)),o.schedule(t,s,a)),t}),{}),cancel:e=>{for(let t=0;t<nU.length;t++)a[nU[t]].cancel(e)},state:i,steps:a}}const{schedule:sU,cancel:aU,state:oU,steps:lU}=iU("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:YF,!0),cU=q.createContext({strict:!1}),uU={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},dU={};for(const vEe in uU)dU[vEe]={isEnabled:e=>uU[vEe].some((t=>!!e[t]))};const hU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fU(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||hU.has(e)}let pU=e=>!fU(e);try{(gU=require("@emotion/is-prop-valid").default)&&(pU=e=>e.startsWith("on")?!fU(e):gU(e))}catch(yEe){}var gU;function mU(e){if("undefined"==typeof Proxy)return e;const t=new Map;return new Proxy(((...t)=>e(...t)),{get:(r,n)=>"create"===n?e:(t.has(n)||t.set(n,e(n)),t.get(n))})}const yU=q.createContext({});function vU(e){return"string"==typeof e||Array.isArray(e)}function bU(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}const wU=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],xU=["initial",...wU];function SU(e){return bU(e.animate)||xU.some((t=>vU(e[t])))}function EU(e){return Boolean(SU(e)||e.variants)}function TU(e){const{initial:t,animate:r}=function(e,t){if(SU(e)){const{initial:t,animate:r}=e;return{initial:!1===t||vU(t)?t:void 0,animate:vU(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,q.useContext(yU));return q.useMemo((()=>({initial:t,animate:r})),[kU(t),kU(r)])}function kU(e){return Array.isArray(e)?e.join(" "):e}const AU=Symbol.for("motionComponentSymbol");function _U(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function CU(e,t,r){return q.useCallback((n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&("function"==typeof r?r(n):_U(r)&&(r.current=n))}),[t])}const PU=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),DU="data-"+PU("framerAppearId"),{schedule:RU,cancel:IU}=iU(queueMicrotask,!1),OU=q.createContext({});function NU(e,t,r,n,i){var s,a;const{visualElement:o}=q.useContext(yU),l=q.useContext(cU),c=q.useContext(HF),u=q.useContext(GF).reducedMotion,d=q.useRef(null);n=n||l.renderer,!d.current&&n&&(d.current=n(e,{visualState:t,parent:o,props:r,presenceContext:c,blockInitialAnimation:!!c&&!1===c.initial,reducedMotionConfig:u}));const h=d.current,f=q.useContext(OU);!h||h.projection||!i||"html"!==h.type&&"svg"!==h.type||function(e,t,r,n){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:jU(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:Boolean(a)||o&&_U(o),visualElement:e,animationType:"string"==typeof s?s:"both",initialPromotionConfig:n,layoutScroll:l,layoutRoot:c})}(d.current,r,i,f);const p=q.useRef(!1);q.useInsertionEffect((()=>{h&&p.current&&h.update(r,c)}));const g=r[DU],m=q.useRef(Boolean(g)&&!(null===(s=window.MotionHandoffIsComplete)||void 0===s?void 0:s.call(window,g))&&(null===(a=window.MotionHasOptimisedAnimation)||void 0===a?void 0:a.call(window,g)));return QF((()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),RU.render(h.render),m.current&&h.animationState&&h.animationState.animateChanges())})),q.useEffect((()=>{h&&(!m.current&&h.animationState&&h.animationState.animateChanges(),m.current&&(queueMicrotask((()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,g)})),m.current=!1))})),h}function jU(e){if(e)return!1!==e.options.allowProjection?e.projection:jU(e.parent)}function LU({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:i}){var s,a;function o(e,s){let a;const o={...q.useContext(GF),...e,layoutId:MU(e)},{isStatic:l}=o,c=TU(e),u=n(e,l);if(!l&&WF){q.useContext(cU).strict;const e=function(e){const{drag:t,layout:r}=dU;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==r?void 0:r.isEnabled(e))?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}(o);a=e.MeasureLayout,c.visualElement=NU(i,u,o,t,e.ProjectionNode)}return Z.jsxs(yU.Provider,{value:c,children:[a&&c.visualElement?Z.jsx(a,{visualElement:c.visualElement,...o}):null,r(i,e,CU(u,c.visualElement,s),u,l,c.visualElement)]})}e&&function(e){for(const t in e)dU[t]={...dU[t],...e[t]}}(e),o.displayName=`motion.${"string"==typeof i?i:`create(${null!==(a=null!==(s=i.displayName)&&void 0!==s?s:i.name)&&void 0!==a?a:""})`}`;const l=q.forwardRef(o);return l[AU]=i,l}function MU({layoutId:e}){const t=q.useContext(KF).id;return t&&void 0!==e?t+"-"+e:e}const FU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function UU(e){return"string"==typeof e&&!e.includes("-")&&!!(FU.indexOf(e)>-1||/[A-Z]/u.test(e))}function BU(e){const t=[{},{}];return null==e||e.values.forEach(((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()})),t}function $U(e,t,r,n){if("function"==typeof t){const[i,s]=BU(n);t=t(void 0!==r?r:e.custom,i,s)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[i,s]=BU(n);t=t(void 0!==r?r:e.custom,i,s)}return t}const zU=e=>Array.isArray(e),qU=e=>Boolean(e&&e.getVelocity);function VU(e){const t=qU(e)?e.get():e;return r=t,Boolean(r&&"object"==typeof r&&r.mix&&r.toValue)?t.toValue():t;var r}const KU=e=>(t,r)=>{const n=q.useContext(yU),i=q.useContext(HF),s=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:r},n,i,s){const a={latestValues:HU(n,i,s,e),renderState:t()};return r&&(a.onMount=e=>r({props:n,current:e,...a}),a.onUpdate=e=>r(e)),a}(e,t,n,i);return r?s():function(e){const t=q.useRef(null);return null===t.current&&(t.current=e()),t.current}(s)};function HU(e,t,r,n){const i={},s=n(e,{});for(const h in s)i[h]=VU(s[h]);let{initial:a,animate:o}=e;const l=SU(e),c=EU(e);t&&c&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let u=!!r&&!1===r.initial;u=u||!1===a;const d=u?o:a;if(d&&"boolean"!=typeof d&&!bU(d)){const t=Array.isArray(d)?d:[d];for(let r=0;r<t.length;r++){const n=$U(e,t[r]);if(n){const{transitionEnd:e,transition:t,...r}=n;for(const n in r){let e=r[n];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(i[n]=e)}for(const n in e)i[n]=e[n]}}}return i}const GU=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],WU=new Set(GU),QU=e=>t=>"string"==typeof t&&t.startsWith(e),YU=QU("--"),XU=QU("var(--"),JU=e=>!!XU(e)&&ZU.test(e.split("/*")[0].trim()),ZU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,eB=(e,t)=>t&&"number"==typeof e?t.transform(e):e,tB=(e,t,r)=>r>t?t:r<e?e:r,rB={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},nB={...rB,transform:e=>tB(0,1,e)},iB={...rB,default:1},sB=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),aB=sB("deg"),oB=sB("%"),lB=sB("px"),cB=sB("vh"),uB=sB("vw"),dB={...oB,parse:e=>oB.parse(e)/100,transform:e=>oB.transform(100*e)},hB={borderWidth:lB,borderTopWidth:lB,borderRightWidth:lB,borderBottomWidth:lB,borderLeftWidth:lB,borderRadius:lB,radius:lB,borderTopLeftRadius:lB,borderTopRightRadius:lB,borderBottomRightRadius:lB,borderBottomLeftRadius:lB,width:lB,maxWidth:lB,height:lB,maxHeight:lB,top:lB,right:lB,bottom:lB,left:lB,padding:lB,paddingTop:lB,paddingRight:lB,paddingBottom:lB,paddingLeft:lB,margin:lB,marginTop:lB,marginRight:lB,marginBottom:lB,marginLeft:lB,backgroundPositionX:lB,backgroundPositionY:lB},fB={rotate:aB,rotateX:aB,rotateY:aB,rotateZ:aB,scale:iB,scaleX:iB,scaleY:iB,scaleZ:iB,skew:aB,skewX:aB,skewY:aB,distance:lB,translateX:lB,translateY:lB,translateZ:lB,x:lB,y:lB,z:lB,perspective:lB,transformPerspective:lB,opacity:nB,originX:dB,originY:dB,originZ:lB},pB={...rB,transform:Math.round},gB={...hB,...fB,zIndex:pB,size:lB,fillOpacity:nB,strokeOpacity:nB,numOctaves:pB},mB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yB=GU.length;function vB(e,t,r){const{style:n,vars:i,transformOrigin:s}=e;let a=!1,o=!1;for(const l in t){const e=t[l];if(WU.has(l))a=!0;else if(YU(l))i[l]=e;else{const t=eB(e,gB[l]);l.startsWith("origin")?(o=!0,s[l]=t):n[l]=t}}if(t.transform||(a||r?n.transform=function(e,t,r){let n="",i=!0;for(let s=0;s<yB;s++){const a=GU[s],o=e[a];if(void 0===o)continue;let l=!0;if(l="number"==typeof o?o===(a.startsWith("scale")?1:0):0===parseFloat(o),!l||r){const e=eB(o,gB[a]);l||(i=!1,n+=`${mB[a]||a}(${e}) `),r&&(t[a]=e)}}return n=n.trim(),r?n=r(t,i?"":n):i&&(n="none"),n}(t,e.transform,r):n.transform&&(n.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:r=0}=s;n.transformOrigin=`${e} ${t} ${r}`}}const bB={offset:"stroke-dashoffset",array:"stroke-dasharray"},wB={offset:"strokeDashoffset",array:"strokeDasharray"};function xB(e,t,r){return"string"==typeof e?e:lB.transform(t+r*e)}function SB(e,{attrX:t,attrY:r,attrScale:n,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},u,d){if(vB(e,c,d),u)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:h,style:f,dimensions:p}=e;h.transform&&(p&&(f.transform=h.transform),delete h.transform),p&&(void 0!==i||void 0!==s||f.transform)&&(f.transformOrigin=function(e,t,r){return`${xB(t,e.x,e.width)} ${xB(r,e.y,e.height)}`}(p,void 0!==i?i:.5,void 0!==s?s:.5)),void 0!==t&&(h.x=t),void 0!==r&&(h.y=r),void 0!==n&&(h.scale=n),void 0!==a&&function(e,t,r=1,n=0,i=!0){e.pathLength=1;const s=i?bB:wB;e[s.offset]=lB.transform(-n);const a=lB.transform(t),o=lB.transform(r);e[s.array]=`${a} ${o}`}(h,a,o,l,!1)}const EB=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),TB=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),kB=e=>"string"==typeof e&&"svg"===e.toLowerCase();function AB(e,{style:t,vars:r},n,i){Object.assign(e.style,t,i&&i.getProjectionStyles(n));for(const s in r)e.style.setProperty(s,r[s])}const _B=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function CB(e,t,r,n){AB(e,t,void 0,n);for(const i in t.attrs)e.setAttribute(_B.has(i)?i:PU(i),t.attrs[i])}const PB={};function DB(e,{layout:t,layoutId:r}){return WU.has(e)||e.startsWith("origin")||(t||void 0!==r)&&(!!PB[e]||"opacity"===e)}function RB(e,t,r){var n;const{style:i}=e,s={};for(const a in i)(qU(i[a])||t.style&&qU(t.style[a])||DB(a,e)||void 0!==(null===(n=null==r?void 0:r.getValue(a))||void 0===n?void 0:n.liveStyle))&&(s[a]=i[a]);return s}function IB(e,t,r){const n=RB(e,t,r);for(const i in e)if(qU(e[i])||qU(t[i])){n[-1!==GU.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]}return n}const OB=["x","y","width","height","cx","cy","r"],NB={useVisualState:KU({scrapeMotionValuesFromProps:IB,createRenderState:TB,onUpdate:({props:e,prevProps:t,current:r,renderState:n,latestValues:i})=>{if(!r)return;let s=!!e.drag;if(!s)for(const o in i)if(WU.has(o)){s=!0;break}if(!s)return;let a=!t;if(t)for(let o=0;o<OB.length;o++){const r=OB[o];e[r]!==t[r]&&(a=!0)}a&&sU.read((()=>{!function(e,t){try{t.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(Jce){t.dimensions={x:0,y:0,width:0,height:0}}}(r,n),sU.render((()=>{SB(n,i,kB(r.tagName),e.transformTemplate),CB(r,n)}))}))}})},jB={useVisualState:KU({scrapeMotionValuesFromProps:RB,createRenderState:EB})};function LB(e,t,r){for(const n in t)qU(t[n])||DB(n,r)||(e[n]=t[n])}function MB(e,t){const r={};return LB(r,e.style||{},e),Object.assign(r,function({transformTemplate:e},t){return q.useMemo((()=>{const r={style:{},transform:{},transformOrigin:{},vars:{}};return vB(r,t,e),Object.assign({},r.vars,r.style)}),[t])}(e,t)),r}function FB(e,t){const r={},n=MB(e,t);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}function UB(e,t,r,n){const i=q.useMemo((()=>{const r={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return SB(r,t,kB(n),e.transformTemplate),{...r.attrs,style:{...r.style}}}),[t]);if(e.style){const t={};LB(t,e.style,e),i.style={...t,...i.style}}return i}function BB(e=!1){return(t,r,n,{latestValues:i},s)=>{const a=(UU(t)?UB:FB)(r,i,s,t),o=function(e,t,r){const n={};for(const i in e)"values"===i&&"object"==typeof e.values||(pU(i)||!0===r&&fU(i)||!t&&!fU(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}(r,"string"==typeof t,e),l=t!==q.Fragment?{...o,...a,ref:n}:{},{children:c}=r,u=q.useMemo((()=>qU(c)?c.get():c),[c]);return q.createElement(t,{...l,children:u})}}function $B(e,t){return function(r,{forwardMotionProps:n}={forwardMotionProps:!1}){return LU({...UU(r)?NB:jB,preloadedFeatures:e,useRender:BB(n),createVisualElement:t,Component:r})}}function zB(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function qB(e,t,r){const n=e.getProps();return $U(n,t,void 0!==r?r:n.custom,e)}const VB=JF((()=>void 0!==window.ScrollTimeline));class KB{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map((e=>"finished"in e?e.finished:e)))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map((r=>VB()&&r.attachTimeline?r.attachTimeline(e):"function"==typeof t?t(r):void 0));return()=>{r.forEach(((e,t)=>{e&&e(),this.animations[t].stop()}))}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach((t=>t[e]()))}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class HB extends KB{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function GB(e,t){return e?e[t]||e.default||e:void 0}const WB=2e4;function QB(e){let t=0;let r=e.next(t);for(;!r.done&&t<WB;)t+=50,r=e.next(t);return t>=WB?1/0:t}function YB(e){return"function"==typeof e}function XB(e,t){e.timeline=t,e.onfinish=null}const JB=e=>Array.isArray(e)&&"number"==typeof e[0],ZB={linearEasing:void 0};function e$(e,t){const r=JF(e);return()=>{var e;return null!==(e=ZB[t])&&void 0!==e?e:r()}}const t$=e$((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(Jce){return!1}return!0}),"linearEasing"),r$=(e,t,r=10)=>{let n="";const i=Math.max(Math.round(t/r),2);for(let s=0;s<i;s++)n+=e(ZF(0,i-1,s))+", ";return`linear(${n.substring(0,n.length-2)})`};function n$(e){return Boolean("function"==typeof e&&t$()||!e||"string"==typeof e&&(e in s$||t$())||JB(e)||Array.isArray(e)&&e.every(n$))}const i$=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,s$={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:i$([0,.65,.55,1]),circOut:i$([.55,0,1,.45]),backIn:i$([.31,.01,.66,-.59]),backOut:i$([.33,1.53,.69,.99])};function a$(e,t){return e?"function"==typeof e&&t$()?r$(e,t):JB(e)?i$(e):Array.isArray(e)?e.map((e=>a$(e,t)||s$.easeOut)):s$[e]:void 0}const o$={x:!1,y:!1};function l$(){return o$.x||o$.y}function c$(e,t){const r=function(e,t,r){var n;if(e instanceof Element)return[e];if("string"==typeof e){let i=document;t&&(i=t.current);const s=null!==(n=null==r?void 0:r[e])&&void 0!==n?n:i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}(e),n=new AbortController;return[r,{passive:!0,...t,signal:n.signal},()=>n.abort()]}function u$(e){return t=>{"touch"===t.pointerType||l$()||e(t)}}const d$=(e,t)=>!!t&&(e===t||d$(e,t.parentElement)),h$=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,f$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const p$=new WeakSet;function g$(e){return t=>{"Enter"===t.key&&e(t)}}function m$(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function y$(e){return h$(e)&&!l$()}function v$(e,t,r={}){const[n,i,s]=c$(e,r),a=e=>{const n=e.currentTarget;if(!y$(e)||p$.has(n))return;p$.add(n);const s=t(e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),y$(e)&&p$.has(n)&&(p$.delete(n),"function"==typeof s&&s(e,{success:t}))},o=e=>{a(e,r.useGlobalTarget||d$(n,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",o,i),window.addEventListener("pointercancel",l,i)};return n.forEach((e=>{(function(e){return f$.has(e.tagName)||-1!==e.tabIndex})(e)||null!==e.getAttribute("tabindex")||(e.tabIndex=0);(r.useGlobalTarget?window:e).addEventListener("pointerdown",a,i),e.addEventListener("focus",(e=>((e,t)=>{const r=e.currentTarget;if(!r)return;const n=g$((()=>{if(p$.has(r))return;m$(r,"down");const e=g$((()=>{m$(r,"up")}));r.addEventListener("keyup",e,t),r.addEventListener("blur",(()=>m$(r,"cancel")),t)}));r.addEventListener("keydown",n,t),r.addEventListener("blur",(()=>r.removeEventListener("keydown",n)),t)})(e,i)),i)})),s}const b$=new Set(["width","height","top","left","right","bottom",...GU]);let w$;function x$(){w$=void 0}const S$={now:()=>(void 0===w$&&S$.set(oU.isProcessing||rU?oU.timestamp:performance.now()),w$),set:e=>{w$=e,queueMicrotask(x$)}};function E$(e,t){-1===e.indexOf(t)&&e.push(t)}function T$(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class k${constructor(){this.subscriptions=[]}add(e){return E$(this.subscriptions,e),()=>T$(this.subscriptions,e)}notify(e,t,r){const n=this.subscriptions.length;if(n)if(1===n)this.subscriptions[0](e,t,r);else for(let i=0;i<n;i++){const n=this.subscriptions[i];n&&n(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function A$(e,t){return t?e*(1e3/t):0}class _${constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(e,t=!0)=>{const r=S$.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),t&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=S$.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new k$);const r=this.events[e].add(t);return"change"===e?()=>{r(),sU.read((()=>{this.events.change.getSize()||this.stop()}))}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=S$.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return A$(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function C$(e,t){return new _$(e,t)}function P$(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,C$(r))}function D$(e,t){const r=e.getValue("willChange");if(n=r,Boolean(qU(n)&&n.add))return r.add(t);var n}function R$(e){return e.props[DU]}const I$=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function O$(e,t,r,n){if(e===t&&r===n)return YF;const i=t=>function(e,t,r,n,i){let s,a,o=0;do{a=t+(r-t)/2,s=I$(a,n,i)-e,s>0?r=a:t=a}while(Math.abs(s)>1e-7&&++o<12);return a}(t,0,1,e,r);return e=>0===e||1===e?e:I$(i(e),t,n)}const N$=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,j$=e=>t=>1-e(1-t),L$=O$(.33,1.53,.69,.99),M$=j$(L$),F$=N$(M$),U$=e=>(e*=2)<1?.5*M$(e):.5*(2-Math.pow(2,-10*(e-1))),B$=e=>1-Math.sin(Math.acos(e)),$$=j$(B$),z$=N$(B$),q$=e=>/^0[^.\s]+$/u.test(e);const V$=e=>Math.round(1e5*e)/1e5,K$=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const H$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,G$=(e,t)=>r=>Boolean("string"==typeof r&&H$.test(r)&&r.startsWith(e)||t&&!function(e){return null==e}(r)&&Object.prototype.hasOwnProperty.call(r,t)),W$=(e,t,r)=>n=>{if("string"!=typeof n)return n;const[i,s,a,o]=n.match(K$);return{[e]:parseFloat(i),[t]:parseFloat(s),[r]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},Q$={...rB,transform:e=>Math.round((e=>tB(0,255,e))(e))},Y$={test:G$("rgb","red"),parse:W$("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Q$.transform(e)+", "+Q$.transform(t)+", "+Q$.transform(r)+", "+V$(nB.transform(n))+")"};const X$={test:G$("#"),parse:function(e){let t="",r="",n="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}},transform:Y$.transform},J$={test:G$("hsl","hue"),parse:W$("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+oB.transform(V$(t))+", "+oB.transform(V$(r))+", "+V$(nB.transform(n))+")"},Z$={test:e=>Y$.test(e)||X$.test(e)||J$.test(e),parse:e=>Y$.test(e)?Y$.parse(e):J$.test(e)?J$.parse(e):X$.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?Y$.transform(e):J$.transform(e)},ez=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const tz="number",rz="color",nz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function iz(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},i=[];let s=0;const a=t.replace(nz,(e=>(Z$.test(e)?(n.color.push(s),i.push(rz),r.push(Z$.parse(e))):e.startsWith("var(")?(n.var.push(s),i.push("var"),r.push(e)):(n.number.push(s),i.push(tz),r.push(parseFloat(e))),++s,"${}"))).split("${}");return{values:r,split:a,indexes:n,types:i}}function sz(e){return iz(e).values}function az(e){const{split:t,types:r}=iz(e),n=t.length;return e=>{let i="";for(let s=0;s<n;s++)if(i+=t[s],void 0!==e[s]){const t=r[s];i+=t===tz?V$(e[s]):t===rz?Z$.transform(e[s]):e[s]}return i}}const oz=e=>"number"==typeof e?0:e;const lz={test:function(e){var t,r;return isNaN(e)&&"string"==typeof e&&((null===(t=e.match(K$))||void 0===t?void 0:t.length)||0)+((null===(r=e.match(ez))||void 0===r?void 0:r.length)||0)>0},parse:sz,createTransformer:az,getAnimatableNone:function(e){const t=sz(e);return az(e)(t.map(oz))}},cz=new Set(["brightness","contrast","saturate","opacity"]);function uz(e){const[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[n]=r.match(K$)||[];if(!n)return e;const i=r.replace(n,"");let s=cz.has(t)?1:0;return n!==r&&(s*=100),t+"("+s+i+")"}const dz=/\b([a-z-]*)\(.*?\)/gu,hz={...lz,getAnimatableNone:e=>{const t=e.match(dz);return t?t.map(uz).join(" "):e}},fz={...gB,color:Z$,backgroundColor:Z$,outlineColor:Z$,fill:Z$,stroke:Z$,borderColor:Z$,borderTopColor:Z$,borderRightColor:Z$,borderBottomColor:Z$,borderLeftColor:Z$,filter:hz,WebkitFilter:hz},pz=e=>fz[e];function gz(e,t){let r=pz(e);return r!==hz&&(r=lz),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const mz=new Set(["auto","none","0"]);const yz=e=>e===rB||e===lB,vz=(e,t)=>parseFloat(e.split(", ")[t]),bz=(e,t)=>(r,{transform:n})=>{if("none"===n||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/u);if(i)return vz(i[1],t);{const t=n.match(/^matrix\((.+)\)$/u);return t?vz(t[1],e):0}},wz=new Set(["x","y","z"]),xz=GU.filter((e=>!wz.has(e)));const Sz={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:bz(4,13),y:bz(5,14)};Sz.translateX=Sz.x,Sz.translateY=Sz.y;const Ez=new Set;let Tz=!1,kz=!1;function Az(){if(kz){const e=Array.from(Ez).filter((e=>e.needsMeasurement)),t=new Set(e.map((e=>e.element))),r=new Map;t.forEach((e=>{const t=function(e){const t=[];return xz.forEach((r=>{const n=e.getValue(r);void 0!==n&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))})),t}(e);t.length&&(r.set(e,t),e.render())})),e.forEach((e=>e.measureInitialState())),t.forEach((e=>{e.render();const t=r.get(e);t&&t.forEach((([t,r])=>{var n;null===(n=e.getValue(t))||void 0===n||n.set(r)}))})),e.forEach((e=>e.measureEndState())),e.forEach((e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)}))}kz=!1,Tz=!1,Ez.forEach((e=>e.complete())),Ez.clear()}function _z(){Ez.forEach((e=>{e.readKeyframes(),e.needsMeasurement&&(kz=!0)}))}class Cz{constructor(e,t,r,n,i,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=n,this.element=i,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ez.add(this),Tz||(Tz=!0,sU.read(_z),sU.resolveKeyframes(Az))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:n}=this;for(let i=0;i<e.length;i++)if(null===e[i])if(0===i){const i=null==n?void 0:n.get(),s=e[e.length-1];if(void 0!==i)e[0]=i;else if(r&&t){const n=r.readValue(t,s);null!=n&&(e[0]=n)}void 0===e[0]&&(e[0]=s),n&&void 0===i&&n.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ez.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ez.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Pz=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Dz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Rz(e,t,r=1){const[n,i]=function(e){const t=Dz.exec(e);if(!t)return[,];const[,r,n,i]=t;return[`--${null!=r?r:n}`,i]}(e);if(!n)return;const s=window.getComputedStyle(t).getPropertyValue(n);if(s){const e=s.trim();return Pz(e)?parseFloat(e):e}return JU(i)?Rz(i,t,r+1):i}const Iz=e=>t=>t.test(e),Oz=[rB,lB,oB,aB,uB,cB,{test:e=>"auto"===e,parse:e=>e}],Nz=e=>Oz.find(Iz(e));class jz extends Cz{constructor(e,t,r,n,i){super(e,t,r,n,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let r=e[o];if("string"==typeof r&&(r=r.trim(),JU(r))){const n=Rz(r,t.current);void 0!==n&&(e[o]=n),o===e.length-1&&(this.finalKeyframe=r)}}if(this.resolveNoneKeyframes(),!b$.has(r)||2!==e.length)return;const[n,i]=e,s=Nz(n),a=Nz(i);if(s!==a)if(yz(s)&&yz(a))for(let o=0;o<e.length;o++){const t=e[o];"string"==typeof t&&(e[o]=parseFloat(t))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)("number"==typeof(n=e[i])?0===n:null===n||"none"===n||"0"===n||q$(n))&&r.push(i);var n;r.length&&function(e,t,r){let n,i=0;for(;i<e.length&&!n;){const t=e[i];"string"==typeof t&&!mz.has(t)&&iz(t).values.length&&(n=e[i]),i++}if(n&&r)for(const s of t)e[s]=gz(r,n)}(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;"height"===r&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Sz[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const n=t[t.length-1];void 0!==n&&e.getValue(r,n).jump(n,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const i=t.getValue(r);i&&i.jump(this.measuredOrigin,!1);const s=n.length-1,a=n[s];n[s]=Sz[r](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==a&&void 0===this.finalKeyframe&&(this.finalKeyframe=a),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach((([e,r])=>{t.getValue(e).set(r)})),this.resolveNoneKeyframes()}}const Lz=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!lz.test(e)&&"0"!==e||e.startsWith("url(")));const Mz=e=>null!==e;function Fz(e,{repeat:t,repeatType:r="loop"},n){const i=e.filter(Mz),s=t&&"loop"!==r&&t%2==1?0:i.length-1;return s&&void 0!==n?n:i[s]}class Uz{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:s="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=S$.now(),this.options={autoplay:e,delay:t,type:r,repeat:n,repeatDelay:i,repeatType:s,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(_z(),Az()),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=S$.now(),this.hasAttemptedResolve=!0;const{name:r,type:n,velocity:i,delay:s,onComplete:a,onUpdate:o,isGenerator:l}=this.options;if(!l&&!function(e,t,r,n){const i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;const s=e[e.length-1],a=Lz(i,t),o=Lz(s,t);return!(!a||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}(e)||("spring"===r||YB(r))&&n)}(e,r,n,i)){if(!s)return o&&o(Fz(e,this.options,t)),a&&a(),void this.resolveFinishedPromise();this.options.duration=0}const c=this.initPlayback(e,t);!1!==c&&(this._resolved={keyframes:e,finalKeyframe:t,...c},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise((e=>{this.resolveFinishedPromise=e}))}}const Bz=(e,t,r)=>e+(t-e)*r;function $z(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function zz(e,t){return r=>r>0?t:e}const qz=(e,t,r)=>{const n=e*e,i=r*(t*t-n)+n;return i<0?0:Math.sqrt(i)},Vz=[X$,Y$,J$];function Kz(e){const t=(r=e,Vz.find((e=>e.test(r))));var r;if(!Boolean(t))return!1;let n=t.parse(e);return t===J$&&(n=function({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,r/=100;let i=0,s=0,a=0;if(t/=100){const n=r<.5?r*(1+t):r+t-r*t,o=2*r-n;i=$z(o,n,e+1/3),s=$z(o,n,e),a=$z(o,n,e-1/3)}else i=s=a=r;return{red:Math.round(255*i),green:Math.round(255*s),blue:Math.round(255*a),alpha:n}}(n)),n}const Hz=(e,t)=>{const r=Kz(e),n=Kz(t);if(!r||!n)return zz(e,t);const i={...r};return e=>(i.red=qz(r.red,n.red,e),i.green=qz(r.green,n.green,e),i.blue=qz(r.blue,n.blue,e),i.alpha=Bz(r.alpha,n.alpha,e),Y$.transform(i))},Gz=(e,t)=>r=>t(e(r)),Wz=(...e)=>e.reduce(Gz),Qz=new Set(["none","hidden"]);function Yz(e,t){return r=>Bz(e,t,r)}function Xz(e){return"number"==typeof e?Yz:"string"==typeof e?JU(e)?zz:Z$.test(e)?Hz:eq:Array.isArray(e)?Jz:"object"==typeof e?Z$.test(e)?Hz:Zz:zz}function Jz(e,t){const r=[...e],n=r.length,i=e.map(((e,r)=>Xz(e)(e,t[r])));return e=>{for(let t=0;t<n;t++)r[t]=i[t](e);return r}}function Zz(e,t){const r={...e,...t},n={};for(const i in r)void 0!==e[i]&&void 0!==t[i]&&(n[i]=Xz(e[i])(e[i],t[i]));return e=>{for(const t in n)r[t]=n[t](e);return r}}const eq=(e,t)=>{const r=lz.createTransformer(t),n=iz(e),i=iz(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?Qz.has(e)&&!i.values.length||Qz.has(t)&&!n.values.length?function(e,t){return Qz.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}(e,t):Wz(Jz(function(e,t){var r;const n=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],o=e.indexes[a][i[a]],l=null!==(r=e.values[o])&&void 0!==r?r:0;n[s]=l,i[a]++}return n}(n,i),i.values),r):zz(e,t)};function tq(e,t,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r)return Bz(e,t,r);return Xz(e)(e,t)}function rq(e,t,r){const n=Math.max(t-5,0);return A$(r-e(n),t-n)}const nq=100,iq=10,sq=1,aq=0,oq=800,lq=.3,cq=.3,uq={granular:.01,default:2},dq={granular:.005,default:.5},hq=.01,fq=10,pq=.05,gq=1,mq=.001;function yq({duration:e=oq,bounce:t=lq,velocity:r=aq,mass:n=sq}){let i,s,a=1-t;a=tB(pq,gq,a),e=tB(hq,fq,tU(e)),a<1?(i=t=>{const n=t*a,i=n*e,s=n-r,o=bq(t,a),l=Math.exp(-i);return mq-s/o*l},s=t=>{const n=t*a*e,s=n*r+r,o=Math.pow(a,2)*Math.pow(t,2)*e,l=Math.exp(-n),c=bq(Math.pow(t,2),a);return(-i(t)+mq>0?-1:1)*((s-o)*l)/c}):(i=t=>Math.exp(-t*e)*((t-r)*e+1)-.001,s=t=>Math.exp(-t*e)*(e*e*(r-t)));const o=function(e,t,r){let n=r;for(let i=1;i<vq;i++)n-=e(n)/t(n);return n}(i,s,5/e);if(e=eU(e),isNaN(o))return{stiffness:nq,damping:iq,duration:e};{const t=Math.pow(o,2)*n;return{stiffness:t,damping:2*a*Math.sqrt(n*t),duration:e}}}const vq=12;function bq(e,t){return e*Math.sqrt(1-t*t)}const wq=["duration","bounce"],xq=["stiffness","damping","mass"];function Sq(e,t){return t.some((t=>void 0!==e[t]))}function Eq(e=cq,t=lq){const r="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:i}=r;const s=r.keyframes[0],a=r.keyframes[r.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=function(e){let t={velocity:aq,stiffness:nq,damping:iq,mass:sq,isResolvedFromDuration:!1,...e};if(!Sq(e,xq)&&Sq(e,wq))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(1.2*r),i=n*n,s=2*tB(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:sq,stiffness:i,damping:s}}else{const r=yq(e);t={...t,...r,mass:sq},t.isResolvedFromDuration=!0}return t}({...r,velocity:-tU(r.velocity||0)}),p=h||0,g=c/(2*Math.sqrt(l*u)),m=a-s,y=tU(Math.sqrt(l/u)),v=Math.abs(m)<5;let b;if(n||(n=v?uq.granular:uq.default),i||(i=v?dq.granular:dq.default),g<1){const e=bq(y,g);b=t=>{const r=Math.exp(-g*y*t);return a-r*((p+g*y*m)/e*Math.sin(e*t)+m*Math.cos(e*t))}}else if(1===g)b=e=>a-Math.exp(-y*e)*(m+(p+y*m)*e);else{const e=y*Math.sqrt(g*g-1);b=t=>{const r=Math.exp(-g*y*t),n=Math.min(e*t,300);return a-r*((p+g*y*m)*Math.sinh(n)+e*m*Math.cosh(n))/e}}const w={calculatedDuration:f&&d||null,next:e=>{const t=b(e);if(f)o.done=e>=d;else{let r=0;g<1&&(r=0===e?eU(p):rq(b,e,t));const s=Math.abs(r)<=n,l=Math.abs(a-t)<=i;o.done=s&&l}return o.value=o.done?a:t,o},toString:()=>{const e=Math.min(QB(w),WB),t=r$((t=>w.next(e*t).value),e,30);return e+"ms "+t}};return w}function Tq({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:u}){const d=e[0],h={done:!1,value:d},f=e=>void 0===o?l:void 0===l||Math.abs(o-e)<Math.abs(l-e)?o:l;let p=r*t;const g=d+p,m=void 0===a?g:a(g);m!==g&&(p=m-d);const y=e=>-p*Math.exp(-e/n),v=e=>m+y(e),b=e=>{const t=y(e),r=v(e);h.done=Math.abs(t)<=c,h.value=h.done?m:r};let w,x;const S=e=>{var t;(t=h.value,void 0!==o&&t<o||void 0!==l&&t>l)&&(w=e,x=Eq({keyframes:[h.value,f(h.value)],velocity:rq(v,e,h.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return S(0),{calculatedDuration:null,next:e=>{let t=!1;return x||void 0!==w||(t=!0,b(e),S(e)),void 0!==w&&e>=w?x.next(e-w):(!t&&b(e),h)}}}const kq=O$(.42,0,1,1),Aq=O$(0,0,.58,1),_q=O$(.42,0,.58,1),Cq={linear:YF,easeIn:kq,easeInOut:_q,easeOut:Aq,circIn:B$,circInOut:z$,circOut:$$,backIn:M$,backInOut:F$,backOut:L$,anticipate:U$},Pq=e=>{if(JB(e)){XF(4===e.length);const[t,r,n,i]=e;return O$(t,r,n,i)}return"string"==typeof e?Cq[e]:e};function Dq(e,t,{clamp:r=!0,ease:n,mixer:i}={}){const s=e.length;if(XF(s===t.length),1===s)return()=>t[0];if(2===s&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,r){const n=[],i=r||tq,s=e.length-1;for(let a=0;a<s;a++){let r=i(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||YF:t;r=Wz(e,r)}n.push(r)}return n}(t,n,i),l=o.length,c=r=>{if(a&&r<e[0])return t[0];let n=0;if(l>1)for(;n<e.length-2&&!(r<e[n+1]);n++);const i=ZF(e[n],e[n+1],r);return o[n](i)};return r?t=>c(tB(e[0],e[s-1],t)):c}function Rq(e){const t=[0];return function(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const i=ZF(0,t,n);e.push(Bz(r,1,i))}}(t,e.length-1),t}function Iq({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const i=(e=>Array.isArray(e)&&"number"!=typeof e[0])(n)?n.map(Pq):Pq(n),s={done:!1,value:t[0]},a=function(e,t){return e.map((e=>e*t))}(r&&r.length===t.length?r:Rq(t),e),o=Dq(a,t,{ease:Array.isArray(i)?i:(l=t,c=i,l.map((()=>c||_q)).splice(0,l.length-1))});var l,c;return{calculatedDuration:e,next:t=>(s.value=o(t),s.done=t>=e,s)}}const Oq=e=>{const t=({timestamp:t})=>e(t);return{start:()=>sU.update(t,!0),stop:()=>aU(t),now:()=>oU.isProcessing?oU.timestamp:S$.now()}},Nq={decay:Tq,inertia:Tq,tween:Iq,keyframes:Iq,spring:Eq},jq=e=>e/100;class Lq extends Uz{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:e}=this.options;e&&e()};const{name:t,motionValue:r,element:n,keyframes:i}=this.options,s=(null==n?void 0:n.KeyframeResolver)||Cz;this.resolver=new s(i,((e,t)=>this.onKeyframesResolved(e,t)),t,r,n),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:n=0,repeatType:i,velocity:s=0}=this.options,a=YB(t)?t:Nq[t]||Iq;let o,l;a!==Iq&&"number"!=typeof e[0]&&(o=Wz(jq,tq(e[0],e[1])),e=[0,100]);const c=a({...this.options,keyframes:e});"mirror"===i&&(l=a({...this.options,keyframes:[...e].reverse(),velocity:-s})),null===c.calculatedDuration&&(c.calculatedDuration=QB(c));const{calculatedDuration:u}=c,d=u+n;return{generator:c,mirroredGenerator:l,mapPercentToKeyframes:o,calculatedDuration:u,resolvedDuration:d,totalDuration:d*(r+1)-n}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}const{finalKeyframe:n,generator:i,mirroredGenerator:s,mapPercentToKeyframes:a,keyframes:o,calculatedDuration:l,totalDuration:c,resolvedDuration:u}=r;if(null===this.startTime)return i.next(0);const{delay:d,repeat:h,repeatType:f,repeatDelay:p,onUpdate:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const m=this.currentTime-d*(this.speed>=0?1:-1),y=this.speed>=0?m<0:m>c;this.currentTime=Math.max(m,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=c);let v=this.currentTime,b=i;if(h){const e=Math.min(this.currentTime,c)/u;let t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,t=Math.min(t,h+1);Boolean(t%2)&&("reverse"===f?(r=1-r,p&&(r-=p/u)):"mirror"===f&&(b=s)),v=tB(0,1,r)*u}const w=y?{done:!1,value:o[0]}:b.next(v);a&&(w.value=a(w.value));let{done:x}=w;y||null===l||(x=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const S=null===this.holdTime&&("finished"===this.state||"running"===this.state&&x);return S&&void 0!==n&&(w.value=Fz(o,this.options,n)),g&&g(w.value),S&&this.finish(),w}get duration(){const{resolved:e}=this;return e?tU(e.calculatedDuration):0}get time(){return tU(this.currentTime)}set time(e){e=eU(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=tU(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:e=Oq,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e((e=>this.tick(e)))),t&&t();const n=this.driver.now();null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=n):this.startTime=null!=r?r:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;this._resolved?(this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Mq=new Set(["opacity","clipPath","filter","transform"]);function Fq(e,t,r,{delay:n=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const c={[t]:r};l&&(c.offset=l);const u=a$(o,i);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:n,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:"reverse"===a?"alternate":"normal"})}const Uq=JF((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));const Bq={anticipate:U$,backInOut:F$,circInOut:z$};class $q extends Uz{constructor(e){super(e);const{name:t,motionValue:r,element:n,keyframes:i}=this.options;this.resolver=new jz(i,((e,t)=>this.onKeyframesResolved(e,t)),t,r,n),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:n,ease:i,type:s,motionValue:a,name:o,startTime:l}=this.options;if(!a.owner||!a.owner.current)return!1;if("string"==typeof i&&t$()&&i in Bq&&(i=Bq[i]),function(e){return YB(e.type)||"spring"===e.type||!n$(e.ease)}(this.options)){const{onComplete:t,onUpdate:a,motionValue:o,element:l,...c}=this.options,u=function(e,t){const r=new Lq({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:e[0]};const i=[];let s=0;for(;!n.done&&s<2e4;)n=r.sample(s),i.push(n.value),s+=10;return{times:void 0,keyframes:i,duration:s-10,ease:"linear"}}(e,c);1===(e=u.keyframes).length&&(e[1]=e[0]),r=u.duration,n=u.times,i=u.ease,s="keyframes"}const c=Fq(a.owner.current,o,e,{...this.options,duration:r,times:n,ease:i});return c.startTime=null!=l?l:this.calcStartTime(),this.pendingTimeline?(XB(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:r}=this.options;a.set(Fz(e,this.options,t)),r&&r(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:n,type:s,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return tU(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return tU(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=eU(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){const{resolved:t}=this;if(!t)return YF;const{animation:r}=t;XB(r,e)}else this.pendingTimeline=e;return YF}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:n,type:i,ease:s,times:a}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){const{motionValue:e,onUpdate:t,onComplete:o,element:l,...c}=this.options,u=new Lq({...c,keyframes:r,duration:n,type:i,ease:s,times:a,isGenerator:!0}),d=eU(this.time);e.setWithVelocity(u.sample(d-10).value,u.sample(d).value,10)}const{onStop:o}=this.options;o&&o(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:n,repeatType:i,damping:s,type:a}=e;if(!(t&&t.owner&&t.owner.current instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:l}=t.owner.getProps();return Uq()&&r&&Mq.has(r)&&!o&&!l&&!n&&"mirror"!==i&&0!==s&&"inertia"!==a}}const zq={type:"spring",stiffness:500,damping:25,restSpeed:10},qq={type:"keyframes",duration:.8},Vq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Kq=(e,{keyframes:t})=>t.length>2?qq:WU.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:zq:Vq;const Hq=(e,t,r,n={},i,s)=>a=>{const o=GB(n,e)||{},l=o.delay||n.delay||0;let{elapsed:c=0}=n;c-=eU(l);let u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:i};(function({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length})(o)||(u={...u,...Kq(e,u)}),u.duration&&(u.duration=eU(u.duration)),u.repeatDelay&&(u.repeatDelay=eU(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let d=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(u.duration=0,0===u.delay&&(d=!0)),d&&!s&&void 0!==t.get()){const e=Fz(u.keyframes,o);if(void 0!==e)return sU.update((()=>{u.onUpdate(e),u.onComplete()})),new HB([])}return!s&&$q.supports(u)?new $q(u):new Lq(u)};function Gq({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&!0!==t[r];return t[r]=!1,n}function Wq(e,t,{delay:r=0,transitionOverride:n,type:i}={}){var s;let{transition:a=e.getDefaultTransition(),transitionEnd:o,...l}=t;n&&(a=n);const c=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const d in l){const t=e.getValue(d,null!==(s=e.latestValues[d])&&void 0!==s?s:null),n=l[d];if(void 0===n||u&&Gq(u,d))continue;const i={delay:r,...GB(a||{},d)};let o=!1;if(window.MotionHandoffAnimation){const t=R$(e);if(t){const e=window.MotionHandoffAnimation(t,d,sU);null!==e&&(i.startTime=e,o=!0)}}D$(e,d),t.start(Hq(d,t,n,e.shouldReduceMotion&&b$.has(d)?{type:!1}:i,e,o));const h=t.animation;h&&c.push(h)}return o&&Promise.all(c).then((()=>{sU.update((()=>{o&&function(e,t){const r=qB(e,t);let{transitionEnd:n={},transition:i={},...s}=r||{};s={...s,...n};for(const o in s)P$(e,o,(a=s[o],zU(a)?a[a.length-1]||0:a));var a}(e,o)}))})),c}function Qq(e,t,r={}){var n;const i=qB(e,t,"exit"===r.type?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(s=r.transitionOverride);const a=i?()=>Promise.all(Wq(e,i,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(n=0)=>{const{delayChildren:i=0,staggerChildren:a,staggerDirection:o}=s;return function(e,t,r=0,n=0,i=1,s){const a=[],o=(e.variantChildren.size-1)*n,l=1===i?(e=0)=>e*n:(e=0)=>o-e*n;return Array.from(e.variantChildren).sort(Yq).forEach(((e,n)=>{e.notify("AnimationStart",t),a.push(Qq(e,t,{...s,delay:r+l(n)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(a)}(e,t,i+n,a,o,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[e,t]="beforeChildren"===l?[a,o]:[o,a];return e().then((()=>t()))}return Promise.all([a(),o(r.delay)])}function Yq(e,t){return e.sortNodePosition(t)}const Xq=xU.length;function Jq(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Jq(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let r=0;r<Xq;r++){const n=xU[r],i=e.props[n];(vU(i)||!1===i)&&(t[n]=i)}return t}const Zq=[...wU].reverse(),eV=wU.length;function tV(e){return t=>Promise.all(t.map((({animation:t,options:r})=>function(e,t,r={}){let n;if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map((t=>Qq(e,t,r)));n=Promise.all(i)}else if("string"==typeof t)n=Qq(e,t,r);else{const i="function"==typeof t?qB(e,t,r.custom):t;n=Promise.all(Wq(e,i,r))}return n.then((()=>{e.notify("AnimationComplete",t)}))}(e,t,r))))}function rV(e){let t=tV(e),r=sV(),n=!0;const i=t=>(r,n)=>{var i;const s=qB(e,n,"exit"===t?null===(i=e.presenceContext)||void 0===i?void 0:i.custom:void 0);if(s){const{transition:e,transitionEnd:t,...n}=s;r={...r,...n,...t}}return r};function s(s){const{props:a}=e,o=Jq(e.parent)||{},l=[],c=new Set;let u={},d=1/0;for(let t=0;t<eV;t++){const h=Zq[t],f=r[h],p=void 0!==a[h]?a[h]:o[h],g=vU(p),m=h===s?f.isActive:null;!1===m&&(d=t);let y=p===o[h]&&p!==a[h]&&g;if(y&&n&&e.manuallyAnimateOnMount&&(y=!1),f.protectedKeys={...u},!f.isActive&&null===m||!p&&!f.prevProp||bU(p)||"boolean"==typeof p)continue;const v=nV(f.prevProp,p);let b=v||h===s&&f.isActive&&!y&&g||t>d&&g,w=!1;const x=Array.isArray(p)?p:[p];let S=x.reduce(i(h),{});!1===m&&(S={});const{prevResolvedValues:E={}}=f,T={...E,...S},k=t=>{b=!0,c.has(t)&&(w=!0,c.delete(t)),f.needsAnimating[t]=!0;const r=e.getValue(t);r&&(r.liveStyle=!1)};for(const e in T){const t=S[e],r=E[e];if(u.hasOwnProperty(e))continue;let n=!1;n=zU(t)&&zU(r)?!zB(t,r):t!==r,n?null!=t?k(e):c.add(e):void 0!==t&&c.has(e)?k(e):f.protectedKeys[e]=!0}f.prevProp=p,f.prevResolvedValues=S,f.isActive&&(u={...u,...S}),n&&e.blockInitialAnimation&&(b=!1);b&&(!(y&&v)||w)&&l.push(...x.map((e=>({animation:e,options:{type:h}}))))}if(c.size){const t={};c.forEach((r=>{const n=e.getBaseTarget(r),i=e.getValue(r);i&&(i.liveStyle=!0),t[r]=null!=n?n:null})),l.push({animation:t})}let h=Boolean(l.length);return!n||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(h=!1),n=!1,h?t(l):Promise.resolve()}return{animateChanges:s,setActive:function(t,n){var i;if(r[t].isActive===n)return Promise.resolve();null===(i=e.variantChildren)||void 0===i||i.forEach((e=>{var r;return null===(r=e.animationState)||void 0===r?void 0:r.setActive(t,n)})),r[t].isActive=n;const a=s(t);for(const e in r)r[e].protectedKeys={};return a},setAnimateFunction:function(r){t=r(e)},getState:()=>r,reset:()=>{r=sV(),n=!0}}}function nV(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!zB(t,e)}function iV(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sV(){return{animate:iV(!0),whileInView:iV(),whileHover:iV(),whileTap:iV(),whileDrag:iV(),whileFocus:iV(),exit:iV()}}class aV{constructor(e){this.isMounted=!1,this.node=e}update(){}}let oV=0;const lV={animation:{Feature:class extends aV{constructor(e){super(e),e.animationState||(e.animationState=rV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();bU(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends aV{constructor(){super(...arguments),this.id=oV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const n=this.node.animationState.setActive("exit",!e);t&&!e&&n.then((()=>t(this.id)))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}};function cV(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function uV(e){return{point:{x:e.pageX,y:e.pageY}}}function dV(e,t,r,n){return cV(e,t,(e=>t=>h$(t)&&e(t,uV(t)))(r),n)}const hV=(e,t)=>Math.abs(e-t);class fV{constructor(e,t,{transformPagePoint:r,contextWindow:n,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=mV(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,r=function(e,t){const r=hV(e.x,t.x),n=hV(e.y,t.y);return Math.sqrt(r**2+n**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!r)return;const{point:n}=e,{timestamp:i}=oU;this.history.push({...n,timestamp:i});const{onStart:s,onMove:a}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=pV(t,this.transformPagePoint),sU.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:r,onSessionEnd:n,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=mV("pointercancel"===e.type?this.lastMoveEventInfo:pV(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,s),n&&n(e,s)},!h$(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=r,this.contextWindow=n||window;const s=pV(uV(e),this.transformPagePoint),{point:a}=s,{timestamp:o}=oU;this.history=[{...a,timestamp:o}];const{onSessionStart:l}=t;l&&l(e,mV(s,this.history)),this.removeListeners=Wz(dV(this.contextWindow,"pointermove",this.handlePointerMove),dV(this.contextWindow,"pointerup",this.handlePointerUp),dV(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),aU(this.updatePoint)}}function pV(e,t){return t?{point:t(e.point)}:e}function gV(e,t){return{x:e.x-t.x,y:e.y-t.y}}function mV({point:e},t){return{point:e,delta:gV(e,vV(t)),offset:gV(e,yV(t)),velocity:bV(t,.1)}}function yV(e){return e[0]}function vV(e){return e[e.length-1]}function bV(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const i=vV(e);for(;r>=0&&(n=e[r],!(i.timestamp-n.timestamp>eU(t)));)r--;if(!n)return{x:0,y:0};const s=tU(i.timestamp-n.timestamp);if(0===s)return{x:0,y:0};const a={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function wV(e){return e.max-e.min}function xV(e,t,r,n=.5){e.origin=n,e.originPoint=Bz(t.min,t.max,e.origin),e.scale=wV(r)/wV(t),e.translate=Bz(r.min,r.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function SV(e,t,r,n){xV(e.x,t.x,r.x,n?n.originX:void 0),xV(e.y,t.y,r.y,n?n.originY:void 0)}function EV(e,t,r){e.min=r.min+t.min,e.max=e.min+wV(t)}function TV(e,t,r){e.min=t.min-r.min,e.max=e.min+wV(t)}function kV(e,t,r){TV(e.x,t.x,r.x),TV(e.y,t.y,r.y)}function AV(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function _V(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}const CV=.35;function PV(e,t,r){return{min:DV(e,t),max:DV(e,r)}}function DV(e,t){return"number"==typeof e?e:e[t]||0}const RV=()=>({x:{min:0,max:0},y:{min:0,max:0}});function IV(e){return[e("x"),e("y")]}function OV({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function NV(e){return void 0===e||1===e}function jV({scale:e,scaleX:t,scaleY:r}){return!NV(e)||!NV(t)||!NV(r)}function LV(e){return jV(e)||MV(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function MV(e){return FV(e.x)||FV(e.y)}function FV(e){return e&&"0%"!==e}function UV(e,t,r){return r+t*(e-r)}function BV(e,t,r,n,i){return void 0!==i&&(e=UV(e,i,n)),UV(e,r,n)+t}function $V(e,t=0,r=1,n,i){e.min=BV(e.min,t,r,n,i),e.max=BV(e.max,t,r,n,i)}function zV(e,{x:t,y:r}){$V(e.x,t.translate,t.scale,t.originPoint),$V(e.y,r.translate,r.scale,r.originPoint)}const qV=.999999999999,VV=1.0000000000001;function KV(e,t){e.min=e.min+t,e.max=e.max+t}function HV(e,t,r,n,i=.5){$V(e,t,r,Bz(e.min,e.max,i),n)}function GV(e,t){HV(e.x,t.x,t.scaleX,t.scale,t.originX),HV(e.y,t.y,t.scaleY,t.scale,t.originY)}function WV(e,t){return OV(function(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}(e.getBoundingClientRect(),t))}const QV=({current:e})=>e?e.ownerDocument.defaultView:null,YV=new WeakMap;class XV{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:n}=this.getProps();this.panSession=new fV(e,{onSessionStart:e=>{const{dragSnapToOrigin:r}=this.getProps();r?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(uV(e).point)},onStart:(e,t)=>{const{drag:r,dragPropagation:n,onDragStart:i}=this.getProps();if(r&&!n&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(s=r)||"y"===s?o$[s]?null:(o$[s]=!0,()=>{o$[s]=!1}):o$.x||o$.y?null:(o$.x=o$.y=!0,()=>{o$.x=o$.y=!1}),!this.openDragLock))return;var s;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),IV((e=>{let t=this.getAxisMotionValue(e).get()||0;if(oB.test(t)){const{projection:r}=this.visualElement;if(r&&r.layout){const n=r.layout.layoutBox[e];if(n){t=wV(n)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),i&&sU.postRender((()=>i(e,t))),D$(this.visualElement,"transform");const{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:r,dragDirectionLock:n,onDirectionLock:i,onDrag:s}=this.getProps();if(!r&&!this.openDragLock)return;const{offset:a}=t;if(n&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let r=null;Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x");return r}(a),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>IV((e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:n,contextWindow:QV(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:n}=t;this.startAnimation(n);const{onDragEnd:i}=this.getProps();i&&sU.postRender((()=>i(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:n}=this.getProps();if(!r||!JV(e,n,this.currentDirection))return;const i=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=function(e,{min:t,max:r},n){return void 0!==t&&e<t?e=n?Bz(t,e,n.min):Math.max(e,t):void 0!==r&&e>r&&(e=n?Bz(r,e,n.max):Math.min(e,r)),e}(s,this.constraints[e],this.elastic[e])),i.set(s)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,i=this.constraints;t&&_U(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!n)&&function(e,{top:t,left:r,bottom:n,right:i}){return{x:AV(e.x,r,i),y:AV(e.y,t,n)}}(n.layoutBox,t),this.elastic=function(e=CV){return!1===e?e=0:!0===e&&(e=CV),{x:PV(e,"left","right"),y:PV(e,"top","bottom")}}(r),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&IV((e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const r={};return void 0!==t.min&&(r.min=t.min-e.min),void 0!==t.max&&(r.max=t.max-e.min),r}(n.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!_U(e))return!1;const r=e.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const i=function(e,t,r){const n=WV(e,r),{scroll:i}=t;return i&&(KV(n.x,i.offset.x),KV(n.y,i.offset.y)),n}(r,n.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:_V(e.x,t.x),y:_V(e.y,t.y)}}(n.layout.layoutBox,i);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=OV(e))}return s}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:n,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{},l=IV((a=>{if(!JV(a,t,this.currentDirection))return;let l=o&&o[a]||{};s&&(l={min:0,max:0});const c=n?200:1e6,u=n?40:1e7,d={type:"inertia",velocity:r?e[a]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(a,d)}));return Promise.all(l).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return D$(this.visualElement,e),r.start(Hq(e,r,0,t,this.visualElement,!1))}stopAnimation(){IV((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){IV((e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()}))}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),n=r[t];return n||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){IV((t=>{const{drag:r}=this.getProps();if(!JV(t,r,this.currentDirection))return;const{projection:n}=this.visualElement,i=this.getAxisMotionValue(t);if(n&&n.layout){const{min:r,max:s}=n.layout.layoutBox[t];i.set(e[t]-Bz(r,s,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!_U(t)||!r||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};IV((e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const r=t.get();n[e]=function(e,t){let r=.5;const n=wV(e),i=wV(t);return i>n?r=ZF(t.min,t.max-n,e.min):n>i&&(r=ZF(e.min,e.max-i,t.min)),tB(0,1,r)}({min:r,max:r},this.constraints[e])}}));const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),IV((t=>{if(!JV(t,e,null))return;const r=this.getAxisMotionValue(t),{min:i,max:s}=this.constraints[t];r.set(Bz(i,s,n[t]))}))}addListeners(){if(!this.visualElement.current)return;YV.set(this.visualElement,this);const e=dV(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:r=!0}=this.getProps();t&&r&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();_U(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,n=r.addEventListener("measure",t);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),sU.read(t);const i=cV(window,"resize",(()=>this.scalePositionWithinConstraints())),s=r.addEventListener("didUpdate",(({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(IV((t=>{const r=this.getAxisMotionValue(t);r&&(this.originPoint[t]+=e[t].translate,r.set(r.get()+e[t].translate))})),this.visualElement.render())}));return()=>{i(),e(),n(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:s=CV,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:n,dragConstraints:i,dragElastic:s,dragMomentum:a}}}function JV(e,t,r){return!(!0!==t&&t!==e||null!==r&&r!==e)}const ZV=e=>(t,r)=>{e&&sU.postRender((()=>e(t,r)))};const eK={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function tK(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const rK={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!lB.test(e))return e;e=parseFloat(e)}return`${tK(e,t.target.x)}% ${tK(e,t.target.y)}%`}},nK={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,i=lz.parse(e);if(i.length>5)return n;const s=lz.createTransformer(e),a="number"!=typeof i[0]?1:0,o=r.x.scale*t.x,l=r.y.scale*t.y;i[0+a]/=o,i[1+a]/=l;const c=Bz(o,l,.5);return"number"==typeof i[2+a]&&(i[2+a]/=c),"number"==typeof i[3+a]&&(i[3+a]/=c),s(i)}};class iK extends q.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:n}=this.props,{projection:i}=e;var s;s=aK,Object.assign(PB,s),i&&(t.group&&t.group.add(i),r&&r.register&&n&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",(()=>{this.safeToRemove()})),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),eK.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:n,isPresent:i}=this.props,s=r.projection;return s?(s.isPresent=i,n||e.layoutDependency!==t||void 0===t?s.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?s.promote():s.relegate()||sU.postRender((()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),RU.postRender((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:n}=e;n&&(n.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(n),r&&r.deregister&&r.deregister(n))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sK(e){const[t,r]=function(e=!0){const t=q.useContext(HF);if(null===t)return[!0,null];const{isPresent:r,onExitComplete:n,register:i}=t,s=q.useId();q.useEffect((()=>{e&&i(s)}),[e]);const a=q.useCallback((()=>e&&n&&n(s)),[s,n,e]);return!r&&n?[!1,a]:[!0]}(),n=q.useContext(KF);return Z.jsx(iK,{...e,layoutGroup:n,switchLayoutGroup:q.useContext(OU),isPresent:t,safeToRemove:r})}const aK={borderRadius:{...rK,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rK,borderTopRightRadius:rK,borderBottomLeftRadius:rK,borderBottomRightRadius:rK,boxShadow:nK};const oK=(e,t)=>e.depth-t.depth;class lK{constructor(){this.children=[],this.isDirty=!1}add(e){E$(this.children,e),this.isDirty=!0}remove(e){T$(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(oK),this.isDirty=!1,this.children.forEach(e)}}const cK=["TopLeft","TopRight","BottomLeft","BottomRight"],uK=cK.length,dK=e=>"string"==typeof e?parseFloat(e):e,hK=e=>"number"==typeof e||lB.test(e);function fK(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const pK=mK(0,.5,$$),gK=mK(.5,.95,YF);function mK(e,t,r){return n=>n<e?0:n>t?1:r(ZF(e,t,n))}function yK(e,t){e.min=t.min,e.max=t.max}function vK(e,t){yK(e.x,t.x),yK(e.y,t.y)}function bK(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function wK(e,t,r,n,i){return e=UV(e-=t,1/r,n),void 0!==i&&(e=UV(e,1/i,n)),e}function xK(e,t,[r,n,i],s,a){!function(e,t=0,r=1,n=.5,i,s=e,a=e){oB.test(t)&&(t=parseFloat(t),t=Bz(a.min,a.max,t/100)-a.min);if("number"!=typeof t)return;let o=Bz(s.min,s.max,n);e===s&&(o-=t),e.min=wK(e.min,t,r,o,i),e.max=wK(e.max,t,r,o,i)}(e,t[r],t[n],t[i],t.scale,s,a)}const SK=["x","scaleX","originX"],EK=["y","scaleY","originY"];function TK(e,t,r,n){xK(e.x,t,SK,r?r.x:void 0,n?n.x:void 0),xK(e.y,t,EK,r?r.y:void 0,n?n.y:void 0)}function kK(e){return 0===e.translate&&1===e.scale}function AK(e){return kK(e.x)&&kK(e.y)}function _K(e,t){return e.min===t.min&&e.max===t.max}function CK(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function PK(e,t){return CK(e.x,t.x)&&CK(e.y,t.y)}function DK(e){return wV(e.x)/wV(e.y)}function RK(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class IK{constructor(){this.members=[]}add(e){E$(this.members,e),e.scheduleRender()}remove(e){if(T$(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let r;for(let n=t;n>=0;n--){const e=this.members[n];if(!1!==e.isPresent){r=e;break}}return!!r&&(this.promote(r),!0)}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:n}=e.options;!1===n&&r.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const OK={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},NK="undefined"!=typeof window&&void 0!==window.MotionDebug,jK=["","X","Y","Z"],LK={visibility:"hidden"};let MK=0;function FK(e,t,r,n){const{latestValues:i}=t;i[e]&&(r[e]=i[e],t.setStaticValue(e,0),n&&(n[e]=0))}function UK(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=R$(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:t,layoutId:n}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",sU,!(t||n))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&UK(n)}function BK({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(e={},r=(null==t?void 0:t())){this.id=MK++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,NK&&(OK.totalNodes=OK.resolvedTargetDeltas=OK.recalculatedProjection=0),this.nodes.forEach(qK),this.nodes.forEach(YK),this.nodes.forEach(XK),this.nodes.forEach(VK),NK&&window.MotionDebug.record(OK)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new lK)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new k$),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const r=this.eventHandlers.get(e);r&&r.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t,r=this.root.hasTreeAnimated){if(this.instance)return;var n;this.isSVG=(n=t)instanceof SVGElement&&"svg"!==n.tagName,this.instance=t;const{layoutId:i,layout:s,visualElement:a}=this.options;if(a&&!a.current&&a.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),r&&(s||i)&&(this.isLayoutDirty=!0),e){let r;const n=()=>this.root.updateBlockedByResize=!1;e(t,(()=>{this.root.updateBlockedByResize=!0,r&&r(),r=function(e,t){const r=S$.now(),n=({timestamp:i})=>{const s=i-r;s>=t&&(aU(n),e(s-t))};return sU.read(n,!0),()=>aU(n)}(n,250),eK.hasAnimatedSinceResize&&(eK.hasAnimatedSinceResize=!1,this.nodes.forEach(QK))}))}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&a&&(i||s)&&this.addEventListener("didUpdate",(({delta:e,hasLayoutChanged:t,hasRelativeTargetChanged:r,layout:n})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||a.getDefaultTransition()||nH,{onLayoutAnimationStart:s,onLayoutAnimationComplete:o}=a.getProps(),l=!this.targetLayout||!PK(this.targetLayout,n)||r,c=!t&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,c);const t={...GB(i,"layout"),onPlay:s,onComplete:o};(a.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else t||QK(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,aU(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(JK),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&UK(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;const n=this.getTransformTemplate();this.prevTransformTemplateValue=n?n(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(HK);this.isUpdating||this.nodes.forEach(GK),this.isUpdating=!1,this.nodes.forEach(WK),this.nodes.forEach($K),this.nodes.forEach(zK),this.clearAllSnapshots();const e=S$.now();oU.delta=tB(0,1e3/60,e-oU.timestamp),oU.timestamp=e,oU.isProcessing=!0,lU.update.process(oU),lU.preRender.process(oU),lU.render.process(oU),oU.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,RU.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(KK),this.sharedNodes.forEach(ZK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,sU.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){sU.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let r=0;r<this.path.length;r++){this.path[r].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){const t=n(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!AK(this.projectionDelta),r=this.getTransformTemplate(),n=r?r(this.latestValues,""):void 0,s=n!==this.prevTransformTemplateValue;e&&(t||LV(this.latestValues)||s)&&(i(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let r=this.removeElementScroll(t);var n;return e&&(r=this.removeTransform(r)),aH((n=r).x),aH(n.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const r=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(lH))){const{scroll:e}=this.root;e&&(KV(r.x,e.offset.x),KV(r.y,e.offset.y))}return r}removeElementScroll(e){var t;const r={x:{min:0,max:0},y:{min:0,max:0}};if(vK(r,e),null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)return r;for(let n=0;n<this.path.length;n++){const t=this.path[n],{scroll:i,options:s}=t;t!==this.root&&i&&s.layoutScroll&&(i.wasRoot&&vK(r,e),KV(r.x,i.offset.x),KV(r.y,i.offset.y))}return r}applyTransform(e,t=!1){const r={x:{min:0,max:0},y:{min:0,max:0}};vK(r,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&GV(r,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),LV(e.latestValues)&&GV(r,e.latestValues)}return LV(this.latestValues)&&GV(r,this.latestValues),r}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};vK(t,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];if(!e.instance)continue;if(!LV(e.latestValues))continue;jV(e.latestValues)&&e.updateSnapshot();const n={x:{min:0,max:0},y:{min:0,max:0}};vK(n,e.measurePageBox()),TK(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,n)}return LV(this.latestValues)&&TK(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==oU.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const r=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=r.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=r.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=r.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==r;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:i,layoutId:s}=this.options;if(this.layout&&(i||s)){if(this.resolvedRelativeTargetAt=oU.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},kV(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),vK(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var a,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a=this.target,o=this.relativeTarget,l=this.relativeParent.target,EV(a.x,o.x,l.x),EV(a.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):vK(this.target,this.layout.layoutBox),zV(this.target,this.targetDelta)):vK(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},kV(this.relativeTargetOrigin,this.target,e.target),vK(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}NK&&OK.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!jV(this.parent.latestValues)&&!MV(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),r=Boolean(this.resumingFrom)||this!==t;let n=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(n=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===oU.timestamp&&(n=!1),n)return;const{layout:i,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!s)return;vK(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,o=this.treeScale.y;!function(e,t,r,n=!1){const i=r.length;if(!i)return;let s,a;t.x=t.y=1;for(let o=0;o<i;o++){s=r[o],a=s.projectionDelta;const{visualElement:i}=s.options;i&&i.props.style&&"contents"===i.props.style.display||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&GV(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,zV(e,a)),n&&LV(s.latestValues)&&GV(e,s.latestValues))}t.x<VV&&t.x>qV&&(t.x=1),t.y<VV&&t.y>qV&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,r),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(bK(this.prevProjectionDelta.x,this.projectionDelta.x),bK(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),SV(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===a&&this.treeScale.y===o&&RK(this.projectionDelta.x,this.prevProjectionDelta.x)&&RK(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),NK&&OK.recalculatedProjection++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null===(t=this.options.visualElement)||void 0===t||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const r=this.snapshot,n=r?r.latestValues:{},i={...this.latestValues},s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a={x:{min:0,max:0},y:{min:0,max:0}},o=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(rH));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const r=t/1e3;var l,h,f,p;eH(s.x,e.x,r),eH(s.y,e.y,r),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(kV(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),l=this.relativeTarget,h=this.relativeTargetOrigin,f=a,p=r,tH(l.x,h.x,f.x,p),tH(l.y,h.y,f.y,p),d&&function(e,t){return _K(e.x,t.x)&&_K(e.y,t.y)}(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),vK(d,this.relativeTarget)),o&&(this.animationValues=i,function(e,t,r,n,i,s){i?(e.opacity=Bz(0,void 0!==r.opacity?r.opacity:1,pK(n)),e.opacityExit=Bz(void 0!==t.opacity?t.opacity:1,0,gK(n))):s&&(e.opacity=Bz(void 0!==t.opacity?t.opacity:1,void 0!==r.opacity?r.opacity:1,n));for(let a=0;a<uK;a++){const i=`border${cK[a]}Radius`;let s=fK(t,i),o=fK(r,i);void 0===s&&void 0===o||(s||(s=0),o||(o=0),0===s||0===o||hK(s)===hK(o)?(e[i]=Math.max(Bz(dK(s),dK(o),n),0),(oB.test(o)||oB.test(s))&&(e[i]+="%")):e[i]=o)}(t.rotate||r.rotate)&&(e.rotate=Bz(t.rotate||0,r.rotate||0,n))}(i,n,this.latestValues,r,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=r},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(aU(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=sU.update((()=>{eK.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,r){const n=qU(e)?e:C$(e);return n.start(Hq("",n,t,r)),n.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:r,layout:n,latestValues:i}=e;if(t&&r&&n){if(this!==e&&this.layout&&n&&oH(this.options.animationType,this.layout.layoutBox,n.layoutBox)){r=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=wV(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;const n=wV(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+n}vK(t,r),GV(t,i),SV(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new IK);this.sharedNodes.get(e).add(t);const r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:r}={}){const n=this.getStack();n&&n.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:r}=e;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(t=!0),!t)return;const n={};r.z&&FK("z",e,n,this.animationValues);for(let i=0;i<jK.length;i++)FK(`rotate${jK[i]}`,e,n,this.animationValues),FK(`skew${jK[i]}`,e,n,this.animationValues);e.render();for(const i in n)e.setStaticValue(i,n[i]),this.animationValues&&(this.animationValues[i]=n[i]);e.scheduleRender()}getProjectionStyles(e){var t,r;if(!this.instance||this.isSVG)return;if(!this.isVisible)return LK;const n={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,n.opacity="",n.pointerEvents=VU(null==e?void 0:e.pointerEvents)||"",n.transform=i?i(this.latestValues,""):"none",n;const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=VU(null==e?void 0:e.pointerEvents)||""),this.hasProjected&&!LV(this.latestValues)&&(t.transform=i?i({},""):"none",this.hasProjected=!1),t}const a=s.animationValues||s.latestValues;this.applyTransformsToTarget(),n.transform=function(e,t,r){let n="";const i=e.x.translate/t.x,s=e.y.translate/t.y,a=(null==r?void 0:r.z)||0;if((i||s||a)&&(n=`translate3d(${i}px, ${s}px, ${a}px) `),1===t.x&&1===t.y||(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:e,rotate:t,rotateX:i,rotateY:s,skewX:a,skewY:o}=r;e&&(n=`perspective(${e}px) ${n}`),t&&(n+=`rotate(${t}deg) `),i&&(n+=`rotateX(${i}deg) `),s&&(n+=`rotateY(${s}deg) `),a&&(n+=`skewX(${a}deg) `),o&&(n+=`skewY(${o}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(n+=`scale(${o}, ${l})`),n||"none"}(this.projectionDeltaWithTransform,this.treeScale,a),i&&(n.transform=i(a,n.transform));const{x:o,y:l}=this.projectionDelta;n.transformOrigin=`${100*o.origin}% ${100*l.origin}% 0`,s.animationValues?n.opacity=s===this?null!==(r=null!==(t=a.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==r?r:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:n.opacity=s===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0;for(const c in PB){if(void 0===a[c])continue;const{correct:e,applyTo:t}=PB[c],r="none"===n.transform?a[c]:e(a[c],s);if(t){const e=t.length;for(let i=0;i<e;i++)n[t[i]]=r}else n[c]=r}return this.options.layoutId&&(n.pointerEvents=s===this?VU(null==e?void 0:e.pointerEvents)||"":"none"),n}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(HK),this.root.sharedNodes.clear()}}}function $K(e){e.updateLayout()}function zK(e){var t;const r=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:n}=e.layout,{animationType:i}=e.options,s=r.source!==e.layout.source;"size"===i?IV((e=>{const n=s?r.measuredBox[e]:r.layoutBox[e],i=wV(n);n.min=t[e].min,n.max=n.min+i})):oH(i,r.layoutBox,t)&&IV((n=>{const i=s?r.measuredBox[n]:r.layoutBox[n],a=wV(t[n]);i.max=i.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[n].max=e.relativeTarget[n].min+a)}));const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};SV(a,t,r.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};s?SV(o,e.applyTransform(n,!0),r.measuredBox):SV(o,t,r.layoutBox);const l=!AK(a);let c=!1;if(!e.resumeFrom){const n=e.getClosestProjectingParent();if(n&&!n.resumeFrom){const{snapshot:i,layout:s}=n;if(i&&s){const a={x:{min:0,max:0},y:{min:0,max:0}};kV(a,r.layoutBox,i.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};kV(o,t,s.layoutBox),PK(a,o)||(c=!0),n.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=n)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:r,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function qK(e){NK&&OK.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function VK(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function KK(e){e.clearSnapshot()}function HK(e){e.clearMeasurements()}function GK(e){e.isLayoutDirty=!1}function WK(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function QK(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function YK(e){e.resolveTargetDelta()}function XK(e){e.calcProjection()}function JK(e){e.resetSkewAndRotation()}function ZK(e){e.removeLeadSnapshot()}function eH(e,t,r){e.translate=Bz(t.translate,0,r),e.scale=Bz(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function tH(e,t,r,n){e.min=Bz(t.min,r.min,n),e.max=Bz(t.max,r.max,n)}function rH(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const nH={duration:.45,ease:[.4,0,.1,1]},iH=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),sH=iH("applewebkit/")&&!iH("chrome/")?Math.round:YF;function aH(e){e.min=sH(e.min),e.max=sH(e.max)}function oH(e,t,r){return"position"===e||"preserve-aspect"===e&&(n=DK(t),i=DK(r),s=.2,!(Math.abs(n-i)<=s));var n,i,s}function lH(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const cH=BK({attachResizeListener:(e,t)=>cV(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),uH={current:void 0},dH=BK({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!uH.current){const e=new cH({});e.mount(window),e.setOptions({layoutScroll:!0}),uH.current=e}return uH.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),hH={pan:{Feature:class extends aV{constructor(){super(...arguments),this.removePointerDownListener=YF}onPointerDown(e){this.session=new fV(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:QV(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:n}=this.node.getProps();return{onSessionStart:ZV(e),onStart:ZV(t),onMove:r,onEnd:(e,t)=>{delete this.session,n&&sU.postRender((()=>n(e,t)))}}}mount(){this.removePointerDownListener=dV(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends aV{constructor(e){super(e),this.removeGroupControls=YF,this.removeListeners=YF,this.controls=new XV(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||YF}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:dH,MeasureLayout:sK}};function fH(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover","Start"===r);const i=n["onHover"+r];i&&sU.postRender((()=>i(t,uV(t))))}function pH(e,t,r){const{props:n}=e;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap","Start"===r);const i=n["onTap"+("End"===r?"":r)];i&&sU.postRender((()=>i(t,uV(t))))}const gH=new WeakMap,mH=new WeakMap,yH=e=>{const t=gH.get(e.target);t&&t(e)},vH=e=>{e.forEach(yH)};function bH(e,t,r){const n=function({root:e,...t}){const r=e||document;mH.has(r)||mH.set(r,{});const n=mH.get(r),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(vH,{root:e,...t})),n[i]}(t);return gH.set(e,r),n.observe(e),()=>{gH.delete(e),n.unobserve(e)}}const wH={some:0,all:1};const xH={inView:{Feature:class extends aV{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:n="some",once:i}=e,s={root:t?t.current:void 0,rootMargin:r,threshold:"number"==typeof n?n:wH[n]};return bH(this.node.current,s,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:r,onViewportLeave:n}=this.node.getProps(),s=t?r:n;s&&s(e)}))}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends aV{mount(){const{current:e}=this.node;e&&(this.unmount=v$(e,(e=>(pH(this.node,e,"Start"),(e,{success:t})=>pH(this.node,e,t?"End":"Cancel"))),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends aV{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(Jce){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wz(cV(this.node.current,"focus",(()=>this.onFocus())),cV(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends aV{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){const[n,i,s]=c$(e,r),a=u$((e=>{const{target:r}=e,n=t(e);if("function"!=typeof n||!r)return;const s=u$((e=>{n(e),r.removeEventListener("pointerleave",s)}));r.addEventListener("pointerleave",s,i)}));return n.forEach((e=>{e.addEventListener("pointerenter",a,i)})),s}(e,(e=>(fH(this.node,e,"Start"),e=>fH(this.node,e,"End")))))}unmount(){}}}},SH={layout:{ProjectionNode:dH,MeasureLayout:sK}},EH={current:null},TH={current:!1};const kH=[...Oz,Z$,lz],AH=new WeakMap;const _H=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class CH{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:n,blockInitialAnimation:i,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Cz,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=S$.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,sU.render(this.render,!1,!0))};const{latestValues:o,renderState:l,onUpdate:c}=s;this.onUpdate=c,this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=a,this.blockInitialAnimation=Boolean(i),this.isControllingVariants=SU(t),this.isVariantNode=EU(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(t,{},this);for(const h in d){const e=d[h];void 0!==o[h]&&qU(e)&&e.set(o[h],!1)}}mount(e){this.current=e,AH.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),TH.current||function(){if(TH.current=!0,WF)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>EH.current=e.matches;e.addListener(t),t()}else EH.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||EH.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){AH.delete(this.current),this.projection&&this.projection.unmount(),aU(this.notifyUpdate),aU(this.render),this.valueSubscriptions.forEach((e=>e())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=WU.has(e),n=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&sU.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)})),i=t.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,(()=>{n(),i(),s&&s(),t.owner&&t.stop()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in dU){const t=dU[e];if(!t)continue;const{isEnabled:r,Feature:n}=t;if(!this.features[e]&&n&&r(this.props)&&(this.features[e]=new n(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<_H.length;r++){const t=_H[r];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const n=e["on"+t];n&&(this.propEventSubscriptions[t]=this.on(t,n))}this.prevMotionValues=function(e,t,r){for(const n in t){const i=t[n],s=r[n];if(qU(i))e.addValue(n,i);else if(qU(s))e.addValue(n,C$(i,{owner:e}));else if(s!==i)if(e.hasValue(n)){const t=e.getValue(n);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{const t=e.getStaticValue(n);e.addValue(n,C$(void 0!==t?t:i,{owner:e}))}}for(const n in r)void 0===t[n]&&e.removeValue(n);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=C$(null===t?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let n=void 0===this.latestValues[e]&&this.current?null!==(r=this.getBaseTargetFromProps(this.props,e))&&void 0!==r?r:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var i;return null!=n&&("string"==typeof n&&(Pz(n)||q$(n))?n=parseFloat(n):(i=n,!kH.find(Iz(i))&&lz.test(t)&&(n=gz(e,t))),this.setBaseTarget(e,qU(n)?n.get():n)),qU(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let n;if("string"==typeof r||"object"==typeof r){const i=$U(this.props,r,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);i&&(n=i[e])}if(r&&void 0!==n)return n;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||qU(i)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new k$),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class PH extends CH{constructor(){super(...arguments),this.KeyframeResolver=jz}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;qU(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent=`${e}`)})))}}class DH extends PH{constructor(){super(...arguments),this.type="html",this.renderInstance=AB}readValueFromInstance(e,t){if(WU.has(t)){const e=pz(t);return e&&e.default||0}{const n=(r=e,window.getComputedStyle(r)),i=(YU(t)?n.getPropertyValue(t):n[t])||0;return"string"==typeof i?i.trim():i}var r}measureInstanceViewportBox(e,{transformPagePoint:t}){return WV(e,t)}build(e,t,r){vB(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return RB(e,t,r)}}class RH extends PH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=RV}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(WU.has(t)){const e=pz(t);return e&&e.default||0}return t=_B.has(t)?t:PU(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return IB(e,t,r)}build(e,t,r){SB(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,n){CB(e,t,0,n)}mount(e){this.isSVGTag=kB(e.tagName),super.mount(e)}}const IH=(e,t)=>UU(e)?new RH(t):new DH(t,{allowProjection:e!==q.Fragment}),OH=mU($B({...lV,...xH,...hH,...SH},IH));function NH(e){return Array.isArray?Array.isArray(e):"[object Array]"===$H(e)}function jH(e){return"string"==typeof e}function LH(e){return"number"==typeof e}function MH(e){return!0===e||!1===e||function(e){return FH(e)&&null!==e}(e)&&"[object Boolean]"==$H(e)}function FH(e){return"object"==typeof e}function UH(e){return null!=e}function BH(e){return!e.trim().length}function $H(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const zH=Object.prototype.hasOwnProperty;class qH{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let r=VH(e);this._keys.push(r),this._keyMap[r.id]=r,t+=r.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function VH(e){let t=null,r=null,n=null,i=1,s=null;if(jH(e)||NH(e))n=e,t=KH(e),r=HH(e);else{if(!zH.call(e,"name"))throw new Error((e=>`Missing ${e} property in key`)("name"));const a=e.name;if(n=a,zH.call(e,"weight")&&(i=e.weight,i<=0))throw new Error((e=>`Property 'weight' in key '${e}' must be a positive integer`)(a));t=KH(a),r=HH(a),s=e.getFn}return{path:t,id:r,weight:i,src:n,getFn:s}}function KH(e){return NH(e)?e:e.split(".")}function HH(e){return NH(e)?e.join("."):e}var GH={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(e,t){let r=[],n=!1;const i=(e,t,s)=>{if(UH(e))if(t[s]){const a=e[t[s]];if(!UH(a))return;if(s===t.length-1&&(jH(a)||LH(a)||MH(a)))r.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(a));else if(NH(a)){n=!0;for(let e=0,r=a.length;e<r;e+=1)i(a[e],t,s+1)}else t.length&&i(a,t,s+1)}else r.push(e)};return i(e,jH(t)?t.split("."):t,0),n?r:r[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const WH=/[^ ]+/g;class QH{constructor({getFn:e=GH.getFn,fieldNormWeight:t=GH.fieldNormWeight}={}){this.norm=function(e=1,t=3){const r=new Map,n=Math.pow(10,t);return{get(t){const i=t.match(WH).length;if(r.has(i))return r.get(i);const s=1/Math.pow(i,.5*e),a=parseFloat(Math.round(s*n)/n);return r.set(i,a),a},clear(){r.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,jH(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();jH(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!UH(e)||BH(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach(((t,n)=>{let i=t.getFn?t.getFn(e):this.getFn(e,t.path);if(UH(i))if(NH(i)){let e=[];const t=[{nestedArrIndex:-1,value:i}];for(;t.length;){const{nestedArrIndex:r,value:n}=t.pop();if(UH(n))if(jH(n)&&!BH(n)){let t={v:n,i:r,n:this.norm.get(n)};e.push(t)}else NH(n)&&n.forEach(((e,r)=>{t.push({nestedArrIndex:r,value:e})}))}r.$[n]=e}else if(jH(i)&&!BH(i)){let e={v:i,n:this.norm.get(i)};r.$[n]=e}})),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function YH(e,t,{getFn:r=GH.getFn,fieldNormWeight:n=GH.fieldNormWeight}={}){const i=new QH({getFn:r,fieldNormWeight:n});return i.setKeys(e.map(VH)),i.setSources(t),i.create(),i}function XH(e,{errors:t=0,currentLocation:r=0,expectedLocation:n=0,distance:i=GH.distance,ignoreLocation:s=GH.ignoreLocation}={}){const a=t/e.length;if(s)return a;const o=Math.abs(n-r);return i?a+o/i:o?1:a}const JH=32;function ZH(e,t,r,{location:n=GH.location,distance:i=GH.distance,threshold:s=GH.threshold,findAllMatches:a=GH.findAllMatches,minMatchCharLength:o=GH.minMatchCharLength,includeMatches:l=GH.includeMatches,ignoreLocation:c=GH.ignoreLocation}={}){if(t.length>JH)throw new Error(`Pattern length exceeds max of ${JH}.`);const u=t.length,d=e.length,h=Math.max(0,Math.min(n,d));let f=s,p=h;const g=o>1||l,m=g?Array(d):[];let y;for(;(y=e.indexOf(t,p))>-1;){let e=XH(t,{currentLocation:y,expectedLocation:h,distance:i,ignoreLocation:c});if(f=Math.min(e,f),p=y+u,g){let e=0;for(;e<u;)m[y+e]=1,e+=1}}p=-1;let v=[],b=1,w=u+d;const x=1<<u-1;for(let E=0;E<u;E+=1){let n=0,s=w;for(;n<s;){XH(t,{errors:E,currentLocation:h+s,expectedLocation:h,distance:i,ignoreLocation:c})<=f?n=s:w=s,s=Math.floor((w-n)/2+n)}w=s;let o=Math.max(1,h-s+1),l=a?d:Math.min(h+s,d)+u,y=Array(l+2);y[l+1]=(1<<E)-1;for(let a=l;a>=o;a-=1){let n=a-1,s=r[e.charAt(n)];if(g&&(m[n]=+!!s),y[a]=(y[a+1]<<1|1)&s,E&&(y[a]|=(v[a+1]|v[a])<<1|1|v[a+1]),y[a]&x&&(b=XH(t,{errors:E,currentLocation:n,expectedLocation:h,distance:i,ignoreLocation:c}),b<=f)){if(f=b,p=n,p<=h)break;o=Math.max(1,2*h-p)}}if(XH(t,{errors:E+1,currentLocation:h,expectedLocation:h,distance:i,ignoreLocation:c})>f)break;v=y}const S={isMatch:p>=0,score:Math.max(.001,b)};if(g){const e=function(e=[],t=GH.minMatchCharLength){let r=[],n=-1,i=-1,s=0;for(let a=e.length;s<a;s+=1){let a=e[s];a&&-1===n?n=s:a||-1===n||(i=s-1,i-n+1>=t&&r.push([n,i]),n=-1)}return e[s-1]&&s-n>=t&&r.push([n,s-1]),r}(m,o);e.length?l&&(S.indices=e):S.isMatch=!1}return S}function eG(e){let t={};for(let r=0,n=e.length;r<n;r+=1){const i=e.charAt(r);t[i]=(t[i]||0)|1<<n-r-1}return t}const tG=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class rG{constructor(e,{location:t=GH.location,threshold:r=GH.threshold,distance:n=GH.distance,includeMatches:i=GH.includeMatches,findAllMatches:s=GH.findAllMatches,minMatchCharLength:a=GH.minMatchCharLength,isCaseSensitive:o=GH.isCaseSensitive,ignoreDiacritics:l=GH.ignoreDiacritics,ignoreLocation:c=GH.ignoreLocation}={}){if(this.options={location:t,threshold:r,distance:n,includeMatches:i,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:o,ignoreDiacritics:l,ignoreLocation:c},e=o?e:e.toLowerCase(),e=l?tG(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const u=(e,t)=>{this.chunks.push({pattern:e,alphabet:eG(e),startIndex:t})},d=this.pattern.length;if(d>JH){let e=0;const t=d%JH,r=d-t;for(;e<r;)u(this.pattern.substr(e,JH),e),e+=JH;if(t){const e=d-JH;u(this.pattern.substr(e),e)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:r,includeMatches:n}=this.options;if(e=t?e:e.toLowerCase(),e=r?tG(e):e,this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:i,distance:s,threshold:a,findAllMatches:o,minMatchCharLength:l,ignoreLocation:c}=this.options;let u=[],d=0,h=!1;this.chunks.forEach((({pattern:t,alphabet:r,startIndex:f})=>{const{isMatch:p,score:g,indices:m}=ZH(e,t,r,{location:i+f,distance:s,threshold:a,findAllMatches:o,minMatchCharLength:l,includeMatches:n,ignoreLocation:c});p&&(h=!0),d+=g,p&&m&&(u=[...u,...m])}));let f={isMatch:h,score:h?d/this.chunks.length:1};return h&&n&&(f.indices=u),f}}class nG{constructor(e){this.pattern=e}static isMultiMatch(e){return iG(e,this.multiRegex)}static isSingleMatch(e){return iG(e,this.singleRegex)}search(){}}function iG(e,t){const r=e.match(t);return r?r[1]:null}class sG extends nG{constructor(e,{location:t=GH.location,threshold:r=GH.threshold,distance:n=GH.distance,includeMatches:i=GH.includeMatches,findAllMatches:s=GH.findAllMatches,minMatchCharLength:a=GH.minMatchCharLength,isCaseSensitive:o=GH.isCaseSensitive,ignoreDiacritics:l=GH.ignoreDiacritics,ignoreLocation:c=GH.ignoreLocation}={}){super(e),this._bitapSearch=new rG(e,{location:t,threshold:r,distance:n,includeMatches:i,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:o,ignoreDiacritics:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class aG extends nG{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,r=0;const n=[],i=this.pattern.length;for(;(t=e.indexOf(this.pattern,r))>-1;)r=t+i,n.push([t,r-1]);const s=!!n.length;return{isMatch:s,score:s?0:1,indices:n}}}const oG=[class extends nG{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},aG,class extends nG{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends nG{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends nG{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends nG{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends nG{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},sG],lG=oG.length,cG=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const uG=new Set([sG.type,aG.type]);class dG{constructor(e,{isCaseSensitive:t=GH.isCaseSensitive,ignoreDiacritics:r=GH.ignoreDiacritics,includeMatches:n=GH.includeMatches,minMatchCharLength:i=GH.minMatchCharLength,ignoreLocation:s=GH.ignoreLocation,findAllMatches:a=GH.findAllMatches,location:o=GH.location,threshold:l=GH.threshold,distance:c=GH.distance}={}){this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:r,includeMatches:n,minMatchCharLength:i,findAllMatches:a,ignoreLocation:s,location:o,threshold:l,distance:c},e=t?e:e.toLowerCase(),e=r?tG(e):e,this.pattern=e,this.query=function(e,t={}){return e.split("|").map((e=>{let r=e.trim().split(cG).filter((e=>e&&!!e.trim())),n=[];for(let i=0,s=r.length;i<s;i+=1){const e=r[i];let s=!1,a=-1;for(;!s&&++a<lG;){const r=oG[a];let i=r.isMultiMatch(e);i&&(n.push(new r(i,t)),s=!0)}if(!s)for(a=-1;++a<lG;){const r=oG[a];let i=r.isSingleMatch(e);if(i){n.push(new r(i,t));break}}}return n}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:n,ignoreDiacritics:i}=this.options;e=n?e:e.toLowerCase(),e=i?tG(e):e;let s=0,a=[],o=0;for(let l=0,c=t.length;l<c;l+=1){const n=t[l];a.length=0,s=0;for(let t=0,i=n.length;t<i;t+=1){const i=n[t],{isMatch:l,indices:c,score:u}=i.search(e);if(!l){o=0,s=0,a.length=0;break}if(s+=1,o+=u,r){const e=i.constructor.type;uG.has(e)?a=[...a,...c]:a.push(c)}}if(s){let e={isMatch:!0,score:o/s};return r&&(e.indices=a),e}}return{isMatch:!1,score:1}}}const hG=[];function fG(e,t){for(let r=0,n=hG.length;r<n;r+=1){let n=hG[r];if(n.condition(e,t))return new n(e,t)}return new rG(e,t)}const pG="$and",gG="$or",mG="$path",yG="$val",vG=e=>!(!e[pG]&&!e[gG]),bG=e=>({[pG]:Object.keys(e).map((t=>({[t]:e[t]})))});function wG(e,t,{auto:r=!0}={}){const n=e=>{let i=Object.keys(e);const s=(e=>!!e[mG])(e);if(!s&&i.length>1&&!vG(e))return n(bG(e));if((e=>!NH(e)&&FH(e)&&!vG(e))(e)){const n=s?e[mG]:i[0],a=s?e[yG]:e[n];if(!jH(a))throw new Error((e=>`Invalid value for key ${e}`)(n));const o={keyId:HH(n),pattern:a};return r&&(o.searcher=fG(a,t)),o}let a={children:[],operator:i[0]};return i.forEach((t=>{const r=e[t];NH(r)&&r.forEach((e=>{a.children.push(n(e))}))})),a};return vG(e)||(e=bG(e)),n(e)}function xG(e,t){const r=e.matches;t.matches=[],UH(r)&&r.forEach((e=>{if(!UH(e.indices)||!e.indices.length)return;const{indices:r,value:n}=e;let i={indices:r,value:n};e.key&&(i.key=e.key.src),e.idx>-1&&(i.refIndex=e.idx),t.matches.push(i)}))}function SG(e,t){t.score=e.score}class EG{constructor(e,t={},r){this.options={...GH,...t},this.options.useExtendedSearch,this._keyStore=new qH(this.options.keys),this.setCollection(e,r)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof QH))throw new Error("Incorrect 'index' type");this._myIndex=t||YH(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){UH(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let r=0,n=this._docs.length;r<n;r+=1){const i=this._docs[r];e(i,r)&&(this.removeAt(r),r-=1,n-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:r,includeScore:n,shouldSort:i,sortFn:s,ignoreFieldNorm:a}=this.options;let o=jH(e)?jH(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=GH.ignoreFieldNorm}){e.forEach((e=>{let r=1;e.matches.forEach((({key:e,norm:n,score:i})=>{const s=e?e.weight:null;r*=Math.pow(0===i&&s?Number.EPSILON:i,(s||1)*(t?1:n))})),e.score=r}))}(o,{ignoreFieldNorm:a}),i&&o.sort(s),LH(t)&&t>-1&&(o=o.slice(0,t)),function(e,t,{includeMatches:r=GH.includeMatches,includeScore:n=GH.includeScore}={}){const i=[];return r&&i.push(xG),n&&i.push(SG),e.map((e=>{const{idx:r}=e,n={item:t[r],refIndex:r};return i.length&&i.forEach((t=>{t(e,n)})),n}))}(o,this._docs,{includeMatches:r,includeScore:n})}_searchStringList(e){const t=fG(e,this.options),{records:r}=this._myIndex,n=[];return r.forEach((({v:e,i:r,n:i})=>{if(!UH(e))return;const{isMatch:s,score:a,indices:o}=t.searchIn(e);s&&n.push({item:e,idx:r,matches:[{score:a,value:e,norm:i,indices:o}]})})),n}_searchLogical(e){const t=wG(e,this.options),r=(e,t,n)=>{if(!e.children){const{keyId:r,searcher:i}=e,s=this._findMatches({key:this._keyStore.get(r),value:this._myIndex.getValueForItemAtKeyId(t,r),searcher:i});return s&&s.length?[{idx:n,item:t,matches:s}]:[]}const i=[];for(let s=0,a=e.children.length;s<a;s+=1){const a=e.children[s],o=r(a,t,n);if(o.length)i.push(...o);else if(e.operator===pG)return[]}return i},n=this._myIndex.records,i={},s=[];return n.forEach((({$:e,i:n})=>{if(UH(e)){let a=r(t,e,n);a.length&&(i[n]||(i[n]={idx:n,item:e,matches:[]},s.push(i[n])),a.forEach((({matches:e})=>{i[n].matches.push(...e)})))}})),s}_searchObjectList(e){const t=fG(e,this.options),{keys:r,records:n}=this._myIndex,i=[];return n.forEach((({$:e,i:n})=>{if(!UH(e))return;let s=[];r.forEach(((r,n)=>{s.push(...this._findMatches({key:r,value:e[n],searcher:t}))})),s.length&&i.push({idx:n,item:e,matches:s})})),i}_findMatches({key:e,value:t,searcher:r}){if(!UH(t))return[];let n=[];if(NH(t))t.forEach((({v:t,i:i,n:s})=>{if(!UH(t))return;const{isMatch:a,score:o,indices:l}=r.searchIn(t);a&&n.push({score:o,key:e,value:t,idx:i,norm:s,indices:l})}));else{const{v:i,n:s}=t,{isMatch:a,score:o,indices:l}=r.searchIn(i);a&&n.push({score:o,key:e,value:i,norm:s,indices:l})}return n}}EG.version="7.1.0",EG.createIndex=YH,EG.parseIndex=function(e,{getFn:t=GH.getFn,fieldNormWeight:r=GH.fieldNormWeight}={}){const{keys:n,records:i}=e,s=new QH({getFn:t,fieldNormWeight:r});return s.setKeys(n),s.setIndexRecords(i),s},EG.config=GH,EG.parseQuery=wG,function(...e){hG.push(...e)}(dG);const TG=({text:e,highlightParts:t})=>{if(!t||0===t.length||!e)return e;const r=new RegExp(`(${t.map((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))).join("|")})`,"gi"),n=e.split(r);return Z.jsx(Z.Fragment,{children:n.map(((e,r)=>t.some((t=>e.toLowerCase()===t.toLowerCase()))?Z.jsx("span",{className:"bg-yellow-400/70 text-slate-900 px-0.5 rounded-sm",children:e},r):e))})},kG=({item:e,searchTerm:t,type:r,episodeTitle:n,langPrefix:i})=>{const s="question"===r?Zp:Ip;let a="",o="";if("question"===r){a=`${e.questionTitle} (${n})`;const t=Math.floor(e.segmentStart/1e3);o=`/${i}/${e.episodeSlug}#${t}`}else{a=e.questionContext?`${iy("question",e.currentLanguage)}: ${e.questionContext} (${n})`:`(${n})`;const t=Math.floor(e.segmentStart/1e3);o=`/${i}/${e.episodeSlug}#${t}`}return"question"===r?e.questionTitle:e.segmentText,Z.jsx(OH.li,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"p-3 bg-slate-700/60 rounded-lg hover:bg-slate-600/70 transition-colors",children:Z.jsxs(Ah,{to:o,className:"block group",children:[Z.jsxs("div",{className:"text-sm text-slate-200 flex items-start mb-1",children:[Z.jsx(s,{className:"inline h-4 w-4 mr-2 text-purple-400 flex-shrink-0 mt-0.5"}),Z.jsx("span",{className:"flex-grow font-semibold",children:Z.jsx(TG,{text:a,highlightParts:t.toLowerCase().split(/\s+/).filter(Boolean)})})]}),"textInEpisode"===r&&Z.jsx("div",{className:"text-xs text-slate-300 max-h-20 overflow-y-auto custom-scrollbar pl-6",children:Z.jsx(TG,{text:e.segmentText,highlightParts:t.toLowerCase().split(/\s+/).filter(Boolean)})})]})})},AG=({currentLanguage:e})=>{const[t,r]=Rh(),n=rh(),{lang:i}=nh(),s=i||e||"ru",a=t.get("query")||"",[o,l]=q.useState(a),[c,u]=q.useState(a),[d,h]=q.useState([]),[f,p]=q.useState(!1),[g,m]=q.useState(null),[y,v]=q.useState(!1),[b,w]=q.useState({}),x=q.useCallback((async t=>{if(!t||t.trim().length<2)return h([]),m(iy("deepSearchMinChars",e)),p(!1),void v(!0);p(!0),m(null),v(!0);try{const{data:r,error:n}=await uS.from("episodes").select("\n          slug, \n          date, \n          transcripts (\n            title,\n            lang\n          )\n        ");if(n)throw n;const i=r.reduce(((t,r)=>{let n=null;if(r.transcripts&&Array.isArray(r.transcripts)){const t=r.transcripts.find((t=>t.lang===e));t&&t.title&&(n=t.title)}return t[r.slug]=((e,t,r,n)=>{if(e&&""!==e.trim())return e;const i="all"===r?n:r,s=iy("meditationTitlePrefix",i);let a="";return t&&(a=km(t,i)),a?`${s} ${a}`:s})(n,r.date,"all",e),t}),{});w(i);const{data:s,error:a}=await uS.from("timecodes").select("id, episode_slug, title, lang, time").or(`lang.eq.${e},lang.eq.all`);if(a)throw a;const o=e=>({ru:"russian",en:"english",es:"spanish",de:"german",fr:"french"}[e]||"simple");let l=[];try{const{data:r,error:n}=await uS.from("transcripts").select("episode_slug, lang, edited_transcript_data").or(`lang.eq.${e},lang.eq.all`).textSearch("search_vector",t,{type:"websearch",config:o(e)}).limit(20);if(n)throw n;l=r||[]}catch(mEe){}let c=[];const u={keys:["title"],includeScore:!0,threshold:.4},d=new EG(s.filter((t=>r.find((e=>e.slug===t.episode_slug))&&t.lang===e&&(t.is_intro||t.is_full_transcript||"intro-virtual"===t.id||t.title&&""!==t.title.trim()))),u);d.search(t).forEach((t=>{const n=t.item;r.find((e=>e.slug===n.episode_slug))&&c.push({type:"question",id:`q-${n.id}`,episodeSlug:n.episode_slug,questionId:n.id,questionTitle:n.title,segmentStart:1e3*n.time,currentLanguage:e,score:t.score})}));const f=[];l.forEach((e=>{var t;if(!r.find((t=>t.slug===e.episode_slug)))return;((null==(t=e.edited_transcript_data)?void 0:t.utterances)||[]).forEach((t=>{f.push({text:t.text,start:t.start,episodeSlug:e.episode_slug,episodeLang:"all",id:`${e.episode_slug}-${t.start}-${Math.random().toString(36).substring(7)}`})}))}));const p={keys:["text"],includeScore:!0,threshold:.4,minMatchCharLength:Math.max(1,Math.floor(t.length/2))},g=new EG(f,p);g.search(t).forEach((t=>{var n;const i=t.item;if(!r.find((e=>e.slug===i.episodeSlug)))return;const a=null==(n=s.find((t=>{var r;return t.episode_slug===i.episodeSlug&&t.lang===e&&(t.is_intro||t.is_full_transcript||"intro-virtual"===t.id||t.title&&""!==t.title.trim())&&i.start>=1e3*t.time&&(1e3*(null==(r=s.filter((r=>r.episode_slug===i.episodeSlug&&r.lang===e&&r.time>t.time)).sort(((e,t)=>e.time-t.time))[0])?void 0:r.time)||1/0)>i.start})))?void 0:n.title;c.push({type:"textInEpisode",episodeSlug:i.episodeSlug,segmentStart:i.start,segmentText:i.text,id:i.id,questionContext:a,currentLanguage:e,score:t.score})})),c.sort(((e,t)=>(e.score??1)-(t.score??1))),h(c)}catch(mEe){m(iy("errorPerformingSearch",e,{errorMessage:mEe.message})),h([])}finally{p(!1)}}),[e]);q.useEffect((()=>{a&&x(a)}),[]);const S=d.length;return Z.jsxs("div",{className:"container mx-auto p-2 sm:p-4 max-w-2xl",children:[Z.jsxs(AT,{variant:"outline",onClick:()=>n(`/${s}/episodes`),className:"mb-6 bg-slate-700 hover:bg-slate-600 border-slate-600 text-slate-300",children:[Z.jsx(dp,{className:"mr-2 h-4 w-4"})," ",iy("backToEpisodes",e)]}),Z.jsx("div",{className:"flex items-center mb-6",children:Z.jsx("h1",{className:"text-3xl font-bold text-purple-300",children:iy("search",e)})}),Z.jsx("form",{onSubmit:e=>{e.preventDefault(),r({query:c}),l(c),x(c)},className:"mb-8",children:Z.jsxs("div",{className:"relative flex items-center gap-2",children:[Z.jsx(_T,{type:"search",value:c,onChange:e=>u(e.target.value),placeholder:iy("deepSearchPlaceholder",e),className:"pl-10 flex-grow bg-slate-800/70 border-slate-700 focus:border-purple-500 text-white placeholder-slate-400 h-11"}),Z.jsx(mg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),Z.jsxs(AT,{type:"submit",className:"bg-purple-600 hover:bg-purple-700 h-11",disabled:f,children:[f?Z.jsx(Hp,{className:"h-5 w-5 animate-spin"}):Z.jsx(mg,{className:"h-5 w-5"}),Z.jsx("span",{className:"ml-2 hidden sm:inline",children:iy("search",e)})]})]})}),f&&Z.jsxs("div",{className:"flex justify-center items-center py-10",children:[Z.jsx(Hp,{className:"h-12 w-12 animate-spin text-purple-400"}),Z.jsxs("p",{className:"ml-4 text-lg",children:[iy("searching",e),"..."]})]}),!f&&g&&Z.jsx("div",{className:"text-center p-6 bg-red-700/20 rounded-lg",children:Z.jsx("p",{className:"text-red-400",children:g})}),!f&&!g&&y&&0===S&&Z.jsxs("div",{className:"text-center py-10",children:[Z.jsx(mg,{className:"mx-auto h-16 w-16 text-gray-500"}),Z.jsx("p",{className:"mt-4 text-lg text-gray-400",children:iy("noResultsFoundForQuery",e,{query:o})})]}),!f&&!g&&S>0&&Z.jsxs("div",{children:[Z.jsx("h2",{className:"text-xl font-semibold text-slate-200 mb-6",children:sy("searchResultsCount",e,S,{count:S,query:o})}),Z.jsx(OH.ul,{initial:"hidden",animate:"visible",variants:{visible:{opacity:1,transition:{staggerChildren:.07}},hidden:{opacity:0}},className:"space-y-3",children:d.map((e=>Z.jsx(kG,{item:e,searchTerm:o,langPrefix:s,type:e.type,episodeTitle:b[e.episodeSlug]||e.episodeSlug},e.id)))})]})]})};function _G(e){const t=CG(e),r=q.forwardRef(((e,r)=>{const{children:n,...i}=e,s=q.Children.toArray(n),a=s.find(DG);if(a){const e=a.props.children,n=s.map((t=>t===a?q.Children.count(e)>1?q.Children.only(null):q.isValidElement(e)?e.props.children:null:t));return Z.jsx(t,{...i,ref:r,children:q.isValidElement(e)?q.cloneElement(e,void 0,n):null})}return Z.jsx(t,{...i,ref:r,children:n})}));return r.displayName=`${e}.Slot`,r}function CG(e){const t=q.forwardRef(((e,t)=>{const{children:r,...n}=e;if(q.isValidElement(r)){const e=function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;if(i)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(r),i=function(e,t){const r={...t};for(const n in t){const i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]={...i,...s}:"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==q.Fragment&&(i.ref=t?Nh(t,e):e),q.cloneElement(r,i)}return q.Children.count(r)>1?q.Children.only(null):null}));return t.displayName=`${e}.SlotClone`,t}var PG=Symbol("radix.slottable");function DG(e){return q.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===PG}var RG=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce(((e,t)=>{const r=_G(`Primitive.${t}`),n=q.forwardRef(((e,n)=>{const{asChild:i,...s}=e,a=i?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),Z.jsx(a,{...s,ref:n})}));return n.displayName=`Primitive.${t}`,{...e,[t]:n}}),{}),IG="Progress",[OG,NG]=Lh(IG),[jG,LG]=OG(IG),MG=q.forwardRef(((e,t)=>{const{__scopeProgress:r,value:n=null,max:i,getValueLabel:s=BG,...a}=e;(i||0===i)&&qG(i);const o=qG(i)?i:100;null!==n&&VG(n,o);const l=VG(n,o)?n:null,c=zG(l)?s(l,o):void 0;return Z.jsx(jG,{scope:r,value:l,max:o,children:Z.jsx(RG.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":zG(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":$G(l,o),"data-value":l??void 0,"data-max":o,...a,ref:t})})}));MG.displayName=IG;var FG="ProgressIndicator",UG=q.forwardRef(((e,t)=>{const{__scopeProgress:r,...n}=e,i=LG(FG,r);return Z.jsx(RG.div,{"data-state":$G(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...n,ref:t})}));function BG(e,t){return`${Math.round(e/t*100)}%`}function $G(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function zG(e){return"number"==typeof e}function qG(e){return zG(e)&&!isNaN(e)&&e>0}function VG(e,t){return zG(e)&&!isNaN(e)&&e<=t&&e>=0}UG.displayName=FG;var KG=MG,HG=UG;const GG=V.forwardRef((({className:e,value:t,...r},n)=>Z.jsx(KG,{ref:n,className:Sm("relative h-4 w-full overflow-hidden rounded-full bg-slate-700",e),...r,children:Z.jsx(HG,{className:"h-full w-full flex-1 bg-purple-500 transition-all duration-300 ease-out",style:{transform:`translateX(-${100-(t||0)}%)`}})})));GG.displayName=KG.displayName;const WG=q.forwardRef((({className:e="",checked:t=!1,onCheckedChange:r,disabled:n=!1,...i},s)=>{const a=`peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 ${t?"bg-primary":"bg-input"} ${n?"opacity-50 cursor-not-allowed":""} ${e}`;return Z.jsx("button",{ref:s,type:"button",role:"switch","aria-checked":t,disabled:n,className:a,onClick:()=>{!n&&r&&r(!t)},...i,children:Z.jsx("span",{className:"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform "+(t?"translate-x-5":"translate-x-0")})})}));WG.displayName="Switch";var QG=["PageUp","PageDown"],YG=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],XG={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},JG="Slider",[ZG,eW,tW]=Vh(JG),[rW,nW]=Lh(JG,[tW]),[iW,sW]=rW(JG),aW=q.forwardRef(((e,t)=>{const{name:r,min:n=0,max:i=100,step:s=1,orientation:a="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[n],value:u,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:f=!1,form:p,...g}=e,m=q.useRef(new Set),y=q.useRef(0),v="horizontal"===a?cW:uW,[b=[],w]=hf({prop:u,defaultProp:c,onChange:e=>{var t;null==(t=[...m.current][y.current])||t.focus(),d(e)}}),x=q.useRef(b);function S(e,t,{commit:r}={commit:!1}){const a=function(e){return(String(e).split(".")[1]||"").length}(s),o=function(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}(Math.round((e-n)/s)*s+n,a),c=eD(o,[n,i]);w(((e=[])=>{const n=function(e=[],t,r){const n=[...e];return n[r]=t,n.sort(((e,t)=>e-t))}(e,c,t);if(function(e,t){if(t>0){const r=function(e){return e.slice(0,-1).map(((t,r)=>e[r+1]-t))}(e);return Math.min(...r)>=t}return!0}(n,l*s)){y.current=n.indexOf(c);const t=String(n)!==String(e);return t&&r&&h(n),t?n:e}return e}))}return Z.jsx(iW,{scope:e.__scopeSlider,name:r,disabled:o,min:n,max:i,valueIndexToChangeRef:y,thumbs:m.current,values:b,orientation:a,form:p,children:Z.jsx(ZG.Provider,{scope:e.__scopeSlider,children:Z.jsx(ZG.Slot,{scope:e.__scopeSlider,children:Z.jsx(v,{"aria-disabled":o,"data-disabled":o?"":void 0,...g,ref:t,onPointerDown:Ih(g.onPointerDown,(()=>{o||(x.current=b)})),min:n,max:i,inverted:f,onSlideStart:o?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const r=e.map((e=>Math.abs(e-t))),n=Math.min(...r);return r.indexOf(n)}(b,e);S(e,t)},onSlideMove:o?void 0:function(e){S(e,y.current)},onSlideEnd:o?void 0:function(){const e=x.current[y.current];b[y.current]!==e&&h(b)},onHomeKeyDown:()=>!o&&S(n,0,{commit:!0}),onEndKeyDown:()=>!o&&S(i,b.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!o){const r=QG.includes(e.key)||e.shiftKey&&YG.includes(e.key)?10:1,n=y.current;S(b[n]+s*r*t,n,{commit:!0})}}})})})})}));aW.displayName=JG;var[oW,lW]=rW(JG,{startEdge:"left",endEdge:"right",size:"width",direction:1}),cW=q.forwardRef(((e,t)=>{const{min:r,max:n,dir:i,inverted:s,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=e,[d,h]=q.useState(null),f=jh(t,(e=>h(e))),p=q.useRef(void 0),g=Ak(i),m="ltr"===g,y=m&&!s||!m&&s;function v(e){const t=p.current||d.getBoundingClientRect(),i=xW([0,t.width],y?[r,n]:[n,r]);return p.current=t,i(e-t.left)}return Z.jsx(oW,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:Z.jsx(dW,{dir:g,"data-orientation":"horizontal",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const t=v(e.clientX);null==a||a(t)},onSlideMove:e=>{const t=v(e.clientX);null==o||o(t)},onSlideEnd:()=>{p.current=void 0,null==l||l()},onStepKeyDown:e=>{const t=XG[y?"from-left":"from-right"].includes(e.key);null==c||c({event:e,direction:t?-1:1})}})})})),uW=q.forwardRef(((e,t)=>{const{min:r,max:n,inverted:i,onSlideStart:s,onSlideMove:a,onSlideEnd:o,onStepKeyDown:l,...c}=e,u=q.useRef(null),d=jh(t,u),h=q.useRef(void 0),f=!i;function p(e){const t=h.current||u.current.getBoundingClientRect(),i=xW([0,t.height],f?[n,r]:[r,n]);return h.current=t,i(e-t.top)}return Z.jsx(oW,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:Z.jsx(dW,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const t=p(e.clientY);null==s||s(t)},onSlideMove:e=>{const t=p(e.clientY);null==a||a(t)},onSlideEnd:()=>{h.current=void 0,null==o||o()},onStepKeyDown:e=>{const t=XG[f?"from-bottom":"from-top"].includes(e.key);null==l||l({event:e,direction:t?-1:1})}})})})),dW=q.forwardRef(((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:a,onEndKeyDown:o,onStepKeyDown:l,...c}=e,u=sW(JG,r);return Z.jsx(Kh.span,{...c,ref:t,onKeyDown:Ih(e.onKeyDown,(e=>{"Home"===e.key?(a(e),e.preventDefault()):"End"===e.key?(o(e),e.preventDefault()):QG.concat(YG).includes(e.key)&&(l(e),e.preventDefault())})),onPointerDown:Ih(e.onPointerDown,(e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),u.thumbs.has(t)?t.focus():n(e)})),onPointerMove:Ih(e.onPointerMove,(e=>{e.target.hasPointerCapture(e.pointerId)&&i(e)})),onPointerUp:Ih(e.onPointerUp,(e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),s(e))}))})})),hW="SliderTrack",fW=q.forwardRef(((e,t)=>{const{__scopeSlider:r,...n}=e,i=sW(hW,r);return Z.jsx(Kh.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:t})}));fW.displayName=hW;var pW="SliderRange",gW=q.forwardRef(((e,t)=>{const{__scopeSlider:r,...n}=e,i=sW(pW,r),s=lW(pW,r),a=jh(t,q.useRef(null)),o=i.values.length,l=i.values.map((e=>wW(e,i.min,i.max))),c=o>1?Math.min(...l):0,u=100-Math.max(...l);return Z.jsx(Kh.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...n,ref:a,style:{...e.style,[s.startEdge]:c+"%",[s.endEdge]:u+"%"}})}));gW.displayName=pW;var mW="SliderThumb",yW=q.forwardRef(((e,t)=>{const r=eW(e.__scopeSlider),[n,i]=q.useState(null),s=jh(t,(e=>i(e))),a=q.useMemo((()=>n?r().findIndex((e=>e.ref.current===n)):-1),[r,n]);return Z.jsx(vW,{...e,ref:s,index:a})})),vW=q.forwardRef(((e,t)=>{const{__scopeSlider:r,index:n,name:i,...s}=e,a=sW(mW,r),o=lW(mW,r),[l,c]=q.useState(null),u=jh(t,(e=>c(e))),d=!l||(a.form||!!l.closest("form")),h=i_(l),f=a.values[n],p=void 0===f?0:wW(f,a.min,a.max),g=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(n,a.values.length),m=null==h?void 0:h[o.size],y=m?function(e,t,r){const n=e/2,i=xW([0,50],[0,n]);return(n-i(t)*r)*r}(m,p,o.direction):0;return q.useEffect((()=>{if(l)return a.thumbs.add(l),()=>{a.thumbs.delete(l)}}),[l,a.thumbs]),Z.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${p}% + ${y}px)`},children:[Z.jsx(ZG.ItemSlot,{scope:e.__scopeSlider,children:Z.jsx(Kh.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":a.min,"aria-valuenow":f,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...s,ref:u,style:void 0===f?{display:"none"}:e.style,onFocus:Ih(e.onFocus,(()=>{a.valueIndexToChangeRef.current=n}))})}),d&&Z.jsx(bW,{name:i??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:f},n)]})}));yW.displayName=mW;var bW=q.forwardRef((({__scopeSlider:e,value:t,...r},n)=>{const i=q.useRef(null),s=jh(i,n),a=QD(t);return q.useEffect((()=>{const e=i.current;if(!e)return;const r=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(r,"value").set;if(a!==t&&n){const r=new Event("input",{bubbles:!0});n.call(e,t),e.dispatchEvent(r)}}),[a,t]),Z.jsx(Kh.input,{style:{display:"none"},...r,ref:s,defaultValue:t})}));function wW(e,t,r){return eD(100/(r-t)*(e-t),[0,100])}function xW(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}bW.displayName="RadioBubbleInput";var SW=aW,EW=fW,TW=gW,kW=yW;const AW=V.forwardRef((({className:e,...t},r)=>Z.jsxs(SW,{ref:r,className:Sm("relative flex w-full touch-none select-none items-center",e),...t,children:[Z.jsx(EW,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:Z.jsx(TW,{className:"absolute h-full bg-primary"})}),Z.jsx(kW,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})));AW.displayName=SW.displayName;const _W=V.forwardRef((({className:e="",orientation:t="horizontal",decorative:r=!0,...n},i)=>{const s=`shrink-0 bg-border ${"horizontal"===t?"h-[1px] w-full":"h-full w-[1px]"} ${e}`;return r?Z.jsx("div",{ref:i,role:"none",className:s,...n}):Z.jsx("div",{ref:i,role:"separator","aria-orientation":t,className:s,...n})}));_W.displayName="Separator";const CW=({currentLanguage:e})=>{const t=rh(),{toast:r}=Fm(),[n,i]=q.useState(!0),[s,a]=q.useState("idle"),[o,l]=q.useState(null),[c,u]=q.useState({autoSync:!0,maxAudioCache:200,maxDataCache:100,syncInterval:5,autoCleanup:!0}),[d,h]=q.useState([]),[f,p]=q.useState(!1);q.useEffect((()=>{g();const e=hL.onNetworkChange((e=>{i(e)})),t=hL.onSyncChange(((e,t)=>{a(e),"sync_complete"===e&&g()}));return()=>{e(),t()}}),[]);const g=async()=>{try{p(!0);const e=await dL.getStorageUsage(),t=await fL.getCacheStats(),r={...e,audioSize:t.totalSize||0,audioFileCount:t.fileCount||0,maxAudioCache:Math.round((t.maxSize||1073741824)/1048576)};l(r);const n=await dL.getCacheSetting("offlineSettings");n&&u(JSON.parse(n));const i=await dL.getSyncQueue();h(i)}catch(t){r({title:iy("errorLoadingData",e),description:t.message,variant:"destructive"})}finally{p(!1)}},m=e=>{if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]},y=(()=>{switch(s){case"syncing":return{icon:Z.jsx(dg,{className:"w-4 h-4 animate-spin"}),text:"...",color:"text-yellow-500"};case"synced":return{icon:Z.jsx(mp,{className:"w-4 h-4"}),text:"",color:"text-green-500"};case"error":return{icon:Z.jsx(Og,{className:"w-4 h-4"}),text:" ",color:"text-red-500"};default:return{icon:Z.jsx(Ep,{className:"w-4 h-4"}),text:"",color:"text-gray-500"}}})();return Z.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[Z.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[Z.jsxs(AT,{variant:"ghost",size:"sm",onClick:()=>t(-1),className:"text-slate-400 hover:text-white",children:[Z.jsx(dp,{className:"w-4 h-4 mr-2"}),iy("back",e)]}),Z.jsxs("div",{className:"flex-1",children:[Z.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[Z.jsx(yg,{className:"w-8 h-8"}),iy("offlineSettings",e)]}),Z.jsx("p",{className:"text-slate-400 mt-2",children:iy("offlineSettingsDescription",e)})]})]}),Z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[Z.jsxs(OT,{className:"bg-slate-800 border-slate-700",children:[Z.jsx(NT,{className:"pb-3",children:Z.jsxs(jT,{className:"text-white flex items-center gap-2",children:[n?Z.jsx(Ig,{className:"w-5 h-5 text-green-500"}):Z.jsx(Rg,{className:"w-5 h-5 text-red-500"}),iy("networkStatus",e)]})}),Z.jsx(MT,{children:Z.jsx(FT,{variant:n?"default":"destructive",className:"text-sm",children:n?"":""})})]}),Z.jsxs(OT,{className:"bg-slate-800 border-slate-700",children:[Z.jsx(NT,{className:"pb-3",children:Z.jsxs(jT,{className:"text-white flex items-center gap-2",children:[y.icon,iy("syncStatus",e)]})}),Z.jsx(MT,{children:Z.jsx("span",{className:`text-sm ${y.color}`,children:y.text})})]})]}),Z.jsxs(OT,{className:"bg-slate-800 border-slate-700 mb-8",children:[Z.jsxs(NT,{children:[Z.jsxs(jT,{className:"text-white flex items-center gap-2",children:[Z.jsx(Fp,{className:"w-5 h-5"}),iy("storageUsage",e)]}),Z.jsx(LT,{className:"text-slate-400",children:iy("storageUsageDescription",e)})]}),Z.jsx(MT,{className:"space-y-4",children:o?Z.jsxs(Z.Fragment,{children:[Z.jsxs("div",{children:[Z.jsxs("div",{className:"flex justify-between items-center mb-2",children:[Z.jsx("span",{className:"text-sm text-slate-300",children:iy("audioCache",e)}),Z.jsxs("span",{className:"text-sm text-slate-400",children:[m(o.audioSize||0)," / ",o.maxAudioCache||c.maxAudioCache," MB"]})]}),Z.jsx(GG,{value:(o.audioSize||0)/(1024*(o.maxAudioCache||c.maxAudioCache)*1024)*100,className:"h-2"})]}),Z.jsxs("div",{children:[Z.jsxs("div",{className:"flex justify-between items-center mb-2",children:[Z.jsx("span",{className:"text-sm text-slate-300",children:iy("dataCache",e)}),Z.jsxs("span",{className:"text-sm text-slate-400",children:[m(o.dataSize||0)," / ",c.maxDataCache," MB"]})]}),Z.jsx(GG,{value:(o.dataSize||0)/(1024*c.maxDataCache*1024)*100,className:"h-2"})]}),Z.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-slate-700",children:[Z.jsxs("div",{className:"text-center",children:[Z.jsx("div",{className:"text-2xl font-bold text-white",children:o.episodeCount||0}),Z.jsx("div",{className:"text-sm text-slate-400",children:iy("episodes",e)})]}),Z.jsxs("div",{className:"text-center",children:[Z.jsx("div",{className:"text-2xl font-bold text-white",children:o.transcriptCount||0}),Z.jsx("div",{className:"text-sm text-slate-400",children:iy("transcripts",e)})]})]})]}):Z.jsxs("div",{className:"text-center py-8",children:[Z.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-4"}),Z.jsx("p",{className:"text-slate-400",children:iy("loadingStats",e)})]})})]}),Z.jsxs(OT,{className:"bg-slate-800 border-slate-700 mb-8",children:[Z.jsxs(NT,{children:[Z.jsxs(jT,{className:"text-white flex items-center gap-2",children:[Z.jsx(kp,{className:"w-5 h-5"}),iy("cacheSettings",e)]}),Z.jsx(LT,{className:"text-slate-400",children:iy("cacheSettingsDescription",e)})]}),Z.jsxs(MT,{className:"space-y-6",children:[Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsxs("div",{children:[Z.jsx("label",{className:"text-sm font-medium text-white",children:iy("autoSync",e)}),Z.jsx("p",{className:"text-sm text-slate-400",children:iy("autoSyncDescription",e)})]}),Z.jsx(WG,{checked:c.autoSync,onCheckedChange:e=>u((t=>({...t,autoSync:e})))})]}),Z.jsx(_W,{className:"bg-slate-700"}),Z.jsxs("div",{children:[Z.jsxs("label",{className:"text-sm font-medium text-white mb-2 block",children:[iy("maxAudioCache",e)," (",c.maxAudioCache," MB)"]}),Z.jsx(AW,{value:[c.maxAudioCache],onValueChange:([e])=>u((t=>({...t,maxAudioCache:e}))),max:500,min:50,step:10,className:"w-full"}),Z.jsx("p",{className:"text-sm text-slate-400 mt-1",children:iy("maxAudioCacheDescription",e)})]}),Z.jsx(_W,{className:"bg-slate-700"}),Z.jsxs("div",{children:[Z.jsxs("label",{className:"text-sm font-medium text-white mb-2 block",children:[iy("maxDataCache",e)," (",c.maxDataCache," MB)"]}),Z.jsx(AW,{value:[c.maxDataCache],onValueChange:([e])=>u((t=>({...t,maxDataCache:e}))),max:200,min:20,step:10,className:"w-full"}),Z.jsx("p",{className:"text-sm text-slate-400 mt-1",children:iy("maxDataCacheDescription",e)})]}),Z.jsx(_W,{className:"bg-slate-700"}),Z.jsxs("div",{children:[Z.jsxs("label",{className:"text-sm font-medium text-white mb-2 block",children:[iy("syncInterval",e)," (",c.syncInterval," )"]}),Z.jsx(AW,{value:[c.syncInterval],onValueChange:([e])=>u((t=>({...t,syncInterval:e}))),max:30,min:1,step:1,className:"w-full"}),Z.jsx("p",{className:"text-sm text-slate-400 mt-1",children:iy("syncIntervalDescription",e)})]}),Z.jsx(_W,{className:"bg-slate-700"}),Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsxs("div",{children:[Z.jsx("label",{className:"text-sm font-medium text-white",children:iy("autoCleanup",e)}),Z.jsx("p",{className:"text-sm text-slate-400",children:iy("autoCleanupDescription",e)})]}),Z.jsx(WG,{checked:c.autoCleanup,onCheckedChange:e=>u((t=>({...t,autoCleanup:e})))})]}),Z.jsx(AT,{onClick:async()=>{try{await dL.saveCacheSetting("offlineSettings",JSON.stringify(c)),r({title:iy("settingsSaved",e),description:iy("offlineSettingsSaved",e),className:"bg-green-600/80 border-green-500 text-white"})}catch(t){r({title:iy("saveError",e),description:t.message,variant:"destructive"})}},className:"w-full bg-blue-600 hover:bg-blue-700",disabled:f,children:iy("saveSettings",e)})]})]}),Z.jsxs(OT,{className:"bg-slate-800 border-slate-700 mb-8",children:[Z.jsxs(NT,{children:[Z.jsxs(jT,{className:"text-white flex items-center gap-2",children:[Z.jsx(dg,{className:"w-5 h-5"}),iy("syncQueue",e)]}),Z.jsx(LT,{className:"text-slate-400",children:iy("syncQueueDescription",e)})]}),Z.jsx(MT,{children:d.length>0?Z.jsxs("div",{className:"space-y-2",children:[d.slice(0,10).map((e=>{return Z.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700 rounded-lg",children:[Z.jsxs("div",{className:"flex items-center gap-3",children:[Z.jsx(FT,{variant:"outline",className:"text-xs",children:e.type}),Z.jsxs("span",{className:"text-sm text-slate-300",children:[e.operation," - ",e.timestamp?(t=e.timestamp,new Date(t).toLocaleString()):"Unknown"]})]}),Z.jsxs(FT,{variant:e.attempts>=3?"destructive":"secondary",className:"text-xs",children:[e.attempts||0," "]})]},e.id);var t})),d.length>10&&Z.jsxs("p",{className:"text-sm text-slate-400 text-center",children:["...   ",d.length-10," "]})]}):Z.jsxs("div",{className:"text-center py-8",children:[Z.jsx(mp,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),Z.jsx("p",{className:"text-slate-400",children:iy("syncQueueEmpty",e)})]})})]}),Z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Z.jsxs(AT,{onClick:async()=>{try{p(!0),a("syncing"),await hL.forcSync(),r({title:iy("syncComplete",e),description:iy("manualSyncComplete",e),className:"bg-green-600/80 border-green-500 text-white"})}catch(t){r({title:iy("syncError",e),description:t.message,variant:"destructive"})}finally{p(!1),a("idle")}},className:"bg-green-600 hover:bg-green-700",disabled:f||!n,children:[Z.jsx(dg,{className:"w-4 h-4 mr-2"}),iy("manualSync",e)]}),Z.jsxs(AT,{onClick:g,variant:"outline",disabled:f,children:[Z.jsx(_p,{className:"w-4 h-4 mr-2"}),iy("refreshStats",e)]}),Z.jsxs(AT,{onClick:async()=>{try{p(!0),await fL.clearCache(),await dL.clearExpiredData(0),h([]),await g(),r({title:iy("cacheCleared",e),description:iy("offlineCacheCleared",e),className:"bg-blue-600/80 border-blue-500 text-white"})}catch(t){r({title:iy("clearCacheError",e),description:t.message,variant:"destructive"})}finally{p(!1)}},variant:"destructive",disabled:f,children:[Z.jsx(Sg,{className:"w-4 h-4 mr-2"}),iy("clearCache",e)]})]})]})};var PW={exports:{}};function DW(){}function RW(){}RW.resetWarningCache=DW;PW.exports=function(){function e(e,t,r,n,i,s){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==s){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:RW,resetWarningCache:DW};return r.PropTypes=r,r}();const IW=n(PW.exports);function OW(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(null==e||e(n),!1===r||!n.defaultPrevented)return null==t?void 0:t(n)}}function NW(e){const t=jW(e),r=q.forwardRef(((e,r)=>{const{children:n,...i}=e,s=q.Children.toArray(n),a=s.find(MW);if(a){const e=a.props.children,n=s.map((t=>t===a?q.Children.count(e)>1?q.Children.only(null):q.isValidElement(e)?e.props.children:null:t));return Z.jsx(t,{...i,ref:r,children:q.isValidElement(e)?q.cloneElement(e,void 0,n):null})}return Z.jsx(t,{...i,ref:r,children:n})}));return r.displayName=`${e}.Slot`,r}function jW(e){const t=q.forwardRef(((e,t)=>{const{children:r,...n}=e;if(q.isValidElement(r)){const e=function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;if(i)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(r),i=function(e,t){const r={...t};for(const n in t){const i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]={...i,...s}:"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==q.Fragment&&(i.ref=t?Nh(t,e):e),q.cloneElement(r,i)}return q.Children.count(r)>1?q.Children.only(null):null}));return t.displayName=`${e}.SlotClone`,t}var LW=Symbol("radix.slottable");function MW(e){return q.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===LW}var FW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce(((e,t)=>{const r=NW(`Primitive.${t}`),n=q.forwardRef(((e,n)=>{const{asChild:i,...s}=e,a=i?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),Z.jsx(a,{...s,ref:n})}));return n.displayName=`Primitive.${t}`,{...e,[t]:n}}),{}),UW="rovingFocusGroup.onEntryFocus",BW={bubbles:!1,cancelable:!0},$W="RovingFocusGroup",[zW,qW,VW]=function(e){const t=e+"CollectionProvider",[r,n]=Lh(t),[i,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=e=>{const{scope:t,children:r}=e,n=V.useRef(null),s=V.useRef(new Map).current;return Z.jsx(i,{scope:t,itemMap:s,collectionRef:n,children:r})};a.displayName=t;const o=e+"CollectionSlot",l=NW(o),c=V.forwardRef(((e,t)=>{const{scope:r,children:n}=e,i=jh(t,s(o,r).collectionRef);return Z.jsx(l,{ref:i,children:n})}));c.displayName=o;const u=e+"CollectionItemSlot",d="data-radix-collection-item",h=NW(u),f=V.forwardRef(((e,t)=>{const{scope:r,children:n,...i}=e,a=V.useRef(null),o=jh(t,a),l=s(u,r);return V.useEffect((()=>(l.itemMap.set(a,{ref:a,...i}),()=>{l.itemMap.delete(a)}))),Z.jsx(h,{[d]:"",ref:o,children:n})}));return f.displayName=u,[{Provider:a,Slot:c,ItemSlot:f},function(t){const r=s(e+"CollectionConsumer",t),n=V.useCallback((()=>{const e=r.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${d}]`)),n=Array.from(r.itemMap.values()).sort(((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current)));return n}),[r.collectionRef,r.itemMap]);return n},n]}($W),[KW,HW]=Lh($W,[VW]),[GW,WW]=KW($W),QW=q.forwardRef(((e,t)=>Z.jsx(zW.Provider,{scope:e.__scopeRovingFocusGroup,children:Z.jsx(zW.Slot,{scope:e.__scopeRovingFocusGroup,children:Z.jsx(YW,{...e,ref:t})})})));QW.displayName=$W;var YW=q.forwardRef(((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,h=q.useRef(null),f=jh(t,h),p=Ak(s),[g,m]=hf({prop:a,defaultProp:o??null,onChange:l,caller:$W}),[y,v]=q.useState(!1),b=Gh(c),w=qW(r),x=q.useRef(!1),[S,E]=q.useState(0);return q.useEffect((()=>{const e=h.current;if(e)return e.addEventListener(UW,b),()=>e.removeEventListener(UW,b)}),[b]),Z.jsx(GW,{scope:r,orientation:n,dir:p,loop:i,currentTabStopId:g,onItemFocus:q.useCallback((e=>m(e)),[m]),onItemShiftTab:q.useCallback((()=>v(!0)),[]),onFocusableItemAdd:q.useCallback((()=>E((e=>e+1))),[]),onFocusableItemRemove:q.useCallback((()=>E((e=>e-1))),[]),children:Z.jsx(FW.div,{tabIndex:y||0===S?-1:0,"data-orientation":n,...d,ref:f,style:{outline:"none",...e.style},onMouseDown:OW(e.onMouseDown,(()=>{x.current=!0})),onFocus:OW(e.onFocus,(e=>{const t=!x.current;if(e.target===e.currentTarget&&t&&!y){const t=new CustomEvent(UW,BW);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=w().filter((e=>e.focusable));eQ([e.find((e=>e.active)),e.find((e=>e.id===g)),...e].filter(Boolean).map((e=>e.ref.current)),u)}}x.current=!1})),onBlur:OW(e.onBlur,(()=>v(!1)))})})})),XW="RovingFocusGroupItem",JW=q.forwardRef(((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:s,children:a,...o}=e,l=ES(),c=s||l,u=WW(XW,r),d=u.currentTabStopId===c,h=qW(r),{onFocusableItemAdd:f,onFocusableItemRemove:p,currentTabStopId:g}=u;return q.useEffect((()=>{if(n)return f(),()=>p()}),[n,f,p]),Z.jsx(zW.ItemSlot,{scope:r,id:c,focusable:n,active:i,children:Z.jsx(FW.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:OW(e.onMouseDown,(e=>{n?u.onItemFocus(c):e.preventDefault()})),onFocus:OW(e.onFocus,(()=>u.onItemFocus(c))),onKeyDown:OW(e.onKeyDown,(e=>{if("Tab"===e.key&&e.shiftKey)return void u.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,r){const n=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,r);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(n)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)?void 0:ZW[n]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let i=h().filter((e=>e.focusable)).map((e=>e.ref.current));if("last"===t)i.reverse();else if("prev"===t||"next"===t){"prev"===t&&i.reverse();const s=i.indexOf(e.currentTarget);i=u.loop?(n=s+1,(r=i).map(((e,t)=>r[(n+t)%r.length]))):i.slice(s+1)}setTimeout((()=>eQ(i)))}var r,n})),children:"function"==typeof a?a({isCurrentTabStop:d,hasTabStop:null!=g}):a})})}));JW.displayName=XW;var ZW={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function eQ(e,t=!1){const r=document.activeElement;for(const n of e){if(n===r)return;if(n.focus({preventScroll:t}),document.activeElement!==r)return}}var tQ=QW,rQ=JW;var nQ=e=>{const{present:t,children:r}=e,n=function(e){const[t,r]=q.useState(),n=q.useRef(null),i=q.useRef(e),s=q.useRef("none"),a=e?"mounted":"unmounted",[o,l]=function(e,t){return q.useReducer(((e,r)=>t[e][r]??e),e)}(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return q.useEffect((()=>{const e=iQ(n.current);s.current="mounted"===o?e:"none"}),[o]),of((()=>{const t=n.current,r=i.current;if(r!==e){const n=s.current,a=iQ(t);if(e)l("MOUNT");else if("none"===a||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(r&&n!==a?"ANIMATION_OUT":"UNMOUNT")}i.current=e}}),[e,l]),of((()=>{if(t){let e;const r=t.ownerDocument.defaultView??window,a=s=>{const a=iQ(n.current).includes(CSS.escape(s.animationName));if(s.target===t&&a&&(l("ANIMATION_END"),!i.current)){const n=t.style.animationFillMode;t.style.animationFillMode="forwards",e=r.setTimeout((()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=n)}))}},o=e=>{e.target===t&&(s.current=iQ(n.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",a),t.addEventListener("animationend",a),()=>{r.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",a),t.removeEventListener("animationend",a)}}l("ANIMATION_END")}),[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:q.useCallback((e=>{n.current=e?getComputedStyle(e):null,r(e)}),[])}}(t),i="function"==typeof r?r({present:n.isPresent}):q.Children.only(r),s=jh(n.ref,function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;if(i)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(i));return"function"==typeof r||n.isPresent?q.cloneElement(i,{ref:s}):null};function iQ(e){return(null==e?void 0:e.animationName)||"none"}nQ.displayName="Presence";var sQ="Tabs",[aQ,oQ]=Lh(sQ,[HW]),lQ=HW(),[cQ,uQ]=aQ(sQ),dQ=q.forwardRef(((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:o,activationMode:l="automatic",...c}=e,u=Ak(o),[d,h]=hf({prop:n,onChange:i,defaultProp:s??"",caller:sQ});return Z.jsx(cQ,{scope:r,baseId:ES(),value:d,onValueChange:h,orientation:a,dir:u,activationMode:l,children:Z.jsx(FW.div,{dir:u,"data-orientation":a,...c,ref:t})})}));dQ.displayName=sQ;var hQ="TabsList",fQ=q.forwardRef(((e,t)=>{const{__scopeTabs:r,loop:n=!0,...i}=e,s=uQ(hQ,r),a=lQ(r);return Z.jsx(tQ,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:n,children:Z.jsx(FW.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:t})})}));fQ.displayName=hQ;var pQ="TabsTrigger",gQ=q.forwardRef(((e,t)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...s}=e,a=uQ(pQ,r),o=lQ(r),l=vQ(a.baseId,n),c=bQ(a.baseId,n),u=n===a.value;return Z.jsx(rQ,{asChild:!0,...o,focusable:!i,active:u,children:Z.jsx(FW.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:t,onMouseDown:OW(e.onMouseDown,(e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():a.onValueChange(n)})),onKeyDown:OW(e.onKeyDown,(e=>{[" ","Enter"].includes(e.key)&&a.onValueChange(n)})),onFocus:OW(e.onFocus,(()=>{const e="manual"!==a.activationMode;u||i||!e||a.onValueChange(n)}))})})}));gQ.displayName=pQ;var mQ="TabsContent",yQ=q.forwardRef(((e,t)=>{const{__scopeTabs:r,value:n,forceMount:i,children:s,...a}=e,o=uQ(mQ,r),l=vQ(o.baseId,n),c=bQ(o.baseId,n),u=n===o.value,d=q.useRef(u);return q.useEffect((()=>{const e=requestAnimationFrame((()=>d.current=!1));return()=>cancelAnimationFrame(e)}),[]),Z.jsx(nQ,{present:i||u,children:({present:r})=>Z.jsx(FW.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!r,id:c,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:r&&s})})}));function vQ(e,t){return`${e}-trigger-${t}`}function bQ(e,t){return`${e}-content-${t}`}yQ.displayName=mQ;var wQ=fQ,xQ=gQ,SQ=yQ;const EQ=dQ,TQ=q.forwardRef((({className:e,...t},r)=>Z.jsx(wQ,{ref:r,className:Sm("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t})));TQ.displayName=wQ.displayName;const kQ=q.forwardRef((({className:e,...t},r)=>Z.jsx(xQ,{ref:r,className:Sm("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t})));kQ.displayName=xQ.displayName;const AQ=q.forwardRef((({className:e,...t},r)=>Z.jsx(SQ,{ref:r,className:Sm("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t})));AQ.displayName=SQ.displayName;const _Q=(e,t={})=>{const{startDate:r,endDate:n,period:i="7d"}=t;switch(e){case"overview":return{totalUsers:1247,totalSessions:3521,totalPageViews:8934,avgSessionDuration:245,bounceRate:32.5,change:{users:12.3,sessions:8.7,pageViews:15.2,sessionDuration:-3.4,bounceRate:-2.1}};case"visitors":return CQ(i);case"popular_episodes":return[{title:" 1:    ",views:523,avgDuration:1245},{title:" 2:  ",views:487,avgDuration:1189},{title:" 3:   ",views:445,avgDuration:1356},{title:" 4:   ",views:398,avgDuration:1423},{title:" 5:   ",views:376,avgDuration:1167},{title:" 6:   ",views:342,avgDuration:1289},{title:" 7:  ",views:321,avgDuration:1534},{title:" 8: ",views:298,avgDuration:1245},{title:" 9:   ",views:276,avgDuration:1398},{title:" 10:  ",views:254,avgDuration:1456}];case"geography":return[{country:"",city:"",users:342,sessions:876},{country:"",city:"-",users:198,sessions:523},{country:"",city:"",users:165,sessions:412},{country:"",city:"",users:143,sessions:378},{country:"",city:"-",users:87,sessions:234},{country:"",city:"",users:76,sessions:198},{country:"",city:"-",users:54,sessions:156},{country:"",city:"",users:43,sessions:123},{country:"",city:"",users:38,sessions:98},{country:"",city:"",users:32,sessions:87}];case"devices":return{devices:[{type:"mobile",count:1876,percentage:62.3},{type:"desktop",count:896,percentage:29.8},{type:"tablet",count:238,percentage:7.9}],browsers:[{name:"Chrome",count:1543,percentage:51.2},{name:"Safari",count:734,percentage:24.4},{name:"Firefox",count:398,percentage:13.2},{name:"Edge",count:234,percentage:7.8},{name:"Other",count:101,percentage:3.4}]};case"traffic_sources":return[{source:"direct",users:1245,percentage:41.3},{source:"organic",users:987,percentage:32.8},{source:"social",users:456,percentage:15.1},{source:"referral",users:234,percentage:7.8},{source:"email",users:89,percentage:3}];case"listening_stats":return{avgListeningTime:892,completionRate:67.8,totalPlays:3421,totalCompletions:2319,mostActiveHours:[{hour:8,plays:287},{hour:9,plays:342},{hour:12,plays:298},{hour:13,plays:265},{hour:18,plays:312},{hour:19,plays:398},{hour:20,plays:423},{hour:21,plays:378}]};case"behavior":return{bounceRate:32.5,avgSessionDuration:245,pagesPerSession:3.2,interactions:{searches:876,filters:1234,shares:234,downloads:567}};default:return null}},CQ=e=>{const t=[];for(let r=("30d"===e?30:"7d"===e?7:1)-1;r>=0;r--){const e=new Date;e.setDate(e.getDate()-r);const n=e.getDay(),i=0===n||6===n?30:50,s=20*Math.random();t.push({date:e.toISOString().split("T")[0],users:Math.round(i+s),sessions:Math.round((i+s)*(2+Math.random())),pageViews:Math.round((i+s)*(5+3*Math.random()))})}return t},PQ=async(e,t,r=!0)=>{try{return _Q("overview",{startDate:e,endDate:t})}catch(n){return _Q("overview",{startDate:e,endDate:t})}},DQ=async(e="7d",t=!0)=>{try{return _Q("visitors",{period:e})}catch(r){return _Q("visitors",{period:e})}},RQ=async(e=10,t=!0)=>{try{return _Q("popular_episodes")}catch(r){return _Q("popular_episodes")}},IQ=async(e=!0)=>{try{return _Q("geography")}catch(t){return _Q("geography")}},OQ=async(e=!0)=>{try{return _Q("devices")}catch(t){return _Q("devices")}},NQ=async(e=!0)=>{try{return _Q("traffic_sources")}catch(t){return _Q("traffic_sources")}},jQ=async(e=!0)=>{try{return _Q("listening_stats")}catch(t){return _Q("listening_stats")}},LQ=async(e=!0)=>{try{return _Q("behavior")}catch(t){return _Q("behavior")}},MQ=({data:e,currentLanguage:t})=>{var r,n,i,s,a,o,l;if(!e)return Z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map((e=>Z.jsx(OT,{className:"bg-white/10 border-white/20",children:Z.jsx(MT,{className:"p-6",children:Z.jsx("div",{className:"h-20 animate-pulse bg-white/10 rounded"})})},e)))});const c=[{title:iy("analyticsTotalUsers",t),value:(null==(r=e.totalUsers)?void 0:r.toLocaleString())||"0",change:(null==(n=e.change)?void 0:n.users)||0,icon:_g,color:"text-blue-400"},{title:iy("analyticsTotalSessions",t),value:(null==(i=e.totalSessions)?void 0:i.toLocaleString())||"0",change:(null==(s=e.change)?void 0:s.sessions)||0,icon:rg,color:"text-purple-400"},{title:iy("analyticsTotalPageViews",t),value:(null==(a=e.totalPageViews)?void 0:a.toLocaleString())||"0",change:(null==(o=e.change)?void 0:o.pageViews)||0,icon:Pp,color:"text-green-400"},{title:iy("analyticsAvgSessionDuration",t),value:FQ(e.avgSessionDuration),change:(null==(l=e.change)?void 0:l.sessionDuration)||0,icon:Ep,color:"text-yellow-400"}];return Z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:c.map(((e,r)=>{const n=e.icon,i=e.change>0,s=i?Tg:Eg;return Z.jsxs(OT,{className:"bg-white/10 border-white/20 hover:bg-white/15 transition-colors",children:[Z.jsxs(NT,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[Z.jsx(jT,{className:"text-sm font-medium text-white/80",children:e.title}),Z.jsx(n,{className:`h-4 w-4 ${e.color}`})]}),Z.jsxs(MT,{children:[Z.jsx("div",{className:"text-2xl font-bold text-white",children:e.value}),0!==e.change&&Z.jsxs("div",{className:"flex items-center text-xs mt-1 "+(i?"text-green-400":"text-red-400"),children:[Z.jsx(s,{className:"h-3 w-3 mr-1"}),Z.jsxs("span",{children:[Math.abs(e.change).toFixed(1),"%"]}),Z.jsx("span",{className:"text-white/60 ml-1",children:iy("analyticsVsPreviousPeriod",t)})]})]})]},r)}))})},FQ=e=>{if(!e)return"0s";const t=Math.floor(e/60),r=e%60;return t>0?`${t}m ${r}s`:`${r}s`};var UQ=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function BQ(e){return"string"==typeof e&&UQ.includes(e)}var $Q=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function zQ(e){return"string"==typeof e&&$Q.includes(e)}function qQ(e){return"string"==typeof e&&e.startsWith("data-")}function VQ(e){var t=Object.entries(e).filter((e=>{var[t]=e;return zQ(t)||qQ(t)}));return Object.fromEntries(t)}function KQ(e){return null==e?null:q.isValidElement(e)&&"object"==typeof e.props&&null!==e.props?VQ(e.props):"object"!=typeof e||Array.isArray(e)?null:VQ(e)}function HQ(e){var t=Object.entries(e).filter((e=>{var[t]=e;return zQ(t)||qQ(t)||BQ(t)}));return Object.fromEntries(t)}var GQ=["children","width","height","viewBox","className","style","title","desc"];function WQ(){return WQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},WQ.apply(null,arguments)}var QQ=q.forwardRef(((e,t)=>{var{children:r,width:n,height:i,viewBox:s,className:a,style:o,title:l,desc:c}=e,u=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,GQ),d=s||{width:n,height:i,x:0,y:0},h=rp("recharts-surface",a);return q.createElement("svg",WQ({},HQ(u),{className:h,width:n,height:i,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height),ref:t}),q.createElement("title",null,l),q.createElement("desc",null,c),r)})),YQ=["children","className"];function XQ(){return XQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XQ.apply(null,arguments)}var JQ=q.forwardRef(((e,t)=>{var{children:r,className:n}=e,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,YQ),s=rp("recharts-layer",n);return q.createElement("g",XQ({className:s},HQ(i),{ref:t}),r)})),ZQ=q.createContext(null);function eY(e){return function(){return e}}const tY=Math.cos,rY=Math.sin,nY=Math.sqrt,iY=Math.PI,sY=2*iY,aY=Math.PI,oY=2*aY,lY=1e-6,cY=oY-lY;function uY(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class dY{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?uY:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return uY;const r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,i,s){this._append`C${+e},${+t},${+r},${+n},${this._x1=+i},${this._y1=+s}`}arcTo(e,t,r,n,i){if(e=+e,t=+t,r=+r,n=+n,(i=+i)<0)throw new Error(`negative radius: ${i}`);let s=this._x1,a=this._y1,o=r-e,l=n-t,c=s-e,u=a-t,d=c*c+u*u;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(d>lY)if(Math.abs(u*o-l*c)>lY&&i){let h=r-s,f=n-a,p=o*o+l*l,g=h*h+f*f,m=Math.sqrt(p),y=Math.sqrt(d),v=i*Math.tan((aY-Math.acos((p+d-g)/(2*m*y)))/2),b=v/y,w=v/m;Math.abs(b-1)>lY&&this._append`L${e+b*c},${t+b*u}`,this._append`A${i},${i},0,0,${+(u*h>c*f)},${this._x1=e+w*o},${this._y1=t+w*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,r,n,i,s){if(e=+e,t=+t,s=!!s,(r=+r)<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(n),o=r*Math.sin(n),l=e+a,c=t+o,u=1^s,d=s?n-i:i-n;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>lY||Math.abs(this._y1-c)>lY)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%oY+oY),d>cY?this._append`A${r},${r},0,1,${u},${e-a},${t-o}A${r},${r},0,1,${u},${this._x1=l},${this._y1=c}`:d>lY&&this._append`A${r},${r},0,${+(d>=aY)},${u},${this._x1=e+r*Math.cos(i)},${this._y1=t+r*Math.sin(i)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function hY(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError(`invalid digits: ${r}`);t=e}return e},()=>new dY(t)}function fY(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function pY(e){this._context=e}function gY(e){return new pY(e)}function mY(e){return e[0]}function yY(e){return e[1]}function vY(e,t){var r=eY(!0),n=null,i=gY,s=null,a=hY(o);function o(o){var l,c,u,d=(o=fY(o)).length,h=!1;for(null==n&&(s=i(u=a())),l=0;l<=d;++l)!(l<d&&r(c=o[l],l,o))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(c,l,o),+t(c,l,o));if(u)return s=null,u+""||null}return e="function"==typeof e?e:void 0===e?mY:eY(e),t="function"==typeof t?t:void 0===t?yY:eY(t),o.x=function(t){return arguments.length?(e="function"==typeof t?t:eY(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:eY(+e),o):t},o.defined=function(e){return arguments.length?(r="function"==typeof e?e:eY(!!e),o):r},o.curve=function(e){return arguments.length?(i=e,null!=n&&(s=i(n)),o):i},o.context=function(e){return arguments.length?(null==e?n=s=null:s=i(n=e),o):n},o}function bY(e,t,r){var n=null,i=eY(!0),s=null,a=gY,o=null,l=hY(c);function c(c){var u,d,h,f,p,g=(c=fY(c)).length,m=!1,y=new Array(g),v=new Array(g);for(null==s&&(o=a(p=l())),u=0;u<=g;++u){if(!(u<g&&i(f=c[u],u,c))===m)if(m=!m)d=u,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=u-1;h>=d;--h)o.point(y[h],v[h]);o.lineEnd(),o.areaEnd()}m&&(y[u]=+e(f,u,c),v[u]=+t(f,u,c),o.point(n?+n(f,u,c):y[u],r?+r(f,u,c):v[u]))}if(p)return o=null,p+""||null}function u(){return vY().defined(i).curve(a).context(s)}return e="function"==typeof e?e:void 0===e?mY:eY(+e),t="function"==typeof t?t:eY(void 0===t?0:+t),r="function"==typeof r?r:void 0===r?yY:eY(+r),c.x=function(t){return arguments.length?(e="function"==typeof t?t:eY(+t),n=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:eY(+t),c):e},c.x1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:eY(+e),c):n},c.y=function(e){return arguments.length?(t="function"==typeof e?e:eY(+e),r=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:eY(+e),c):t},c.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:eY(+e),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(n).y(t)},c.defined=function(e){return arguments.length?(i="function"==typeof e?e:eY(!!e),c):i},c.curve=function(e){return arguments.length?(a=e,null!=s&&(o=a(s)),c):a},c.context=function(e){return arguments.length?(null==e?s=o=null:o=a(s=e),c):s},c}pY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class wY{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}const xY={draw(e,t){const r=nY(t/iY);e.moveTo(r,0),e.arc(0,0,r,0,sY)}},SY={draw(e,t){const r=nY(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},EY=nY(1/3),TY=2*EY,kY={draw(e,t){const r=nY(t/TY),n=r*EY;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},AY={draw(e,t){const r=nY(t),n=-r/2;e.rect(n,n,r,r)}},_Y=rY(iY/10)/rY(7*iY/10),CY=rY(sY/10)*_Y,PY=-tY(sY/10)*_Y,DY={draw(e,t){const r=nY(.8908130915292852*t),n=CY*r,i=PY*r;e.moveTo(0,-r),e.lineTo(n,i);for(let s=1;s<5;++s){const t=sY*s/5,a=tY(t),o=rY(t);e.lineTo(o*r,-a*r),e.lineTo(a*n-o*i,o*n+a*i)}e.closePath()}},RY=nY(3),IY={draw(e,t){const r=-nY(t/(3*RY));e.moveTo(0,2*r),e.lineTo(-RY*r,-r),e.lineTo(RY*r,-r),e.closePath()}},OY=-.5,NY=nY(3)/2,jY=1/nY(12),LY=3*(jY/2+1),MY={draw(e,t){const r=nY(t/LY),n=r/2,i=r*jY,s=n,a=r*jY+r,o=-s,l=a;e.moveTo(n,i),e.lineTo(s,a),e.lineTo(o,l),e.lineTo(OY*n-NY*i,NY*n+OY*i),e.lineTo(OY*s-NY*a,NY*s+OY*a),e.lineTo(OY*o-NY*l,NY*o+OY*l),e.lineTo(OY*n+NY*i,OY*i-NY*n),e.lineTo(OY*s+NY*a,OY*a-NY*s),e.lineTo(OY*o+NY*l,OY*l-NY*o),e.closePath()}};function FY(){}function UY(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function BY(e){this._context=e}function $Y(e){this._context=e}function zY(e){this._context=e}function qY(e){this._context=e}function VY(e){return e<0?-1:1}function KY(e,t,r){var n=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(n||i<0&&-0),a=(r-e._y1)/(i||n<0&&-0),o=(s*i+a*n)/(n+i);return(VY(s)+VY(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function HY(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function GY(e,t,r){var n=e._x0,i=e._y0,s=e._x1,a=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,i+o*t,s-o,a-o*r,s,a)}function WY(e){this._context=e}function QY(e){this._context=new YY(e)}function YY(e){this._context=e}function XY(e){this._context=e}function JY(e){var t,r,n=e.length-1,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function ZY(e,t){this._context=e,this._t=t}function eX(e,t){if((i=e.length)>1)for(var r,n,i,s=1,a=e[t[0]],o=a.length;s<i;++s)for(n=a,a=e[t[s]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}function tX(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function rX(e,t){return e[t]}function nX(e){const t=[];return t.key=e,t}BY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:UY(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:UY(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},$Y.prototype={areaStart:FY,areaEnd:FY,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:UY(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},zY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:UY(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},qY.prototype={areaStart:FY,areaEnd:FY,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},WY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:GY(this,this._t0,HY(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,GY(this,HY(this,r=KY(this,e,t)),r);break;default:GY(this,this._t0,r=KY(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(QY.prototype=Object.create(WY.prototype)).point=function(e,t){WY.prototype.point.call(this,t,e)},YY.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,s){this._context.bezierCurveTo(t,e,n,r,s,i)}},XY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=JY(e),i=JY(t),s=0,a=1;a<r;++s,++a)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],e[a],t[a]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},ZY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};var iX,sX={},aX={};iX=aX,Object.defineProperty(iX,Symbol.toStringTag,{value:"Module"}),iX.isUnsafeProperty=function(e){return"__proto__"===e};var oX={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}}(oX);var lX={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.toKey=function(e){var t;return"string"==typeof e||"symbol"==typeof e?e:Object.is(null==(t=null==e?void 0:e.valueOf)?void 0:t.call(e),-0)?"-0":String(e)}}(lX);var cX={},uX={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.toString=function e(t){if(null==t)return"";if("string"==typeof t)return t;if(Array.isArray(t))return t.map(e).join(",");const r=String(t);return"0"===r&&Object.is(Number(t),-0)?"-0":r}}(uX),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uX,r=lX;e.toPath=function(e){if(Array.isArray(e))return e.map(r.toKey);if("symbol"==typeof e)return[e];const n=[],i=(e=t.toString(e)).length;if(0===i)return n;let s=0,a="",o="",l=!1;for(46===e.charCodeAt(0)&&(n.push(""),s++);s<i;){const t=e[s];o?"\\"===t&&s+1<i?(s++,a+=e[s]):t===o?o="":a+=t:l?'"'===t||"'"===t?o=t:"]"===t?(l=!1,n.push(a),a=""):a+=t:"["===t?(l=!0,a&&(n.push(a),a="")):"."===t?a&&(n.push(a),a=""):a+=t,s++}return a&&n.push(a),n}}(cX),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aX,r=oX,n=lX,i=cX;e.get=function e(s,a,o){if(null==s)return o;switch(typeof a){case"string":{if(t.isUnsafeProperty(a))return o;const n=s[a];return void 0===n?r.isDeepKey(a)?e(s,i.toPath(a),o):o:n}case"number":case"symbol":{"number"==typeof a&&(a=n.toKey(a));const e=s[a];return void 0===e?o:e}default:{if(Array.isArray(a))return function(e,r,n){if(0===r.length)return n;let i=e;for(let s=0;s<r.length;s++){if(null==i)return n;if(t.isUnsafeProperty(r[s]))return n;i=i[r[s]]}if(void 0===i)return n;return i}(s,a,o);if(a=Object.is(null==a?void 0:a.valueOf(),-0)?"-0":String(a),t.isUnsafeProperty(a))return o;const e=s[a];return void 0===e?o:e}}}}(sX);const dX=n(sX.get);var hX=e=>0===e?0:e>0?1:-1,fX=e=>"number"==typeof e&&e!=+e,pX=e=>"string"==typeof e&&e.indexOf("%")===e.length-1,gX=e=>("number"==typeof e||e instanceof Number)&&!fX(e),mX=e=>gX(e)||"string"==typeof e,yX=0,vX=e=>{var t=++yX;return"".concat(e||"").concat(t)},bX=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!gX(e)&&"string"!=typeof e)return n;if(pX(e)){if(null==t)return n;var s=e.indexOf("%");r=t*parseFloat(e.slice(0,s))/100}else r=+e;return fX(r)&&(r=n),i&&null!=t&&r>t&&(r=t),r},wX=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++){if(r[e[n]])return!0;r[e[n]]=!0}return!1};function xX(e,t,r){return gX(e)&&gX(t)?e+r*(t-e):t}function SX(e,t,r){if(e&&e.length)return e.find((e=>e&&("function"==typeof t?t(e):dX(e,t))===r))}var EX=e=>null==e,TX=e=>EX(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),kX=["type","size","sizeType"];function AX(){return AX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},AX.apply(null,arguments)}function _X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function CX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_X(Object(r),!0).forEach((function(t){PX(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function PX(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var DX={symbolCircle:xY,symbolCross:SY,symbolDiamond:kY,symbolSquare:AY,symbolStar:DY,symbolTriangle:IY,symbolWye:MY},RX=Math.PI/180,IX=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=CX(CX({},function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,kX)),{},{type:t,size:r,sizeType:n}),s="circle";"string"==typeof t&&(s=t);var{className:a,cx:o,cy:l}=i,c=HQ(i);return o===+o&&l===+l&&r===+r?q.createElement("path",AX({},c,{className:rp("recharts-symbols",a),transform:"translate(".concat(o,", ").concat(l,")"),d:(()=>{var e=(e=>{var t="symbol".concat(TX(e));return DX[t]||xY})(s),t=function(e,t){let r=null,n=hY(i);function i(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return e="function"==typeof e?e:eY(e||xY),t="function"==typeof t?t:eY(void 0===t?64:+t),i.type=function(t){return arguments.length?(e="function"==typeof t?t:eY(t),i):e},i.size=function(e){return arguments.length?(t="function"==typeof e?e:eY(+e),i):t},i.context=function(e){return arguments.length?(r=null==e?null:e,i):r},i}().type(e).size(((e,t,r)=>{if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*RX;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.tan(n)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(r,n,s)),i=t();if(null!==i)return i})()})):null};IX.registerSymbol=(e,t)=>{DX["symbol".concat(TX(e))]=t};var OX=(e,t)=>{if(!e||"function"==typeof e||"boolean"==typeof e)return null;var r=e;if(q.isValidElement(e)&&(r=e.props),"object"!=typeof r&&"function"!=typeof r)return null;var n={};return Object.keys(r).forEach((e=>{BQ(e)&&(n[e]=t||(t=>r[e](r,t)))})),n},NX=(e,t,r)=>{if(null===e||"object"!=typeof e&&"function"!=typeof e)return null;var n=null;return Object.keys(e).forEach((i=>{var s=e[i];BQ(i)&&"function"==typeof s&&(n||(n={}),n[i]=((e,t,r)=>n=>(e(t,r,n),null))(s,t,r))})),n};function jX(){return jX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jX.apply(null,arguments)}function LX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MX(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var FX=32;class UX extends q.PureComponent{renderIcon(e,t){var{inactiveColor:r}=this.props,n=16,i=FX/6,s=FX/3,a=e.inactive?r:e.color,o=null!=t?t:e.type;if("none"===o)return null;if("plainline"===o)return q.createElement("line",{strokeWidth:4,fill:"none",stroke:a,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:n,x2:FX,y2:n,className:"recharts-legend-icon"});if("line"===o)return q.createElement("path",{strokeWidth:4,fill:"none",stroke:a,d:"M0,".concat(n,"h").concat(s,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(2*s,",").concat(n,"\n            H").concat(FX,"M").concat(2*s,",").concat(n,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(s,",").concat(n),className:"recharts-legend-icon"});if("rect"===o)return q.createElement("path",{stroke:"none",fill:a,d:"M0,".concat(4,"h").concat(FX,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(q.isValidElement(e.legendIcon)){var l=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LX(Object(r),!0).forEach((function(t){MX(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LX(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);return delete l.legendIcon,q.cloneElement(e.legendIcon,l)}return q.createElement(IX,{fill:a,cx:n,cy:n,size:FX,sizeType:"diameter",type:o})}renderItems(){var{payload:e,iconSize:t,layout:r,formatter:n,inactiveColor:i,iconType:s}=this.props,a={x:0,y:0,width:FX,height:FX},o={display:"horizontal"===r?"inline-block":"block",marginRight:10},l={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map(((e,r)=>{var c=e.formatter||n,u=rp({"recharts-legend-item":!0,["legend-item-".concat(r)]:!0,inactive:e.inactive});if("none"===e.type)return null;var d=e.inactive?i:e.color,h=c?c(e.value,e,r):e.value;return q.createElement("li",jX({className:u,style:o,key:"legend-item-".concat(r)},NX(this.props,e,r)),q.createElement(QQ,{width:t,height:t,viewBox:a,style:l,"aria-label":"".concat(h," legend icon")},this.renderIcon(e,s)),q.createElement("span",{className:"recharts-legend-item-text",style:{color:d}},h))}))}render(){var{payload:e,layout:t,align:r}=this.props;if(!e||!e.length)return null;var n={padding:0,margin:0,textAlign:"horizontal"===t?r:"left"};return q.createElement("ul",{className:"recharts-default-legend",style:n},this.renderItems())}}MX(UX,"displayName","Legend"),MX(UX,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var BX={},$X={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.uniqBy=function(e,t){const r=new Map;for(let n=0;n<e.length;n++){const i=e[n],s=t(i);r.has(s)||r.set(s,i)}return Array.from(r.values())}}($X);var zX={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.identity=function(e){return e}}(zX);var qX={},VX={},KX={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}}(KX),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KX;e.isArrayLike=function(e){return null!=e&&"function"!=typeof e&&t.isLength(e.length)}}(VX);var HX={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isObjectLike=function(e){return"object"==typeof e&&null!==e}}(HX),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VX,r=HX;e.isArrayLikeObject=function(e){return r.isObjectLike(e)&&t.isArrayLike(e)}}(qX);var GX={},WX={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sX;e.property=function(e){return function(r){return t.get(r,e)}}}(WX);var QX={},YX={},XX={},JX={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isObject=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}}(JX);var ZX={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isPrimitive=function(e){return null==e||"object"!=typeof e&&"function"!=typeof e}}(ZX);var eJ={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.eq=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}}(eJ),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JX,r=ZX,n=eJ;function i(e,o,l,c){if(o===e)return!0;switch(typeof o){case"object":return function(e,t,n,i){if(null==t)return!0;if(Array.isArray(t))return s(e,t,n,i);if(t instanceof Map)return function(e,t,r,n){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[i,s]of t.entries()){if(!1===r(e.get(i),s,i,e,t,n))return!1}return!0}(e,t,n,i);if(t instanceof Set)return a(e,t,n,i);const o=Object.keys(t);if(null==e)return 0===o.length;if(0===o.length)return!0;if(null==i?void 0:i.has(t))return i.get(t)===e;null==i||i.set(t,e);try{for(let s=0;s<o.length;s++){const a=o[s];if(!r.isPrimitive(e)&&!(a in e))return!1;if(void 0===t[a]&&void 0!==e[a])return!1;if(null===t[a]&&null!==e[a])return!1;if(!n(e[a],t[a],a,e,t,i))return!1}return!0}finally{null==i||i.delete(t)}}(e,o,l,c);case"function":return Object.keys(o).length>0?i(e,{...o},l,c):n.eq(e,o);default:return t.isObject(e)?"string"!=typeof o||""===o:n.eq(e,o)}}function s(e,t,r,n){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const i=new Set;for(let s=0;s<t.length;s++){const a=t[s];let o=!1;for(let l=0;l<e.length;l++){if(i.has(l))continue;let c=!1;if(r(e[l],a,s,e,t,n)&&(c=!0),c){i.add(l),o=!0;break}}if(!o)return!1}return!0}function a(e,t,r,n){return 0===t.size||e instanceof Set&&s([...e],[...t],r,n)}e.isMatchWith=function e(t,r,n){return"function"!=typeof n?e(t,r,(()=>{})):i(t,r,(function e(t,r,s,a,o,l){const c=n(t,r,s,a,o,l);return void 0!==c?Boolean(c):i(t,r,e,l)}),new Map)},e.isSetMatch=a}(XX),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XX;e.isMatch=function(e,r){return t.isMatchWith(e,r,(()=>{}))}}(YX);var tJ={},rJ={},nJ={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter((t=>Object.prototype.propertyIsEnumerable.call(e,t)))}}(nJ);var iJ={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}}(iJ);var sJ={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});e.argumentsTag="[object Arguments]",e.arrayBufferTag="[object ArrayBuffer]",e.arrayTag="[object Array]",e.bigInt64ArrayTag="[object BigInt64Array]",e.bigUint64ArrayTag="[object BigUint64Array]",e.booleanTag="[object Boolean]",e.dataViewTag="[object DataView]",e.dateTag="[object Date]",e.errorTag="[object Error]",e.float32ArrayTag="[object Float32Array]",e.float64ArrayTag="[object Float64Array]",e.functionTag="[object Function]",e.int16ArrayTag="[object Int16Array]",e.int32ArrayTag="[object Int32Array]",e.int8ArrayTag="[object Int8Array]",e.mapTag="[object Map]",e.numberTag="[object Number]",e.objectTag="[object Object]",e.regexpTag="[object RegExp]",e.setTag="[object Set]",e.stringTag="[object String]",e.symbolTag="[object Symbol]",e.uint16ArrayTag="[object Uint16Array]",e.uint32ArrayTag="[object Uint32Array]",e.uint8ArrayTag="[object Uint8Array]",e.uint8ClampedArrayTag="[object Uint8ClampedArray]"}(sJ);var aJ={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}}(aJ),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nJ,r=iJ,n=sJ,i=ZX,s=aJ;function a(e,t,l,c=new Map,u=void 0){const d=null==u?void 0:u(e,t,l,c);if(void 0!==d)return d;if(i.isPrimitive(e))return e;if(c.has(e))return c.get(e);if(Array.isArray(e)){const t=new Array(e.length);c.set(e,t);for(let r=0;r<e.length;r++)t[r]=a(e[r],r,l,c,u);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;c.set(e,t);for(const[r,n]of e)t.set(r,a(n,r,l,c,u));return t}if(e instanceof Set){const t=new Set;c.set(e,t);for(const r of e)t.add(a(r,void 0,l,c,u));return t}if("undefined"!=typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(s.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);c.set(e,t);for(let r=0;r<e.length;r++)t[r]=a(e[r],r,l,c,u);return t}if(e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return c.set(e,t),o(t,e,l,c,u),t}if("undefined"!=typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return c.set(e,t),o(t,e,l,c,u),t}if("undefined"!=typeof Blob&&e instanceof Blob){const t=new Blob([e],{type:e.type});return c.set(e,t),o(t,e,l,c,u),t}if(e instanceof Error){const t=new e.constructor;return c.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,o(t,e,l,c,u),t}if(e instanceof Boolean){const t=new Boolean(e.valueOf());return c.set(e,t),o(t,e,l,c,u),t}if(e instanceof Number){const t=new Number(e.valueOf());return c.set(e,t),o(t,e,l,c,u),t}if(e instanceof String){const t=new String(e.valueOf());return c.set(e,t),o(t,e,l,c,u),t}if("object"==typeof e&&function(e){switch(r.getTag(e)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return c.set(e,t),o(t,e,l,c,u),t}return e}function o(e,r,n=e,i,s){const o=[...Object.keys(r),...t.getSymbols(r)];for(let t=0;t<o.length;t++){const l=o[t],c=Object.getOwnPropertyDescriptor(e,l);(null==c||c.writable)&&(e[l]=a(r[l],l,n,i,s))}}e.cloneDeepWith=function(e,t){return a(e,void 0,e,new Map,t)},e.cloneDeepWithImpl=a,e.copyProperties=o}(rJ),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rJ;e.cloneDeep=function(e){return t.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}}(tJ),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YX,r=tJ;e.matches=function(e){return e=r.cloneDeep(e),r=>t.isMatch(r,e)}}(QX);var oJ={},lJ={},cJ={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rJ,r=sJ;e.cloneDeepWith=function(e,n){return t.cloneDeepWith(e,((i,s,a,o)=>{const l=null==n?void 0:n(i,s,a,o);if(void 0!==l)return l;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case r.numberTag:case r.stringTag:case r.booleanTag:{const r=new e.constructor(null==e?void 0:e.valueOf());return t.copyProperties(r,e),r}case r.argumentsTag:{const r={};return t.copyProperties(r,e),r.length=e.length,r[Symbol.iterator]=e[Symbol.iterator],r}default:return}}))}}(cJ),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cJ;e.cloneDeep=function(e){return t.cloneDeepWith(e)}}(lJ);var uJ={},dJ={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;e.isIndex=function(e,r=Number.MAX_SAFE_INTEGER){switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<r;case"symbol":return!1;case"string":return t.test(e)}}}(dJ);var hJ={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iJ;e.isArguments=function(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===t.getTag(e)}}(hJ),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oX,r=dJ,n=hJ,i=cX;e.has=function(e,s){let a;if(a=Array.isArray(s)?s:"string"==typeof s&&t.isDeepKey(s)&&null==(null==e?void 0:e[s])?i.toPath(s):[s],0===a.length)return!1;let o=e;for(let t=0;t<a.length;t++){const e=a[t];if(null==o||!Object.hasOwn(o,e)){if(!((Array.isArray(o)||n.isArguments(o))&&r.isIndex(e)&&e<o.length))return!1}o=o[e]}return!0}}(uJ),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YX,r=lX,n=lJ,i=sX,s=uJ;e.matchesProperty=function(e,a){switch(typeof e){case"object":Object.is(null==e?void 0:e.valueOf(),-0)&&(e="-0");break;case"number":e=r.toKey(e)}return a=n.cloneDeep(a),function(r){const n=i.get(r,e);return void 0===n?s.has(r,e):void 0===a?void 0===n:t.isMatch(n,a)}}}(oJ),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zX,r=WX,n=QX,i=oJ;e.iteratee=function(e){if(null==e)return t.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?i.matchesProperty(e[0],e[1]):n.matches(e);case"string":case"symbol":case"number":return r.property(e)}}}(GX),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$X,r=zX,n=qX,i=GX;e.uniqBy=function(e,s=r.identity){return n.isArrayLikeObject(e)?t.uniqBy(Array.from(e),i.iteratee(s)):[]}}(BX);const fJ=n(BX.uniqBy);function pJ(e,t,r){return!0===t?fJ(e,r):"function"==typeof t?fJ(e,t):e}var gJ={exports:{}},mJ={},yJ={exports:{}},vJ={},bJ=q;var wJ="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},xJ=bJ.useState,SJ=bJ.useEffect,EJ=bJ.useLayoutEffect,TJ=bJ.useDebugValue;function kJ(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!wJ(e,r)}catch(n){return!0}}var AJ="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=xJ({inst:{value:r,getSnapshot:t}}),i=n[0].inst,s=n[1];return EJ((function(){i.value=r,i.getSnapshot=t,kJ(i)&&s({inst:i})}),[e,r,t]),SJ((function(){return kJ(i)&&s({inst:i}),e((function(){kJ(i)&&s({inst:i})}))}),[e]),TJ(r),r};vJ.useSyncExternalStore=void 0!==bJ.useSyncExternalStore?bJ.useSyncExternalStore:AJ,yJ.exports=vJ;var _J=yJ.exports,CJ=q,PJ=_J;var DJ="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},RJ=PJ.useSyncExternalStore,IJ=CJ.useRef,OJ=CJ.useEffect,NJ=CJ.useMemo,jJ=CJ.useDebugValue;mJ.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var s=IJ(null);if(null===s.current){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=NJ((function(){function e(e){if(!l){if(l=!0,s=e,e=n(e),void 0!==i&&a.hasValue){var t=a.value;if(i(t,e))return o=t}return o=e}if(t=o,DJ(s,e))return t;var r=n(e);return void 0!==i&&i(t,r)?(s=e,t):(s=e,o=r)}var s,o,l=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,r,n,i]);var o=RJ(e,s[0],s[1]);return OJ((function(){a.hasValue=!0,a.value=o}),[o]),jJ(o),o},gJ.exports=mJ;var LJ=gJ.exports,MJ=q.createContext(null),FJ=e=>e,UJ=()=>{var e=q.useContext(MJ);return e?e.store.dispatch:FJ},BJ=()=>{},$J=()=>BJ,zJ=(e,t)=>e===t;function qJ(e){var t=q.useContext(MJ);return LJ.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:$J,t?t.store.getState:BJ,t?t.store.getState:BJ,t?e:BJ,zJ)}var VJ=e=>Array.isArray(e)?e:[e];function KJ(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const r=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${r}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}var HJ="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function GJ(e,t={}){let r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:n}=t;let i,s=0;function a(){var t;let a=r;const{length:o}=arguments;for(let e=0,r=o;e<r;e++){const t=arguments[e];if("function"==typeof t||"object"==typeof t&&null!==t){let e=a.o;null===e&&(a.o=e=new WeakMap);const r=e.get(t);void 0===r?(a={s:0,v:void 0,o:null,p:null},e.set(t,a)):a=r}else{let e=a.p;null===e&&(a.p=e=new Map);const r=e.get(t);void 0===r?(a={s:0,v:void 0,o:null,p:null},e.set(t,a)):a=r}}const l=a;let c;if(1===a.s)c=a.v;else if(c=e.apply(null,arguments),s++,n){const e=(null==(t=null==i?void 0:i.deref)?void 0:t.call(i))??i;null!=e&&n(e,c)&&(c=e,0!==s&&s--);i="object"==typeof c&&null!==c||"function"==typeof c?new HJ(c):c}return l.s=1,l.v=c,c}return a.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function WJ(e,...t){const r="function"==typeof e?{memoize:e,memoizeOptions:t}:e,n=(...e)=>{let t,n=0,i=0,s={},a=e.pop();"object"==typeof a&&(s=a,a=e.pop()),function(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}(a,`createSelector expects an output function after the inputs, but received: [${typeof a}]`);const o={...r,...s},{memoize:l,memoizeOptions:c=[],argsMemoize:u=GJ,argsMemoizeOptions:d=[],devModeChecks:h={}}=o,f=VJ(c),p=VJ(d),g=KJ(e),m=l((function(){return n++,a.apply(null,arguments)}),...f),y=u((function(){i++;const e=function(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}(g,arguments);return t=m.apply(null,e),t}),...p);return Object.assign(y,{resultFunc:a,memoizedResultFunc:m,dependencies:g,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>t,recomputations:()=>n,resetRecomputations:()=>{n=0},memoize:l,argsMemoize:u})};return Object.assign(n,{withTypes:()=>n}),n}var QJ=WJ(GJ),YJ=Object.assign(((e,t=QJ)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const r=Object.keys(e);return t(r.map((t=>e[t])),((...e)=>e.reduce(((e,t,n)=>(e[r[n]]=t,e)),{})))}),{withTypes:()=>YJ}),XJ={},JJ={},ZJ={};!function(e){function t(e){return"symbol"==typeof e?1:null===e?2:void 0===e?3:e!=e?4:0}Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});e.compareValues=(e,r,n)=>{if(e!==r){const i=t(e),s=t(r);if(i===s&&0===i){if(e<r)return"desc"===n?1:-1;if(e>r)return"desc"===n?-1:1}return"desc"===n?s-i:i-s}return 0}}(ZJ);var eZ={},tZ={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isSymbol=function(e){return"symbol"==typeof e||e instanceof Symbol}}(tZ),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tZ,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;e.isKey=function(e,i){return!Array.isArray(e)&&(!("number"!=typeof e&&"boolean"!=typeof e&&null!=e&&!t.isSymbol(e))||("string"==typeof e&&(n.test(e)||!r.test(e))||null!=i&&Object.hasOwn(i,e)))}}(eZ),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZJ,r=eZ,n=cX;e.orderBy=function(e,i,s,a){if(null==e)return[];s=a?void 0:s,Array.isArray(e)||(e=Object.values(e)),Array.isArray(i)||(i=null==i?[null]:[i]),0===i.length&&(i=[null]),Array.isArray(s)||(s=null==s?[]:[s]),s=s.map((e=>String(e)));const o=(e,t)=>{let r=e;for(let n=0;n<t.length&&null!=r;++n)r=r[t[n]];return r},l=i.map((e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"==typeof e||Array.isArray(e)||r.isKey(e)?e:{key:e,path:n.toPath(e)})));return e.map((e=>({original:e,criteria:l.map((t=>((e,t)=>null==t||null==e?t:"object"==typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:o(t,e.path):"function"==typeof e?e(t):Array.isArray(e)?o(t,e):"object"==typeof t?t[e]:t)(t,e)))}))).slice().sort(((e,r)=>{for(let n=0;n<l.length;n++){const i=t.compareValues(e.criteria[n],r.criteria[n],s[n]);if(0!==i)return i}return 0})).map((e=>e.original))}}(JJ);var rZ={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.flatten=function(e,t=1){const r=[],n=Math.floor(t),i=(e,t)=>{for(let s=0;s<e.length;s++){const a=e[s];Array.isArray(a)&&t<n?i(a,t+1):r.push(a)}};return i(e,0),r}}(rZ);var nZ={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dJ,r=VX,n=JX,i=eJ;e.isIterateeCall=function(e,s,a){return!!n.isObject(a)&&(!!("number"==typeof s&&r.isArrayLike(a)&&t.isIndex(s)&&s<a.length||"string"==typeof s&&s in a)&&i.eq(a[s],e))}}(nZ),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JJ,r=rZ,n=nZ;e.sortBy=function(e,...i){const s=i.length;return s>1&&n.isIterateeCall(e,i[0],i[1])?i=[]:s>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(e,r.flatten(i),["asc"])}}(XJ);const iZ=n(XJ.sortBy);var sZ=e=>e.legend.settings,aZ=QJ([e=>e.legend.payload,sZ],((e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?iZ(n,r):n}));function oZ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,r]=q.useState({height:0,left:0,top:0,width:0}),n=q.useCallback((e=>{if(null!=e){var n=e.getBoundingClientRect(),i={height:n.height,left:n.left,top:n.top,width:n.width};(Math.abs(i.height-t.height)>1||Math.abs(i.left-t.left)>1||Math.abs(i.top-t.top)>1||Math.abs(i.width-t.width)>1)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}}),[t.width,t.height,t.top,t.left,...e]);return[t,n]}function lZ(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var cZ=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),uZ=()=>Math.random().toString(36).substring(7).split("").join("."),dZ={INIT:`@@redux/INIT${uZ()}`,REPLACE:`@@redux/REPLACE${uZ()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${uZ()}`};function hZ(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function fZ(e,t,r){if("function"!=typeof e)throw new Error(lZ(2));if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(lZ(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(lZ(1));return r(fZ)(e,t)}let n=e,i=t,s=new Map,a=s,o=0,l=!1;function c(){a===s&&(a=new Map,s.forEach(((e,t)=>{a.set(t,e)})))}function u(){if(l)throw new Error(lZ(3));return i}function d(e){if("function"!=typeof e)throw new Error(lZ(4));if(l)throw new Error(lZ(5));let t=!0;c();const r=o++;return a.set(r,e),function(){if(t){if(l)throw new Error(lZ(6));t=!1,c(),a.delete(r),s=null}}}function h(e){if(!hZ(e))throw new Error(lZ(7));if(void 0===e.type)throw new Error(lZ(8));if("string"!=typeof e.type)throw new Error(lZ(17));if(l)throw new Error(lZ(9));try{l=!0,i=n(i,e)}finally{l=!1}return(s=a).forEach((e=>{e()})),e}h({type:dZ.INIT});return{dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(lZ(10));n=e,h({type:dZ.REPLACE})},[cZ]:function(){const e=d;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(lZ(11));function r(){const e=t;e.next&&e.next(u())}r();return{unsubscribe:e(r)}},[cZ](){return this}}}}}function pZ(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const n=t[s];"function"==typeof e[n]&&(r[n]=e[n])}const n=Object.keys(r);let i;try{!function(e){Object.keys(e).forEach((t=>{const r=e[t];if(void 0===r(void 0,{type:dZ.INIT}))throw new Error(lZ(12));if(void 0===r(void 0,{type:dZ.PROBE_UNKNOWN_ACTION()}))throw new Error(lZ(13))}))}(r)}catch(Jce){i=Jce}return function(e={},t){if(i)throw i;let s=!1;const a={};for(let i=0;i<n.length;i++){const o=n[i],l=r[o],c=e[o],u=l(c,t);if(void 0===u)throw t&&t.type,new Error(lZ(14));a[o]=u,s=s||u!==c}return s=s||n.length!==Object.keys(e).length,s?a:e}}function gZ(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce(((e,t)=>(...r)=>e(t(...r))))}function mZ(e){return hZ(e)&&"type"in e&&"string"==typeof e.type}var yZ=Symbol.for("immer-nothing"),vZ=Symbol.for("immer-draftable"),bZ=Symbol.for("immer-state");function wZ(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var xZ=Object.getPrototypeOf;function SZ(e){return!!e&&!!e[bZ]}function EZ(e){var t;return!!e&&(AZ(e)||Array.isArray(e)||!!e[vZ]||!!(null==(t=e.constructor)?void 0:t[vZ])||RZ(e)||IZ(e))}var TZ=Object.prototype.constructor.toString(),kZ=new WeakMap;function AZ(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if("function"!=typeof r)return!1;let n=kZ.get(r);return void 0===n&&(n=Function.toString.call(r),kZ.set(r,n)),n===TZ}function _Z(e,t,r=!0){if(0===CZ(e)){(r?Reflect.ownKeys(e):Object.keys(e)).forEach((r=>{t(r,e[r],e)}))}else e.forEach(((r,n)=>t(n,r,e)))}function CZ(e){const t=e[bZ];return t?t.type_:Array.isArray(e)?1:RZ(e)?2:IZ(e)?3:0}function PZ(e,t){return 2===CZ(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function DZ(e,t,r){const n=CZ(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function RZ(e){return e instanceof Map}function IZ(e){return e instanceof Set}function OZ(e){return e.copy_||e.base_}function NZ(e,t){if(RZ(e))return new Map(e);if(IZ(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=AZ(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[bZ];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const i=r[n],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(xZ(e),t)}{const t=xZ(e);if(null!==t&&r)return{...e};const n=Object.create(t);return Object.assign(n,e)}}function jZ(e,t=!1){return MZ(e)||SZ(e)||!EZ(e)||(CZ(e)>1&&Object.defineProperties(e,{set:LZ,add:LZ,clear:LZ,delete:LZ}),Object.freeze(e),t&&Object.values(e).forEach((e=>jZ(e,!0)))),e}var LZ={value:function(){wZ(2)}};function MZ(e){return null===e||"object"!=typeof e||Object.isFrozen(e)}var FZ,UZ={};function BZ(e){const t=UZ[e];return t||wZ(0),t}function $Z(){return FZ}function zZ(e,t){t&&(BZ("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function qZ(e){VZ(e),e.drafts_.forEach(HZ),e.drafts_=null}function VZ(e){e===FZ&&(FZ=e.parent_)}function KZ(e){return FZ={drafts_:[],parent_:FZ,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function HZ(e){const t=e[bZ];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function GZ(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[bZ].modified_&&(qZ(t),wZ(4)),EZ(e)&&(e=WZ(t,e),t.parent_||YZ(t,e)),t.patches_&&BZ("Patches").generateReplacementPatches_(r[bZ].base_,e,t.patches_,t.inversePatches_)):e=WZ(t,r,[]),qZ(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==yZ?e:void 0}function WZ(e,t,r){if(MZ(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[bZ];if(!i)return _Z(t,((n,s)=>QZ(e,i,t,n,s,r)),n),t;if(i.scope_!==e)return t;if(!i.modified_)return YZ(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const t=i.copy_;let s=t,a=!1;3===i.type_&&(s=new Set(t),t.clear(),a=!0),_Z(s,((n,s)=>QZ(e,i,t,n,s,r,a)),n),YZ(e,t,!1),r&&e.patches_&&BZ("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function QZ(e,t,r,n,i,s,a){if(null==i)return;if("object"!=typeof i&&!a)return;const o=MZ(i);if(!o||a){if(SZ(i)){const a=WZ(e,i,s&&t&&3!==t.type_&&!PZ(t.assigned_,n)?s.concat(n):void 0);if(DZ(r,n,a),!SZ(a))return;e.canAutoFreeze_=!1}else a&&r.add(i);if(EZ(i)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;if(t&&t.base_&&t.base_[n]===i&&o)return;WZ(e,i),t&&t.scope_.parent_||"symbol"==typeof n||!(RZ(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))||YZ(e,i)}}}function YZ(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&jZ(t,r)}var XZ={get(e,t){if(t===bZ)return e;const r=OZ(e);if(!PZ(r,t))return function(e,t,r){var n;const i=e0(t,r);return i?"value"in i?i.value:null==(n=i.get)?void 0:n.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!EZ(n)?n:n===ZZ(e.base_,t)?(r0(e),e.copy_[t]=n0(n,e)):n},has:(e,t)=>t in OZ(e),ownKeys:e=>Reflect.ownKeys(OZ(e)),set(e,t,r){const n=e0(OZ(e),t);if(null==n?void 0:n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=ZZ(OZ(e),t),a=null==n?void 0:n[bZ];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((i=r)===(s=n)?0!==i||1/i==1/s:i!=i&&s!=s)&&(void 0!==r||PZ(e.base_,t)))return!0;r0(e),t0(e)}var i,s;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==ZZ(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,r0(e),t0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=OZ(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){wZ(11)},getPrototypeOf:e=>xZ(e.base_),setPrototypeOf(){wZ(12)}},JZ={};function ZZ(e,t){const r=e[bZ];return(r?OZ(r):e)[t]}function e0(e,t){if(!(t in e))return;let r=xZ(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=xZ(r)}}function t0(e){e.modified_||(e.modified_=!0,e.parent_&&t0(e.parent_))}function r0(e){e.copy_||(e.copy_=NZ(e.base_,e.scope_.immer_.useStrictShallowCopy_))}_Z(XZ,((e,t)=>{JZ[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),JZ.deleteProperty=function(e,t){return JZ.set.call(this,e,t,void 0)},JZ.set=function(e,t,r){return XZ.set.call(this,e[0],t,r,e[0])};function n0(e,t){const r=RZ(e)?BZ("MapSet").proxyMap_(e,t):IZ(e)?BZ("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:$Z(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=XZ;r&&(i=[n],s=JZ);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return n.draft_=o,n.revoke_=a,o}(e,t);return(t?t.scope_:$Z()).drafts_.push(r),r}function i0(e){return SZ(e)||wZ(10),s0(e)}function s0(e){if(!EZ(e)||MZ(e))return e;const t=e[bZ];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=NZ(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=NZ(e,!0);return _Z(r,((e,t)=>{DZ(r,e,s0(t))}),n),t&&(t.finalized_=!1),r}var a0=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const n=this;return function(e=r,...i){return n.produce(e,(e=>t.call(this,e,...i)))}}let n;if("function"!=typeof t&&wZ(6),void 0!==r&&"function"!=typeof r&&wZ(7),EZ(e)){const i=KZ(this),s=n0(e,void 0);let a=!0;try{n=t(s),a=!1}finally{a?qZ(i):VZ(i)}return zZ(i,r),GZ(n,i)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===yZ&&(n=void 0),this.autoFreeze_&&jZ(n,!0),r){const t=[],i=[];BZ("Patches").generateReplacementPatches_(e,n,t,i),r(t,i)}return n}wZ(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"==typeof(null==e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){EZ(e)||wZ(8),SZ(e)&&(e=i0(e));const t=KZ(this),r=n0(e,void 0);return r[bZ].isManual_=!0,VZ(t),r}finishDraft(e,t){const r=e&&e[bZ];r&&r.isManual_||wZ(9);const{scope_:n}=r;return zZ(n,t),GZ(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=BZ("Patches").applyPatches_;return SZ(e)?n(e,t):this.produce(e,(e=>n(e,t)))}},o0=a0.produce;function l0(e){return({dispatch:t,getState:r})=>n=>i=>"function"==typeof i?i(t,r,e):n(i)}var c0=l0(),u0=l0,d0="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?gZ:gZ.apply(null,arguments)};function h0(e,t){function r(...r){if(t){let n=t(...r);if(!n)throw new Error(o1(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:r[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>mZ(t)&&t.type===e,r}var f0=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function p0(e){return EZ(e)?o0(e,(()=>{})):e}function g0(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}var m0="RTK_autoBatch",y0=()=>e=>({payload:e,meta:{[m0]:!0}}),v0=e=>t=>{setTimeout(t,e)},b0=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,s=!1,a=!1;const o=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:v0(10):"callback"===e.type?e.queueNotification:v0(e.timeout),c=()=>{a=!1,s&&(s=!1,o.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>i&&e()));return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){var t;try{return i=!(null==(t=null==e?void 0:e.meta)?void 0:t[m0]),s=!i,s&&(a||(a=!0,l(c))),n.dispatch(e)}finally{i=!0}}})};function w0(e){const t=function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=e??{};let s=new f0;return t&&("boolean"==typeof t?s.push(c0):s.push(u0(t.extraArgument))),s},{reducer:r,middleware:n,devTools:i=!0,duplicateMiddlewareCheck:s=!0,preloadedState:a,enhancers:o}=e||{};let l,c;if("function"==typeof r)l=r;else{if(!hZ(r))throw new Error(o1(1));l=pZ(r)}c="function"==typeof n?n(t):t();let u=gZ;i&&(u=d0({trace:!1,..."object"==typeof i&&i}));const d=function(...e){return t=>(r,n)=>{const i=t(r,n);let s=()=>{throw new Error(lZ(15))};const a={getState:i.getState,dispatch:(e,...t)=>s(e,...t)},o=e.map((e=>e(a)));return s=gZ(...o)(i.dispatch),{...i,dispatch:s}}}(...c),h=(e=>function(t){const{autoBatch:r=!0}=t??{};let n=new f0(e);return r&&n.push(b0("object"==typeof r?r:void 0)),n})(d);return fZ(l,a,u(..."function"==typeof o?o(h):h()))}function x0(e){const t={},r=[];let n;const i={addCase(e,r){const n="string"==typeof e?e:e.type;if(!n)throw new Error(o1(28));if(n in t)throw new Error(o1(29));return t[n]=r,i},addAsyncThunk:(e,n)=>(n.pending&&(t[e.pending.type]=n.pending),n.rejected&&(t[e.rejected.type]=n.rejected),n.fulfilled&&(t[e.fulfilled.type]=n.fulfilled),n.settled&&r.push({matcher:e.settled,reducer:n.settled}),i),addMatcher:(e,t)=>(r.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(n=e,i)};return e(i),[t,r,n]}var S0=(e=21)=>{let t="",r=e;for(;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},E0=Symbol.for("rtk-slice-createasyncthunk");function T0(e,t){return`${e}/${t}`}function k0({creators:e}={}){var t;const r=null==(t=null==e?void 0:e.asyncThunk)?void 0:t[E0];return function(e){const{name:t,reducerPath:n=t}=e;if(!t)throw new Error(o1(11));const i=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(i),a={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const r="string"==typeof e?e:e.type;if(!r)throw new Error(o1(12));if(r in a.sliceCaseReducersByType)throw new Error(o1(13));return a.sliceCaseReducersByType[r]=t,o},addMatcher:(e,t)=>(a.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(a.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(a.sliceCaseReducersByName[e]=t,o)};function l(){const[t={},r=[],n]="function"==typeof e.extraReducers?x0(e.extraReducers):[e.extraReducers],i={...t,...a.sliceCaseReducersByType};return function(e,t){let r,[n,i,s]=x0(t);if("function"==typeof e)r=()=>p0(e());else{const t=p0(e);r=()=>t}function a(e=r(),t){let a=[n[t.type],...i.filter((({matcher:e})=>e(t))).map((({reducer:e})=>e))];return 0===a.filter((e=>!!e)).length&&(a=[s]),a.reduce(((e,r)=>{if(r){if(SZ(e)){const n=r(e,t);return void 0===n?e:n}if(EZ(e))return o0(e,(e=>r(e,t)));{const n=r(e,t);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}}return e}),e)}return a.getInitialState=r,a}(e.initialState,(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of a.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)}))}s.forEach((n=>{const s=i[n],a={reducerName:n,type:T0(t,n),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function({type:e,reducerName:t,createNotation:r},n,i){let s,a;if("reducer"in n){if(r&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(n))throw new Error(o1(17));s=n.reducer,a=n.prepare}else s=n;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,a?h0(e,a):h0(e))}(a,s,o):function({type:e,reducerName:t},r,n,i){if(!i)throw new Error(o1(18));const{payloadCreator:s,fulfilled:a,pending:o,rejected:l,settled:c,options:u}=r,d=i(e,s,u);n.exposeAction(t,d),a&&n.addCase(d.fulfilled,a);o&&n.addCase(d.pending,o);l&&n.addCase(d.rejected,l);c&&n.addMatcher(d.settled,c);n.exposeCaseReducer(t,{fulfilled:a||C0,pending:o||C0,rejected:l||C0,settled:c||C0})}(a,s,o,r)}));const c=e=>e,u=new Map,d=new WeakMap;let h;function f(e,t){return h||(h=l()),h(e,t)}function p(){return h||(h=l()),h.getInitialState()}function g(t,r=!1){function n(e){let i=e[t];return void 0===i&&r&&(i=g0(d,n,p)),i}function i(t=c){const n=g0(u,r,(()=>new WeakMap));return g0(n,t,(()=>{const n={};for(const[i,s]of Object.entries(e.selectors??{}))n[i]=A0(s,t,(()=>g0(d,t,p)),r);return n}))}return{reducerPath:t,getSelectors:i,get selectors(){return i(n)},selectSlice:n}}const m={name:t,reducer:f,actions:a.actionCreators,caseReducers:a.sliceCaseReducersByName,getInitialState:p,...g(n),injectInto(e,{reducerPath:t,...r}={}){const i=t??n;return e.inject({reducerPath:i,reducer:f},r),{...m,...g(i,!0)}}};return m}}function A0(e,t,r,n){function i(i,...s){let a=t(i);return void 0===a&&n&&(a=r()),e(a,...s)}return i.unwrapped=e,i}var _0=k0();function C0(){}var P0="listener",D0="completed",R0="cancelled",I0=`task-${R0}`,O0=`task-${D0}`,N0=`${P0}-${R0}`,j0=`${P0}-${D0}`,L0=class{constructor(e){t(this,"name","TaskAbortError"),t(this,"message"),this.code=e,this.message=`task ${R0} (reason: ${e})`}},M0=(e,t)=>{if("function"!=typeof e)throw new TypeError(o1(32))},F0=()=>{},U0=(e,t=F0)=>(e.catch(t),e),B0=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),$0=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},z0=e=>{if(e.aborted){const{reason:t}=e;throw new L0(t)}};function q0(e,t){let r=F0;return new Promise(((n,i)=>{const s=()=>i(new L0(e.reason));e.aborted?s():(r=B0(e,s),t.finally((()=>r())).then(n,i))})).finally((()=>{r=F0}))}var V0=e=>t=>U0(q0(e,t).then((t=>(z0(e),t)))),K0=e=>{const t=V0(e);return e=>t(new Promise((t=>setTimeout(t,e))))},{assign:H0}=Object,G0={},W0="listenerMiddleware",Q0=(e,t)=>(r,n)=>{M0(r);const i=new AbortController;var s;s=i,B0(e,(()=>$0(s,e.reason)));const a=(async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof L0?"cancelled":"rejected",error:r}}finally{null==t||t()}})((async()=>{z0(e),z0(i.signal);const t=await r({pause:V0(i.signal),delay:K0(i.signal),signal:i.signal});return z0(i.signal),t}),(()=>$0(i,O0)));return(null==n?void 0:n.autoJoin)&&t.push(a.catch(F0)),{result:V0(e)(a),cancel(){$0(i,I0)}}},Y0=(e,t)=>(r,n)=>U0((async(r,n)=>{z0(t);let i=()=>{};const s=[new Promise(((t,n)=>{let s=e({predicate:r,effect:(e,r)=>{r.unsubscribe(),t([e,r.getState(),r.getOriginalState()])}});i=()=>{s(),n()}}))];null!=n&&s.push(new Promise((e=>setTimeout(e,n,null))));try{const e=await q0(t,Promise.race(s));return z0(t),e}finally{i()}})(r,n)),X0=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:s}=e;if(t)i=h0(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(o1(21));return M0(s),{predicate:i,type:t,effect:s}},J0=H0((e=>{const{type:t,predicate:r,effect:n}=X0(e);return{id:S0(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(o1(22))}}}),{withTypes:()=>J0}),Z0=(e,t)=>{const{type:r,effect:n,predicate:i}=X0(t);return Array.from(e.values()).find((e=>("string"==typeof r?e.type===r:e.predicate===i)&&e.effect===n))},e1=e=>{e.pending.forEach((e=>{$0(e,N0)}))},t1=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout((()=>{throw n}),0)}},r1=H0(h0(`${W0}/add`),{withTypes:()=>r1}),n1=h0(`${W0}/removeAll`),i1=H0(h0(`${W0}/remove`),{withTypes:()=>i1}),s1=(...e)=>{},a1=(e={})=>{const t=new Map,r=new Map,{extra:n,onError:i=s1}=e;M0(i);const s=e=>(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),(null==t?void 0:t.cancelActive)&&e1(e)}))(Z0(t,e)??J0(e));H0(s,{withTypes:()=>s});const a=e=>{const r=Z0(t,e);return r&&(r.unsubscribe(),e.cancelActive&&e1(r)),!!r};H0(a,{withTypes:()=>a});const o=async(e,a,o,l)=>{const c=new AbortController,u=Y0(s,c.signal),d=[];try{e.pending.add(c),(e=>{const t=r.get(e)??0;r.set(e,t+1)})(e),await Promise.resolve(e.effect(a,H0({},o,{getOriginalState:l,condition:(e,t)=>u(e,t).then(Boolean),take:u,delay:K0(c.signal),pause:V0(c.signal),extra:n,signal:c.signal,fork:Q0(c.signal,d),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach(((e,t,r)=>{e!==c&&($0(e,N0),r.delete(e))}))},cancel:()=>{$0(c,N0),e.pending.delete(c)},throwIfCancelled:()=>{z0(c.signal)}})))}catch(h){h instanceof L0||t1(i,h,{raisedBy:"effect"})}finally{await Promise.all(d),$0(c,j0),(e=>{const t=r.get(e)??1;1===t?r.delete(e):r.set(e,t-1)})(e),e.pending.delete(c)}},l=((e,t)=>()=>{for(const e of t.keys())e1(e);e.clear()})(t,r);return{middleware:e=>r=>n=>{if(!mZ(n))return r(n);if(r1.match(n))return s(n.payload);if(n1.match(n))return void l();if(i1.match(n))return a(n.payload);let c=e.getState();const u=()=>{if(c===G0)throw new Error(o1(23));return c};let d;try{if(d=r(n),t.size>0){const r=e.getState(),s=Array.from(t.values());for(const t of s){let s=!1;try{s=t.predicate(n,r,c)}catch(h){s=!1,t1(i,h,{raisedBy:"predicate"})}s&&o(t,n,e,u)}}}finally{c=G0}return d},startListening:s,stopListening:a,clearListeners:l}};function o1(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var l1=_0({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,s;e.margin.top=null!==(r=t.payload.top)&&void 0!==r?r:0,e.margin.right=null!==(n=t.payload.right)&&void 0!==n?n:0,e.margin.bottom=null!==(i=t.payload.bottom)&&void 0!==i?i:0,e.margin.left=null!==(s=t.payload.left)&&void 0!==s?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:c1,setLayout:u1,setChartSize:d1,setScale:h1}=l1.actions,f1=l1.reducer;function p1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p1(Object(r),!0).forEach((function(t){m1(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p1(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m1(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y1=Math.PI/180,v1=e=>180*e/Math.PI,b1=(e,t,r,n)=>({x:e+Math.cos(-y1*n)*r,y:t+Math.sin(-y1*n)*r}),w1=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},x1=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:s}=t,a=((e,t)=>{var{x:r,y:n}=e,{x:i,y:s}=t;return Math.sqrt((r-i)**2+(n-s)**2)})({x:r,y:n},{x:i,y:s});if(a<=0)return{radius:a,angle:0};var o=(r-i)/a,l=Math.acos(o);return n>s&&(l=2*Math.PI-l),{radius:a,angle:v1(l),angleInRadian:l}},S1=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),s=Math.floor(n/360);return e+360*Math.min(i,s)},E1=(e,t)=>{var{x:r,y:n}=e,{radius:i,angle:s}=x1({x:r,y:n},t),{innerRadius:a,outerRadius:o}=t;if(i<a||i>o)return null;if(0===i)return null;var l,{startAngle:c,endAngle:u}=(e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),s=Math.min(n,i);return{startAngle:t-360*s,endAngle:r-360*s}})(t),d=s;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;l=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;l=d>=u&&d<=c}return l?g1(g1({},t),{},{radius:i,angle:S1(d,t)}):null};function T1(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function k1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k1(Object(r),!0).forEach((function(t){_1(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k1(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _1(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C1(e,t,r){return EX(e)||EX(t)?r:mX(t)?dX(e,t,r):"function"==typeof t?t(e):r}var P1=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,D1=(e,t,r,n)=>{if(n)return e.map((e=>e.coordinate));var i,s,a=e.map((e=>(e.coordinate===t&&(i=!0),e.coordinate===r&&(s=!0),e.coordinate)));return i||a.push(t),s||a.push(r),a},R1=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:s,scale:a,realScaleType:o,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:d,niceTicks:h,axisType:f}=e;if(!a)return null;var p="scaleBand"===o&&a.bandwidth?a.bandwidth()/2:2,g=(t||r)&&"category"===i&&a.bandwidth?a.bandwidth()/p:0;return g="angleAxis"===f&&s&&s.length>=2?2*hX(s[0]-s[1])*g:g,t&&(d||h)?(d||h||[]).map(((e,t)=>{var r=n?n.indexOf(e):e;return{coordinate:a(r)+g,value:e,offset:g,index:t}})).filter((e=>!fX(e.coordinate))):l&&c?c.map(((e,t)=>({coordinate:a(e)+g,value:e,index:t,offset:g}))):a.ticks&&!r&&null!=u?a.ticks(u).map(((e,t)=>({coordinate:a(e)+g,value:e,offset:g,index:t}))):a.domain().map(((e,t)=>({coordinate:a(e)+g,value:n?n[e]:e,index:t,offset:g})))},I1=1e-4,O1={sign:e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,s=0,a=0;a<t;++a){var o=fX(e[a][r][1])?e[a][r][0]:e[a][r][1];o>=0?(e[a][r][0]=i,e[a][r][1]=i+o,i=e[a][r][1]):(e[a][r][0]=s,e[a][r][1]=s+o,s=e[a][r][1])}},expand:function(e,t){if((n=e.length)>0){for(var r,n,i,s=0,a=e[0].length;s<a;++s){for(i=r=0;r<n;++r)i+=e[r][s][1]||0;if(i)for(r=0;r<n;++r)e[r][s][1]/=i}eX(e,t)}},none:eX,silhouette:function(e,t){if((r=e.length)>0){for(var r,n=0,i=e[t[0]],s=i.length;n<s;++n){for(var a=0,o=0;a<r;++a)o+=e[a][n][1]||0;i[n][1]+=i[n][0]=-o/2}eX(e,t)}},wiggle:function(e,t){if((i=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,i,s=0,a=1;a<n;++a){for(var o=0,l=0,c=0;o<i;++o){for(var u=e[t[o]],d=u[a][1]||0,h=(d-(u[a-1][1]||0))/2,f=0;f<o;++f){var p=e[t[f]];h+=(p[a][1]||0)-(p[a-1][1]||0)}l+=d,c+=h*d}r[a-1][1]+=r[a-1][0]=s,l&&(s-=c/l)}r[a-1][1]+=r[a-1][0]=s,eX(e,t)}},positive:e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,s=0;s<t;++s){var a=fX(e[s][r][1])?e[s][r][0]:e[s][r][1];a>=0?(e[s][r][0]=i,e[s][r][1]=i+a,i=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}}},N1=(e,t,r)=>{var n=O1[r],i=function(){var e=eY([]),t=tX,r=eX,n=rX;function i(i){var s,a,o=Array.from(e.apply(this,arguments),nX),l=o.length,c=-1;for(const e of i)for(s=0,++c;s<l;++s)(o[s][c]=[0,+n(e,o[s].key,c,i)]).data=e;for(s=0,a=fY(t(o));s<l;++s)o[a[s]].index=s;return r(o,a),o}return i.keys=function(t){return arguments.length?(e="function"==typeof t?t:eY(Array.from(t)),i):e},i.value=function(e){return arguments.length?(n="function"==typeof e?e:eY(+e),i):n},i.order=function(e){return arguments.length?(t=null==e?tX:"function"==typeof e?e:eY(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(r=null==e?eX:e,i):r},i}().keys(t).value(((e,t)=>+C1(e,t,0))).order(tX).offset(n);return i(e)};function j1(e){var{axis:t,ticks:r,bandSize:n,entry:i,index:s,dataKey:a}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!EX(i[t.dataKey])){var o=SX(r,"value",i[t.dataKey]);if(o)return o.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var l=C1(i,EX(a)?t.dataKey:a);return EX(l)?null:t.scale(l)}var L1=e=>{var{axis:t,ticks:r,offset:n,bandSize:i,entry:s,index:a}=e;if("category"===t.type)return r[a]?r[a].coordinate+n:null;var o=C1(s,t.dataKey,t.scale.domain()[a]);return EX(o)?null:t.scale(o)-i/2+n},M1=(e,t,r)=>{var n;if(null!=e)return[(n=Object.keys(e).reduce(((n,i)=>{var s=e[i],{stackedData:a}=s,o=a.reduce(((e,n)=>{var i,s=T1(n,t,r),a=(i=s.flat(2).filter(gX),[Math.min(...i),Math.max(...i)]);return[Math.min(e[0],a[0]),Math.max(e[1],a[1])]}),[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]}),[1/0,-1/0]))[0]===1/0?0:n[0],n[1]===-1/0?0:n[1]]},F1=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,U1=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,B1=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=iZ(t,(e=>e.coordinate)),s=1/0,a=1,o=i.length;a<o;a++){var l=i[a],c=i[a-1];s=Math.min((l.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function $1(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:s}=e;return A1(A1({},t),{},{dataKey:r,payload:n,value:i,name:s})}function z1(e,t){return e?String(e):"string"==typeof t?t:void 0}var q1=e=>e.layout.width,V1=e=>e.layout.height,K1=e=>e.layout.scale,H1=e=>e.layout.margin,G1=QJ((e=>e.cartesianAxis.xAxis),(e=>Object.values(e))),W1=QJ((e=>e.cartesianAxis.yAxis),(e=>Object.values(e))),Q1="data-recharts-item-index",Y1="data-recharts-item-data-key";function X1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X1(Object(r),!0).forEach((function(t){Z1(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X1(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z1(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var e2=QJ([q1,V1,H1,e=>e.brush.height,function(e){return W1(e).reduce(((e,t)=>"left"!==t.orientation||t.mirror||t.hide?e:e+("number"==typeof t.width?t.width:60)),0)},function(e){return W1(e).reduce(((e,t)=>"right"!==t.orientation||t.mirror||t.hide?e:e+("number"==typeof t.width?t.width:60)),0)},function(e){return G1(e).reduce(((e,t)=>"top"!==t.orientation||t.mirror||t.hide?e:e+t.height),0)},function(e){return G1(e).reduce(((e,t)=>"bottom"!==t.orientation||t.mirror||t.hide?e:e+t.height),0)},sZ,e=>e.legend.size],((e,t,r,n,i,s,a,o,l,c)=>{var u={left:(r.left||0)+i,right:(r.right||0)+s},d=J1(J1({},{top:(r.top||0)+a,bottom:(r.bottom||0)+o}),u),h=d.bottom;d.bottom+=n,d=((e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:s,verticalAlign:a,layout:o}=t;if(("vertical"===o||"horizontal"===o&&"middle"===a)&&"center"!==s&&gX(e[s]))return A1(A1({},e),{},{[s]:e[s]+(n||0)});if(("horizontal"===o||"vertical"===o&&"center"===s)&&"middle"!==a&&gX(e[a]))return A1(A1({},e),{},{[a]:e[a]+(i||0)})}return e})(d,l,c);var f=e-d.left-d.right,p=t-d.top-d.bottom;return J1(J1({brushBottom:h},d),{},{width:Math.max(f,0),height:Math.max(p,0)})})),t2=QJ(e2,(e=>({x:e.left,y:e.top,width:e.width,height:e.height}))),r2=QJ(q1,V1,((e,t)=>({x:0,y:0,width:e,height:t}))),n2=q.createContext(null),i2=()=>null!=q.useContext(n2),s2=e=>e.brush,a2=QJ([s2,e2,H1],((e,t,r)=>({height:e.height,x:gX(e.x)?e.x:t.left,y:gX(e.y)?e.y:t.top+t.height+t.brushBottom-((null==r?void 0:r.bottom)||0),width:gX(e.width)?e.width:t.width}))),o2={},l2={},c2={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.debounce=function(e,t,{signal:r,edges:n}={}){let i,s=null;const a=null!=n&&n.includes("leading"),o=null==n||n.includes("trailing"),l=()=>{null!==s&&(e.apply(i,s),i=void 0,s=null)};let c=null;const u=()=>{null!=c&&clearTimeout(c),c=setTimeout((()=>{c=null,o&&l(),d()}),t)},d=()=>{null!==c&&(clearTimeout(c),c=null),i=void 0,s=null},h=function(...e){if(null==r?void 0:r.aborted)return;i=this,s=e;const t=null==c;u(),a&&t&&l()};return h.schedule=u,h.cancel=d,h.flush=()=>{l()},null==r||r.addEventListener("abort",d,{once:!0}),h}}(c2),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=c2;e.debounce=function(e,r=0,n={}){"object"!=typeof n&&(n={});const{leading:i=!1,trailing:s=!0,maxWait:a}=n,o=Array(2);let l;i&&(o[0]="leading"),s&&(o[1]="trailing");let c=null;const u=t.debounce((function(...t){l=e.apply(this,t),c=null}),r,{edges:o}),d=function(...t){return null!=a&&(null===c&&(c=Date.now()),Date.now()-c>=a)?(l=e.apply(this,t),c=Date.now(),u.cancel(),u.schedule(),l):(u.apply(this,t),l)};return d.cancel=u.cancel,d.flush=()=>(u.flush(),l),d}}(l2),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=l2;e.throttle=function(e,r=0,n={}){const{leading:i=!0,trailing:s=!0}=n;return t.debounce(e,r,{leading:i,maxWait:r,trailing:s})}}(o2);const u2=n(o2.throttle);var d2=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i]},h2=(e,t,r)=>{var{width:n="100%",height:i="100%",aspect:s,maxHeight:a}=r,o=pX(n)?e:Number(n),l=pX(i)?t:Number(i);return s&&s>0&&(o?l=o/s:l&&(o=l*s),a&&l>a&&(l=a)),{calculatedWidth:o,calculatedHeight:l}},f2={width:0,height:0,overflow:"visible"},p2={width:0,overflowX:"visible"},g2={height:0,overflowY:"visible"},m2={},y2=e=>{var{width:t,height:r}=e,n=pX(t),i=pX(r);return n&&i?f2:n?p2:i?g2:m2};function v2(e){return Number.isFinite(e)}function b2(e){return"number"==typeof e&&e>0&&Number.isFinite(e)}function w2(){return w2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w2.apply(null,arguments)}function x2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x2(Object(r),!0).forEach((function(t){E2(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x2(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E2(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T2=q.createContext({width:-1,height:-1});function k2(e){var{children:t,width:r,height:n}=e,i=q.useMemo((()=>({width:r,height:n})),[r,n]);return r<=0||n<=0?null:q.createElement(T2.Provider,{value:i},t)}var A2=()=>q.useContext(T2),_2=q.forwardRef(((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i,height:s,minWidth:a=0,minHeight:o,maxHeight:l,children:c,debounce:u=0,id:d,className:h,onResize:f,style:p={}}=e,g=q.useRef(null),m=q.useRef();m.current=f,q.useImperativeHandle(t,(()=>g.current));var[y,v]=q.useState({containerWidth:n.width,containerHeight:n.height}),b=q.useCallback(((e,t)=>{v((r=>{var n=Math.round(e),i=Math.round(t);return r.containerWidth===n&&r.containerHeight===i?r:{containerWidth:n,containerHeight:i}}))}),[]);q.useEffect((()=>{var e=e=>{var t,{width:r,height:n}=e[0].contentRect;b(r,n),null===(t=m.current)||void 0===t||t.call(m,r,n)};u>0&&(e=u2(e,u,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:r,height:n}=g.current.getBoundingClientRect();return b(r,n),t.observe(g.current),()=>{t.disconnect()}}),[b,u]);var{containerWidth:w,containerHeight:x}=y;d2(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:S,calculatedHeight:E}=h2(w,x,{width:i,height:s,aspect:r,maxHeight:l});return d2(S>0||E>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",S,E,i,s,a,o,r),q.createElement("div",{id:d?"".concat(d):void 0,className:rp("recharts-responsive-container",h),style:S2(S2({},p),{},{width:i,height:s,minWidth:a,minHeight:o,maxHeight:l}),ref:g},q.createElement("div",{style:y2({width:i,height:s})},q.createElement(k2,{width:S,height:E},c)))})),C2=q.forwardRef(((e,t)=>{var r=A2();if(b2(r.width)&&b2(r.height))return e.children;var{width:n,height:i}=function(e){var{width:t,height:r,aspect:n}=e,i=t,s=r;return void 0===i&&void 0===s?(i="100%",s="100%"):void 0===i?i=n&&n>0?void 0:"100%":void 0===s&&(s=n&&n>0?void 0:"100%"),{width:i,height:s}}({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:s,calculatedHeight:a}=h2(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return gX(s)&&gX(a)?q.createElement(k2,{width:s,height:a},e.children):q.createElement(_2,w2({},e,{width:n,height:i,ref:t}))})),P2=()=>{var e,t=i2(),r=qJ(t2),n=qJ(a2),i=null===(e=qJ(s2))||void 0===e?void 0:e.padding;return t&&n&&i?{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}:r},D2={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},R2=()=>{var e;return null!==(e=qJ(e2))&&void 0!==e?e:D2},I2=()=>qJ(q1),O2=()=>qJ(V1),N2=e=>e.layout.layoutType,j2=()=>qJ(N2),L2=e=>{var t=UJ(),r=i2(),{width:n,height:i}=e,s=A2(),a=n,o=i;return s&&(a=s.width>0?s.width:n,o=s.height>0?s.height:i),q.useEffect((()=>{!r&&b2(a)&&b2(o)&&t(d1({width:a,height:o}))}),[t,r,a,o]),null},M2=_0({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:y0()},removeLegendPayload:{reducer(e,t){var r=i0(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:y0()}}}),{setLegendSize:F2,setLegendSettings:U2,addLegendPayload:B2,removeLegendPayload:$2}=M2.actions,z2=M2.reducer,q2=["contextPayload"];function V2(){return V2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V2.apply(null,arguments)}function K2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K2(Object(r),!0).forEach((function(t){G2(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K2(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G2(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W2(e){return e.value}function Q2(e){var{contextPayload:t}=e,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,q2),n=pJ(t,e.payloadUniqBy,W2),i=H2(H2({},r),{},{payload:n});return q.isValidElement(e.content)?q.cloneElement(e.content,i):"function"==typeof e.content?q.createElement(e.content,i):q.createElement(UX,i)}function Y2(e){var t=UJ();return q.useEffect((()=>{t(U2(e))}),[t,e]),null}function X2(e){var t=UJ();return q.useEffect((()=>(t(F2(e)),()=>{t(F2({width:0,height:0}))})),[t,e]),null}function J2(e){var t=qJ(aZ),r=q.useContext(ZQ),n=qJ((e=>e.layout.margin)),{width:i,height:s,wrapperStyle:a,portal:o}=e,[l,c]=oZ([t]),u=I2(),d=O2();if(null==u||null==d)return null;var h=u-(n.left||0)-(n.right||0),f=Z2.getWidthOrHeight(e.layout,s,i,h),p=o?a:H2(H2({position:"absolute",width:(null==f?void 0:f.width)||i||"auto",height:(null==f?void 0:f.height)||s||"auto"},function(e,t,r,n,i,s){var a,o,{layout:l,align:c,verticalAlign:u}=t;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(a="center"===c&&"vertical"===l?{left:((n||0)-s.width)/2}:"right"===c?{right:r&&r.right||0}:{left:r&&r.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(o="middle"===u?{top:((i||0)-s.height)/2}:"bottom"===u?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),H2(H2({},a),o)}(a,e,n,u,d,l)),a),g=null!=o?o:r;if(null==g)return null;var m=q.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:c},q.createElement(Y2,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),q.createElement(X2,{width:l.width,height:l.height}),q.createElement(Q2,V2({},e,f,{margin:n,chartWidth:u,chartHeight:d,contextPayload:t})));return ad.createPortal(m,g)}class Z2 extends q.PureComponent{static getWidthOrHeight(e,t,r,n){return"vertical"===e&&gX(t)?{height:t}:"horizontal"===e?{width:r||n}:null}render(){return q.createElement(J2,this.props)}}function e3(){return e3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e3.apply(null,arguments)}function t3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?t3(Object(r),!0).forEach((function(t){n3(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t3(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function n3(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i3(e){return Array.isArray(e)&&mX(e[0])&&mX(e[1])?e.join(" ~ "):e}G2(Z2,"displayName","Legend"),G2(Z2,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});var s3=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:s,formatter:a,itemSorter:o,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:d,accessibilityLayer:h=!1}=e,f=r3({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),p=r3({margin:0},i),g=!EX(u),m=g?u:"",y=rp("recharts-default-tooltip",l),v=rp("recharts-tooltip-label",c);g&&d&&null!=s&&(m=d(u,s));var b=h?{role:"status","aria-live":"assertive"}:{};return q.createElement("div",e3({className:y,style:f},b),q.createElement("p",{className:v,style:p},q.isValidElement(m)?m:"".concat(m)),(()=>{if(s&&s.length){var e=(o?iZ(s,o):s).map(((e,r)=>{if("none"===e.type)return null;var i=e.formatter||a||i3,{value:o,name:l}=e,c=o,u=l;if(i){var d=i(o,l,e,r,s);if(Array.isArray(d))[c,u]=d;else{if(null==d)return null;c=d}}var h=r3({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},n);return q.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(r),style:h},mX(u)?q.createElement("span",{className:"recharts-tooltip-item-name"},u):null,mX(u)?q.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,q.createElement("span",{className:"recharts-tooltip-item-value"},c),q.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))}));return q.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},a3="recharts-tooltip-wrapper",o3={visibility:"hidden"};function l3(e){var{coordinate:t,translateX:r,translateY:n}=e;return rp(a3,{["".concat(a3,"-right")]:gX(r)&&t&&gX(t.x)&&r>=t.x,["".concat(a3,"-left")]:gX(r)&&t&&gX(t.x)&&r<t.x,["".concat(a3,"-bottom")]:gX(n)&&t&&gX(t.y)&&n>=t.y,["".concat(a3,"-top")]:gX(n)&&t&&gX(t.y)&&n<t.y})}function c3(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:i,position:s,reverseDirection:a,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=e;if(s&&gX(s[n]))return s[n];var u=r[n]-o-(i>0?i:0),d=r[n]+i;if(t[n])return a[n]?u:d;var h=l[n];return null==h?0:a[n]?u<h?Math.max(d,h):Math.max(u,h):null==c?0:d+o>h+c?Math.max(u,h):Math.max(d,h)}function u3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u3(Object(r),!0).forEach((function(t){h3(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u3(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h3(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class f3 extends q.PureComponent{constructor(){super(...arguments),h3(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),h3(this,"handleKeyDown",(e=>{var t,r,n,i;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(r=this.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==t?t:0,y:null!==(n=null===(i=this.props.coordinate)||void 0===i?void 0:i.y)&&void 0!==n?n:0}})}))}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:r,animationEasing:n,children:i,coordinate:s,hasPayload:a,isAnimationActive:o,offset:l,position:c,reverseDirection:u,useTranslate3d:d,viewBox:h,wrapperStyle:f,lastBoundingBox:p,innerRef:g,hasPortalFromProps:m}=this.props,{cssClasses:y,cssProperties:v}=function(e){var t,r,n,{allowEscapeViewBox:i,coordinate:s,offsetTopLeft:a,position:o,reverseDirection:l,tooltipBox:c,useTranslate3d:u,viewBox:d}=e;return t=c.height>0&&c.width>0&&s?function(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:r=c3({allowEscapeViewBox:i,coordinate:s,key:"x",offsetTopLeft:a,position:o,reverseDirection:l,tooltipDimension:c.width,viewBox:d,viewBoxDimension:d.width}),translateY:n=c3({allowEscapeViewBox:i,coordinate:s,key:"y",offsetTopLeft:a,position:o,reverseDirection:l,tooltipDimension:c.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:u}):o3,{cssProperties:t,cssClasses:l3({translateX:r,translateY:n,coordinate:s})}}({allowEscapeViewBox:t,coordinate:s,offsetTopLeft:l,position:c,reverseDirection:u,tooltipBox:{height:p.height,width:p.width},useTranslate3d:d,viewBox:h}),b=m?{}:d3(d3({transition:o&&e?"transform ".concat(r,"ms ").concat(n):void 0},v),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&a?"visible":"hidden",position:"absolute",top:0,left:0}),w=d3(d3({},b),{},{visibility:!this.state.dismissed&&e&&a?"visible":"hidden"},f);return q.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:w,ref:g},i)}}var p3=!1,g3=!("undefined"!=typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout),m3=()=>qJ((e=>e.rootProps.accessibilityLayer));function y3(){return y3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y3.apply(null,arguments)}function v3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v3(Object(r),!0).forEach((function(t){w3(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v3(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w3(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x3={curveBasisClosed:function(e){return new $Y(e)},curveBasisOpen:function(e){return new zY(e)},curveBasis:function(e){return new BY(e)},curveBumpX:function(e){return new wY(e,!0)},curveBumpY:function(e){return new wY(e,!1)},curveLinearClosed:function(e){return new qY(e)},curveLinear:gY,curveMonotoneX:function(e){return new WY(e)},curveMonotoneY:function(e){return new QY(e)},curveNatural:function(e){return new XY(e)},curveStep:function(e){return new ZY(e,.5)},curveStepAfter:function(e){return new ZY(e,1)},curveStepBefore:function(e){return new ZY(e,0)}},S3=e=>v2(e.x)&&v2(e.y),E3=e=>e.x,T3=e=>e.y,k3=e=>{var t,{type:r="linear",points:n=[],baseLine:i,layout:s,connectNulls:a=!1}=e,o=((e,t)=>{if("function"==typeof e)return e;var r="curve".concat(TX(e));return"curveMonotone"!==r&&"curveBump"!==r||!t?x3[r]||gY:x3["".concat(r).concat("vertical"===t?"Y":"X")]})(r,s),l=a?n.filter(S3):n;if(Array.isArray(i)){var c=a?i.filter((e=>S3(e))):i,u=l.map(((e,t)=>b3(b3({},e),{},{base:c[t]})));return(t="vertical"===s?bY().y(T3).x1(E3).x0((e=>e.base.x)):bY().x(E3).y1(T3).y0((e=>e.base.y))).defined(S3).curve(o),t(u)}return(t="vertical"===s&&gX(i)?bY().y(T3).x1(E3).x0(i):gX(i)?bY().x(E3).y1(T3).y0(i):vY().x(E3).y(T3)).defined(S3).curve(o),t(l)},A3=e=>{var{className:t,points:r,path:n,pathRef:i}=e;if(!(r&&r.length||n))return null;var s=r&&r.length?k3(e):n;return q.createElement("path",y3({},VQ(e),OX(e),{className:rp("recharts-curve",t),d:null===s?void 0:s,ref:i}))},_3=["x","y","top","left","width","height","className"];function C3(){return C3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C3.apply(null,arguments)}function P3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D3(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R3=(e,t,r,n,i,s)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),I3=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:s=0,height:a=0,className:o}=e,l=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P3(Object(r),!0).forEach((function(t){D3(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P3(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({x:t,y:r,top:n,left:i,width:s,height:a},function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,_3));return gX(t)&&gX(r)&&gX(s)&&gX(a)&&gX(n)&&gX(i)?q.createElement("path",C3({},HQ(l),{className:rp("recharts-cross",o),d:R3(t,r,s,a,n,i)})):null};function O3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N3(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j3(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O3(Object(r),!0).forEach((function(t){N3(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O3(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),n=t;return Object.keys(t).reduce(((e,t)=>(void 0===e[t]&&void 0!==n[t]&&(e[t]=n[t]),e)),r)}function L3(){}function M3(e){return null!=e}function F3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F3(Object(r),!0).forEach((function(t){B3(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F3(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B3(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $3=(e,t,r)=>e.map((e=>{return"".concat((n=e,n.replace(/([A-Z])/g,(e=>"-".concat(e.toLowerCase()))))," ").concat(t,"ms ").concat(r);var n})).join(","),z3=(e,t)=>Object.keys(t).reduce(((r,n)=>U3(U3({},r),{},{[n]:e(n,t[n])})),{});function q3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q3(Object(r),!0).forEach((function(t){K3(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q3(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K3(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var H3=(e,t,r)=>e+(t-e)*r,G3=e=>{var{from:t,to:r}=e;return t!==r},W3=(e,t,r)=>{var n=z3(((t,r)=>{if(G3(r)){var[n,i]=e(r.from,r.to,r.velocity);return V3(V3({},r),{},{from:n,velocity:i})}return r}),t);return r<1?z3(((e,t)=>G3(t)?V3(V3({},t),{},{velocity:H3(t.velocity,n[e].velocity,r),from:H3(t.from,n[e].from,r)}):t),t):W3(e,n,r-1)};function Q3(e,t,r,n,i,s){var a,o=n.reduce(((r,n)=>V3(V3({},r),{},{[n]:{from:e[n],velocity:0,to:t[n]}})),{}),l=null,c=n=>{a||(a=n);var u=(n-a)/r.dt;o=W3(r,o,u),i(V3(V3(V3({},e),t),z3(((e,t)=>t.from),o))),a=n,Object.values(o).filter(G3).length&&(l=s.setTimeout(c))};return()=>(l=s.setTimeout(c),()=>{l()})}const Y3=(e,t,r,n,i,s)=>{var a,o,l=(a=e,o=t,[Object.keys(a),Object.keys(o)].reduce(((e,t)=>e.filter((e=>t.includes(e))))));return!0===r.isStepper?Q3(e,t,r,l,i,s):function(e,t,r,n,i,s,a){var o,l=null,c=i.reduce(((r,n)=>V3(V3({},r),{},{[n]:[e[n],t[n]]})),{}),u=i=>{o||(o=i);var d=(i-o)/n,h=z3(((e,t)=>H3(...t,r(d))),c);if(s(V3(V3(V3({},e),t),h)),d<1)l=a.setTimeout(u);else{var f=z3(((e,t)=>H3(...t,r(1))),c);s(V3(V3(V3({},e),t),f))}};return()=>(l=a.setTimeout(u),()=>{l()})}(e,t,r,n,l,i,s)};var X3=1e-4,J3=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Z3=(e,t)=>e.map(((e,r)=>e*t**r)).reduce(((e,t)=>e+t)),e4=(e,t)=>r=>{var n=J3(e,t);return Z3(n,r)},t4=function(){for(var e,t,r,n,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];if(1===s.length)switch(s[0]){case"linear":[e,r,t,n]=[0,0,1,1];break;case"ease":[e,r,t,n]=[.25,.1,.25,1];break;case"ease-in":[e,r,t,n]=[.42,0,1,1];break;case"ease-out":[e,r,t,n]=[.42,0,.58,1];break;case"ease-in-out":[e,r,t,n]=[0,0,.58,1];break;default:var o=s[0].split("(");"cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length&&([e,r,t,n]=o[1].split(")")[0].split(",").map((e=>parseFloat(e))))}else 4===s.length&&([e,r,t,n]=s);var l,c,u=e4(e,t),d=e4(r,n),h=(l=e,c=t,e=>{var t=[...J3(l,c).map(((e,t)=>e*t)).slice(1),0];return Z3(t,e)}),f=e=>{for(var t,r=e>1?1:e,n=r,i=0;i<8;++i){var s=u(n)-r,a=h(n);if(Math.abs(s-r)<X3||a<X3)return d(n);n=(t=n-s/a)>1?1:t<0?0:t}return d(n)};return f.isStepper=!1,f},r4=e=>{if("string"==typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return t4(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:r=8,dt:n=17}=e,i=(e,i,s)=>{var a=s+(-(e-i)*t-s*r)*n/1e3,o=s*n/1e3+e;return Math.abs(o-i)<X3&&Math.abs(a)<X3?[i,0]:[o,a]};return i.isStepper=!0,i.dt=n,i}();default:if("cubic-bezier"===e.split("(")[0])return t4(e)}return"function"==typeof e?e:null};class n4{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=performance.now(),n=null,i=s=>{s-r>=t?e(s):"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(i))};return n=requestAnimationFrame(i),()=>{cancelAnimationFrame(n)}}}function i4(){return e=new n4,t=()=>null,r=!1,n=null,i=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var a=s,[o,...l]=a;return"number"==typeof o?void(n=e.setTimeout(i.bind(null,l),o)):(i(o),void(n=e.setTimeout(i.bind(null,l))))}"string"==typeof s&&t(s),"object"==typeof s&&t(s),"function"==typeof s&&s()}},{stop:()=>{r=!0},start:e=>{r=!1,n&&(n(),n=null),i(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e};var e,t,r,n,i}var s4=q.createContext(i4);var a4={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},o4={t:0},l4={t:1};function c4(e){var t,r,n,i=j3(e,a4),{isActive:s,canBegin:a,duration:o,easing:l,begin:c,onAnimationEnd:u,onAnimationStart:d,children:h}=i,f=(t=i.animationId,r=i.animationManager,n=q.useContext(s4),q.useMemo((()=>null!=r?r:n(t)),[t,r,n])),[p,g]=q.useState(s?o4:l4),m=q.useRef(null);return q.useEffect((()=>{s||g(l4)}),[s]),q.useEffect((()=>{if(!s||!a)return L3;var e=Y3(o4,l4,r4(l),o,g,f.getTimeoutController());return f.start([d,c,()=>{m.current=e()},o,u]),()=>{f.stop(),m.current&&m.current(),u()}}),[s,a,o,l,c,d,u,f]),h(p.t)}function u4(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",r=q.useRef(vX(t)),n=q.useRef(e);return n.current!==e&&(r.current=vX(t),n.current=e),r.current}var d4=["radius"],h4=["radius"];function f4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p4(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f4(Object(r),!0).forEach((function(t){g4(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f4(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g4(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m4(){return m4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m4.apply(null,arguments)}function y4(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var v4=(e,t,r,n,i)=>{var s,a=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0;if(a>0&&i instanceof Array){for(var u=[0,0,0,0],d=0;d<4;d++)u[d]=i[d]>a?a:i[d];s="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(s+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),s+="L ".concat(e+r-l*u[1],",").concat(t),u[1]>0&&(s+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,",\n        ").concat(e+r,",").concat(t+o*u[1])),s+="L ".concat(e+r,",").concat(t+n-o*u[2]),u[2]>0&&(s+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,",\n        ").concat(e+r-l*u[2],",").concat(t+n)),s+="L ".concat(e+l*u[3],",").concat(t+n),u[3]>0&&(s+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+n-o*u[3])),s+="Z"}else if(a>0&&i===+i&&i>0){var h=Math.min(a,i);s="M ".concat(e,",").concat(t+o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+r-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*h,"\n            L ").concat(e+r,",").concat(t+n-o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r-l*h,",").concat(t+n,"\n            L ").concat(e+l*h,",").concat(t+n,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*h," Z")}else s="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return s},b4={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},w4=e=>{var t=j3(e,b4),r=q.useRef(null),[n,i]=q.useState(-1);q.useEffect((()=>{if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&i(e)}catch(t){}}),[]);var{x:s,y:a,width:o,height:l,radius:c,className:u}=t,{animationEasing:d,animationDuration:h,animationBegin:f,isAnimationActive:p,isUpdateAnimationActive:g}=t,m=q.useRef(o),y=q.useRef(l),v=q.useRef(s),b=q.useRef(a),w=u4(q.useMemo((()=>({x:s,y:a,width:o,height:l,radius:c})),[s,a,o,l,c]),"rectangle-");if(s!==+s||a!==+a||o!==+o||l!==+l||0===o||0===l)return null;var x=rp("recharts-rectangle",u);if(!g){var S=y4(HQ(t),d4);return q.createElement("path",m4({},S,{radius:"number"==typeof c?c:void 0,className:x,d:v4(s,a,o,l,c)}))}var E=m.current,T=y.current,k=v.current,A=b.current,_="0px ".concat(-1===n?1:n,"px"),C="".concat(n,"px 0px"),P=$3(["strokeDasharray"],h,"string"==typeof d?d:void 0);return q.createElement(c4,{animationId:w,key:w,canBegin:n>0,duration:h,easing:d,isActive:g,begin:f},(e=>{var n,i=xX(E,o,e),u=xX(T,l,e),d=xX(k,s,e),h=xX(A,a,e);r.current&&(m.current=i,y.current=u,v.current=d,b.current=h),n=p?e>0?{transition:P,strokeDasharray:C}:{strokeDasharray:_}:{strokeDasharray:C};var f=y4(HQ(t),h4);return q.createElement("path",m4({},f,{radius:"number"==typeof c?c:void 0,className:x,d:v4(d,h,i,u,c),ref:r,style:p4(p4({},n),t.style)}))}))};function x4(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:s}=e;return{points:[b1(t,r,n,i),b1(t,r,n,s)],cx:t,cy:r,radius:n,startAngle:i,endAngle:s}}function S4(){return S4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S4.apply(null,arguments)}var E4=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:s,isExternal:a,cornerRadius:o,cornerIsExternal:l}=e,c=o*(a?1:-1)+n,u=Math.asin(o/c)/y1,d=l?i:i+s*u,h=l?i-s*u:i;return{center:b1(t,r,c,d),circleTangency:b1(t,r,n,d),lineTangency:b1(t,r,c*Math.cos(u*y1),h),theta:u}},T4=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:s,endAngle:a}=e,o=((e,t)=>hX(t-e)*Math.min(Math.abs(t-e),359.999))(s,a),l=s+o,c=b1(t,r,i,s),u=b1(t,r,i,l),d="M ".concat(c.x,",").concat(c.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(o)>180),",").concat(+(s>l),",\n    ").concat(u.x,",").concat(u.y,"\n  ");if(n>0){var h=b1(t,r,n,s),f=b1(t,r,n,l);d+="L ".concat(f.x,",").concat(f.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(o)>180),",").concat(+(s<=l),",\n            ").concat(h.x,",").concat(h.y," Z")}else d+="L ".concat(t,",").concat(r," Z");return d},k4={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},A4=e=>{var t=j3(e,k4),{cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u,className:d}=t;if(s<i||c===u)return null;var h,f=rp("recharts-sector",d),p=s-i,g=bX(a,p,0,!0);return h=g>0&&Math.abs(c-u)<360?(e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:o,startAngle:l,endAngle:c}=e,u=hX(c-l),{circleTangency:d,lineTangency:h,theta:f}=E4({cx:t,cy:r,radius:i,angle:l,sign:u,cornerRadius:s,cornerIsExternal:o}),{circleTangency:p,lineTangency:g,theta:m}=E4({cx:t,cy:r,radius:i,angle:c,sign:-u,cornerRadius:s,cornerIsExternal:o}),y=o?Math.abs(l-c):Math.abs(l-c)-f-m;if(y<0)return a?"M ".concat(h.x,",").concat(h.y,"\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*s,",0\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*-s,",0\n      "):T4({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:l,endAngle:c});var v="M ".concat(h.x,",").concat(h.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(d.x,",").concat(d.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(y>180),",").concat(+(u<0),",").concat(p.x,",").concat(p.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(g.x,",").concat(g.y,"\n  ");if(n>0){var{circleTangency:b,lineTangency:w,theta:x}=E4({cx:t,cy:r,radius:n,angle:l,sign:u,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:S,lineTangency:E,theta:T}=E4({cx:t,cy:r,radius:n,angle:c,sign:-u,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),k=o?Math.abs(l-c):Math.abs(l-c)-x-T;if(k<0&&0===s)return"".concat(v,"L").concat(t,",").concat(r,"Z");v+="L".concat(E.x,",").concat(E.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(k>180),",").concat(+(u>0),",").concat(b.x,",").concat(b.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(w.x,",").concat(w.y,"Z")}else v+="L".concat(t,",").concat(r,"Z");return v})({cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:Math.min(g,p/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}):T4({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:c,endAngle:u}),q.createElement("path",S4({},HQ(t),{className:f,d:h}))};function _4(e,t,r){var n,i,s,a;if("horizontal"===e)s=n=t.x,i=r.top,a=r.top+r.height;else if("vertical"===e)a=i=t.y,n=r.left,s=r.left+r.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return x4(t);var{cx:o,cy:l,innerRadius:c,outerRadius:u,angle:d}=t,h=b1(o,l,c,d),f=b1(o,l,u,d);n=h.x,i=h.y,s=f.x,a=f.y}return[{x:n,y:i},{x:s,y:a}]}var C4={},P4={},D4={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tZ;e.toNumber=function(e){return t.isSymbol(e)?NaN:Number(e)}}(D4),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D4;e.toFinite=function(e){if(!e)return 0===e?e:0;if((e=t.toNumber(e))===1/0||e===-1/0){return(e<0?-1:1)*Number.MAX_VALUE}return e==e?e:0}}(P4),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nZ,r=P4;e.range=function(e,n,i){i&&"number"!=typeof i&&t.isIterateeCall(e,n,i)&&(n=i=void 0),e=r.toFinite(e),void 0===n?(n=e,e=0):n=r.toFinite(n),i=void 0===i?e<n?1:-1:r.toFinite(i);const s=Math.max(Math.ceil((n-e)/(i||1)),0),a=new Array(s);for(let t=0;t<s;t++)a[t]=e,e+=i;return a}}(C4);const R4=n(C4.range);function I4(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function O4(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function N4(e){let t,r,n;function i(e,n,i=0,s=e.length){if(i<s){if(0!==t(n,n))return s;do{const t=i+s>>>1;r(e[t],n)<0?i=t+1:s=t}while(i<s)}return i}return 2!==e.length?(t=I4,r=(t,r)=>I4(e(t),r),n=(t,r)=>e(t)-r):(t=e===I4||e===O4?e:j4,r=e,n=e),{left:i,center:function(e,t,r=0,s=e.length){const a=i(e,t,r,s-1);return a>r&&n(e[a-1],t)>-n(e[a],t)?a-1:a},right:function(e,n,i=0,s=e.length){if(i<s){if(0!==t(n,n))return s;do{const t=i+s>>>1;r(e[t],n)<=0?i=t+1:s=t}while(i<s)}return i}}}function j4(){return 0}function L4(e){return null===e?NaN:+e}const M4=N4(I4).right;N4(L4).center;const F4=M4;class U4 extends Map{constructor(e,t=$4){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[r,n]of e)this.set(r,n)}get(e){return super.get(B4(this,e))}has(e){return super.has(B4(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},r){const n=t(r);e.has(n)&&(r=e.get(n),e.delete(n));return r}(this,e))}}function B4({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function $4(e){return null!==e&&"object"==typeof e?e.valueOf():e}function z4(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}const q4=Math.sqrt(50),V4=Math.sqrt(10),K4=Math.sqrt(2);function H4(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),a=s>=q4?10:s>=V4?5:s>=K4?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=r&&r<2?H4(e,t,2*r):[o,l,c]}function G4(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const n=t<e,[i,s,a]=n?H4(t,e,r):H4(e,t,r);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(n)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function W4(e,t,r){return H4(e=+e,t=+t,r=+r)[2]}function Q4(e,t,r){r=+r;const n=(t=+t)<(e=+e),i=n?W4(t,e,r):W4(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function Y4(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(r<i||void 0===r&&i>=i)&&(r=i)}return r}function X4(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(r>i||void 0===r&&i>=i)&&(r=i)}return r}function J4(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=void 0===i?z4:function(e=I4){if(e===I4)return z4;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}(i);n>r;){if(n-r>600){const s=n-r+1,a=t-r+1,o=Math.log(s),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(s-l)/s)*(a-s/2<0?-1:1);J4(e,t,Math.max(r,Math.floor(t-a*l/s+c)),Math.min(n,Math.floor(t+(s-a)*l/s+c)),i)}const s=e[t];let a=r,o=n;for(Z4(e,r,t),i(e[n],s)>0&&Z4(e,r,n);a<o;){for(Z4(e,a,o),++a,--o;i(e[a],s)<0;)++a;for(;i(e[o],s)>0;)--o}0===i(e[r],s)?Z4(e,r,o):(++o,Z4(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function Z4(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function e5(e,t,r=L4){if((n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,s=Math.floor(i),a=+r(e[s],s,e);return a+(+r(e[s+1],s+1,e)-a)*(i-s)}}function t5(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function r5(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const n5=Symbol("implicit");function i5(){var e=new U4,t=[],r=[],n=n5;function i(i){let s=e.get(i);if(void 0===s){if(n!==n5)return n;e.set(i,s=t.push(i)-1)}return r[s%r.length]}return i.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new U4;for(const n of r)e.has(n)||e.set(n,t.push(n)-1);return i},i.range=function(e){return arguments.length?(r=Array.from(e),i):r.slice()},i.unknown=function(e){return arguments.length?(n=e,i):n},i.copy=function(){return i5(t,r).unknown(n)},t5.apply(i,arguments),i}function s5(){var e,t,r=i5().unknown(void 0),n=r.domain,i=r.range,s=0,a=1,o=!1,l=0,c=0,u=.5;function d(){var r=n().length,d=a<s,h=d?a:s,f=d?s:a;e=(f-h)/Math.max(1,r-l+2*c),o&&(e=Math.floor(e)),h+=(f-h-e*(r-l))*u,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var p=function(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=0|Math.max(0,Math.ceil((t-e)/r)),s=new Array(i);++n<i;)s[n]=e+n*r;return s}(r).map((function(t){return h+e*t}));return i(d?p.reverse():p)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),d()):n()},r.range=function(e){return arguments.length?([s,a]=e,s=+s,a=+a,d()):[s,a]},r.rangeRound=function(e){return[s,a]=e,s=+s,a=+a,o=!0,d()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(o=!!e,d()):o},r.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),d()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),d()):l},r.paddingOuter=function(e){return arguments.length?(c=+e,d()):c},r.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},r.copy=function(){return s5(n(),[s,a]).round(o).paddingInner(l).paddingOuter(c).align(u)},t5.apply(d(),arguments)}function a5(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return a5(t())},e}function o5(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function l5(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function c5(){}var u5=.7,d5=1/u5,h5="\\s*([+-]?\\d+)\\s*",f5="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",p5="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",g5=/^#([0-9a-f]{3,8})$/,m5=new RegExp(`^rgb\\(${h5},${h5},${h5}\\)$`),y5=new RegExp(`^rgb\\(${p5},${p5},${p5}\\)$`),v5=new RegExp(`^rgba\\(${h5},${h5},${h5},${f5}\\)$`),b5=new RegExp(`^rgba\\(${p5},${p5},${p5},${f5}\\)$`),w5=new RegExp(`^hsl\\(${f5},${p5},${p5}\\)$`),x5=new RegExp(`^hsla\\(${f5},${p5},${p5},${f5}\\)$`),S5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function E5(){return this.rgb().formatHex()}function T5(){return this.rgb().formatRgb()}function k5(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=g5.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?A5(t):3===r?new P5(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?_5(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?_5(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=m5.exec(e))?new P5(t[1],t[2],t[3],1):(t=y5.exec(e))?new P5(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=v5.exec(e))?_5(t[1],t[2],t[3],t[4]):(t=b5.exec(e))?_5(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=w5.exec(e))?j5(t[1],t[2]/100,t[3]/100,1):(t=x5.exec(e))?j5(t[1],t[2]/100,t[3]/100,t[4]):S5.hasOwnProperty(e)?A5(S5[e]):"transparent"===e?new P5(NaN,NaN,NaN,0):null}function A5(e){return new P5(e>>16&255,e>>8&255,255&e,1)}function _5(e,t,r,n){return n<=0&&(e=t=r=NaN),new P5(e,t,r,n)}function C5(e,t,r,n){return 1===arguments.length?((i=e)instanceof c5||(i=k5(i)),i?new P5((i=i.rgb()).r,i.g,i.b,i.opacity):new P5):new P5(e,t,r,null==n?1:n);var i}function P5(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function D5(){return`#${N5(this.r)}${N5(this.g)}${N5(this.b)}`}function R5(){const e=I5(this.opacity);return`${1===e?"rgb(":"rgba("}${O5(this.r)}, ${O5(this.g)}, ${O5(this.b)}${1===e?")":`, ${e})`}`}function I5(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function O5(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function N5(e){return((e=O5(e))<16?"0":"")+e.toString(16)}function j5(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new M5(e,t,r,n)}function L5(e){if(e instanceof M5)return new M5(e.h,e.s,e.l,e.opacity);if(e instanceof c5||(e=k5(e)),!e)return new M5;if(e instanceof M5)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),a=NaN,o=s-i,l=(s+i)/2;return o?(a=t===s?(r-n)/o+6*(r<n):r===s?(n-t)/o+2:(t-r)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new M5(a,o,l,e.opacity)}function M5(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function F5(e){return(e=(e||0)%360)<0?e+360:e}function U5(e){return Math.max(0,Math.min(1,e||0))}function B5(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}o5(c5,k5,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:E5,formatHex:E5,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return L5(this).formatHsl()},formatRgb:T5,toString:T5}),o5(P5,C5,l5(c5,{brighter(e){return e=null==e?d5:Math.pow(d5,e),new P5(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?u5:Math.pow(u5,e),new P5(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new P5(O5(this.r),O5(this.g),O5(this.b),I5(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:D5,formatHex:D5,formatHex8:function(){return`#${N5(this.r)}${N5(this.g)}${N5(this.b)}${N5(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:R5,toString:R5})),o5(M5,(function(e,t,r,n){return 1===arguments.length?L5(e):new M5(e,t,r,null==n?1:n)}),l5(c5,{brighter(e){return e=null==e?d5:Math.pow(d5,e),new M5(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?u5:Math.pow(u5,e),new M5(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new P5(B5(e>=240?e-240:e+120,i,n),B5(e,i,n),B5(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new M5(F5(this.h),U5(this.s),U5(this.l),I5(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=I5(this.opacity);return`${1===e?"hsl(":"hsla("}${F5(this.h)}, ${100*U5(this.s)}%, ${100*U5(this.l)}%${1===e?")":`, ${e})`}`}}));const $5=e=>()=>e;function z5(e){return 1===(e=+e)?q5:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}(t,r,e):$5(isNaN(t)?r:t)}}function q5(e,t){var r=t-e;return r?function(e,t){return function(r){return e+r*t}}(e,r):$5(isNaN(e)?t:e)}const V5=function e(t){var r=z5(t);function n(e,t){var n=r((e=C5(e)).r,(t=C5(t)).r),i=r(e.g,t.g),s=r(e.b,t.b),a=q5(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=s(t),e.opacity=a(t),e+""}}return n.gamma=e,n}(1);function K5(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,i=t.slice();return function(s){for(r=0;r<n;++r)i[r]=e[r]*(1-s)+t[r]*s;return i}}function H5(e,t){var r,n=t?t.length:0,i=e?Math.min(n,e.length):0,s=new Array(i),a=new Array(n);for(r=0;r<i;++r)s[r]=Z5(e[r],t[r]);for(;r<n;++r)a[r]=t[r];return function(e){for(r=0;r<i;++r)a[r]=s[r](e);return a}}function G5(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function W5(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Q5(e,t){var r,n={},i={};for(r in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)r in e?n[r]=Z5(e[r],t[r]):i[r]=t[r];return function(e){for(r in n)i[r]=n[r](e);return i}}var Y5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,X5=new RegExp(Y5.source,"g");function J5(e,t){var r,n,i,s=Y5.lastIndex=X5.lastIndex=0,a=-1,o=[],l=[];for(e+="",t+="";(r=Y5.exec(e))&&(n=X5.exec(t));)(i=n.index)>s&&(i=t.slice(s,i),o[a]?o[a]+=i:o[++a]=i),(r=r[0])===(n=n[0])?o[a]?o[a]+=n:o[++a]=n:(o[++a]=null,l.push({i:a,x:W5(r,n)})),s=X5.lastIndex;return s<t.length&&(i=t.slice(s),o[a]?o[a]+=i:o[++a]=i),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)o[(r=l[n]).i]=r.x(e);return o.join("")})}function Z5(e,t){var r,n,i=typeof t;return null==t||"boolean"===i?$5(t):("number"===i?W5:"string"===i?(r=k5(t))?(t=r,V5):J5:t instanceof k5?V5:t instanceof Date?G5:(n=t,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(t)?H5:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Q5:W5:K5))(e,t)}function e8(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function t8(e){return+e}var r8=[0,1];function n8(e){return e}function i8(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r});var r}function s8(e,t,r){var n=e[0],i=e[1],s=t[0],a=t[1];return i<n?(n=i8(i,n),s=r(a,s)):(n=i8(n,i),s=r(s,a)),function(e){return s(n(e))}}function a8(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),s=new Array(n),a=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<n;)i[a]=i8(e[a],e[a+1]),s[a]=r(t[a],t[a+1]);return function(t){var r=F4(e,t,1,n)-1;return s[r](i[r](t))}}function o8(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function l8(){var e,t,r,n,i,s,a=r8,o=r8,l=Z5,c=n8;function u(){var e=Math.min(a.length,o.length);return c!==n8&&(c=function(e,t){var r;return e>t&&(r=e,e=t,t=r),function(r){return Math.max(e,Math.min(t,r))}}(a[0],a[e-1])),n=e>2?a8:s8,i=s=null,d}function d(t){return null==t||isNaN(t=+t)?r:(i||(i=n(a.map(e),o,l)))(e(c(t)))}return d.invert=function(r){return c(t((s||(s=n(o,a.map(e),W5)))(r)))},d.domain=function(e){return arguments.length?(a=Array.from(e,t8),u()):a.slice()},d.range=function(e){return arguments.length?(o=Array.from(e),u()):o.slice()},d.rangeRound=function(e){return o=Array.from(e),l=e8,u()},d.clamp=function(e){return arguments.length?(c=!!e||n8,u()):c!==n8},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(r=e,d):r},function(r,n){return e=r,t=n,u()}}function c8(){return l8()(n8,n8)}function u8(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function d8(e){return(e=u8(Math.abs(e)))?e[1]:NaN}var h8,f8=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function p8(e){if(!(t=f8.exec(e)))throw new Error("invalid format: "+e);var t;return new g8({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function g8(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function m8(e,t){var r=u8(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}p8.prototype=g8.prototype,g8.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const y8={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>m8(100*e,t),r:m8,s:function(e,t){var r=u8(e,t);if(!r)return e+"";var n=r[0],i=r[1],s=i-(h8=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=n.length;return s===a?n:s>a?n+new Array(s-a+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+u8(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function v8(e){return e}var b8,w8,x8,S8=Array.prototype.map,E8=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function T8(e){var t,r,n=void 0===e.grouping||void 0===e.thousands?v8:(t=S8.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var i=e.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),s.push(e.substring(i-=o,i+o)),!((l+=o+1)>n));)o=t[a=(a+1)%t.length];return s.reverse().join(r)}),i=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?v8:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(S8.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=p8(e)).fill,r=e.align,d=e.sign,h=e.symbol,f=e.zero,p=e.width,g=e.comma,m=e.precision,y=e.trim,v=e.type;"n"===v?(g=!0,v="g"):y8[v]||(void 0===m&&(m=12),y=!0,v="g"),(f||"0"===t&&"="===r)&&(f=!0,t="0",r="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",w="$"===h?s:/[%p]/.test(v)?l:"",x=y8[v],S=/[defgprs%]/.test(v);function E(e){var i,s,l,h=b,E=w;if("c"===v)E=x(e)+E,e="";else{var T=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:x(Math.abs(e),m),y&&(e=function(e){e:for(var t,r=e.length,n=1,i=-1;n<r;++n)switch(e[n]){case".":i=t=n;break;case"0":0===i&&(i=n),t=n;break;default:if(!+e[n])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),T&&0===+e&&"+"!==d&&(T=!1),h=(T?"("===d?d:c:"-"===d||"("===d?"":d)+h,E=("s"===v?E8[8+h8/3]:"")+E+(T&&"("===d?")":""),S)for(i=-1,s=e.length;++i<s;)if(48>(l=e.charCodeAt(i))||l>57){E=(46===l?a+e.slice(i+1):e.slice(i))+E,e=e.slice(0,i);break}}g&&!f&&(e=n(e,1/0));var k=h.length+e.length+E.length,A=k<p?new Array(p-k+1).join(t):"";switch(g&&f&&(e=n(A+e,A.length?p-E.length:1/0),A=""),r){case"<":e=h+e+E+A;break;case"=":e=h+A+e+E;break;case"^":e=A.slice(0,k=A.length>>1)+h+e+E+A.slice(k);break;default:e=A+h+e+E}return o(e)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),E.toString=function(){return e+""},E}return{format:d,formatPrefix:function(e,t){var r=d(((e=p8(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(d8(t)/3))),i=Math.pow(10,-n),s=E8[8+n/3];return function(e){return r(i*e)+s}}}}function k8(e,t,r,n){var i,s=Q4(e,t,r);switch((n=p8(null==n?",f":n)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(d8(t)/3)))-d8(Math.abs(e)))}(s,a))||(n.precision=i),x8(n,a);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,d8(t)-d8(e))+1}(s,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=i-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(i=function(e){return Math.max(0,-d8(Math.abs(e)))}(s))||(n.precision=i-2*("%"===n.type))}return w8(n)}function A8(e){var t=e.domain;return e.ticks=function(e){var r=t();return G4(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return k8(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,i,s=t(),a=0,o=s.length-1,l=s[a],c=s[o],u=10;for(c<l&&(i=l,l=c,c=i,i=a,a=o,o=i);u-- >0;){if((i=W4(l,c,r))===n)return s[a]=l,s[o]=c,t(s);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}n=i}return e},e}function _8(e,t){var r,n=0,i=(e=e.slice()).length-1,s=e[n],a=e[i];return a<s&&(r=n,n=i,i=r,r=s,s=a,a=r),e[n]=t.floor(s),e[i]=t.ceil(a),e}function C8(e){return Math.log(e)}function P8(e){return Math.exp(e)}function D8(e){return-Math.log(-e)}function R8(e){return-Math.exp(-e)}function I8(e){return isFinite(e)?+("1e"+e):e<0?0:e}function O8(e){return(t,r)=>-e(-t,r)}function N8(e){const t=e(C8,P8),r=t.domain;let n,i,s=10;function a(){return n=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(s),i=function(e){return 10===e?I8:e===Math.E?Math.exp:t=>Math.pow(e,t)}(s),r()[0]<0?(n=O8(n),i=O8(i),e(D8,R8)):e(C8,P8),t}return t.base=function(e){return arguments.length?(s=+e,a()):s},t.domain=function(e){return arguments.length?(r(e),a()):r()},t.ticks=e=>{const t=r();let a=t[0],o=t[t.length-1];const l=o<a;l&&([a,o]=[o,a]);let c,u,d=n(a),h=n(o);const f=null==e?10:+e;let p=[];if(!(s%1)&&h-d<f){if(d=Math.floor(d),h=Math.ceil(h),a>0){for(;d<=h;++d)for(c=1;c<s;++c)if(u=d<0?c/i(-d):c*i(d),!(u<a)){if(u>o)break;p.push(u)}}else for(;d<=h;++d)for(c=s-1;c>=1;--c)if(u=d>0?c/i(-d):c*i(d),!(u<a)){if(u>o)break;p.push(u)}2*p.length<f&&(p=G4(a,o,f))}else p=G4(d,h,Math.min(h-d,f)).map(i);return l?p.reverse():p},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===s?"s":","),"function"!=typeof r&&(s%1||null!=(r=p8(r)).precision||(r.trim=!0),r=w8(r)),e===1/0)return r;const a=Math.max(1,s*e/t.ticks().length);return e=>{let t=e/i(Math.round(n(e)));return t*s<s-.5&&(t*=s),t<=a?r(e):""}},t.nice=()=>r(_8(r(),{floor:e=>i(Math.floor(n(e))),ceil:e=>i(Math.ceil(n(e)))})),t}function j8(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function L8(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function M8(e){var t=1,r=e(j8(t),L8(t));return r.constant=function(r){return arguments.length?e(j8(t=+r),L8(t)):t},A8(r)}function F8(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function U8(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function B8(e){return e<0?-e*e:e*e}function $8(e){var t=e(n8,n8),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(n8,n8):.5===r?e(U8,B8):e(F8(r),F8(1/r)):r},A8(t)}function z8(){var e=$8(l8());return e.copy=function(){return o8(e,z8()).exponent(e.exponent())},t5.apply(e,arguments),e}function q8(e){return Math.sign(e)*e*e}b8=T8({thousands:",",grouping:[3],currency:["$",""]}),w8=b8.format,x8=b8.formatPrefix;const V8=new Date,K8=new Date;function H8(e,t,r,n){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),i.round=e=>{const t=i(e),r=i.ceil(e);return e-t<r-e?t:r},i.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),i.range=(r,n,s)=>{const a=[];if(r=i.ceil(r),s=null==s?1:Math.floor(s),!(r<n&&s>0))return a;let o;do{a.push(o=new Date(+r)),t(r,s),e(r)}while(o<r&&r<n);return a},i.filter=r=>H8((t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)}),((e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););})),r&&(i.count=(t,n)=>(V8.setTime(+t),K8.setTime(+n),e(V8),e(K8),Math.floor(r(V8,K8))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(n?t=>n(t)%e===0:t=>i.count(0,t)%e===0):i:null)),i}const G8=H8((()=>{}),((e,t)=>{e.setTime(+e+t)}),((e,t)=>t-e));G8.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?H8((t=>{t.setTime(Math.floor(t/e)*e)}),((t,r)=>{t.setTime(+t+r*e)}),((t,r)=>(r-t)/e)):G8:null),G8.range;const W8=1e3,Q8=6e4,Y8=36e5,X8=864e5,J8=6048e5,Z8=2592e6,e6=31536e6,t6=H8((e=>{e.setTime(e-e.getMilliseconds())}),((e,t)=>{e.setTime(+e+t*W8)}),((e,t)=>(t-e)/W8),(e=>e.getUTCSeconds()));t6.range;const r6=H8((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*W8)}),((e,t)=>{e.setTime(+e+t*Q8)}),((e,t)=>(t-e)/Q8),(e=>e.getMinutes()));r6.range;const n6=H8((e=>{e.setUTCSeconds(0,0)}),((e,t)=>{e.setTime(+e+t*Q8)}),((e,t)=>(t-e)/Q8),(e=>e.getUTCMinutes()));n6.range;const i6=H8((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*W8-e.getMinutes()*Q8)}),((e,t)=>{e.setTime(+e+t*Y8)}),((e,t)=>(t-e)/Y8),(e=>e.getHours()));i6.range;const s6=H8((e=>{e.setUTCMinutes(0,0,0)}),((e,t)=>{e.setTime(+e+t*Y8)}),((e,t)=>(t-e)/Y8),(e=>e.getUTCHours()));s6.range;const a6=H8((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Q8)/X8),(e=>e.getDate()-1));a6.range;const o6=H8((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/X8),(e=>e.getUTCDate()-1));o6.range;const l6=H8((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/X8),(e=>Math.floor(e/X8)));function c6(e){return H8((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Q8)/J8))}l6.range;const u6=c6(0),d6=c6(1),h6=c6(2),f6=c6(3),p6=c6(4),g6=c6(5),m6=c6(6);function y6(e){return H8((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/J8))}u6.range,d6.range,h6.range,f6.range,p6.range,g6.range,m6.range;const v6=y6(0),b6=y6(1),w6=y6(2),x6=y6(3),S6=y6(4),E6=y6(5),T6=y6(6);v6.range,b6.range,w6.range,x6.range,S6.range,E6.range,T6.range;const k6=H8((e=>{e.setDate(1),e.setHours(0,0,0,0)}),((e,t)=>{e.setMonth(e.getMonth()+t)}),((e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),(e=>e.getMonth()));k6.range;const A6=H8((e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)}),((e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())),(e=>e.getUTCMonth()));A6.range;const _6=H8((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear()));_6.every=e=>isFinite(e=Math.floor(e))&&e>0?H8((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,r)=>{t.setFullYear(t.getFullYear()+r*e)})):null,_6.range;const C6=H8((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));function P6(e,t,r,n,i,s){const a=[[t6,1,W8],[t6,5,5e3],[t6,15,15e3],[t6,30,3e4],[s,1,Q8],[s,5,3e5],[s,15,9e5],[s,30,18e5],[i,1,Y8],[i,3,108e5],[i,6,216e5],[i,12,432e5],[n,1,X8],[n,2,1728e5],[r,1,J8],[t,1,Z8],[t,3,7776e6],[e,1,e6]];function o(t,r,n){const i=Math.abs(r-t)/n,s=N4((([,,e])=>e)).right(a,i);if(s===a.length)return e.every(Q4(t/e6,r/e6,n));if(0===s)return G8.every(Math.max(Q4(t,r,n),1));const[o,l]=a[i/a[s-1][2]<a[s][2]/i?s-1:s];return o.every(l)}return[function(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const i=r&&"function"==typeof r.range?r:o(e,t,r),s=i?i.range(e,+t+1):[];return n?s.reverse():s},o]}C6.every=e=>isFinite(e=Math.floor(e))&&e>0?H8((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)})):null,C6.range;const[D6,R6]=P6(C6,A6,v6,l6,s6,n6),[I6,O6]=P6(_6,k6,u6,a6,i6,r6);function N6(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function j6(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function L6(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var M6,F6,U6,B6={"-":"",_:" ",0:"0"},$6=/^\s*\d+/,z6=/^%/,q6=/[\\^$*+?|[\]().{}]/g;function V6(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(t)+i:i)}function K6(e){return e.replace(q6,"\\$&")}function H6(e){return new RegExp("^(?:"+e.map(K6).join("|")+")","i")}function G6(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function W6(e,t,r){var n=$6.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Q6(e,t,r){var n=$6.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Y6(e,t,r){var n=$6.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function X6(e,t,r){var n=$6.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function J6(e,t,r){var n=$6.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function Z6(e,t,r){var n=$6.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function e7(e,t,r){var n=$6.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function t7(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function r7(e,t,r){var n=$6.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function n7(e,t,r){var n=$6.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function i7(e,t,r){var n=$6.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function s7(e,t,r){var n=$6.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function a7(e,t,r){var n=$6.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function o7(e,t,r){var n=$6.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function l7(e,t,r){var n=$6.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function c7(e,t,r){var n=$6.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function u7(e,t,r){var n=$6.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function d7(e,t,r){var n=z6.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function h7(e,t,r){var n=$6.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function f7(e,t,r){var n=$6.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function p7(e,t){return V6(e.getDate(),t,2)}function g7(e,t){return V6(e.getHours(),t,2)}function m7(e,t){return V6(e.getHours()%12||12,t,2)}function y7(e,t){return V6(1+a6.count(_6(e),e),t,3)}function v7(e,t){return V6(e.getMilliseconds(),t,3)}function b7(e,t){return v7(e,t)+"000"}function w7(e,t){return V6(e.getMonth()+1,t,2)}function x7(e,t){return V6(e.getMinutes(),t,2)}function S7(e,t){return V6(e.getSeconds(),t,2)}function E7(e){var t=e.getDay();return 0===t?7:t}function T7(e,t){return V6(u6.count(_6(e)-1,e),t,2)}function k7(e){var t=e.getDay();return t>=4||0===t?p6(e):p6.ceil(e)}function A7(e,t){return e=k7(e),V6(p6.count(_6(e),e)+(4===_6(e).getDay()),t,2)}function _7(e){return e.getDay()}function C7(e,t){return V6(d6.count(_6(e)-1,e),t,2)}function P7(e,t){return V6(e.getFullYear()%100,t,2)}function D7(e,t){return V6((e=k7(e)).getFullYear()%100,t,2)}function R7(e,t){return V6(e.getFullYear()%1e4,t,4)}function I7(e,t){var r=e.getDay();return V6((e=r>=4||0===r?p6(e):p6.ceil(e)).getFullYear()%1e4,t,4)}function O7(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+V6(t/60|0,"0",2)+V6(t%60,"0",2)}function N7(e,t){return V6(e.getUTCDate(),t,2)}function j7(e,t){return V6(e.getUTCHours(),t,2)}function L7(e,t){return V6(e.getUTCHours()%12||12,t,2)}function M7(e,t){return V6(1+o6.count(C6(e),e),t,3)}function F7(e,t){return V6(e.getUTCMilliseconds(),t,3)}function U7(e,t){return F7(e,t)+"000"}function B7(e,t){return V6(e.getUTCMonth()+1,t,2)}function $7(e,t){return V6(e.getUTCMinutes(),t,2)}function z7(e,t){return V6(e.getUTCSeconds(),t,2)}function q7(e){var t=e.getUTCDay();return 0===t?7:t}function V7(e,t){return V6(v6.count(C6(e)-1,e),t,2)}function K7(e){var t=e.getUTCDay();return t>=4||0===t?S6(e):S6.ceil(e)}function H7(e,t){return e=K7(e),V6(S6.count(C6(e),e)+(4===C6(e).getUTCDay()),t,2)}function G7(e){return e.getUTCDay()}function W7(e,t){return V6(b6.count(C6(e)-1,e),t,2)}function Q7(e,t){return V6(e.getUTCFullYear()%100,t,2)}function Y7(e,t){return V6((e=K7(e)).getUTCFullYear()%100,t,2)}function X7(e,t){return V6(e.getUTCFullYear()%1e4,t,4)}function J7(e,t){var r=e.getUTCDay();return V6((e=r>=4||0===r?S6(e):S6.ceil(e)).getUTCFullYear()%1e4,t,4)}function Z7(){return"+0000"}function e9(){return"%"}function t9(e){return+e}function r9(e){return Math.floor(+e/1e3)}function n9(e){return new Date(e)}function i9(e){return e instanceof Date?+e:+new Date(+e)}function s9(e,t,r,n,i,s,a,o,l,c){var u=c8(),d=u.invert,h=u.domain,f=c(".%L"),p=c(":%S"),g=c("%I:%M"),m=c("%I %p"),y=c("%a %d"),v=c("%b %d"),b=c("%B"),w=c("%Y");function x(e){return(l(e)<e?f:o(e)<e?p:a(e)<e?g:s(e)<e?m:n(e)<e?i(e)<e?y:v:r(e)<e?b:w)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,i9)):h().map(n9)},u.ticks=function(t){var r=h();return e(r[0],r[r.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?x:c(t)},u.nice=function(e){var r=h();return e&&"function"==typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?h(_8(r,e)):u},u.copy=function(){return o8(u,s9(e,t,r,n,i,s,a,o,l,c))},u}function a9(){var e,t,r,n,i,s=0,a=1,o=n8,l=!1;function c(t){return null==t||isNaN(t=+t)?i:o(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var r,n;return arguments.length?([r,n]=t,o=e(r,n),c):[o(0),o(1)]}}return c.domain=function(i){return arguments.length?([s,a]=i,e=n(s=+s),t=n(a=+a),r=e===t?0:1/(t-e),c):[s,a]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=u(Z5),c.rangeRound=u(e8),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return n=i,e=i(s),t=i(a),r=e===t?0:1/(t-e),c}}function o9(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function l9(){var e=$8(a9());return e.copy=function(){return o9(e,l9()).exponent(e.exponent())},r5.apply(e,arguments)}function c9(){var e,t,r,n,i,s,a,o=0,l=.5,c=1,u=1,d=n8,h=!1;function f(e){return isNaN(e=+e)?a:(e=.5+((e=+s(e))-t)*(u*e<u*t?n:i),d(h?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var r,n,i;return arguments.length?([r,n,i]=t,d=function(e,t){void 0===t&&(t=e,e=Z5);for(var r=0,n=t.length-1,i=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(i,i=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return s[t](e-t)}}(e,[r,n,i]),f):[d(0),d(.5),d(1)]}}return f.domain=function(a){return arguments.length?([o,l,c]=a,e=s(o=+o),t=s(l=+l),r=s(c=+c),n=e===t?0:.5/(t-e),i=t===r?0:.5/(r-t),u=t<e?-1:1,f):[o,l,c]},f.clamp=function(e){return arguments.length?(h=!!e,f):h},f.interpolator=function(e){return arguments.length?(d=e,f):d},f.range=p(Z5),f.rangeRound=p(e8),f.unknown=function(e){return arguments.length?(a=e,f):a},function(a){return s=a,e=a(o),t=a(l),r=a(c),n=e===t?0:.5/(t-e),i=t===r?0:.5/(r-t),u=t<e?-1:1,f}}function u9(){var e=$8(c9());return e.copy=function(){return o9(e,u9()).exponent(e.exponent())},r5.apply(e,arguments)}!function(e){M6=function(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,s=e.days,a=e.shortDays,o=e.months,l=e.shortMonths,c=H6(i),u=G6(i),d=H6(s),h=G6(s),f=H6(a),p=G6(a),g=H6(o),m=G6(o),y=H6(l),v=G6(l),b={a:function(e){return a[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:p7,e:p7,f:b7,g:D7,G:I7,H:g7,I:m7,j:y7,L:v7,m:w7,M:x7,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:t9,s:r9,S:S7,u:E7,U:T7,V:A7,w:_7,W:C7,x:null,X:null,y:P7,Y:R7,Z:O7,"%":e9},w={a:function(e){return a[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:N7,e:N7,f:U7,g:Y7,G:J7,H:j7,I:L7,j:M7,L:F7,m:B7,M:$7,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:t9,s:r9,S:z7,u:q7,U:V7,V:H7,w:G7,W:W7,x:null,X:null,y:Q7,Y:X7,Z:Z7,"%":e9},x={a:function(e,t,r){var n=f.exec(t.slice(r));return n?(e.w=p.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=d.exec(t.slice(r));return n?(e.w=h.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=y.exec(t.slice(r));return n?(e.m=v.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=g.exec(t.slice(r));return n?(e.m=m.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return T(e,t,r,n)},d:i7,e:i7,f:u7,g:e7,G:Z6,H:a7,I:a7,j:s7,L:c7,m:n7,M:o7,p:function(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=u.get(n[0].toLowerCase()),r+n[0].length):-1},q:r7,Q:h7,s:f7,S:l7,u:Q6,U:Y6,V:X6,w:W6,W:J6,x:function(e,t,n){return T(e,r,t,n)},X:function(e,t,r){return T(e,n,t,r)},y:e7,Y:Z6,Z:t7,"%":d7};function S(e,t){return function(r){var n,i,s,a=[],o=-1,l=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++o<c;)37===e.charCodeAt(o)&&(a.push(e.slice(l,o)),null!=(i=B6[n=e.charAt(++o)])?n=e.charAt(++o):i="e"===n?" ":"0",(s=t[n])&&(n=s(r,i)),a.push(n),l=o+1);return a.push(e.slice(l,o)),a.join("")}}function E(e,t){return function(r){var n,i,s=L6(1900,void 0,1);if(T(s,e,r+="",0)!=r.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(i=(n=j6(L6(s.y,0,1))).getUTCDay(),n=i>4||0===i?b6.ceil(n):b6(n),n=o6.offset(n,7*(s.V-1)),s.y=n.getUTCFullYear(),s.m=n.getUTCMonth(),s.d=n.getUTCDate()+(s.w+6)%7):(i=(n=N6(L6(s.y,0,1))).getDay(),n=i>4||0===i?d6.ceil(n):d6(n),n=a6.offset(n,7*(s.V-1)),s.y=n.getFullYear(),s.m=n.getMonth(),s.d=n.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),i="Z"in s?j6(L6(s.y,0,1)).getUTCDay():N6(L6(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(i+5)%7:s.w+7*s.U-(i+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,j6(s)):N6(s)}}function T(e,t,r,n){for(var i,s,a=0,o=t.length,l=r.length;a<o;){if(n>=l)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(s=x[i in B6?t.charAt(a++):i])||(n=s(e,r,n))<0)return-1}else if(i!=r.charCodeAt(n++))return-1}return n}return b.x=S(r,b),b.X=S(n,b),b.c=S(t,b),w.x=S(r,w),w.X=S(n,w),w.c=S(t,w),{format:function(e){var t=S(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=E(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=S(e+="",w);return t.toString=function(){return e},t},utcParse:function(e){var t=E(e+="",!0);return t.toString=function(){return e},t}}}(e),F6=M6.format,M6.parse,U6=M6.utcFormat,M6.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const d9=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:s5,scaleDiverging:function e(){var t=A8(c9()(n8));return t.copy=function(){return o9(t,e())},r5.apply(t,arguments)},scaleDivergingLog:function e(){var t=N8(c9()).domain([.1,1,10]);return t.copy=function(){return o9(t,e()).base(t.base())},r5.apply(t,arguments)},scaleDivergingPow:u9,scaleDivergingSqrt:function(){return u9.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function e(){var t=M8(c9());return t.copy=function(){return o9(t,e()).constant(t.constant())},r5.apply(t,arguments)},scaleIdentity:function e(t){var r;function n(e){return null==e||isNaN(e=+e)?r:e}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,t8),n):t.slice()},n.unknown=function(e){return arguments.length?(r=e,n):r},n.copy=function(){return e(t).unknown(r)},t=arguments.length?Array.from(t,t8):[0,1],A8(n)},scaleImplicit:n5,scaleLinear:function e(){var t=c8();return t.copy=function(){return o8(t,e())},t5.apply(t,arguments),A8(t)},scaleLog:function e(){const t=N8(l8()).domain([1,10]);return t.copy=()=>o8(t,e()).base(t.base()),t5.apply(t,arguments),t},scaleOrdinal:i5,scalePoint:function(){return a5(s5.apply(null,arguments).paddingInner(1))},scalePow:z8,scaleQuantile:function e(){var t,r=[],n=[],i=[];function s(){var e=0,t=Math.max(1,n.length);for(i=new Array(t-1);++e<t;)i[e-1]=e5(r,e/t);return a}function a(e){return null==e||isNaN(e=+e)?t:n[F4(i,e)]}return a.invertExtent=function(e){var t=n.indexOf(e);return t<0?[NaN,NaN]:[t>0?i[t-1]:r[0],t<i.length?i[t]:r[r.length-1]]},a.domain=function(e){if(!arguments.length)return r.slice();r=[];for(let t of e)null==t||isNaN(t=+t)||r.push(t);return r.sort(I4),s()},a.range=function(e){return arguments.length?(n=Array.from(e),s()):n.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return i.slice()},a.copy=function(){return e().domain(r).range(n).unknown(t)},t5.apply(a,arguments)},scaleQuantize:function e(){var t,r=0,n=1,i=1,s=[.5],a=[0,1];function o(e){return null!=e&&e<=e?a[F4(s,e,0,i)]:t}function l(){var e=-1;for(s=new Array(i);++e<i;)s[e]=((e+1)*n-(e-i)*r)/(i+1);return o}return o.domain=function(e){return arguments.length?([r,n]=e,r=+r,n=+n,l()):[r,n]},o.range=function(e){return arguments.length?(i=(a=Array.from(e)).length-1,l()):a.slice()},o.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:t<1?[r,s[0]]:t>=i?[s[i-1],n]:[s[t-1],s[t]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return s.slice()},o.copy=function(){return e().domain([r,n]).range(a).unknown(t)},t5.apply(A8(o),arguments)},scaleRadial:function e(){var t,r=c8(),n=[0,1],i=!1;function s(e){var n=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(r(e));return isNaN(n)?t:i?Math.round(n):n}return s.invert=function(e){return r.invert(q8(e))},s.domain=function(e){return arguments.length?(r.domain(e),s):r.domain()},s.range=function(e){return arguments.length?(r.range((n=Array.from(e,t8)).map(q8)),s):n.slice()},s.rangeRound=function(e){return s.range(e).round(!0)},s.round=function(e){return arguments.length?(i=!!e,s):i},s.clamp=function(e){return arguments.length?(r.clamp(e),s):r.clamp()},s.unknown=function(e){return arguments.length?(t=e,s):t},s.copy=function(){return e(r.domain(),n).round(i).clamp(r.clamp()).unknown(t)},t5.apply(s,arguments),A8(s)},scaleSequential:function e(){var t=A8(a9()(n8));return t.copy=function(){return o9(t,e())},r5.apply(t,arguments)},scaleSequentialLog:function e(){var t=N8(a9()).domain([1,10]);return t.copy=function(){return o9(t,e()).base(t.base())},r5.apply(t,arguments)},scaleSequentialPow:l9,scaleSequentialQuantile:function e(){var t=[],r=n8;function n(e){if(null!=e&&!isNaN(e=+e))return r((F4(t,e,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(I4),n},n.interpolator=function(e){return arguments.length?(r=e,n):r},n.range=function(){return t.map(((e,n)=>r(n/(t.length-1))))},n.quantiles=function(e){return Array.from({length:e+1},((r,n)=>function(e,t,r){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let r of e)null!=r&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(n=+n)>=n&&(yield n)}}(e,r)),(n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return X4(e);if(t>=1)return Y4(e);var n,i=(n-1)*t,s=Math.floor(i),a=Y4(J4(e,s).subarray(0,s+1));return a+(X4(e.subarray(s+1))-a)*(i-s)}}(t,n/e)))},n.copy=function(){return e(r).domain(t)},r5.apply(n,arguments)},scaleSequentialSqrt:function(){return l9.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function e(){var t=M8(a9());return t.copy=function(){return o9(t,e()).constant(t.constant())},r5.apply(t,arguments)},scaleSqrt:function(){return z8.apply(null,arguments).exponent(.5)},scaleSymlog:function e(){var t=M8(l8());return t.copy=function(){return o8(t,e()).constant(t.constant())},t5.apply(t,arguments)},scaleThreshold:function e(){var t,r=[.5],n=[0,1],i=1;function s(e){return null!=e&&e<=e?n[F4(r,e,0,i)]:t}return s.domain=function(e){return arguments.length?(r=Array.from(e),i=Math.min(r.length,n.length-1),s):r.slice()},s.range=function(e){return arguments.length?(n=Array.from(e),i=Math.min(r.length,n.length-1),s):n.slice()},s.invertExtent=function(e){var t=n.indexOf(e);return[r[t-1],r[t]]},s.unknown=function(e){return arguments.length?(t=e,s):t},s.copy=function(){return e().domain(r).range(n).unknown(t)},t5.apply(s,arguments)},scaleTime:function(){return t5.apply(s9(I6,O6,_6,k6,u6,a6,i6,r6,t6,F6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return t5.apply(s9(D6,R6,C6,A6,v6,o6,s6,n6,t6,U6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},tickFormat:k8},Symbol.toStringTag,{value:"Module"}));var h9=e=>e.chartData,f9=QJ([h9],(e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}})),p9=(e,t,r,n)=>n?f9(e):h9(e);function g9(e){if(Array.isArray(e)&&2===e.length){var[t,r]=e;if(v2(t)&&v2(r))return!0}return!1}function m9(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function y9(e,t){if(t&&"function"!=typeof e&&Array.isArray(e)&&2===e.length){var r,n,[i,s]=e;if(v2(i))r=i;else if("function"==typeof i)return;if(v2(s))n=s;else if("function"==typeof s)return;var a=[r,n];if(g9(a))return a}}var v9,b9=1e9,w9=!0,x9="[DecimalError] ",S9=x9+"Invalid argument: ",E9=x9+"Exponent out of range: ",T9=Math.floor,k9=Math.pow,A9=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,_9=1e7,C9=9007199254740991,P9=T9(1286742750677284.5),D9={};function R9(e,t){var r,n,i,s,a,o,l,c,u=e.constructor,d=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),w9?$9(t,d):t;if(l=e.d,c=t.d,a=e.e,i=t.e,l=l.slice(),s=a-i){for(s<0?(n=l,s=-s,o=c.length):(n=c,i=a,o=l.length),s>(o=(a=Math.ceil(d/7))>o?a+1:o+1)&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for((o=l.length)-(s=c.length)<0&&(s=o,n=c,c=l,l=n),r=0;s;)r=(l[--s]=l[s]+c[s]+r)/_9|0,l[s]%=_9;for(r&&(l.unshift(r),++i),o=l.length;0==l[--o];)l.pop();return t.d=l,t.e=i,w9?$9(t,d):t}function I9(e,t,r){if(e!==~~e||e<t||e>r)throw Error(S9+e)}function O9(e){var t,r,n,i=e.length-1,s="",a=e[0];if(i>0){for(s+=a,t=1;t<i;t++)(r=7-(n=e[t]+"").length)&&(s+=F9(r)),s+=n;(r=7-(n=(a=e[t])+"").length)&&(s+=F9(r))}else if(0===a)return"0";for(;a%10==0;)a/=10;return s+a}D9.absoluteValue=D9.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},D9.comparedTo=D9.cmp=function(e){var t,r,n,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(t=0,r=(n=s.d.length)<(i=e.d.length)?n:i;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1},D9.decimalPlaces=D9.dp=function(){var e=this,t=e.d.length-1,r=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},D9.dividedBy=D9.div=function(e){return N9(this,new this.constructor(e))},D9.dividedToIntegerBy=D9.idiv=function(e){var t=this.constructor;return $9(N9(this,new t(e),0,1),t.precision)},D9.equals=D9.eq=function(e){return!this.cmp(e)},D9.exponent=function(){return L9(this)},D9.greaterThan=D9.gt=function(e){return this.cmp(e)>0},D9.greaterThanOrEqualTo=D9.gte=function(e){return this.cmp(e)>=0},D9.isInteger=D9.isint=function(){return this.e>this.d.length-2},D9.isNegative=D9.isneg=function(){return this.s<0},D9.isPositive=D9.ispos=function(){return this.s>0},D9.isZero=function(){return 0===this.s},D9.lessThan=D9.lt=function(e){return this.cmp(e)<0},D9.lessThanOrEqualTo=D9.lte=function(e){return this.cmp(e)<1},D9.logarithm=D9.log=function(e){var t,r=this,n=r.constructor,i=n.precision,s=i+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(v9))throw Error(x9+"NaN");if(r.s<1)throw Error(x9+(r.s?"NaN":"-Infinity"));return r.eq(v9)?new n(0):(w9=!1,t=N9(U9(r,s),U9(e,s),s),w9=!0,$9(t,i))},D9.minus=D9.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?z9(t,e):R9(t,(e.s=-e.s,e))},D9.modulo=D9.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(!(e=new n(e)).s)throw Error(x9+"NaN");return r.s?(w9=!1,t=N9(r,e,0,1).times(e),w9=!0,r.minus(t)):$9(new n(r),i)},D9.naturalExponential=D9.exp=function(){return j9(this)},D9.naturalLogarithm=D9.ln=function(){return U9(this)},D9.negated=D9.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},D9.plus=D9.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?R9(t,e):z9(t,(e.s=-e.s,e))},D9.precision=D9.sd=function(e){var t,r,n,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(S9+e);if(t=L9(i)+1,r=7*(n=i.d.length-1)+1,n=i.d[n]){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},D9.squareRoot=D9.sqrt=function(){var e,t,r,n,i,s,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(x9+"NaN")}for(e=L9(o),w9=!1,0==(i=Math.sqrt(+o))||i==1/0?(((t=O9(o.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=T9((e+1)/2)-(e<0||e%2),n=new l(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new l(i.toString()),i=a=(r=l.precision)+3;;)if(n=(s=n).plus(N9(o,s,a+2)).times(.5),O9(s.d).slice(0,a)===(t=O9(n.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&"4999"==t){if($9(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if("9999"!=t)break;a+=4}return w9=!0,$9(n,r)},D9.times=D9.mul=function(e){var t,r,n,i,s,a,o,l,c,u=this,d=u.constructor,h=u.d,f=(e=new d(e)).d;if(!u.s||!e.s)return new d(0);for(e.s*=u.s,r=u.e+e.e,(l=h.length)<(c=f.length)&&(s=h,h=f,f=s,a=l,l=c,c=a),s=[],n=a=l+c;n--;)s.push(0);for(n=c;--n>=0;){for(t=0,i=l+n;i>n;)o=s[i]+f[n]*h[i-n-1]+t,s[i--]=o%_9|0,t=o/_9|0;s[i]=(s[i]+t)%_9|0}for(;!s[--a];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,w9?$9(e,d.precision):e},D9.toDecimalPlaces=D9.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(I9(e,0,b9),void 0===t?t=n.rounding:I9(t,0,8),$9(r,e+L9(r)+1,t))},D9.toExponential=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=q9(n,!0):(I9(e,0,b9),void 0===t?t=i.rounding:I9(t,0,8),r=q9(n=$9(new i(n),e+1,t),!0,e+1)),r},D9.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return void 0===e?q9(i):(I9(e,0,b9),void 0===t?t=s.rounding:I9(t,0,8),r=q9((n=$9(new s(i),e+L9(i)+1,t)).abs(),!1,e+L9(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)},D9.toInteger=D9.toint=function(){var e=this,t=e.constructor;return $9(new t(e),L9(e)+1,t.rounding)},D9.toNumber=function(){return+this},D9.toPower=D9.pow=function(e){var t,r,n,i,s,a,o=this,l=o.constructor,c=+(e=new l(e));if(!e.s)return new l(v9);if(!(o=new l(o)).s){if(e.s<1)throw Error(x9+"Infinity");return o}if(o.eq(v9))return o;if(n=l.precision,e.eq(v9))return $9(o,n);if(a=(t=e.e)>=(r=e.d.length-1),s=o.s,a){if((r=c<0?-c:c)<=C9){for(i=new l(v9),t=Math.ceil(n/7+4),w9=!1;r%2&&V9((i=i.times(o)).d,t),0!==(r=T9(r/2));)V9((o=o.times(o)).d,t);return w9=!0,e.s<0?new l(v9).div(i):$9(i,n)}}else if(s<0)throw Error(x9+"NaN");return s=s<0&&1&e.d[Math.max(t,r)]?-1:1,o.s=1,w9=!1,i=e.times(U9(o,n+12)),w9=!0,(i=j9(i)).s=s,i},D9.toPrecision=function(e,t){var r,n,i=this,s=i.constructor;return void 0===e?n=q9(i,(r=L9(i))<=s.toExpNeg||r>=s.toExpPos):(I9(e,1,b9),void 0===t?t=s.rounding:I9(t,0,8),n=q9(i=$9(new s(i),e,t),e<=(r=L9(i))||r<=s.toExpNeg,e)),n},D9.toSignificantDigits=D9.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(I9(e,1,b9),void 0===t?t=r.rounding:I9(t,0,8)),$9(new r(this),e,t)},D9.toString=D9.valueOf=D9.val=D9.toJSON=D9[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=L9(e),r=e.constructor;return q9(e,t<=r.toExpNeg||t>=r.toExpPos)};var N9=function(){function e(e,t){var r,n=0,i=e.length;for(e=e.slice();i--;)r=e[i]*t+n,e[i]=r%_9|0,n=r/_9|0;return n&&e.unshift(n),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*_9+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,i,s,a){var o,l,c,u,d,h,f,p,g,m,y,v,b,w,x,S,E,T,k=n.constructor,A=n.s==i.s?1:-1,_=n.d,C=i.d;if(!n.s)return new k(n);if(!i.s)throw Error(x9+"Division by zero");for(l=n.e-i.e,E=C.length,x=_.length,p=(f=new k(A)).d=[],c=0;C[c]==(_[c]||0);)++c;if(C[c]>(_[c]||0)&&--l,(v=null==s?s=k.precision:a?s+(L9(n)-L9(i))+1:s)<0)return new k(0);if(v=v/7+2|0,c=0,1==E)for(u=0,C=C[0],v++;(c<x||u)&&v--;c++)b=u*_9+(_[c]||0),p[c]=b/C|0,u=b%C|0;else{for((u=_9/(C[0]+1)|0)>1&&(C=e(C,u),_=e(_,u),E=C.length,x=_.length),w=E,m=(g=_.slice(0,E)).length;m<E;)g[m++]=0;(T=C.slice()).unshift(0),S=C[0],C[1]>=_9/2&&++S;do{u=0,(o=t(C,g,E,m))<0?(y=g[0],E!=m&&(y=y*_9+(g[1]||0)),(u=y/S|0)>1?(u>=_9&&(u=_9-1),1==(o=t(d=e(C,u),g,h=d.length,m=g.length))&&(u--,r(d,E<h?T:C,h))):(0==u&&(o=u=1),d=C.slice()),(h=d.length)<m&&d.unshift(0),r(g,d,m),-1==o&&(o=t(C,g,E,m=g.length))<1&&(u++,r(g,E<m?T:C,m)),m=g.length):0===o&&(u++,g=[0]),p[c++]=u,o&&g[0]?g[m++]=_[w]||0:(g=[_[w]],m=1)}while((w++<x||void 0!==g[0])&&v--)}return p[0]||p.shift(),f.e=l,$9(f,a?s+L9(f)+1:s)}}();function j9(e,t){var r,n,i,s,a,o=0,l=0,c=e.constructor,u=c.precision;if(L9(e)>16)throw Error(E9+L9(e));if(!e.s)return new c(v9);for(null==t?(w9=!1,a=u):a=t,s=new c(.03125);e.abs().gte(.1);)e=e.times(s),l+=5;for(a+=Math.log(k9(2,l))/Math.LN10*2+5|0,r=n=i=new c(v9),c.precision=a;;){if(n=$9(n.times(e),a),r=r.times(++o),O9((s=i.plus(N9(n,r,a))).d).slice(0,a)===O9(i.d).slice(0,a)){for(;l--;)i=$9(i.times(i),a);return c.precision=u,null==t?(w9=!0,$9(i,u)):i}i=s}}function L9(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function M9(e,t,r){if(t>e.LN10.sd())throw w9=!0,r&&(e.precision=r),Error(x9+"LN10 precision limit exceeded");return $9(new e(e.LN10),t)}function F9(e){for(var t="";e--;)t+="0";return t}function U9(e,t){var r,n,i,s,a,o,l,c,u,d=1,h=e,f=h.d,p=h.constructor,g=p.precision;if(h.s<1)throw Error(x9+(h.s?"NaN":"-Infinity"));if(h.eq(v9))return new p(0);if(null==t?(w9=!1,c=g):c=t,h.eq(10))return null==t&&(w9=!0),M9(p,c);if(c+=10,p.precision=c,n=(r=O9(f)).charAt(0),s=L9(h),!(Math.abs(s)<15e14))return l=M9(p,c+2,g).times(s+""),h=U9(new p(n+"."+r.slice(1)),c-10).plus(l),p.precision=g,null==t?(w9=!0,$9(h,g)):h;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=O9((h=h.times(e)).d)).charAt(0),d++;for(s=L9(h),n>1?(h=new p("0."+r),s++):h=new p(n+"."+r.slice(1)),o=a=h=N9(h.minus(v9),h.plus(v9),c),u=$9(h.times(h),c),i=3;;){if(a=$9(a.times(u),c),O9((l=o.plus(N9(a,new p(i),c))).d).slice(0,c)===O9(o.d).slice(0,c))return o=o.times(2),0!==s&&(o=o.plus(M9(p,c+2,g).times(s+""))),o=N9(o,new p(d),c),p.precision=g,null==t?(w9=!0,$9(o,g)):o;o=l,i+=2}}function B9(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(n,i)){if(i-=n,r=r-n-1,e.e=T9(r/7),e.d=[],n=(r+1)%7,r<0&&(n+=7),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=7;n<i;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),w9&&(e.e>P9||e.e<-P9))throw Error(E9+r)}else e.s=0,e.e=0,e.d=[0];return e}function $9(e,t,r){var n,i,s,a,o,l,c,u,d=e.d;for(a=1,s=d[0];s>=10;s/=10)a++;if((n=t-a)<0)n+=7,i=t,c=d[u=0];else{if((u=Math.ceil((n+1)/7))>=(s=d.length))return e;for(c=s=d[u],a=1;s>=10;s/=10)a++;i=(n%=7)-7+a}if(void 0!==r&&(o=c/(s=k9(10,a-i-1))%10|0,l=t<0||void 0!==d[u+1]||c%s,l=r<4?(o||l)&&(0==r||r==(e.s<0?3:2)):o>5||5==o&&(4==r||l||6==r&&(n>0?i>0?c/k9(10,a-i):0:d[u-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return l?(s=L9(e),d.length=1,t=t-s-1,d[0]=k9(10,(7-t%7)%7),e.e=T9(-t/7)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(0==n?(d.length=u,s=1,u--):(d.length=u+1,s=k9(10,7-n),d[u]=i>0?(c/k9(10,a-i)%k9(10,i)|0)*s:0),l)for(;;){if(0==u){(d[0]+=s)==_9&&(d[0]=1,++e.e);break}if(d[u]+=s,d[u]!=_9)break;d[u--]=0,s=1}for(n=d.length;0===d[--n];)d.pop();if(w9&&(e.e>P9||e.e<-P9))throw Error(E9+L9(e));return e}function z9(e,t){var r,n,i,s,a,o,l,c,u,d,h=e.constructor,f=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),w9?$9(t,f):t;if(l=e.d,d=t.d,n=t.e,c=e.e,l=l.slice(),a=c-n){for((u=a<0)?(r=l,a=-a,o=d.length):(r=d,n=c,o=l.length),a>(i=Math.max(Math.ceil(f/7),o)+2)&&(a=i,r.length=1),r.reverse(),i=a;i--;)r.push(0);r.reverse()}else{for((u=(i=l.length)<(o=d.length))&&(o=i),i=0;i<o;i++)if(l[i]!=d[i]){u=l[i]<d[i];break}a=0}for(u&&(r=l,l=d,d=r,t.s=-t.s),o=l.length,i=d.length-o;i>0;--i)l[o++]=0;for(i=d.length;i>a;){if(l[--i]<d[i]){for(s=i;s&&0===l[--s];)l[s]=_9-1;--l[s],l[i]+=_9}l[i]-=d[i]}for(;0===l[--o];)l.pop();for(;0===l[0];l.shift())--n;return l[0]?(t.d=l,t.e=n,w9?$9(t,f):t):new h(0)}function q9(e,t,r){var n,i=L9(e),s=O9(e.d),a=s.length;return t?(r&&(n=r-a)>0?s=s.charAt(0)+"."+s.slice(1)+F9(n):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+F9(-i-1)+s,r&&(n=r-a)>0&&(s+=F9(n))):i>=a?(s+=F9(i+1-a),r&&(n=r-i-1)>0&&(s=s+"."+F9(n))):((n=i+1)<a&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(s+="."),s+=F9(n))),e.s<0?"-"+s:s}function V9(e,t){if(e.length>t)return e.length=t,!0}function K9(e){if(!e||"object"!=typeof e)throw Error(x9+"Object expected");var t,r,n,i=["precision",1,b9,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(n=e[r=i[t]])){if(!(T9(n)===n&&n>=i[t+1]&&n<=i[t+2]))throw Error(S9+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(S9+r+": "+n);this[r]=new this(n)}return this}var H9=function e(t){var r,n,i;function s(e){var t=this;if(!(t instanceof s))return new s(e);if(t.constructor=s,e instanceof s)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(S9+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):B9(t,e.toString())}if("string"!=typeof e)throw Error(S9+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!A9.test(e))throw Error(S9+e);B9(t,e)}if(s.prototype=D9,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=e,s.config=s.set=K9,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<i.length;)t.hasOwnProperty(n=i[r++])||(t[n]=this[n]);return s.config(t),s}({precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"});v9=new H9(1);const G9=H9;var W9=e=>e,Q9={"@@functional/placeholder":!0},Y9=e=>e===Q9,X9=e=>function t(){return 0===arguments.length||1===arguments.length&&Y9(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},J9=(e,t)=>1===e?t:X9((function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=n.filter((e=>e!==Q9)).length;return s>=e?t(...n):J9(e-s,X9((function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var s=n.map((e=>Y9(e)?r.shift():e));return t(...s,...r)})))})),Z9=e=>J9(e.length,e),eee=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},tee=Z9(((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map((e=>t[e])).map(e))),ree=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),nee=e=>{var t=null,r=null;return function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return t&&i.every(((e,r)=>{var n;return e===(null===(n=t)||void 0===n?void 0:n[r])}))?r:(t=i,r=e(...i))}};function iee(e){return 0===e?1:Math.floor(new G9(e).abs().log(10).toNumber())+1}function see(e,t,r){for(var n=new G9(e),i=0,s=[];n.lt(t)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}Z9(((e,t,r)=>{var n=+e;return n+r*(+t-n)})),Z9(((e,t,r)=>{var n=t-+e;return(r-e)/(n=n||1/0)})),Z9(((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))}));var aee=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},oee=(e,t,r)=>{if(e.lte(0))return new G9(0);var n=iee(e.toNumber()),i=new G9(10).pow(n),s=e.div(i),a=1!==n?.05:.1,o=new G9(Math.ceil(s.div(a).toNumber())).add(r).mul(a).mul(i);return new G9(t?o.toNumber():Math.ceil(o.toNumber()))},lee=(e,t,r)=>{var n=new G9(1),i=new G9(e);if(!i.isint()&&r){var s=Math.abs(e);s<1?(n=new G9(10).pow(iee(e)-1),i=new G9(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new G9(Math.floor(e)))}else 0===e?i=new G9(Math.floor((t-1)/2)):r||(i=new G9(Math.floor(e)));var a=Math.floor((t-1)/2),o=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return W9;var n=t.reverse(),i=n[0],s=n.slice(1);return function(){return s.reduce(((e,t)=>t(e)),i(...arguments))}}(tee((e=>i.add(new G9(e-a).mul(n)).toNumber())),eee);return o(0,t)},cee=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new G9(0),tickMin:new G9(0),tickMax:new G9(0)};var s,a=oee(new G9(t).sub(e).div(r-1),n,i);s=e<=0&&t>=0?new G9(0):(s=new G9(e).add(t).div(2)).sub(new G9(s).mod(a));var o=Math.ceil(s.sub(e).div(a).toNumber()),l=Math.ceil(new G9(t).sub(s).div(a).toNumber()),c=o+l+1;return c>r?cee(e,t,r,n,i+1):(c<r&&(l=t>0?l+(r-c):l,o=t>0?o:o+(r-c)),{step:a,tickMin:s.sub(new G9(o).mul(a)),tickMax:s.add(new G9(l).mul(a))})};var uee=nee((function(e){var[t,r]=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Math.max(n,2),[a,o]=aee([t,r]);if(a===-1/0||o===1/0){var l=o===1/0?[a,...eee(0,n-1).map((()=>1/0))]:[...eee(0,n-1).map((()=>-1/0)),o];return t>r?ree(l):l}if(a===o)return lee(a,n,i);var{step:c,tickMin:u,tickMax:d}=cee(a,o,s,i,0),h=see(u,d.add(new G9(.1).mul(c)),c);return t>r?ree(h):h})),dee=nee((function(e,t){var[r,n]=e,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[s,a]=aee([r,n]);if(s===-1/0||a===1/0)return[r,n];if(s===a)return[s];var o=Math.max(t,2),l=oee(new G9(a).sub(s).div(o-1),i,0),c=[...see(new G9(s),new G9(a),l),a];return!1===i&&(c=c.map((e=>Math.round(e)))),r>n?ree(c):c})),hee=e=>e.rootProps.maxBarSize,fee=e=>e.rootProps.barCategoryGap,pee=e=>e.rootProps.stackOffset,gee=e=>e.options.chartName,mee=e=>e.rootProps.syncId,yee=e=>e.rootProps.syncMethod,vee=e=>e.options.eventEmitter,bee=0,wee="auto",xee=!0,See=!1,Eee=!0,Tee=0,kee="auto",Aee=!0,_ee=5,Cee=(e,t)=>{if(e&&t)return null!=e&&e.reversed?[t[1],t[0]]:t},Pee={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:bee,includeHidden:!1,name:void 0,reversed:!1,scale:wee,tick:xee,tickCount:void 0,ticks:void 0,type:"category",unit:void 0},Dee={allowDataOverflow:See,allowDecimals:!1,allowDuplicatedCategory:Eee,dataKey:void 0,domain:void 0,id:Tee,includeHidden:!1,name:void 0,reversed:!1,scale:kee,tick:Aee,tickCount:_ee,ticks:void 0,type:"number",unit:void 0},Ree={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,dataKey:void 0,domain:void 0,id:bee,includeHidden:!1,name:void 0,reversed:!1,scale:wee,tick:xee,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Iee={allowDataOverflow:See,allowDecimals:!1,allowDuplicatedCategory:Eee,dataKey:void 0,domain:void 0,id:Tee,includeHidden:!1,name:void 0,reversed:!1,scale:kee,tick:Aee,tickCount:_ee,ticks:void 0,type:"category",unit:void 0},Oee=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?Ree:Pee,Nee=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?Iee:Dee,jee=e=>e.polarOptions,Lee=QJ([q1,V1,e2],w1),Mee=QJ([jee,Lee],((e,t)=>{if(null!=e)return bX(e.innerRadius,t,0)})),Fee=QJ([jee,Lee],((e,t)=>{if(null!=e)return bX(e.outerRadius,t,.8*t)})),Uee=QJ([jee],(e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]}));QJ([Oee,Uee],Cee);var Bee=QJ([Lee,Mee,Fee],((e,t,r)=>{if(null!=e&&null!=t&&null!=r)return[t,r]}));QJ([Nee,Bee],Cee);var $ee=QJ([N2,jee,Mee,Fee,q1,V1],((e,t,r,n,i,s)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=r&&null!=n){var{cx:a,cy:o,startAngle:l,endAngle:c}=t;return{cx:bX(a,i,i/2),cy:bX(o,s,s/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}})),zee=(e,t)=>t,qee=(e,t,r)=>r;function Vee(e){return null==e?void 0:e.id}var Kee=e=>{var t=N2(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},Hee=e=>e.tooltip.settings.axisId,Gee=e=>{var t=Kee(e),r=Hee(e);return hte(e,t,r)},Wee=QJ([Gee],(e=>null==e?void 0:e.dataKey));function Qee(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=r,a=new Map;return e.forEach((e=>{var t,r=null!==(t=e.data)&&void 0!==t?t:n;if(null!=r&&0!==r.length){var o=Vee(e);r.forEach(((t,r)=>{var n,l=null==s||i?r:String(C1(t,s,null)),c=C1(t,e.dataKey,0);n=a.has(l)?a.get(l):{},Object.assign(n,{[o]:c}),a.set(l,n)}))}})),Array.from(a.values())}function Yee(e){return null!=e.stackId&&null!=e.dataKey}var Xee=(e,t)=>e===t||null!=e&&null!=t&&(e[0]===t[0]&&e[1]===t[1]);function Jee(e,t){return!(!Array.isArray(e)||!Array.isArray(t)||0!==e.length||0!==t.length)||e===t}function Zee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ete(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zee(Object(r),!0).forEach((function(t){tte(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tte(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rte=[0,"auto"],nte={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},ite=(e,t)=>e.cartesianAxis.xAxis[t],ste=(e,t)=>{var r=ite(e,t);return null==r?nte:r},ate={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:rte,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},ote=(e,t)=>e.cartesianAxis.yAxis[t],lte=(e,t)=>{var r=ote(e,t);return null==r?ate:r},cte={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},ute=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return null==r?cte:r},dte=(e,t,r)=>{switch(t){case"xAxis":return ste(e,r);case"yAxis":return lte(e,r);case"zAxis":return ute(e,r);case"angleAxis":return Oee(e,r);case"radiusAxis":return Nee(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},hte=(e,t,r)=>{switch(t){case"xAxis":return ste(e,r);case"yAxis":return lte(e,r);case"angleAxis":return Oee(e,r);case"radiusAxis":return Nee(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},fte=e=>e.graphicalItems.cartesianItems.some((e=>"bar"===e.type))||e.graphicalItems.polarItems.some((e=>"radialBar"===e.type));function pte(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var gte=e=>e.graphicalItems.cartesianItems,mte=QJ([zee,qee],pte),yte=(e,t,r)=>e.filter(r).filter((e=>!0===(null==t?void 0:t.includeHidden)||!e.hide)),vte=QJ([gte,dte,mte],yte,{memoizeOptions:{resultEqualityCheck:Jee}}),bte=QJ([vte],(e=>e.filter((e=>"area"===e.type||"bar"===e.type)).filter(Yee))),wte=e=>e.filter((e=>!("stackId"in e)||void 0===e.stackId)),xte=QJ([vte],wte),Ste=e=>e.map((e=>e.data)).filter(Boolean).flat(1),Ete=QJ([vte],Ste,{memoizeOptions:{resultEqualityCheck:Jee}}),Tte=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},kte=QJ([Ete,p9],Tte),Ate=(e,t,r)=>null!=(null==t?void 0:t.dataKey)?e.map((e=>({value:C1(e,t.dataKey)}))):r.length>0?r.map((e=>e.dataKey)).flatMap((t=>e.map((e=>({value:C1(e,t)}))))):e.map((e=>({value:e}))),_te=QJ([kte,dte,vte],Ate);function Cte(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function Pte(e){if(mX(e)||e instanceof Date){var t=Number(e);if(v2(t))return t}}function Dte(e){if(Array.isArray(e)){var t=[Pte(e[0]),Pte(e[1])];return g9(t)?t:void 0}var r=Pte(e);if(null!=r)return[r,r]}function Rte(e){return e.map(Pte).filter(M3)}var Ite=QJ([bte,p9,Gee],Qee),Ote=(e,t,r)=>{var n=t.reduce(((e,t)=>(null==t.stackId||(null==e[t.stackId]&&(e[t.stackId]=[]),e[t.stackId].push(t)),e)),{});return Object.fromEntries(Object.entries(n).map((t=>{var[n,i]=t,s=i.map(Vee);return[n,{stackedData:N1(e,s,r),graphicalItems:i}]})))},Nte=QJ([Ite,bte,pee],Ote),jte=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:s}=t;if(null==n&&"zAxis"!==r){var a=M1(e,i,s);if(null==a||0!==a[0]||0!==a[1])return a}},Lte=QJ([dte],(e=>e.allowDataOverflow)),Mte=e=>{var t;if(null==e||!("domain"in e))return rte;if(null!=e.domain)return e.domain;if(null!=e.ticks){if("number"===e.type){var r=Rte(e.ticks);return[Math.min(...r),Math.max(...r)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null==e?void 0:e.domain)&&void 0!==t?t:rte},Fte=QJ([dte],Mte),Ute=QJ([Fte,Lte],y9),Bte=QJ([Nte,h9,zee,Ute],jte,{memoizeOptions:{resultEqualityCheck:Xee}}),$te=e=>e.errorBars,zte=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.filter(Boolean);if(0!==n.length){var i=n.flat();return[Math.min(...i),Math.max(...i)]}},qte=(e,t,r,n,i)=>{var s,a;if(r.length>0&&e.forEach((e=>{r.forEach((r=>{var o,l,c=null===(o=n[r.id])||void 0===o?void 0:o.filter((e=>Cte(i,e))),u=C1(e,null!==(l=t.dataKey)&&void 0!==l?l:r.dataKey),d=function(e,t,r){return!r||"number"!=typeof t||fX(t)?[]:r.length?Rte(r.flatMap((r=>{var n,i,s=C1(e,r.dataKey);if(Array.isArray(s)?[n,i]=s:n=i=s,v2(n)&&v2(i))return[t-n,t+i]}))):[]}(e,u,c);if(d.length>=2){var h=Math.min(...d),f=Math.max(...d);(null==s||h<s)&&(s=h),(null==a||f>a)&&(a=f)}var p=Dte(u);null!=p&&(s=null==s?p[0]:Math.min(s,p[0]),a=null==a?p[1]:Math.max(a,p[1]))}))})),null!=(null==t?void 0:t.dataKey)&&e.forEach((e=>{var r=Dte(C1(e,t.dataKey));null!=r&&(s=null==s?r[0]:Math.min(s,r[0]),a=null==a?r[1]:Math.max(a,r[1]))})),v2(s)&&v2(a))return[s,a]},Vte=QJ([kte,dte,xte,$te,zee],qte,{memoizeOptions:{resultEqualityCheck:Xee}});function Kte(e){var{value:t}=e;if(mX(t)||t instanceof Date)return t}var Hte=e=>e.referenceElements.dots,Gte=(e,t,r)=>e.filter((e=>"extendDomain"===e.ifOverflow)).filter((e=>"xAxis"===t?e.xAxisId===r:e.yAxisId===r)),Wte=QJ([Hte,zee,qee],Gte),Qte=e=>e.referenceElements.areas,Yte=QJ([Qte,zee,qee],Gte),Xte=e=>e.referenceElements.lines,Jte=QJ([Xte,zee,qee],Gte),Zte=(e,t)=>{var r=Rte(e.map((e=>"xAxis"===t?e.x:e.y)));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},ere=QJ(Wte,zee,Zte),tre=(e,t)=>{var r=Rte(e.flatMap((e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2])));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},rre=QJ([Yte,zee],tre),nre=(e,t)=>{var r=Rte(e.map((e=>"xAxis"===t?e.x:e.y)));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},ire=QJ(Jte,zee,nre),sre=QJ(ere,ire,rre,((e,t,r)=>zte(e,r,t))),are=(e,t,r,n,i,s,a,o)=>null!=r?r:function(e,t,r){if(r||null!=t){if("function"==typeof e&&null!=t)try{var n=e(t,r);if(g9(n))return m9(n,t,r)}catch(f){}if(Array.isArray(e)&&2===e.length){var i,s,[a,o]=e;if("auto"===a)null!=t&&(i=Math.min(...t));else if(gX(a))i=a;else if("function"==typeof a)try{null!=t&&(i=a(null==t?void 0:t[0]))}catch(p){}else if("string"==typeof a&&F1.test(a)){var l=F1.exec(a);if(null==l||null==t)i=void 0;else{var c=+l[1];i=t[0]-c}}else i=null==t?void 0:t[0];if("auto"===o)null!=t&&(s=Math.max(...t));else if(gX(o))s=o;else if("function"==typeof o)try{null!=t&&(s=o(null==t?void 0:t[1]))}catch(g){}else if("string"==typeof o&&U1.test(o)){var u=U1.exec(o);if(null==u||null==t)s=void 0;else{var d=+u[1];s=t[1]+d}}else s=null==t?void 0:t[1];var h=[i,s];if(g9(h))return null==t?h:m9(h,t,r)}}}(t,"vertical"===a&&"xAxis"===o||"horizontal"===a&&"yAxis"===o?zte(n,s,i):zte(s,i),e.allowDataOverflow),ore=QJ([dte,Fte,Ute,Bte,Vte,sre,N2,zee],are,{memoizeOptions:{resultEqualityCheck:Xee}}),lre=[0,1],cre=(e,t,r,n,i,s,a)=>{if(null!=e&&null!=r&&0!==r.length||void 0!==a){var{dataKey:o,type:l}=e,c=P1(t,s);return c&&null==o?R4(0,r.length):"category"===l?((e,t,r)=>{var n=e.map(Kte).filter((e=>null!=e));return r&&(null==t.dataKey||t.allowDuplicatedCategory&&wX(n))?R4(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))})(n,e,c):"expand"===i?lre:a}},ure=QJ([dte,N2,kte,_te,pee,zee,ore],cre),dre=(e,t,r,n,i)=>{if(null!=e){var{scale:s,type:a}=e;if("auto"===s)return"radial"===t&&"radiusAxis"===i?"band":"radial"===t&&"angleAxis"===i?"linear":"category"===a&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":"category"===a?"band":"linear";if("string"==typeof s){var o="scale".concat(TX(s));return o in d9?o:"point"}}},hre=QJ([dte,N2,fte,gee,zee],dre);function fre(e,t,r,n){if(null!=r&&null!=n){if("function"==typeof e.scale)return e.scale.copy().domain(r).range(n);var i=function(e){if(null!=e){if(e in d9)return d9[e]();var t="scale".concat(TX(e));return t in d9?d9[t]():void 0}}(t);if(null!=i){var s=i.domain(r).range(n);return(e=>{var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-I1,s=Math.max(n[0],n[1])+I1,a=e(t[0]),o=e(t[r-1]);(a<i||a>s||o<i||o>s)&&e.domain([t[0],t[r-1]])}})(s),s}}}var pre=(e,t,r)=>{var n=Mte(t);if("auto"===r||"linear"===r)return null!=t&&t.tickCount&&Array.isArray(n)&&("auto"===n[0]||"auto"===n[1])&&g9(e)?uee(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&g9(e)?dee(e,t.tickCount,t.allowDecimals):void 0},gre=QJ([ure,hte,hre],pre),mre=(e,t,r,n)=>{if("angleAxis"!==n&&"number"===(null==e?void 0:e.type)&&g9(t)&&Array.isArray(r)&&r.length>0){var i=t[0],s=r[0],a=t[1],o=r[r.length-1];return[Math.min(i,s),Math.max(a,o)]}return t},yre=QJ([dte,ure,gre,zee],mre),vre=QJ(_te,dte,((e,t)=>{if(t&&"number"===t.type){var r=1/0,n=Array.from(Rte(e.map((e=>e.value)))).sort(((e,t)=>e-t));if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(0===i)return 1/0;for(var s=0;s<n.length-1;s++){var a=n[s+1]-n[s];r=Math.min(r,a)}return r/i}})),bre=QJ(vre,N2,fee,e2,((e,t,r,n)=>n),((e,t,r,n,i)=>{if(!v2(e))return 0;var s="vertical"===t?n.height:n.width;if("gap"===i)return e*s/2;if("no-gap"===i){var a=bX(r,e*s),o=e*s/2;return o-a-(o-a)/s*a}return 0})),wre=QJ(ste,((e,t)=>{var r=ste(e,t);return null==r||"string"!=typeof r.padding?0:bre(e,"xAxis",t,r.padding)}),((e,t)=>{var r,n;if(null==e)return{left:0,right:0};var{padding:i}=e;return"string"==typeof i?{left:t,right:t}:{left:(null!==(r=i.left)&&void 0!==r?r:0)+t,right:(null!==(n=i.right)&&void 0!==n?n:0)+t}})),xre=QJ(lte,((e,t)=>{var r=lte(e,t);return null==r||"string"!=typeof r.padding?0:bre(e,"yAxis",t,r.padding)}),((e,t)=>{var r,n;if(null==e)return{top:0,bottom:0};var{padding:i}=e;return"string"==typeof i?{top:t,bottom:t}:{top:(null!==(r=i.top)&&void 0!==r?r:0)+t,bottom:(null!==(n=i.bottom)&&void 0!==n?n:0)+t}})),Sre=QJ([e2,wre,a2,s2,(e,t,r)=>r],((e,t,r,n,i)=>{var{padding:s}=n;return i?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]})),Ere=QJ([e2,N2,xre,a2,s2,(e,t,r)=>r],((e,t,r,n,i,s)=>{var{padding:a}=i;return s?[n.height-a.bottom,a.top]:"horizontal"===t?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]})),Tre=(e,t,r,n)=>{var i;switch(t){case"xAxis":return Sre(e,r,n);case"yAxis":return Ere(e,r,n);case"zAxis":return null===(i=ute(e,r))||void 0===i?void 0:i.range;case"angleAxis":return Uee(e);case"radiusAxis":return Bee(e,r);default:return}},kre=QJ([dte,Tre],Cee),Are=QJ([dte,hre,yre,kre],fre);function _re(e,t){return e.id<t.id?-1:e.id>t.id?1:0}QJ([vte,$te,zee],((e,t,r)=>e.flatMap((e=>t[e.id])).filter(Boolean).filter((e=>Cte(r,e)))));var Cre=(e,t)=>t,Pre=(e,t,r)=>r,Dre=QJ(G1,Cre,Pre,((e,t,r)=>e.filter((e=>e.orientation===t)).filter((e=>e.mirror===r)).sort(_re))),Rre=QJ(W1,Cre,Pre,((e,t,r)=>e.filter((e=>e.orientation===t)).filter((e=>e.mirror===r)).sort(_re))),Ire=(e,t)=>({width:e.width,height:t.height}),Ore=QJ(e2,ste,Ire),Nre=QJ(V1,e2,Dre,Cre,Pre,((e,t,r,n,i)=>{var s,a={};return r.forEach((r=>{var o=Ire(t,r);null==s&&(s=((e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}})(t,n,e));var l="top"===n&&!i||"bottom"===n&&i;a[r.id]=s-Number(l)*o.height,s+=(l?-1:1)*o.height})),a})),jre=QJ(q1,e2,Rre,Cre,Pre,((e,t,r,n,i)=>{var s,a={};return r.forEach((r=>{var o=((e,t)=>({width:"number"==typeof t.width?t.width:60,height:e.height}))(t,r);null==s&&(s=((e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}})(t,n,e));var l="left"===n&&!i||"right"===n&&i;a[r.id]=s-Number(l)*o.width,s+=(l?-1:1)*o.width})),a})),Lre=QJ([e2,ste,(e,t)=>{var r=ste(e,t);if(null!=r)return Nre(e,r.orientation,r.mirror)},(e,t)=>t],((e,t,r,n)=>{if(null!=t){var i=null==r?void 0:r[n];return null==i?{x:e.left,y:0}:{x:e.left,y:i}}})),Mre=QJ([e2,lte,(e,t)=>{var r=lte(e,t);if(null!=r)return jre(e,r.orientation,r.mirror)},(e,t)=>t],((e,t,r,n)=>{if(null!=t){var i=null==r?void 0:r[n];return null==i?{x:0,y:e.top}:{x:i,y:e.top}}})),Fre=QJ(e2,lte,((e,t)=>({width:"number"==typeof t.width?t.width:60,height:e.height}))),Ure=(e,t,r)=>{switch(t){case"xAxis":return Ore(e,r).width;case"yAxis":return Fre(e,r).height;default:return}},Bre=(e,t,r,n)=>{if(null!=r){var{allowDuplicatedCategory:i,type:s,dataKey:a}=r,o=P1(e,n),l=t.map((e=>e.value));return a&&o&&"category"===s&&i&&wX(l)?l:void 0}},$re=QJ([N2,_te,dte,zee],Bre),zre=(e,t,r,n)=>{if(null!=r&&null!=r.dataKey){var{type:i,scale:s}=r;return!P1(e,n)||"number"!==i&&"auto"===s?void 0:t.map((e=>e.value))}},qre=QJ([N2,_te,hte,zee],zre),Vre=QJ([N2,(e,t,r)=>{switch(t){case"xAxis":return ste(e,r);case"yAxis":return lte(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},hre,Are,$re,qre,Tre,gre,zee],((e,t,r,n,i,s,a,o,l)=>{if(null==t)return null;var c=P1(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:s,duplicateDomain:i,isCategorical:c,niceTicks:o,range:a,realScaleType:r,scale:n}})),Kre=QJ([N2,hte,hre,Are,gre,Tre,$re,qre,zee],((e,t,r,n,i,s,a,o,l)=>{if(null!=t&&null!=n){var c=P1(e,l),{type:u,ticks:d,tickCount:h}=t,f="scaleBand"===r&&"function"==typeof n.bandwidth?n.bandwidth()/2:2,p="category"===u&&n.bandwidth?n.bandwidth()/f:0;p="angleAxis"===l&&null!=s&&s.length>=2?2*hX(s[0]-s[1])*p:p;var g=d||i;return g?g.map(((e,t)=>{var r=a?a.indexOf(e):e;return{index:t,coordinate:n(r)+p,value:e,offset:p}})).filter((e=>!fX(e.coordinate))):c&&o?o.map(((e,t)=>({coordinate:n(e)+p,value:e,index:t,offset:p}))):n.ticks?n.ticks(h).map((e=>({coordinate:n(e)+p,value:e,offset:p}))):n.domain().map(((e,t)=>({coordinate:n(e)+p,value:a?a[e]:e,index:t,offset:p})))}})),Hre=QJ([N2,hte,Are,Tre,$re,qre,zee],((e,t,r,n,i,s,a)=>{if(null!=t&&null!=r&&null!=n&&n[0]!==n[1]){var o=P1(e,a),{tickCount:l}=t,c=0;return c="angleAxis"===a&&(null==n?void 0:n.length)>=2?2*hX(n[0]-n[1])*c:c,o&&s?s.map(((e,t)=>({coordinate:r(e)+c,value:e,index:t,offset:c}))):r.ticks?r.ticks(l).map((e=>({coordinate:r(e)+c,value:e,offset:c}))):r.domain().map(((e,t)=>({coordinate:r(e)+c,value:i?i[e]:e,index:t,offset:c})))}})),Gre=QJ(dte,Are,((e,t)=>{if(null!=e&&null!=t)return ete(ete({},e),{},{scale:t})})),Wre=QJ([dte,hre,ure,kre],fre);QJ(((e,t,r)=>ute(e,r)),Wre,((e,t)=>{if(null!=e&&null!=t)return ete(ete({},e),{},{scale:t})}));var Qre=QJ([N2,G1,W1],((e,t,r)=>{switch(e){case"horizontal":return t.some((e=>e.reversed))?"right-to-left":"left-to-right";case"vertical":return r.some((e=>e.reversed))?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}})),Yre=e=>e.options.defaultTooltipEventType,Xre=e=>e.options.validateTooltipEventTypes;function Jre(e,t,r){if(null==e)return t;var n=e?"axis":"item";return null==r?t:r.includes(n)?n:t}function Zre(e,t){return Jre(t,Yre(e),Xre(e))}var ene=(e,t)=>{var r,n=Number(t);if(!fX(n)&&null!=t)return n>=0?null==e||null===(r=e[n])||void 0===r?void 0:r.value:void 0},tne={active:!1,index:null,dataKey:void 0,coordinate:void 0},rne=_0({name:"tooltip",initialState:{itemInteraction:{click:tne,hover:tne},axisInteraction:{click:tne,hover:tne},keyboardInteraction:tne,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:y0()},removeTooltipEntrySettings:{reducer(e,t){var r=i0(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:y0()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:nne,removeTooltipEntrySettings:ine,setTooltipSettingsState:sne,setActiveMouseOverItemIndex:ane,mouseLeaveItem:one,mouseLeaveChart:lne,setActiveClickItemIndex:cne,setMouseOverAxisIndex:une,setMouseClickAxisIndex:dne,setSyncInteraction:hne,setKeyboardInteraction:fne}=rne.actions,pne=rne.reducer;function gne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gne(Object(r),!0).forEach((function(t){yne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yne(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vne=(e,t,r,n)=>{if(null==t)return tne;var i=function(e,t,r){return"axis"===t?"click"===r?e.axisInteraction.click:e.axisInteraction.hover:"click"===r?e.itemInteraction.click:e.itemInteraction.hover}(e,t,r);if(null==i)return tne;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var s=!0===e.settings.active;if(null!=i.index){if(s)return mne(mne({},i),{},{active:!0})}else if(null!=n)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return mne(mne({},tne),{},{coordinate:i.coordinate})},bne=(e,t)=>{var r=null==e?void 0:e.index;if(null==r)return null;var n=Number(r);if(!v2(n))return r;var i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(0,Math.min(n,i)))},wne=(e,t,r,n,i,s,a,o)=>{if(null!=s&&null!=o){var l=a[0],c=null==l?void 0:o(l.positions,s);if(null!=c)return c;var u=null==i?void 0:i[Number(s)];if(u)return"horizontal"===r?{x:u.coordinate,y:(n.top+t)/2}:{x:(n.left+e)/2,y:u.coordinate}}},xne=(e,t,r,n)=>{return"axis"===t?e.tooltipItemPayloads:0===e.tooltipItemPayloads.length?[]:null==(i="hover"===r?e.itemInteraction.hover.dataKey:e.itemInteraction.click.dataKey)&&null!=n?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter((e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.dataKey)===i}));var i},Sne=e=>e.options.tooltipPayloadSearcher,Ene=e=>e.tooltip;function Tne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tne(Object(r),!0).forEach((function(t){Ane(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ane(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _ne=(e,t,r,n,i,s,a)=>{if(null!=t&&null!=s){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:u}=r;return e.reduce(((e,r)=>{var d,h,f,{dataDefinedOnItem:p,settings:g}=r,m=function(e,t){return null!=e?e:t}(p,o),y=Array.isArray(m)?T1(m,c,u):m,v=null!==(d=null==g?void 0:g.dataKey)&&void 0!==d?d:n,b=null==g?void 0:g.nameKey;(h=n&&Array.isArray(y)&&!Array.isArray(y[0])&&"axis"===a?SX(y,n,i):s(y,t,l,b),Array.isArray(h))?h.forEach((t=>{var r=kne(kne({},g),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push($1({tooltipEntrySettings:r,dataKey:t.dataKey,payload:t.payload,value:C1(t.payload,t.dataKey),name:t.name}))})):e.push($1({tooltipEntrySettings:g,dataKey:v,payload:h,value:C1(h,v),name:null!==(f=C1(h,b))&&void 0!==f?f:null==g?void 0:g.name}));return e}),[])}},Cne=QJ([Gee,N2,fte,gee,Kee],dre),Pne=QJ([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],((e,t)=>[...e,...t])),Dne=QJ([Kee,Hee],pte),Rne=QJ([Pne,Gee,Dne],yte,{memoizeOptions:{resultEqualityCheck:Jee}}),Ine=QJ([Rne],(e=>e.filter(Yee))),One=QJ([Rne],Ste,{memoizeOptions:{resultEqualityCheck:Jee}}),Nne=QJ([One,h9],Tte),jne=QJ([Ine,h9,Gee],Qee),Lne=QJ([Nne,Gee,Rne],Ate),Mne=QJ([Gee],Mte),Fne=QJ([Gee],(e=>e.allowDataOverflow)),Une=QJ([Mne,Fne],y9),Bne=QJ([Rne],(e=>e.filter(Yee))),$ne=QJ([jne,Bne,pee],Ote),zne=QJ([$ne,h9,Kee,Une],jte),qne=QJ([Rne],wte),Vne=QJ([Nne,Gee,qne,$te,Kee],qte,{memoizeOptions:{resultEqualityCheck:Xee}}),Kne=QJ([Hte,Kee,Hee],Gte),Hne=QJ([Kne,Kee],Zte),Gne=QJ([Qte,Kee,Hee],Gte),Wne=QJ([Gne,Kee],tre),Qne=QJ([Xte,Kee,Hee],Gte),Yne=QJ([Qne,Kee],nre),Xne=QJ([Hne,Yne,Wne],zte),Jne=QJ([Gee,Mne,Une,zne,Vne,Xne,N2,Kee],are),Zne=QJ([Gee,N2,Nne,Lne,pee,Kee,Jne],cre),eie=QJ([Zne,Gee,Cne],pre),tie=QJ([Gee,Zne,eie,Kee],mre),rie=e=>{var t=Kee(e),r=Hee(e);return Tre(e,t,r,!1)},nie=QJ([Gee,rie],Cee),iie=QJ([Gee,Cne,tie,nie],fre),sie=QJ([N2,Lne,Gee,Kee],Bre),aie=QJ([N2,Lne,Gee,Kee],zre),oie=QJ([N2,Gee,Cne,iie,rie,sie,aie,Kee],((e,t,r,n,i,s,a,o)=>{if(t){var{type:l}=t,c=P1(e,o);if(n){var u="scaleBand"===r&&n.bandwidth?n.bandwidth()/2:2,d="category"===l&&n.bandwidth?n.bandwidth()/u:0;return d="angleAxis"===o&&null!=i&&(null==i?void 0:i.length)>=2?2*hX(i[0]-i[1])*d:d,c&&a?a.map(((e,t)=>({coordinate:n(e)+d,value:e,index:t,offset:d}))):n.domain().map(((e,t)=>({coordinate:n(e)+d,value:s?s[e]:e,index:t,offset:d})))}}})),lie=QJ([Yre,Xre,e=>e.tooltip.settings],((e,t,r)=>Jre(r.shared,e,t))),cie=e=>e.tooltip.settings.trigger,uie=e=>e.tooltip.settings.defaultIndex,die=QJ([Ene,lie,cie,uie],vne),hie=QJ([die,Nne],bne),fie=QJ([oie,hie],ene),pie=QJ([die],(e=>{if(e)return e.dataKey})),gie=QJ([Ene,lie,cie,uie],xne),mie=QJ([q1,V1,N2,e2,oie,uie,gie,Sne],wne),yie=QJ([die,mie],((e,t)=>null!=e&&e.coordinate?e.coordinate:t)),vie=QJ([die],(e=>e.active)),bie=QJ([gie,hie,h9,Wee,fie,Sne,lie],_ne),wie=QJ([bie],(e=>{if(null!=e){var t=e.map((e=>e.payload)).filter((e=>null!=e));return Array.from(new Set(t))}}));function xie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xie(Object(r),!0).forEach((function(t){Eie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Eie(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tie=()=>{var e=qJ(Gee),t=qJ(oie),r=qJ(iie);return B1(Sie(Sie({},e),{},{scale:r}),t)},kie=(e,t)=>t,Aie=(e,t,r)=>r,_ie=(e,t,r,n)=>n,Cie=QJ(oie,(e=>iZ(e,(e=>e.coordinate)))),Pie=QJ([Ene,kie,Aie,_ie],vne),Die=QJ([Pie,Nne],bne),Rie=QJ([Ene,kie,Aie,_ie],xne),Iie=QJ([q1,V1,N2,e2,oie,_ie,Rie,Sne],wne),Oie=QJ([Pie,Iie],((e,t)=>{var r;return null!==(r=e.coordinate)&&void 0!==r?r:t})),Nie=QJ(oie,Die,ene),jie=QJ([Rie,Die,h9,Wee,Nie,Sne,kie],_ne),Lie=QJ([Pie],(e=>({isActive:e.active,activeIndex:e.index})));function Mie(){return Mie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mie.apply(null,arguments)}function Fie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Uie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fie(Object(r),!0).forEach((function(t){Bie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bie(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $ie(e){var t,r,{coordinate:n,payload:i,index:s,offset:a,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:u,chartName:d}=e,h=n,f=i,p=s;if(!c||!h||"ScatterChart"!==d&&"axis"!==u)return null;if("ScatterChart"===d)t=h,r=I3;else if("BarChart"===d)t=function(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-i:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-i,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}(l,h,a,o),r=w4;else if("radial"===l){var{cx:g,cy:m,radius:y,startAngle:v,endAngle:b}=x4(h);t={cx:g,cy:m,startAngle:v,endAngle:b,innerRadius:y,outerRadius:y},r=A4}else t={points:_4(l,h,a)},r=A3;var w="object"==typeof c&&"className"in c?c.className:void 0,x=Uie(Uie(Uie(Uie({stroke:"#ccc",pointerEvents:"none"},a),t),KQ(c)),{},{payload:f,payloadIndex:p,className:rp("recharts-tooltip-cursor",w)});return q.isValidElement(c)?q.cloneElement(c,x):q.createElement(r,x)}function zie(e){var t=Tie(),r=R2(),n=j2(),i=qJ(gee);return q.createElement($ie,Mie({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var qie=q.createContext(null),Vie={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new i(n,s||e,a),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,a=new Array(s);i<s;i++)a[i]=n[i].fn;return a},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,s,a){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,s),!0;case 6:return u.fn.call(u.context,t,n,i,s,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||a(this,s);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(Vie);var Kie=new(n(Vie.exports)),Hie="recharts.syncEvent.tooltip",Gie="recharts.syncEvent.brush";function Wie(e,t){if(t){var r=Number.parseInt(t,10);if(!fX(r))return null==e?void 0:e[r]}}var Qie=_0({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Yie=Qie.reducer,{createEventEmitter:Xie}=Qie.actions;function Jie(e){return e.tooltip.syncInteraction}var Zie=_0({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;null!=r&&(e.dataStartIndex=r),null!=n&&(e.dataEndIndex=n)}}}),{setChartData:ese,setDataStartEndIndexes:tse,setComputedData:rse}=Zie.actions,nse=Zie.reducer,ise=["x","y"];function sse(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ase(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sse(Object(r),!0).forEach((function(t){ose(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sse(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ose(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lse=()=>{};function cse(){var e=qJ(mee),t=qJ(vee),r=UJ(),n=qJ(yee),i=qJ(oie),s=j2(),a=P2(),o=qJ((e=>e.rootProps.className));q.useEffect((()=>{if(null==e)return lse;var o=(o,l,c)=>{var u;if(t!==c&&e===o)if("index"!==n){if(null!=i){var d;if("function"==typeof n){var h={activeTooltipIndex:null==l.payload.index?void 0:Number(l.payload.index),isTooltipActive:l.payload.active,activeIndex:null==l.payload.index?void 0:Number(l.payload.index),activeLabel:l.payload.label,activeDataKey:l.payload.dataKey,activeCoordinate:l.payload.coordinate},f=n(i,h);d=i[f]}else"value"===n&&(d=i.find((e=>String(e.value)===l.payload.label)));var{coordinate:p}=l.payload;if(null!=d&&!1!==l.payload.active&&null!=p&&null!=a){var{x:g,y:m}=p,y=Math.min(g,a.x+a.width),v=Math.min(m,a.y+a.height),b={x:"horizontal"===s?d.coordinate:y,y:"horizontal"===s?v:d.coordinate},w=hne({active:l.payload.active,coordinate:b,dataKey:l.payload.dataKey,index:String(d.index),label:l.payload.label,sourceViewBox:l.payload.sourceViewBox});r(w)}else r(hne({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}))}}else if(a&&null!=l&&null!==(u=l.payload)&&void 0!==u&&u.coordinate&&l.payload.sourceViewBox){var x=l.payload.coordinate,{x:S,y:E}=x,T=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(x,ise),{x:k,y:A,width:_,height:C}=l.payload.sourceViewBox,P=ase(ase({},T),{},{x:a.x+(_?(S-k)/_:0)*a.width,y:a.y+(C?(E-A)/C:0)*a.height});r(ase(ase({},l),{},{payload:ase(ase({},l.payload),{},{coordinate:P})}))}else r(l)};return Kie.on(Hie,o),()=>{Kie.off(Hie,o)}}),[o,r,t,e,n,i,s,a])}function use(){var e=UJ();q.useEffect((()=>{e(Xie())}),[e]),cse(),function(){var e=qJ(mee),t=qJ(vee),r=UJ();q.useEffect((()=>{if(null==e)return lse;var n=(n,i,s)=>{t!==s&&e===n&&r(tse(i))};return Kie.on(Gie,n),()=>{Kie.off(Gie,n)}}),[r,t,e])}()}function dse(e,t,r,n,i,s){var a=qJ((r=>((e,t,r)=>{if(null!=t){var n=Ene(e);return"axis"===t?"hover"===r?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:"hover"===r?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}})(r,e,t))),o=qJ(vee),l=qJ(mee),c=qJ(yee),u=qJ(Jie),d=null==u?void 0:u.active,h=P2();q.useEffect((()=>{if(!d&&null!=l&&null!=o){var e=hne({active:s,coordinate:r,dataKey:a,index:i,label:"number"==typeof n?String(n):n,sourceViewBox:h});Kie.emit(Hie,l,e,o)}}),[d,r,a,i,n,o,l,c,s,h])}function hse(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fse(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hse(Object(r),!0).forEach((function(t){pse(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hse(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pse(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gse(e){return e.dataKey}var mse=[],yse={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!g3,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function vse(e){var t=j3(e,yse),{active:r,allowEscapeViewBox:n,animationDuration:i,animationEasing:s,content:a,filterNull:o,isAnimationActive:l,offset:c,payloadUniqBy:u,position:d,reverseDirection:h,useTranslate3d:f,wrapperStyle:p,cursor:g,shared:m,trigger:y,defaultIndex:v,portal:b,axisId:w}=t,x=UJ(),S="number"==typeof v?String(v):v;q.useEffect((()=>{x(sne({shared:m,trigger:y,axisId:w,active:r,defaultIndex:S}))}),[x,m,y,w,r,S]);var E=P2(),T=m3(),k=function(e){return qJ((t=>Zre(t,e)))}(m),{activeIndex:A,isActive:_}=qJ((e=>Lie(e,k,y,S))),C=qJ((e=>jie(e,k,y,S))),P=qJ((e=>Nie(e,k,y,S))),D=qJ((e=>Oie(e,k,y,S))),R=C,I=q.useContext(qie),O=null!=r?r:_,[N,j]=oZ([R,O]),L="axis"===k?P:void 0;dse(k,y,D,L,A,O);var M=null!=b?b:I;if(null==M)return null;var F=null!=R?R:mse;O||(F=mse),o&&F.length&&(F=pJ(R.filter((e=>null!=e.value&&(!0!==e.hide||t.includeHidden))),u,gse));var U=F.length>0,B=q.createElement(f3,{allowEscapeViewBox:n,animationDuration:i,animationEasing:s,isAnimationActive:l,active:O,coordinate:D,hasPayload:U,offset:c,position:d,reverseDirection:h,useTranslate3d:f,viewBox:E,wrapperStyle:p,lastBoundingBox:N,innerRef:j,hasPortalFromProps:Boolean(b)},function(e,t){return q.isValidElement(e)?q.cloneElement(e,t):"function"==typeof e?q.createElement(e,t):q.createElement(s3,t)}(a,fse(fse({},t),{},{payload:F,label:L,active:O,coordinate:D,accessibilityLayer:T})));return q.createElement(q.Fragment,null,ad.createPortal(B,M),O&&q.createElement(zie,{cursor:g,tooltipEventType:k,coordinate:D,payload:R,index:A}))}var bse=e=>null;function wse(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}bse.displayName="Cell";function xse(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sse(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ese=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xse(Object(r),!0).forEach((function(t){Sse(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xse(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{cacheSize:2e3,enableCache:!0}),Tse=new class{constructor(e){wse(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(Ese.cacheSize),kse={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Ase="recharts_measurement_span";var _se=(e,t)=>{try{var r=document.getElementById(Ase);r||((r=document.createElement("span")).setAttribute("id",Ase),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,kse,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch(i){return{width:0,height:0}}},Cse=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||g3)return{width:0,height:0};if(!Ese.enableCache)return _se(e,t);var r=function(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",a=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(s,"|").concat(a,"|").concat(o)}(e,t),n=Tse.get(r);if(n)return n;var i=_se(e,t);return Tse.set(r,i),i},Pse=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Dse=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Rse=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Ise=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Ose={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},Nse=Object.keys(Ose),jse="NaN";class Lse{static parse(e){var t,[,r,n]=null!==(t=Ise.exec(e))&&void 0!==t?t:[];return new Lse(parseFloat(r),null!=n?n:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,fX(e)&&(this.unit=""),""===t||Rse.test(t)||(this.num=NaN,this.unit=""),Nse.includes(t)&&(this.num=function(e,t){return e*Ose[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new Lse(NaN,""):new Lse(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Lse(NaN,""):new Lse(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new Lse(NaN,""):new Lse(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new Lse(NaN,""):new Lse(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return fX(this.num)}}function Mse(e){if(e.includes(jse))return jse;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,s]=null!==(r=Pse.exec(t))&&void 0!==r?r:[],a=Lse.parse(null!=n?n:""),o=Lse.parse(null!=s?s:""),l="*"===i?a.multiply(o):a.divide(o);if(l.isNaN())return jse;t=t.replace(Pse,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,u,d,h]=null!==(c=Dse.exec(t))&&void 0!==c?c:[],f=Lse.parse(null!=u?u:""),p=Lse.parse(null!=h?h:""),g="+"===d?f.add(p):f.subtract(p);if(g.isNaN())return jse;t=t.replace(Dse,g.toString())}return t}var Fse=/\(([^()]*)\)/;function Use(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,r=e;null!=(t=Fse.exec(r));){var[,n]=t;r=r.replace(Fse,Mse(n))}return r}(t),t=Mse(t)}function Bse(e){var t=function(e){try{return Use(e)}catch(t){return jse}}(e.slice(5,-1));return t===jse?"":t}var $se=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],zse=["dx","dy","angle","className","breakAll"];function qse(){return qse=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qse.apply(null,arguments)}function Vse(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Kse=/[ \f\n\r\t\v\u2028\u2029]+/,Hse=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];return EX(t)||(i=r?t.toString().split(""):t.toString().split(Kse)),{wordsWithComputedWidth:i.map((e=>({word:e,width:Cse(e,n).width}))),spaceWidth:r?0:Cse("",n).width}}catch(s){return null}},Gse=e=>[{words:EX(e)?[]:e.toString().split(Kse)}],Wse=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:s,maxLines:a}=e;if((t||r)&&!g3){var o=Hse({breakAll:s,children:n,style:i});if(!o)return Gse(n);var{wordsWithComputedWidth:l,spaceWidth:c}=o;return((e,t,r,n,i)=>{var{maxLines:s,children:a,style:o,breakAll:l}=e,c=gX(s),u=a,d=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((e,t)=>{var{word:s,width:a}=t,o=e[e.length-1];if(o&&(null==n||i||o.width+a+r<Number(n)))o.words.push(s),o.width+=a+r;else{var l={words:[s],width:a};e.push(l)}return e}),[])},h=d(t),f=e=>e.reduce(((e,t)=>e.width>t.width?e:t));if(!c||i)return h;if(!(h.length>s||f(h).width>Number(n)))return h;for(var p,g=e=>{var t=u.slice(0,e),r=Hse({breakAll:l,style:o,children:t+""}).wordsWithComputedWidth,i=d(r);return[i.length>s||f(i).width>Number(n),i]},m=0,y=u.length-1,v=0;m<=y&&v<=u.length-1;){var b=Math.floor((m+y)/2),w=b-1,[x,S]=g(w),[E]=g(b);if(x||E||(m=b+1),x&&E&&(y=b-1),!x&&E){p=S;break}v++}return p||h})({breakAll:s,children:n,maxLines:a,style:i},l,c,t,r)}return Gse(n)},Qse="#808080",Yse=q.forwardRef(((e,t)=>{var{x:r=0,y:n=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:a=!1,textAnchor:o="start",verticalAnchor:l="end",fill:c=Qse}=e,u=Vse(e,$se),d=q.useMemo((()=>Wse({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:a,style:u.style,width:u.width})),[u.breakAll,u.children,u.maxLines,a,u.style,u.width]),{dx:h,dy:f,angle:p,className:g,breakAll:m}=u,y=Vse(u,zse);if(!mX(r)||!mX(n)||0===d.length)return null;var v,b=r+(gX(h)?h:0),w=n+(gX(f)?f:0);switch(l){case"start":v=Bse("calc(".concat(s,")"));break;case"middle":v=Bse("calc(".concat((d.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:v=Bse("calc(".concat(d.length-1," * -").concat(i,")"))}var x=[];if(a){var S=d[0].width,{width:E}=u;x.push("scale(".concat(gX(E)?E/S:1,")"))}return p&&x.push("rotate(".concat(p,", ").concat(b,", ").concat(w,")")),x.length&&(y.transform=x.join(" ")),q.createElement("text",qse({},HQ(y),{ref:t,x:b,y:w,className:rp("recharts-text",g),textAnchor:o,fill:c.includes("url")?Qse:c}),d.map(((e,t)=>{var r=e.words.join(m?"":" ");return q.createElement("tspan",{x:b,dy:0===t?v:i,key:"".concat(r,"-").concat(t)},r)})))}));Yse.displayName="Text";var Xse=["labelRef"];function Jse(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zse(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jse(Object(r),!0).forEach((function(t){eae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jse(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function eae(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tae(){return tae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tae.apply(null,arguments)}var rae=q.createContext(null),nae=e=>{var{x:t,y:r,width:n,height:i,children:s}=e,a=q.useMemo((()=>({x:t,y:r,width:n,height:i})),[t,r,n,i]);return q.createElement(rae.Provider,{value:a},s)},iae=()=>{var e=q.useContext(rae),t=P2();return e||t},sae=q.createContext(null),aae=e=>null!=e&&"function"==typeof e,oae=(e,t,r,n,i)=>{var s,a,{offset:o,className:l}=e,{cx:c,cy:u,innerRadius:d,outerRadius:h,startAngle:f,endAngle:p,clockWise:g}=i,m=(d+h)/2,y=((e,t)=>hX(t-e)*Math.min(Math.abs(t-e),360))(f,p),v=y>=0?1:-1;switch(t){case"insideStart":s=f+v*o,a=g;break;case"insideEnd":s=p-v*o,a=!g;break;case"end":s=p+v*o,a=g;break;default:throw new Error("Unsupported position ".concat(t))}a=y<=0?a:!a;var b=b1(c,u,m,s),w=b1(c,u,m,s+359*(a?1:-1)),x="M".concat(b.x,",").concat(b.y,"\n    A").concat(m,",").concat(m,",0,1,").concat(a?0:1,",\n    ").concat(w.x,",").concat(w.y),S=EX(e.id)?vX("recharts-radial-line-"):e.id;return q.createElement("text",tae({},n,{dominantBaseline:"central",className:rp("recharts-radial-bar-label",l)}),q.createElement("defs",null,q.createElement("path",{id:S,d:x})),q.createElement("textPath",{xlinkHref:"#".concat(S)},r))},lae=e=>"cx"in e&&gX(e.cx),cae={offset:5};function uae(e){var t,r,n=j3(e,cae),{viewBox:i,position:s,value:a,children:o,content:l,className:c="",textBreakAll:u,labelRef:d}=n,h=(t=q.useContext(sae),r=qJ($ee),t||r),f=iae(),p=i||("center"===s?f:null!=h?h:f);if(!p||EX(a)&&EX(o)&&!q.isValidElement(l)&&"function"!=typeof l)return null;var g,m=Zse(Zse({},n),{},{viewBox:p});if(q.isValidElement(l)){var y=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(m,Xse);return q.cloneElement(l,y)}if("function"==typeof l){if(g=q.createElement(l,m),q.isValidElement(g))return g}else g=(e=>{var{value:t,formatter:r}=e,n=EX(e.children)?t:e.children;return"function"==typeof r?r(n):n})(n);var v=lae(p),b=HQ(n);if(v&&("insideStart"===s||"insideEnd"===s||"end"===s))return oae(n,s,g,b,p);var w=v?((e,t,r)=>{var{cx:n,cy:i,innerRadius:s,outerRadius:a,startAngle:o,endAngle:l}=e,c=(o+l)/2;if("outside"===r){var{x:u,y:d}=b1(n,i,a+t,c);return{x:u,y:d,textAnchor:u>=n?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(s+a)/2,{x:f,y:p}=b1(n,i,h,c);return{x:f,y:p,textAnchor:"middle",verticalAnchor:"middle"}})(p,n.offset,n.position):((e,t)=>{var r,{parentViewBox:n,offset:i,position:s}=e;null==n||lae(n)||(r=n);var{x:a,y:o,width:l,height:c}=t,u=c>=0?1:-1,d=u*i,h=u>0?"end":"start",f=u>0?"start":"end",p=l>=0?1:-1,g=p*i,m=p>0?"end":"start",y=p>0?"start":"end";if("top"===s)return Zse(Zse({},{x:a+l/2,y:o-u*i,textAnchor:"middle",verticalAnchor:h}),r?{height:Math.max(o-r.y,0),width:l}:{});if("bottom"===s)return Zse(Zse({},{x:a+l/2,y:o+c+d,textAnchor:"middle",verticalAnchor:f}),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{});if("left"===s){var v={x:a-g,y:o+c/2,textAnchor:m,verticalAnchor:"middle"};return Zse(Zse({},v),r?{width:Math.max(v.x-r.x,0),height:c}:{})}if("right"===s){var b={x:a+l+g,y:o+c/2,textAnchor:y,verticalAnchor:"middle"};return Zse(Zse({},b),r?{width:Math.max(r.x+r.width-b.x,0),height:c}:{})}var w=r?{width:l,height:c}:{};return"insideLeft"===s?Zse({x:a+g,y:o+c/2,textAnchor:y,verticalAnchor:"middle"},w):"insideRight"===s?Zse({x:a+l-g,y:o+c/2,textAnchor:m,verticalAnchor:"middle"},w):"insideTop"===s?Zse({x:a+l/2,y:o+d,textAnchor:"middle",verticalAnchor:f},w):"insideBottom"===s?Zse({x:a+l/2,y:o+c-d,textAnchor:"middle",verticalAnchor:h},w):"insideTopLeft"===s?Zse({x:a+g,y:o+d,textAnchor:y,verticalAnchor:f},w):"insideTopRight"===s?Zse({x:a+l-g,y:o+d,textAnchor:m,verticalAnchor:f},w):"insideBottomLeft"===s?Zse({x:a+g,y:o+c-d,textAnchor:y,verticalAnchor:h},w):"insideBottomRight"===s?Zse({x:a+l-g,y:o+c-d,textAnchor:m,verticalAnchor:h},w):s&&"object"==typeof s&&(gX(s.x)||pX(s.x))&&(gX(s.y)||pX(s.y))?Zse({x:a+bX(s.x,l),y:o+bX(s.y,c),textAnchor:"end",verticalAnchor:"end"},w):Zse({x:a+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},w)})(n,p);return q.createElement(Yse,tae({ref:d,className:rp("recharts-label",c)},b,w,{breakAll:u}),g)}uae.displayName="Label";function dae(e){var{label:t,labelRef:r}=e;return((e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return!0===e?q.createElement(uae,tae({key:"label-implicit"},n)):mX(e)?q.createElement(uae,tae({key:"label-implicit",value:e},n)):q.isValidElement(e)?e.type===uae?q.cloneElement(e,Zse({key:"label-implicit"},n)):q.createElement(uae,tae({key:"label-implicit",content:e},n)):aae(e)?q.createElement(uae,tae({key:"label-implicit",content:e},n)):e&&"object"==typeof e?q.createElement(uae,tae({},e,{key:"label-implicit"},n)):null})(t,iae(),r)||null}var hae={},fae={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.last=function(e){return e[e.length-1]}}(fae);var pae={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}}(pae),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fae,r=pae,n=VX;e.last=function(e){if(n.isArrayLike(e))return t.last(r.toArray(e))}}(hae);const gae=n(hae.last);var mae=["valueAccessor"],yae=["dataKey","clockWise","id","textBreakAll"];function vae(){return vae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vae.apply(null,arguments)}function bae(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var wae=e=>Array.isArray(e.value)?gae(e.value):e.value,xae=q.createContext(void 0),Sae=xae.Provider,Eae=q.createContext(void 0),Tae=Eae.Provider;function kae(e){var{valueAccessor:t=wae}=e,r=bae(e,mae),{dataKey:n,clockWise:i,id:s,textBreakAll:a}=r,o=bae(r,yae),l=q.useContext(xae),c=q.useContext(Eae),u=l||c;return u&&u.length?q.createElement(JQ,{className:"recharts-label-list"},u.map(((e,i)=>{var l,c=EX(n)?t(e,i):C1(e&&e.payload,n),u=EX(s)?{}:{id:"".concat(s,"-").concat(i)};return q.createElement(uae,vae({key:"label-".concat(i)},HQ(e),o,u,{fill:null!==(l=r.fill)&&void 0!==l?l:e.fill,parentViewBox:e.parentViewBox,value:c,textBreakAll:a,viewBox:e.viewBox,index:i}))}))):null}function Aae(e){var{label:t}=e;return t?!0===t?q.createElement(kae,{key:"labelList-implicit"}):q.isValidElement(t)||aae(t)?q.createElement(kae,{key:"labelList-implicit",content:t}):"object"==typeof t?q.createElement(kae,vae({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function _ae(){return _ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_ae.apply(null,arguments)}kae.displayName="LabelList";var Cae=e=>{var{cx:t,cy:r,r:n,className:i}=e,s=rp("recharts-dot",i);return t===+t&&r===+r&&n===+n?q.createElement("circle",_ae({},VQ(e),OX(e),{className:s,cx:t,cy:r,r:n})):null},Pae=e=>e.graphicalItems.polarItems,Dae=QJ([zee,qee],pte),Rae=QJ([Pae,dte,Dae],yte),Iae=QJ([Rae],Ste),Oae=QJ([Iae,f9],Tte),Nae=QJ([Oae,dte,Rae],Ate);QJ([Oae,dte,Rae],((e,t,r)=>r.length>0?e.flatMap((e=>r.flatMap((r=>{var n;return{value:C1(e,null!==(n=t.dataKey)&&void 0!==n?n:r.dataKey),errorDomain:[]}})))).filter(Boolean):null!=(null==t?void 0:t.dataKey)?e.map((e=>({value:C1(e,t.dataKey),errorDomain:[]}))):e.map((e=>({value:e,errorDomain:[]})))));var jae=()=>{},Lae=QJ([Oae,dte,Rae,$te,zee],qte),Mae=QJ([dte,Fte,Ute,jae,Lae,jae,N2,zee],are),Fae=QJ([dte,N2,Oae,Nae,pee,zee,Mae],cre),Uae=QJ([Fae,dte,hre],pre);QJ([dte,Fae,Uae,zee],mre);var Bae=_0({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}});Bae.actions;var $ae=Bae.reducer;function zae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zae(Object(r),!0).forEach((function(t){Vae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vae(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kae=QJ([Pae,(e,t)=>t],((e,t)=>e.filter((e=>"pie"===e.type)).find((e=>e.id===t)))),Hae=[],Gae=(e,t,r)=>0===(null==r?void 0:r.length)?Hae:r,Wae=QJ([f9,Kae,Gae],((e,t,r)=>{var n,{chartData:i}=e;if(null!=t&&((n=null!=(null==t?void 0:t.data)&&t.data.length>0?t.data:i)&&n.length||null==r||(n=r.map((e=>qae(qae({},t.presentationProps),e.props)))),null!=n))return n})),Qae=QJ([Wae,Kae,Gae],((e,t,r)=>{if(null!=e&&null!=t)return e.map(((e,n)=>{var i,s,a=C1(e,t.nameKey,t.name);return s=null!=r&&null!==(i=r[n])&&void 0!==i&&null!==(i=i.props)&&void 0!==i&&i.fill?r[n].props.fill:"object"==typeof e&&null!=e&&"fill"in e?e.fill:t.fill,{value:z1(a,t.dataKey),color:s,payload:e,type:t.legendType}}))})),Yae=QJ([Wae,Kae,Gae,e2],((e,t,r,n)=>{if(null!=t&&null!=e)return function(e){var t,r,n,{pieSettings:i,displayedData:s,cells:a,offset:o}=e,{cornerRadius:l,startAngle:c,endAngle:u,dataKey:d,nameKey:h,tooltipType:f}=i,p=Math.abs(i.minAngle),g=wle(c,u),m=Math.abs(g),y=s.length<=1?0:null!==(t=i.paddingAngle)&&void 0!==t?t:0,v=s.filter((e=>0!==C1(e,d,0))).length,b=m-v*p-(m>=360?v:v-1)*y,w=s.reduce(((e,t)=>{var r=C1(t,d,0);return e+(gX(r)?r:0)}),0);w>0&&(r=s.map(((e,t)=>{var r,s=C1(e,d,0),u=C1(e,h,t),m=ble(i,o,e),v=(gX(s)?s:0)/w,x=ple(ple({},e),a&&a[t]&&a[t].props),S=(r=t?n.endAngle+hX(g)*y*(0!==s?1:0):c)+hX(g)*((0!==s?p:0)+v*b),E=(r+S)/2,T=(m.innerRadius+m.outerRadius)/2,k=[{name:u,value:s,payload:x,dataKey:d,type:f}],A=b1(m.cx,m.cy,T,E);return n=ple(ple(ple(ple({},i.presentationProps),{},{percent:v,cornerRadius:l,name:u,tooltipPayload:k,midAngle:E,middleRadius:T,tooltipPosition:A},x),m),{},{value:s,startAngle:r,endAngle:S,payload:x,paddingAngle:hX(g)*y})})));return r}({offset:n,pieSettings:t,displayedData:e,cells:r})})),Xae={exports:{}},Jae={},Zae="function"==typeof Symbol&&Symbol.for,eoe=Zae?Symbol.for("react.element"):60103,toe=Zae?Symbol.for("react.portal"):60106,roe=Zae?Symbol.for("react.fragment"):60107,noe=Zae?Symbol.for("react.strict_mode"):60108,ioe=Zae?Symbol.for("react.profiler"):60114,soe=Zae?Symbol.for("react.provider"):60109,aoe=Zae?Symbol.for("react.context"):60110,ooe=Zae?Symbol.for("react.async_mode"):60111,loe=Zae?Symbol.for("react.concurrent_mode"):60111,coe=Zae?Symbol.for("react.forward_ref"):60112,uoe=Zae?Symbol.for("react.suspense"):60113,doe=Zae?Symbol.for("react.suspense_list"):60120,hoe=Zae?Symbol.for("react.memo"):60115,foe=Zae?Symbol.for("react.lazy"):60116,poe=Zae?Symbol.for("react.block"):60121,goe=Zae?Symbol.for("react.fundamental"):60117,moe=Zae?Symbol.for("react.responder"):60118,yoe=Zae?Symbol.for("react.scope"):60119;function voe(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case eoe:switch(e=e.type){case ooe:case loe:case roe:case ioe:case noe:case uoe:return e;default:switch(e=e&&e.$$typeof){case aoe:case coe:case foe:case hoe:case soe:return e;default:return t}}case toe:return t}}}function boe(e){return voe(e)===loe}Jae.AsyncMode=ooe,Jae.ConcurrentMode=loe,Jae.ContextConsumer=aoe,Jae.ContextProvider=soe,Jae.Element=eoe,Jae.ForwardRef=coe,Jae.Fragment=roe,Jae.Lazy=foe,Jae.Memo=hoe,Jae.Portal=toe,Jae.Profiler=ioe,Jae.StrictMode=noe,Jae.Suspense=uoe,Jae.isAsyncMode=function(e){return boe(e)||voe(e)===ooe},Jae.isConcurrentMode=boe,Jae.isContextConsumer=function(e){return voe(e)===aoe},Jae.isContextProvider=function(e){return voe(e)===soe},Jae.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===eoe},Jae.isForwardRef=function(e){return voe(e)===coe},Jae.isFragment=function(e){return voe(e)===roe},Jae.isLazy=function(e){return voe(e)===foe},Jae.isMemo=function(e){return voe(e)===hoe},Jae.isPortal=function(e){return voe(e)===toe},Jae.isProfiler=function(e){return voe(e)===ioe},Jae.isStrictMode=function(e){return voe(e)===noe},Jae.isSuspense=function(e){return voe(e)===uoe},Jae.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===roe||e===loe||e===ioe||e===noe||e===uoe||e===doe||"object"==typeof e&&null!==e&&(e.$$typeof===foe||e.$$typeof===hoe||e.$$typeof===soe||e.$$typeof===aoe||e.$$typeof===coe||e.$$typeof===goe||e.$$typeof===moe||e.$$typeof===yoe||e.$$typeof===poe)},Jae.typeOf=voe,Xae.exports=Jae;var woe=Xae.exports,xoe=e=>"string"==typeof e?e:e?e.displayName||e.name||"Component":"",Soe=null,Eoe=null,Toe=e=>{if(e===Soe&&Array.isArray(Eoe))return Eoe;var t=[];return q.Children.forEach(e,(e=>{EX(e)||(woe.isFragment(e)?t=t.concat(Toe(e.props.children)):t.push(e))})),Eoe=t,Soe=e,t};function koe(e,t){var r=[],n=[];return n=Array.isArray(t)?t.map((e=>xoe(e))):[xoe(t)],Toe(e).forEach((e=>{var t=dX(e,"type.displayName")||dX(e,"type.name");-1!==n.indexOf(t)&&r.push(e)})),r}var Aoe=e=>!e||"object"!=typeof e||!("clipDot"in e)||Boolean(e.clipDot),_oe={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isPlainObject=function(e){var t;if("object"!=typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){const r=e[Symbol.toStringTag];if(null==r)return!1;return!!(null==(t=Object.getOwnPropertyDescriptor(e,Symbol.toStringTag))?void 0:t.writable)&&e.toString()===`[object ${r}]`}let r=e;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}}(_oe);const Coe=n(_oe.isPlainObject);function Poe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Doe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Poe(Object(r),!0).forEach((function(t){Roe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Poe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Roe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ioe(){return Ioe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ioe.apply(null,arguments)}var Ooe=(e,t,r,n,i)=>{var s,a=r-n;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-a/2,",").concat(t+i),s+="L ".concat(e+r-a/2-n,",").concat(t+i),s+="L ".concat(e,",").concat(t," Z")},Noe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},joe=e=>{var t=j3(e,Noe),{x:r,y:n,upperWidth:i,lowerWidth:s,height:a,className:o}=t,{animationEasing:l,animationDuration:c,animationBegin:u,isUpdateAnimationActive:d}=t,h=q.useRef(null),[f,p]=q.useState(-1),g=q.useRef(i),m=q.useRef(s),y=q.useRef(a),v=q.useRef(r),b=q.useRef(n),w=u4(e,"trapezoid-");if(q.useEffect((()=>{if(h.current&&h.current.getTotalLength)try{var e=h.current.getTotalLength();e&&p(e)}catch(t){}}),[]),r!==+r||n!==+n||i!==+i||s!==+s||a!==+a||0===i&&0===s||0===a)return null;var x=rp("recharts-trapezoid",o);if(!d)return q.createElement("g",null,q.createElement("path",Ioe({},HQ(t),{className:x,d:Ooe(r,n,i,s,a)})));var S=g.current,E=m.current,T=y.current,k=v.current,A=b.current,_="0px ".concat(-1===f?1:f,"px"),C="".concat(f,"px 0px"),P=$3(["strokeDasharray"],c,l);return q.createElement(c4,{animationId:w,key:w,canBegin:f>0,duration:c,easing:l,isActive:d,begin:u},(e=>{var o=xX(S,i,e),l=xX(E,s,e),c=xX(T,a,e),u=xX(k,r,e),d=xX(A,n,e);h.current&&(g.current=o,m.current=l,y.current=c,v.current=u,b.current=d);var f=e>0?{transition:P,strokeDasharray:C}:{strokeDasharray:_};return q.createElement("path",Ioe({},HQ(t),{className:x,d:Ooe(u,d,o,l,c),ref:h,style:Doe(Doe({},f),t.style)}))}))},Loe=["option","shapeType","propTransformer","activeClassName","isActive"];function Moe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Foe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Moe(Object(r),!0).forEach((function(t){Uoe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Moe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Uoe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Boe(e,t){return Foe(Foe({},t),e)}function $oe(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return q.createElement(w4,r);case"trapezoid":return q.createElement(joe,r);case"sector":return q.createElement(A4,r);case"symbols":if(function(e){return"symbols"===e}(t))return q.createElement(IX,r);break;default:return null}}function zoe(e){var t,{option:r,shapeType:n,propTransformer:i=Boe,activeClassName:s="recharts-active-shape",isActive:a}=e,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,Loe);if(q.isValidElement(r))t=q.cloneElement(r,Foe(Foe({},o),function(e){return q.isValidElement(e)?e.props:e}(r)));else if("function"==typeof r)t=r(o);else if(Coe(r)&&"boolean"!=typeof r){var l=i(r,o);t=q.createElement($oe,{shapeType:n,elementProps:l})}else{var c=o;t=q.createElement($oe,{shapeType:n,elementProps:c})}return a?q.createElement(JQ,{className:s},t):t}var qoe=(e,t)=>{var r=UJ();return(n,i)=>s=>{null==e||e(n,i,s),r(ane({activeIndex:String(i),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},Voe=e=>{var t=UJ();return(r,n)=>i=>{null==e||e(r,n,i),t(one())}},Koe=(e,t)=>{var r=UJ();return(n,i)=>s=>{null==e||e(n,i,s),r(cne({activeIndex:String(i),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function Hoe(e){var{fn:t,args:r}=e,n=UJ(),i=i2();return q.useLayoutEffect((()=>{if(!i){var e=t(r);return n(nne(e)),()=>{n(ine(e))}}}),[t,r,n,i]),null}var Goe,Woe=()=>{};function Qoe(e){var{legendPayload:t}=e,r=UJ(),n=i2();return q.useLayoutEffect((()=>n?Woe:(r(B2(t)),()=>{r($2(t))})),[r,n,t]),null}function Yoe(e){var{legendPayload:t}=e,r=UJ(),n=qJ(N2);return q.useLayoutEffect((()=>"centric"!==n&&"radial"!==n?Woe:(r(B2(t)),()=>{r($2(t))})),[r,n,t]),null}var Xoe=null!==(Goe=K["useId".toString()])&&void 0!==Goe?Goe:()=>{var[e]=q.useState((()=>vX("uid-")));return e};var Joe=q.createContext(void 0),Zoe=e=>{var t,r,n,{id:i,type:s,children:a}=e,o=(t="recharts-".concat(s),r=i,n=Xoe(),r||(t?"".concat(t,"-").concat(n):n));return q.createElement(Joe.Provider,{value:o},a(o))},ele=_0({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:y0()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=i0(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},prepare:y0()},removeCartesianGraphicalItem:{reducer(e,t){var r=i0(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:y0()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:y0()},removePolarGraphicalItem:{reducer(e,t){var r=i0(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:y0()}}}),{addCartesianGraphicalItem:tle,replaceCartesianGraphicalItem:rle,removeCartesianGraphicalItem:nle,addPolarGraphicalItem:ile,removePolarGraphicalItem:sle}=ele.actions,ale=ele.reducer;function ole(e){var t=UJ(),r=q.useRef(null);return q.useLayoutEffect((()=>{null===r.current?t(tle(e)):r.current!==e&&t(rle({prev:r.current,next:e})),r.current=e}),[t,e]),q.useLayoutEffect((()=>()=>{r.current&&(t(nle(r.current)),r.current=null)}),[t]),null}function lle(e){var t=UJ();return q.useLayoutEffect((()=>(t(ile(e)),()=>{t(sle(e))})),[t,e]),null}var cle=["onMouseEnter","onClick","onMouseLeave"],ule=["id"],dle=["id"];function hle(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function fle(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ple(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fle(Object(r),!0).forEach((function(t){gle(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fle(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gle(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mle(){return mle=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mle.apply(null,arguments)}function yle(e){var t=q.useMemo((()=>koe(e.children,bse)),[e.children]),r=qJ((r=>Qae(r,e.id,t)));return null==r?null:q.createElement(Yoe,{legendPayload:r})}function vle(e){var{dataKey:t,nameKey:r,sectors:n,stroke:i,strokeWidth:s,fill:a,name:o,hide:l,tooltipType:c}=e;return{dataDefinedOnItem:n.map((e=>e.tooltipPayload)),positions:n.map((e=>e.tooltipPosition)),settings:{stroke:i,strokeWidth:s,fill:a,dataKey:t,nameKey:r,name:z1(o,t),hide:l,type:c,color:a,unit:""}}}var ble=(e,t,r)=>{var{top:n,left:i,width:s,height:a}=t,o=w1(s,a),l=i+bX(e.cx,s,s/2),c=n+bX(e.cy,a,a/2),u=bX(e.innerRadius,o,0),d=((e,t,r)=>bX("function"==typeof t?t(e):t,r,.8*r))(r,e.outerRadius,o);return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:e.maxRadius||Math.sqrt(s*s+a*a)/2}},wle=(e,t)=>hX(t-e)*Math.min(Math.abs(t-e),360);function xle(e){var{sectors:t,props:r,showLabels:n}=e,{label:i,labelLine:s,dataKey:a}=r;if(!n||!i||!t)return null;var o=VQ(r),l=KQ(i),c=KQ(s),u="object"==typeof i&&"offsetRadius"in i&&"number"==typeof i.offsetRadius&&i.offsetRadius||20,d=t.map(((e,t)=>{var r,n,d=(e.startAngle+e.endAngle)/2,h=b1(e.cx,e.cy,e.outerRadius+u,d),f=ple(ple(ple(ple({},o),e),{},{stroke:"none"},l),{},{index:t,textAnchor:(r=h.x,n=e.cx,r>n?"start":r<n?"end":"middle")},h),p=ple(ple(ple(ple({},o),e),{},{fill:"none",stroke:e.fill},c),{},{index:t,points:[b1(e.cx,e.cy,e.outerRadius,d),h],key:"line"});return q.createElement(JQ,{key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(t)},s&&((e,t)=>{if(q.isValidElement(e))return q.cloneElement(e,t);if("function"==typeof e)return e(t);var r=rp("recharts-pie-label-line","boolean"!=typeof e?e.className:"");return q.createElement(A3,mle({},t,{type:"linear",className:r}))})(s,p),((e,t,r)=>{if(q.isValidElement(e))return q.cloneElement(e,t);var n=r;if("function"==typeof e&&(n=e(t),q.isValidElement(n)))return n;var i,s=rp("recharts-pie-label-text",(i=e)&&"object"==typeof i&&"className"in i&&"string"==typeof i.className?i.className:"");return q.createElement(Yse,mle({},t,{alignmentBaseline:"middle",className:s}),n)})(i,f,C1(e,a)))}));return q.createElement(JQ,{className:"recharts-pie-labels"},d)}function Sle(e){var{sectors:t,props:r,showLabels:n}=e,{label:i}=r;return"object"==typeof i&&null!=i&&"position"in i?q.createElement(Aae,{label:i}):q.createElement(xle,{sectors:t,props:r,showLabels:n})}function Ele(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:i}=e,s=qJ(hie),{onMouseEnter:a,onClick:o,onMouseLeave:l}=i,c=hle(i,cle),u=qoe(a,i.dataKey),d=Voe(l),h=Koe(o,i.dataKey);return null==t||0===t.length?null:q.createElement(q.Fragment,null,t.map(((e,a)=>{if(0===(null==e?void 0:e.startAngle)&&0===(null==e?void 0:e.endAngle)&&1!==t.length)return null;var o=r&&String(a)===s,l=o?r:s?n:null,f=ple(ple({},e),{},{stroke:e.stroke,tabIndex:-1,[Q1]:a,[Y1]:i.dataKey});return q.createElement(JQ,mle({key:"sector-".concat(null==e?void 0:e.startAngle,"-").concat(null==e?void 0:e.endAngle,"-").concat(e.midAngle,"-").concat(a),tabIndex:-1,className:"recharts-pie-sector"},NX(c,e,a),{onMouseEnter:u(e,a),onMouseLeave:d(e,a),onClick:h(e,a)}),q.createElement(zoe,mle({option:l,isActive:o,shapeType:"sector"},f)))})))}function Tle(e){var{showLabels:t,sectors:r,children:n}=e,i=q.useMemo((()=>t&&r?r.map((e=>({value:e.value,payload:e.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:e.cx,cy:e.cy,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clockWise:!1},fill:e.fill}))):[]),[r,t]);return q.createElement(Tae,{value:t?i:void 0},n)}function kle(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:i,animationBegin:s,animationDuration:a,animationEasing:o,activeShape:l,inactiveShape:c,onAnimationStart:u,onAnimationEnd:d}=t,h=u4(t,"recharts-pie-"),f=r.current,[p,g]=q.useState(!1),m=q.useCallback((()=>{"function"==typeof d&&d(),g(!1)}),[d]),y=q.useCallback((()=>{"function"==typeof u&&u(),g(!0)}),[u]);return q.createElement(Tle,{showLabels:!p,sectors:n},q.createElement(c4,{animationId:h,begin:s,duration:a,isActive:i,easing:o,onAnimationStart:y,onAnimationEnd:m,key:h},(e=>{var i=[],s=n&&n[0],a=null==s?void 0:s.startAngle;return null==n||n.forEach(((t,r)=>{var n=f&&f[r],s=r>0?dX(t,"paddingAngle",0):0;if(n){var o=xX(n.endAngle-n.startAngle,t.endAngle-t.startAngle,e),l=ple(ple({},t),{},{startAngle:a+s,endAngle:a+o+s});i.push(l),a=l.endAngle}else{var{endAngle:c,startAngle:u}=t,d=xX(0,c-u,e),h=ple(ple({},t),{},{startAngle:a+s,endAngle:a+d+s});i.push(h),a=h.endAngle}})),r.current=i,q.createElement(JQ,null,q.createElement(Ele,{sectors:i,activeShape:l,inactiveShape:c,allOtherPieProps:t}))})),q.createElement(Sle,{showLabels:!p,sectors:n,props:t}),t.children)}var Ale={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!g3,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function _le(e){var{id:t}=e,r=hle(e,ule),{hide:n,className:i,rootTabIndex:s}=e,a=q.useMemo((()=>koe(e.children,bse)),[e.children]),o=qJ((e=>Yae(e,t,a))),l=q.useRef(null),c=rp("recharts-pie",i);return n||null==o?(l.current=null,q.createElement(JQ,{tabIndex:s,className:c})):q.createElement(q.Fragment,null,q.createElement(Hoe,{fn:vle,args:ple(ple({},e),{},{sectors:o})}),q.createElement(JQ,{tabIndex:s,className:c},q.createElement(kle,{props:ple(ple({},r),{},{sectors:o}),previousSectorsRef:l})))}function Cle(e){var t=j3(e,Ale),{id:r}=t,n=hle(t,dle),i=VQ(n);return q.createElement(Zoe,{id:r,type:"pie"},(e=>q.createElement(q.Fragment,null,q.createElement(lle,{type:"pie",id:e,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),q.createElement(yle,mle({},n,{id:e})),q.createElement(_le,mle({},n,{id:e})))))}function Ple(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dle(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ple(Object(r),!0).forEach((function(t){Rle(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ple(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Rle(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Cle.displayName="Pie";var Ile=_0({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:y0()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:y0()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:y0()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:y0()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:y0()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:y0()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var s=i.widthHistory||[];if(3===s.length&&s[0]===s[2]&&n===s[1]&&n!==i.width&&Math.abs(n-s[0])<=1)return;var a=[...s,n].slice(-3);e.yAxis[r]=Dle(Dle({},e.yAxis[r]),{},{width:n,widthHistory:a})}}}}),{addXAxis:Ole,removeXAxis:Nle,addYAxis:jle,removeYAxis:Lle,addZAxis:Mle,removeZAxis:Fle,updateYAxisWidth:Ule}=Ile.actions,Ble=Ile.reducer,$le=QJ([e2],(e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}})),zle=QJ([$le,q1,V1],((e,t,r)=>{if(e&&null!=t&&null!=r)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}})),qle=()=>qJ(zle);function Vle(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kle(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vle(Object(r),!0).forEach((function(t){Hle(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vle(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Hle(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gle(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:i}=e,s=qJ(hie),a=qJ(wie);if(null==t||null==a)return null;var o=t.find((e=>a.includes(e.payload)));return EX(o)?null:(e=>{var{point:t,childIndex:r,mainColor:n,activeDot:i,dataKey:s}=e;if(!1===i||null==t.x||null==t.y)return null;var a,o=Kle(Kle({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:null!=n?n:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},KQ(i)),OX(i));return a=q.isValidElement(i)?q.cloneElement(i,o):"function"==typeof i?i(o):q.createElement(Cae,o),q.createElement(JQ,{className:"recharts-active-dot"},a)})({point:o,childIndex:Number(s),mainColor:r,dataKey:i,activeDot:n})}var Wle="Invariant failed";var Qle=["x","y"];function Yle(){return Yle=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yle.apply(null,arguments)}function Xle(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jle(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xle(Object(r),!0).forEach((function(t){Zle(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xle(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zle(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ece(e,t){var{x:r,y:n}=e,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,Qle),s="".concat(r),a=parseInt(s,10),o="".concat(n),l=parseInt(o,10),c="".concat(t.height||i.height),u=parseInt(c,10),d="".concat(t.width||i.width),h=parseInt(d,10);return Jle(Jle(Jle(Jle(Jle({},t),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:u,width:h,name:t.name,radius:t.radius})}function tce(e){return q.createElement(zoe,Yle({shapeType:"rectangle",propTransformer:ece,activeClassName:"recharts-active-bar"},e))}var rce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(r,n)=>{if(gX(e))return e;var i=gX(r)||EX(r);return i?e(r,n):(i||function(e){if(!e)throw new Error(Wle)}(!1),t)}},nce=_0({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map((e=>e.dataKey===n.dataKey&&e.direction===n.direction?i:e)))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter((e=>e.dataKey!==n.dataKey||e.direction!==n.direction)))}}});nce.actions;var ice=nce.reducer,sce=["children"];var ace={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},oce=q.createContext(ace);function lce(e){var{children:t}=e,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,sce);return q.createElement(oce.Provider,{value:r},t)}function cce(e,t){var r,n,i=qJ((t=>ste(t,e))),s=qJ((e=>lte(e,t))),a=null!==(r=null==i?void 0:i.allowDataOverflow)&&void 0!==r?r:nte.allowDataOverflow,o=null!==(n=null==s?void 0:s.allowDataOverflow)&&void 0!==n?n:ate.allowDataOverflow;return{needClip:a||o,needClipX:a,needClipY:o}}function uce(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=qle(),{needClipX:s,needClipY:a,needClip:o}=cce(t,r);if(!o)return null;var{x:l,y:c,width:u,height:d}=i;return q.createElement("clipPath",{id:"clipPath-".concat(n)},q.createElement("rect",{x:s?l:l-u/2,y:a?c:c-d/2,width:s?u:2*u,height:a?d:2*d}))}var dce=["onMouseEnter","onMouseLeave","onClick"],hce=["value","background","tooltipPosition"],fce=["id"],pce=["onMouseEnter","onClick","onMouseLeave"];function gce(){return gce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gce.apply(null,arguments)}function mce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mce(Object(r),!0).forEach((function(t){vce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vce(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bce(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var wce=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:n,value:z1(r,t),payload:e}]};function xce(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:i,name:s,hide:a,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:z1(s,t),hide:a,type:e.tooltipType,color:e.fill,unit:o}}}function Sce(e){var t=qJ(hie),{data:r,dataKey:n,background:i,allOtherBarProps:s}=e,{onMouseEnter:a,onMouseLeave:o,onClick:l}=s,c=bce(s,dce),u=qoe(a,n),d=Voe(o),h=Koe(l,n);if(!i||null==r)return null;var f=KQ(i);return q.createElement(q.Fragment,null,r.map(((e,r)=>{var{value:s,background:a,tooltipPosition:o}=e,l=bce(e,hce);if(!a)return null;var p=u(e,r),g=d(e,r),m=h(e,r),y=yce(yce(yce(yce(yce({option:i,isActive:String(r)===t},l),{},{fill:"#eee"},a),f),NX(c,e,r)),{},{onMouseEnter:p,onMouseLeave:g,onClick:m,dataKey:n,index:r,className:"recharts-bar-background-rectangle"});return q.createElement(tce,gce({key:"background-bar-".concat(r)},y))})))}function Ece(e){var{showLabels:t,children:r,rects:n}=e,i=null==n?void 0:n.map((e=>{var t={x:e.x,y:e.y,width:e.width,height:e.height};return yce(yce({},t),{},{value:e.value,payload:e.payload,parentViewBox:e.parentViewBox,viewBox:t,fill:e.fill})}));return q.createElement(Sae,{value:t?i:void 0},r)}function Tce(e){var{shape:t,activeBar:r,baseProps:n,entry:i,index:s,dataKey:a}=e,o=qJ(hie),l=qJ(pie),c=r&&String(s)===o&&(null==l||a===l),u=c?r:t;return q.createElement(tce,gce({},n,{name:String(n.name)},i,{isActive:c,option:u,index:s,dataKey:a}))}function kce(e){var{shape:t,baseProps:r,entry:n,index:i,dataKey:s}=e;return q.createElement(tce,gce({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:i,dataKey:s}))}function Ace(e){var{data:t,props:r}=e,n=bce(VQ(r),fce),{shape:i,dataKey:s,activeBar:a}=r,{onMouseEnter:o,onClick:l,onMouseLeave:c}=r,u=bce(r,pce),d=qoe(o,s),h=Voe(c),f=Koe(l,s);return t?q.createElement(q.Fragment,null,t.map(((e,t)=>q.createElement(JQ,gce({key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value,"-").concat(t),className:"recharts-bar-rectangle"},NX(u,e,t),{onMouseEnter:d(e,t),onMouseLeave:h(e,t),onClick:f(e,t)}),a?q.createElement(Tce,{shape:i,activeBar:a,baseProps:n,entry:e,index:t,dataKey:s}):q.createElement(kce,{shape:i,baseProps:n,entry:e,index:t,dataKey:s}))))):null}function _ce(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:i,isAnimationActive:s,animationBegin:a,animationDuration:o,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=t,d=r.current,h=u4(t,"recharts-bar-"),[f,p]=q.useState(!1),g=!f,m=q.useCallback((()=>{"function"==typeof c&&c(),p(!1)}),[c]),y=q.useCallback((()=>{"function"==typeof u&&u(),p(!0)}),[u]);return q.createElement(Ece,{showLabels:g,rects:n},q.createElement(c4,{animationId:h,begin:a,duration:o,isActive:s,easing:l,onAnimationEnd:m,onAnimationStart:y,key:h},(e=>{var s=1===e?n:null==n?void 0:n.map(((t,r)=>{var n=d&&d[r];if(n)return yce(yce({},t),{},{x:xX(n.x,t.x,e),y:xX(n.y,t.y,e),width:xX(n.width,t.width,e),height:xX(n.height,t.height,e)});if("horizontal"===i){var s=xX(0,t.height,e);return yce(yce({},t),{},{y:t.y+t.height-s,height:s})}var a=xX(0,t.width,e);return yce(yce({},t),{},{width:a})}));return e>0&&(r.current=null!=s?s:null),null==s?null:q.createElement(JQ,null,q.createElement(Ace,{props:t,data:s}))})),q.createElement(Aae,{label:t.label}),t.children)}function Cce(e){var t=q.useRef(null);return q.createElement(_ce,{previousRectanglesRef:t,props:e})}var Pce=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:C1(e,t)}};class Dce extends q.PureComponent{render(){var{hide:e,data:t,dataKey:r,className:n,xAxisId:i,yAxisId:s,needClip:a,background:o,id:l}=this.props;if(e||null==t)return null;var c=rp("recharts-bar",n),u=l;return q.createElement(JQ,{className:c,id:l},a&&q.createElement("defs",null,q.createElement(uce,{clipPathId:u,xAxisId:i,yAxisId:s})),q.createElement(JQ,{className:"recharts-bar-rectangles",clipPath:a?"url(#clipPath-".concat(u,")"):void 0},q.createElement(Sce,{data:t,dataKey:r,background:o,allOtherBarProps:this.props}),q.createElement(Cce,this.props)))}}var Rce={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!g3,legendType:"rect",minPointSize:0,xAxisId:0,yAxisId:0};function Ice(e){var t,{xAxisId:r,yAxisId:n,hide:i,legendType:s,minPointSize:a,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:h}=cce(r,n),f=j2(),p=i2(),g=koe(e.children,bse),m=qJ((t=>Wce(t,r,n,p,e.id,g)));if("vertical"!==f&&"horizontal"!==f)return null;var y=null==m?void 0:m[0];return t=null==y||null==y.height||null==y.width?0:"vertical"===f?y.height/2:y.width/2,q.createElement(lce,{xAxisId:r,yAxisId:n,data:m,dataPointFormatter:Pce,errorBarOffset:t},q.createElement(Dce,gce({},e,{layout:f,needClip:h,data:m,xAxisId:r,yAxisId:n,hide:i,legendType:s,minPointSize:a,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function Oce(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:s,xAxis:a,yAxis:o,xAxisTicks:l,yAxisTicks:c,stackedData:u,displayedData:d,offset:h,cells:f,parentViewBox:p}=e,g="horizontal"===t?o:a,m=u?g.scale.domain():null,y=(e=>{var{numericAxis:t}=e,r=t.scale.domain();if("number"===t.type){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]})({numericAxis:g});return d.map(((e,d)=>{var g,v,b,w,x,S;u?g=((e,t)=>{if(!t||2!==t.length||!gX(t[0])||!gX(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!gX(e[0])||e[0]<r)&&(i[0]=r),(!gX(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i})(u[d],m):(g=C1(e,r),Array.isArray(g)||(g=[y,g]));var E=rce(n,0)(g[1],d);if("horizontal"===t){var T,[k,A]=[o.scale(g[0]),o.scale(g[1])];v=L1({axis:a,ticks:l,bandSize:s,offset:i.offset,entry:e,index:d}),b=null!==(T=null!=A?A:k)&&void 0!==T?T:void 0,w=i.size;var _=k-A;if(x=fX(_)?0:_,S={x:v,y:h.top,width:w,height:h.height},Math.abs(E)>0&&Math.abs(x)<Math.abs(E)){var C=hX(x||E)*(Math.abs(E)-Math.abs(x));b-=C,x+=C}}else{var[P,D]=[a.scale(g[0]),a.scale(g[1])];if(v=P,b=L1({axis:o,ticks:c,bandSize:s,offset:i.offset,entry:e,index:d}),w=D-P,x=i.size,S={x:h.left,y:b,width:h.width,height:x},Math.abs(E)>0&&Math.abs(w)<Math.abs(E))w+=hX(w||E)*(Math.abs(E)-Math.abs(w))}return null==v||null==b||null==w||null==x?null:yce(yce({},e),{},{x:v,y:b,width:w,height:x,value:u?g:g[1],payload:e,background:S,tooltipPosition:{x:v+w/2,y:b+x/2},parentViewBox:p},f&&f[d]&&f[d].props)})).filter(Boolean)}function Nce(e){var t=j3(e,Rce),r=i2();return q.createElement(Zoe,{id:t.id,type:"bar"},(e=>{return q.createElement(q.Fragment,null,q.createElement(Qoe,{legendPayload:wce(t)}),q.createElement(Hoe,{fn:xce,args:t}),q.createElement(ole,{type:"bar",id:e,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:(n=t.stackId,null==n?void 0:String(n)),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),q.createElement(Ice,gce({},t,{id:e})));var n}))}var jce=q.memo(Nce);function Lce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lce(Object(r),!0).forEach((function(t){Fce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fce(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}jce.displayName="Bar";var Uce=QJ([gte,(e,t,r,n,i)=>i],((e,t)=>e.filter((e=>"bar"===e.type)).find((e=>e.id===t)))),Bce=QJ([Uce],(e=>null==e?void 0:e.maxBarSize)),$ce=(e,t,r)=>{var n=null!=r?r:e;if(!EX(n))return bX(n,t,0)},zce=QJ([N2,gte,(e,t)=>t,(e,t,r)=>r,(e,t,r,n)=>n],((e,t,r,n,i)=>t.filter((t=>"horizontal"===e?t.xAxisId===r:t.yAxisId===n)).filter((e=>e.isPanorama===i)).filter((e=>!1===e.hide)).filter((e=>"bar"===e.type)))),qce=QJ([zce,e=>e.rootProps.barSize,(e,t,r)=>"horizontal"===N2(e)?Ure(e,"xAxis",t):Ure(e,"yAxis",r)],((e,t,r)=>{var n=e.filter(Yee),i=e.filter((e=>null==e.stackId)),s=n.reduce(((e,t)=>(e[t.stackId]||(e[t.stackId]=[]),e[t.stackId].push(t),e)),{});return[...Object.entries(s).map((e=>{var[n,i]=e;return{stackId:n,dataKeys:i.map((e=>e.dataKey)),barSize:$ce(t,r,i[0].barSize)}})),...i.map((e=>({stackId:void 0,dataKeys:[e.dataKey].filter((e=>null!=e)),barSize:$ce(t,r,e.barSize)})))]})),Vce=(e,t,r,n)=>{var i,s;return"horizontal"===N2(e)?(i=Gre(e,"xAxis",t,n),s=Hre(e,"xAxis",t,n)):(i=Gre(e,"yAxis",r,n),s=Hre(e,"yAxis",r,n)),B1(i,s)};var Kce=QJ([qce,hee,e=>e.rootProps.barGap,fee,(e,t,r,n,i)=>{var s,a,o=Uce(e,t,r,n,i);if(null!=o){var l,c,u=N2(e),d=hee(e),{maxBarSize:h}=o,f=EX(h)?d:h;return"horizontal"===u?(l=Gre(e,"xAxis",t,n),c=Hre(e,"xAxis",t,n)):(l=Gre(e,"yAxis",r,n),c=Hre(e,"yAxis",r,n)),null!==(s=null!==(a=B1(l,c,!0))&&void 0!==a?a:f)&&void 0!==s?s:0}},Vce,Bce],((e,t,r,n,i,s,a)=>{var o=EX(a)?t:a,l=function(e,t,r,n,i){var s=n.length;if(!(s<1)){var a,o=bX(e,r,0,!0),l=[];if(v2(n[0].barSize)){var c=!1,u=r/s,d=n.reduce(((e,t)=>e+(t.barSize||0)),0);(d+=(s-1)*o)>=r&&(d-=(s-1)*o,o=0),d>=r&&u>0&&(c=!0,d=s*(u*=.9));var h={offset:((r-d)/2|0)-o,size:0};a=n.reduce(((e,t)=>{var r,n=[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:h.offset+h.size+o,size:c?u:null!==(r=t.barSize)&&void 0!==r?r:0}}];return h=n[n.length-1].position,n}),l)}else{var f=bX(t,r,0,!0);r-2*f-(s-1)*o<=0&&(o=0);var p=(r-2*f-(s-1)*o)/s;p>1&&(p>>=0);var g=v2(i)?Math.min(p,i):p;a=n.reduce(((e,t,r)=>[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:f+(p+o)*r+(p-g)/2,size:g}}]),l)}return a}}(r,n,i!==s?i:s,e,o);return i!==s&&null!=l&&(l=l.map((e=>Mce(Mce({},e),{},{position:Mce(Mce({},e.position),{},{offset:e.position.offset-i/2})})))),l})),Hce=QJ([Kce,Uce],((e,t)=>{if(null!=e&&null!=t){var r=e.find((e=>e.stackId===t.stackId&&null!=t.dataKey&&e.dataKeys.includes(t.dataKey)));if(null!=r)return r.position}})),Gce=QJ([(e,t,r,n)=>"horizontal"===N2(e)?Nte(e,"yAxis",r,n):Nte(e,"xAxis",t,n),Uce],((e,t)=>{var r=Vee(t);if(e&&null!=r&&null!=t){var{stackId:n}=t;if(null!=n){var i=e[n];if(i){var{stackedData:s}=i;if(s)return s.find((e=>e.key===r))}}}})),Wce=QJ([e2,r2,(e,t,r,n)=>Gre(e,"xAxis",t,n),(e,t,r,n)=>Gre(e,"yAxis",r,n),(e,t,r,n)=>Hre(e,"xAxis",t,n),(e,t,r,n)=>Hre(e,"yAxis",r,n),Hce,N2,p9,Vce,Gce,Uce,(e,t,r,n,i,s)=>s],((e,t,r,n,i,s,a,o,l,c,u,d,h)=>{var{chartData:f,dataStartIndex:p,dataEndIndex:g}=l;if(null!=d&&null!=a&&null!=t&&("horizontal"===o||"vertical"===o)&&null!=r&&null!=n&&null!=i&&null!=s&&null!=c){var m,{data:y}=d;if(null!=(m=null!=y&&y.length>0?y:null==f?void 0:f.slice(p,g+1)))return Oce({layout:o,barSettings:d,pos:a,parentViewBox:t,bandSize:c,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:s,stackedData:u,displayedData:m,offset:e,cells:h})}})),Qce=e=>{var{chartData:t}=e,r=UJ(),n=i2();return q.useEffect((()=>n?()=>{}:(r(ese(t)),()=>{r(ese(void 0))})),[t,r,n]),null},Yce={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Xce=_0({name:"brush",initialState:Yce,reducers:{setBrushSettings:(e,t)=>null==t.payload?Yce:t.payload}});Xce.actions;var Jce,Zce,eue,tue=Xce.reducer;class rue{static create(e){return new rue(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+n;case"end":var i=this.bandwidth?this.bandwidth():0;return this.scale(e)+i}if(t){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var t=this.range(),r=t[0],n=t[t.length-1];return r<=n?e>=r&&e<=n:e>=n&&e<=r}}Jce=rue,eue=1e-4,(Zce=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(Zce="EPS"))in Jce?Object.defineProperty(Jce,Zce,{value:eue,enumerable:!0,configurable:!0,writable:!0}):Jce[Zce]=eue;var nue=_0({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=i0(e).dots.findIndex((e=>e===t.payload));-1!==r&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=i0(e).areas.findIndex((e=>e===t.payload));-1!==r&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=i0(e).lines.findIndex((e=>e===t.payload));-1!==r&&e.lines.splice(r,1)}}});nue.actions;var iue=nue.reducer,sue=q.createContext(void 0),aue=e=>{var{children:t}=e,[r]=q.useState("".concat(vX("recharts"),"-clip")),n=qle();if(null==n)return null;var{x:i,y:s,width:a,height:o}=n;return q.createElement(sue.Provider,{value:r},q.createElement("defs",null,q.createElement("clipPath",{id:r},q.createElement("rect",{x:i,y:s,height:o,width:a}))),t)};function oue(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function lue(e,t,r){if(t<1)return[];if(1===t&&void 0===r)return e;for(var n=[],i=0;i<e.length;i+=t){if(void 0!==r&&!0!==r(e[i]))return;n.push(e[i])}return n}function cue(e,t,r){return function(e){var{width:t,height:r}=e,n=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),i=n*Math.PI/180,s=Math.atan(r/t),a=i>s&&i<Math.PI-s?r/Math.sin(i):t/Math.cos(i);return Math.abs(a)}({width:e.width+t.width,height:e.height+t.height},r)}function uue(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-i)<=0}function due(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?due(Object(r),!0).forEach((function(t){fue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):due(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fue(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pue(e,t,r){var n,{tick:i,ticks:s,viewBox:a,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:h}=e;if(!s||!s.length||!i)return[];if(gX(c)||g3)return null!==(n=function(e,t){return lue(e,t+1)}(s,gX(c)?c:0))&&void 0!==n?n:[];var f=[],p="top"===l||"bottom"===l?"width":"height",g=d&&"width"===p?Cse(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},m=(e,n)=>{var i="function"==typeof u?u(e.value,n):e.value;return"width"===p?cue(Cse(i,{fontSize:t,letterSpacing:r}),g,h):Cse(i,{fontSize:t,letterSpacing:r})[p]},y=s.length>=2?hX(s[1].coordinate-s[0].coordinate):1,v=function(e,t,r){var n="width"===r,{x:i,y:s,width:a,height:o}=e;return 1===t?{start:n?i:s,end:n?i+a:s+o}:{start:n?i+a:s+o,end:n?i:s}}(a,y,p);return"equidistantPreserveStart"===c?function(e,t,r,n,i){for(var s,a=(n||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,h=function(){var t=null==n?void 0:n[c];if(void 0===t)return{v:lue(n,u)};var s,a=c,h=()=>(void 0===s&&(s=r(t,a)),s),f=t.coordinate,p=0===c||uue(e,f,h,d,l);p||(c=0,d=o,u+=1),p&&(d=f+e*(h()/2+i),c+=u)};u<=a.length;)if(s=h())return s.v;return[]}(y,v,m,s,o):(f="preserveStart"===c||"preserveStartEnd"===c?function(e,t,r,n,i,s){var a=(n||[]).slice(),o=a.length,{start:l,end:c}=t;if(s){var u=n[o-1],d=r(u,o-1),h=e*(u.coordinate+e*d/2-c);a[o-1]=u=hue(hue({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate}),uue(e,u.tickCoord,(()=>d),l,c)&&(c=u.tickCoord-e*(d/2+i),a[o-1]=hue(hue({},u),{},{isShow:!0}))}for(var f=s?o-1:o,p=function(t){var n,s=a[t],o=()=>(void 0===n&&(n=r(s,t)),n);if(0===t){var u=e*(s.coordinate-e*o()/2-l);a[t]=s=hue(hue({},s),{},{tickCoord:u<0?s.coordinate-u*e:s.coordinate})}else a[t]=s=hue(hue({},s),{},{tickCoord:s.coordinate});uue(e,s.tickCoord,o,l,c)&&(l=s.tickCoord+e*(o()/2+i),a[t]=hue(hue({},s),{},{isShow:!0}))},g=0;g<f;g++)p(g);return a}(y,v,m,s,o,"preserveStartEnd"===c):function(e,t,r,n,i){for(var s=(n||[]).slice(),a=s.length,{start:o}=t,{end:l}=t,c=function(t){var n,c=s[t],u=()=>(void 0===n&&(n=r(c,t)),n);if(t===a-1){var d=e*(c.coordinate+e*u()/2-l);s[t]=c=hue(hue({},c),{},{tickCoord:d>0?c.coordinate-d*e:c.coordinate})}else s[t]=c=hue(hue({},c),{},{tickCoord:c.coordinate});uue(e,c.tickCoord,u,o,l)&&(l=c.tickCoord-e*(u()/2+i),s[t]=hue(hue({},c),{},{isShow:!0}))},u=a-1;u>=0;u--)c(u);return s}(y,v,m,s,o),f.filter((e=>e.isShow)))}var gue=["axisLine","width","height","className","hide","ticks"],mue=["viewBox"],yue=["viewBox"];function vue(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function bue(){return bue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bue.apply(null,arguments)}function wue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wue(Object(r),!0).forEach((function(t){Sue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Sue(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Eue={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function Tue(e){var{x:t,y:r,width:n,height:i,orientation:s,mirror:a,axisLine:o,otherSvgProps:l}=e;if(!o)return null;var c=xue(xue(xue({},l),VQ(o)),{},{fill:"none"});if("top"===s||"bottom"===s){var u=+("top"===s&&!a||"bottom"===s&&a);c=xue(xue({},c),{},{x1:t,y1:r+u*i,x2:t+n,y2:r+u*i})}else{var d=+("left"===s&&!a||"right"===s&&a);c=xue(xue({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+i})}return q.createElement("line",bue({},c,{className:rp("recharts-cartesian-axis-line",dX(o,"className"))}))}function kue(e){var t,{option:r,tickProps:n,value:i}=e,s=rp(n.className,"recharts-cartesian-axis-tick-value");if(q.isValidElement(r))t=q.cloneElement(r,xue(xue({},n),{},{className:s}));else if("function"==typeof r)t=r(xue(xue({},n),{},{className:s}));else{var a="recharts-cartesian-axis-tick-value";"boolean"!=typeof r&&(a=rp(a,null==r?void 0:r.className)),t=q.createElement(Yse,bue({},n,{className:a}),i)}return t}function Aue(e){var{ticks:t=[],tick:r,tickLine:n,stroke:i,tickFormatter:s,unit:a,padding:o,tickTextProps:l,orientation:c,mirror:u,x:d,y:h,width:f,height:p,tickSize:g,tickMargin:m,fontSize:y,letterSpacing:v,getTicksConfig:b,events:w}=e,x=pue(xue(xue({},b),{},{ticks:t}),y,v),S=function(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}(c,u),E=function(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}(c,u),T=VQ(b),k=KQ(r),A={};"object"==typeof n&&(A=n);var _=xue(xue({},T),{},{fill:"none"},A),C=x.map(((e,t)=>{var{line:y,tick:v}=function(e,t,r,n,i,s,a,o,l){var c,u,d,h,f,p,g=o?-1:1,m=e.tickSize||a,y=gX(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":c=u=e.coordinate,p=(d=(h=r+ +!o*i)-g*m)-g*l,f=y;break;case"left":d=h=e.coordinate,f=(c=(u=t+ +!o*n)-g*m)-g*l,p=y;break;case"right":d=h=e.coordinate,f=(c=(u=t+ +o*n)+g*m)+g*l,p=y;break;default:c=u=e.coordinate,p=(d=(h=r+ +o*i)+g*m)+g*l,f=y}return{line:{x1:c,y1:d,x2:u,y2:h},tick:{x:f,y:p}}}(e,d,h,f,p,c,g,u,m),b=xue(xue(xue(xue({textAnchor:S,verticalAnchor:E},T),{},{stroke:"none",fill:i},k),v),{},{index:t,payload:e,visibleTicksCount:x.length,tickFormatter:s,padding:o},l);return q.createElement(JQ,bue({className:"recharts-cartesian-axis-tick",key:"tick-".concat(e.value,"-").concat(e.coordinate,"-").concat(e.tickCoord)},NX(w,e,t)),n&&q.createElement("line",bue({},_,y,{className:rp("recharts-cartesian-axis-tick-line",dX(n,"className"))})),r&&q.createElement(kue,{option:r,tickProps:b,value:"".concat("function"==typeof s?s(e.value,t):e.value).concat(a||"")}))}));return C.length>0?q.createElement("g",{className:"recharts-cartesian-axis-ticks"},C):null}var _ue=q.forwardRef(((e,t)=>{var{axisLine:r,width:n,height:i,className:s,hide:a,ticks:o}=e,l=vue(e,gue),[c,u]=q.useState(""),[d,h]=q.useState(""),f=q.useRef(null);q.useImperativeHandle(t,(()=>({getCalculatedWidth:()=>{var t;return(e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:s=0}=e,a=0;if(t){Array.from(t).forEach((e=>{if(e){var t=e.getBoundingClientRect();t.width>a&&(a=t.width)}}));var o=r?r.getBoundingClientRect().width:0,l=a+(i+s)+o+(r?n:0);return Math.round(l)}return 0})({ticks:f.current,label:null===(t=e.labelRef)||void 0===t?void 0:t.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}})));var p=q.useCallback((e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");f.current=t;var r=t[0];if(r){var n=window.getComputedStyle(r),i=n.fontSize,s=n.letterSpacing;i===c&&s===d||(u(i),h(s))}}}),[c,d]);return a||null!=n&&n<=0||null!=i&&i<=0?null:q.createElement(JQ,{className:rp("recharts-cartesian-axis",s),ref:p},q.createElement(Tue,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:VQ(e)}),q.createElement(Aue,{ticks:o,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:c,letterSpacing:d,getTicksConfig:e,events:l}),q.createElement(nae,{x:e.x,y:e.y,width:e.width,height:e.height},q.createElement(dae,{label:e.label,labelRef:e.labelRef}),e.children))})),Cue=q.memo(_ue,((e,t)=>{var{viewBox:r}=e,n=vue(e,mue),{viewBox:i}=t,s=vue(t,yue);return oue(r,i)&&oue(n,s)})),Pue=q.forwardRef(((e,t)=>{var r=j3(e,Eue);return q.createElement(Cue,bue({},r,{ref:t}))}));Pue.displayName="CartesianAxis";var Due=["x1","y1","x2","y2","key"],Rue=["offset"],Iue=["xAxisId","yAxisId"],Oue=["xAxisId","yAxisId"];function Nue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nue(Object(r),!0).forEach((function(t){Lue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lue(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mue(){return Mue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mue.apply(null,arguments)}function Fue(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Uue=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:r,x:n,y:i,width:s,height:a,ry:o}=e;return q.createElement("rect",{x:n,y:i,ry:o,width:s,height:a,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Bue(e,t){var r;if(q.isValidElement(e))r=q.cloneElement(e,t);else if("function"==typeof e)r=e(t);else{var{x1:n,y1:i,x2:s,y2:a,key:o}=t,l=Fue(t,Due),c=Fue(VQ(l),Rue);r=q.createElement("line",Mue({},c,{x1:n,y1:i,x2:s,y2:a,fill:"none",key:o}))}return r}function $ue(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var s=Fue(e,Iue),a=i.map(((e,i)=>{var a=jue(jue({},s),{},{x1:t,y1:e,x2:t+r,y2:e,key:"line-".concat(i),index:i});return Bue(n,a)}));return q.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function zue(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var s=Fue(e,Oue),a=i.map(((e,i)=>{var a=jue(jue({},s),{},{x1:e,y1:t,x2:e,y2:t+r,key:"line-".concat(i),index:i});return Bue(n,a)}));return q.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function que(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:s,height:a,horizontalPoints:o,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var c=o.map((e=>Math.round(e+i-i))).sort(((e,t)=>e-t));i!==c[0]&&c.unshift(0);var u=c.map(((e,o)=>{var l=!c[o+1]?i+a-e:c[o+1]-e;if(l<=0)return null;var u=o%t.length;return q.createElement("rect",{key:"react-".concat(o),y:e,x:n,height:l,width:s,stroke:"none",fill:t[u],fillOpacity:r,className:"recharts-cartesian-grid-bg"})}));return q.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function Vue(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:s,width:a,height:o,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var c=l.map((e=>Math.round(e+i-i))).sort(((e,t)=>e-t));i!==c[0]&&c.unshift(0);var u=c.map(((e,t)=>{var l=!c[t+1]?i+a-e:c[t+1]-e;if(l<=0)return null;var u=t%r.length;return q.createElement("rect",{key:"react-".concat(t),x:e,y:s,width:l,height:o,stroke:"none",fill:r[u],fillOpacity:n,className:"recharts-cartesian-grid-bg"})}));return q.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var Kue=(e,t)=>{var{xAxis:r,width:n,height:i,offset:s}=e;return D1(pue(jue(jue(jue({},Eue),r),{},{ticks:R1(r,!0),viewBox:{x:0,y:0,width:n,height:i}})),s.left,s.left+s.width,t)},Hue=(e,t)=>{var{yAxis:r,width:n,height:i,offset:s}=e;return D1(pue(jue(jue(jue({},Eue),r),{},{ticks:R1(r,!0),viewBox:{x:0,y:0,width:n,height:i}})),s.top,s.top+s.height,t)},Gue={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Wue(e){var t=I2(),r=O2(),n=R2(),i=jue(jue({},j3(e,Gue)),{},{x:gX(e.x)?e.x:n.left,y:gX(e.y)?e.y:n.top,width:gX(e.width)?e.width:n.width,height:gX(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:a,x:o,y:l,width:c,height:u,syncWithTicks:d,horizontalValues:h,verticalValues:f}=i,p=i2(),g=qJ((e=>Vre(e,"xAxis",s,p))),m=qJ((e=>Vre(e,"yAxis",a,p)));if(!gX(c)||c<=0||!gX(u)||u<=0||!gX(o)||o!==+o||!gX(l)||l!==+l)return null;var y=i.verticalCoordinatesGenerator||Kue,v=i.horizontalCoordinatesGenerator||Hue,{horizontalPoints:b,verticalPoints:w}=i;if(!(b&&b.length||"function"!=typeof v)){var x=h&&h.length,S=v({yAxis:m?jue(jue({},m),{},{ticks:x?h:m.ticks}):void 0,width:t,height:r,offset:n},!!x||d);d2(Array.isArray(S),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof S,"]")),Array.isArray(S)&&(b=S)}if(!(w&&w.length||"function"!=typeof y)){var E=f&&f.length,T=y({xAxis:g?jue(jue({},g),{},{ticks:E?f:g.ticks}):void 0,width:t,height:r,offset:n},!!E||d);d2(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(w=T)}return q.createElement("g",{className:"recharts-cartesian-grid"},q.createElement(Uue,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),q.createElement(que,Mue({},i,{horizontalPoints:b})),q.createElement(Vue,Mue({},i,{verticalPoints:w})),q.createElement($ue,Mue({},i,{offset:n,horizontalPoints:b,xAxis:g,yAxis:m})),q.createElement(zue,Mue({},i,{offset:n,verticalPoints:w,xAxis:g,yAxis:m})))}Wue.displayName="CartesianGrid";var Que=(e,t,r,n)=>Gre(e,"xAxis",t,n),Yue=(e,t,r,n)=>Hre(e,"xAxis",t,n),Xue=(e,t,r,n)=>Gre(e,"yAxis",r,n),Jue=(e,t,r,n)=>Hre(e,"yAxis",r,n),Zue=QJ([N2,Que,Xue,Yue,Jue],((e,t,r,n,i)=>P1(e,"xAxis")?B1(t,n,!1):B1(r,i,!1)));function ede(e){return"line"===e.type}var tde=QJ([gte,(e,t,r,n,i)=>i],((e,t)=>e.filter(ede).find((e=>e.id===t)))),rde=QJ([N2,Que,Xue,Yue,Jue,tde,Zue,p9],((e,t,r,n,i,s,a,o)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=o;if(null!=s&&null!=t&&null!=r&&null!=n&&null!=i&&0!==n.length&&0!==i.length&&null!=a){var d,{dataKey:h,data:f}=s;if(null!=(d=null!=f&&f.length>0?f:null==l?void 0:l.slice(c,u+1)))return function(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:s,dataKey:a,bandSize:o,displayedData:l}=e;return l.map(((e,l)=>{var c=C1(e,a);if("horizontal"===t)return{x:j1({axis:r,ticks:i,bandSize:o,entry:e,index:l}),y:EX(c)?null:n.scale(c),value:c,payload:e};var u=EX(c)?null:r.scale(c),d=j1({axis:n,ticks:s,bandSize:o,entry:e,index:l});return null==u||null==d?null:{x:u,y:d,value:c,payload:e}})).filter(Boolean)}({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:h,bandSize:a,displayedData:d})}}));var nde=["id"],ide=["type","layout","connectNulls","needClip"],sde=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function ade(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ode(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ade(Object(r),!0).forEach((function(t){lde(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ade(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lde(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cde(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ude(){return ude=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ude.apply(null,arguments)}var dde=e=>{var{dataKey:t,name:r,stroke:n,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:n,value:z1(r,t),payload:e}]};function hde(e){var{dataKey:t,data:r,stroke:n,strokeWidth:i,fill:s,name:a,hide:o,unit:l}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:s,dataKey:t,nameKey:void 0,name:z1(a,t),hide:o,type:e.tooltipType,color:e.stroke,unit:l}}}var fde=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function pde(e,t){for(var r=e.length%2!=0?[...e,0]:e,n=[],i=0;i<t;++i)n=[...n,...r];return n}function gde(e){var{clipPathId:t,points:r,props:n}=e,{dot:i,dataKey:s,needClip:a}=n;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(r,i))return null;var o,l=cde(n,nde),c=Aoe(i),u=VQ(l),d=null==(o=i)?null:q.isValidElement(o)?HQ(o.props):"object"!=typeof o||Array.isArray(o)?null:HQ(o),h=r.map(((e,t)=>{var n=ode(ode(ode({key:"dot-".concat(t),r:3},u),d),{},{index:t,cx:e.x,cy:e.y,dataKey:s,value:e.value,payload:e.payload,points:r});return function(e,t){var r;if(q.isValidElement(e))r=q.cloneElement(e,t);else if("function"==typeof e)r=e(t);else{var n=rp("recharts-line-dot","boolean"!=typeof e?e.className:"");r=q.createElement(Cae,ude({},t,{className:n}))}return r}(i,n)})),f={clipPath:a?"url(#clipPath-".concat(c?"":"dots-").concat(t,")"):void 0};return q.createElement(JQ,ude({className:"recharts-line-dots",key:"dots"},f),h)}function mde(e){var{showLabels:t,children:r,points:n}=e,i=q.useMemo((()=>null==n?void 0:n.map((e=>{var t={x:e.x,y:e.y,width:0,height:0};return ode(ode({},t),{},{value:e.value,payload:e.payload,viewBox:t,parentViewBox:void 0,fill:void 0})}))),[n]);return q.createElement(Sae,{value:t?i:null},r)}function yde(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:i,props:s}=e,{type:a,layout:o,connectNulls:l,needClip:c}=s,u=ode(ode({},HQ(cde(s,ide))),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(t,")"):void 0,points:n,type:a,layout:o,connectNulls:l,strokeDasharray:null!=i?i:s.strokeDasharray});return q.createElement(q.Fragment,null,(null==n?void 0:n.length)>1&&q.createElement(A3,ude({},u,{pathRef:r})),q.createElement(gde,{points:n,clipPathId:t,props:s}))}function vde(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:s}=e,{points:a,strokeDasharray:o,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:d,animateNewValues:h,width:f,height:p,onAnimationEnd:g,onAnimationStart:m}=r,y=i.current,v=u4(r,"recharts-line-"),[b,w]=q.useState(!1),x=!b,S=q.useCallback((()=>{"function"==typeof g&&g(),w(!1)}),[g]),E=q.useCallback((()=>{"function"==typeof m&&m(),w(!0)}),[m]),T=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}(n.current),k=s.current;return q.createElement(mde,{points:a,showLabels:x},r.children,q.createElement(c4,{animationId:v,begin:c,duration:u,isActive:l,easing:d,onAnimationEnd:S,onAnimationStart:E,key:v},(e=>{var c,u=xX(k,T+k,e),d=Math.min(u,T);if(l)if(o){var g="".concat(o).split(/[,\s]+/gim).map((e=>parseFloat(e)));c=((e,t,r)=>{var n=r.reduce(((e,t)=>e+t));if(!n)return fde(t,e);for(var i=Math.floor(e/n),s=e%n,a=t-e,o=[],l=0,c=0;l<r.length;c+=r[l],++l)if(c+r[l]>s){o=[...r.slice(0,l),s-c];break}var u=o.length%2==0?[0,a]:[a];return[...pde(r,i),...o,...u].map((e=>"".concat(e,"px"))).join(", ")})(d,T,g)}else c=fde(T,d);else c=null==o?void 0:String(o);if(y){var m=y.length/a.length,v=1===e?a:a.map(((t,r)=>{var n=Math.floor(r*m);if(y[n]){var i=y[n];return ode(ode({},t),{},{x:xX(i.x,t.x,e),y:xX(i.y,t.y,e)})}return ode(ode({},t),{},h?{x:xX(2*f,t.x,e),y:xX(p/2,t.y,e)}:{x:t.x,y:t.y})}));return i.current=v,q.createElement(yde,{props:r,points:v,clipPathId:t,pathRef:n,strokeDasharray:c})}return e>0&&T>0&&(i.current=a,s.current=d),q.createElement(yde,{props:r,points:a,clipPathId:t,pathRef:n,strokeDasharray:c})})),q.createElement(Aae,{label:r.label}))}function bde(e){var{clipPathId:t,props:r}=e,n=q.useRef(null),i=q.useRef(0),s=q.useRef(null);return q.createElement(vde,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:s})}var wde=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:C1(e.payload,t)});class xde extends q.Component{render(){var{hide:e,dot:t,points:r,className:n,xAxisId:i,yAxisId:s,top:a,left:o,width:l,height:c,id:u,needClip:d}=this.props;if(e)return null;var h=rp("recharts-line",n),f=u,{r:p,strokeWidth:g}=function(e){var t=KQ(e);if(null!=t){var{r:r,strokeWidth:n}=t,i=Number(r),s=Number(n);return(Number.isNaN(i)||i<0)&&(i=3),(Number.isNaN(s)||s<0)&&(s=2),{r:i,strokeWidth:s}}return{r:3,strokeWidth:2}}(t),m=Aoe(t),y=2*p+g;return q.createElement(q.Fragment,null,q.createElement(JQ,{className:h},d&&q.createElement("defs",null,q.createElement(uce,{clipPathId:f,xAxisId:i,yAxisId:s}),!m&&q.createElement("clipPath",{id:"clipPath-dots-".concat(f)},q.createElement("rect",{x:o-y/2,y:a-y/2,width:l+y,height:c+y}))),q.createElement(lce,{xAxisId:i,yAxisId:s,data:r,dataPointFormatter:wde,errorBarOffset:0},q.createElement(bde,{props:this.props,clipPathId:f}))),q.createElement(Gle,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var Sde={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!g3,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function Ede(e){var t=j3(e,Sde),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:a,connectNulls:o,dot:l,hide:c,isAnimationActive:u,label:d,legendType:h,xAxisId:f,yAxisId:p,id:g}=t,m=cde(t,sde),{needClip:y}=cce(f,p),v=qle(),b=j2(),w=i2(),x=qJ((e=>rde(e,f,p,w,g)));if("horizontal"!==b&&"vertical"!==b||null==x||null==v)return null;var{height:S,width:E,x:T,y:k}=v;return q.createElement(xde,ude({},m,{id:g,connectNulls:o,dot:l,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:a,isAnimationActive:u,hide:c,label:d,legendType:h,xAxisId:f,yAxisId:p,points:x,layout:b,height:S,width:E,left:T,top:k,needClip:y}))}function Tde(e){var t=j3(e,Sde),r=i2();return q.createElement(Zoe,{id:t.id,type:"line"},(e=>q.createElement(q.Fragment,null,q.createElement(Qoe,{legendPayload:dde(t)}),q.createElement(Hoe,{fn:hde,args:t}),q.createElement(ole,{type:"line",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),q.createElement(Ede,ude({},t,{id:e})))))}var kde=q.memo(Tde);kde.displayName="Line";var Ade=["dangerouslySetInnerHTML","ticks"],_de=["id"],Cde=["domain"],Pde=["domain"];function Dde(){return Dde=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dde.apply(null,arguments)}function Rde(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Ide(e){var t=UJ();return q.useLayoutEffect((()=>(t(Ole(e)),()=>{t(Nle(e))})),[e,t]),null}var Ode=e=>{var{xAxisId:t,className:r}=e,n=qJ(r2),i=i2(),s="xAxis",a=qJ((e=>Are(e,s,t,i))),o=qJ((e=>Kre(e,s,t,i))),l=qJ((e=>Ore(e,t))),c=qJ((e=>Lre(e,t))),u=qJ((e=>ite(e,t)));if(null==l||null==c||null==u)return null;var d=Rde(e,Ade),h=Rde(u,_de);return q.createElement(Pue,Dde({},d,h,{scale:a,x:c.x,y:c.y,width:l.width,height:l.height,className:rp("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o}))},Nde={allowDataOverflow:nte.allowDataOverflow,allowDecimals:nte.allowDecimals,allowDuplicatedCategory:nte.allowDuplicatedCategory,height:nte.height,hide:!1,mirror:nte.mirror,orientation:nte.orientation,padding:nte.padding,reversed:nte.reversed,scale:nte.scale,tickCount:nte.tickCount,type:nte.type,xAxisId:0},jde=e=>{var t,r,n,i,s,a=j3(e,Nde);return q.createElement(q.Fragment,null,q.createElement(Ide,{interval:null!==(t=a.interval)&&void 0!==t?t:"preserveEnd",id:a.xAxisId,scale:a.scale,type:a.type,padding:a.padding,allowDataOverflow:a.allowDataOverflow,domain:a.domain,dataKey:a.dataKey,allowDuplicatedCategory:a.allowDuplicatedCategory,allowDecimals:a.allowDecimals,tickCount:a.tickCount,includeHidden:null!==(r=a.includeHidden)&&void 0!==r&&r,reversed:a.reversed,ticks:a.ticks,height:a.height,orientation:a.orientation,mirror:a.mirror,hide:a.hide,unit:a.unit,name:a.name,angle:null!==(n=a.angle)&&void 0!==n?n:0,minTickGap:null!==(i=a.minTickGap)&&void 0!==i?i:5,tick:null===(s=a.tick)||void 0===s||s,tickFormatter:a.tickFormatter}),q.createElement(Ode,a))},Lde=(e,t)=>{var{domain:r}=e,n=Rde(e,Cde),{domain:i}=t;return!!oue(n,Rde(t,Pde))&&(Array.isArray(r)&&2===r.length&&Array.isArray(i)&&2===i.length?r[0]===i[0]&&r[1]===i[1]:oue({domain:r},{domain:i}))},Mde=q.memo(jde,Lde);Mde.displayName="XAxis";var Fde=["dangerouslySetInnerHTML","ticks"],Ude=["id"],Bde=["domain"],$de=["domain"];function zde(){return zde=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zde.apply(null,arguments)}function qde(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Vde(e){var t=UJ();return q.useLayoutEffect((()=>(t(jle(e)),()=>{t(Lle(e))})),[e,t]),null}var Kde=e=>{var{yAxisId:t,className:r,width:n,label:i}=e,s=q.useRef(null),a=q.useRef(null),o=qJ(r2),l=i2(),c=UJ(),u="yAxis",d=qJ((e=>Are(e,u,t,l))),h=qJ((e=>Fre(e,t))),f=qJ((e=>Mre(e,t))),p=qJ((e=>Kre(e,u,t,l))),g=qJ((e=>ote(e,t)));if(q.useLayoutEffect((()=>{if("auto"===n&&h&&!aae(i)&&!q.isValidElement(i)&&null!=g){var e=s.current;if(e){var r=e.getCalculatedWidth();Math.round(h.width)!==Math.round(r)&&c(Ule({id:t,width:r}))}}}),[p,h,c,i,t,n,g]),null==h||null==f||null==g)return null;var m=qde(e,Fde),y=qde(g,Ude);return q.createElement(Pue,zde({},m,y,{ref:s,labelRef:a,scale:d,x:f.x,y:f.y,tickTextProps:"auto"===n?{width:void 0}:{width:n},width:h.width,height:h.height,className:rp("recharts-".concat(u," ").concat(u),r),viewBox:o,ticks:p}))},Hde={allowDataOverflow:ate.allowDataOverflow,allowDecimals:ate.allowDecimals,allowDuplicatedCategory:ate.allowDuplicatedCategory,hide:!1,mirror:ate.mirror,orientation:ate.orientation,padding:ate.padding,reversed:ate.reversed,scale:ate.scale,tickCount:ate.tickCount,type:ate.type,width:ate.width,yAxisId:0},Gde=e=>{var t,r,n,i,s,a=j3(e,Hde);return q.createElement(q.Fragment,null,q.createElement(Vde,{interval:null!==(t=a.interval)&&void 0!==t?t:"preserveEnd",id:a.yAxisId,scale:a.scale,type:a.type,domain:a.domain,allowDataOverflow:a.allowDataOverflow,dataKey:a.dataKey,allowDuplicatedCategory:a.allowDuplicatedCategory,allowDecimals:a.allowDecimals,tickCount:a.tickCount,padding:a.padding,includeHidden:null!==(r=a.includeHidden)&&void 0!==r&&r,reversed:a.reversed,ticks:a.ticks,width:a.width,orientation:a.orientation,mirror:a.mirror,hide:a.hide,unit:a.unit,name:a.name,angle:null!==(n=a.angle)&&void 0!==n?n:0,minTickGap:null!==(i=a.minTickGap)&&void 0!==i?i:5,tick:null===(s=a.tick)||void 0===s||s,tickFormatter:a.tickFormatter}),q.createElement(Kde,a))},Wde=(e,t)=>{var{domain:r}=e,n=qde(e,Bde),{domain:i}=t;return!!oue(n,qde(t,$de))&&(Array.isArray(r)&&2===r.length&&Array.isArray(i)&&2===i.length?r[0]===i[0]&&r[1]===i[1]:oue({domain:r},{domain:i}))},Qde=q.memo(Gde,Wde);Qde.displayName="YAxis";var Yde=q;"function"==typeof Object.is&&Object.is,Yde.useSyncExternalStore,Yde.useRef,Yde.useEffect,Yde.useMemo,Yde.useDebugValue;var Xde={notify(){},get:()=>[]};var Jde=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),Zde=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),ehe=(()=>Jde||Zde?q.useLayoutEffect:q.useEffect)(),the=Symbol.for("react-redux-context"),rhe="undefined"!=typeof globalThis?globalThis:{};function nhe(){if(!q.createContext)return{};const e=rhe[the]??(rhe[the]=new Map);let t=e.get(q.createContext);return t||(t=q.createContext(null),e.set(q.createContext,t)),t}var ihe=nhe();var she=function(e){const{children:t,context:r,serverState:n,store:i}=e,s=q.useMemo((()=>{const e=function(e,t){let r,n=Xde,i=0,s=!1;function a(){c.onStateChange&&c.onStateChange()}function o(){i++,r||(r=t?t.addNestedSub(a):e.subscribe(a),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){(()=>{let t=e;for(;t;)t.callback(),t=t.next})()},get(){const t=[];let r=e;for(;r;)t.push(r),r=r.next;return t},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){n&&null!==e&&(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function l(){i--,r&&0===i&&(r(),r=void 0,n.clear(),n=Xde)}const c={addNestedSub:function(e){o();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),l())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:a,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,o())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>n};return c}(i);return{store:i,subscription:e,getServerState:n?()=>n:void 0}}),[i,n]),a=q.useMemo((()=>i.getState()),[i]);ehe((()=>{const{subscription:e}=s;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),a!==i.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[s,a]);const o=r||ihe;return q.createElement(o.Provider,{value:s},t)},ahe=QJ([(e,t)=>t,N2,$ee,Kee,nie,oie,Cie,e2],((e,t,r,n,i,s,a,o)=>{if(e&&t&&n&&i&&s){var l=function(e,t,r,n,i){return"horizontal"===r||"vertical"===r?e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height?{x:e,y:t}:null:n?E1({x:e,y:t},n):null}(e.chartX,e.chartY,t,r,o);if(l){var c=((e,t)=>"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius)(l,t),u=((e,t,r,n,i)=>{var s,a=-1,o=null!==(s=null==t?void 0:t.length)&&void 0!==s?s:0;if(o<=1||null==e)return 0;if("angleAxis"===n&&null!=i&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<o;l++){var c=l>0?r[l-1].coordinate:r[o-1].coordinate,u=r[l].coordinate,d=l>=o-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(hX(u-c)!==hX(d-u)){var f=[];if(hX(d-u)===hX(i[1]-i[0])){h=d;var p=u+i[1]-i[0];f[0]=Math.min(p,(p+c)/2),f[1]=Math.max(p,(p+c)/2)}else{h=c;var g=d+i[1]-i[0];f[0]=Math.min(u,(g+u)/2),f[1]=Math.max(u,(g+u)/2)}var m=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(e>m[0]&&e<=m[1]||e>=f[0]&&e<=f[1]){({index:a}=r[l]);break}}else{var y=Math.min(c,d),v=Math.max(c,d);if(e>(y+u)/2&&e<=(v+u)/2){({index:a}=r[l]);break}}}else if(t)for(var b=0;b<o;b++)if(0===b&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:a}=t[b]);break}return a})(c,a,s,n,i),d=((e,t,r,n)=>{var i=t.find((e=>e&&e.index===r));if(i){if("horizontal"===e)return{x:i.coordinate,y:n.y};if("vertical"===e)return{x:n.x,y:i.coordinate};if("centric"===e){var s=i.coordinate,{radius:a}=n;return A1(A1(A1({},n),b1(n.cx,n.cy,a,s)),{},{angle:s,radius:a})}var o=i.coordinate,{angle:l}=n;return A1(A1(A1({},n),b1(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}})(t,s,u,l);return{activeIndex:String(u),activeCoordinate:d}}}})),ohe=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},lhe=h0("mouseClick"),che=a1();che.startListening({actionCreator:lhe,effect:(e,t)=>{var r=e.payload,n=ahe(t.getState(),ohe(r));null!=(null==n?void 0:n.activeIndex)&&t.dispatch(dne({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var uhe=h0("mouseMove"),dhe=a1();dhe.startListening({actionCreator:uhe,effect:(e,t)=>{var r=e.payload,n=t.getState(),i=Zre(n,n.tooltip.settings.shared),s=ahe(n,ohe(r));"axis"===i&&(null!=(null==s?void 0:s.activeIndex)?t.dispatch(une({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(lne()))}});var hhe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},fhe=_0({name:"rootProps",initialState:hhe,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(r=t.payload.barGap)&&void 0!==r?r:hhe.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),phe=fhe.reducer,{updateOptions:ghe}=fhe.actions,mhe=_0({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:yhe}=mhe.actions,vhe=mhe.reducer,bhe=h0("keyDown"),whe=h0("focus"),xhe=a1();xhe.startListening({actionCreator:bhe,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip,i=e.payload;if("ArrowRight"===i||"ArrowLeft"===i||"Enter"===i){var s=Number(bne(n,Nne(r))),a=oie(r);if("Enter"!==i){var o=s+("ArrowRight"===i?1:-1)*("left-to-right"===Qre(r)?1:-1);if(!(null==a||o>=a.length||o<0)){var l=Iie(r,"axis","hover",String(o));t.dispatch(fne({active:!0,activeIndex:o.toString(),activeDataKey:void 0,activeCoordinate:l}))}}else{var c=Iie(r,"axis","hover",String(n.index));t.dispatch(fne({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:c}))}}}}}),xhe.startListening({actionCreator:whe,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip;if(!n.active&&null==n.index){var i=Iie(r,"axis","hover",String("0"));t.dispatch(fne({activeDataKey:void 0,active:!0,activeIndex:"0",activeCoordinate:i}))}}}});var She=h0("externalEvent"),Ehe=a1();Ehe.startListening({actionCreator:She,effect:(e,t)=>{if(null!=e.payload.handler){var r=t.getState(),n={activeCoordinate:yie(r),activeDataKey:pie(r),activeIndex:hie(r),activeLabel:fie(r),activeTooltipIndex:hie(r),isTooltipActive:vie(r)};e.payload.handler(n,e.payload.reactEvent)}}});var The=QJ([Ene],(e=>e.tooltipItemPayloads)),khe=QJ([The,Sne,(e,t,r)=>t,(e,t,r)=>r],((e,t,r,n)=>{var i=e.find((e=>e.settings.dataKey===n));if(null!=i){var{positions:s}=i;if(null!=s)return t(s,r)}})),Ahe=h0("touchMove"),_he=a1();_he.startListening({actionCreator:Ahe,effect:(e,t)=>{var r=e.payload,n=t.getState(),i=Zre(n,n.tooltip.settings.shared);if("axis"===i){var s=ahe(n,ohe({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));null!=(null==s?void 0:s.activeIndex)&&t.dispatch(une({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if("item"===i){var a,o=r.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(Q1),u=null!==(a=l.getAttribute(Y1))&&void 0!==a?a:void 0,d=khe(t.getState(),c,u);t.dispatch(ane({activeDataKey:u,activeIndex:c,activeCoordinate:d}))}}});var Che=pZ({brush:tue,cartesianAxis:Ble,chartData:nse,errorBars:ice,graphicalItems:ale,layout:f1,legend:z2,options:Yie,polarAxis:$ae,polarOptions:vhe,referenceElements:iue,rootProps:phe,tooltip:pne});function Phe(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=i2(),s=q.useRef(null);if(i)return r;null==s.current&&(s.current=function(e){return w0({reducer:Che,preloadedState:e,middleware:e=>e({serializableCheck:!1}).concat([che.middleware,dhe.middleware,xhe.middleware,Ehe.middleware,_he.middleware]),enhancers:e=>{var t=e;return"function"==typeof e&&(t=e()),t.concat(b0({type:"raf"}))},devTools:p3})}(t));var a=MJ;return q.createElement(she,{context:a,store:s.current},r)}function Dhe(e){var{layout:t,margin:r}=e,n=UJ(),i=i2();return q.useEffect((()=>{i||(n(u1(t)),n(c1(r)))}),[n,i,t,r]),null}function Rhe(e){var t=UJ();return q.useEffect((()=>{t(ghe(e))}),[t,e]),null}var Ihe=["children"];function Ohe(){return Ohe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ohe.apply(null,arguments)}var Nhe={width:"100%",height:"100%",display:"block"},jhe=q.forwardRef(((e,t)=>{var r=I2(),n=O2(),i=m3();if(!b2(r)||!b2(n))return null;var s,a,{children:o,otherAttributes:l,title:c,desc:u}=e;return s="number"==typeof l.tabIndex?l.tabIndex:i?0:void 0,a="string"==typeof l.role?l.role:i?"application":void 0,q.createElement(QQ,Ohe({},l,{title:c,desc:u,role:a,tabIndex:s,width:r,height:n,style:Nhe,ref:t}),o)})),Lhe=e=>{var{children:t}=e,r=qJ(a2);if(!r)return null;var{width:n,height:i,y:s,x:a}=r;return q.createElement(QQ,{width:n,height:i,x:a,y:s},t)},Mhe=q.forwardRef(((e,t)=>{var{children:r}=e,n=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,Ihe);return i2()?q.createElement(Lhe,null,r):q.createElement(jhe,Ohe({ref:t},n),r)}));function Fhe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Uhe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fhe(Object(r),!0).forEach((function(t){Bhe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fhe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bhe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $he(){return $he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$he.apply(null,arguments)}var zhe=()=>(use(),null);function qhe(e){if("number"==typeof e)return e;if("string"==typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var Vhe=q.forwardRef(((e,t)=>{var r,n,i=q.useRef(null),[s,a]=q.useState({containerWidth:qhe(null===(r=e.style)||void 0===r?void 0:r.width),containerHeight:qhe(null===(n=e.style)||void 0===n?void 0:n.height)}),o=q.useCallback(((e,t)=>{a((r=>{var n=Math.round(e),i=Math.round(t);return r.containerWidth===n&&r.containerHeight===i?r:{containerWidth:n,containerHeight:i}}))}),[]),l=q.useCallback((e=>{if("function"==typeof t&&t(e),null!=e){var{width:r,height:n}=e.getBoundingClientRect();o(r,n);var s=new ResizeObserver((e=>{var{width:t,height:r}=e[0].contentRect;o(t,r)}));s.observe(e),i.current=s}}),[t,o]);return q.useEffect((()=>()=>{var e=i.current;null!=e&&e.disconnect()}),[o]),q.createElement(q.Fragment,null,q.createElement(L2,{width:s.containerWidth,height:s.containerHeight}),q.createElement("div",$he({ref:l},e)))})),Khe=q.forwardRef(((e,t)=>{var{width:r,height:n}=e,[i,s]=q.useState({containerWidth:qhe(r),containerHeight:qhe(n)}),a=q.useCallback(((e,t)=>{s((r=>{var n=Math.round(e),i=Math.round(t);return r.containerWidth===n&&r.containerHeight===i?r:{containerWidth:n,containerHeight:i}}))}),[]),o=q.useCallback((e=>{if("function"==typeof t&&t(e),null!=e){var{width:r,height:n}=e.getBoundingClientRect();a(r,n)}}),[t,a]);return q.createElement(q.Fragment,null,q.createElement(L2,{width:i.containerWidth,height:i.containerHeight}),q.createElement("div",$he({ref:o},e)))})),Hhe=q.forwardRef(((e,t)=>{var{width:r,height:n}=e;return q.createElement(q.Fragment,null,q.createElement(L2,{width:r,height:n}),q.createElement("div",$he({ref:t},e)))})),Ghe=q.forwardRef(((e,t)=>{var{width:r,height:n}=e;return pX(r)||pX(n)?q.createElement(Khe,$he({},e,{ref:t})):q.createElement(Hhe,$he({},e,{ref:t}))}));var Whe=q.forwardRef(((e,t)=>{var{children:r,className:n,height:i,onClick:s,onContextMenu:a,onDoubleClick:o,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:d,onMouseUp:h,onTouchEnd:f,onTouchMove:p,onTouchStart:g,style:m,width:y,responsive:v,dispatchTouchEvents:b=!0}=e,w=q.useRef(null),x=UJ(),[S,E]=q.useState(null),[T,k]=q.useState(null),A=function(){var e=UJ(),[t,r]=q.useState(null),n=qJ(K1);return q.useEffect((()=>{if(null!=t){var r=t.getBoundingClientRect().width/t.offsetWidth;v2(r)&&r!==n&&e(h1(r))}}),[t,e,n]),r}(),_=A2(),C=(null==_?void 0:_.width)>0?_.width:y,P=(null==_?void 0:_.height)>0?_.height:i,D=q.useCallback((e=>{A(e),"function"==typeof t&&t(e),E(e),k(e),null!=e&&(w.current=e)}),[A,t,E,k]),R=q.useCallback((e=>{x(lhe(e)),x(She({handler:s,reactEvent:e}))}),[x,s]),I=q.useCallback((e=>{x(uhe(e)),x(She({handler:c,reactEvent:e}))}),[x,c]),O=q.useCallback((e=>{x(lne()),x(She({handler:u,reactEvent:e}))}),[x,u]),N=q.useCallback((e=>{x(uhe(e)),x(She({handler:d,reactEvent:e}))}),[x,d]),j=q.useCallback((()=>{x(whe())}),[x]),L=q.useCallback((e=>{x(bhe(e.key))}),[x]),M=q.useCallback((e=>{x(She({handler:a,reactEvent:e}))}),[x,a]),F=q.useCallback((e=>{x(She({handler:o,reactEvent:e}))}),[x,o]),U=q.useCallback((e=>{x(She({handler:l,reactEvent:e}))}),[x,l]),B=q.useCallback((e=>{x(She({handler:h,reactEvent:e}))}),[x,h]),$=q.useCallback((e=>{x(She({handler:g,reactEvent:e}))}),[x,g]),z=q.useCallback((e=>{b&&x(Ahe(e)),x(She({handler:p,reactEvent:e}))}),[x,b,p]),V=q.useCallback((e=>{x(She({handler:f,reactEvent:e}))}),[x,f]),K=function(e){return!0===e?Vhe:Ghe}(v);return q.createElement(qie.Provider,{value:S},q.createElement(ZQ.Provider,{value:T},q.createElement(K,{width:null!=C?C:null==m?void 0:m.width,height:null!=P?P:null==m?void 0:m.height,className:rp("recharts-wrapper",n),style:Uhe({position:"relative",cursor:"default",width:C,height:P},m),onClick:R,onContextMenu:M,onDoubleClick:F,onFocus:j,onKeyDown:L,onMouseDown:U,onMouseEnter:I,onMouseLeave:O,onMouseMove:N,onMouseUp:B,onTouchEnd:V,onTouchMove:z,onTouchStart:$,ref:D},q.createElement(zhe,null),r)))})),Qhe=["width","height","responsive","children","className","style","compact","title","desc"];var Yhe=q.forwardRef(((e,t)=>{var{width:r,height:n,responsive:i,children:s,className:a,style:o,compact:l,title:c,desc:u}=e,d=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,Qhe),h=VQ(d);return l?q.createElement(q.Fragment,null,q.createElement(L2,{width:r,height:n}),q.createElement(Mhe,{otherAttributes:h,title:c,desc:u},s)):q.createElement(Whe,{className:a,style:o,width:r,height:n,responsive:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},q.createElement(Mhe,{otherAttributes:h,title:c,desc:u,ref:t},q.createElement(aue,null,s)))}));function Xhe(){return Xhe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xhe.apply(null,arguments)}var Jhe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",responsive:!1},Zhe=q.forwardRef((function(e,t){var r,n=j3(e.categoricalChartProps,Jhe),{chartName:i,defaultTooltipEventType:s,validateTooltipEventTypes:a,tooltipPayloadSearcher:o,categoricalChartProps:l}=e,c={chartName:i,defaultTooltipEventType:s,validateTooltipEventTypes:a,tooltipPayloadSearcher:o,eventEmitter:void 0};return q.createElement(Phe,{preloadedState:{options:c},reduxStoreName:null!==(r=l.id)&&void 0!==r?r:i},q.createElement(Qce,{chartData:l.data}),q.createElement(Dhe,{layout:n.layout,margin:n.margin}),q.createElement(Rhe,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),q.createElement(Yhe,Xhe({},n,{ref:t})))})),efe=["axis"],tfe=q.forwardRef(((e,t)=>q.createElement(Zhe,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:efe,tooltipPayloadSearcher:Wie,categoricalChartProps:e,ref:t}))),rfe=["axis","item"],nfe=q.forwardRef(((e,t)=>q.createElement(Zhe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:rfe,tooltipPayloadSearcher:Wie,categoricalChartProps:e,ref:t})));function ife(e){var t=UJ();return q.useEffect((()=>{t(yhe(e))}),[t,e]),null}var sfe=["layout"];function afe(){return afe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},afe.apply(null,arguments)}var ofe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},lfe=q.forwardRef((function(e,t){var r,n=j3(e.categoricalChartProps,ofe),{layout:i}=n,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(n,sfe),{chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c}=e,u={chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return q.createElement(Phe,{preloadedState:{options:u},reduxStoreName:null!==(r=n.id)&&void 0!==r?r:a},q.createElement(Qce,{chartData:n.data}),q.createElement(Dhe,{layout:i,margin:n.margin}),q.createElement(Rhe,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),q.createElement(ife,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),q.createElement(Yhe,afe({},s,{ref:t})))})),cfe=["item"],ufe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},dfe=q.forwardRef(((e,t)=>{var r=j3(e,ufe);return q.createElement(lfe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:cfe,tooltipPayloadSearcher:Wie,categoricalChartProps:r,ref:t})}));const hfe=({data:e,currentLanguage:t})=>{if(!e||0===e.length)return Z.jsxs(OT,{className:"bg-white/10 border-white/20",children:[Z.jsx(NT,{children:Z.jsx(jT,{className:"text-white",children:iy("analyticsVisitorsOverTime",t)})}),Z.jsx(MT,{children:Z.jsx("div",{className:"h-64 flex items-center justify-center",children:Z.jsx("p",{className:"text-white/60",children:iy("analyticsNoData",t)})})})]});const r=e.map((e=>({date:ffe(e.date),[iy("analyticsUsers",t)]:e.users,[iy("analyticsSessions",t)]:e.sessions})));return Z.jsxs(OT,{className:"bg-white/10 border-white/20",children:[Z.jsx(NT,{children:Z.jsx(jT,{className:"text-white",children:iy("analyticsVisitorsOverTime",t)})}),Z.jsx(MT,{children:Z.jsx(C2,{width:"100%",height:300,children:Z.jsxs(tfe,{data:r,children:[Z.jsx(Wue,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.1)"}),Z.jsx(Mde,{dataKey:"date",stroke:"rgba(255, 255, 255, 0.6)",tick:{fill:"rgba(255, 255, 255, 0.8)"}}),Z.jsx(Qde,{stroke:"rgba(255, 255, 255, 0.6)",tick:{fill:"rgba(255, 255, 255, 0.8)"}}),Z.jsx(vse,{contentStyle:{backgroundColor:"rgba(0, 0, 0, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff"}}),Z.jsx(Z2,{wrapperStyle:{color:"#fff"}}),Z.jsx(kde,{type:"monotone",dataKey:iy("analyticsUsers",t),stroke:"#60a5fa",strokeWidth:2,dot:{fill:"#60a5fa"}}),Z.jsx(kde,{type:"monotone",dataKey:iy("analyticsSessions",t),stroke:"#a78bfa",strokeWidth:2,dot:{fill:"#a78bfa"}})]})})})]})},ffe=e=>{const t=new Date(e);return`${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}`},pfe=({data:e,currentLanguage:t})=>{if(!e||0===e.length)return Z.jsxs(OT,{className:"bg-white/10 border-white/20",children:[Z.jsx(NT,{children:Z.jsx(jT,{className:"text-white",children:iy("analyticsPopularEpisodes",t)})}),Z.jsx(MT,{children:Z.jsx("div",{className:"h-64 flex items-center justify-center",children:Z.jsx("p",{className:"text-white/60",children:iy("analyticsNoData",t)})})})]});const r=e.map(((e,t)=>({name:gfe(e.title,30),fullTitle:e.title,views:e.views,avgDuration:e.avgDuration,color:mfe(t)}))),n=({active:e,payload:r})=>{if(e&&r&&r.length){const e=r[0].payload;return Z.jsxs("div",{className:"bg-black/90 border border-white/20 rounded-lg p-3",children:[Z.jsx("p",{className:"text-white font-semibold mb-2",children:e.fullTitle}),Z.jsxs("p",{className:"text-blue-400",children:[iy("analyticsViews",t),": ",e.views]}),Z.jsxs("p",{className:"text-purple-400",children:[iy("analyticsAvgDuration",t),": ",yfe(e.avgDuration)]})]})}return null};return Z.jsxs(OT,{className:"bg-white/10 border-white/20",children:[Z.jsx(NT,{children:Z.jsx(jT,{className:"text-white",children:iy("analyticsPopularEpisodes",t)})}),Z.jsx(MT,{children:Z.jsx(C2,{width:"100%",height:400,children:Z.jsxs(nfe,{data:r,layout:"vertical",margin:{top:5,right:30,left:120,bottom:5},children:[Z.jsx(Wue,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.1)"}),Z.jsx(Mde,{type:"number",stroke:"rgba(255, 255, 255, 0.6)",tick:{fill:"rgba(255, 255, 255, 0.8)"}}),Z.jsx(Qde,{type:"category",dataKey:"name",stroke:"rgba(255, 255, 255, 0.6)",tick:{fill:"rgba(255, 255, 255, 0.8)"},width:120}),Z.jsx(vse,{content:Z.jsx(n,{})}),Z.jsx(jce,{dataKey:"views",radius:[0,8,8,0],children:r.map(((e,t)=>Z.jsx(bse,{fill:e.color},`cell-${t}`)))})]})})})]})},gfe=(e,t)=>e.length<=t?e:e.substring(0,t)+"...",mfe=e=>{const t=["#60a5fa","#a78bfa","#34d399","#fbbf24","#f87171","#fb923c","#38bdf8","#c084fc","#22d3ee","#fb7185"];return t[e%t.length]},yfe=e=>{if(!e)return"0:00";return`${Math.floor(e/60)}:${String(e%60).padStart(2,"0")}`},vfe=({data:e,currentLanguage:t})=>e&&0!==e.length?Z.jsxs(OT,{className:"bg-white/10 border-white/20",children:[Z.jsx(NT,{children:Z.jsxs(jT,{className:"text-white flex items-center gap-2",children:[Z.jsx(Mp,{className:"h-5 w-5"}),iy("analyticsGeography",t)]})}),Z.jsx(MT,{children:Z.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:e.map(((e,r)=>Z.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",children:[Z.jsx("div",{className:"flex-1",children:Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx("span",{className:"text-white font-medium",children:e.city}),Z.jsx("span",{className:"text-white/60 text-sm",children:e.country})]})}),Z.jsxs("div",{className:"flex gap-6 text-sm",children:[Z.jsxs("div",{className:"text-right",children:[Z.jsx("p",{className:"text-white/60",children:iy("analyticsUsers",t)}),Z.jsx("p",{className:"text-white font-semibold",children:e.users.toLocaleString()})]}),Z.jsxs("div",{className:"text-right",children:[Z.jsx("p",{className:"text-white/60",children:iy("analyticsSessions",t)}),Z.jsx("p",{className:"text-white font-semibold",children:e.sessions.toLocaleString()})]})]})]},r)))})})]}):Z.jsxs(OT,{className:"bg-white/10 border-white/20",children:[Z.jsx(NT,{children:Z.jsxs(jT,{className:"text-white flex items-center gap-2",children:[Z.jsx(Mp,{className:"h-5 w-5"}),iy("analyticsGeography",t)]})}),Z.jsx(MT,{children:Z.jsx("div",{className:"h-64 flex items-center justify-center",children:Z.jsx("p",{className:"text-white/60",children:iy("analyticsNoData",t)})})})]}),bfe=({data:e,currentLanguage:t})=>{if(!e||!e.devices&&!e.browsers)return Z.jsxs(OT,{className:"bg-white/10 border-white/20",children:[Z.jsx(NT,{children:Z.jsx(jT,{className:"text-white",children:iy("analyticsDevices",t)})}),Z.jsx(MT,{children:Z.jsx("div",{className:"h-64 flex items-center justify-center",children:Z.jsx("p",{className:"text-white/60",children:iy("analyticsNoData",t)})})})]});const r={mobile:"#60a5fa",desktop:"#a78bfa",tablet:"#34d399"},n=["#60a5fa","#a78bfa","#34d399","#fbbf24","#f87171"];return Z.jsxs(OT,{className:"bg-white/10 border-white/20",children:[Z.jsx(NT,{children:Z.jsx(jT,{className:"text-white",children:iy("analyticsDevices",t)})}),Z.jsx(MT,{children:Z.jsxs("div",{className:"space-y-6",children:[e.devices&&e.devices.length>0&&Z.jsxs("div",{children:[Z.jsx("h3",{className:"text-white font-medium mb-4",children:iy("analyticsDeviceTypes",t)}),Z.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4",children:[Z.jsx(C2,{width:"100%",height:200,children:Z.jsxs(dfe,{children:[Z.jsx(Cle,{data:e.devices,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"count",nameKey:"type",children:e.devices.map(((e,t)=>Z.jsx(bse,{fill:r[e.type]||"#888"},`cell-${t}`)))}),Z.jsx(vse,{contentStyle:{backgroundColor:"rgba(0, 0, 0, 0.9)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff"}})]})}),Z.jsx("div",{className:"space-y-2 w-full md:w-auto",children:e.devices.map(((e,t)=>{const n=(e=>{switch(e){case"mobile":return bg;case"desktop":return tg;case"tablet":return xg;default:return Mp}})(e.type);return Z.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white/5 rounded-lg",children:[Z.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:r[e.type]}}),Z.jsx(n,{className:"h-4 w-4 text-white/80"}),Z.jsx("span",{className:"text-white capitalize",children:e.type}),Z.jsxs("span",{className:"text-white/60 ml-auto",children:[e.percentage,"%"]})]},t)}))})]})]}),e.browsers&&e.browsers.length>0&&Z.jsxs("div",{className:"mt-6",children:[Z.jsx("h3",{className:"text-white font-medium mb-4",children:iy("analyticsBrowsers",t)}),Z.jsx("div",{className:"space-y-2",children:e.browsers.map(((e,t)=>Z.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",children:[Z.jsx(Mp,{className:"h-4 w-4 text-white/80"}),Z.jsx("span",{className:"text-white flex-1",children:e.name}),Z.jsx("span",{className:"text-white/60",children:e.count.toLocaleString()}),Z.jsx("div",{className:"w-16 text-right",children:Z.jsxs("span",{className:"text-white font-medium",children:[e.percentage,"%"]})}),Z.jsx("div",{className:"w-32 bg-white/10 rounded-full h-2 overflow-hidden",children:Z.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${e.percentage}%`,backgroundColor:n[t%n.length]}})})]},t)))})]})]})})]})},wfe=({data:e,currentLanguage:t})=>{if(!e||0===e.length)return Z.jsxs(OT,{className:"bg-white/10 border-white/20",children:[Z.jsx(NT,{children:Z.jsx(jT,{className:"text-white",children:iy("analyticsTrafficSources",t)})}),Z.jsx(MT,{children:Z.jsx("div",{className:"h-64 flex items-center justify-center",children:Z.jsx("p",{className:"text-white/60",children:iy("analyticsNoData",t)})})})]});const r={direct:"#60a5fa",organic:"#34d399",social:"#a78bfa",referral:"#fbbf24",email:"#f87171"},n=e.map((e=>({name:e.source,value:e.users,percentage:e.percentage}))),i=({active:e,payload:r})=>{if(e&&r&&r.length){const e=r[0];return Z.jsxs("div",{className:"bg-black/90 border border-white/20 rounded-lg p-3",children:[Z.jsx("p",{className:"text-white font-semibold capitalize",children:e.name}),Z.jsxs("p",{className:"text-blue-400",children:[iy("analyticsUsers",t),": ",e.value.toLocaleString()]}),Z.jsxs("p",{className:"text-purple-400",children:[e.payload.percentage,"%"]})]})}return null};return Z.jsxs(OT,{className:"bg-white/10 border-white/20",children:[Z.jsx(NT,{children:Z.jsx(jT,{className:"text-white",children:iy("analyticsTrafficSources",t)})}),Z.jsx(MT,{children:Z.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[Z.jsx(C2,{width:"100%",height:250,children:Z.jsxs(dfe,{children:[Z.jsx(Cle,{data:n,cx:"50%",cy:"50%",labelLine:!1,outerRadius:90,fill:"#8884d8",dataKey:"value",label:({percentage:e})=>`${e}%`,children:n.map(((e,t)=>Z.jsx(bse,{fill:r[e.name]||"#888"},`cell-${t}`)))}),Z.jsx(vse,{content:Z.jsx(i,{})})]})}),Z.jsx("div",{className:"space-y-3 w-full md:w-auto",children:e.map(((e,n)=>{const i=(e=>{switch(e){case"direct":default:return _g;case"organic":return mg;case"social":return vg;case"referral":return Cp;case"email":return Qp}})(e.source);return Z.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors min-w-[200px]",children:[Z.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:r[e.source]}}),Z.jsx(i,{className:"h-4 w-4 text-white/80"}),Z.jsxs("div",{className:"flex-1",children:[Z.jsx("p",{className:"text-white capitalize",children:e.source}),Z.jsxs("p",{className:"text-white/60 text-sm",children:[e.users.toLocaleString()," ",iy("analyticsUsers",t)]})]}),Z.jsxs("span",{className:"text-white font-medium",children:[e.percentage,"%"]})]},n)}))})]})})]})},xfe=({data:e,currentLanguage:t})=>{var r,n,i;if(!e)return Z.jsxs(OT,{className:"bg-white/10 border-white/20",children:[Z.jsx(NT,{children:Z.jsx(jT,{className:"text-white",children:iy("analyticsListeningStats",t)})}),Z.jsx(MT,{children:Z.jsx("div",{className:"h-64 flex items-center justify-center",children:Z.jsx("p",{className:"text-white/60",children:iy("analyticsNoData",t)})})})]});const s=[{icon:Ep,label:iy("analyticsAvgListeningTime",t),value:Sfe(e.avgListeningTime),color:"text-blue-400"},{icon:mp,label:iy("analyticsCompletionRate",t),value:`${e.completionRate}%`,color:"text-green-400"},{icon:Up,label:iy("analyticsTotalPlays",t),value:null==(r=e.totalPlays)?void 0:r.toLocaleString(),color:"text-purple-400"},{icon:Tg,label:iy("analyticsTotalCompletions",t),value:null==(n=e.totalCompletions)?void 0:n.toLocaleString(),color:"text-yellow-400"}],a=(null==(i=e.mostActiveHours)?void 0:i.map((e=>({hour:`${e.hour}:00`,plays:e.plays}))))||[];return Z.jsxs(OT,{className:"bg-white/10 border-white/20",children:[Z.jsx(NT,{children:Z.jsx(jT,{className:"text-white",children:iy("analyticsListeningStats",t)})}),Z.jsx(MT,{children:Z.jsxs("div",{className:"space-y-6",children:[Z.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:s.map(((e,t)=>{const r=e.icon;return Z.jsxs("div",{className:"p-4 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",children:[Z.jsx("div",{className:"flex items-center gap-2 mb-2",children:Z.jsx(r,{className:`h-5 w-5 ${e.color}`})}),Z.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:e.value}),Z.jsx("p",{className:"text-sm text-white/60",children:e.label})]},t)}))}),a.length>0&&Z.jsxs("div",{className:"mt-6",children:[Z.jsx("h3",{className:"text-white font-medium mb-4",children:iy("analyticsMostActiveHours",t)}),Z.jsx(C2,{width:"100%",height:250,children:Z.jsxs(nfe,{data:a,children:[Z.jsx(Wue,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.1)"}),Z.jsx(Mde,{dataKey:"hour",stroke:"rgba(255, 255, 255, 0.6)",tick:{fill:"rgba(255, 255, 255, 0.8)"}}),Z.jsx(Qde,{stroke:"rgba(255, 255, 255, 0.6)",tick:{fill:"rgba(255, 255, 255, 0.8)"}}),Z.jsx(vse,{contentStyle:{backgroundColor:"rgba(0, 0, 0, 0.9)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff"}}),Z.jsx(jce,{dataKey:"plays",fill:"#a78bfa",radius:[8,8,0,0]})]})})]})]})})]})},Sfe=e=>{if(!e)return"0:00";const t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return t>0?`${t}:${String(r).padStart(2,"0")}:${String(n).padStart(2,"0")}`:`${r}:${String(n).padStart(2,"0")}`},Efe=({data:e,currentLanguage:t})=>{var r,n,i,s,a,o,l,c,u;if(!e)return Z.jsxs(OT,{className:"bg-white/10 border-white/20",children:[Z.jsx(NT,{children:Z.jsx(jT,{className:"text-white",children:iy("analyticsBehaviorMetrics",t)})}),Z.jsx(MT,{children:Z.jsx("div",{className:"h-64 flex items-center justify-center",children:Z.jsx("p",{className:"text-white/60",children:iy("analyticsNoData",t)})})})]});const d=[{icon:lp,label:iy("analyticsBounceRate",t),value:`${e.bounceRate}%`,description:iy("analyticsBounceRateDesc",t),color:"text-red-400"},{icon:Ep,label:iy("analyticsAvgSessionDuration",t),value:Tfe(e.avgSessionDuration),description:iy("analyticsAvgSessionDurationDesc",t),color:"text-blue-400"},{icon:Ip,label:iy("analyticsPagesPerSession",t),value:null==(r=e.pagesPerSession)?void 0:r.toFixed(1),description:iy("analyticsPagesPerSessionDesc",t),color:"text-purple-400"}],h=[{icon:mg,label:iy("analyticsSearches",t),value:(null==(i=null==(n=e.interactions)?void 0:n.searches)?void 0:i.toLocaleString())||"0",color:"bg-blue-500"},{icon:Np,label:iy("analyticsFilters",t),value:(null==(a=null==(s=e.interactions)?void 0:s.filters)?void 0:a.toLocaleString())||"0",color:"bg-purple-500"},{icon:vg,label:iy("analyticsShares",t),value:(null==(l=null==(o=e.interactions)?void 0:o.shares)?void 0:l.toLocaleString())||"0",color:"bg-green-500"},{icon:_p,label:iy("analyticsDownloads",t),value:(null==(u=null==(c=e.interactions)?void 0:c.downloads)?void 0:u.toLocaleString())||"0",color:"bg-yellow-500"}];return Z.jsxs(OT,{className:"bg-white/10 border-white/20",children:[Z.jsx(NT,{children:Z.jsx(jT,{className:"text-white",children:iy("analyticsBehaviorMetrics",t)})}),Z.jsx(MT,{children:Z.jsxs("div",{className:"space-y-6",children:[Z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:d.map(((e,t)=>{const r=e.icon;return Z.jsxs("div",{className:"p-4 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",children:[Z.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Z.jsx(r,{className:`h-5 w-5 ${e.color}`}),Z.jsx("span",{className:"text-white/80 text-sm",children:e.label})]}),Z.jsx("p",{className:"text-3xl font-bold text-white mb-2",children:e.value}),Z.jsx("p",{className:"text-xs text-white/50",children:e.description})]},t)}))}),Z.jsxs("div",{children:[Z.jsx("h3",{className:"text-white font-medium mb-4",children:iy("analyticsUserInteractions",t)}),Z.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:h.map(((e,t)=>{const r=e.icon;return Z.jsxs("div",{className:"p-4 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",children:[Z.jsx("div",{className:"flex items-center gap-3 mb-2",children:Z.jsx("div",{className:`p-2 rounded-lg ${e.color}`,children:Z.jsx(r,{className:"h-4 w-4 text-white"})})}),Z.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:e.value}),Z.jsx("p",{className:"text-sm text-white/60",children:e.label})]},t)}))})]}),Z.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-lg border border-white/10",children:Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsxs("div",{children:[Z.jsx("h3",{className:"text-white font-medium mb-1",children:iy("analyticsEngagementScore",t)}),Z.jsx("p",{className:"text-white/60 text-sm",children:iy("analyticsEngagementScoreDesc",t)})]}),Z.jsxs("div",{className:"text-4xl font-bold text-white",children:[kfe(e),Z.jsx("span",{className:"text-lg text-white/60",children:"/100"})]})]})})]})})]})},Tfe=e=>{if(!e)return"0s";const t=Math.floor(e/60),r=e%60;return t>0?`${t}m ${r}s`:`${r}s`},kfe=e=>{var t,r,n,i;if(!e)return 0;let s=0;s+=.3*(100-(e.bounceRate||50)),s+=Math.min(10*(e.pagesPerSession||0),30),s+=Math.min((e.avgSessionDuration||0)/10,30);const a=((null==(t=e.interactions)?void 0:t.searches)||0)+((null==(r=e.interactions)?void 0:r.filters)||0)+((null==(n=e.interactions)?void 0:n.shares)||0)+((null==(i=e.interactions)?void 0:i.downloads)||0);return s+=Math.min(a/100,10),Math.round(Math.min(s,100))},Afe=({currentLanguage:e})=>{const{lang:t}=nh(),r=t||e||"ru",n=useNavigate(),{toast:i}=Fm(),[s,a]=q.useState(!0),[o,l]=q.useState(!1),[c,u]=q.useState("7d"),[d,h]=q.useState("overview"),[f,p]=q.useState(null),[g,m]=q.useState(null),[y,v]=q.useState(null),[b,w]=q.useState(null),[x,S]=q.useState(null),[E,T]=q.useState(null),[k,A]=q.useState(null),[_,C]=q.useState(null),P=async(e=!0)=>{try{a(!0);const[t,r,n,i,s,o,l,u]=await Promise.all([PQ(null,null,e),DQ(c,e),RQ(10,e),IQ(e),OQ(e),NQ(e),jQ(e),LQ(e)]);p(t),m(r),v(n),w(i),S(s),T(o),A(l),C(u)}catch(t){i({title:iy("analyticsError",r),description:iy("analyticsErrorDesc",r),variant:"destructive"})}finally{a(!1),l(!1)}};q.useEffect((()=>{P(!0)}),[c]);return Z.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white p-4 md:p-6",children:Z.jsxs("div",{className:"max-w-7xl mx-auto",children:[Z.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[Z.jsxs("div",{className:"flex items-center gap-4",children:[Z.jsx(AT,{variant:"ghost",size:"icon",onClick:()=>n(-1),className:"text-white hover:bg-white/10",children:Z.jsx(dp,{className:"h-5 w-5"})}),Z.jsxs("div",{children:[Z.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[Z.jsx(fp,{className:"h-8 w-8"}),iy("analyticsTitle",r)]}),Z.jsx("p",{className:"text-white/60 mt-1",children:iy("analyticsSubtitle",r)})]})]}),Z.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[Z.jsxs(hI,{value:c,onValueChange:u,children:[Z.jsxs(pI,{className:"w-[140px] bg-white/10 border-white/20 text-white",children:[Z.jsx(pp,{className:"h-4 w-4 mr-2"}),Z.jsx(fI,{})]}),Z.jsxs(yI,{children:[Z.jsx(vI,{value:"1d",children:iy("analyticsLast24Hours",r)}),Z.jsx(vI,{value:"7d",children:iy("analyticsLast7Days",r)}),Z.jsx(vI,{value:"30d",children:iy("analyticsLast30Days",r)})]})]}),Z.jsx(AT,{variant:"outline",size:"icon",onClick:()=>{l(!0),(()=>{try{Object.keys(localStorage).forEach((e=>{e.startsWith("ga_cache_")&&localStorage.removeItem(e)}))}catch(e){}})(),P(!1)},disabled:o,className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:Z.jsx(dg,{className:"h-4 w-4 "+(o?"animate-spin":"")})}),Z.jsxs(AT,{variant:"outline",onClick:()=>{i({title:iy("analyticsExportReport",r),description:iy("analyticsExportReportDesc",r)})},className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:[Z.jsx(_p,{className:"h-4 w-4 mr-2"}),iy("analyticsExport",r)]})]})]}),s&&!o?Z.jsx("div",{className:"flex items-center justify-center h-64",children:Z.jsxs("div",{className:"text-center",children:[Z.jsx(dg,{className:"h-12 w-12 animate-spin text-white/60 mx-auto mb-4"}),Z.jsx("p",{className:"text-white/60",children:iy("loading",r)})]})}):Z.jsxs(Z.Fragment,{children:[Z.jsx("div",{className:"mb-6",children:Z.jsx(MQ,{data:f,currentLanguage:r})}),Z.jsxs(EQ,{value:d,onValueChange:h,className:"space-y-6",children:[Z.jsxs(TQ,{className:"bg-white/10 border-white/20",children:[Z.jsx(kQ,{value:"overview",className:"data-[state=active]:bg-white/20",children:iy("analyticsOverview",r)}),Z.jsx(kQ,{value:"audience",className:"data-[state=active]:bg-white/20",children:iy("analyticsAudience",r)}),Z.jsx(kQ,{value:"content",className:"data-[state=active]:bg-white/20",children:iy("analyticsContent",r)}),Z.jsx(kQ,{value:"behavior",className:"data-[state=active]:bg-white/20",children:iy("analyticsBehavior",r)})]}),Z.jsxs(AQ,{value:"overview",className:"space-y-6",children:[Z.jsx(hfe,{data:g,currentLanguage:r}),Z.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Z.jsx(wfe,{data:E,currentLanguage:r}),Z.jsx(bfe,{data:x,currentLanguage:r})]})]}),Z.jsxs(AQ,{value:"audience",className:"space-y-6",children:[Z.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Z.jsx(vfe,{data:b,currentLanguage:r}),Z.jsx(bfe,{data:x,currentLanguage:r})]}),Z.jsx(wfe,{data:E,currentLanguage:r})]}),Z.jsxs(AQ,{value:"content",className:"space-y-6",children:[Z.jsx(pfe,{data:y,currentLanguage:r}),Z.jsx(xfe,{data:k,currentLanguage:r})]}),Z.jsxs(AQ,{value:"behavior",className:"space-y-6",children:[Z.jsx(Efe,{data:_,currentLanguage:r}),Z.jsx(hfe,{data:g,currentLanguage:r})]})]})]}),Z.jsx("div",{className:"mt-8 p-4 bg-white/5 rounded-lg border border-white/10",children:Z.jsx("p",{className:"text-white/60 text-sm text-center",children:iy("analyticsFooterNote",r)})})]})})};Afe.propTypes={currentLanguage:IW.string};const _fe=()=>{const{lang:e}=nh(),t={ru:{title:"  ",description:["                 .            ,      ,          .","     ,    ,      , ,  ,      .","     , .        .          ,      ,   .","     ,  ,      .     .              ,   , ,       ."],biography:{title:"   ",text:["      ,  -,   - .       - ,            .","            .  10        .          ,      -    .","        ,    12 ,     .           ,    ,      .         .","   ,   ,       ,    .         .              .","       ,     ,        .       ,     ,     ."]},method:{title:" ",text:["  -  ,     ,  ,      ,  ,   .         .","           ,   .","    ,           .        ."]},mission:{title:"",text:["         ,      .","  ,        ."]},vision:{title:"",text:["  :   .","        ,     .","   ,       .         ,   ,    , ,       ."," ,               .","    ,    ."]},contacts:{title:"",email:"pepemariadosmundos@gmail.com",whatsapp:"+51959144314",whatsappName:" ",youtube:"DOSMUNDOSCDI",instagram:"https://www.instagram.com/dosmundos_peru/"}},es:{title:"Centro de Desarrollo Integral",description:["Un espacio donde congrega a personas con voluntad de cambios y en bsqueda de transformacin interna basada en el camino del desarrollo espiritual, intercambios de conocimientos, actividades culturales y de conservacin y preservacin del medio ambiente.","Compartiendo informacin del uso adecuado y armonioso de las plantas y mtodos de tratamientos ancestrales con el propsito de la sanacin del cuerpo y mente para la reconciliacin con el alma (sancin del cuerpo mente y alma). Al reconciliarse con todo los traumas emocionales, problemas, bloqueos se da el Milagro de la Sanacin del cuerpo y mente.","Se da el uso de mtodos variados como alineamiento energtico, toma de ayahuasca y otras plantas medicinales, reflexologa, digito-terapia, imposicin de las manos, meditaciones, hirudoterapia y otros mtodos de manejo de energa.","En los mtodos de sanacin se combinan y se complementan todos; sin embargo, la base de sanacin durante muchos aos ha sido y sigue siendo el mtodo ancestral de purificacin con Ayahuasca siendo la herramienta central para purificar al ser humano eliminando posible presencia de las energas negativas y sacando la enfermedad desde su raz.","A la par con lo mencionado; el otro mtodo bsico que se usa es el alineamiento energtico: que se da para diagnosticar, alinear, reorganizar y armonizar el sistema fsico-energtico. El previo diagnstico y alineamiento energtico antes de la ceremonia de ayahuasca crea condiciones para facilitar los procesos en la toma. Para que se pueda dar beneficios de sanacin transformativos interno y efectos curativos.","Formando as un mtodo peculiar sinergetico. Mediante estos mtodos se logra la transformacin consciente de los pacientes y visitantes; ayudando a reencontrarse y reconectarse con su memoria interna y su verdadera esencia para llegar a la plenitud y por consiguiente inspirando y armonizando su entorno. Aportando positivamente con su nueva vibracin el soporte a la vida de los dems."],biography:{title:"BIOGRAFIA DE PEPE ORDOEZ EL SANADOR",text:["Naci en el distrito de Teniente Cesar Lpez, Provincia Alto Amazonas, Regin Loreto  Per. Su llegada a este mundo fue algo inesperado siendo el noveno hijo despus de siete aos de diferencia con su antecesor.","Desde muy pequeo sinti conexin con su don espiritual al servicio de la sanacin. A la edad de 10 aos este don se manifest con la curacin a su mam. A esta edad tambin empez a sanar y curar animales de forma espontnea y milagrosa. Con estas experiencias define su misin en la vida, de sanar, ayudar y estar al servicio de los dems.","Posteriormente iba manifestando su don en tomas de Ayahuasca en diversos lugares de la regin Loreto con tan solo 12 aos de edad; posteriormente, vivenciando en distintas comunidades y siendo partcipe en diversos procesos de tomas.","Paralelamente se dedic al Teatro y se form primero como actor y despus como director, esto le ayud en el desarrollo de su personalidad carismtica. Encontr en el teatro tambin una forma de manejar la energa y canalizarla.","Fue lder social apoyando siempre en las actividades basadas en las causas justas en beneficio de la poblacin sobre todo en el mbito educacional, sus acciones y su presencia hicieron que fue propuesto como Hombre de Ao. Fue activista cultural y social asumiendo el cargo de Director del Instituto Nacional de Cultura de la ciudad de Yurimaguas.","Tiempo despus sinti el llamado al servicio, dando su vida un giro completo, pasando as a realizar sanaciones de manera continua en el Per y el extranjero. Ahora su vida est completamente y en todo momento dedicada al servicio y as se origina el Centro de Desarrollo Integral Dos Mundos sanacin del cuerpo y mente para la armonizacin con el alma."]},method:{title:"EL ALIENEAMENTO ENERGETICO",text:["El alineamiento energtico es el mtodo bsico que se aplica en el CDI Dos Mundos, una terapia holstica que entiende al individuo como un Todo (mente-cuerpo-alma) y que propone alinear nuestra vida con la parte ms pura de nuestro Ser, nuestra verdadera Esencia.","Se trata de una novedosa y profunda terapia de la fuente Divina que lleg como parte de la misin principal del Sanador Pepe Ordoez, a travs del don manifestado desde su niez.","Eso consiste en una sesin individual durante la cual mediante el manejo de energa y a otras prcticas teraputica incorporadas durante el tratamiento se logra desbloquear los diferentes centros energticos del ser humano, que han sido afectados debido a diferentes influencias del entorno social y/o familiar produciendo as una regeneracin de todo el cuerpo energtico que en si ya forma base para la auto-sanacin."]},mission:{title:"LA MISSIN",text:["Transferir y devolver el conocimiento de los ancestros en su forma Pura e intacta, as como ellos nos transmitieron adaptada a la generacin actual.","Canalizar todas las manifestaciones energticas a la dimensin correspondiente mediante distintos mtodos de sanacin ligados a la Luz y a la Divinidad.","Promover la armona con el Universo mediante la sanacin de uno mismo y el estar en contacto con la naturaleza."]},vision:{title:"LA VISIN",text:["Unir dos Mundos: el Cielo y la Tierra.","El Hombre y su Existencia se manifiestan no solamente en lo fsico sino tambin en el espacio Espiritual.","Al unir los dos al mximo del potencial del Ser, se da la oportunidad de llegar a la Plenitud y vivir en un planeta donde los dos mundos estn entrelazados en armona.","Entonces llegando a esta se logra una convivencia perfecta entre los mundos diferentes que habitan el planeta Tierra, como el mundo de animales, de plantas, de humanos y de otros espacios fsicos y espirituales.","As en lo cotidiano veremos el manifestar de un nuevo paradigma de relaciones e interacciones no violentas entre diferentes mundos.","A efectos de cambio en el Microcosmos se manifiestan los mismos cambios en el Macrocosmos."]},contacts:{title:"Contactos",email:"pepemariadosmundos@gmail.com",whatsapp:"+51959144314",whatsappName:"Juan Carlos",youtube:"DOSMUNDOSCDI",instagram:"https://www.instagram.com/dosmundos_peru/"}}},r=t[e||"ru"]||t.ru;return Z.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[Z.jsxs("div",{className:"mb-12 text-center",children:[Z.jsx("h1",{className:"text-4xl md:text-5xl font-bold font-serif bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-500 mb-6",children:r.title}),Z.jsx("div",{className:"prose prose-lg prose-invert font-serif mx-auto text-slate-300",children:r.description.map(((e,t)=>Z.jsx("p",{className:"mb-4 leading-relaxed text-justify",children:e},t)))})]}),Z.jsxs("section",{className:"mb-16 bg-slate-900/50 p-8 rounded-2xl border border-slate-800 backdrop-blur-sm",children:[Z.jsx("h2",{className:"text-3xl font-bold font-serif text-white mb-6 border-b border-slate-700 pb-4",children:r.biography.title}),Z.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[Z.jsx("div",{className:"flex-1 prose prose-invert font-serif text-slate-300",children:r.biography.text.map(((e,t)=>Z.jsx("p",{className:"mb-4 leading-relaxed text-justify",children:e},t)))}),Z.jsx("div",{className:"w-full md:w-1/3 shrink-0",children:Z.jsx("img",{src:"https://static.wixstatic.com/media/7e97c8_c6a73b3412554d75946af5ddb942012a~mv2.jpg/v1/fill/w_800,h_1334,al_c,q_85,enc_avif,quality_auto/7e97c8_c6a73b3412554d75946af5ddb942012a~mv2.jpg",alt:"Pepe Ordoez",className:"w-full rounded-xl shadow-lg object-cover aspect-[3/4]"})})]})]}),Z.jsxs("section",{className:"mb-16",children:[Z.jsx("h2",{className:"text-3xl font-bold font-serif text-white mb-6 border-b border-slate-800 pb-4",children:r.method.title}),Z.jsxs("div",{className:"flex flex-col md:flex-row-reverse gap-8 items-start",children:[Z.jsx("div",{className:"flex-1 prose prose-invert font-serif text-slate-300",children:r.method.text.map(((e,t)=>Z.jsx("p",{className:"mb-4 leading-relaxed text-justify",children:e},t)))}),Z.jsx("div",{className:"w-full md:w-1/3 shrink-0",children:Z.jsx("img",{src:"https://static.wixstatic.com/media/7e97c8_cb6447e02ace46678cd805f0102a165e~mv2.jpg/v1/fill/w_400,h_500,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/Energy.jpg",alt:"Energy Correction",className:"w-full rounded-xl shadow-lg object-cover"})})]})]}),Z.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-16",children:[Z.jsxs("section",{className:"bg-slate-900/30 p-8 rounded-2xl border border-slate-800",children:[Z.jsx("h2",{className:"text-2xl font-bold font-serif text-purple-400 mb-4",children:r.mission.title}),Z.jsx("div",{className:"prose prose-invert font-serif text-slate-300",children:r.mission.text.map(((e,t)=>Z.jsx("p",{className:"mb-4",children:e},t)))})]}),Z.jsxs("section",{className:"bg-slate-900/30 p-8 rounded-2xl border border-slate-800",children:[Z.jsx("h2",{className:"text-2xl font-bold font-serif text-pink-400 mb-4",children:r.vision.title}),Z.jsx("div",{className:"prose prose-invert font-serif text-slate-300",children:r.vision.text.map(((e,t)=>Z.jsx("p",{className:"mb-4",children:e},t)))})]})]}),Z.jsxs("section",{className:"bg-gradient-to-br from-slate-900 to-slate-800 p-8 rounded-2xl border border-slate-700 text-center",children:[Z.jsx("h2",{className:"text-3xl font-bold font-serif text-white mb-8",children:r.contacts.title}),Z.jsxs("div",{className:"flex flex-wrap justify-center gap-8 md:gap-16",children:[Z.jsxs("a",{href:`mailto:${r.contacts.email}`,className:"flex flex-col items-center gap-3 group",children:[Z.jsx("div",{className:"p-4 bg-blue-500/20 rounded-full text-blue-400 group-hover:bg-blue-500 group-hover:text-white transition-all",children:Z.jsx(Qp,{className:"w-8 h-8"})}),Z.jsx("span",{className:"text-slate-300 group-hover:text-white transition-colors",children:r.contacts.email})]}),Z.jsxs("a",{href:`https://wa.me/${r.contacts.whatsapp.replace("+","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center gap-3 group",children:[Z.jsx("div",{className:"p-4 bg-green-500/20 rounded-full text-green-400 group-hover:bg-green-500 group-hover:text-white transition-all",children:Z.jsx(og,{className:"w-8 h-8"})}),Z.jsxs("div",{className:"flex flex-col items-center",children:[Z.jsx("span",{className:"text-slate-300 group-hover:text-white transition-colors font-medium",children:r.contacts.whatsapp}),Z.jsx("span",{className:"text-sm text-slate-500 group-hover:text-slate-300",children:r.contacts.whatsappName})]})]}),Z.jsxs("a",{href:`https://youtube.com/${r.contacts.youtube}`,target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center gap-3 group",children:[Z.jsx("div",{className:"p-4 bg-red-500/20 rounded-full text-red-400 group-hover:bg-red-500 group-hover:text-white transition-all",children:Z.jsx(jg,{className:"w-8 h-8"})}),Z.jsx("span",{className:"text-slate-300 group-hover:text-white transition-colors",children:"YouTube"})]}),Z.jsxs("a",{href:r.contacts.instagram,target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center gap-3 group",children:[Z.jsx("div",{className:"p-4 bg-pink-500/20 rounded-full text-pink-400 group-hover:bg-pink-500 group-hover:text-white transition-all",children:Z.jsx(Vp,{className:"w-8 h-8"})}),Z.jsx("span",{className:"text-slate-300 group-hover:text-white transition-colors",children:"Instagram"})]})]})]})]})},Cfe=()=>{const{lang:e}=nh(),t={ru:{title:"VI Encuentro Universal de Ancianos",subtitle:"20 al 24 de Junio 2022",description:["Por nuestra identidad ancestral y nuestra cultura ancestral.","Se va a llevar a cabo del 20 al 24 de junio en el Centro de Desarrollo Integral Dos Mundos, Yurimaguas.","Vamos a contar con la participacin de ancianos de distintos pueblos, ciudades, y hasta estamos convocando sanadores de otros pases. Ancianos que van a transmitir la sabidura y compartir las vivencias.","Estos 5 das sern muy nutridos de una actividades culturales y sociales permanentes, incluyendo procesos de sanacion contantes utilizando distintos mtodos (cada anciano va a compartir su mtodo).","Va a ser muy nutrida y valiossima para el aporte a esta nueva generacin y a la transformacin del planeta de estos ltimos tiempos."],masters:{title:"Ancianos-Maestros",list:[{name:"Luis Lancha",role:"Chamn Shawi",image:"https://static.wixstatic.com/media/7e97c8_dce5900fbaf9480698d7bb1fb7fba3f3~mv2.jpg/v1/fill/w_280,h_272,al_c,lg_1,q_80,enc_avif,quality_auto/288443207_410951567711096_860690846006933208_n_edited.jpg"},{name:"Roger Pizango",role:"Jeberos, Alto Amazonas",image:"https://static.wixstatic.com/media/7e97c8_2a1bfaefed3f4b9c9e97436a1bef15b4~mv2.jpg/v1/fill/w_395,h_384,al_c,lg_1,q_80,enc_avif,quality_auto/288465536_410951571044429_6852142950467618379_n_edited.jpg"},{name:"Mother Kogi Rumaldo Lozano Gil",role:"Guardian del sitio sagrado TEYUNA, en la Sierra Nevada de Santa Marta (Colombia)",image:"https://static.wixstatic.com/media/7e97c8_bcd2bfbf1772493a97b7623e77adb6cd~mv2.jpg/v1/fill/w_350,h_341,al_c,lg_1,q_80,enc_avif,quality_auto/safe_image_edited.jpg"},{name:"Wellington",role:"Huesero/Sobador",image:"https://static.wixstatic.com/media/7e97c8_af2b03433983499997a4618d317ff7fd~mv2.jpg/v1/fill/w_414,h_403,al_c,lg_1,q_80,enc_avif,quality_auto/287879551_410328627773390_6082651626267484171_n_edited.jpg"},{name:"Doa Asencia Snchez",role:"Shipibo-Conibo",image:"https://static.wixstatic.com/media/7e97c8_862e2d0e6ddd41c3a64b833974ade932~mv2.jpg/v1/fill/w_469,h_456,al_c,lg_1,q_80,enc_avif,quality_auto/286236073_407320441407542_2575613744753019521_n_edited.jpg"},{name:"Marco Leoncio Mosquera Huatay",role:"Sacerdote Andino",image:"https://static.wixstatic.com/media/7e97c8_4ec87acdc0d6472e99a847a9f61ebbc8~mv2.jpg/v1/fill/w_557,h_542,al_c,lg_1,q_80,enc_avif,quality_auto/285860454_405854051554181_2750864275937047049_n_edited.jpg"}]},contacts:{title:"Informes y reservas a:",email:"pepemariadosmundos@gmail.com",whatsapp1:"+51 959 144 314",whatsapp2:"+51 993 332 946",facebook:"dosmundosperu"}},es:{title:"VI Encuentro Universal de Ancianos",subtitle:"20 al 24 de Junio 2022",description:["Por nuestra identidad ancestral y nuestra cultura ancestral.","Se va a llevar a cabo del 20 al 24 de junio en el Centro de Desarrollo Integral Dos Mundos, Yurimaguas.","Vamos a contar con la participacin de ancianos de distintos pueblos, ciudades, y hasta estamos convocando sanadores de otros pases. Ancianos que van a transmitir la sabidura y compartir las vivencias.","Estos 5 das sern muy nutridos de una actividades culturales y sociales permanentes, incluyendo procesos de sanacion contantes utilizando distintos mtodos (cada anciano va a compartir su mtodo).","Va a ser muy nutrida y valiossima para el aporte a esta nueva generacin y a la transformacin del planeta de estos ltimos tiempos."],masters:{title:"Ancianos-Maestros",list:[{name:"Luis Lancha",role:"Chamn Shawi",image:"https://static.wixstatic.com/media/7e97c8_dce5900fbaf9480698d7bb1fb7fba3f3~mv2.jpg/v1/fill/w_280,h_272,al_c,lg_1,q_80,enc_avif,quality_auto/288443207_410951567711096_860690846006933208_n_edited.jpg"},{name:"Roger Pizango",role:"Jeberos, Alto Amazonas",image:"https://static.wixstatic.com/media/7e97c8_2a1bfaefed3f4b9c9e97436a1bef15b4~mv2.jpg/v1/fill/w_395,h_384,al_c,lg_1,q_80,enc_avif,quality_auto/288465536_410951571044429_6852142950467618379_n_edited.jpg"},{name:"Mother Kogi Rumaldo Lozano Gil",role:"Guardian del sitio sagrado TEYUNA, en la Sierra Nevada de Santa Marta (Colombia)",image:"https://static.wixstatic.com/media/7e97c8_bcd2bfbf1772493a97b7623e77adb6cd~mv2.jpg/v1/fill/w_350,h_341,al_c,lg_1,q_80,enc_avif,quality_auto/safe_image_edited.jpg"},{name:"Wellington",role:"Huesero/Sobador",image:"https://static.wixstatic.com/media/7e97c8_af2b03433983499997a4618d317ff7fd~mv2.jpg/v1/fill/w_414,h_403,al_c,lg_1,q_80,enc_avif,quality_auto/287879551_410328627773390_6082651626267484171_n_edited.jpg"},{name:"Doa Asencia Snchez",role:"Shipibo-Conibo",image:"https://static.wixstatic.com/media/7e97c8_862e2d0e6ddd41c3a64b833974ade932~mv2.jpg/v1/fill/w_469,h_456,al_c,lg_1,q_80,enc_avif,quality_auto/286236073_407320441407542_2575613744753019521_n_edited.jpg"},{name:"Marco Leoncio Mosquera Huatay",role:"Sacerdote Andino",image:"https://static.wixstatic.com/media/7e97c8_4ec87acdc0d6472e99a847a9f61ebbc8~mv2.jpg/v1/fill/w_557,h_542,al_c,lg_1,q_80,enc_avif,quality_auto/285860454_405854051554181_2750864275937047049_n_edited.jpg"}]},contacts:{title:"Informes y reservas a:",email:"pepemariadosmundos@gmail.com",whatsapp1:"+51 959 144 314",whatsapp2:"+51 993 332 946",facebook:"dosmundosperu"}}},r=t[e||"ru"]||t.ru;return Z.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[Z.jsxs("div",{className:"mb-12 text-center",children:[Z.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-500 mb-2",children:r.title}),Z.jsx("p",{className:"text-xl text-slate-400 mb-6",children:r.subtitle}),Z.jsx("div",{className:"mb-8",children:Z.jsx("img",{src:"https://static.wixstatic.com/media/7e97c8_d3c5ad07f0c64657a17db323120d67ec~mv2.jpg/v1/fill/w_960,h_425,al_c,q_85,enc_avif,quality_auto/7e97c8_d3c5ad07f0c64657a17db323120d67ec~mv2.jpg",alt:"Encuentro Banner",className:"w-full rounded-xl shadow-lg object-cover"})}),Z.jsx("div",{className:"prose prose-lg prose-invert mx-auto text-slate-300",children:r.description.map(((e,t)=>Z.jsx("p",{className:"mb-4 leading-relaxed text-justify",children:e},t)))})]}),Z.jsxs("section",{className:"mb-16",children:[Z.jsx("h2",{className:"text-3xl font-bold text-white mb-8 text-center border-b border-slate-800 pb-4",children:r.masters.title}),Z.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:r.masters.list.map(((e,t)=>Z.jsxs("div",{className:"bg-slate-900/50 rounded-xl overflow-hidden border border-slate-800 hover:border-slate-600 transition-all hover:scale-[1.02]",children:[Z.jsx("div",{className:"aspect-square overflow-hidden",children:Z.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"})}),Z.jsxs("div",{className:"p-4 text-center",children:[Z.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:e.name}),Z.jsx("p",{className:"text-sm text-slate-400",children:e.role})]})]},t)))})]}),Z.jsxs("section",{className:"bg-gradient-to-br from-slate-900 to-slate-800 p-8 rounded-2xl border border-slate-700 text-center",children:[Z.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:r.contacts.title}),Z.jsxs("div",{className:"flex flex-wrap justify-center gap-8 md:gap-16",children:[Z.jsxs("a",{href:`mailto:${r.contacts.email}`,className:"flex flex-col items-center gap-3 group",children:[Z.jsx("div",{className:"p-4 bg-blue-500/20 rounded-full text-blue-400 group-hover:bg-blue-500 group-hover:text-white transition-all",children:Z.jsx(Qp,{className:"w-8 h-8"})}),Z.jsx("span",{className:"text-slate-300 group-hover:text-white transition-colors",children:r.contacts.email})]}),Z.jsxs("div",{className:"flex flex-col items-center gap-3",children:[Z.jsx("div",{className:"p-4 bg-green-500/20 rounded-full text-green-400",children:Z.jsx(og,{className:"w-8 h-8"})}),Z.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Z.jsx("a",{href:`https://wa.me/${r.contacts.whatsapp1.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"text-slate-300 hover:text-white transition-colors font-medium",children:r.contacts.whatsapp1}),Z.jsx("a",{href:`https://wa.me/${r.contacts.whatsapp2.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"text-slate-300 hover:text-white transition-colors font-medium",children:r.contacts.whatsapp2})]})]}),Z.jsxs("a",{href:`https://facebook.com/${r.contacts.facebook}`,target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center gap-3 group",children:[Z.jsx("div",{className:"p-4 bg-blue-600/20 rounded-full text-blue-500 group-hover:bg-blue-600 group-hover:text-white transition-all",children:Z.jsx(Dp,{className:"w-8 h-8"})}),Z.jsx("span",{className:"text-slate-300 group-hover:text-white transition-colors",children:"Facebook"})]})]})]})]})},Pfe=()=>{const{lang:e}=nh(),t=e||"ru",r={ru:{title:"",subtitle:"    Dos Mundos",readMore:"",events:[{id:"new-year",title:"     ",date:"31  - 3  2026",location:"Dos Mundos, Yurimaguas",description:"     .  ,     .",image:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80",link:`/${t}/new-year`},{id:"festival",title:"VI Encuentro Universal de Ancianos",date:"20 - 24  2022",location:"Dos Mundos, Yurimaguas",description:"   .     .",image:"https://static.wixstatic.com/media/7e97c8_dce5900fbaf9480698d7bb1fb7fba3f3~mv2.jpg/v1/fill/w_280,h_272,al_c,lg_1,q_80,enc_avif,quality_auto/288443207_410951567711096_860690846006933208_n_edited.jpg",link:`/${t}/festival`}]},es:{title:"Eventos",subtitle:"Eventos y encuentros en Dos Mundos",readMore:"Leer ms",events:[{id:"new-year",title:"Ao Nuevo en el Centro Dos Mundos",date:"31 de diciembre - 3 de enero del 2026",location:"Dos Mundos, Yurimaguas",description:"Celebra el Ao Nuevo en el corazn de la Amazona. Programa nico, ceremonias e inmersin en la naturaleza.",image:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80",link:`/${t}/new-year`},{id:"festival",title:"VI Encuentro Universal de Ancianos",date:"20 - 24 de junio de 2022",location:"Dos Mundos, Yurimaguas",description:"Encuentro de ancianos y sanadores. Intercambio de sabidura y tradiciones ancestrales.",image:"https://static.wixstatic.com/media/7e97c8_dce5900fbaf9480698d7bb1fb7fba3f3~mv2.jpg/v1/fill/w_280,h_272,al_c,lg_1,q_80,enc_avif,quality_auto/288443207_410951567711096_860690846006933208_n_edited.jpg",link:`/${t}/festival`}]},en:{title:"Events",subtitle:"Events and meetings at Dos Mundos",readMore:"Read more",events:[{id:"new-year",title:"New Year at Dos Mundos Center",date:"December 31 - January 3, 2026",location:"Dos Mundos, Yurimaguas",description:"Celebrate New Year in the heart of the Amazon. Unique program, ceremonies, and immersion in nature.",image:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80",link:`/${t}/new-year`},{id:"festival",title:"VI Encuentro Universal de Ancianos",date:"June 20 - 24, 2022",location:"Dos Mundos, Yurimaguas",description:"Gathering of elders and healers. Sharing wisdom and ancestral traditions.",image:"https://static.wixstatic.com/media/7e97c8_dce5900fbaf9480698d7bb1fb7fba3f3~mv2.jpg/v1/fill/w_280,h_272,al_c,lg_1,q_80,enc_avif,quality_auto/288443207_410951567711096_860690846006933208_n_edited.jpg",link:`/${t}/festival`}]}},n=r[t]||r.en;return Z.jsx("div",{className:"min-h-screen bg-slate-900 text-slate-200 pt-20 pb-12",children:Z.jsxs("div",{className:"container mx-auto px-4",children:[Z.jsxs("div",{className:"max-w-4xl mx-auto mb-12 text-center",children:[Z.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:n.title}),Z.jsx("p",{className:"text-xl text-slate-400",children:n.subtitle})]}),Z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto",children:n.events.map((e=>Z.jsxs(Ah,{to:e.link,className:"group bg-slate-800/50 rounded-2xl overflow-hidden border border-white/5 hover:border-white/10 transition-all hover:bg-slate-800",children:[Z.jsxs("div",{className:"aspect-video overflow-hidden relative",children:[Z.jsx("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}),Z.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),Z.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:Z.jsxs("div",{className:"flex items-center gap-2 text-orange-400 text-sm font-medium mb-1",children:[Z.jsx(pp,{size:16}),Z.jsx("span",{children:e.date})]})})]}),Z.jsxs("div",{className:"p-6",children:[Z.jsx("h2",{className:"text-2xl font-bold text-white mb-2 group-hover:text-orange-400 transition-colors",children:e.title}),Z.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-sm mb-4",children:[Z.jsx(Yp,{size:16}),Z.jsx("span",{children:e.location})]}),Z.jsx("p",{className:"text-slate-300 mb-6 line-clamp-3",children:e.description}),Z.jsxs("div",{className:"flex items-center text-orange-400 font-medium group-hover:translate-x-2 transition-transform",children:[n.readMore," ",Z.jsx(hp,{size:16,className:"ml-2"})]})]})]},e.id)))})]})})},Dfe=()=>{const{lang:e}=nh(),t={ru:{title:"     ",subtitle:"31  - 3  2026",description:["          ,       ,   .       'Dos Mundos' ,         . ,            -    ,  ,      ,        ,          .","CDI 'Dos Mundos'       (Baos de Florecimiento)         ,    ,    .     ,        .","  ,  ,   ,         ,         ."],eventDetails:{invitation:"31 , 1, 2, 3...  2025 ,          5  ( ),    19    - .",includes:{title:"",items:["2   (   )","3   ( ,    )"," (Sahumada)"]},pricing:{title:"",items:[" : S/. 200.00",":  S/. 200.00 +  S/. 150.00 = S/. 350.00"]}},contacts:{title:"  :",email:"pepemariadosmundos@gmail.com",whatsapp1:"+51 959 144 314",whatsapp2:"+51 993 332 946",facebook:"dosmundosperu"}},es:{title:"Ao Nuevo en el Centro Dos Mundos",subtitle:"31 de diciembre - 3 de enero del 2026",description:['La naturaleza por creacin divina, mantiene intacta la sabidura ancestral, riqueza que hemos olvidado por la influencia desgarradora del mundo en el que vivimos. En este sentido, el Centro de Desarrollo Integral "Dos Mundos" rescata, revalora estos conocimientos y los difunde por el mundo entero. Es as, que en esta oportunidad busca acercarnos e introducirnos al mundo de la depuracin Fisio energtica a travs de la ingesta de plantas, baos depurativos, conexin y sincronizacin con diversos elementos, logrando armonizar y alinear los chacras o centros energticos, los cuales son vitales para el funcionamiento y equilibrio de toda nuestra existencia.','El CDI "Dos Mundos", les presenta y ofrece los Baos de florecimiento, como baos depurativos y renovadores a travs de las distintas plantas amaznicas, andinas y costeas que ayudan al bienestar del hombre. Estos baos tienen un proceso de preparacin como lo hacan nuestros antepasados en distintos eventos.',"Actualmente, gracias al Universo, se viene logrando resultados inspiradores de los cuales estamos agradecidos con cada uno de ustedes por permitirnos ser parte de su avance y transformacin."],eventDetails:{invitation:"Este 31, 1, 2, 3 de enero del 2026, estn cordialmente invitados a participar en la CEREMONIA SAGRADA DE PURIFICACIN con 5 elementos (Baos de Florecimiento) que se desarrollar en el km 19 carretera Yurimaguas - Tarapoto.",includes:{title:"INCLUYE",items:["2 baos purificativos (con plantas y sal)","3 baos armonizantes (con flores, cristales y agua bendita)","Sahumada"]},pricing:{title:"PRECIOS",items:["Precio de Baos: S/. 200.00","PROMOCIN: Baos S/. 200.00 + Ayahuasca S/. 150.00 = S/. 350.00"]}},contacts:{title:"Reservas y consultas:",email:"pepemariadosmundos@gmail.com",whatsapp1:"+51 959 144 314",whatsapp2:"+51 993 332 946",facebook:"dosmundosperu"}},en:{title:"New Year at Dos Mundos Center",subtitle:"December 31 - January 3, 2026",description:["Nature, by divine creation, keeps ancestral wisdom intact, a wealth we have forgotten due to the heartbreaking influence of the world we live in. In this sense, the Integral Development Center 'Dos Mundos' rescues, revalues these knowledges and spreads them throughout the world. Thus, on this opportunity, it seeks to bring us closer and introduce us to the world of Physio-energetic purification through the ingestion of plants, purifying baths, connection and synchronization with various elements, achieving harmony and alignment of the chakras or energy centers, which are vital for the functioning and balance of our entire existence.","The CDI 'Dos Mundos' presents and offers you Flowering Baths, as purifying and renewing baths through the different Amazonian, Andean and coastal plants that help man's well-being. These baths have a preparation process as our ancestors did in different events.","Currently, thanks to the Universe, inspiring results are being achieved for which we are grateful to each of you for allowing us to be part of your progress and transformation."],eventDetails:{invitation:"This December 31st, January 1st, 2nd, 3rd... 2026, you are cordially invited to participate in the SACRED PURIFICATION CEREMONY with 5 elements (Flowering Baths) which will take place at km 19 Yurimaguas - Tarapoto road.",includes:{title:"INCLUDES",items:["2 purifying baths (with plants and salt)","3 harmonizing baths (with flowers, crystals and holy water)","Smudging (Sahumada)"]},pricing:{title:"PRICING",items:["Baths Price: S/. 200.00","PROMOTION: Baths S/. 200.00 + Ayahuasca S/. 150.00 = S/. 350.00"]}},contacts:{title:"Booking and inquiries:",email:"pepemariadosmundos@gmail.com",whatsapp1:"+51 959 144 314",whatsapp2:"+51 993 332 946",facebook:"dosmundosperu"}}},r=t[e||"ru"]||t.en;return Z.jsx("div",{className:"min-h-screen bg-slate-900 text-slate-200 pt-20 pb-12",children:Z.jsxs("div",{className:"container mx-auto px-4",children:[Z.jsxs("div",{className:"max-w-4xl mx-auto text-center mb-12",children:[Z.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white mb-4 bg-clip-text text-transparent bg-gradient-to-r from-orange-400 to-red-400",children:r.title}),Z.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4 text-xl text-slate-300",children:[Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx(pp,{className:"text-orange-400"}),Z.jsx("span",{children:r.subtitle})]}),Z.jsx("div",{className:"hidden md:block text-slate-600",children:""}),Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx(Yp,{className:"text-orange-400"}),Z.jsx("span",{children:"Dos Mundos, Yurimaguas"})]})]})]}),Z.jsxs("div",{className:"max-w-3xl mx-auto space-y-12",children:[Z.jsx("div",{className:"bg-slate-800/50 rounded-2xl p-8 border border-white/5",children:Z.jsx("div",{className:"space-y-4 text-lg leading-relaxed text-slate-300",children:r.description.map(((e,t)=>Z.jsx("p",{children:e},t)))})}),Z.jsxs("div",{className:"bg-slate-800/50 rounded-2xl p-8 border border-white/5 space-y-8",children:[Z.jsx("p",{className:"text-lg text-slate-300 font-medium",children:r.eventDetails.invitation}),Z.jsxs("div",{children:[Z.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-orange-400",children:r.eventDetails.includes.title}),Z.jsx("ul",{className:"space-y-3",children:r.eventDetails.includes.items.map(((e,t)=>Z.jsxs("li",{className:"flex gap-3",children:[Z.jsx("div",{className:"w-1.5 h-1.5 mt-2.5 rounded-full bg-orange-400 shrink-0"}),Z.jsx("span",{className:"text-slate-300",children:e})]},t)))})]}),Z.jsxs("div",{children:[Z.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-orange-400",children:r.eventDetails.pricing.title}),Z.jsx("ul",{className:"space-y-3",children:r.eventDetails.pricing.items.map(((e,t)=>Z.jsxs("li",{className:"flex gap-3",children:[Z.jsx("div",{className:"w-1.5 h-1.5 mt-2.5 rounded-full bg-orange-400 shrink-0"}),Z.jsx("span",{className:"text-slate-300 font-semibold",children:e})]},t)))})]})]}),Z.jsxs("div",{className:"bg-gradient-to-br from-orange-900/20 to-slate-900 rounded-2xl p-8 border border-orange-500/20",children:[Z.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:r.contacts.title}),Z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Z.jsxs("a",{href:`mailto:${r.contacts.email}`,className:"flex items-center gap-3 text-slate-300 hover:text-orange-400 transition-colors",children:[Z.jsx("div",{className:"p-2 bg-slate-800 rounded-lg",children:Z.jsx(Qp,{size:20})}),Z.jsx("span",{children:r.contacts.email})]}),Z.jsxs("a",{href:`https://wa.me/${r.contacts.whatsapp1.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-slate-300 hover:text-orange-400 transition-colors",children:[Z.jsx("div",{className:"p-2 bg-slate-800 rounded-lg",children:Z.jsx(og,{size:20})}),Z.jsx("span",{children:r.contacts.whatsapp1})]}),Z.jsxs("a",{href:`https://wa.me/${r.contacts.whatsapp2.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-slate-300 hover:text-orange-400 transition-colors",children:[Z.jsx("div",{className:"p-2 bg-slate-800 rounded-lg",children:Z.jsx(og,{size:20})}),Z.jsx("span",{children:r.contacts.whatsapp2})]}),Z.jsxs("a",{href:`https://facebook.com/${r.contacts.facebook}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-slate-300 hover:text-orange-400 transition-colors",children:[Z.jsx("div",{className:"p-2 bg-slate-800 rounded-lg",children:Z.jsx(Dp,{size:20})}),Z.jsx("span",{children:r.contacts.facebook})]})]})]})]})]})})},Rfe={ru:{title:" ",subtitle:"    ",intro:"     .   ,    .       ,      ,    ,     ,       .\n\n      ,       ,   ,    .    ,             ,          .",sections:[{title:"  ",text:"         .       .    ,       ,        "},{title:"  ",text:"  ,          .         ,      ."}],waysToServe:{title:" ",items:[{icon:wg,text:"    :   , ,  , ,   "},{icon:Cg,text:"  :    "},{icon:qp,text:"  :     ,   "},{icon:_g,text:"   :  ,   "},{icon:jp,text:":      (   ,      )"},{icon:Bp,text:" :  ,      "}]},philosophy:{title:" ",text:" ,         ,    .           ,      ."},closing:{title:"  ",text:"            ,   .   ,      "}},en:{title:"VOLUNTEER INVITATION",subtitle:"Healing and Service in the Amazon",intro:"Dos Mundos Center is founded on service. We bring together people who follow this path. Instead of hiring professional workers, we invite volunteers so that everyone who comes to Dos Mundos can express their sincerity, feel useful and needed, and manifest their love within the community.\n\nIf you feel a call to spiritual development, we invite you to join our community located in Peru, in the heart of the Amazon jungle. This is an opportunity for those ready for deep inner transformation and wishing to walk the path of healing through service, as well as work with traditional plants under the guidance of healer Pepe.",sections:[{title:"What We Offer",text:"A safe space for healing with Ayahuasca and other traditional plants. Organic food from our own farm. A healthy environment and accommodation allowing you to disconnect from the bustle of the modern world, reconnect with yourself, and restore your connection with nature."},{title:"Who We Are Looking For",text:"We are looking for volunteers who want to combine their own healing journey with service to others. This is not just a retreat  it is a deep transformational experience where growth happens through manifested service."}],waysToServe:{title:"Ways to Serve",items:[{icon:wg,text:"Farm and animal care: caring for cows, goats, guinea pigs, rabbits, chickens, and horses"},{icon:Cg,text:"Kitchen help: food preparation and cleaning"},{icon:qp,text:"Housekeeping: cleaning rooms and bathrooms, helping with laundry"},{icon:_g,text:"Dairy work: making butter, cottage cheese, and cheese"},{icon:jp,text:"Fishing: helping with net fishing (participation of men comfortable with this work is especially welcome)"},{icon:Bp,text:"Community support: various tasks contributing to the prosperity and development of our community"}]},philosophy:{title:"Center Philosophy",text:"We believe that true healing comes both through deep inner work and through service. Every day at Dos Mundos is an opportunity for transformation through practice, connection with nature, and heartfelt service."},closing:{title:"Join Us",text:"If you feel the call to walk this path of healing and service with us, we are waiting for you. Write to us about yourself, your experience, and your desired length of stay."}},es:{title:"LLAMADO A VOLUNTARIOS",subtitle:"Sanacin y Servicio en la Amazona",intro:"El Centro Dos Mundos se basa en el servicio. Unimos a personas que siguen este camino. En lugar de contratar trabajadores profesionales, invitamos a voluntarios para que cada persona que llegue a Dos Mundos pueda expresar su sinceridad, sentirse til y necesaria, y manifestar su amor en la comunidad.\n\nSi sientes un llamado al desarrollo espiritual, te invitamos a unirte a nuestra comunidad ubicada en Per, en el corazn de la selva amaznica. Esta es una oportunidad para aquellos listos para una profunda transformacin interior y que desean recorrer el camino de sanacin a travs del servicio, as como el trabajo con plantas tradicionales bajo la gua del curandero Pepe.",sections:[{title:"Lo Que Ofrecemos",text:"Un espacio seguro para la sanacin con Ayahuasca y otras plantas tradicionales. Alimentacin orgnica con productos de nuestra propia granja. Un entorno saludable y alojamiento que te permite desconectarte del ajetreo del mundo moderno, reconectarte contigo mismo y restaurar tu conexin con la naturaleza."},{title:"A Quin Buscamos",text:"Buscamos voluntarios que quieran combinar su propio camino de sanacin con el servicio a los dems. Esto no es solo un retiro, es una experiencia de transformacin profunda donde el crecimiento ocurre a travs del servicio manifiesto."}],waysToServe:{title:"Formas de Servir",items:[{icon:wg,text:"Cuidado de la granja y animales: cuidado de vacas, cabras, cuyes, conejos, gallinas y caballos"},{icon:Cg,text:"Ayuda en la cocina: preparacin de alimentos y limpieza"},{icon:qp,text:"Cuidado del hogar: limpieza de habitaciones y baos, ayuda con la lavandera"},{icon:_g,text:"Trabajo en la lechera: elaboracin de mantequilla, requesn y queso"},{icon:jp,text:"Pesca: ayuda con la pesca con redes (se agradece especialmente la participacin de hombres que se sientan cmodos con este trabajo)"},{icon:Bp,text:"Apoyo a la comunidad: diversas tareas que contribuyen a la prosperidad y desarrollo de nuestra comunidad"}]},philosophy:{title:"Filosofa del Centro",text:"Creemos que la verdadera sanacin llega tanto a travs del trabajo interior profundo como a travs del servicio. Cada da en Dos Mundos es una oportunidad de transformacin a travs de la prctica, la conexin con la naturaleza y el servicio de corazn."},closing:{title:"nete a Nosotros",text:"Si sientes el llamado a recorrer este camino de sanacin y servicio con nosotros, te esperamos. Escrbenos sobre ti, tu experiencia y el tiempo de estancia deseado."}},de:{title:"EINLADUNG FR FREIWILLIGE",subtitle:"Heilung und Dienst im Amazonas",intro:"Das Zentrum Dos Mundos grndet sich auf dem Dienen. Wir bringen Menschen zusammen, die diesem Weg folgen. Anstatt professionelle Arbeitskrfte einzustellen, laden wir Freiwillige ein, damit jeder, der nach Dos Mundos kommt, seine Aufrichtigkeit zeigen, sich ntzlich und gebraucht fhlen und seine Liebe in der Gemeinschaft zum Ausdruck bringen kann.\n\nWenn Sie den Ruf zur spirituellen Entwicklung spren, laden wir Sie ein, sich unserer Gemeinschaft in Peru, im Herzen des Amazonas-Dschungels, anzuschlieen. Dies ist eine Gelegenheit fr diejenigen, die bereit sind fr eine tiefe innere Transformation und den Weg der Heilung durch Dienen gehen mchten, sowie fr die Arbeit mit traditionellen Pflanzen unter der Leitung des Heilers Pepe.",sections:[{title:"Was Wir Bieten",text:"Einen sicheren Raum fr Heilung mit Ayahuasca und anderen traditionellen Pflanzen. Bio-Ernhrung mit Produkten von unserer eigenen Farm. Eine gesunde Umgebung und Unterkunft, die es Ihnen ermglicht, sich von der Hektik der modernen Welt zu lsen, wieder zu sich selbst zu finden und die Verbindung zur Natur wiederherzustellen."},{title:"Wen Wir Suchen",text:"Wir suchen Freiwillige, die ihren eigenen Heilungsweg mit dem Dienst an anderen verbinden mchten. Dies ist nicht nur ein Retreat  es ist eine tiefe transformative Erfahrung, bei der Wachstum durch gelebtes Dienen geschieht."}],waysToServe:{title:"Mglichkeiten zu Dienen",items:[{icon:wg,text:"Farm- und Tierpflege: Pflege von Khen, Ziegen, Meerschweinchen, Kaninchen, Hhnern und Pferden"},{icon:Cg,text:"Hilfe in der Kche: Zubereitung von Speisen und Reinigung"},{icon:qp,text:"Hauswirtschaft: Reinigung von Zimmern und Bdern, Hilfe bei der Wsche"},{icon:_g,text:"Arbeit in der Molkerei: Herstellung von Butter, Quark und Kse"},{icon:jp,text:"Fischen: Hilfe beim Netzfischen (die Teilnahme von Mnnern, die sich mit dieser Arbeit wohlfhlen, ist besonders willkommen)"},{icon:Bp,text:"Untersttzung der Gemeinschaft: verschiedene Aufgaben, die zum Wohlstand und zur Entwicklung unserer Gemeinschaft beitragen"}]},philosophy:{title:"Philosophie des Zentrums",text:"Wir glauben, dass wahre Heilung sowohl durch tiefe innere Arbeit als auch durch Dienen kommt. Jeder Tag in Dos Mundos ist eine Gelegenheit zur Transformation durch Praxis, Verbindung mit der Natur und herzliches Dienen."},closing:{title:"Schlieen Sie sich uns an",text:"Wenn Sie den Ruf spren, diesen Weg der Heilung und des Dienens mit uns zu gehen, erwarten wir Sie. Schreiben Sie uns ber sich, Ihre Erfahrung und die gewnschte Aufenthaltsdauer."}},fr:{title:"INVITATION AUX BNVOLES",subtitle:"Gurison et Service en Amazonie",intro:"Le Centre Dos Mundos est fond sur le service. Nous runissons des personnes qui suivent cette voie. Au lieu d'embaucher des travailleurs professionnels, nous invitons des bnvoles afin que chacun venant  Dos Mundos puisse exprimer sa sincrit, se sentir utile et ncessaire, et manifester son amour au sein de la communaut.\n\nSi vous ressentez l'appel du dveloppement spirituel, nous vous invitons  rejoindre notre communaut situe au Prou, au cur de la jungle amazonienne. C'est une opportunit pour ceux qui sont prts pour une profonde transformation intrieure et souhaitent parcourir le chemin de la gurison par le service, ainsi que travailler avec des plantes traditionnelles sous la direction du gurisseur Pepe.",sections:[{title:"Ce Que Nous Offrons",text:"Un espace sr pour la gurison avec l'Ayahuasca et d'autres plantes traditionnelles. Une alimentation biologique issue des produits de notre propre ferme. Un environnement sain et un hbergement vous permettant de vous dconnecter de l'agitation du monde moderne, de vous reconnecter avec vous-mme et de rtablir le lien avec la nature."},{title:"Qui Nous Recherchons",text:"Nous recherchons des bnvoles qui souhaitent combiner leur propre chemin de gurison avec le service aux autres. Ce n'est pas simplement une retraite  c'est une exprience transformationnelle profonde o la croissance se produit  travers le service manifest."}],waysToServe:{title:"Faons de Servir",items:[{icon:wg,text:"Soins de la ferme et des animaux : soins aux vaches, chvres, cochons d'Inde, lapins, poules et chevaux"},{icon:Cg,text:"Aide en cuisine : prparation des repas et nettoyage"},{icon:qp,text:"Entretien mnager : nettoyage des chambres et des salles de bain, aide  la lessive"},{icon:_g,text:"Travail  la laiterie : fabrication de beurre, de fromage blanc et de fromage"},{icon:jp,text:"Pche : aide  la pche au filet (la participation des hommes  l'aise avec ce travail est particulirement bienvenue)"},{icon:Bp,text:"Soutien communautaire : diverses tches contribuant  la prosprit et au dveloppement de notre communaut"}]},philosophy:{title:"Philosophie du Centre",text:"Nous croyons que la vritable gurison vient  la fois d'un travail intrieur profond et du service. Chaque jour  Dos Mundos est une opportunit de transformation par la pratique, la connexion avec la nature et le service sincre."},closing:{title:"Rejoignez-nous",text:"Si vous ressentez l'appel  parcourir ce chemin de gurison et de service avec nous, nous vous attendons. crivez-nous  propos de vous, de votre exprience et de la dure de sjour souhaite."}},pl:{title:"ZAPROSZENIE DLA WOLONTARIUSZY",subtitle:"Uzdrowienie i Suba w Amazonii",intro:"Centrum Dos Mundos opiera si na subie. czymy ludzi, ktrzy podaj t ciek. Zamiast zatrudnia profesjonalnych pracownikw, zapraszamy wolontariuszy, aby kady przybywajcy do Dos Mundos mg wyrazi swoj szczero, poczu si uytecznym i potrzebnym, a take okaza swoj mio we wsplnocie.\n\nJeli czujesz powoanie do rozwoju duchowego, zapraszamy Ci do doczenia do naszej spoecznoci pooonej w Peru, w sercu amazoskiej dungli. To szansa dla tych, ktrzy s gotowi na gbok wewntrzn transformacj i pragn przej drog uzdrowienia poprzez sub, a take prac z tradycyjnymi rolinami pod przewodnictwem uzdrowiciela Pepe.",sections:[{title:"Co Oferujemy",text:"Bezpieczn przestrze do uzdrowienia z Ayahuasc i innymi tradycyjnymi rolinami. Organiczne jedzenie z produktw z naszej wasnej farmy. Zdrowe rodowisko i zakwaterowanie, ktre pozwol Ci odczy si od zgieku wspczesnego wiata, poczy si ze sob i przywrci wi z natur."},{title:"Kogo Szukamy",text:"Szukamy wolontariuszy, ktrzy chc poczy wasn drog uzdrowienia ze sub innym. To nie jest zwyky warsztat  to gbokie dowiadczenie transformacyjne, gdzie wzrost nastpuje poprzez jawn sub."}],waysToServe:{title:"Sposoby Suenia",items:[{icon:wg,text:"Opieka nad farm i zwierztami: dbanie o krowy, kozy, winki morskie, krliki, kury i konie"},{icon:Cg,text:"Pomoc w kuchni: przygotowywanie posikw i sprztanie"},{icon:qp,text:"Dbanie o dom: sprztanie pokoi i azienek, pomoc w praniu"},{icon:_g,text:"Praca w serowarni: wyrb masa, twarogu i sera"},{icon:jp,text:"Rybowstwo: pomoc w owieniu ryb sieciami (szczeglnie mile widziany udzia mczyzn czujcych si komfortowo w tej pracy)"},{icon:Bp,text:"Wsparcie spoecznoci: rne zadania przyczyniajce si do dobrobytu i rozwoju naszej spoecznoci"}]},philosophy:{title:"Filozofia Centrum",text:"Wierzymy, e prawdziwe uzdrowienie przychodzi zarwno poprzez gbok prac wewntrzn, jak i poprzez sub. Kady dzie w Dos Mundos to okazja do transformacji poprzez praktyk, kontakt z natur i serdeczn sub."},closing:{title:"Docz do Nas",text:"Jeli czujesz wezwanie, by przej t drog uzdrowienia i suby razem z nami, czekamy na Ciebie. Napisz o sobie, swoim dowiadczeniu i podanym czasie pobytu."}}},Ife=()=>{const{lang:e}=nh(),t=Rfe[e&&Rfe[e]?e:"en"];return Z.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 to-slate-800 text-slate-200 pb-20",children:[Z.jsxs("div",{className:"relative py-20 px-4 overflow-hidden",children:[Z.jsx("div",{className:"absolute inset-0 bg-purple-900/20 backdrop-blur-3xl -z-10"}),Z.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-6",children:[Z.jsx(OH.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-4xl md:text-5xl font-bold text-white tracking-tight",children:t.title}),Z.jsx(OH.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-xl md:text-2xl text-purple-200 font-medium",children:t.subtitle}),Z.jsx(OH.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"h-1 w-24 bg-purple-500 mx-auto rounded-full"})]})]}),Z.jsxs("div",{className:"max-w-4xl mx-auto px-4 space-y-16",children:[Z.jsx(OH.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"text-lg leading-relaxed text-slate-300 text-center max-w-3xl mx-auto space-y-4",children:t.intro.split("\n\n").map(((e,t)=>Z.jsx("p",{children:e},t)))}),Z.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:t.sections.map(((e,t)=>Z.jsxs(OH.div,{initial:{opacity:0,x:t%2==0?-20:20},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"bg-white/5 rounded-2xl p-8 border border-white/10 hover:bg-white/10 transition-colors",children:[Z.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:e.title}),Z.jsx("p",{className:"text-slate-300 leading-relaxed",children:e.text})]},t)))}),Z.jsxs("div",{className:"space-y-8",children:[Z.jsx("h2",{className:"text-3xl font-bold text-white text-center",children:t.waysToServe.title}),Z.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:t.waysToServe.items.map(((e,t)=>Z.jsxs(OH.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1*t},className:"flex items-start gap-4 bg-slate-800/50 p-6 rounded-xl border border-white/5",children:[Z.jsx("div",{className:"p-3 bg-purple-500/20 rounded-lg shrink-0",children:Z.jsx(e.icon,{className:"w-6 h-6 text-purple-400"})}),Z.jsx("p",{className:"text-slate-300",children:e.text})]},t)))})]}),Z.jsxs(OH.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"bg-gradient-to-br from-purple-900/40 to-blue-900/40 rounded-3xl p-8 md:p-12 text-center space-y-8 border border-white/10",children:[Z.jsxs("div",{className:"space-y-4",children:[Z.jsx("h3",{className:"text-2xl font-bold text-white",children:t.philosophy.title}),Z.jsx("p",{className:"text-slate-300 leading-relaxed max-w-2xl mx-auto",children:t.philosophy.text})]}),Z.jsxs("div",{className:"pt-8 border-t border-white/10 space-y-4",children:[Z.jsx("h3",{className:"text-2xl font-bold text-white",children:t.closing.title}),Z.jsx("p",{className:"text-slate-300 leading-relaxed max-w-2xl mx-auto",children:t.closing.text})]})]})]})]})};const Ofe=new class{constructor(){this.cacheStrategies={transcript:{ttl:864e5,maxSize:50,priority:"high"},timecodes:{ttl:432e5,maxSize:100,priority:"high"},episodes:{ttl:216e5,maxSize:200,priority:"critical"},audio_metadata:{ttl:6048e5,maxSize:500,priority:"normal"}},this.priorityWeights={low:1,normal:2,high:3,critical:4},this.loadingPromises=new Map,this.backgroundQueue=[],this.isBackgroundLoading=!1,this.userInteractionData=new Set}async init(){try{await dL.init(),VO.debug("[OptimizedCache] Initialized successfully"),this.startBackgroundLoading()}catch(e){VO.error("[OptimizedCache] Initialization failed:",e)}}async smartCache(e,t,r,n="normal",i=!1){try{await dL.init();const s=this.cacheStrategies[e];if(!s)return VO.warn(`[OptimizedCache] No strategy for type: ${e}`),!1;i&&this.userInteractionData.add(`${e}:${t}`);const a=await this.smartGet(e,t,!1);if(a&&this.isDataEqual(a,r))return VO.debug(`[OptimizedCache] Skipping cache update - data unchanged for ${e}:${t}`),!0;await this.manageCacheSize(e,s);const o={...r,cache_metadata:{type:e,key:t,priority:n,cached_at:Date.now(),ttl:s.ttl,access_count:i?10:1,last_accessed:Date.now(),user_interaction:i}};switch(e){case"transcript":await dL.saveTranscript(o);break;case"timecodes":r.questions&&r.episodeSlug&&r.lang&&await dL.saveQuestions(r.questions,r.episodeSlug,r.lang);break;case"episodes":if("all"===t&&Array.isArray(r)){for(const t of r)if(t&&t.slug){const r={...t,cache_metadata:{type:e,key:t.slug,priority:n,cached_at:Date.now(),ttl:s.ttl,access_count:i?10:1,last_accessed:Date.now(),user_interaction:i}};await dL.saveEpisode(r)}}else{if(!r||!r.slug&&"all"===t)return VO.warn(`[OptimizedCache] Invalid episode data for key ${t}`),!1;await dL.saveEpisode(o)}break;default:return VO.warn(`[OptimizedCache] Unsupported cache type: ${e}`),!1}return VO.debug(`[OptimizedCache] Cached ${e}:${t} with priority ${n}`),!0}catch(s){return VO.error(`[OptimizedCache] Failed to cache ${e}:${t}:`,s),!1}}async smartGet(e,t,r=!0){const n=`${e}:${t}`;if(this.loadingPromises.has(n))return VO.debug(`[OptimizedCache] Returning existing promise for ${n}`),this.loadingPromises.get(n);const i=this._executeSmartGet(e,t,r);return this.loadingPromises.set(n,i),i.finally((()=>{this.loadingPromises.delete(n)})),i}async _executeSmartGet(e,t,r=!0){try{await dL.init();let n=null;switch(e){case"transcript":{const[e,r]=t.split(":");n=await dL.getTranscript(e,r);break}case"timecodes":{const[e,r]=t.split(":");n=await dL.getQuestions(e,r);break}case"episodes":if("all"===t){if(n=await dL.getAllEpisodes(),n&&n.length>0){const r=Date.now();this.cacheStrategies.episodes;return n.some((e=>{const t=e.cache_metadata;return!(!t||!t.ttl)&&r-t.cached_at>t.ttl}))?(VO.debug(`[OptimizedCache] Cache expired for ${e}:${t}`),null):n}return n}n=await dL.getEpisode(t);break;default:return VO.warn(`[OptimizedCache] Unsupported get type: ${e}`),null}if(!n)return null;const i=n.cache_metadata;if(i&&i.ttl){if(Date.now()-i.cached_at>i.ttl)return VO.debug(`[OptimizedCache] Cache expired for ${e}:${t}`),null}return r&&i&&(i.access_count=(i.access_count||0)+1,i.last_accessed=Date.now(),this.backgroundUpdate(e,t,n,i.priority)),VO.debug(`[OptimizedCache] Cache hit for ${e}:${t}`),n}catch(n){return VO.error(`[OptimizedCache] Failed to get ${e}:${t}:`,n),null}}async backgroundUpdate(e,t,r,n){try{const t={...r,cache_metadata:{...r.cache_metadata,access_count:r.cache_metadata.access_count,last_accessed:Date.now()}};switch(e){case"transcript":await dL.saveTranscript(t);break;case"timecodes":r.questions&&r.episodeSlug&&r.lang&&await dL.saveQuestions(r.questions,r.episodeSlug,r.lang);break;case"episodes":await dL.saveEpisode(t)}}catch(i){}}async priorityLoad(e,t,r=[]){try{VO.debug("[OptimizedCache] Starting priority load...");for(const e of r){await this.smartCache("episodes",e.slug,e,"critical",!0);const r="all"===e.lang?t:e.lang;this.addToBackgroundQueue("transcript",`${e.slug}:${r}`,"high"),this.addToBackgroundQueue("timecodes",`${e.slug}:${t}`,"high")}const n=e.filter((e=>!r.some((t=>t.slug===e.slug)))).sort(((e,t)=>new Date(t.date)-new Date(e.date))).slice(0,5);for(const e of n){await this.smartCache("episodes",e.slug,e,"high");const r="all"===e.lang?t:e.lang;this.addToBackgroundQueue("transcript",`${e.slug}:${r}`,"normal"),this.addToBackgroundQueue("timecodes",`${e.slug}:${t}`,"normal")}VO.debug(`[OptimizedCache] Priority load completed for ${r.length} visible and ${n.length} recent episodes`)}catch(n){VO.error("[OptimizedCache] Priority load failed:",n)}}addToBackgroundQueue(e,t,r="normal"){this.backgroundQueue.push({type:e,key:t,priority:r,addedAt:Date.now()}),this.backgroundQueue.sort(((e,t)=>{const r=this.priorityWeights[e.priority]||2;return(this.priorityWeights[t.priority]||2)-r})),this.backgroundQueue.length>50&&(this.backgroundQueue=this.backgroundQueue.slice(0,50))}async startBackgroundLoading(){if(this.isBackgroundLoading)return;this.isBackgroundLoading=!0;(async()=>{for(;this.backgroundQueue.length>0&&!document.hidden;){const t=this.backgroundQueue.shift();try{if(Date.now()-t.addedAt>3e5)continue;await this.smartGet(t.type,t.key,!1)||VO.debug(`[OptimizedCache] Background loading ${t.type}:${t.key}`)}catch(e){VO.debug(`[OptimizedCache] Background load failed for ${t.type}:${t.key}:`,e)}await new Promise((e=>setTimeout(e,100)))}this.isBackgroundLoading=!1,this.backgroundQueue.length>0&&setTimeout((()=>this.startBackgroundLoading()),5e3)})()}async manageCacheSize(e,t){try{const r=this.getStoreName(e),n=await dL.getTransaction([r]);if(!n)return void VO.debug(`[OptimizedCache] Could not create transaction for ${e} cache management (using fallback storage)`);const i=n.objectStore(r);return new Promise(((n,s)=>{const a=i.getAll();a.onsuccess=async()=>{const i=a.result;if(i.length<=t.maxSize)return void n();VO.debug(`[OptimizedCache] Cache size exceeded for ${e}, cleaning up...`);const s=i.filter((e=>e.cache_metadata)).sort(((t,r)=>{const n=this.getItemKey(e,t),i=this.getItemKey(e,r),s=!!n&&this.userInteractionData.has(`${e}:${n}`),a=!!i&&this.userInteractionData.has(`${e}:${i}`);if(s&&!a)return-1;if(!s&&a)return 1;const o=this.getPriorityWeight(t.cache_metadata.priority),l=this.getPriorityWeight(r.cache_metadata.priority);if(o!==l)return o-l;return(t.cache_metadata.access_count||0)/Math.max(1,Date.now()-t.cache_metadata.last_accessed)-(r.cache_metadata.access_count||0)/Math.max(1,Date.now()-r.cache_metadata.last_accessed)})),o=Math.floor(.8*t.maxSize),l=s.slice(0,i.length-o);if(l.length>0){const t=await dL.getTransaction([r],"readwrite");if(!t)return VO.debug(`[OptimizedCache] Could not create delete transaction for ${e}`),void n();const i=t.objectStore(r);for(const r of l){const t=this.getItemKey(e,r);if(t)try{i.delete(t),this.userInteractionData.delete(`${e}:${t}`)}catch(c){VO.warn(`[OptimizedCache] Failed to delete item ${t}:`,c)}}VO.debug(`[OptimizedCache] Removed ${l.length} items from ${e} cache`)}n()},a.onerror=()=>s(a.error)}))}catch(r){VO.debug(`[OptimizedCache] Cache size management skipped for ${e}:`,r.message)}}isDataEqual(e,t){try{const r=JSON.stringify(this.cleanForComparison(e));return r===JSON.stringify(this.cleanForComparison(t))}catch{return!1}}cleanForComparison(e){const t={...e};return delete t.cache_metadata,t}getStoreName(e){return{transcript:"transcripts",timecodes:"timecodes",episodes:"episodes",audio_metadata:"audioFiles"}[e]||e}getItemKey(e,t){switch(e){case"transcript":case"timecodes":return t.id;case"episodes":return t.slug;case"audio_metadata":return t.url;default:return t.id||t.key}}getPriorityWeight(e){return this.priorityWeights[e]||2}async getCacheStats(){try{await dL.init();const t={};for(const[r,n]of Object.entries(this.cacheStrategies)){const i=this.getStoreName(r),s=await dL.getTransaction([i]);if(!s){VO.debug(`[OptimizedCache] Could not create transaction for ${r} stats (using fallback storage)`),t[r]={itemCount:0,maxItems:n.maxSize,expiredCount:0,totalAccessCount:0,userInteractionCount:0,estimatedSize:0,utilizationPercent:0};continue}const a=s.objectStore(i);try{const e=await new Promise(((e,t)=>{const r=a.getAll();r.onsuccess=()=>{const t=r.result,i=Date.now();let s=0,a=0,o=0,l=0;t.forEach((e=>{s+=this.estimateItemSize(e);const t=e.cache_metadata;t&&(o+=t.access_count||0,t.user_interaction&&l++,t.ttl&&i-t.cached_at>t.ttl&&a++)})),e({itemCount:t.length,maxItems:n.maxSize,expiredCount:a,totalAccessCount:o,userInteractionCount:l,estimatedSize:s,utilizationPercent:Math.round(t.length/n.maxSize*100)})},r.onerror=()=>t(r.error)}));t[r]=e}catch(e){VO.debug(`[OptimizedCache] Error getting stats for ${r}:`,e.message),t[r]={itemCount:0,maxItems:n.maxSize,expiredCount:0,totalAccessCount:0,userInteractionCount:0,estimatedSize:0,utilizationPercent:0}}}return t}catch(e){return VO.error("[OptimizedCache] Failed to get cache stats:",e),{}}}estimateItemSize(e){try{return JSON.stringify(e).length}catch{return 1e3}}async cleanExpiredCache(){try{VO.debug("[OptimizedCache] Starting cleanup of expired cache...");for(const[t,r]of Object.entries(this.cacheStrategies)){const r=this.getStoreName(t),n=await dL.getTransaction([r],"readwrite");if(!n){VO.debug(`[OptimizedCache] Could not create transaction for ${t} cleanup (using fallback storage)`);continue}const i=n.objectStore(r);try{await new Promise(((e,r)=>{const n=i.getAll();n.onsuccess=()=>{const r=n.result;let s=0;r.forEach((e=>{const r=e.cache_metadata;if(r&&r.ttl){if(Date.now()-r.cached_at>r.ttl){const r=this.getItemKey(t,e);r&&(i.delete(r),this.userInteractionData.delete(`${t}:${r}`),s++)}}})),s>0&&VO.debug(`[OptimizedCache] Cleaned ${s} expired items from ${t} cache`),e()},n.onerror=()=>r(n.error)}))}catch(e){VO.debug(`[OptimizedCache] Cleanup error for ${t}:`,e.message)}}VO.debug("[OptimizedCache] Cleanup completed")}catch(e){VO.debug("[OptimizedCache] Cleanup skipped:",e.message)}}};const Nfe=new class{constructor(){this.isInitialized=!1}async init(){if(this.isInitialized)VO.debug("[CacheIntegration] Cache system already initialized");else try{await Ofe.init(),this.isInitialized=!0,VO.debug("[CacheIntegration] Cache system initialized"),this.startPeriodicCleanup()}catch(e){VO.error("[CacheIntegration] Initialization failed:",e),this.isInitialized=!1}}startPeriodicCleanup(){setInterval((async()=>{try{await Ofe.cleanExpiredCache(),VO.debug("[CacheIntegration] Periodic cleanup completed")}catch(e){VO.error("[CacheIntegration] Periodic cleanup failed:",e)}}),18e5)}async getStats(){try{return await Ofe.getCacheStats()}catch(e){return VO.error("[CacheIntegration] Failed to get cache stats:",e),{}}}async clearAll(){try{Ofe.userInteractionData.clear(),Ofe.backgroundQueue=[],Ofe.loadingPromises.clear(),VO.debug("[CacheIntegration] Cache cleared")}catch(e){VO.error("[CacheIntegration] Failed to clear cache:",e)}}async loadEpisodesPageData(e){try{const t=await Ofe.smartGet("episodes","all");return t&&t.length>0?(VO.debug("[CacheIntegration] Using cached episodes data"),{episodes:t.filter((t=>t.lang===e||"all"===t.lang)),fromCache:!0}):null}catch(t){return VO.error("[CacheIntegration] Failed to load episodes data:",t),null}}async saveEpisodesPageData(e,t){try{for(const t of e)await Ofe.smartCache("episodes",t.slug,t,"critical");if(await Ofe.smartCache("episodes","all",e,"critical"),t){const e={};t.forEach((t=>{e[t.episode_slug]||(e[t.episode_slug]={}),e[t.episode_slug][t.lang]||(e[t.episode_slug][t.lang]=[]),e[t.episode_slug][t.lang].push(t)}));for(const[t,r]of Object.entries(e))for(const[e,n]of Object.entries(r))await Ofe.smartCache("timecodes",`${t}:${e}`,{questions:n,episodeSlug:t,lang:e},"high")}VO.debug("[CacheIntegration] Episodes page data saved to cache")}catch(r){VO.error("[CacheIntegration] Failed to save episodes data:",r)}}async loadPlayerPageData(e,t){var r,n;try{const i={};i.episode=await Ofe.smartGet("episodes",e),i.questions=await Ofe.smartGet("timecodes",`${e}:${t}`);const s="all"===(null==(r=i.episode)?void 0:r.lang)?t:null==(n=i.episode)?void 0:n.lang;return i.transcript=await Ofe.smartGet("transcript",`${e}:${s}`),i.episode&&await Ofe.smartCache("episodes",e,i.episode,"critical",!0),VO.debug("[CacheIntegration] Player page data loaded from cache"),i}catch(i){return VO.error("[CacheIntegration] Failed to load player data:",i),{}}}async savePlayerPageData(e,t,r,n){try{if(e&&await Ofe.smartCache("episodes",e.slug,e,"critical",!0),t){"all"===(null==e?void 0:e.lang)||(null==e||e.lang);await Ofe.smartCache("timecodes",`${e.slug}:${n}`,{questions:t,episodeSlug:e.slug,lang:n},"high",!0)}if(r){const t="all"===(null==e?void 0:e.lang)?n:null==e?void 0:e.lang;await Ofe.smartCache("transcript",`${e.slug}:${t}`,r,"high",!0)}VO.debug("[CacheIntegration] Player page data saved to cache")}catch(i){VO.error("[CacheIntegration] Failed to save player data:",i)}}async preloadDataForUX(e,t){try{const r=e.slice(0,3);for(const e of r){const r="all"===e.lang?t:e.lang;Ofe.addToBackgroundQueue("transcript",`${e.slug}:${r}`,"low"),Ofe.addToBackgroundQueue("timecodes",`${e.slug}:${t}`,"low")}VO.debug(`[CacheIntegration] Preloaded data for ${r.length} episodes`)}catch(r){VO.error("[CacheIntegration] Preload failed:",r)}}},jfe=({currentLanguage:e})=>{const{editor:t,isAuthenticated:r,logout:n}=pS(),[i,s]=q.useState(!1),[a,o]=q.useState([]),[l,c]=q.useState([]),[u,d]=q.useState([]),[h,f]=q.useState(null),[p,g]=q.useState(!0),[m,y]=q.useState(new Set),{toast:v}=Fm(),[b,w]=q.useState("all"),[x,S]=q.useState("all"),[E,T]=q.useState("all"),[k,A]=q.useState(!0),[_,C]=q.useState("");q.useEffect((()=>{r&&P()}),[r]),q.useEffect((()=>{D()}),[a,b,x,E,k,_]);const P=async()=>{g(!0);try{const[e,t,r]=await Promise.all([mS({showRolledBack:k},200,0),bS(),vS()]);e.success&&o(e.data),t.success&&d(t.data),r.success&&f(r.stats)}catch(t){v({title:iy("errorLoadingHistory",e),description:t.message,variant:"destructive"})}finally{g(!1)}},D=()=>{let e=[...a];if("all"!==b&&(e=e.filter((e=>e.editor_email===b))),"all"!==x&&(e=e.filter((e=>e.edit_type===x))),"all"!==E&&(e=e.filter((e=>e.target_type===E))),k||(e=e.filter((e=>!e.is_rolled_back))),_){const t=_.toLowerCase();e=e.filter((e=>{var r,n,i,s;return(null==(r=e.content_before)?void 0:r.toLowerCase().includes(t))||(null==(n=e.content_after)?void 0:n.toLowerCase().includes(t))||(null==(i=e.editor_name)?void 0:i.toLowerCase().includes(t))||(null==(s=e.target_id)?void 0:s.toLowerCase().includes(t))}))}c(e)};return r?Z.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6",children:Z.jsxs("div",{className:"max-w-7xl mx-auto",children:[Z.jsxs("div",{className:"mb-6 flex justify-between items-start",children:[Z.jsxs("div",{children:[Z.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3 mb-2",children:[Z.jsx(zp,{size:32,className:"text-purple-400"}),iy("editHistoryAdmin",e)]}),Z.jsxs("p",{className:"text-slate-300",children:[iy("loggedInAs",e),": ",Z.jsx("span",{className:"text-purple-400 font-semibold",children:t.name})," (",t.email,")"]})]}),Z.jsxs("div",{className:"flex gap-2",children:[Z.jsxs(AT,{onClick:P,variant:"outline",className:"bg-slate-700 border-slate-600 hover:bg-slate-600",children:[Z.jsx(dg,{size:16,className:"mr-2"}),"Refresh"]}),Z.jsxs(AT,{onClick:n,variant:"outline",className:"bg-slate-700 border-slate-600 hover:bg-slate-600",children:[Z.jsx(Wp,{size:16,className:"mr-2"}),"Logout"]})]})]}),h&&Z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[Z.jsx(OT,{className:"bg-slate-800 border-slate-700",children:Z.jsxs(NT,{className:"pb-2",children:[Z.jsx(LT,{className:"text-slate-400",children:"Total Edits"}),Z.jsx(jT,{className:"text-2xl text-white",children:h.total})]})}),Z.jsx(OT,{className:"bg-slate-800 border-slate-700",children:Z.jsxs(NT,{className:"pb-2",children:[Z.jsx(LT,{className:"text-slate-400",children:"Active"}),Z.jsx(jT,{className:"text-2xl text-green-400",children:h.active})]})}),Z.jsx(OT,{className:"bg-slate-800 border-slate-700",children:Z.jsxs(NT,{className:"pb-2",children:[Z.jsx(LT,{className:"text-slate-400",children:iy("rolledBack",e)}),Z.jsx(jT,{className:"text-2xl text-amber-400",children:h.rolledBack})]})}),Z.jsx(OT,{className:"bg-slate-800 border-slate-700",children:Z.jsxs(NT,{className:"pb-2",children:[Z.jsx(LT,{className:"text-slate-400",children:"Last 24h"}),Z.jsx(jT,{className:"text-2xl text-purple-400",children:h.recent24h})]})})]}),Z.jsxs(OT,{className:"bg-slate-800 border-slate-700 mb-6",children:[Z.jsx(NT,{children:Z.jsxs(jT,{className:"text-white flex items-center gap-2",children:[Z.jsx(Np,{size:20}),"Filters"]})}),Z.jsxs(MT,{className:"space-y-4",children:[Z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Z.jsxs("div",{children:[Z.jsx("label",{className:"text-sm text-slate-300 mb-1 block",children:"Editor"}),Z.jsxs(hI,{value:b,onValueChange:w,children:[Z.jsx(pI,{className:"bg-slate-700 border-slate-600 text-white",children:Z.jsx(fI,{})}),Z.jsxs(yI,{className:"bg-slate-700 border-slate-600",children:[Z.jsx(vI,{value:"all",children:"All Editors"}),u.map((e=>Z.jsxs(vI,{value:e.email,children:[e.name," (",e.email,")"]},e.id)))]})]})]}),Z.jsxs("div",{children:[Z.jsx("label",{className:"text-sm text-slate-300 mb-1 block",children:"Edit Type"}),Z.jsxs(hI,{value:x,onValueChange:S,children:[Z.jsx(pI,{className:"bg-slate-700 border-slate-600 text-white",children:Z.jsx(fI,{})}),Z.jsxs(yI,{className:"bg-slate-700 border-slate-600",children:[Z.jsx(vI,{value:"all",children:"All Types"}),(()=>{const e=new Set(a.map((e=>e.edit_type)).filter(Boolean));return Array.from(e)})().map((e=>Z.jsx(vI,{value:e,children:e},e)))]})]})]}),Z.jsxs("div",{children:[Z.jsx("label",{className:"text-sm text-slate-300 mb-1 block",children:"Target Type"}),Z.jsxs(hI,{value:E,onValueChange:T,children:[Z.jsx(pI,{className:"bg-slate-700 border-slate-600 text-white",children:Z.jsx(fI,{})}),Z.jsxs(yI,{className:"bg-slate-700 border-slate-600",children:[Z.jsx(vI,{value:"all",children:"All Targets"}),(()=>{const e=new Set(a.map((e=>e.target_type)).filter(Boolean));return Array.from(e)})().map((e=>Z.jsx(vI,{value:e,children:e},e)))]})]})]}),Z.jsxs("div",{children:[Z.jsx("label",{className:"text-sm text-slate-300 mb-1 block",children:"Search"}),Z.jsx(_T,{value:_,onChange:e=>C(e.target.value),placeholder:"Search content...",className:"bg-slate-700 border-slate-600 text-white"})]})]}),Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx("input",{type:"checkbox",id:"showRolledBack",checked:k,onChange:e=>A(e.target.checked),className:"w-4 h-4"}),Z.jsx("label",{htmlFor:"showRolledBack",className:"text-sm text-slate-300",children:iy("showRolledBackEdits",e)})]})]})]}),Z.jsxs(OT,{className:"bg-slate-800 border-slate-700",children:[Z.jsx(NT,{children:Z.jsx(jT,{className:"text-white",children:iy("editHistoryCount",e,{count:l.length})})}),Z.jsx(MT,{children:p?Z.jsx("div",{className:"text-center py-8 text-slate-400",children:"Loading..."}):0===l.length?Z.jsx("div",{className:"text-center py-8 text-slate-400",children:"No edits found"}):Z.jsx("div",{className:"space-y-3",children:l.map((r=>Z.jsx(OT,{className:"bg-slate-700 border-slate-600 "+(r.is_rolled_back?"opacity-60":""),children:Z.jsxs(MT,{className:"p-4",children:[Z.jsxs("div",{className:"flex justify-between items-start mb-3",children:[Z.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[Z.jsx(Rp,{size:20,className:"text-purple-400 mt-1"}),Z.jsxs("div",{className:"flex-1",children:[Z.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[Z.jsx(FT,{variant:"outline",className:"bg-purple-900/30 text-purple-300 border-purple-500/30",children:r.edit_type}),Z.jsx(FT,{variant:"outline",className:"bg-blue-900/30 text-blue-300 border-blue-500/30",children:r.target_type}),r.is_rolled_back&&Z.jsx(FT,{variant:"outline",className:"bg-amber-900/30 text-amber-300 border-amber-500/30",children:iy("rolledBack",e)})]}),Z.jsxs("p",{className:"text-sm text-slate-300",children:[Z.jsx(Ag,{size:14,className:"inline mr-1"}),r.editor_name," (",r.editor_email,")"]}),Z.jsxs("p",{className:"text-xs text-slate-400",children:[Z.jsx(Ep,{size:12,className:"inline mr-1"}),sk(new Date(r.created_at),{addSuffix:!0})]}),r.target_id&&Z.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Target: ",r.target_id]})]})]}),Z.jsxs("div",{className:"flex gap-2",children:[Z.jsx(AT,{size:"sm",variant:"ghost",onClick:()=>{return e=r.id,void y((t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r}));var e},className:"text-slate-300 hover:text-white",children:m.has(r.id)?Z.jsx(xp,{size:16}):Z.jsx(vp,{size:16})}),!r.is_rolled_back&&Z.jsxs(AT,{size:"sm",variant:"destructive",onClick:()=>(async e=>{if(!t)return;if(window.confirm("Are you sure you want to rollback this edit?"))try{const r=await yS(e.id,t.email,null);if(!r.success)throw new Error(r.error);const n=await wS(r.data);n.success?v({title:"Edit rolled back successfully",description:"The previous content has been restored"}):v({title:"Rollback recorded but not applied",description:n.error,variant:"destructive"}),await P()}catch(r){v({title:"Rollback failed",description:r.message,variant:"destructive"})}})(r),className:"bg-red-600 hover:bg-red-700",children:[Z.jsx(kg,{size:14,className:"mr-1"}),"Rollback"]})]})]}),m.has(r.id)&&Z.jsxs("div",{className:"mt-4 space-y-3 border-t border-slate-600 pt-3",children:[Z.jsxs("div",{children:[Z.jsxs("p",{className:"text-xs text-slate-400 mb-1 flex items-center gap-1",children:[Z.jsx(Og,{size:12}),"Before:"]}),Z.jsx("div",{className:"bg-slate-800 p-3 rounded text-sm text-slate-200 font-mono whitespace-pre-wrap",children:r.content_before||"(empty)"})]}),Z.jsxs("div",{children:[Z.jsxs("p",{className:"text-xs text-slate-400 mb-1 flex items-center gap-1",children:[Z.jsx(gp,{size:12}),"After:"]}),Z.jsx("div",{className:"bg-slate-800 p-3 rounded text-sm text-green-300 font-mono whitespace-pre-wrap",children:r.content_after||"(empty)"})]}),r.is_rolled_back&&Z.jsxs("div",{className:"bg-amber-900/20 p-3 rounded",children:[Z.jsxs("p",{className:"text-xs text-amber-300 mb-1",children:["Rolled back by: ",r.rolled_back_by_name||"Unknown"]}),Z.jsx("p",{className:"text-xs text-amber-400",children:sk(new Date(r.rolled_back_at),{addSuffix:!0})}),r.rollback_reason&&Z.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Reason: ",r.rollback_reason]})]}),r.metadata&&Object.keys(r.metadata).length>0&&Z.jsxs("div",{children:[Z.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Metadata:"}),Z.jsx("div",{className:"bg-slate-800 p-2 rounded text-xs text-slate-300 font-mono",children:JSON.stringify(r.metadata,null,2)})]})]})]})},r.id)))})})]})]})}):Z.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6 flex items-center justify-center",children:[Z.jsxs(OT,{className:"max-w-md w-full bg-slate-800 border-slate-700",children:[Z.jsxs(NT,{children:[Z.jsxs(jT,{className:"text-white flex items-center gap-2",children:[Z.jsx(zp,{size:24,className:"text-purple-400"}),iy("editHistoryAdminTitle",e)]}),Z.jsx(LT,{className:"text-slate-300",children:iy("authenticateToAccessEditHistory",e)})]}),Z.jsx(MT,{children:Z.jsxs(AT,{onClick:()=>s(!0),className:"w-full bg-purple-600 hover:bg-purple-700",children:[Z.jsx(Gp,{size:16,className:"mr-2"}),iy("authenticate",e)]})})]}),Z.jsx(IT,{isOpen:i,onClose:()=>s(!1),currentLanguage:e})]})},Lfe=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},Mfe=Number.isSafeInteger||function(e){return"number"==typeof e&&Math.abs(e)<=Ffe},Ffe=Number.MAX_SAFE_INTEGER||9007199254740991;let Ufe=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),Bfe=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",e.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",e.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.ASSET_LIST_LOAD_ERROR="assetListLoadError",e.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",e.ASSET_LIST_PARSING_ERROR="assetListParsingError",e.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.ATTACH_MEDIA_ERROR="attachMediaError",e.UNKNOWN="unknown",e}({}),$fe=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.MEDIA_ENDED="hlsMediaEnded",e.STALL_RESOLVED="hlsStallResolved",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFERED_TO_END="hlsBufferedToEnd",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e.ASSET_LIST_LOADING="hlsAssetListLoading",e.ASSET_LIST_LOADED="hlsAssetListLoaded",e.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",e.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",e.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",e.INTERSTITIAL_STARTED="hlsInterstitialStarted",e.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",e.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",e.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",e.INTERSTITIAL_ENDED="hlsInterstitialEnded",e.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",e.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",e.EVENT_CUE_ENTER="hlsEventCueEnter",e}({});var zfe="manifest",qfe="level",Vfe="audioTrack",Kfe="subtitleTrack",Hfe="main",Gfe="audio",Wfe="subtitle";class Qfe{constructor(e,t=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=r}sample(e,t){const r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class Yfe{constructor(e,t,r,n=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Qfe(e),this.fast_=new Qfe(t),this.defaultTTFB_=n,this.ttfb_=new Qfe(e)}update(e,t){const{slow_:r,fast_:n,ttfb_:i}=this;r.halfLife!==e&&(this.slow_=new Qfe(e,r.getEstimate(),r.getTotalWeight())),n.halfLife!==t&&(this.fast_=new Qfe(t,n.getEstimate(),n.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new Qfe(e,i.getEstimate(),i.getTotalWeight()))}sample(e,t){const r=(e=Math.max(e,this.minDelayMs_))/1e3,n=8*t/r;this.fast_.sample(r,n),this.slow_.sample(r,n)}sampleTTFB(e){const t=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(r,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function Xfe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jfe(){return Jfe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jfe.apply(null,arguments)}function Zfe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function epe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zfe(Object(r),!0).forEach((function(t){Xfe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zfe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class tpe{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const r=`[${e}]:`;this.trace=rpe,this.debug=t.debug.bind(null,r),this.log=t.log.bind(null,r),this.warn=t.warn.bind(null,r),this.info=t.info.bind(null,r),this.error=t.error.bind(null,r)}}const rpe=function(){},npe={trace:rpe,debug:rpe,log:rpe,warn:rpe,info:rpe,error:rpe};function ipe(){return Jfe({},npe)}function spe(e,t,r){return t[e]?t[e].bind(t):function(e,t){const r=self.console[e];return r?r.bind(self.console,`${t?"["+t+"] ":""}[${e}] >`):rpe}(e,r)}const ape=ipe();const ope=ape;function lpe(e=!0){if("undefined"==typeof self)return;return(e||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function cpe(e,t){const r=Object.keys(e),n=Object.keys(t),i=r.length,s=n.length;return!i||!s||i===s&&!r.some((e=>-1===n.indexOf(e)))}function upe(e,t=!1){if("undefined"!=typeof TextDecoder){const r=new TextDecoder("utf-8").decode(e);if(t){const e=r.indexOf("\0");return-1!==e?r.substring(0,e):r}return r.replace(/\0/g,"")}const r=e.length;let n,i,s,a="",o=0;for(;o<r;){if(n=e[o++],0===n&&t)return a;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(n);break;case 12:case 13:i=e[o++],a+=String.fromCharCode((31&n)<<6|63&i);break;case 14:i=e[o++],s=e[o++],a+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&s)}}return a}function dpe(e){let t="";for(let r=0;r<e.length;r++){let n=e[r].toString(16);n.length<2&&(n="0"+n),t+=n}return t}function hpe(e){return Uint8Array.from(e.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function fpe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ppe,gpe={exports:{}};var mpe,ype,vpe,bpe,wpe,xpe=ppe?gpe.exports:(ppe=1,mpe=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,ype=/^(?=([^\/?#]*))\1([^]*)$/,vpe=/(?:\/|^)\.(?=\/)/g,bpe=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,gpe.exports=wpe={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var n=wpe.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=wpe.normalizePath(n.path),wpe.buildURLFromParts(n)}var i=wpe.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=wpe.normalizePath(i.path),wpe.buildURLFromParts(i)):t;var s=wpe.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var a=ype.exec(s.path);s.netLoc=a[1],s.path=a[2]}s.netLoc&&!s.path&&(s.path="/");var o={scheme:s.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(o.netLoc=s.netLoc,"/"!==i.path[0]))if(i.path){var l=s.path,c=l.substring(0,l.lastIndexOf("/")+1)+i.path;o.path=wpe.normalizePath(c)}else o.path=s.path,i.params||(o.params=s.params,i.query||(o.query=s.query));return null===o.path&&(o.path=r.alwaysNormalize?wpe.normalizePath(i.path):i.path),wpe.buildURLFromParts(o)},parseURL:function(e){var t=mpe.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(vpe,"");e.length!==(e=e.replace(bpe,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}});class Spe{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Epe="audio",Tpe="video",kpe="audiovideo";class Ape{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,"string"==typeof e&&(e={url:e}),this.base=e,function(e,t){const r=Dpe(e,t);r&&(r.enumerable=!0,Object.defineProperty(e,t,r))}(this,"stats")}setByteRange(e,t){const r=e.split("@",2);let n;n=1===r.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(r[1]),this._byteRange=[n,parseInt(r[0])+n]}get baseurl(){return this.base.url}get byteRange(){return null===this._byteRange?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return null===this._streams&&(this._streams={[Epe]:null,[Tpe]:null,[kpe]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return null!==this._stats}get hasStreams(){return null!==this._streams}get stats(){return null===this._stats&&(this._stats=new Spe),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=xpe.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Epe]=null,e[Tpe]=null,e[kpe]=null}}function _pe(e){return"initSegment"!==e.sn}class Cpe extends Ape{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(Lfe(e)&&Lfe(t))return t-e}return null}get bitrate(){return this.byteLength?8*this.byteLength/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:t}=this;if(!t||t.NONE)return null;if(t.identity)this._decryptdata||(this._decryptdata=t.identity.getDecryptData(this.sn));else if(null==(e=this._decryptdata)||!e.keyId){const e=Object.keys(t);if(1===e.length){const r=this._decryptdata=t[e[0]]||null;r&&(this._decryptdata=r.getDecryptData(this.sn,t))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;const e=Lfe(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){var t;const e=Object.keys(this.levelkeys),r=e.length;if(r>1||1===r&&null!=(t=this.levelkeys[e[0]])&&t.encrypted)return!0}return!1}get programDateTime(){return null===this._programDateTime&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){Lfe(e)?this._programDateTime=e:this._programDateTime=this.rawProgramDateTime=null}get ref(){return _pe(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const t=this.levelkeys;if(t){var r;const n=t[e];!n||null!=(r=this._decryptdata)&&r.keyId||(this._decryptdata=n.getDecryptData(this.sn,t))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,r,n,i,s=!1){const{elementaryStreams:a}=this,o=a[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,r),o.startDTS=Math.min(o.startDTS,n),o.endDTS=Math.max(o.endDTS,i)):a[e]={startPTS:t,endPTS:r,startDTS:n,endDTS:i,partial:s}}}class Ppe extends Ape{constructor(e,t,r,n,i){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=n;const s=e.enumeratedString("BYTERANGE");s&&this.setByteRange(s,i),i&&(this.fragOffset=i.fragOffset+i.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function Dpe(e,t){const r=Object.getPrototypeOf(e);if(r){const e=Object.getOwnPropertyDescriptor(r,t);return e||Dpe(r,t)}}const Rpe=Math.pow(2,32)-1,Ipe=[].push,Ope={video:1,audio:2,id3:3,text:4};function Npe(e){return String.fromCharCode.apply(null,e)}function jpe(e,t){const r=e[t]<<8|e[t+1];return r<0?65536+r:r}function Lpe(e,t){const r=Fpe(e,t);return r<0?4294967296+r:r}function Mpe(e,t){let r=Lpe(e,t);return r*=Math.pow(2,32),r+=Lpe(e,t+4),r}function Fpe(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function Upe(e,t){const r=[];if(!t.length)return r;const n=e.byteLength;for(let i=0;i<n;){const s=Lpe(e,i),a=s>1?i+s:n;if(Npe(e.subarray(i+4,i+8))===t[0])if(1===t.length)r.push(e.subarray(i+8,a));else{const n=Upe(e.subarray(i+8,a),t.slice(1));n.length&&Ipe.apply(r,n)}i=a}return r}function Bpe(e){const t=[],r=e[0];let n=8;const i=Lpe(e,n);n+=4;let s=0,a=0;0===r?(s=Lpe(e,n),a=Lpe(e,n+4),n+=8):(s=Mpe(e,n),a=Mpe(e,n+8),n+=16),n+=2;let o=e.length+a;const l=jpe(e,n);n+=2;for(let c=0;c<l;c++){let r=n;const s=Lpe(e,r);r+=4;const a=2147483647&s;if(1===(2147483648&s)>>>31)return ope.warn("SIDX has hierarchical references (not supported)"),null;const l=Lpe(e,r);r+=4,t.push({referenceSize:a,subsegmentDuration:l,info:{duration:l/i,start:o,end:o+a-1}}),o+=a,r+=4,n=r}return{earliestPresentationTime:s,timescale:i,version:r,referencesCount:l,references:t}}function $pe(e){const t=[],r=Upe(e,["moov","trak"]);for(let n=0;n<r.length;n++){const e=r[n],i=Upe(e,["tkhd"])[0];if(i){let r=i[0];const n=Lpe(i,0===r?12:20),s=Upe(e,["mdia","mdhd"])[0];if(s){r=s[0];const i=Lpe(s,0===r?12:20),a=Upe(e,["mdia","hdlr"])[0];if(a){const r=Npe(a.subarray(8,12)),s={soun:Epe,vide:Tpe}[r],o=zpe(Upe(e,["mdia","minf","stbl","stsd"])[0]);s?(t[n]={timescale:i,type:s,stsd:o},t[s]=epe({timescale:i,id:n},o)):t[n]={timescale:i,type:r,stsd:o}}}}}return Upe(e,["moov","mvex","trex"]).forEach((e=>{const r=Lpe(e,4),n=t[r];n&&(n.default={duration:Lpe(e,12),flags:Lpe(e,20)})})),t}function zpe(e){const t=e.subarray(8),r=t.subarray(86),n=Npe(t.subarray(4,8));let i,s=n;const a="enca"===n||"encv"===n;if(a){const e=Upe(t,[n])[0];Upe(e.subarray("enca"===n?28:78),["sinf"]).forEach((e=>{const t=Upe(e,["schm"])[0];if(t){const r=Npe(t.subarray(4,8));if("cbcs"===r||"cenc"===r){const t=Upe(e,["frma"])[0];t&&(s=Npe(t))}}}))}const o=s;switch(s){case"avc1":case"avc2":case"avc3":case"avc4":{const e=Upe(r,["avcC"])[0];e&&e.length>3&&(s+="."+Kpe(e[1])+Kpe(e[2])+Kpe(e[3]),i=qpe("avc1"===o?"dva1":"dvav",r));break}case"mp4a":{const e=Upe(t,[n])[0],r=Upe(e.subarray(28),["esds"])[0];if(r&&r.length>7){let e=4;if(3!==r[e++])break;e=Vpe(r,e),e+=2;const t=r[e++];if(128&t&&(e+=2),64&t&&(e+=r[e++]),4!==r[e++])break;e=Vpe(r,e);const n=r[e++];if(64!==n)break;if(s+="."+Kpe(n),e+=12,5!==r[e++])break;e=Vpe(r,e);const i=r[e++];let a=(248&i)>>3;31===a&&(a+=1+((7&i)<<3)+((224&r[e])>>5)),s+="."+a}break}case"hvc1":case"hev1":{const e=Upe(r,["hvcC"])[0];if(e&&e.length>12){const t=e[1],r=["","A","B","C"][t>>6],n=31&t,i=Lpe(e,2),a=(32&t)>>5?"H":"L",o=e[12],l=e.subarray(6,12);s+="."+r+n,s+="."+function(e){let t=0;for(let r=0;r<32;r++)t|=(e>>r&1)<<31-r;return t>>>0}(i).toString(16).toUpperCase(),s+="."+a+o;let c="";for(let e=l.length;e--;){const t=l[e];if(t||c){c="."+t.toString(16).toUpperCase()+c}}s+=c}i=qpe("hev1"==o?"dvhe":"dvh1",r);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":s=qpe(s,r)||s;break;case"vp09":{const e=Upe(r,["vpcC"])[0];if(e&&e.length>6){const t=e[4],r=e[5],n=e[6]>>4&15;s+="."+Hpe(t)+"."+Hpe(r)+"."+Hpe(n)}break}case"av01":{const e=Upe(r,["av1C"])[0];if(e&&e.length>2){const t=e[1]>>>5,n=31&e[1],a=e[2]>>>7?"H":"M",o=(64&e[2])>>6,l=(32&e[2])>>5,c=2===t&&o?l?12:10:o?10:8,u=(16&e[2])>>4,d=(8&e[2])>>3,h=(4&e[2])>>2,f=3&e[2],p=1,g=1,m=1,y=0;s+="."+t+"."+Hpe(n)+a+"."+Hpe(c)+"."+u+"."+d+h+f+"."+Hpe(p)+"."+Hpe(g)+"."+Hpe(m)+"."+y,i=qpe("dav1",r)}break}}return{codec:s,encrypted:a,supplemental:i}}function qpe(e,t){const r=Upe(t,["dvvC"]),n=r.length?r[0]:Upe(t,["dvcC"])[0];if(n){const t=n[2]>>1&127,r=n[2]<<5&32|n[3]>>3&31;return e+"."+Hpe(t)+"."+Hpe(r)}}function Vpe(e,t){const r=t+5;for(;128&e[t++]&&t<r;);return t}function Kpe(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function Hpe(e){return(e<10?"0":"")+e}function Gpe(e,t){Upe(e,["moov","trak"]).forEach((e=>{const r=Upe(e,["mdia","minf","stbl","stsd"])[0];if(!r)return;const n=r.subarray(8);let i=Upe(n,["enca"]);const s=i.length>0;s||(i=Upe(n,["encv"])),i.forEach((e=>{Upe(s?e.subarray(28):e.subarray(78),["sinf"]).forEach((e=>{const r=Wpe(e);r&&t(r,s)}))}))}))}function Wpe(e){const t=Upe(e,["schm"])[0];if(t){const r=Npe(t.subarray(4,8));if("cbcs"===r||"cenc"===r){const t=Upe(e,["schi","tenc"])[0];if(t)return t}}}function Qpe(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function Ype(e,t){const r=[],n=t.samples,i=t.timescale,s=t.id;let a=!1;return Upe(n,["moof"]).map((o=>{const l=o.byteOffset-8;Upe(o,["traf"]).map((o=>{const c=Upe(o,["tfdt"]).map((e=>{const t=e[0];let r=Lpe(e,4);return 1===t&&(r*=Math.pow(2,32),r+=Lpe(e,8)),r/i}))[0];return void 0!==c&&(e=c),Upe(o,["tfhd"]).map((c=>{const u=Lpe(c,4),d=16777215&Lpe(c,0);let h=0;const f=!!(16&d);let p=0;const g=!!(32&d);let m=8;u===s&&(!!(1&d)&&(m+=8),!!(2&d)&&(m+=4),!!(8&d)&&(h=Lpe(c,m),m+=4),f&&(p=Lpe(c,m),m+=4),g&&(m+=4),"video"===t.type&&(a=Xpe(t.codec)),Upe(o,["trun"]).map((s=>{const o=s[0],c=16777215&Lpe(s,0),u=!!(1&c);let d=0;const f=!!(4&c),g=!!(256&c);let m=0;const y=!!(512&c);let v=0;const b=!!(1024&c),w=!!(2048&c);let x=0;const S=Lpe(s,4);let E=8;u&&(d=Lpe(s,E),E+=4),f&&(E+=4);let T=d+l;for(let l=0;l<S;l++){if(g?(m=Lpe(s,E),E+=4):m=h,y?(v=Lpe(s,E),E+=4):v=p,b&&(E+=4),w&&(x=0===o?Lpe(s,E):Fpe(s,E),E+=4),t.type===Tpe){let t=0;for(;t<v;){const s=Lpe(n,T);if(T+=4,Jpe(a,n[T])){Zpe(n.subarray(T,T+s),a?2:1,e+x/i,r)}T+=s,t+=s+4}}e+=m/i}})))}))}))})),r}function Xpe(e){if(!e)return!1;const t=e.substring(0,4);return"hvc1"===t||"hev1"===t||"dvh1"===t||"dvhe"===t}function Jpe(e,t){if(e){const e=t>>1&63;return 39===e||40===e}return 6===(31&t)}function Zpe(e,t,r,n){const i=ege(e);let s=0;s+=t;let a=0,o=0,l=0;for(;s<i.length;){a=0;do{if(s>=i.length)break;l=i[s++],a+=l}while(255===l);o=0;do{if(s>=i.length)break;l=i[s++],o+=l}while(255===l);const e=i.length-s;let t=s;if(o<e)s+=o;else if(o>e){ope.error(`Malformed SEI payload. ${o} is too small, only ${e} bytes left to parse.`);break}if(4===a){if(181===i[t++]){const e=jpe(i,t);if(t+=2,49===e){const e=Lpe(i,t);if(t+=4,1195456820===e){const e=i[t++];if(3===e){const s=i[t++],o=64&s,l=o?2+3*(31&s):0,c=new Uint8Array(l);if(o){c[0]=s;for(let e=1;e<l;e++)c[e]=i[t++]}n.push({type:e,payloadType:a,pts:r,bytes:c})}}}}}else if(5===a&&o>16){const e=[];for(let r=0;r<16;r++){const n=i[t++].toString(16);e.push(1==n.length?"0"+n:n),3!==r&&5!==r&&7!==r&&9!==r||e.push("-")}const s=o-16,l=new Uint8Array(s);for(let r=0;r<s;r++)l[r]=i[t++];n.push({payloadType:a,pts:r,uuid:e.join(""),userData:upe(l),userDataBytes:l})}}}function ege(e){const t=e.byteLength,r=[];let n=1;for(;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(r.push(n+2),n+=2):n++;if(0===r.length)return e;const i=t-r.length,s=new Uint8Array(i);let a=0;for(n=0;n<i;a++,n++)a===r[0]&&(a++,r.shift()),s[n]=e[a];return s}function tge(e,t,r){if(16!==e.byteLength)throw new RangeError("Invalid system id");let n,i,s;n=0,i=new Uint8Array,s=new Uint8Array;const a=new Uint8Array(4);return r.byteLength>0&&new DataView(a.buffer).setUint32(0,r.byteLength,!1),function(e,...t){const r=t.length;let n=8,i=r;for(;i--;)n+=t[i].byteLength;const s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=255&n,s.set(e,4),i=0,n=8;i<r;i++)s.set(t[i],n),n+=t[i].byteLength;return s}([112,115,115,104],new Uint8Array([0,0,0,0]),e,s,i,a,r)}function rge(e){const t=e.getUint32(0),r=e.byteOffset,n=e.byteLength;if(n<t)return{offset:r,size:n};if(1886614376!==e.getUint32(4))return{offset:r,size:t};const i=e.getUint32(8)>>>24;if(0!==i&&1!==i)return{offset:r,size:t};const s=e.buffer,a=dpe(new Uint8Array(s,r+12,16));let o=null,l=null,c=0;if(0===i)c=28;else{const i=e.getUint32(28);if(!i||n<32+16*i)return{offset:r,size:t};o=[];for(let e=0;e<i;e++)o.push(new Uint8Array(s,r+32+16*e,16));c=32+16*i}if(!c)return{offset:r,size:t};const u=e.getUint32(c);return t-32<u?{offset:r,size:t}:(l=new Uint8Array(s,r+c+4,u),{version:i,systemId:a,kids:o,data:l,offset:r,size:t})}const nge=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),ige={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function sge(e,t){const r=ige[t];return!!r&&!!r[e.slice(0,4)]}function age(e,t,r=!0){return!e.split(",").some((e=>!oge(e,t,r)))}function oge(e,t,r=!0){var n;const i=lpe(r);return null!=(n=null==i?void 0:i.isTypeSupported(lge(e,t)))&&n}function lge(e,t){return`${t}/mp4;codecs=${e}`}function cge(e){if(e){const t=e.substring(0,4);return ige.video[t]}return 2}function uge(e){const t=nge();return e.split(",").reduce(((e,r)=>{const n=t&&Xpe(r)?9:ige.video[r];return n?(2*n+e)/(e?3:2):(ige.audio[r]+e)/(e?2:1)}),0)}const dge={};const hge=/flac|opus|mp4a\.40\.34/i;function fge(e,t=!0){return e.replace(hge,(e=>function(e,t=!0){if(dge[e])return dge[e];const r={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[e];for(let i=0;i<r.length;i++){var n;if(oge(r[i],"audio",t))return dge[e]=r[i],r[i];if("mp3"===r[i]&&null!=(n=lpe(t))&&n.isTypeSupported("audio/mpeg"))return""}return e}(e.toLowerCase(),t)))}function pge(e,t){if(e&&(e.length>4||-1!==["ac-3","ec-3","alac","fLaC","Opus"].indexOf(e))&&(gge(e,"audio")||gge(e,"video")))return e;if(t){const r=t.split(",");if(r.length>1){if(e)for(let t=r.length;t--;)if(r[t].substring(0,4)===e.substring(0,4))return r[t];return r[0]}}return t||e}function gge(e,t){return sge(e,t)&&oge(e,t)}function mge(e){if(e.startsWith("av01.")){const t=e.split("."),r=["0","111","01","01","01","0"];for(let e=t.length;e>4&&e<10;e++)t[e]=r[e-4];return t.join(".")}return e}function yge(e){const t=lpe(e)||{isTypeSupported:()=>!1};return{mpeg:t.isTypeSupported("audio/mpeg"),mp3:t.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:t.isTypeSupported('audio/mp4; codecs="ac-3"')}}function vge(e){return e.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const bge={supported:!1,smooth:!1,powerEfficient:!1},wge={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function xge(e,t){return{supported:!1,configurations:t,decodingInfoResults:[bge],error:e}}function Sge(e,t,r,n,i,s){const a=e.videoCodec,o=e.audioCodec?e.audioGroups:null,l=null==s?void 0:s.audioCodec,c=null==s?void 0:s.channels,u=c?parseInt(c):l?1/0:2;let d=null;if(null!=o&&o.length)try{d=1===o.length&&o[0]?t.groups[o[0]].channels:o.reduce(((e,r)=>{if(r){const n=t.groups[r];if(!n)throw new Error(`Audio track group ${r} not found`);Object.keys(n.channels).forEach((t=>{e[t]=(e[t]||0)+n.channels[t]}))}return e}),{2:0})}catch(h){return!0}return void 0!==a&&(a.split(",").some((e=>Xpe(e)))||e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(n,30)||"SDR"!==e.videoRange&&e.videoRange!==r||e.bitrate>Math.max(i,8e6))||!!d&&Lfe(u)&&Object.keys(d).some((e=>parseInt(e)>u))}function Ege(e,t,r,n={}){const i=e.videoCodec;if(!i&&!e.audioCodec||!r)return Promise.resolve(wge);const s=[],a=function(e){var t;const r=null==(t=e.videoCodec)?void 0:t.split(","),n=kge(e),i=e.width||640,s=e.height||480,a=e.frameRate||30,o=e.videoRange.toLowerCase();return r?r.map((e=>{const t={contentType:lge(mge(e),"video"),width:i,height:s,bitrate:n,framerate:a};return"sdr"!==o&&(t.transferFunction=o),t})):[]}(e),o=a.length,l=function(e,t,r){var n;const i=null==(n=e.audioCodec)?void 0:n.split(","),s=kge(e);if(i&&e.audioGroups)return e.audioGroups.reduce(((e,n)=>{var a;const o=n?null==(a=t.groups[n])?void 0:a.tracks:null;return o?o.reduce(((e,t)=>{if(t.groupId===n){const n=parseFloat(t.channels||"");i.forEach((t=>{const i={contentType:lge(t,"audio"),bitrate:r?Tge(t,s):s};n&&(i.channels=""+n),e.push(i)}))}return e}),e):e}),[]);return[]}(e,t,o>0),c=l.length;for(let u=o||1*c||1;u--;){const e={type:"media-source"};if(o&&(e.video=a[u%o]),c){e.audio=l[u%c];const t=e.audio.bitrate;e.video&&t&&(e.video.bitrate-=t)}s.push(e)}if(i){const e=navigator.userAgent;if(i.split(",").some((e=>Xpe(e)))&&nge())return Promise.resolve(xge(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${e})`),s))}return Promise.all(s.map((e=>{const t=function(e){let t="";const{audio:r,video:n}=e;if(n){t+=`${vge(n.contentType)}_r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${Math.ceil(n.bitrate/1e5)}`}if(r){t+=`${n?"_":""}${vge(r.contentType)}_c${r.channels}`}return t}(e);return n[t]||(n[t]=r.decodingInfo(e))}))).then((e=>({supported:!e.some((e=>!e.supported)),configurations:s,decodingInfoResults:e}))).catch((e=>({supported:!1,configurations:s,decodingInfoResults:[],error:e})))}function Tge(e,t){if(t<=1)return 1;let r=128e3;return"ec-3"===e?r=768e3:"ac-3"===e&&(r=64e4),Math.min(t/2,r)}function kge(e){return 1e3*Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)/1e3)||1}const Age=["NONE","TYPE-0","TYPE-1",null];const _ge=["SDR","PQ","HLG"];var Cge="",Pge="YES",Dge="v2";function Rge(e){const{canSkipUntil:t,canSkipDateRanges:r,age:n}=e;return t&&n<t/2?r?Dge:Pge:Cge}class Ige{constructor(e,t,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=r}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Oge{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter((e=>!!e)).map((e=>e.substring(0,4))).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const r=null==(t=e.supplemental)?void 0:t.videoCodec;r&&r!==e.videoCodec&&(this.codecSet+=`,${r.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return Nge(this._audioGroups,e)}hasSubtitleGroup(e){return Nge(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t)if("audio"===e){let e=this._audioGroups;e||(e=this._audioGroups=[]),-1===e.indexOf(t)&&e.push(t)}else if("text"===e){let e=this._subtitleGroups;e||(e=this._subtitleGroups=[]),-1===e.indexOf(t)&&e.push(t)}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return null==(e=this.audioGroups)?void 0:e[0]}get textGroupId(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}addFallback(){}}function Nge(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}function jge(e,t){let r=!1,n=[];if(e&&(r="SDR"!==e,n=[e]),t){n=t.allowedVideoRanges||_ge.slice(0);const e="SDR"!==n.join("")&&!t.videoCodec;r=void 0!==t.preferHDR?t.preferHDR:e&&function(){if("function"==typeof matchMedia){const e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}(),r||(n=["SDR"])}return{preferHDR:r,allowedVideoRanges:n}}const Lge=(e,t)=>JSON.stringify(e,(e=>{const t=new WeakSet;return(r,n)=>{if(e&&(n=e(r,n)),"object"==typeof n&&null!==n){if(t.has(n))return;t.add(n)}return n}})(t));function Mge(e,t){ope.log(`[abr] start candidates with "${e}" ignored because ${t}`)}function Fge(e){return e.reduce(((e,t)=>{let r=e.groups[t.groupId];r||(r=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(t);const n=t.channels||"2";return r.channels[n]=(r.channels[n]||0)+1,r.hasDefault=r.hasDefault||t.default,r.hasAutoSelect=r.hasAutoSelect||t.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e}),{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function Uge(e){if(!e)return e;const{lang:t,assocLang:r,characteristics:n,channels:i,audioCodec:s}=e;return{lang:t,assocLang:r,characteristics:n,channels:i,audioCodec:s}}function Bge(e,t,r){if("attrs"in e){const r=t.indexOf(e);if(-1!==r)return r}for(let n=0;n<t.length;n++){if($ge(e,t[n],r))return n}return-1}function $ge(e,t,r){const{groupId:n,name:i,lang:s,assocLang:a,default:o}=e,l=e.forced;return(void 0===n||t.groupId===n)&&(void 0===i||t.name===i)&&(void 0===s||function(e,t="--"){if(e.length===t.length)return e===t;return e.startsWith(t)||t.startsWith(e)}(s,t.lang))&&(void 0===s||t.assocLang===a)&&(void 0===o||t.default===o)&&(void 0===l||t.forced===l)&&(!("characteristics"in e)||function(e,t=""){const r=e.split(","),n=t.split(",");return r.length===n.length&&!r.some((e=>-1===n.indexOf(e)))}(e.characteristics||"",t.characteristics))&&(void 0===r||r(e,t))}function zge(e,t){const{audioCodec:r,channels:n}=e;return!(void 0!==r&&(t.audioCodec||"").substring(0,4)!==r.substring(0,4)||void 0!==n&&n!==(t.channels||"2"))}function qge(e,t,r){for(let n=t;n>-1;n--)if(r(e[n]))return n;for(let n=t+1;n<e.length;n++)if(r(e[n]))return n;return-1}function Vge(e,t){var r;return!!e&&e!==(null==(r=t.loadLevelObj)?void 0:r.uri)}const Kge=function(e,t){let r=0,n=e.length-1,i=null,s=null;for(;r<=n;){i=(r+n)/2|0,s=e[i];const a=t(s);if(a>0)r=i+1;else{if(!(a<0))return s;n=i-1}}return null};function Hge(e,t,r=0,n=0,i=.005){let s=null;if(e){s=t[1+e.sn-t[0].sn]||null;const n=e.endDTS-r;n>0&&n<15e-7&&(r+=15e-7),s&&e.level!==s.level&&s.end<=e.end&&(s=t[2+e.sn-t[0].sn]||null)}else 0===r&&0===t[0].start&&(s=t[0]);if(s&&((!e||e.level===s.level)&&0===Gge(r,n,s)||function(e,t,r){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){const n=t.tagList.reduce(((e,t)=>("INF"===t[0]&&(e+=parseFloat(t[1])),e)),r);return e.start<=n}return!1}(s,e,Math.min(i,n))))return s;const a=Kge(t,Gge.bind(null,r,n));return!a||a===e&&s?s:a}function Gge(e=0,t=0,r){if(r.start<=e&&r.start+r.duration>e)return 0;const n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function Wge(e,t,r){const n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-n>e}function Qge(e,t,r){if(e&&e.startCC<=t&&e.endCC>=t){let n=e.fragments;const{fragmentHint:i}=e;let s;return i&&(n=n.concat(i)),Kge(n,(e=>e.cc<t?1:e.cc>t?-1:(s=e,e.end<=r?1:e.start>r?-1:0))),s||null}return null}function Yge(e){switch(e.details){case Bfe.FRAG_LOAD_TIMEOUT:case Bfe.KEY_LOAD_TIMEOUT:case Bfe.LEVEL_LOAD_TIMEOUT:case Bfe.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Xge(e){return e.details.startsWith("key")}function Jge(e){return Xge(e)&&!!e.frag&&!e.frag.decryptdata}function Zge(e,t){const r=Yge(t);return e.default[(r?"timeout":"error")+"Retry"]}function eme(e,t){const r="linear"===e.backoff?1:Math.pow(2,t);return Math.min(r*e.retryDelayMs,e.maxRetryDelayMs)}function tme(e){return epe(epe({},e),{errorRetry:null,timeoutRetry:null})}function rme(e,t,r,n){if(!e)return!1;const i=null==n?void 0:n.code,s=t<e.maxNumRetry&&(function(e){return nme(e)||!!e&&(e<400||e>499)}(i)||!!r);return e.shouldRetry?e.shouldRetry(e,t,r,n,s):s}function nme(e){return 0===e&&!1===navigator.onLine}var ime=0,sme=2,ame=3,ome=5,lme=0,cme=1,ume=2,dme=4;function hme(e){const t={action:ime,flags:lme};return e&&(t.resolved=!0),t}var fme="NOT_LOADED",pme="APPENDING",gme="PARTIAL",mme="OK";class yme{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.on($fe.BUFFER_APPENDED,this.onBufferAppended,this),e.on($fe.FRAG_BUFFERED,this.onFragBuffered,this),e.on($fe.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.off($fe.BUFFER_APPENDED,this.onBufferAppended,this),e.off($fe.FRAG_BUFFERED,this.onFragBuffered,this),e.off($fe.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const r=this.activePartLists[t];if(r)for(let n=r.length;n--;){const t=r[n];if(!t)break;if(t.start<=e&&e<=t.end&&t.loaded)return t}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,r){const{fragments:n}=this,i=Object.keys(n);for(let s=i.length;s--;){const a=n[i[s]];if((null==a?void 0:a.body.type)===t&&(!r||a.buffered)){const t=a.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,t,r,n,i){this.timeRanges&&(this.timeRanges[e]=t);const s=(null==n?void 0:n.fragment.sn)||-1;Object.keys(this.fragments).forEach((n=>{const a=this.fragments[n];if(!a)return;if(s>=a.body.sn)return;if(!a.buffered&&(!a.loaded||i))return void(a.body.type===r&&this.removeFragment(a.body));const o=a.range[e];o&&(0!==o.time.length?o.time.some((e=>{const r=!this.isTimeBuffered(e.startPTS,e.endPTS,t);return r&&this.removeFragment(a.body),r})):this.removeFragment(a.body))}))}detectPartialFragments(e){const t=this.timeRanges;if(!t||"initSegment"===e.frag.sn)return;const r=e.frag,n=bme(r),i=this.fragments[n];if(!i||i.buffered&&r.gap)return;const s=!r.relurl;Object.keys(t).forEach((n=>{const a=r.elementaryStreams[n];if(!a)return;const o=t[n],l=s||!0===a.partial;i.range[n]=this.getBufferedTimes(r,e.part,l,o)})),i.loaded=null,Object.keys(i.range).length?(this.bufferedEnd(i,r),vme(i)||this.removeParts(r.sn-1,r.type)):this.removeFragment(i.body)}bufferedEnd(e,t){e.buffered=!0;(e.body.endList=t.endList||e.body.endList)&&(this.endListFragments[e.body.type]=e)}removeParts(e,t){const r=this.activePartLists[t];r&&(this.activePartLists[t]=wme(r,(t=>t.fragment.sn>=e)))}fragBuffered(e,t){const r=bme(e);let n=this.fragments[r];!n&&t&&(n=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),n&&(n.loaded=null,this.bufferedEnd(n,e))}getBufferedTimes(e,t,r,n){const i={time:[],partial:r},s=e.start,a=e.end,o=e.minEndPTS||a,l=e.maxStartPTS||s;for(let c=0;c<n.length;c++){const e=n.start(c)-this.bufferPadding,t=n.end(c)+this.bufferPadding;if(l>=e&&o<=t){i.time.push({startPTS:Math.max(s,n.start(c)),endPTS:Math.min(a,n.end(c))});break}if(s<t&&a>e){const e=Math.max(s,n.start(c)),t=Math.min(a,n.end(c));t>e&&(i.partial=!0,i.time.push({startPTS:e,endPTS:t}))}else if(a<=e)break}return i}getPartialFragment(e){let t,r,n,i=null,s=0;const{bufferPadding:a,fragments:o}=this;return Object.keys(o).forEach((l=>{const c=o[l];c&&vme(c)&&(r=c.body.start-a,n=c.body.end+a,e>=r&&e<=n&&(t=Math.min(e-r,n-e),s<=t&&(i=c.body,s=t)))})),i}isEndListAppended(e){const t=this.endListFragments[e];return void 0!==t&&(t.buffered||vme(t))}getState(e){const t=bme(e),r=this.fragments[t];return r?r.buffered?vme(r)?gme:mme:pme:fme}isTimeBuffered(e,t,r){let n,i;for(let s=0;s<r.length;s++){if(n=r.start(s)-this.bufferPadding,i=r.end(s)+this.bufferPadding,e>=n&&t<=i)return!0;if(t<=n)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if("initSegment"===t.frag.sn||t.frag.bitrateTest)return;const r=t.frag,n=t.part?null:t,i=bme(r);this.fragments[i]={body:r,appendedPTS:null,loaded:n,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:r,part:n,timeRanges:i,type:s}=t;if("initSegment"===r.sn)return;const a=r.type;if(n){let e=this.activePartLists[a];e||(this.activePartLists[a]=e=[]),e.push(n)}this.timeRanges=i;const o=i[s];this.detectEvictedFragments(s,o,a,n)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=bme(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,r=Object.keys(t);if(!e)return r.length>0;for(let n=r.length;n--;){const i=t[r[n]];if((null==i?void 0:i.body.type)===e)return!0}return!1}hasParts(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)}removeFragmentsInRange(e,t,r,n,i){n&&!this.hasGaps||Object.keys(this.fragments).forEach((s=>{const a=this.fragments[s];if(!a)return;const o=a.body;o.type!==r||n&&!o.gap||o.start<t&&o.end>e&&(a.buffered||i)&&this.removeFragment(o)}))}removeFragment(e){const t=bme(e);e.clearElementaryStreamInfo();const r=this.activePartLists[e.type];if(r){const t=e.sn;this.activePartLists[e.type]=wme(r,(e=>e.fragment.sn!==t))}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=null==(e=this.hls)||null==(e=e.latestLevelDetails)?void 0:e.partList;t&&t.forEach((e=>e.clearElementaryStreamInfo()))}}function vme(e){var t,r,n;return e.buffered&&!!(e.body.gap||null!=(t=e.range.video)&&t.partial||null!=(r=e.range.audio)&&r.partial||null!=(n=e.range.audiovideo)&&n.partial)}function bme(e){return`${e.type}_${e.level}_${e.sn}`}function wme(e,t){return e.filter((e=>{const r=t(e);return r||e.clearElementaryStreamInfo(),r}))}var xme=0,Sme=1;class Eme{constructor(e,t,r){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=r}decrypt(e,t){switch(this.aesMode){case xme:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case Sme:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}class Tme{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),r=new Uint32Array(4);for(let n=0;n<4;n++)r[n]=t.getUint32(4*n);return r}initTable(){const e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],s=r[2],a=r[3],o=this.invSubMix,l=o[0],c=o[1],u=o[2],d=o[3],h=new Uint32Array(256);let f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){let r=p^p<<1^p<<2^p<<3^p<<4;r=r>>>8^255&r^99,e[f]=r,t[r]=f;const o=h[f],g=h[o],m=h[g];let y=257*h[r]^16843008*r;n[f]=y<<24|y>>>8,i[f]=y<<16|y>>>16,s[f]=y<<8|y>>>24,a[f]=y,y=16843009*m^65537*g^257*o^16843008*f,l[r]=y<<24|y>>>8,c[r]=y<<16|y>>>16,u[r]=y<<8|y>>>24,d[r]=y,f?(f=o^h[h[h[m^o]]],p^=h[h[p]]):f=p=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let r=!0,n=0;for(;n<t.length&&r;)r=t[n]===this.key[n],n++;if(r)return;this.key=t;const i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);const s=this.ksRows=4*(i+6+1);let a,o;const l=this.keySchedule=new Uint32Array(s),c=this.invKeySchedule=new Uint32Array(s),u=this.sBox,d=this.rcon,h=this.invSubMix,f=h[0],p=h[1],g=h[2],m=h[3];let y,v;for(a=0;a<s;a++)a<i?y=l[a]=t[a]:(v=y,a%i===0?(v=v<<8|v>>>24,v=u[v>>>24]<<24|u[v>>>16&255]<<16|u[v>>>8&255]<<8|u[255&v],v^=d[a/i|0]<<24):i>6&&a%i===4&&(v=u[v>>>24]<<24|u[v>>>16&255]<<16|u[v>>>8&255]<<8|u[255&v]),l[a]=y=(l[a-i]^v)>>>0);for(o=0;o<s;o++)a=s-o,v=3&o?l[a]:l[a-4],c[o]=o<4||a<=4?v:f[u[v>>>24]]^p[u[v>>>16&255]]^g[u[v>>>8&255]]^m[u[255&v]],c[o]=c[o]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,r){const n=this.keySize+6,i=this.invKeySchedule,s=this.invSBox,a=this.invSubMix,o=a[0],l=a[1],c=a[2],u=a[3],d=this.uint8ArrayToUint32Array_(r);let h=d[0],f=d[1],p=d[2],g=d[3];const m=new Int32Array(e),y=new Int32Array(m.length);let v,b,w,x,S,E,T,k,A,_,C,P,D,R;const I=this.networkToHostOrderSwap;for(;t<m.length;){for(A=I(m[t]),_=I(m[t+1]),C=I(m[t+2]),P=I(m[t+3]),S=A^i[0],E=P^i[1],T=C^i[2],k=_^i[3],D=4,R=1;R<n;R++)v=o[S>>>24]^l[E>>16&255]^c[T>>8&255]^u[255&k]^i[D],b=o[E>>>24]^l[T>>16&255]^c[k>>8&255]^u[255&S]^i[D+1],w=o[T>>>24]^l[k>>16&255]^c[S>>8&255]^u[255&E]^i[D+2],x=o[k>>>24]^l[S>>16&255]^c[E>>8&255]^u[255&T]^i[D+3],S=v,E=b,T=w,k=x,D+=4;v=s[S>>>24]<<24^s[E>>16&255]<<16^s[T>>8&255]<<8^s[255&k]^i[D],b=s[E>>>24]<<24^s[T>>16&255]<<16^s[k>>8&255]<<8^s[255&S]^i[D+1],w=s[T>>>24]<<24^s[k>>16&255]<<16^s[S>>8&255]<<8^s[255&E]^i[D+2],x=s[k>>>24]<<24^s[S>>16&255]<<16^s[E>>8&255]<<8^s[255&T]^i[D+3],y[t]=I(v^h),y[t+1]=I(x^f),y[t+2]=I(w^p),y[t+3]=I(b^g),h=A,f=_,p=C,g=P,t+=4}return y.buffer}}class kme{constructor(e,t,r){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=r}expandKey(){const e=function(e){switch(e){case xme:return"AES-CBC";case Sme:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${e}`)}}(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}class Ame{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(Jce){}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?function(e){const t=e.byteLength,r=t&&new DataView(e.buffer).getUint8(t-1);return r?e.slice(0,t-r):e}(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,r,n){return this.useSoftware?new Promise(((i,s)=>{const a=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(a,t,r,n);const o=this.flush();o?i(o.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(e),t,r,n)}softwareDecrypt(e,t,r,n){const{currentIV:i,currentResult:s,remainderData:a}=this;if(n!==xme||16!==t.byteLength)return ope.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),a&&(e=Qpe(a,e),this.remainderData=null);const o=this.getValidChunk(e);if(!o.length)return null;i&&(r=i);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new Tme),l.expandKey(t);const c=s;return this.currentResult=l.decrypt(o.buffer,0,r),this.currentIV=o.slice(-16).buffer,c||null}webCryptoDecrypt(e,t,r,n){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,r,n));this.key=t,this.fastAesKey=new kme(this.subtle,t,n)}return this.fastAesKey.expandKey().then((t=>{if(!this.subtle)return Promise.reject(new Error("web crypto not initialized"));this.logOnce("WebCrypto AES decrypt");return new Eme(this.subtle,new Uint8Array(r),n).decrypt(e.buffer,t)})).catch((i=>(ope.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,t,r,n))))}onWebCryptoError(e,t,r,n){const i=this.enableSoftwareAES;if(i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,r,n);const i=this.flush();if(i)return i.buffer}throw new Error("WebCrypto"+(i?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const r=e.length-e.length%16;return r!==e.length&&(t=e.slice(0,r),this.remainderData=e.slice(r)),t}logOnce(e){this.logEnabled&&(ope.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const _me=Math.pow(2,17);class Cme{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const r=e.url;if(!r)return Promise.reject(new Rme({type:Ufe.NETWORK_ERROR,details:Bfe.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(r?"part list":"url")),networkDetails:null}));this.abort();const n=this.config,i=n.fLoader,s=n.loader;return new Promise(((a,o)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some((e=>"GAP"===e[0])))return void o(Dme(e));e.gap=!1}const l=this.loader=i?new i(n):new s(n),c=Pme(e);e.loader=l;const u=tme(n.fragLoadPolicy.default),d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:_me};e.stats=l.stats;const h={onSuccess:(t,r,n,i)=>{this.resetLoader(e,l);let s=t.data;n.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(s.slice(0,16)),s=s.slice(16)),a({frag:e,part:null,payload:s,networkDetails:i})},onError:(t,n,i,s)=>{this.resetLoader(e,l),o(new Rme({type:Ufe.NETWORK_ERROR,details:Bfe.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:epe({url:r,data:void 0},t),error:new Error(`HTTP Error ${t.code} ${t.text}`),networkDetails:i,stats:s}))},onAbort:(t,r,n)=>{this.resetLoader(e,l),o(new Rme({type:Ufe.NETWORK_ERROR,details:Bfe.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:n,stats:t}))},onTimeout:(t,r,n)=>{this.resetLoader(e,l),o(new Rme({type:Ufe.NETWORK_ERROR,details:Bfe.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${d.timeout}ms`),networkDetails:n,stats:t}))}};t&&(h.onProgress=(r,n,i,s)=>t({frag:e,part:null,payload:i,networkDetails:s})),l.load(c,d,h)}))}loadPart(e,t,r){this.abort();const n=this.config,i=n.fLoader,s=n.loader;return new Promise(((a,o)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void o(Dme(e,t));const l=this.loader=i?new i(n):new s(n),c=Pme(e,t);e.loader=l;const u=tme(n.fragLoadPolicy.default),d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:_me};t.stats=l.stats,l.load(c,d,{onSuccess:(n,i,s,o)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,t);const c={frag:e,part:t,payload:n.data,networkDetails:o};r(c),a(c)},onError:(r,n,i,s)=>{this.resetLoader(e,l),o(new Rme({type:Ufe.NETWORK_ERROR,details:Bfe.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:epe({url:c.url,data:void 0},r),error:new Error(`HTTP Error ${r.code} ${r.text}`),networkDetails:i,stats:s}))},onAbort:(r,n,i)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,l),o(new Rme({type:Ufe.NETWORK_ERROR,details:Bfe.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:i,stats:r}))},onTimeout:(r,n,i)=>{this.resetLoader(e,l),o(new Rme({type:Ufe.NETWORK_ERROR,details:Bfe.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${d.timeout}ms`),networkDetails:i,stats:r}))}})}))}updateStatsFromPart(e,t){const r=e.stats,n=t.stats,i=n.total;if(r.loaded+=n.loaded,i){const n=Math.round(e.duration/t.duration),s=Math.min(Math.round(r.loaded/i),n),a=(n-s)*Math.round(r.loaded/s);r.total=r.loaded+a}else r.total=Math.max(r.loaded,r.total);const s=r.loading,a=n.loading;s.start?s.first+=a.first-a.start:(s.start=a.start,s.first=a.first),s.end=a.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function Pme(e,t=null){const r=t||e,n={frag:e,part:t,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},i=r.byteRangeStartOffset,s=r.byteRangeEndOffset;if(Lfe(i)&&Lfe(s)){var a;let t=i,r=s;if("initSegment"===e.sn&&("AES-128"===(o=null==(a=e.decryptdata)?void 0:a.method)||"AES-256"===o)){const e=s-i;e%16&&(r=s+(16-e%16)),0!==i&&(n.resetIV=!0,t=i-16)}n.rangeStart=t,n.rangeEnd=r}var o;return n}function Dme(e,t){const r=new Error(`GAP ${e.gap?"tag":"attribute"} found`),n={type:Ufe.MEDIA_ERROR,details:Bfe.FRAG_GAP,fatal:!1,frag:e,error:r,networkDetails:null};return t&&(n.part=t),(t||e).stats.aborted=!0,new Rme(n)}class Rme extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class Ime extends tpe{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class Ome{constructor(e,t,r,n=0,i=-1,s=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=r,this.size=n,this.part=i,this.partial=s}}const Nme={length:0,start:()=>0,end:()=>0};class jme{static isBuffered(e,t){if(e){const r=jme.getBuffered(e);for(let e=r.length;e--;)if(t>=r.start(e)&&t<=r.end(e))return!0}return!1}static bufferedRanges(e){if(e){const t=jme.getBuffered(e);return jme.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let r=0;r<e.length;r++)t.push({start:e.start(r),end:e.end(r)});return t}static bufferInfo(e,t,r){if(e){const n=jme.bufferedRanges(e);if(n.length)return jme.bufferedInfo(n,t,r)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,r){t=Math.max(0,t),e.length>1&&e.sort(((e,t)=>e.start-t.start||t.end-e.end));let n=-1,i=[];if(r)for(let c=0;c<e.length;c++){t>=e[c].start&&t<=e[c].end&&(n=c);const s=i.length;if(s){const t=i[s-1].end;e[c].start-t<r?e[c].end>t&&(i[s-1].end=e[c].end):i.push(e[c])}else i.push(e[c])}else i=e;let s,a=0,o=t,l=t;for(let c=0;c<i.length;c++){const e=i[c].start,u=i[c].end;if(-1===n&&t>=e&&t<=u&&(n=c),t+r>=e&&t<u)o=e,l=u,a=l-t;else if(t+r<e){s=e;break}}return{len:a,start:o||0,end:l||0,nextStart:s,buffered:e,bufferedIndex:n}}static getBuffered(e){try{return e.buffered||Nme}catch(Jce){return ope.log("failed to get media.buffered",Jce),Nme}}}const Lme=/\{\$([a-zA-Z0-9-_]+)\}/g;function Mme(e){return Lme.test(e)}function Fme(e,t){if(null!==e.variableList||e.hasVariableRefs){const r=e.variableList;return t.replace(Lme,(t=>{const n=t.substring(2,t.length-1),i=null==r?void 0:r[n];return void 0===i?(e.playlistParsingError||(e.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${n}"`)),t):i}))}return t}function Ume(e,t,r){let n,i,s=e.variableList;if(s||(e.variableList=s={}),"QUERYPARAM"in t){n=t.QUERYPARAM;try{const e=new self.URL(r).searchParams;if(!e.has(n))throw new Error(`"${n}" does not match any query parameter in URI: "${r}"`);i=e.get(n)}catch(a){e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else n=t.NAME,i=t.VALUE;n in s?e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${n}"`)):s[n]=i||""}function Bme(e,t,r){const n=t.IMPORT;if(r&&n in r){let t=e.variableList;t||(e.variableList=t={}),t[n]=r[n]}else e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}const $me=/^(\d+)x(\d+)$/,zme=/(.+?)=(".*?"|.*?)(?:,|$)/g;class qme{constructor(e,t){"string"==typeof e&&(e=qme.parseAttrList(e,t)),Jfe(this,e)}get clientAttrs(){return Object.keys(this).filter((e=>"X-"===e.substring(0,2)))}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const r=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)r[e]=parseInt(t.slice(2*e,2*e+2),16);return r}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const r=this[e];return r?parseFloat(r):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const r=this[e];return(r?r.split(/[ ,]+/):[]).reduce(((e,t)=>(e[t.toLowerCase()]=!0,e)),t)}bool(e){return"YES"===this[e]}decimalResolution(e){const t=$me.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let r;const n={};for(zme.lastIndex=0;null!==(r=zme.exec(e));){const i=r[1].trim();let s=r[2];const a=0===s.indexOf('"')&&s.lastIndexOf('"')===s.length-1;let o=!1;if(a)s=s.slice(1,-1);else switch(i){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":o=!0}if(t&&(a||o))s=Fme(t,s);else if(!o&&!a)switch(i){case"CLOSED-CAPTIONS":if("NONE"===s)break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":ope.warn(`${e}: attribute ${i} is missing quotes`)}n[i]=s}return n}}function Vme(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e||"SCTE35-CMD"===e}class Kme{constructor(e,t,r=0){var n;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(null==t?void 0:t.tagAnchor)||null,this.tagOrder=null!=(n=null==t?void 0:t.tagOrder)?n:r,t){const r=t.attr;for(const t in r)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==r[t]){ope.warn(`DATERANGE tag attribute: "${t}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=t;break}e=Jfe(new qme({}),r,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const e=(null==t?void 0:t.endDate)||new Date(this.attr["END-DATE"]);Lfe(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return void 0===e?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return null===e||null===e.programDateTime?(ope.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return null!==t?this._dateAtEnd=new Date(this._startDate.getTime()+1e3*t):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Lfe(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return"com.apple.hls.interstitial"===this.class}get isValid(){return!!this.id&&!this._badValueForSameId&&Lfe(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}class Hme{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&r>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some((t=>{let r=t.decryptdata;return r||(t.setKeyFormat(e.keyFormat),r=t.decryptdata),!!r&&e.matches(r)}))}get hasProgramDateTime(){return!!this.fragments.length&&Lfe(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const e=this.driftEndTime-this.driftStartTime;if(e>0){return 1e3*(this.driftEnd-this.driftStart)/e}return 1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(-1!==t){for(let r=e.length;r--;)if(e[r].index>t)return e[r].index;return t}}return 0}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function Gme(e,t){return e.length===t.length&&!e.some(((e,r)=>e!==t[r]))}function Wme(e,t){return!e&&!t||!(!e||!t)&&Gme(e,t)}function Qme(e){return"AES-128"===e||"AES-256"===e||"AES-256-CTR"===e}function Yme(e){switch(e){case"AES-128":case"AES-256":return xme;case"AES-256-CTR":return Sme;default:throw new Error(`invalid full segment method ${e}`)}}function Xme(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}function Jme(e){return Uint8Array.from(unescape(encodeURIComponent(e)),(e=>e.charCodeAt(0)))}function Zme(e){const t=function(e,t,r){const n=e[t];e[t]=e[r],e[r]=n};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}function eye(e){const t=e.split(":");let r=null;if("data"===t[0]&&2===t.length){const e=t[1].split(";"),n=e[e.length-1].split(",");if(2===n.length){const t="base64"===n[0],i=n[1];t?(e.splice(-1,1),r=Xme(i)):r=function(e){const t=Jme(e).subarray(0,16),r=new Uint8Array(16);return r.set(t,16-t.length),r}(i)}}return r}const tye="undefined"!=typeof self?self:void 0;var rye={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},nye="org.w3.clearkey",iye="com.apple.streamingkeydelivery",sye="com.microsoft.playready",aye="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function oye(e){switch(e){case iye:return rye.FAIRPLAY;case sye:return rye.PLAYREADY;case aye:return rye.WIDEVINE;case nye:return rye.CLEARKEY}}function lye(e){switch(e){case rye.FAIRPLAY:return iye;case rye.PLAYREADY:return sye;case rye.WIDEVINE:return aye;case rye.CLEARKEY:return nye}}function cye(e){const{drmSystems:t,widevineLicenseUrl:r}=e,n=t?[rye.FAIRPLAY,rye.WIDEVINE,rye.PLAYREADY,rye.CLEARKEY].filter((e=>!!t[e])):[];return!n[rye.WIDEVINE]&&r&&n.push(rye.WIDEVINE),n}const uye=null!=tye&&null!=(dye=tye.navigator)&&dye.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;var dye;function hye(e){const t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),r=String.fromCharCode.apply(null,Array.from(t)),n=r.substring(r.indexOf("<"),r.length),i=(new DOMParser).parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(i){const e=i.childNodes[0]?i.childNodes[0].nodeValue:i.getAttribute("VALUE");if(e){const t=Xme(e).subarray(0,16);return Zme(t),t}}return null}let fye={};class pye{static clearKeyUriToKeyIdMap(){fye={}}static setKeyIdForUri(e,t){fye[e]=t}static addKeyIdForUri(e){const t=Object.keys(fye).length%Number.MAX_SAFE_INTEGER,r=new Uint8Array(16);return new DataView(r.buffer,12,4).setUint32(0,t),fye[e]=r,r}constructor(e,t,r,n=[1],i=null,s){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=r,this.keyFormatVersions=n,this.iv=i,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&!Qme(e),null!=s&&s.startsWith("0x")&&(this.keyId=new Uint8Array(hpe(s)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&Gme(e.keyFormatVersions,this.keyFormatVersions)&&Wme(e.iv,this.iv)&&Wme(e.keyId,this.keyId)}isSupported(){if(this.method){if(Qme(this.method)||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case iye:case aye:case sye:case nye:return-1!==["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e,t){if(!this.encrypted||!this.uri)return null;if(Qme(this.method)){let t=this.iv;t||("number"!=typeof e&&(ope.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),t=function(e){const t=new Uint8Array(16);for(let r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}(e));return new pye(this.method,this.uri,"identity",this.keyFormatVersions,t)}if(this.keyId){const e=fye[this.uri];if(e&&!Gme(this.keyId,e)&&pye.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const r=eye(this.uri);if(r)switch(this.keyFormat){case aye:if(this.pssh=r,!this.keyId){const e=function(e){const t=[];if(e instanceof ArrayBuffer){const r=e.byteLength;let n=0;for(;n+32<r;){const r=rge(new DataView(e,n));t.push(r),n+=r.size}}return t}(r.buffer);if(e.length){var n;const t=e[0];this.keyId=null!=(n=t.kids)&&n.length?t.kids[0]:null}}this.keyId||(this.keyId=gye(t));break;case sye:{const e=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=tge(e,0,r),this.keyId=hye(r);break}default:{let e=r.subarray(0,16);if(16!==e.length){const t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e;break}}if(!this.keyId||16!==this.keyId.byteLength){let e;e=function(e){const t=null==e?void 0:e[aye];if(t)return t.keyId;return null}(t),e||(e=gye(t),e||(e=fye[this.uri])),e&&(this.keyId=e,pye.setKeyIdForUri(this.uri,e))}return this}}function gye(e){const t=null==e?void 0:e[sye];if(t){const e=eye(t.uri);if(e)return hye(e)}return null}const mye=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,yye=/#EXT-X-MEDIA:(.*)/g,vye=/^#EXT(?:INF|-X-TARGETDURATION):/m,bye=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),wye=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class xye{static findGroup(e,t){for(let r=0;r<e.length;r++){const n=e[r];if(n.id===t)return n}}static resolve(e,t){return xpe.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return vye.test(e)}static parseMasterPlaylist(e,t){const r={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:Mme(e)},n=[];if(mye.lastIndex=0,!e.startsWith("#EXTM3U"))return r.playlistParsingError=new Error("no EXTM3U delimiter"),r;let i;for(;null!=(i=mye.exec(e));)if(i[1]){var s;const e=new qme(i[1],r),a=Fme(r,i[2]),o={attrs:e,bitrate:e.decimalInteger("BANDWIDTH")||e.decimalInteger("AVERAGE-BANDWIDTH"),name:e.NAME,url:xye.resolve(a,t)},l=e.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),Aye(e.CODECS,o);const c=e["SUPPLEMENTAL-CODECS"];c&&(o.supplemental={},Aye(c,o.supplemental)),null!=(s=o.unknownCodecs)&&s.length||n.push(o),r.levels.push(o)}else if(i[3]){const e=i[3],n=i[4];switch(e){case"SESSION-DATA":{const e=new qme(n,r),t=e["DATA-ID"];t&&(null===r.sessionData&&(r.sessionData={}),r.sessionData[t]=e);break}case"SESSION-KEY":{const e=Tye(n,t,r);e.encrypted&&e.isSupported()?(null===r.sessionKeys&&(r.sessionKeys=[]),r.sessionKeys.push(e)):ope.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${n}"`);break}case"DEFINE":Ume(r,new qme(n,r),t);break;case"CONTENT-STEERING":{const e=new qme(n,r);r.contentSteering={uri:xye.resolve(e["SERVER-URI"],t),pathwayId:e["PATHWAY-ID"]||"."};break}case"START":r.startTimeOffset=kye(n)}}const a=n.length>0&&n.length<r.levels.length;return r.levels=a?n:r.levels,0===r.levels.length&&(r.playlistParsingError=new Error("no levels found in manifest")),r}static parseMasterPlaylistMedia(e,t,r){let n;const i={},s=r.levels,a={AUDIO:s.map((e=>({id:e.attrs.AUDIO,audioCodec:e.audioCodec}))),SUBTITLES:s.map((e=>({id:e.attrs.SUBTITLES,textCodec:e.textCodec}))),"CLOSED-CAPTIONS":[]};let o=0;for(yye.lastIndex=0;null!==(n=yye.exec(e));){const e=new qme(n[1],r),s=e.TYPE;if(s){const r=a[s],n=i[s]||[];i[s]=n;const l=e.LANGUAGE,c=e["ASSOC-LANGUAGE"],u=e.CHANNELS,d=e.CHARACTERISTICS,h=e["INSTREAM-ID"],f={attrs:e,bitrate:0,id:o++,groupId:e["GROUP-ID"]||"",name:e.NAME||l||"",type:s,default:e.bool("DEFAULT"),autoselect:e.bool("AUTOSELECT"),forced:e.bool("FORCED"),lang:l,url:e.URI?xye.resolve(e.URI,t):""};if(c&&(f.assocLang=c),u&&(f.channels=u),d&&(f.characteristics=d),h&&(f.instreamId=h),null!=r&&r.length){const e=xye.findGroup(r,f.groupId)||r[0];_ye(f,e,"audioCodec"),_ye(f,e,"textCodec")}n.push(f)}}return i}static parseLevelPlaylist(e,t,r,n,i,s){var a;const o={url:t},l=new Hme(t),c=l.fragments,u=[];let d,h,f,p,g=null,m=0,y=0,v=0,b=0,w=0,x=null,S=new Cpe(n,o),E=-1,T=!1,k=null;if(bye.lastIndex=0,l.m3u8=e,l.hasVariableRefs=Mme(e),"#EXTM3U"!==(null==(a=bye.exec(e))?void 0:a[0]))return l.playlistParsingError=new Error("Missing format identifier #EXTM3U"),l;for(;null!==(d=bye.exec(e));){T&&(T=!1,S=new Cpe(n,o),S.playlistOffset=v,S.setStart(v),S.sn=m,S.cc=b,w&&(S.bitrate=w),S.level=r,g&&(S.initSegment=g,g.rawProgramDateTime&&(S.rawProgramDateTime=g.rawProgramDateTime,g.rawProgramDateTime=null),k&&(S.setByteRange(k),k=null)));const e=d[1];if(e){S.duration=parseFloat(e);const t=(" "+d[2]).slice(1);S.title=t||null,S.tagList.push(t?["INF",e,t]:["INF",e])}else if(d[3]){if(Lfe(S.duration)){S.playlistOffset=v,S.setStart(v),f&&Dye(S,f,l),S.sn=m,S.level=r,S.cc=b,c.push(S);const e=(" "+d[3]).slice(1);S.relurl=Fme(l,e),Cye(S,x,u),x=S,v+=S.duration,m++,y=0,T=!0}}else{if(d=d[0].match(wye),!d){ope.warn("No matches on slow regex match for level playlist!");continue}for(h=1;h<d.length&&void 0===d[h];h++);const e=(" "+d[h]).slice(1),i=(" "+d[h+1]).slice(1),a=d[h+2]?(" "+d[h+2]).slice(1):null;switch(e){case"BYTERANGE":x?S.setByteRange(i,x):S.setByteRange(i);break;case"PROGRAM-DATE-TIME":S.rawProgramDateTime=i,S.tagList.push(["PROGRAM-DATE-TIME",i]),-1===E&&(E=c.length);break;case"PLAYLIST-TYPE":l.type&&Rye(l,e,d),l.type=i.toUpperCase();break;case"MEDIA-SEQUENCE":0!==l.startSN?Rye(l,e,d):c.length>0&&Iye(l,e,d),m=l.startSN=parseInt(i);break;case"SKIP":{l.skippedSegments&&Rye(l,e,d);const t=new qme(i,l),r=t.decimalInteger("SKIPPED-SEGMENTS");if(Lfe(r)){l.skippedSegments+=r;for(let e=r;e--;)c.push(null);m+=r}const n=t.enumeratedString("RECENTLY-REMOVED-DATERANGES");n&&(l.recentlyRemovedDateranges=(l.recentlyRemovedDateranges||[]).concat(n.split("\t")));break}case"TARGETDURATION":0!==l.targetduration&&Rye(l,e,d),l.targetduration=Math.max(parseInt(i),1);break;case"VERSION":null!==l.version&&Rye(l,e,d),l.version=parseInt(i);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":l.live||Rye(l,e,d),l.live=!1;break;case"#":(i||a)&&S.tagList.push(a?[i,a]:[i]);break;case"DISCONTINUITY":b++,S.tagList.push(["DIS"]);break;case"GAP":S.gap=!0,S.tagList.push([e]);break;case"BITRATE":S.tagList.push([e,i]),w=1e3*parseInt(i),Lfe(w)?S.bitrate=w:w=0;break;case"DATERANGE":{const e=new qme(i,l),t=new Kme(e,l.dateRanges[e.ID],l.dateRangeTagCount);l.dateRangeTagCount++,t.isValid||l.skippedSegments?l.dateRanges[t.id]=t:ope.warn(`Ignoring invalid DATERANGE tag: "${i}"`),S.tagList.push(["EXT-X-DATERANGE",i]);break}case"DEFINE":{const e=new qme(i,l);"IMPORT"in e?Bme(l,e,s):Ume(l,e,t)}break;case"DISCONTINUITY-SEQUENCE":0!==l.startCC?Rye(l,e,d):c.length>0&&Iye(l,e,d),l.startCC=b=parseInt(i);break;case"KEY":{const e=Tye(i,t,l);if(e.isSupported()){if("NONE"===e.method){f=void 0;break}f||(f={});const t=f[e.keyFormat];null!=t&&t.matches(e)||(t&&(f=Jfe({},f)),f[e.keyFormat]=e)}else ope.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${i}"`);break}case"START":l.startTimeOffset=kye(i);break;case"MAP":{const e=new qme(i,l);if(S.duration){const t=new Cpe(n,o);Pye(t,e,r,f),g=t,S.initSegment=g,g.rawProgramDateTime&&!S.rawProgramDateTime&&(S.rawProgramDateTime=g.rawProgramDateTime)}else{const t=S.byteRangeEndOffset;if(t){const e=S.byteRangeStartOffset;k=`${t-e}@${e}`}else k=null;Pye(S,e,r,f),g=S,T=!0}g.cc=b;break}case"SERVER-CONTROL":p&&Rye(l,e,d),p=new qme(i),l.canBlockReload=p.bool("CAN-BLOCK-RELOAD"),l.canSkipUntil=p.optionalFloat("CAN-SKIP-UNTIL",0),l.canSkipDateRanges=l.canSkipUntil>0&&p.bool("CAN-SKIP-DATERANGES"),l.partHoldBack=p.optionalFloat("PART-HOLD-BACK",0),l.holdBack=p.optionalFloat("HOLD-BACK",0);break;case"PART-INF":{l.partTarget&&Rye(l,e,d);const t=new qme(i);l.partTarget=t.decimalFloatingPoint("PART-TARGET");break}case"PART":{let e=l.partList;e||(e=l.partList=[]);const t=y>0?e[e.length-1]:void 0,r=y++,n=new qme(i,l),s=new Ppe(n,S,o,r,t);e.push(s),S.duration+=s.duration;break}case"PRELOAD-HINT":{const e=new qme(i,l);l.preloadHint=e;break}case"RENDITION-REPORT":{const e=new qme(i,l);l.renditionReports=l.renditionReports||[],l.renditionReports.push(e);break}default:ope.warn(`line parsed but not handled: ${d}`)}}}x&&!x.relurl?(c.pop(),v-=x.duration,l.partList&&(l.fragmentHint=x)):l.partList&&(Cye(S,x,u),S.cc=b,l.fragmentHint=S,f&&Dye(S,f,l)),l.targetduration||(l.playlistParsingError=new Error("Missing Target Duration"));const A=c.length,_=c[0],C=c[A-1];if(v+=l.skippedSegments*l.targetduration,v>0&&A&&C){l.averagetargetduration=v/A;const e=C.sn;l.endSN="initSegment"!==e?e:0,l.live||(C.endList=!0),E>0&&(!function(e,t){let r=e[t];for(let n=t;n--;){const t=e[n];if(!t)return;t.programDateTime=r.programDateTime-1e3*t.duration,r=t}}(c,E),_&&u.unshift(_))}return l.fragmentHint&&(v+=l.fragmentHint.duration),l.totalduration=v,u.length&&l.dateRangeTagCount&&_&&Sye(u,l),l.endCC=b,l}}function Sye(e,t){let r=e.length;if(!r){if(!t.hasProgramDateTime)return;{const n=t.fragments[t.fragments.length-1];e.push(n),r++}}const n=e[r-1],i=t.live?1/0:t.totalduration,s=Object.keys(t.dateRanges);for(let o=s.length;o--;){const l=t.dateRanges[s[o]],c=l.startDate.getTime();l.tagAnchor=n.ref;for(let n=r;n--;){var a;if((null==(a=e[n])?void 0:a.sn)<t.startSN)break;const r=Eye(t,c,e,n,i);if(-1!==r){l.tagAnchor=t.fragments[r].ref;break}}}}function Eye(e,t,r,n,i){const s=r[n];if(s){const o=s.programDateTime;if(t>=o||0===n){var a;if(t<=o+1e3*(((null==(a=r[n+1])?void 0:a.start)||i)-s.start)){const i=r[n].sn-e.startSN;if(i<0)return-1;const s=e.fragments;if(s.length>r.length){for(let a=(r[n+1]||s[s.length-1]).sn-e.startSN;a>i;a--){const e=s[a].programDateTime;if(t>=e&&t<e+1e3*s[a].duration)return a}}return i}}}return-1}function Tye(e,t,r){var n,i;const s=new qme(e,r),a=null!=(n=s.METHOD)?n:"",o=s.URI,l=s.hexadecimalInteger("IV"),c=s.KEYFORMATVERSIONS,u=null!=(i=s.KEYFORMAT)?i:"identity";o&&s.IV&&!l&&ope.error(`Invalid IV: ${s.IV}`);const d=o?xye.resolve(o,t):"",h=(c||"1").split("/").map(Number).filter(Number.isFinite);return new pye(a,d,u,h,l,s.KEYID)}function kye(e){const t=new qme(e).decimalFloatingPoint("TIME-OFFSET");return Lfe(t)?t:null}function Aye(e,t){let r=(e||"").split(/[ ,]+/).filter((e=>e));["video","audio","text"].forEach((e=>{const n=r.filter((t=>sge(t,e)));n.length&&(t[`${e}Codec`]=n.map((e=>e.split("/")[0])).join(","),r=r.filter((e=>-1===n.indexOf(e))))})),t.unknownCodecs=r}function _ye(e,t,r){const n=t[r];n&&(e[r]=n)}function Cye(e,t,r){e.rawProgramDateTime?r.push(e):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime)}function Pye(e,t,r,n){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=r,e.sn="initSegment",n&&(e.levelkeys=n),e.initSegment=null}function Dye(e,t,r){e.levelkeys=t;const{encryptedFragments:n}=r;n.length&&n[n.length-1].levelkeys===t||!Object.keys(t).some((e=>t[e].isCommonEncryption))||n.push(e)}function Rye(e,t,r){e.playlistParsingError=new Error(`#EXT-X-${t} must not appear more than once (${r[0]})`)}function Iye(e,t,r){e.playlistParsingError=new Error(`#EXT-X-${t} must appear before the first Media Segment (${r[0]})`)}function Oye(e,t){const r=t.startPTS;if(Lfe(r)){let n,i=0;t.sn>e.sn?(i=r-e.start,n=e):(i=e.start-r,n=t),n.duration!==i&&n.setDuration(i)}else if(t.sn>e.sn){e.cc===t.cc&&e.minEndPTS?t.setStart(e.start+(e.minEndPTS-e.start)):t.setStart(e.start+e.duration)}else t.setStart(Math.max(e.start-t.duration,0))}function Nye(e,t,r,n,i,s,a){n-r<=0&&(a.warn("Fragment should have a positive duration",t),n=r+t.duration,s=i+t.duration);let o=r,l=n;const c=t.startPTS,u=t.endPTS;if(Lfe(c)){const d=Math.abs(c-r);e&&d>e.totalduration?a.warn(`media timestamps and playlist times differ by ${d}s for level ${t.level} ${e.url}`):Lfe(t.deltaPTS)?t.deltaPTS=Math.max(d,t.deltaPTS):t.deltaPTS=d,o=Math.max(r,c),r=Math.min(r,c),i=void 0!==t.startDTS?Math.min(i,t.startDTS):i,l=Math.min(n,u),n=Math.max(n,u),s=void 0!==t.endDTS?Math.max(s,t.endDTS):s}const d=r-t.start;0!==t.start&&t.setStart(r),t.setDuration(n-t.start),t.startPTS=r,t.maxStartPTS=o,t.startDTS=i,t.endPTS=n,t.minEndPTS=l,t.endDTS=s;const h=t.sn;if(!e||h<e.startSN||h>e.endSN)return 0;let f;const p=h-e.startSN,g=e.fragments;for(g[p]=t,f=p;f>0;f--)Oye(g[f],g[f-1]);for(f=p;f<g.length-1;f++)Oye(g[f],g[f+1]);return e.fragmentHint&&Oye(g[g.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,d}function jye(e,t,r){if(e===t)return;let n=null;const i=e.fragments;for(let u=i.length-1;u>=0;u--){const e=i[u].initSegment;if(e){n=e;break}}let s;e.fragmentHint&&delete e.fragmentHint.endPTS,function(e,t,r){const n=t.skippedSegments,i=Math.max(e.startSN,t.startSN)-t.startSN,s=(e.fragmentHint?1:0)+(n?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,a=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let c=i;c<=s;c++){const i=l[a+c];let s=o[c];if(n&&!s&&i&&(s=t.fragments[c]=i),i&&s){r(i,s,c,o);const n=i.relurl,a=s.relurl;if(n&&Vye(n,a))return void(t.playlistParsingError=Lye(`media sequence mismatch ${s.sn}:`,e,t,i,s));if(i.cc!==s.cc)return void(t.playlistParsingError=Lye(`discontinuity sequence mismatch (${i.cc}!=${s.cc})`,e,t,i,s))}}}(e,t,((e,r,i,a)=>{if((!t.startCC||t.skippedSegments)&&r.cc!==e.cc){const n=e.cc-r.cc;for(let e=i;e<a.length;e++)a[e].cc+=n;t.endCC=a[a.length-1].cc}Lfe(e.startPTS)&&Lfe(e.endPTS)&&(r.setStart(r.startPTS=e.startPTS),r.startDTS=e.startDTS,r.maxStartPTS=e.maxStartPTS,r.endPTS=e.endPTS,r.endDTS=e.endDTS,r.minEndPTS=e.minEndPTS,r.setDuration(e.endPTS-e.startPTS),r.duration&&(s=r),t.PTSKnown=t.alignedSliding=!0),e.hasStreams&&(r.elementaryStreams=e.elementaryStreams),r.loader=e.loader,e.hasStats&&(r.stats=e.stats),e.initSegment&&(r.initSegment=e.initSegment,n=e.initSegment)}));const a=t.fragments,o=t.fragmentHint?a.concat(t.fragmentHint):a;if(n&&o.forEach((e=>{var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=n)?void 0:t.relurl)||(e.initSegment=n)})),t.skippedSegments){if(t.deltaUpdateFailed=a.some((e=>!e)),t.deltaUpdateFailed){r.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)a.shift();t.startSN=a[0].sn}else{t.canSkipDateRanges&&(t.dateRanges=function(e,t,r){const{dateRanges:n,recentlyRemovedDateranges:i}=t,s=Jfe({},e);i&&i.forEach((e=>{delete s[e]}));const a=Object.keys(s).length;if(!a)return n;return Object.keys(n).forEach((e=>{const t=s[e],i=new Kme(n[e].attr,t);i.isValid?(s[e]=i,t||(i.tagOrder+=a)):r.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Lge(n[e].attr)}"`)})),s}(e.dateRanges,t,r));const n=e.fragments.filter((e=>e.rawProgramDateTime));if(e.hasProgramDateTime&&!t.hasProgramDateTime)for(let e=1;e<o.length;e++)null===o[e].programDateTime&&Cye(o[e],o[e-1],n);Sye(n,t)}t.endCC=a[a.length-1].cc}if(!t.startCC){var l;const r=Bye(e,t.startSN-1);t.startCC=null!=(l=null==r?void 0:r.cc)?l:a[0].cc}!function(e,t,r){if(e&&t){let n=0;for(let i=0,s=e.length;i<=s;i++){const s=e[i],a=t[i+n];s&&a&&s.index===a.index&&s.fragment.sn===a.fragment.sn?r(s,a):n--}}}(e.partList,t.partList,((e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),s?Nye(t,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS,r):Mye(e,t),a.length&&(t.totalduration=t.edge-a[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;const c=t.advancedDateTime;if(t.advanced&&c){const e=t.edge;t.driftStart||(t.driftStartTime=c,t.driftStart=e),t.driftEndTime=c,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime;-1===t.requestScheduled&&(t.requestScheduled=e.requestScheduled)}function Lye(e,t,r,n,i){return new Error(`${e} ${i.url}\nPlaylist starting @${t.startSN}\n${t.m3u8}\n\nPlaylist starting @${r.startSN}\n${r.m3u8}`)}function Mye(e,t,r=!0){const n=t.startSN+t.skippedSegments-e.startSN,i=e.fragments,s=n>=0;let a=0;if(s&&n<i.length)a=i[n].start;else if(s&&t.startSN===e.endSN+1)a=e.fragmentEnd;else if(s&&r)a=e.fragmentStart+n*t.levelTargetDuration;else{if(t.skippedSegments||0!==t.fragmentStart)return;a=e.fragmentStart}Fye(t,a)}function Fye(e,t){if(t){const r=e.fragments;for(let n=e.skippedSegments;n<r.length;n++)r[n].addStart(t);e.fragmentHint&&e.fragmentHint.addStart(t)}}function Uye(e,t=1/0){let r=1e3*e.targetduration;if(e.updated){const n=e.fragments,i=4;if(n.length&&r*i>t){const e=1e3*n[n.length-1].duration;e<r&&(r=e)}}else r/=2;return Math.round(r)}function Bye(e,t,r){if(!e)return null;let n=e.fragments[t-e.startSN];return n||(n=e.fragmentHint,n&&n.sn===t?n:t<e.startSN&&r&&r.sn===t?r:null)}function $ye(e,t,r){return e?zye(e.partList,t,r):null}function zye(e,t,r){if(e)for(let n=e.length;n--;){const i=e[n];if(i.index===r&&i.fragment.sn===t)return i}return null}function qye(e){e.forEach(((e,t)=>{var r;null==(r=e.details)||r.fragments.forEach((e=>{e.level=t,e.initSegment&&(e.initSegment.level=t)}))}))}function Vye(e,t){return!(e===t||!t)&&Kye(e)!==Kye(t)}function Kye(e){return e.replace(/\?[^?]*$/,"")}function Hye(e,t){for(let n=0,i=e.length;n<i;n++){var r;if((null==(r=e[n])?void 0:r.cc)===t)return e[n]}return null}function Gye(e,t){const r=e.start+t;e.startPTS=r,e.setStart(r),e.endPTS=r+e.duration}function Wye(e,t){const r=t.fragments;for(let n=0,i=r.length;n<i;n++)Gye(r[n],e);t.fragmentHint&&Gye(t.fragmentHint,e),t.alignedSliding=!0}function Qye(e,t){if(!function(e,t){return!!(e&&t.startCC<e.endCC&&t.endCC>e.startCC)}(t,e))return;const r=Math.min(t.endCC,e.endCC),n=Hye(t.fragments,r),i=Hye(e.fragments,r);if(!n||!i)return;ope.log(`Aligning playlist at start of dicontinuity sequence ${r}`);Wye(n.start-i.start,e)}function Yye(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;const r=e.fragments,n=t.fragments;if(!r.length||!n.length)return;let i,s;const a=Math.min(t.endCC,e.endCC);t.startCC<a&&e.startCC<a&&(i=Hye(n,a),s=Hye(r,a)),i&&s||(i=n[Math.floor(n.length/2)],s=Hye(r,i.cc)||r[Math.floor(r.length/2)]);const o=i.programDateTime,l=s.programDateTime;if(!o||!l)return;Wye((l-o)/1e3-(s.start-i.start),e)}function Xye(e,t,r){Jye(e,t,r),e.addEventListener(t,r)}function Jye(e,t,r){e.removeEventListener(t,r)}const Zye=function(e){let t="";const r=e.length;for(let n=0;n<r;n++)t+=`[${e.start(n).toFixed(3)}-${e.end(n).toFixed(3)}]`;return t},eve="STOPPED",tve="IDLE",rve="KEY_LOADING",nve="FRAG_LOADING",ive="FRAG_LOADING_WAITING_RETRY",sve="WAITING_TRACK",ave="PARSING",ove="PARSED",lve="ENDED",cve="ERROR",uve="WAITING_INIT_PTS",dve="WAITING_LEVEL";class hve extends Ime{constructor(e,t,r,n,i){super(n,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=eve,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:e,fragCurrent:t,media:r,mediaBuffer:n,state:i}=this,s=r?r.currentTime:0,a=jme.bufferInfo(n||r,s,e.maxBufferHole),o=!a.len;if(this.log(`Media seeking to ${Lfe(s)?s.toFixed(3):s}, state: ${i}, ${o?"out of":"in"} buffer`),this.state===lve)this.resetLoadingState();else if(t){const r=e.maxFragLookUpTolerance,n=t.start-r,i=t.start+t.duration+r;if(o||i<a.start||n>a.end){const e=s>i;(s<n||e)&&(e&&t.loader&&(this.log(`Cancelling fragment load for seek (sn: ${t.sn})`),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(r){this.fragmentTracker.removeFragmentsInRange(s,1/0,this.playlistType,!0);if(s>this.lastCurrentTime&&(this.lastCurrentTime=s),!this.loadingParts){const e=Math.max(a.end,s),t=this.shouldLoadParts(this.getLevelDetails(),e);t&&(this.log(`LL-Part loading ON after seeking to ${s.toFixed(2)} with buffer @${e.toFixed(2)}`),this.loadingParts=t)}}this.hls.hasEnoughToStart||(this.log(`Setting ${o?"startPosition":"nextLoadPosition"} to ${s} for seek without enough to start`),this.nextLoadPosition=s,o&&(this.startPosition=s)),o&&this.state===tve&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=i,this.hls=e,this.fragmentLoader=new Cme(e.config),this.keyLoader=r,this.fragmentTracker=t,this.config=e.config,this.decrypter=new Ame(e.config)}registerListeners(){const{hls:e}=this;e.on($fe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($fe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.on($fe.MANIFEST_LOADED,this.onManifestLoaded,this),e.on($fe.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off($fe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($fe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.off($fe.MANIFEST_LOADED,this.onManifestLoaded,this),e.off($fe.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===eve)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=eve}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return-1===t&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const r=e.end||0,n=this.config.timelineOffset||0;if(r<=n)return!1;const i=e.buffered;this.config.maxBufferHole&&i&&i.length>1&&(e=jme.bufferedInfo(i,e.start,0));const s=e.nextStart;if(s&&s>n&&s<t.edge)return!1;if(this.media.currentTime<e.start)return!1;const a=t.partList;if(null!=a&&a.length){const e=a[a.length-1];return jme.isBuffered(this.media,e.start+e.duration/2)}const o=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(o)}getLevelDetails(){if(this.levels&&null!==this.levelLastLoaded)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;var t;return e?(null==(t=this.getLevelDetails())?void 0:t.appliedTimelineOffset)||e:0}onMediaAttached(e,t){const r=this.media=this.mediaBuffer=t.media;Xye(r,"seeking",this.onMediaSeeking),Xye(r,"ended",this.onMediaEnded);const n=this.config;this.levels&&n.autoStartLoad&&this.state===eve&&this.startLoad(n.startPosition)}onMediaDetaching(e,t){const r=!!t.transferMedia,n=this.media;if(null!==n){if(n.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),Jye(n,"seeking",this.onMediaSeeking),Jye(n,"ended",this.onMediaEnded),this.keyLoader&&!r&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,r)return this.resetLoadingState(),void this.resetTransmuxer();this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=eve,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,r){this.startFragRequested=!0,this._loadFragForPlayback(e,t,r)}_loadFragForPlayback(e,t,r){this._doFragLoad(e,t,r,(e=>{const t=e.frag;if(this.fragContextChanged(t))return this.warn(`${t.type} sn: ${t.sn}${e.part?" part: "+e.part.index:""} of ${this.fragInfo(t,!1,e.part)}) was dropped during download.`),void this.fragmentTracker.removeFragment(t);t.stats.chunkCount++,this._handleFragmentLoadProgress(e)})).then((e=>{if(!e)return;const t=this.state,r=e.frag;this.fragContextChanged(r)?(t===nve||!this.fragCurrent&&t===ave)&&(this.fragmentTracker.removeFragment(r),this.state=tve):("payload"in e&&(this.log(`Loaded ${r.type} sn: ${r.sn} of ${this.playlistLabel()} ${r.level}`),this.hls.trigger($fe.FRAG_LOADED,e)),this._handleFragmentLoadComplete(e))})).catch((t=>{this.state!==eve&&this.state!==cve&&(this.warn(`Frag error: ${(null==t?void 0:t.message)||t}`),this.resetFragmentLoading(e))}))}clearTrackerIfNeeded(e){var t;const{fragmentTracker:r}=this;if(r.getState(e)===pme){const t=e.type,n=this.getFwdBufferInfo(this.mediaBuffer,t),i=Math.max(e.duration,n?n.len:this.config.maxBufferLength),s=this.backtrackFragment;(1===(s?e.sn-s.sn:0)||this.reduceMaxBufferLength(i,e.duration))&&r.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===gme&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(null==t?void 0:t.live)&&"EVENT"!==t.type&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,r=null){if(!(e-t))return;const n={startOffset:e,endOffset:t,type:r};this.hls.trigger($fe.BUFFER_FLUSHING,n)}_loadInitSegment(e,t){this._doFragLoad(e,t).then((e=>{const t=null==e?void 0:e.frag;if(!t||this.fragContextChanged(t)||!this.levels)throw new Error("init load aborted");return e})).then((e=>{const{hls:t}=this,{frag:r,payload:n}=e,i=r.decryptdata;if(n&&n.byteLength>0&&null!=i&&i.key&&i.iv&&Qme(i.method)){const s=self.performance.now();return this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer,Yme(i.method)).catch((e=>{throw t.trigger($fe.ERROR,{type:Ufe.MEDIA_ERROR,details:Bfe.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:r}),e})).then((n=>{const i=self.performance.now();return t.trigger($fe.FRAG_DECRYPTED,{frag:r,payload:n,stats:{tstart:s,tdecrypt:i}}),e.payload=n,this.completeInitSegmentLoad(e)}))}return this.completeInitSegmentLoad(e)})).catch((t=>{this.state!==eve&&this.state!==cve&&(this.warn(t),this.resetFragmentLoading(e))}))}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const r=e.frag.stats;this.state!==eve&&(this.state=tve),e.frag.data=new Uint8Array(e.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var r,n;const i=e.tracks;if(i&&!t.encrypted&&(null!=(r=i.audio)&&r.encrypted||null!=(n=i.video)&&n.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const e=this.media,r=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${e?"attached mediaKeys: "+e.mediaKeys:"detached"})`);return this.warn(r.message),!e||e.mediaKeys?!1:(this.hls.trigger($fe.ERROR,{type:Ufe.KEY_SYSTEM_ERROR,details:Bfe.KEY_SYSTEM_NO_KEYS,fatal:!1,error:r,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const r=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${r?Zye(jme.getBuffered(r)):"(detached)"})`),_pe(e)){var n;if(e.type!==Wfe){const t=e.elementaryStreams;if(!Object.keys(t).some((e=>!!t[e])))return void(this.state=tve)}const t=null==(n=this.levels)?void 0:n[e.level];null!=t&&t.fragmentError&&(this.log(`Resetting level fragment error count of ${t.fragmentError} on frag buffered`),t.fragmentError=0)}this.state=tve}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:r,part:n,partsLoaded:i}=e,s=!i||0===i.length||i.some((e=>!e)),a=new Ome(r.level,r.sn,r.stats.chunkCount+1,0,n?n.index:-1,!s);t.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,r=null,n){var i;this.fragCurrent=e;const s=t.details;if(!this.levels||!s)throw new Error(`frag load aborted, missing level${s?"":" detail"}s`);let a=null;if(!e.encrypted||null!=(i=e.decryptdata)&&i.key)e.encrypted||(a=this.keyLoader.loadClear(e,s.encryptedFragments,this.startFragRequested),a&&this.log("[eme] blocking frag load until media-keys acquired"));else if(this.log(`Loading key for ${e.sn} of [${s.startSN}-${s.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=rve,this.fragCurrent=e,a=this.keyLoader.load(e).then((e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger($fe.KEY_LOADED,e),this.state===rve&&(this.state=tve),e})),this.hls.trigger($fe.KEY_LOADING,{frag:e}),null===this.fragCurrent)return this.log("context changed in KEY_LOADING"),Promise.resolve(null);const o=this.fragPrevious;if(_pe(e)&&(!o||e.sn!==o.sn)){const r=this.shouldLoadParts(t.details,e.end);r!==this.loadingParts&&(this.log(`LL-Part loading ${r?"ON":"OFF"} loading sn ${null==o?void 0:o.sn}->${e.sn}`),this.loadingParts=r)}if(r=Math.max(e.start,r||0),this.loadingParts&&_pe(e)){const i=s.partList;if(i&&n){r>s.fragmentEnd&&s.fragmentHint&&(e=s.fragmentHint);const o=this.getNextPart(i,e,r);if(o>-1){const l=i[o];let c;return e=this.fragCurrent=l.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${l.index} (${o}/${i.length-1}) of ${this.fragInfo(e,!1,l)}) cc: ${e.cc} [${s.startSN}-${s.endSN}], target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=l.start+l.duration,this.state=nve,c=a?a.then((r=>!r||this.fragContextChanged(r.frag)?null:this.doFragPartsLoad(e,l,t,n))).catch((e=>this.handleFragLoadError(e))):this.doFragPartsLoad(e,l,t,n).catch((e=>this.handleFragLoadError(e))),this.hls.trigger($fe.FRAG_LOADING,{frag:e,part:l,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):c}if(!e.url||this.loadedEndOfParts(i,r))return Promise.resolve(null)}}var l;if(_pe(e)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${r.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${null==(l=s.partList)?void 0:l.filter((e=>e.loaded)).map((e=>`[${e.start}-${e.end}]`))}`),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+s.startSN+"-"+s.endSN+"]"}, target: ${parseFloat(r.toFixed(3))}`),Lfe(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=nve;const c=this.config.progressive&&e.type!==Wfe;let u;return u=c&&a?a.then((t=>!t||this.fragContextChanged(t.frag)?null:this.fragmentLoader.load(e,n))).catch((e=>this.handleFragLoadError(e))):Promise.all([this.fragmentLoader.load(e,c?n:void 0),a]).then((([e])=>(!c&&n&&n(e),e))).catch((e=>this.handleFragLoadError(e))),this.hls.trigger($fe.FRAG_LOADING,{frag:e,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):u}doFragPartsLoad(e,t,r,n){return new Promise(((i,s)=>{var a;const o=[],l=null==(a=r.details)?void 0:a.partList,c=t=>{this.fragmentLoader.loadPart(e,t,n).then((n=>{o[t.index]=n;const s=n.part;this.hls.trigger($fe.FRAG_LOADED,n);const a=$ye(r.details,e.sn,t.index+1)||zye(l,e.sn,t.index+1);if(!a)return i({frag:e,part:s,partsLoaded:o});c(a)})).catch(s)};c(t)}))}handleFragLoadError(e){if("data"in e){const t=e.data;t.frag&&t.details===Bfe.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):t.frag&&t.type===Ufe.KEY_SYSTEM_ERROR?(t.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(t.frag)):this.hls.trigger($fe.ERROR,t)}else this.hls.trigger($fe.ERROR,{type:Ufe.OTHER_ERROR,details:Bfe.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==ave)return void(this.fragCurrent||this.state===eve||this.state===cve||(this.state=tve));const{frag:r,part:n,level:i}=t,s=self.performance.now();r.stats.parsing.end=s,n&&(n.stats.parsing.end=s);const a=this.getLevelDetails(),o=a&&r.sn>a.endSN||this.shouldLoadParts(a,r.end);o!==this.loadingParts&&(this.log(`LL-Part loading ${o?"ON":"OFF"} after parsing segment ending @${r.end.toFixed(2)}`),this.loadingParts=o),this.updateLevelTiming(r,n,i,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var r;const i=e.partList[0];if(i.fragment.type===Wfe)return!1;if(t>=i.end+((null==(r=e.fragmentHint)?void 0:r.duration)||0)){var n;if((this.hls.hasEnoughToStart?(null==(n=this.media)?void 0:n.currentTime)||this.lastCurrentTime:this.getLoadPosition())>i.start-i.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:r}=this,{level:n,sn:i,part:s}=e;if(null==t||!t[n])return this.warn(`Levels object was unset while buffering fragment ${i} of ${this.playlistLabel()} ${n}. The current chunk will not be buffered.`),null;const a=t[n],o=a.details,l=s>-1?$ye(o,i,s):null,c=l?l.fragment:Bye(o,i,r);return c?(r&&r!==c&&(c.stats=r.stats),{frag:c,part:l,level:a}):null}bufferFragmentData(e,t,r,n,i){if(this.state!==ave)return;const{data1:s,data2:a}=e;let o=s;if(a&&(o=Qpe(s,a)),!o.length)return;const l=this.initPTS[t.cc],c=l?-l.baseTime/l.timescale:void 0,u={type:e.type,frag:t,part:r,chunkMeta:n,offset:c,parent:t.type,data:o};if(this.hls.trigger($fe.BUFFER_APPENDING,u),e.dropped&&e.independent&&!r){if(i)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!jme.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const r=t.currentTime,n=jme.bufferInfo(t,r,0),i=e.duration,s=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),a=Math.max(Math.min(e.start-s,n.end-s),r+s);e.start-a>s&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,t){var r;const n=this.getLoadPosition();if(!Lfe(n))return null;const i=this.lastCurrentTime>n||null!=(r=this.media)&&r.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,n,t,i)}getFwdBufferInfoAtPos(e,t,r,n){const i=jme.bufferInfo(e,t,n);if(0===i.len&&void 0!==i.nextStart){const s=this.fragmentTracker.getBufferedFrag(t,r);if(s&&(i.nextStart<=s.end||s.gap)){const r=Math.max(Math.min(i.nextStart,s.end)-t,n);return jme.bufferInfo(e,t,r)}}return i}getMaxBufferLength(e){const{config:t}=this;let r;return r=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(r,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const r=this.config,n=Math.max(Math.min(e-t,r.maxBufferLength),t),i=Math.max(e-3*t,r.maxMaxBufferLength/2,n);return i>=n&&(r.maxMaxBufferLength=i,this.warn(`Reduce max buffer length to ${i}s`),!0)}getAppendedFrag(e,t=Hfe){const r=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return r&&"fragment"in r?r.fragment:r}getNextFragment(e,t){const r=t.fragments,n=r.length;if(!n)return null;const{config:i}=this,s=r[0].start,a=i.lowLatencyMode&&!!t.partList;let o=null;if(t.live){const r=i.initialLiveManifestSize;if(n<r)return this.warn(`Not enough fragments to start playback (have: ${n}, need: ${r})`),null;if(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<s){var l;a&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),o=this.getInitialLiveFragment(t);const r=this.hls.startPosition,n=this.hls.liveSyncPosition,i=o?(-1!==r&&r>=s?r:n)||o.start:e;this.log(`Setting startPosition to ${i} to match start frag at live edge. mainStart: ${r} liveSyncPosition: ${n} frag.start: ${null==(l=o)?void 0:l.start}`),this.startPosition=this.nextLoadPosition=i}}else e<=s&&(o=r[0]);if(!o){const r=this.loadingParts?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,r,t)}let c=this.filterReplacedPrimary(o,t);if(!c&&o){const e=o.sn-t.startSN;c=this.filterReplacedPrimary(r[e+1]||null,t)}return this.mapToInitFragWhenRequired(c)}isLoopLoading(e,t){const r=this.fragmentTracker.getState(e);return(r===mme||r===gme&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,r,n,i){let s=null;if(e.gap&&(s=this.getNextFragment(this.nextLoadPosition,t),s&&!s.gap&&r.nextStart)){const e=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,n,0);if(null!==e&&r.len+e.len>=i){const e=s.sn;return this.loopSn!==e&&(this.log(`buffer full after gaps in "${n}" playlist starting at sn: ${e}`),this.loopSn=e),null}}return this.loopSn=void 0,s}get primaryPrefetch(){if(fve(this.config)){var e;if(null==(e=this.hls.interstitialsManager)||null==(e=e.playingItem)?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(fve(this.config)&&e.type!==Wfe){const r=this.hls.interstitialsManager,n=null==r?void 0:r.bufferingItem;if(n){const r=n.event;if(r){if(r.appendInPlace||Math.abs(e.start-n.start)>1||0===n.start)return null}else{if(e.end<=n.start&&!1===(null==t?void 0:t.live))return null;if(e.start>n.end&&n.nextEvent&&(n.nextEvent.appendInPlace||e.start-n.end>1))return null}}const i=null==r?void 0:r.playerQueue;if(i)for(let t=i.length;t--;){const r=i[t].interstitial;if(r.appendInPlace&&e.start>=r.startTime&&e.end<=r.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,r){let n=-1,i=!1,s=!0;for(let a=0,o=e.length;a<o;a++){const o=e[a];if(s=s&&!o.independent,n>-1&&r<o.start)break;const l=o.loaded;l?n=-1:(i||(o.independent||s)&&o.fragment===t)&&(o.fragment!==t&&this.warn(`Need buffer at ${r} but next unloaded part starts at ${o.start}`),n=a),i=l}return n}loadedEndOfParts(e,t){let r;for(let n=e.length;n--;){if(r=e[n],!r.loaded)return!1;if(t>r.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,r=this.fragPrevious;let n=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),n=function(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!Lfe(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;for(let n=0;n<e.length;++n){const i=e[n];if(Wge(t,r,i))return i}return null}(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!n){const i=r.sn+1;if(i>=e.startSN&&i<=e.endSN){const s=t[i-e.startSN];r.cc===s.cc&&(n=s,this.log(`Live playlist, switching playlist, load frag with next SN: ${n.sn}`))}n||(n=Qge(e,r.cc,r.end),n&&this.log(`Live playlist, switching playlist, load frag with same CC: ${n.sn}`))}}else{const t=this.hls.liveSyncPosition;null!==t&&(n=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return n}getFragmentAtPosition(e,t,r){const{config:n}=this;let{fragPrevious:i}=this,{fragments:s,endSN:a}=r;const{fragmentHint:o}=r,{maxFragLookUpTolerance:l}=n,c=r.partList,u=!!(this.loadingParts&&null!=c&&c.length&&o);let d;if(u&&!this.bitrateTest&&c[c.length-1].fragment.sn===o.sn&&(s=s.concat(o),a=o.sn),e<t){var h;d=Hge(i,s,e,e<this.lastCurrentTime||e>t-l||null!=(h=this.media)&&h.paused||!this.startFragRequested?0:l)}else d=s[s.length-1];if(d){const e=d.sn-r.startSN,t=this.fragmentTracker.getState(d);if((t===mme||t===gme&&d.gap)&&(i=d),i&&d.sn===i.sn&&(!u||c[0].fragment.sn>d.sn||!r.live)){if(d.level===i.level){const t=s[e+1];d=d.sn<a&&this.fragmentTracker.getState(t)!==mme?t:null}}}return d}alignPlaylists(e,t,r){const n=e.fragments.length;if(!n)return this.warn("No fragments in live playlist"),0;const i=e.fragmentStart,s=!t,a=e.alignedSliding&&Lfe(i);if(s||!a&&!i){!function(e,t){e&&(Qye(t,e),t.alignedSliding||Yye(t,e),t.alignedSliding||t.skippedSegments||Mye(e,t,!1))}(r,e);const i=e.fragmentStart;return this.log(`Live playlist sliding: ${i.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${n}`),i}return i}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)}setStartPosition(e,t){let r=this.startPosition;r<t&&(r=-1);const n=this.timelineOffset;if(-1===r){const i=null!==this.startTimeOffset,s=i?this.startTimeOffset:e.startTimeOffset;null!==s&&Lfe(s)?(r=t+s,s<0&&(r+=e.edge),r=Math.min(Math.max(t,r),t+e.totalduration),this.log(`Setting startPosition to ${r} for start time offset ${s} found in ${i?"multivariant":"media"} playlist`),this.startPosition=r):e.live?(r=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${r}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=r=0),this.lastCurrentTime=r+n}this.nextLoadPosition=r+n}getLoadPosition(){var e;const{media:t}=this;let r=0;return null!=(e=this.hls)&&e.hasEnoughToStart&&t?r=t.currentTime:this.nextLoadPosition>=0&&(r=this.nextLoadPosition),r}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&_pe(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===ive)||(this.state=tve)}onFragmentOrKeyLoadError(e,t){var r;if(t.chunkMeta&&!t.frag){const e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}const n=t.frag;if(!n||n.type!==e||!this.levels)return;var i;if(this.fragContextChanged(n))return void this.warn(`Frag load error must match current frag to retry ${n.url} > ${null==(i=this.fragCurrent)?void 0:i.url}`);const s=t.details===Bfe.FRAG_GAP;s&&this.fragmentTracker.fragBuffered(n,!0);const a=t.errorAction;if(!a)return void(this.state=cve);const{action:o,flags:l,retryCount:c=0,retryConfig:u}=a,d=!!u,h=d&&o===ome,f=d&&!a.resolved&&l===cme,p=null==(r=this.hls.latestLevelDetails)?void 0:r.live;if(!h&&f&&_pe(n)&&!n.endList&&p&&!Jge(t))this.resetFragmentErrors(e),this.treatAsGap(n),a.resolved=!0;else if((h||f)&&c<u.maxNumRetry){var g;const r=nme(null==(g=t.response)?void 0:g.code),i=eme(u,c);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+i,this.state=ive,a.resolved=!0,r)return this.log("Waiting for connection (offline)"),this.retryDate=1/0,void(t.reason="offline");this.warn(`Fragment ${n.sn} of ${e} ${n.level} errored with ${t.details}, retrying loading ${c+1}/${u.maxNumRetry} in ${i}ms`)}else if(u){if(this.resetFragmentErrors(e),!(c<u.maxNumRetry))return void this.warn(`${t.details} reached or exceeded max retry (${c})`);s||o===ame||(a.resolved=!0)}else this.state=o===sme?dve:cve;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),t=this.retryDate,r=t===1/0;(!t||e>=t||r&&!nme(0))&&(r&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=tve)}reduceLengthAndFlushBuffer(e){if(this.state===ave||this.state===ove){const t=e.frag,r=e.parent,n=this.getFwdBufferInfo(this.mediaBuffer,r),i=n&&n.len>.5;i&&this.reduceMaxBufferLength(n.len,(null==t?void 0:t.duration)||10);const s=!i;return s&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${r} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),s}return!1}resetFragmentErrors(e){e===Gfe&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==eve&&(this.state=tve)}afterBufferFlushed(e,t,r){if(!e)return;const n=jme.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,n,r),this.state===lve&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==eve&&(this.state=tve)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,t=e?e.details:null;null!=t&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${-1===e.level?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,r,n){const i=r.details;if(!i)return void this.warn("level.details undefined");if(!Object.keys(e.elementaryStreams).reduce(((t,s)=>{const a=e.elementaryStreams[s];if(a){const o=a.endPTS-a.startPTS;if(o<=0)return this.warn(`Could not parse fragment ${e.sn} ${s} duration reliably (${o})`),t||!1;const l=n?0:Nye(i,e,a.startPTS,a.endPTS,a.startDTS,a.endDTS,this);return this.hls.trigger($fe.LEVEL_PTS_UPDATED,{details:i,level:r,drift:l,type:s,frag:e,start:a.startPTS,end:a.endPTS}),!0}return t}),!1)){var s;const t=null===(null==(s=this.transmuxer)?void 0:s.error);if((0===r.fragmentError||t&&(r.fragmentError<2||e.endList))&&this.treatAsGap(e,r),t){const t=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(t.message),this.hls.trigger($fe.ERROR,{type:Ufe.MEDIA_ERROR,details:Bfe.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=ove,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger($fe.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===Hfe?"level":"track"}fragInfo(e,t=!0,r){var n,i;return`${this.playlistLabel()} ${e.level} (${r?"part":"frag"}:[${(null!=(n=t&&!r?e.startPTS:(r||e).start)?n:NaN).toFixed(3)}-${(null!=(i=t&&!r?e.endPTS:(r||e).end)?i:NaN).toFixed(3)}]${r&&"main"===e.type?"INDEPENDENT="+(r.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;null==(e=this.transmuxer)||e.reset()}recoverWorkerError(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function fve(e){return!!e.interstitialsController&&!1!==e.enableInterstitialPlayback}class pve{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let r;return e.length?(r=1===e.length?e[0]:function(e,t){const r=new Uint8Array(t);let n=0;for(let i=0;i<e.length;i++){const t=e[i];r.set(t,n),n+=t.length}return r}(e,t),this.reset(),r):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}var gve,mve={exports:{}};var yve=(gve||(gve=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new i(n,s||e,a),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,a=new Array(s);i<s;i++)a[i]=n[i].fn;return a},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,s,a){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,s),!0;case 6:return u.fn.call(u.context,t,n,i,s,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||a(this,s);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(mve)),mve.exports),vve=fpe(yve);const bve="1.6.15",wve={};function xve(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Sve(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Eve(e,t){let r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3],r}function Tve(e,t){const r=t;let n=0;for(;Sve(e,t);){n+=10;n+=Eve(e,t+6),xve(e,t+10)&&(n+=10),t+=n}if(n>0)return e.subarray(r,r+n)}function kve(e,t){return 255===e[t]&&240==(246&e[t+1])}function Ave(e,t){return 1&e[t+1]?7:9}function _ve(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function Cve(e,t){return t+1<e.length&&kve(e,t)}function Pve(e,t){if(Cve(e,t)){const r=Ave(e,t);if(t+r>=e.length)return!1;const n=_ve(e,t);if(n<=r)return!1;const i=t+n;return i===e.length||Cve(e,i)}return!1}function Dve(e,t,r,n,i){if(!e.samplerate){const s=function(e,t,r,n){const i=t[r+2],s=i>>2&15;if(s>12){const t=new Error(`invalid ADTS sampling index:${s}`);return void e.emit($fe.ERROR,$fe.ERROR,{type:Ufe.MEDIA_ERROR,details:Bfe.FRAG_PARSING_ERROR,fatal:!0,error:t,reason:t.message})}const a=1+(i>>6&3),o=t[r+3]>>6&3|(1&i)<<2,l="mp4a.40."+a,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350][s];let u=s;5!==a&&29!==a||(u-=3);const d=[a<<3|(14&u)>>1,(1&u)<<7|o<<3];return ope.log(`manifest codec:${n}, parsed codec:${l}, channels:${o}, rate:${c} (ADTS object type:${a} sampling index:${s})`),{config:d,samplerate:c,channelCount:o,codec:l,parsedCodec:l,manifestCodec:n}}(t,r,n,i);if(!s)return;Jfe(e,s)}}function Rve(e){return 9216e4/e}function Ive(e,t,r,n,i){const s=n+i*Rve(e.samplerate),a=function(e,t){const r=Ave(e,t);if(t+r<=e.length){const n=_ve(e,t)-r;if(n>0)return{headerLength:r,frameLength:n}}}(t,r);let o;if(a){const{frameLength:n,headerLength:i}=a,l=i+n,c=Math.max(0,r+l-t.length);c?(o=new Uint8Array(l-i),o.set(t.subarray(r+i,t.length),0)):o=t.subarray(r+i,r+l);const u={unit:o,pts:s};return c||e.samples.push(u),{sample:u,length:l,missing:c}}const l=t.length-r;o=new Uint8Array(l),o.set(t.subarray(r,t.length),0);return{sample:{unit:o,pts:s},length:l,missing:-1}}function Ove(e,t){return Sve(e,t)&&Eve(e,t+6)+10<=e.length-t}function Nve(e,t=0,r=1/0){return function(e,t,r,n){const i=(s=e,s instanceof ArrayBuffer?s:s.buffer);var s;let a=1;"BYTES_PER_ELEMENT"in n&&(a=n.BYTES_PER_ELEMENT);const o=(h=e,h&&h.buffer instanceof ArrayBuffer&&void 0!==h.byteLength&&void 0!==h.byteOffset?e.byteOffset:0),l=(o+e.byteLength)/a,c=(o+t)/a,u=Math.floor(Math.max(0,Math.min(c,l))),d=Math.floor(Math.min(u+Math.max(r,0),l));var h;return new n(i,u,d-u)}(e,t,r,Uint8Array)}function jve(e){const t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.size<2)return;if(3!==e.data[0])return;const r=e.data.subarray(1).indexOf(0);if(-1===r)return;const n=upe(Nve(e.data,1,r)),i=e.data[2+r],s=e.data.subarray(3+r).indexOf(0);if(-1===s)return;const a=upe(Nve(e.data,3+r,s));let o;var l;return o="--\x3e"===n?upe(Nve(e.data,4+r+s)):(l=e.data.subarray(4+r+s))instanceof ArrayBuffer?l:0==l.byteOffset&&l.byteLength==l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer,t.mimeType=n,t.pictureType=i,t.description=a,t.data=o,t}function Lve(e){return"PRIV"===e.type?function(e){if(e.size<2)return;const t=upe(e.data,!0),r=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:r.buffer}}(e):"W"===e.type[0]?function(e){if("WXXX"===e.type){if(e.size<2)return;let t=1;const r=upe(e.data.subarray(t),!0);t+=r.length+1;const n=upe(e.data.subarray(t));return{key:e.type,info:r,data:n}}const t=upe(e.data);return{key:e.type,info:"",data:t}}(e):"APIC"===e.type?jve(e):function(e){if(e.size<2)return;if("TXXX"===e.type){let t=1;const r=upe(e.data.subarray(t),!0);t+=r.length+1;const n=upe(e.data.subarray(t));return{key:e.type,info:r,data:n}}const t=upe(e.data.subarray(1));return{key:e.type,info:"",data:t}}(e)}function Mve(e){const t=String.fromCharCode(e[0],e[1],e[2],e[3]),r=Eve(e,4);return{type:t,size:r,data:e.subarray(10,10+r)}}function Fve(e){let t=0;const r=[];for(;Sve(e,t);){const n=Eve(e,t+6);e[t+5]>>6&1&&(t+=10),t+=10;const i=t+n;for(;t+10<i;){const n=Mve(e.subarray(t)),i=Lve(n);i&&r.push(i),t+=n.size+10}xve(e,t)&&(t+=10)}return r}function Uve(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}function Bve(e){if(8===e.data.byteLength){const t=new Uint8Array(e.data),r=1&t[3];let n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}}function $ve(e){const t=Fve(e);for(let r=0;r<t.length;r++){const e=t[r];if(Uve(e))return Bve(e)}}let zve=function(e){return e.audioId3="org.id3",e.dateRange="com.apple.quicktime.HLS",e.emsg="https://aomedia.org/emsg/ID3",e.misbklv="urn:misb:KLV:bin:1910.1",e}({});function qve(e="",t=9e4){return{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}class Vve{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,r,n){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,r){}demux(e,t){this.cachedData&&(e=Qpe(this.cachedData,e),this.cachedData=null);let r,n=Tve(e,0),i=n?n.length:0;const s=this._audioTrack,a=this._id3Track,o=n?$ve(n):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&Lfe(o))&&(this.basePTS=Kve(o,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),n&&n.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:zve.audioId3,duration:Number.POSITIVE_INFINITY});i<l;){if(this.canParse(e,i)){const t=this.appendFrame(s,e,i);t?(this.frameIndex++,this.lastPTS=t.sample.pts,i+=t.length,r=i):i=l}else Ove(e,i)?(n=Tve(e,i),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:zve.audioId3,duration:Number.POSITIVE_INFINITY}),i+=n.length,r=i):i++;if(i===l&&r!==l){const t=e.slice(r);this.cachedData?this.cachedData=Qpe(this.cachedData,t):this.cachedData=t}}return{audioTrack:s,videoTrack:qve(),id3Track:a,textTrack:qve()}}demuxSampleAes(e,t,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:qve(),id3Track:this._id3Track,textTrack:qve()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const Kve=(e,t,r)=>{if(Lfe(e))return 90*e;return 9e4*t+(r?9e4*r.baseTime/r.timescale:0)};let Hve=null;const Gve=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Wve=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Qve=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Yve=[0,1,1,4];function Xve(e,t,r,n,i){if(r+24>t.length)return;const s=Jve(t,r);if(s&&r+s.frameLength<=t.length){const a=n+i*(9e4*s.samplesPerFrame/s.sampleRate),o={unit:t.subarray(r,r+s.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=s.channelCount,e.samplerate=s.sampleRate,e.samples.push(o),{sample:o,length:s.frameLength,missing:0}}}function Jve(e,t){const r=e[t+1]>>3&3,n=e[t+1]>>1&3,i=e[t+2]>>4&15,s=e[t+2]>>2&3;if(1!==r&&0!==i&&15!==i&&3!==s){const a=e[t+2]>>1&1,o=e[t+3]>>6,l=1e3*Gve[14*(3===r?3-n:3===n?3:4)+i-1],c=Wve[3*(3===r?0:2===r?1:2)+s],u=3===o?1:2,d=Qve[r][n],h=Yve[n],f=8*d*h,p=Math.floor(d*l/c+a)*h;if(null===Hve){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Hve=e?parseInt(e[1]):0}return!!Hve&&Hve<=87&&2===n&&l>=224e3&&0===o&&(e[t+3]=128|e[t+3]),{sampleRate:c,channelCount:u,frameLength:p,samplesPerFrame:f}}}function Zve(e,t){return!(255!==e[t]||224&~e[t+1]||!(6&e[t+1]))}function ebe(e,t){return t+1<e.length&&Zve(e,t)}function tbe(e,t){if(t+1<e.length&&Zve(e,t)){const r=4,n=Jve(e,t);let i=r;null!=n&&n.frameLength&&(i=n.frameLength);const s=t+i;return s===e.length||ebe(e,s)}return!1}const rbe=(e,t)=>{let r=0,n=5;t+=n;const i=new Uint32Array(1),s=new Uint32Array(1),a=new Uint8Array(1);for(;n>0;){a[0]=e[t];const o=Math.min(n,8),l=8-o;s[0]=4278190080>>>24+l<<l,i[0]=(a[0]&s[0])>>l,r=r?r<<o|i[0]:i[0],t+=1,n-=o}return r};class nbe extends Vve{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,r,n){super.resetInitSegment(e,t,r,n),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,r){const n=ibe(e,t,r,this.basePTS,this.frameIndex);if(-1!==n){return{sample:e.samples[e.samples.length-1],length:n,missing:0}}}static probe(e){if(!e)return!1;const t=Tve(e,0);if(!t)return!1;const r=t.length;return 11===e[r]&&119===e[r+1]&&void 0!==$ve(t)&&rbe(e,r)<16}}function ibe(e,t,r,n,i){if(r+8>t.length)return-1;if(11!==t[r]||119!==t[r+1])return-1;const s=t[r+4]>>6;if(s>=3)return-1;const a=[48e3,44100,32e3][s],o=63&t[r+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+s];if(r+l>t.length)return-1;const c=t[r+6]>>5;let u=0;2===c?u+=2:(1&c&&1!==c&&(u+=2),4&c&&(u+=2));const d=(t[r+6]<<8|t[r+7])>>12-u&1,h=[2,1,2,3,3,4,4,5][c]+d,f=t[r+5]>>3,p=7&t[r+5],g=new Uint8Array([s<<6|f<<1|p>>2,(3&p)<<6|c<<3|d<<2|o>>4,o<<4&224]),m=n+i*(1536/a*9e4),y=t.subarray(r,r+l);return e.config=g,e.channelCount=h,e.samplerate=a,e.samples.push({unit:y,pts:m}),l}const sbe=/\/emsg[-/]ID3/i;function abe(e,t){return Lfe(e.presentationTime)?e.presentationTime/e.timeScale:t+e.presentationTimeDelta/e.timeScale}class obe{constructor(e,t,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new Ame(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,xme)}decryptAacSample(e,t,r){const n=e[t].unit;if(n.length<=16)return;const i=n.subarray(16,n.length-n.length%16),s=i.buffer.slice(i.byteOffset,i.byteOffset+i.length);this.decryptBuffer(s).then((i=>{const s=new Uint8Array(i);n.set(s,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,r)})).catch(r)}decryptAacSamples(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t);let n=0;for(let i=32;i<e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r}getAvcDecryptedUnit(e,t){const r=new Uint8Array(t);let n=0;for(let i=32;i<e.length-16;i+=160,n+=16)e.set(r.subarray(n,n+16),i);return e}decryptAvcSample(e,t,r,n,i){const s=ege(i.data),a=this.getAvcEncryptedData(s);this.decryptBuffer(a.buffer).then((a=>{i.data=this.getAvcDecryptedUnit(s,a),this.decrypter.isSync()||this.decryptAvcSamples(e,t,r+1,n)})).catch(n)}decryptAvcSamples(e,t,r,n){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,r=0){if(t>=e.length)return void n();const i=e[t].units;for(;!(r>=i.length);r++){const s=i[r];if(!(s.data.length<=48||1!==s.type&&5!==s.type||(this.decryptAvcSample(e,t,r,n,s),this.decrypter.isSync())))return}}}}class lbe{constructor(){this.VideoSample=null}createVideoSample(e,t,r){return{key:e,frame:!1,pts:t,dts:r,units:[],length:0}}getLastNalUnit(e){var t;let r,n=this.VideoSample;if(n&&0!==n.units.length||(n=e[e.length-1]),null!=(t=n)&&t.units){const e=n.units;r=e[e.length-1]}return r}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){const r=t.samples,n=r.length;if(!n)return void t.dropped++;{const t=r[n-1];e.pts=t.pts,e.dts=t.dts}}t.samples.push(e)}}parseNALu(e,t,r){const n=t.byteLength;let i=e.naluState||0;const s=i,a=[];let o,l,c,u=0,d=-1,h=0;for(-1===i&&(d=0,h=this.getNALuType(t,0),i=0,u=1);u<n;)if(o=t[u++],i)if(1!==i)if(o)if(1===o){if(l=u-i-1,d>=0){const e={data:t.subarray(d,l),type:h};a.push(e)}else{const r=this.getLastNalUnit(e.samples);r&&(s&&u<=4-s&&r.state&&(r.data=r.data.subarray(0,r.data.byteLength-s)),l>0&&(r.data=Qpe(r.data,t.subarray(0,l)),r.state=0))}u<n?(c=this.getNALuType(t,u),d=u,h=c,i=0):i=-1}else i=0;else i=3;else i=o?0:2;else i=o?0:1;if(d>=0&&i>=0){const e={data:t.subarray(d,n),type:h,state:i};a.push(e)}if(0===a.length){const r=this.getLastNalUnit(e.samples);r&&(r.data=Qpe(r.data,t))}return e.naluState=i,a}}class cbe{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");n.set(e.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(t=(e-=this.bitsAvailable)>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const r=this.word>>>32-t;if(e>32&&ope.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class ube extends lbe{parsePES(e,t,r,n){const i=this.parseNALu(e,r.data,n);let s,a=this.VideoSample,o=!1;r.data=null,a&&i.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),i.forEach((n=>{var i,l;switch(n.type){case 1:{let t=!1;s=!0;const i=n.data;if(o&&i.length>4){const e=this.readSliceType(i);2!==e&&4!==e&&7!==e&&9!==e||(t=!0)}var c;if(t)null!=(c=a)&&c.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null);a||(a=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),a.frame=!0,a.key=t;break}case 5:s=!0,null!=(i=a)&&i.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),a.key=!0,a.frame=!0;break;case 6:s=!0,Zpe(n.data,1,r.pts,t.samples);break;case 7:{var u,d;s=!0,o=!0;const t=n.data,r=this.readSPS(t);if(!e.sps||e.width!==r.width||e.height!==r.height||(null==(u=e.pixelRatio)?void 0:u[0])!==r.pixelRatio[0]||(null==(d=e.pixelRatio)?void 0:d[1])!==r.pixelRatio[1]){e.width=r.width,e.height=r.height,e.pixelRatio=r.pixelRatio,e.sps=[t];const n=t.subarray(1,4);let i="avc1.";for(let e=0;e<3;e++){let t=n[e].toString(16);t.length<2&&(t="0"+t),i+=t}e.codec=i}break}case 8:s=!0,e.pps=[n.data];break;case 9:s=!0,e.audFound=!0,null!=(l=a)&&l.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;case 12:s=!0;break;default:s=!1}if(a&&s){a.units.push(n)}})),n&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}getNALuType(e,t){return 31&e[t]}readSliceType(e){const t=new cbe(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let r,n=8,i=8;for(let s=0;s<e;s++)0!==i&&(r=t.readEG(),i=(n+r+256)%256),n=0===i?n:i}readSPS(e){const t=new cbe(e);let r,n,i,s=0,a=0,o=0,l=0;const c=t.readUByte.bind(t),u=t.readBits.bind(t),d=t.readUEG.bind(t),h=t.readBoolean.bind(t),f=t.skipBits.bind(t),p=t.skipEG.bind(t),g=t.skipUEG.bind(t),m=this.skipScalingList.bind(this);c();const y=c();if(u(5),f(3),c(),g(),100===y||110===y||122===y||244===y||44===y||83===y||86===y||118===y||128===y){const e=d();if(3===e&&f(1),g(),g(),f(1),h())for(n=3!==e?8:12,i=0;i<n;i++)h()&&m(i<6?16:64,t)}g();const v=d();if(0===v)d();else if(1===v)for(f(1),p(),p(),r=d(),i=0;i<r;i++)p();g(),f(1);const b=d(),w=d(),x=u(1);0===x&&f(1),f(1),h()&&(s=d(),a=d(),o=d(),l=d());let S=[1,1];if(h()&&h()){switch(c()){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[c()<<8|c(),c()<<8|c()]}}return{width:Math.ceil(16*(b+1)-2*s-2*a),height:(2-x)*(w+1)*16-(x?2:4)*(o+l),pixelRatio:S}}}class dbe extends lbe{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,r,n){const i=this.parseNALu(e,r.data,n);let s,a=this.VideoSample,o=!1;r.data=null,a&&i.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),i.forEach((n=>{var i,l;switch(n.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a||(a=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),a.frame=!0,s=!0;break;case 16:case 17:case 18:case 21:var c;if(s=!0,o)null!=(c=a)&&c.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null);a||(a=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),a.key=!0,a.frame=!0;break;case 19:case 20:s=!0,null!=(i=a)&&i.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),a.key=!0,a.frame=!0;break;case 39:s=!0,Zpe(n.data,2,r.pts,t.samples);break;case 32:s=!0,e.vps||("object"!=typeof e.params&&(e.params={}),e.params=Jfe(e.params,this.readVPS(n.data)),this.initVPS=n.data),e.vps=[n.data];break;case 33:if(s=!0,o=!0,void 0===e.vps||e.vps[0]===this.initVPS||void 0===e.sps||this.matchSPS(e.sps[0],n.data)||(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const t=this.readSPS(n.data);e.width=t.width,e.height=t.height,e.pixelRatio=t.pixelRatio,e.codec=t.codecString,e.sps=[],"object"!=typeof e.params&&(e.params={});for(const r in t.params)e.params[r]=t.params[r]}this.pushParameterSet(e.sps,n.data,e.vps),a||(a=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),a.key=!0;break;case 34:if(s=!0,"object"==typeof e.params){if(!e.pps){e.pps=[];const t=this.readPPS(n.data);for(const r in t)e.params[r]=t[r]}this.pushParameterSet(e.pps,n.data,e.vps)}break;case 35:s=!0,e.audFound=!0,null!=(l=a)&&l.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;default:s=!1}if(a&&s){a.units.push(n)}})),n&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}pushParameterSet(e,t,r){(r&&r[0]===this.initVPS||!r&&!e.length)&&e.push(t)}getNALuType(e,t){return(126&e[t])>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let r=0;for(let n=0;n<e.byteLength;n++)n>=2&&3===e[n]&&0===e[n-1]&&0===e[n-2]||(t[r]=e[n],r++);return new Uint8Array(t.buffer,0,r)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new cbe(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);return{numTemporalLayers:t.readBits(3)+1,temporalIdNested:t.readBoolean()}}readSPS(e){const t=new cbe(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const r=t.readBits(3);t.readBoolean();const n=t.readBits(2),i=t.readBoolean(),s=t.readBits(5),a=t.readUByte(),o=t.readUByte(),l=t.readUByte(),c=t.readUByte(),u=t.readUByte(),d=t.readUByte(),h=t.readUByte(),f=t.readUByte(),p=t.readUByte(),g=t.readUByte(),m=t.readUByte(),y=[],v=[];for(let K=0;K<r;K++)y.push(t.readBoolean()),v.push(t.readBoolean());if(r>0)for(let K=r;K<8;K++)t.readBits(2);for(let K=0;K<r;K++)y[K]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),v[K]&&t.readUByte();t.readUEG();const b=t.readUEG();3==b&&t.skipBits(1);const w=t.readUEG(),x=t.readUEG(),S=t.readBoolean();let E=0,T=0,k=0,A=0;S&&(E+=t.readUEG(),T+=t.readUEG(),k+=t.readUEG(),A+=t.readUEG());const _=t.readUEG(),C=t.readUEG(),P=t.readUEG();for(let K=t.readBoolean()?0:r;K<=r;K++)t.skipUEG(),t.skipUEG(),t.skipUEG();t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.readBoolean()){if(t.readBoolean())for(let e=0;e<4;e++)for(let r=0;r<(3===e?2:6);r++){if(t.readBoolean()){const r=Math.min(64,1<<4+(e<<1));e>1&&t.readEG();for(let e=0;e<r;e++)t.readEG()}else t.readUEG()}}t.readBoolean(),t.readBoolean();t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const D=t.readUEG();let R=0;for(let K=0;K<D;K++){let e=!1;if(0!==K&&(e=t.readBoolean()),e){K===D&&t.readUEG(),t.readBoolean(),t.readUEG();let e=0;for(let r=0;r<=R;r++){const r=t.readBoolean();let n=!1;r||(n=t.readBoolean()),(r||n)&&e++}R=e}else{const e=t.readUEG(),r=t.readUEG();R=e+r;for(let n=0;n<e;n++)t.readUEG(),t.readBoolean();for(let n=0;n<r;n++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const e=t.readUEG();for(let r=0;r<e;r++){for(let e=0;e<P+4;e++)t.readBits(1);t.readBits(1)}}let I=0,O=1,N=1,j=!0,L=1,M=0;t.readBoolean(),t.readBoolean();let F=!1;if(t.readBoolean()){if(t.readBoolean()){const e=t.readUByte();e>0&&e<16?(O=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][e-1],N=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][e-1]):255===e&&(O=t.readBits(16),N=t.readBits(16))}t.readBoolean()&&t.readBoolean();if(t.readBoolean()){t.readBits(3),t.readBoolean();t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())}t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),F=t.readBoolean(),F&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG());if(t.readBoolean()){L=t.readBits(32),M=t.readBits(32);t.readBoolean()&&t.readUEG();if(t.readBoolean()){const e=t.readBoolean(),n=t.readBoolean();let i=!1;(e||n)&&(i=t.readBoolean(),i&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),i&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let s=0;s<=r;s++){j=t.readBoolean();let r=!1;j||t.readBoolean()?t.readEG():r=t.readBoolean();const s=r?1:t.readUEG()+1;if(e)for(let e=0;e<s;e++)t.readUEG(),t.readUEG(),i&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(n)for(let e=0;e<s;e++)t.readUEG(),t.readUEG(),i&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),I=t.readUEG())}let U=w,B=x;if(S){let e=1,t=1;1===b?e=t=2:2==b&&(e=2),U=w-e*T-e*E,B=x-t*A-t*k}const $=n?["A","B","C"][n]:"",z=a<<24|o<<16|l<<8|c;let q=0;for(let K=0;K<32;K++)q=(q|(z>>K&1)<<31-K)>>>0;let V=q.toString(16);1===s&&"2"===V&&(V="6");return{codecString:`hvc1.${$}${s}.${V}.${i?"H":"L"}${m}.B0`,params:{general_tier_flag:i,general_profile_idc:s,general_profile_space:n,general_profile_compatibility_flags:[a,o,l,c],general_constraint_indicator_flags:[u,d,h,f,p,g],general_level_idc:m,bit_depth:_+8,bit_depth_luma_minus8:_,bit_depth_chroma_minus8:C,min_spatial_segmentation_idc:I,chroma_format_idc:b,frame_rate:{fixed:j,fps:M/L}},width:U,height:B,pixelRatio:[O,N]}}readPPS(e){const t=new cbe(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2);t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const r=t.readBoolean(),n=t.readBoolean();let i=1;return n&&r?i=0:n?i=3:r&&(i=2),{parallelismType:i}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const hbe=188;class fbe{constructor(e,t,r,n){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.logger=n,this.videoParser=null}static probe(e,t){const r=fbe.syncOffset(e);return r>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${r}`),-1!==r}static syncOffset(e){const t=e.length;let r=Math.min(940,t-hbe)+1,n=0;for(;n<r;){let i=!1,s=-1,a=0;for(let o=n;o<t;o+=hbe){if(71!==e[o]||t-o!==hbe&&71!==e[o+hbe]){if(a)return-1;break}if(a++,-1===s&&(s=o,0!==s&&(r=Math.min(s+18612,e.length-hbe)+1)),i||(i=0===pbe(e,o)),i&&a>1&&(0===s&&a>2||o+hbe>r))return s}n++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:Ope[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,r,n){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=fbe.createTrack("video"),this._videoTrack.duration=n,this._audioTrack=fbe.createTrack("audio",n),this._id3Track=fbe.createTrack("id3"),this._txtTrack=fbe.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:r}=this;e&&(e.pesData=null),t&&(t.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,r=!1,n=!1){let i;r||(this.sampleAes=null);const s=this._videoTrack,a=this._audioTrack,o=this._id3Track,l=this._txtTrack;let c=s.pid,u=s.pesData,d=a.pid,h=o.pid,f=a.pesData,p=o.pesData,g=null,m=this.pmtParsed,y=this._pmtId,v=e.length;if(this.remainderData&&(v=(e=Qpe(this.remainderData,e)).length,this.remainderData=null),v<hbe&&!n)return this.remainderData=e,{audioTrack:a,videoTrack:s,id3Track:o,textTrack:l};const b=Math.max(0,fbe.syncOffset(e));v-=(v-b)%hbe,v<e.byteLength&&!n&&(this.remainderData=new Uint8Array(e.buffer,v,e.buffer.byteLength-v));let w=0;for(let S=b;S<v;S+=hbe)if(71===e[S]){const t=!!(64&e[S+1]),n=pbe(e,S);let v;if((48&e[S+3])>>4>1){if(v=S+5+e[S+4],v===S+hbe)continue}else v=S+4;switch(n){case c:t&&(u&&(i=bbe(u,this.logger))&&(this.readyVideoParser(s.segmentCodec),null!==this.videoParser&&this.videoParser.parsePES(s,l,i,!1)),u={data:[],size:0}),u&&(u.data.push(e.subarray(v,S+hbe)),u.size+=S+hbe-v);break;case d:if(t){if(f&&(i=bbe(f,this.logger)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,i);break;case"mp3":this.parseMPEGPES(a,i);break;case"ac3":this.parseAC3PES(a,i)}f={data:[],size:0}}f&&(f.data.push(e.subarray(v,S+hbe)),f.size+=S+hbe-v);break;case h:t&&(p&&(i=bbe(p,this.logger))&&this.parseID3PES(o,i),p={data:[],size:0}),p&&(p.data.push(e.subarray(v,S+hbe)),p.size+=S+hbe-v);break;case 0:t&&(v+=e[v]+1),y=this._pmtId=gbe(e,v);break;case y:{t&&(v+=e[v]+1);const n=mbe(e,v,this.typeSupported,r,this.observer,this.logger);c=n.videoPid,c>0&&(s.pid=c,s.segmentCodec=n.segmentVideoCodec),d=n.audioPid,d>0&&(a.pid=d,a.segmentCodec=n.segmentAudioCodec),h=n.id3Pid,h>0&&(o.pid=h),null===g||m||(this.logger.warn(`MPEG-TS PMT found at ${S} after unknown PID '${g}'. Backtracking to sync byte @${b} to parse all TS packets.`),g=null,S=b-188),m=this.pmtParsed=!0;break}case 17:case 8191:break;default:g=n}}else w++;w>0&&ybe(this.observer,new Error(`Found ${w} TS packet/s that do not start with 0x47`),void 0,this.logger),s.pesData=u,a.pesData=f,o.pesData=p;const x={audioTrack:a,videoTrack:s,id3Track:o,textTrack:l};return n&&this.extractRemainingSamples(x),x}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:r,id3Track:n,textTrack:i}=e,s=r.pesData,a=t.pesData,o=n.pesData;let l;if(s&&(l=bbe(s,this.logger))?(this.readyVideoParser(r.segmentCodec),null!==this.videoParser&&(this.videoParser.parsePES(r,i,l,!0),r.pesData=null)):r.pesData=s,a&&(l=bbe(a,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l);break;case"ac3":this.parseAC3PES(t,l)}t.pesData=null}else null!=a&&a.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=a;o&&(l=bbe(o,this.logger))?(this.parseID3PES(n,l),n.pesData=null):n.pesData=o}demuxSampleAes(e,t,r){const n=this.demux(e,r,!0,!this.config.progressive),i=this.sampleAes=new obe(this.observer,this.config,t);return this.decrypt(n,i)}readyVideoParser(e){null===this.videoParser&&("avc"===e?this.videoParser=new ube:"hevc"===e&&(this.videoParser=new dbe))}decrypt(e,t){return new Promise((r=>{const{audioTrack:n,videoTrack:i}=e;n.samples&&"aac"===n.segmentCodec?t.decryptAacSamples(n.samples,0,(()=>{i.samples?t.decryptAvcSamples(i.samples,0,0,(()=>{r(e)})):r(e)})):i.samples&&t.decryptAvcSamples(i.samples,0,0,(()=>{r(e)}))}))}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let r=0;const n=this.aacOverFlow;let i,s,a,o=t.data;if(n){this.aacOverFlow=null;const t=n.missing,i=n.sample.unit.byteLength;if(-1===t)o=Qpe(n.sample.unit,o);else{const s=i-t;n.sample.unit.set(o.subarray(0,t),s),e.samples.push(n.sample),r=n.missing}}for(i=r,s=o.length;i<s-1&&!Cve(o,i);i++);if(i!==r){let e;const t=i<s-1;if(e=t?`AAC PES did not start with ADTS header,offset:${i}`:"No ADTS header found in AAC PES",ybe(this.observer,new Error(e),t,this.logger),!t)return}if(Dve(e,this.observer,o,i,this.audioCodec),void 0!==t.pts)a=t.pts;else{if(!n)return void this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");{const t=Rve(e.samplerate);a=n.sample.pts+t}}let l,c=0;for(;i<s;){if(l=Ive(e,o,i,a,c),i+=l.length,l.missing){this.aacOverFlow=l;break}for(c++;i<s-1&&!Cve(o,i);i++);}}parseMPEGPES(e,t){const r=t.data,n=r.length;let i=0,s=0;const a=t.pts;if(void 0!==a)for(;s<n;)if(ebe(r,s)){const t=Xve(e,r,s,a,i);if(!t)break;s+=t.length,i++}else s++;else this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseAC3PES(e,t){{const r=t.data,n=t.pts;if(void 0===n)return void this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");const i=r.length;let s,a=0,o=0;for(;o<i&&(s=ibe(e,r,o,n,a++))>0;)o+=s}}parseID3PES(e,t){if(void 0===t.pts)return void this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");const r=Jfe({},t,{type:this._videoTrack?zve.emsg:zve.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function pbe(e,t){return((31&e[t+1])<<8)+e[t+2]}function gbe(e,t){return(31&e[t+10])<<8|e[t+11]}function mbe(e,t,r,n,i,s){const a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<o;){const o=pbe(e,t),l=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!n){vbe("ADTS AAC",s);break}case 15:-1===a.audioPid&&(a.audioPid=o);break;case 21:-1===a.id3Pid&&(a.id3Pid=o);break;case 219:if(!n){vbe("H.264",s);break}case 27:-1===a.videoPid&&(a.videoPid=o);break;case 3:case 4:r.mpeg||r.mp3?-1===a.audioPid&&(a.audioPid=o,a.segmentAudioCodec="mp3"):s.log("MPEG audio found, not supported in this browser");break;case 193:if(!n){vbe("AC-3",s);break}case 129:r.ac3?-1===a.audioPid&&(a.audioPid=o,a.segmentAudioCodec="ac3"):s.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===a.audioPid&&l>0){let n=t+5,i=l;for(;i>2;){if(106===e[n])!0!==r.ac3?s.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=o,a.segmentAudioCodec="ac3");const t=e[n+1]+2;n+=t,i-=t}}break;case 194:case 135:return ybe(i,new Error("Unsupported EC-3 in M2TS found"),void 0,s),a;case 36:-1===a.videoPid&&(a.videoPid=o,a.segmentVideoCodec="hevc",s.log("HEVC in M2TS found"))}t+=l+5}return a}function ybe(e,t,r,n){n.warn(`parsing error: ${t.message}`),e.emit($fe.ERROR,$fe.ERROR,{type:Ufe.MEDIA_ERROR,details:Bfe.FRAG_PARSING_ERROR,fatal:!1,levelRetry:r,error:t,reason:t.message})}function vbe(e,t){t.log(`${e} with AES-128-CBC encryption found in unencrypted stream`)}function bbe(e,t){let r,n,i,s,a,o=0;const l=e.data;if(!e||0===e.size)return null;for(;l[0].length<19&&l.length>1;)l[0]=Qpe(l[0],l[1]),l.splice(1,1);r=l[0];if(1===(r[0]<<16)+(r[1]<<8)+r[2]){if(n=(r[4]<<8)+r[5],n&&n>e.size-6)return null;const c=r[7];192&c&&(s=536870912*(14&r[9])+4194304*(255&r[10])+16384*(254&r[11])+128*(255&r[12])+(254&r[13])/2,64&c?(a=536870912*(14&r[14])+4194304*(255&r[15])+16384*(254&r[16])+128*(255&r[17])+(254&r[18])/2,s-a>54e5&&(t.warn(`${Math.round((s-a)/9e4)}s delta between PTS and DTS, align them`),s=a)):a=s),i=r[8];let u=i+9;if(e.size<=u)return null;e.size-=u;const d=new Uint8Array(e.size);for(let e=0,t=l.length;e<t;e++){r=l[e];let t=r.byteLength;if(u){if(u>t){u-=t;continue}r=r.subarray(u),t-=u,u=0}d.set(r,o),o+=t}return n&&(n-=i+3),{data:d,pts:s,dts:a,len:n}}return null}class wbe{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const xbe=Math.pow(2,32)-1;class Sbe{static init(){let e;for(e in Sbe.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},Sbe.types)Sbe.types.hasOwnProperty(e)&&(Sbe.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Sbe.HDLR_TYPES={video:t,audio:r};const n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);Sbe.STTS=Sbe.STSC=Sbe.STCO=i,Sbe.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Sbe.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Sbe.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Sbe.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const s=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);Sbe.FTYP=Sbe.box(Sbe.types.ftyp,s,o,s,a),Sbe.DINF=Sbe.box(Sbe.types.dinf,Sbe.box(Sbe.types.dref,n))}static box(e,...t){let r=8,n=t.length;const i=n;for(;n--;)r+=t[n].byteLength;const s=new Uint8Array(r);for(s[0]=r>>24&255,s[1]=r>>16&255,s[2]=r>>8&255,s[3]=255&r,s.set(e,4),n=0,r=8;n<i;n++)s.set(t[n],r),r+=t[n].byteLength;return s}static hdlr(e){return Sbe.box(Sbe.types.hdlr,Sbe.HDLR_TYPES[e])}static mdat(e){return Sbe.box(Sbe.types.mdat,e)}static mdhd(e,t){t*=e;const r=Math.floor(t/(xbe+1)),n=Math.floor(t%(xbe+1));return Sbe.box(Sbe.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))}static mdia(e){return Sbe.box(Sbe.types.mdia,Sbe.mdhd(e.timescale||0,e.duration||0),Sbe.hdlr(e.type),Sbe.minf(e))}static mfhd(e){return Sbe.box(Sbe.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?Sbe.box(Sbe.types.minf,Sbe.box(Sbe.types.smhd,Sbe.SMHD),Sbe.DINF,Sbe.stbl(e)):Sbe.box(Sbe.types.minf,Sbe.box(Sbe.types.vmhd,Sbe.VMHD),Sbe.DINF,Sbe.stbl(e))}static moof(e,t,r){return Sbe.box(Sbe.types.moof,Sbe.mfhd(e),Sbe.traf(r,t))}static moov(e){let t=e.length;const r=[];for(;t--;)r[t]=Sbe.trak(e[t]);return Sbe.box.apply(null,[Sbe.types.moov,Sbe.mvhd(e[0].timescale||0,e[0].duration||0)].concat(r).concat(Sbe.mvex(e)))}static mvex(e){let t=e.length;const r=[];for(;t--;)r[t]=Sbe.trex(e[t]);return Sbe.box.apply(null,[Sbe.types.mvex,...r])}static mvhd(e,t){t*=e;const r=Math.floor(t/(xbe+1)),n=Math.floor(t%(xbe+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Sbe.box(Sbe.types.mvhd,i)}static sdtp(e){const t=e.samples||[],r=new Uint8Array(4+t.length);let n,i;for(n=0;n<t.length;n++)i=t[n].flags,r[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return Sbe.box(Sbe.types.sdtp,r)}static stbl(e){return Sbe.box(Sbe.types.stbl,Sbe.stsd(e),Sbe.box(Sbe.types.stts,Sbe.STTS),Sbe.box(Sbe.types.stsc,Sbe.STSC),Sbe.box(Sbe.types.stsz,Sbe.STSZ),Sbe.box(Sbe.types.stco,Sbe.STCO))}static avc1(e){let t,r,n,i=[],s=[];for(t=0;t<e.sps.length;t++)r=e.sps[t],n=r.byteLength,i.push(n>>>8&255),i.push(255&n),i=i.concat(Array.prototype.slice.call(r));for(t=0;t<e.pps.length;t++)r=e.pps[t],n=r.byteLength,s.push(n>>>8&255),s.push(255&n),s=s.concat(Array.prototype.slice.call(r));const a=Sbe.box(Sbe.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(s))),o=e.width,l=e.height,c=e.pixelRatio[0],u=e.pixelRatio[1];return Sbe.box(Sbe.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,Sbe.box(Sbe.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Sbe.box(Sbe.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,u>>24,u>>16&255,u>>8&255,255&u])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,255&t,0,0])}static mp4a(e){return Sbe.box(Sbe.types.mp4a,Sbe.audioStsd(e),Sbe.box(Sbe.types.esds,Sbe.esds(e)))}static mp3(e){return Sbe.box(Sbe.types[".mp3"],Sbe.audioStsd(e))}static ac3(e){return Sbe.box(Sbe.types["ac-3"],Sbe.audioStsd(e),Sbe.box(Sbe.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if("audio"===e.type){if("aac"===t)return Sbe.box(Sbe.types.stsd,Sbe.STSD,Sbe.mp4a(e));if("ac3"===t&&e.config)return Sbe.box(Sbe.types.stsd,Sbe.STSD,Sbe.ac3(e));if("mp3"===t&&"mp3"===e.codec)return Sbe.box(Sbe.types.stsd,Sbe.STSD,Sbe.mp3(e))}else{if(!e.pps||!e.sps)throw new Error("video track missing pps or sps");if("avc"===t)return Sbe.box(Sbe.types.stsd,Sbe.STSD,Sbe.avc1(e));if("hevc"===t&&e.vps)return Sbe.box(Sbe.types.stsd,Sbe.STSD,Sbe.hvc1(e))}throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,r=(e.duration||0)*(e.timescale||0),n=e.width||0,i=e.height||0,s=Math.floor(r/(xbe+1)),a=Math.floor(r%(xbe+1));return Sbe.box(Sbe.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,i>>8&255,255&i,0,0]))}static traf(e,t){const r=Sbe.sdtp(e),n=e.id,i=Math.floor(t/(xbe+1)),s=Math.floor(t%(xbe+1));return Sbe.box(Sbe.types.traf,Sbe.box(Sbe.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),Sbe.box(Sbe.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s])),Sbe.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,Sbe.box(Sbe.types.trak,Sbe.tkhd(e),Sbe.mdia(e))}static trex(e){const t=e.id;return Sbe.box(Sbe.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const r=e.samples||[],n=r.length,i=12+16*n,s=new Uint8Array(i);let a,o,l,c,u,d;for(t+=8+i,s.set(["video"===e.type?1:0,0,15,1,n>>>24&255,n>>>16&255,n>>>8&255,255&n,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),a=0;a<n;a++)o=r[a],l=o.duration,c=o.size,u=o.flags,d=o.cts,s.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c,u.isLeading<<2|u.dependsOn,u.isDependedOn<<6|u.hasRedundancy<<4|u.paddingValue<<1|u.isNonSync,61440&u.degradPrio,15&u.degradPrio,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*a);return Sbe.box(Sbe.types.trun,s)}static initSegment(e){Sbe.types||Sbe.init();const t=Sbe.moov(e);return Qpe(Sbe.FTYP,t)}static hvc1(e){const t=e.params,r=[e.vps,e.sps,e.pps],n=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),3|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),r.length]);let i=n.length;for(let h=0;h<r.length;h+=1){i+=3;for(let e=0;e<r[h].length;e+=1)i+=2+r[h][e].length}const s=new Uint8Array(i);s.set(n,0),i=n.length;const a=r.length-1;for(let h=0;h<r.length;h+=1){s.set(new Uint8Array([32+h|(h===a?128:0),0,r[h].length]),i),i+=3;for(let e=0;e<r[h].length;e+=1)s.set(new Uint8Array([r[h][e].length>>8,255&r[h][e].length]),i),i+=2,s.set(r[h][e],i),i+=r[h][e].length}const o=Sbe.box(Sbe.types.hvcC,s),l=e.width,c=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return Sbe.box(Sbe.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,Sbe.box(Sbe.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Sbe.box(Sbe.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,d>>24,d>>16&255,d>>8&255,255&d])))}}Sbe.types=void 0,Sbe.HDLR_TYPES=void 0,Sbe.STTS=void 0,Sbe.STSC=void 0,Sbe.STCO=void 0,Sbe.STSZ=void 0,Sbe.VMHD=void 0,Sbe.SMHD=void 0,Sbe.STSD=void 0,Sbe.FTYP=void 0,Sbe.DINF=void 0;function Ebe(e,t,r=1,n=!1){const i=e*t*r;return n?Math.round(i):i}function Tbe(e,t=!1){return Ebe(e,1e3,1/9e4,t)}function kbe(e){const{baseTime:t,timescale:r,trackId:n}=e;return`${t/r} (${t}/${r}) trackId: ${n}`}let Abe,_be=null,Cbe=null;function Pbe(e,t,r,n){return{duration:t,size:r,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class Dbe extends tpe{constructor(e,t,r,n){if(super("mp4-remuxer",n),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,null===_be){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);_be=e?parseInt(e[1]):0}if(null===Cbe){const e=navigator.userAgent.match(/Safari\/(\d+)/i);Cbe=e?parseInt(e[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const t=this._initPTS;t&&e&&e.trackId===t.trackId&&e.baseTime===t.baseTime&&e.timescale===t.timescale||this.log(`Reset initPTS: ${t?kbe(t):t} > ${e?kbe(e):e}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const r=e[0].pts,n=e.reduce(((e,n)=>{let i=n.pts,s=i-e;return s<-4294967296&&(t=!0,i=Rbe(i,r),s=i-e),s>0?e:i}),r);return t&&this.debug("PTS rollover detected"),n}remux(e,t,r,n,i,s,a,o){let l,c,u,d,h,f,p=i,g=i;const m=e.pid>-1,y=t.pid>-1,v=t.samples.length,b=e.samples.length>0,w=a&&v>0||v>1;if((!m||b)&&(!y||w)||this.ISGenerated||a){if(this.ISGenerated){var x,S,E,T;const e=this.videoTrackConfig;(e&&(t.width!==e.width||t.height!==e.height||(null==(x=t.pixelRatio)?void 0:x[0])!==(null==(S=e.pixelRatio)?void 0:S[0])||(null==(E=t.pixelRatio)?void 0:E[1])!==(null==(T=e.pixelRatio)?void 0:T[1]))||!e&&w||null===this.nextAudioTs&&b)&&this.resetInitSegment()}this.ISGenerated||(u=this.generateIS(e,t,i,s));const r=this.isVideoContiguous;let n,a=-1;if(w&&(a=function(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!r&&this.config.forceKeyFrameOnDiscontinuity))if(f=!0,a>0){this.warn(`Dropped ${a} out of ${v} video samples due to a missing keyframe`);const e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(a),t.dropped+=a,g+=(t.samples[0].pts-e)/t.inputTimeScale,n=g}else-1===a&&(this.warn(`No keyframe found out of ${v} video samples`),f=!1);if(this.ISGenerated){if(b&&w){const r=this.getVideoStartPts(t.samples),n=(Rbe(e.samples[0].pts,r)-r)/t.inputTimeScale;p+=Math.max(0,n),g+=Math.max(0,-n)}if(b){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),u=this.generateIS(e,t,i,s)),c=this.remuxAudio(e,p,this.isAudioContiguous,s,y||w||o===Gfe?g:void 0),w){const n=c?c.endPTS-c.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),u=this.generateIS(e,t,i,s)),l=this.remuxVideo(t,g,r,n)}}else w&&(l=this.remuxVideo(t,g,r,0));l&&(l.firstKeyFrame=a,l.independent=-1!==a,l.firstKeyFramePTS=n)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(h=Ibe(r,i,this._initPTS,this._initDTS)),n.samples.length&&(d=Obe(n,i,this._initPTS))),{audio:c,video:l,initSegment:u,independent:f,text:d,id3:h}}computeInitPts(e,t,r,n){const i=Math.round(r*t);let s=Rbe(e,i);if(s<i+t)for(this.log(`Adjusting PTS for rollover in timeline near ${(i-s)/t} ${n}`);s<i+t;)s+=8589934592;return s-i}generateIS(e,t,r,n){const i=e.samples,s=t.samples,a=this.typeSupported,o={},l=this._initPTS;let c,u,d,h=!l||n,f="audio/mp4",p=-1;if(h&&(c=u=1/0),e.config&&i.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(f="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}o.audio={id:"audio",container:f,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&a.mpeg?new Uint8Array(0):Sbe.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(p=e.id,d=e.inputTimeScale,l&&d===l.timescale?h=!1:c=u=this.computeInitPts(i[0].pts,d,r,"audio"))}if(t.sps&&t.pps&&s.length){if(t.timescale=t.inputTimeScale,o.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Sbe.initSegment([t]),metadata:{width:t.width,height:t.height}},h)if(p=t.id,d=t.inputTimeScale,l&&d===l.timescale)h=!1;else{const e=this.getVideoStartPts(s),t=Rbe(s[0].dts,e),n=this.computeInitPts(t,d,r,"video"),i=this.computeInitPts(e,d,r,"video");u=Math.min(u,n),c=Math.min(c,i)}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(o).length)return this.ISGenerated=!0,h?(l&&this.warn(`Timestamps at playlist time: ${n?"":"~"}${r} ${c/d} != initPTS: ${l.baseTime/l.timescale} (${l.baseTime}/${l.timescale}) trackId: ${l.trackId}`),this.log(`Found initPTS at playlist time: ${r} offset: ${c/d} (${c}/${d}) trackId: ${p}`),this._initPTS={baseTime:c,timescale:d,trackId:p},this._initDTS={baseTime:u,timescale:d,trackId:p}):c=d=void 0,{tracks:o,initPTS:c,timescale:d,trackId:p}}remuxVideo(e,t,r,n){const i=e.inputTimeScale,s=e.samples,a=[],o=s.length,l=this._initPTS,c=l.baseTime*i/l.timescale;let u,d,h=this.nextVideoTs,f=8,p=this.videoSampleDuration,g=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,y=!1;if(!r||null===h){const e=c+t*i,n=s[0].pts-Rbe(s[0].dts,s[0].pts);_be&&null!==h&&Math.abs(e-n-(h+c))<15e3?r=!0:h=e-n-c}const v=h+c;for(let N=0;N<o;N++){const e=s[N];e.pts=Rbe(e.pts,v),e.dts=Rbe(e.dts,v),e.dts<s[N>0?N-1:N].dts&&(y=!0)}y&&s.sort((function(e,t){const r=e.dts-t.dts,n=e.pts-t.pts;return r||n})),u=s[0].dts,d=s[s.length-1].dts;const b=d-u,w=b?Math.round(b/(o-1)):p||e.inputTimeScale/30;if(r){const r=u-v,n=r>w,i=r<-1;if((n||i)&&(n?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Tbe(r,!0)} ms (${r}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Tbe(-r,!0)} ms (${r}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!i||v>=s[0].pts||_be)){u=v;const e=s[0].pts-r;if(n)s[0].dts=u,s[0].pts=e;else{let t=!0;for(let n=0;n<s.length&&!(s[n].dts>e&&t);n++){const e=s[n].pts;if(s[n].dts-=r,s[n].pts-=r,n<s.length-1){const r=s[n+1].pts;t=r<=s[n].pts==r<=e}}}this.log(`Video: Initial PTS/DTS adjusted: ${Tbe(e,!0)}/${Tbe(u,!0)}, delta: ${Tbe(r,!0)} ms`)}}u=Math.max(0,u);let x=0,S=0,E=u;for(let N=0;N<o;N++){const e=s[N],t=e.units,r=t.length;let n=0;for(let i=0;i<r;i++)n+=t[i].data.length;S+=n,x+=r,e.length=n,e.dts<E?(e.dts=E,E+=w/4|0||1):E=e.dts,g=Math.min(e.pts,g),m=Math.max(e.pts,m)}d=s[o-1].dts;const T=S+4*x+8;let k;try{k=new Uint8Array(T)}catch(mEe){return void this.observer.emit($fe.ERROR,$fe.ERROR,{type:Ufe.MUX_ERROR,details:Bfe.REMUX_ALLOC_ERROR,fatal:!1,error:mEe,bytes:T,reason:`fail allocating video mdat ${T}`})}const A=new DataView(k.buffer);A.setUint32(0,T),k.set(Sbe.types.mdat,4);let _=!1,C=Number.POSITIVE_INFINITY,P=Number.POSITIVE_INFINITY,D=Number.NEGATIVE_INFINITY,R=Number.NEGATIVE_INFINITY;for(let N=0;N<o;N++){const e=s[N],t=e.units;let r,l=0;for(let n=0,i=t.length;n<i;n++){const e=t[n],r=e.data,i=e.data.byteLength;A.setUint32(f,i),f+=4,k.set(r,f),f+=i,l+=4+i}if(N<o-1)p=s[N+1].dts-e.dts,r=s[N+1].pts-e.pts;else{const t=this.config,a=N>0?e.dts-s[N-1].dts:w;if(r=N>0?e.pts-s[N-1].pts:w,t.stretchShortVideoTrack&&null!==this.nextAudioTs){const r=Math.floor(t.maxBufferHole*i),s=(n?g+n*i:this.nextAudioTs+c)-e.pts;s>r?(p=s-a,p<0?p=a:_=!0,this.log(`It is approximately ${s/90} ms to the next segment; using duration ${p/90} ms for the last video frame.`)):p=a}else p=a}const u=Math.round(e.pts-e.dts);C=Math.min(C,p),D=Math.max(D,p),P=Math.min(P,r),R=Math.max(R,r),a.push(Pbe(e.key,p,l,u))}if(a.length)if(_be){if(_be<70){const e=a[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(Cbe&&R-P<D-C&&w/D<.025&&0===a[0].cts){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=u;for(let t=0,r=a.length;t<r;t++){const n=e+a[t].duration,i=e+a[t].cts;if(t<r-1){const e=n+a[t+1].cts;a[t].duration=e-i}else a[t].duration=t?a[t-1].duration:w;a[t].cts=0,e=n}}p=_||!p?w:p;const I=d+p;this.nextVideoTs=h=I-c,this.videoSampleDuration=p,this.isVideoContiguous=!0;const O={data1:Sbe.moof(e.sequenceNumber++,u,Jfe(e,{samples:a})),data2:k,startPTS:(g-c)/i,endPTS:(m+p-c)/i,startDTS:(u-c)/i,endDTS:h/i,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,O}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}}remuxAudio(e,t,r,n,i){const s=e.inputTimeScale,a=s/(e.samplerate?e.samplerate:s),o=this.getSamplesPerFrame(e),l=o*a,c=this._initPTS,u="mp3"===e.segmentCodec&&this.typeSupported.mpeg,d=[],h=void 0!==i;let f=e.samples,p=u?0:8,g=this.nextAudioTs||-1;const m=c.baseTime*s/c.timescale,y=m+t*s;if(this.isAudioContiguous=r=r||f.length&&g>0&&(n&&Math.abs(y-(g+m))<9e3||Math.abs(Rbe(f[0].pts,y)-(g+m))<20*l),f.forEach((function(e){e.pts=Rbe(e.pts,y)})),!r||g<0){const e=f.length;if(f=f.filter((e=>e.pts>=0)),e!==f.length&&this.warn(`Removed ${f.length-e} of ${e} samples (initPTS ${m} / ${s})`),!f.length)return;g=0===i?0:n&&!h?Math.max(0,y-m):f[0].pts-m}if("aac"===e.segmentCodec){const t=this.config.maxAudioFramesDrift;for(let r=0,n=g+m;r<f.length;r++){const i=f[r],a=i.pts,o=a-n,c=Math.abs(1e3*o/s);if(o<=-t*l&&h)0===r&&(this.warn(`Audio frame @ ${(a/s).toFixed(3)}s overlaps marker by ${Math.round(1e3*o/s)} ms.`),this.nextAudioTs=g=a-m,n=a);else if(o>=t*l&&c<1e4&&h){let t=Math.round(o/l);for(n=a-t*l;n<0&&t&&l;)t--,n+=l;0===r&&(this.nextAudioTs=g=n-m),this.warn(`Injecting ${t} audio frames @ ${((n-m)/s).toFixed(3)}s due to ${Math.round(1e3*o/s)} ms gap.`);for(let s=0;s<t;s++){let t=wbe.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);t||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),t=i.unit.subarray()),f.splice(r,0,{unit:t,pts:n}),n+=l,r++}}i.pts=n,n+=l}}let v,b=null,w=null,x=0,S=f.length;for(;S--;)x+=f[S].unit.byteLength;for(let P=0,D=f.length;P<D;P++){const t=f[P],n=t.unit;let i=t.pts;if(null!==w){d[P-1].duration=Math.round((i-w)/a)}else{if(r&&"aac"===e.segmentCodec&&(i=g+m),b=i,!(x>0))return;x+=p;try{v=new Uint8Array(x)}catch(mEe){return void this.observer.emit($fe.ERROR,$fe.ERROR,{type:Ufe.MUX_ERROR,details:Bfe.REMUX_ALLOC_ERROR,fatal:!1,error:mEe,bytes:x,reason:`fail allocating audio mdat ${x}`})}if(!u){new DataView(v.buffer).setUint32(0,x),v.set(Sbe.types.mdat,4)}}v.set(n,p);const s=n.byteLength;p+=s,d.push(Pbe(!0,o,s,0)),w=i}const E=d.length;if(!E)return;const T=d[d.length-1];g=w-m,this.nextAudioTs=g+a*T.duration;const k=u?new Uint8Array(0):Sbe.moof(e.sequenceNumber++,b/a,Jfe({},e,{samples:d}));e.samples=[];const A=(b-m)/s,_=this.nextAudioTs/s,C={data1:k,data2:v,startPTS:A,endPTS:_,startDTS:A,endDTS:_,type:"audio",hasAudio:!0,hasVideo:!1,nb:E};return this.isAudioContiguous=!0,C}}function Rbe(e,t){let r;if(null===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}function Ibe(e,t,r,n){const i=e.samples.length;if(!i)return;const s=e.inputTimeScale;for(let o=0;o<i;o++){const i=e.samples[o];i.pts=Rbe(i.pts-r.baseTime*s/r.timescale,t*s)/s,i.dts=Rbe(i.dts-n.baseTime*s/n.timescale,t*s)/s}const a=e.samples;return e.samples=[],{samples:a}}function Obe(e,t,r){const n=e.samples.length;if(!n)return;const i=e.inputTimeScale;for(let a=0;a<n;a++){const n=e.samples[a];n.pts=Rbe(n.pts-r.baseTime*i/r.timescale,t*i)/i}e.samples.sort(((e,t)=>e.pts-t.pts));const s=e.samples;return e.samples=[],{samples:s}}function Nbe(e,t,r=!1){return void 0!==(null==e?void 0:e.start)?(e.start+(r?e.duration:0))/e.timescale:t}function jbe(e,t,r){const n=e.codec;if(n&&n.length>4)return n;if(t===Epe){if("ec-3"===n||"ac-3"===n||"alac"===n)return n;if("fLaC"===n||"Opus"===n){return fge(n,!1)}return r.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"}return r.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1"}try{Abe=self.performance.now.bind(self.performance)}catch(mEe){Abe=Date.now}const Lbe=[{demux:class{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,r,n){const i=this.videoTrack=qve("video",1),s=this.audioTrack=qve("audio",1),a=this.txtTrack=qve("text",1);if(this.id3Track=qve("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const o=$pe(e);if(o.video){const{id:e,timescale:t,codec:r,supplemental:n}=o.video;i.id=e,i.timescale=a.timescale=t,i.codec=r,i.supplemental=n}if(o.audio){const{id:e,timescale:t,codec:r}=o.audio;s.id=e,s.timescale=t,s.codec=r}a.id=Ope.text,i.sampleDuration=0,i.duration=s.duration=n}resetContiguity(){this.remainderData=null}static probe(e){return function(e){const t=e.byteLength;for(let r=0;r<t;){const n=Lpe(e,r);if(n>8&&109===e[r+4]&&111===e[r+5]&&111===e[r+6]&&102===e[r+7])return!0;r=n>1?r+n:t}return!1}(e)}demux(e,t){this.timeOffset=t;let r=e;const n=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=Qpe(this.remainderData,e));const t=function(e){const t={valid:null,remainder:null},r=Upe(e,["moof"]);if(r.length<2)return t.remainder=e,t;const n=r[r.length-1];return t.valid=e.slice(0,n.byteOffset-8),t.remainder=e.slice(n.byteOffset-8),t}(r);this.remainderData=t.remainder,n.samples=t.valid||new Uint8Array}else n.samples=r;const s=this.extractID3Track(n,t);return i.samples=Ype(t,n),{videoTrack:n,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,r=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const n=this.extractID3Track(t,this.timeOffset);return r.samples=Ype(e,t),{videoTrack:t,audioTrack:qve(),id3Track:n,textTrack:qve()}}extractID3Track(e,t){const r=this.id3Track;if(e.samples.length){const n=Upe(e.samples,["emsg"]);n&&n.forEach((e=>{const n=function(e){const t=e[0];let r="",n="",i=0,s=0,a=0,o=0,l=0,c=0;if(0===t){for(;"\0"!==Npe(e.subarray(c,c+1));)r+=Npe(e.subarray(c,c+1)),c+=1;for(r+=Npe(e.subarray(c,c+1)),c+=1;"\0"!==Npe(e.subarray(c,c+1));)n+=Npe(e.subarray(c,c+1)),c+=1;n+=Npe(e.subarray(c,c+1)),c+=1,i=Lpe(e,12),s=Lpe(e,16),o=Lpe(e,20),l=Lpe(e,24),c=28}else if(1===t){c+=4,i=Lpe(e,c),c+=4;const t=Lpe(e,c);c+=4;const s=Lpe(e,c);for(c+=4,a=2**32*t+s,Mfe(a)||(a=Number.MAX_SAFE_INTEGER,ope.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Lpe(e,c),c+=4,l=Lpe(e,c),c+=4;"\0"!==Npe(e.subarray(c,c+1));)r+=Npe(e.subarray(c,c+1)),c+=1;for(r+=Npe(e.subarray(c,c+1)),c+=1;"\0"!==Npe(e.subarray(c,c+1));)n+=Npe(e.subarray(c,c+1)),c+=1;n+=Npe(e.subarray(c,c+1)),c+=1}return{schemeIdUri:r,value:n,timeScale:i,presentationTime:a,presentationTimeDelta:s,eventDuration:o,id:l,payload:e.subarray(c,e.byteLength)}}(e);if(sbe.test(n.schemeIdUri)){const e=abe(n,t);let i=4294967295===n.eventDuration?Number.POSITIVE_INFINITY:n.eventDuration/n.timeScale;i<=.001&&(i=Number.POSITIVE_INFINITY);const s=n.payload;r.samples.push({data:s,len:s.byteLength,dts:e,pts:e,type:zve.emsg,duration:i})}else if(this.config.enableEmsgKLVMetadata&&n.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const e=abe(n,t);r.samples.push({data:n.payload,len:n.payload.byteLength,dts:e,pts:e,type:zve.misbklv,duration:Number.POSITIVE_INFINITY})}}))}return r}demuxSampleAes(e,t,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}},remux:class extends tpe{constructor(e,t,r,n){super("passthrough-remuxer",n),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,r,n){this.audioCodec=t,this.videoCodec=r,this.generateInitSegment(e,n),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:r,videoCodec:n}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const{audio:i,video:s}=this.initData=$pe(e);if(t)!function(e,t){if(!e||!t)return;const r=t.keyId;r&&t.isCommonEncryption&&Gpe(e,((e,t)=>{const n=e.subarray(8,24);n.some((e=>0!==e))||(ope.log(`[eme] Patching keyId in 'enc${t?"a":"v"}>sinf>>tenc' box: ${dpe(n)} -> ${dpe(r)}`),e.set(r,8))}))}(e,t);else{const e=i||s;null!=e&&e.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${e.codec}")!`)}i&&(r=jbe(i,Epe,this)),s&&(n=jbe(s,Tpe,this));const a={};i&&s?a.audiovideo={container:"video/mp4",codec:r+","+n,supplemental:s.supplemental,encrypted:s.encrypted,initSegment:e,id:"main"}:i?a.audio={container:"audio/mp4",codec:r,encrypted:i.encrypted,initSegment:e,id:"audio"}:s?a.video={container:"video/mp4",codec:n,supplemental:s.supplemental,encrypted:s.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=a}remux(e,t,r,n,i,s){var a,o;let{initPTS:l,lastEndTime:c}=this;const u={audio:void 0,video:void 0,text:n,id3:r,initSegment:void 0};Lfe(c)||(c=this.lastEndTime=i||0);const d=t.samples;if(!d.length)return u;const h={initPTS:void 0,timescale:void 0,trackId:void 0};let f=this.initData;if(null!=(a=f)&&a.length||(this.generateInitSegment(d),f=this.initData),null==(o=f)||!o.length)return this.warn("Failed to generate initSegment."),u;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const p=function(e,t,r){const n={},i=Upe(e,["moof","traf"]);for(let s=0;s<i.length;s++){const e=i[s],a=Upe(e,["tfhd"])[0],o=Lpe(a,4),l=t[o];if(!l)continue;n[o]||(n[o]={start:NaN,duration:0,sampleCount:0,timescale:l.timescale,type:l.type});const c=n[o],u=Upe(e,["tfdt"])[0];if(u){const e=u[0];let t=Lpe(u,4);1===e&&(t===Rpe?r.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(t*=Rpe+1,t+=Lpe(u,8))),Lfe(t)&&(!Lfe(c.start)||t<c.start)&&(c.start=t)}const d=l.default,h=Lpe(a,0)|(null==d?void 0:d.flags);let f=(null==d?void 0:d.duration)||0;8&h&&(f=Lpe(a,2&h?12:8));const p=Upe(e,["trun"]);let g=c.start||0,m=0,y=f;for(let t=0;t<p.length;t++){const e=p[t],r=Lpe(e,4),n=c.sampleCount;c.sampleCount+=r;const i=1&e[3],s=4&e[3],a=1&e[2],o=2&e[2],l=4&e[2],u=8&e[2];let d=8,h=r;for(i&&(d+=4),s&&r&&(1&e[d+1]||void 0!==c.keyFrameIndex||(c.keyFrameIndex=n),d+=4,a?(y=Lpe(e,d),d+=4):y=f,o&&(d+=4),u&&(d+=4),g+=y,m+=y,h--);h--;)a?(y=Lpe(e,d),d+=4):y=f,o&&(d+=4),l&&(1&e[d+1]||void 0===c.keyFrameIndex&&(c.keyFrameIndex=c.sampleCount-(h+1),c.keyFrameStart=g),d+=4),u&&(d+=4),g+=y,m+=y;!m&&f&&(m+=f*r)}c.duration+=m}if(!Object.keys(n).some((e=>n[e].duration))){let t=1/0,r=0;const i=Upe(e,["sidx"]);for(let e=0;e<i.length;e++){const n=Bpe(i[e]);if(null!=n&&n.references){t=Math.min(t,n.earliestPresentationTime/n.timescale);const e=n.references.reduce(((e,t)=>e+t.info.duration||0),0);r=Math.max(r,e+n.earliestPresentationTime/n.timescale)}}r&&Lfe(r)&&Object.keys(n).forEach((e=>{n[e].duration||(n[e].duration=r*n[e].timescale-n[e].start)}))}return n}(d,f,this),g=f.audio?p[f.audio.id]:null,m=f.video?p[f.video.id]:null,y=Nbe(m,1/0),v=Nbe(g,1/0),b=Nbe(m,0,!0),w=Nbe(g,0,!0);let x=i,S=0;const E=g&&(!m||!l&&v<y||l&&l.trackId===f.audio.id),T=E?g:m;if(T){const e=T.timescale,t=T.start-i*e,r=E?f.audio.id:f.video.id;x=T.start/e,S=E?w-v:b-y,!s&&l||!function(e,t,r,n){if(null===e)return!0;const i=Math.max(n,1),s=t-e.baseTime/e.timescale;return Math.abs(s-r)>i}(l,x,i,S)&&e===l.timescale||(l&&this.warn(`Timestamps at playlist time: ${s?"":"~"}${i} ${t/e} != initPTS: ${l.baseTime/l.timescale} (${l.baseTime}/${l.timescale}) trackId: ${l.trackId}`),this.log(`Found initPTS at playlist time: ${i} offset: ${x-i} (${t}/${e}) trackId: ${r}`),l=null,h.initPTS=t,h.timescale=e,h.trackId=r)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${i}`);l?(h.initPTS=l.baseTime,h.timescale=l.timescale,h.trackId=l.trackId):(h.timescale&&void 0!==h.trackId&&void 0!==h.initPTS||(this.warn("Could not set initPTS"),h.initPTS=x,h.timescale=1,h.trackId=-1),this.initPTS=l={baseTime:h.initPTS,timescale:h.timescale,trackId:h.trackId});const k=x-l.baseTime/l.timescale,A=k+S;S>0?this.lastEndTime=A:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const _=!!f.audio,C=!!f.video;let P="";_&&(P+="audio"),C&&(P+="video");const D={data1:d,startPTS:k,startDTS:k,endPTS:A,endDTS:A,type:P,hasAudio:_,hasVideo:C,nb:1,dropped:0,encrypted:!!f.audio&&f.audio.encrypted||!!f.video&&f.video.encrypted};u.audio=_&&!C?D:void 0,u.video=C?D:void 0;const R=null==m?void 0:m.sampleCount;if(R){const e=m.keyFrameIndex,t=-1!==e;D.nb=R,D.dropped=0===e||this.isVideoContiguous?0:t?e:R,D.independent=t,D.firstKeyFrame=e,t&&m.keyFrameStart&&(D.firstKeyFramePTS=(m.keyFrameStart-l.baseTime)/l.timescale),this.isVideoContiguous||(u.independent=t),this.isVideoContiguous||(this.isVideoContiguous=t),D.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${e}/${R} dropped: ${D.dropped} start: ${D.firstKeyFramePTS||"NA"}`)}return u.initSegment=h,u.id3=Ibe(r,i,l,l),n.samples.length&&(u.text=Obe(n,i,l)),u}}},{demux:fbe,remux:Dbe},{demux:class extends Vve{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,r,n){super.resetInitSegment(e,t,r,n),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const r=Tve(e,0);let n=(null==r?void 0:r.length)||0;if(tbe(e,n))return!1;for(let i=e.length;n<i;n++)if(Pve(e,n))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&kve(e,t)&&_ve(e,t)<=e.length-t}(e,t)}appendFrame(e,t,r){Dve(e,this.observer,t,r,e.manifestCodec);const n=Ive(e,t,r,this.basePTS,this.frameIndex);if(n&&0===n.missing)return n}},remux:Dbe},{demux:class extends Vve{resetInitSegment(e,t,r,n){super.resetInitSegment(e,t,r,n),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=Tve(e,0);let r=(null==t?void 0:t.length)||0;if(t&&11===e[r]&&119===e[r+1]&&void 0!==$ve(t)&&rbe(e,r)<=16)return!1;for(let n=e.length;r<n;r++)if(tbe(e,r))return ope.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return Zve(e,t)&&4<=e.length-t}(e,t)}appendFrame(e,t,r){if(null!==this.basePTS)return Xve(e,t,r,this.basePTS,this.frameIndex)}},remux:Dbe}];Lbe.splice(2,0,{demux:nbe,remux:Dbe});class Mbe{constructor(e,t,r,n,i,s){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=r,this.id=i,this.logger=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,r,n){const i=r.transmuxing;i.executeStart=Abe();let s=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:o}=this;n&&(this.currentTransmuxState=n);const{contiguous:l,discontinuity:c,trackSwitch:u,accurateTimeOffset:d,timeOffset:h,initSegmentChange:f}=n||a,{audioCodec:p,videoCodec:g,defaultInitPts:m,duration:y,initSegmentData:v}=o,b=function(e,t){let r=null;e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(r=t);return r}(s,t);if(b&&Qme(b.method)){const e=this.getDecrypter(),t=Yme(b.method);if(!e.isSync())return this.asyncResult=!0,this.decryptionPromise=e.webCryptoDecrypt(s,b.key.buffer,b.iv.buffer,t).then((e=>{const t=this.push(e,null,r);return this.decryptionPromise=null,t})),this.decryptionPromise;{let n=e.softwareDecrypt(s,b.key.buffer,b.iv.buffer,t);if(r.part>-1){const t=e.flush();n=t?t.buffer:t}if(!n)return i.executeEnd=Abe(),Fbe(r);s=new Uint8Array(n)}}const w=this.needsProbing(c,u);if(w){const e=this.configureTransmuxer(s);if(e)return this.logger.warn(`[transmuxer] ${e.message}`),this.observer.emit($fe.ERROR,$fe.ERROR,{type:Ufe.MEDIA_ERROR,details:Bfe.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),i.executeEnd=Abe(),Fbe(r)}(c||u||f||w)&&this.resetInitSegment(v,p,g,y,t),(c||f||w)&&this.resetInitialTimestamp(m),l||this.resetContiguity();const x=this.transmux(s,b,h,d,r);this.asyncResult=Ube(x);const S=this.currentTransmuxState;return S.contiguous=!0,S.discontinuity=!1,S.trackSwitch=!1,i.executeEnd=Abe(),x}flush(e){const t=e.transmuxing;t.executeStart=Abe();const{decrypter:r,currentTransmuxState:n,decryptionPromise:i}=this;if(i)return this.asyncResult=!0,i.then((()=>this.flush(e)));const s=[],{timeOffset:a}=n;if(r){const t=r.flush();t&&s.push(this.push(t.buffer,null,e))}const{demuxer:o,remuxer:l}=this;if(!o||!l){t.executeEnd=Abe();const r=[Fbe(e)];return this.asyncResult?Promise.resolve(r):r}const c=o.flush(a);return Ube(c)?(this.asyncResult=!0,c.then((t=>(this.flushRemux(s,t,e),s)))):(this.flushRemux(s,c,e),this.asyncResult?Promise.resolve(s):s)}flushRemux(e,t,r){const{audioTrack:n,videoTrack:i,id3Track:s,textTrack:a}=t,{accurateTimeOffset:o,timeOffset:l}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${r.sn}${r.part>-1?" part: "+r.part:""} of ${this.id===Hfe?"level":"track"} ${r.level}`);const c=this.remuxer.remux(n,i,s,a,l,o,!0,this.id);e.push({remuxResult:c,chunkMeta:r}),r.transmuxing.executeEnd=Abe()}resetInitialTimestamp(e){const{demuxer:t,remuxer:r}=this;t&&r&&(t.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,r,n,i){const{demuxer:s,remuxer:a}=this;s&&a&&(s.resetInitSegment(e,t,r,n),a.resetInitSegment(e,t,r,i))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,r,n,i){let s;return s=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,r,n,i):this.transmuxUnencrypted(e,r,n,i),s}transmuxUnencrypted(e,t,r,n){const{audioTrack:i,videoTrack:s,id3Track:a,textTrack:o}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i,s,a,o,t,r,!1,this.id),chunkMeta:n}}transmuxSampleAes(e,t,r,n,i){return this.demuxer.demuxSampleAes(e,t,r).then((e=>({remuxResult:this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,r,n,!1,this.id),chunkMeta:i})))}configureTransmuxer(e){const{config:t,observer:r,typeSupported:n}=this;let i;for(let u=0,d=Lbe.length;u<d;u++){var s;if(null!=(s=Lbe[u].demux)&&s.probe(e,this.logger)){i=Lbe[u];break}}if(!i)return new Error("Failed to find demuxer by probing fragment data");const a=this.demuxer,o=this.remuxer,l=i.remux,c=i.demux;o&&o instanceof l||(this.remuxer=new l(r,t,n,this.logger)),a&&a instanceof c||(this.demuxer=new c(r,t,n,this.logger),this.probe=c.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Ame(this.config)),e}}const Fbe=e=>({remuxResult:{},chunkMeta:e});function Ube(e){return"then"in e&&e.then instanceof Function}class Bbe{constructor(e,t,r,n,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=r,this.duration=n,this.defaultInitPts=i||null}}class $be{constructor(e,t,r,n,i,s){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=r,this.trackSwitch=n,this.timeOffset=i,this.initSegmentChange=s}}let zbe=0;class qbe{constructor(e,t,r,n){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=zbe++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=e=>{const t=e.data,r=this.hls;if(r&&null!=t&&t.event&&t.instanceNo===this.instanceNo)switch(t.event){case"init":{var n;const e=null==(n=this.workerContext)?void 0:n.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":r.logger[t.data.logType]&&r.logger[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.part=this.part,t.data.id=this.id,r.trigger(t.event,t.data)}},this.onWorkerError=e=>{if(!this.hls)return;const t=new Error(`${e.message}  (${e.filename}:${e.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger($fe.ERROR,{type:Ufe.OTHER_ERROR,details:Bfe.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:t})};const i=e.config;this.hls=e,this.id=t,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=r,this.onFlush=n;const s=(e,t)=>{(t=t||{}).frag=this.frag||void 0,e===$fe.ERROR&&(t.parent=this.id,t.part=this.part,this.error=t.error),this.hls.trigger(e,t)};this.observer=new vve,this.observer.on($fe.FRAG_DECRYPTED,s),this.observer.on($fe.ERROR,s);const a=yge(i.preferManagedMediaSource);if(this.useWorker&&"undefined"!=typeof Worker){const r=this.hls.logger;if(i.workerPath||"function"==typeof __HLS_WORKER_BUNDLE__){try{i.workerPath?(r.log(`loading Web Worker ${i.workerPath} for "${t}"`),this.workerContext=function(e){const t=wve[e];if(t)return t.clientCount++,t;const r=new self.URL(e,self.location.href).href,n={worker:new self.Worker(r),scriptURL:r,clientCount:1};return wve[e]=n,n}(i.workerPath)):(r.log(`injecting Web Worker for "${t}"`),this.workerContext=function(){const e=wve[bve];if(e)return e.clientCount++,e;const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),r=self.URL.createObjectURL(t),n={worker:new self.Worker(r),objectURL:r,clientCount:1};return wve[bve]=n,n}());const{worker:e}=this.workerContext;e.addEventListener("message",this.onWorkerMessage),e.addEventListener("error",this.onWorkerError),e.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:a,id:t,config:Lge(i)})}catch(mEe){r.warn(`Error setting up "${t}" Web Worker, fallback to inline`,mEe),this.terminateWorker(),this.error=null,this.transmuxer=new Mbe(this.observer,a,i,"",t,e.logger)}return}}this.transmuxer=new Mbe(this.observer,a,i,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=zbe++;const t=this.hls.config,r=yge(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:r,id:this.id,config:Lge(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),function(e){const t=wve[e||bve];if(t&&1===t.clientCount--){const{worker:r,objectURL:n}=t;delete wve[e||bve],n&&self.URL.revokeObjectURL(n),r.terminate()}}(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,r,n,i,s,a,o,l,c){var u,d;l.transmuxing.start=self.performance.now();const{instanceNo:h,transmuxer:f}=this,p=s?s.start:i.start,g=i.decryptdata,m=this.frag,y=!(m&&i.cc===m.cc),v=!(m&&l.level===m.level),b=m?l.sn-m.sn:-1,w=this.part?l.part-this.part.index:-1,x=0===b&&l.id>1&&l.id===(null==m?void 0:m.stats.chunkCount),S=!v&&(1===b||0===b&&(1===w||x&&w<=0)),E=self.performance.now();(v||b||0===i.stats.parsing.start)&&(i.stats.parsing.start=E),!s||!w&&S||(s.stats.parsing.start=E);const T=!(m&&(null==(u=i.initSegment)?void 0:u.url)===(null==(d=m.initSegment)?void 0:d.url)),k=new $be(y,S,o,v,p,T);if(!S||y||T){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${i.type} sn: ${l.sn}${l.part>-1?" part: "+l.part:""} ${this.id===Hfe?"level":"track"}: ${l.level} id: ${l.id}\n        discontinuity: ${y}\n        trackSwitch: ${v}\n        contiguous: ${S}\n        accurateTimeOffset: ${o}\n        timeOffset: ${p}\n        initSegmentChange: ${T}`);const e=new Bbe(r,n,t,a,c);this.configureTransmuxer(e)}if(this.frag=i,this.part=s,this.workerContext)this.workerContext.worker.postMessage({instanceNo:h,cmd:"demux",data:e,decryptdata:g,chunkMeta:l,state:k},e instanceof ArrayBuffer?[e]:[]);else if(f){const t=f.push(e,g,l,k);Ube(t)?t.then((e=>{this.handleTransmuxComplete(e)})).catch((e=>{this.transmuxerError(e,l,"transmuxer-interface push error")})):this.handleTransmuxComplete(t)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:r}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(r){const t=r.flush(e);Ube(t)?t.then((t=>{this.handleFlushResult(t,e)})).catch((t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")})):this.handleFlushResult(t,e)}}transmuxerError(e,t,r){this.hls&&(this.error=e,this.hls.trigger($fe.ERROR,{type:Ufe.MEDIA_ERROR,details:Bfe.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,t){e.forEach((e=>{this.handleTransmuxComplete(e)})),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:r}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):r&&r.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}class Vbe extends tpe{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,r){const n=null==t?void 0:t.renditionReports;if(n){let s=-1;for(let r=0;r<n.length;r++){const a=n[r];let o;try{o=new self.URL(a.URI,t.url).href}catch(i){this.warn(`Could not construct new URL for Rendition Report: ${i}`),o=a.URI||""}if(o===e){s=r;break}o===e.substring(0,o.length)&&(s=r)}if(-1!==s){const e=n[s],i=parseInt(e["LAST-MSN"])||t.lastPartSn;let a=parseInt(e["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const e=Math.min(t.age-t.partTarget,t.targetduration);a>=0&&e>t.partTarget&&(a+=1)}const o=r&&Rge(r);return new Ige(i,a>=0?a:void 0,o)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(r){this.warn(`Could not construct new URL with HLS Delivery Directives: ${r}`)}return e}playlistLoaded(e,t,r){const{details:n,stats:i}=t,s=self.performance.now(),a=i.loading.first?Math.max(0,s-i.loading.first):0;n.advancedDateTime=Date.now()-a;const o=this.hls.config.timelineOffset;if(o!==n.appliedTimelineOffset){const e=Math.max(o||0,0);n.appliedTimelineOffset=e,n.fragments.forEach((t=>{t.setStart(t.playlistOffset+e)}))}if(n.live||null!=r&&r.live){const o="levelInfo"in t?t.levelInfo:t.track;if(n.reloaded(r),r&&n.fragments.length>0){jye(r,n,this);const e=n.playlistParsingError;if(e){this.warn(e);const r=this.hls;if(!r.config.ignorePlaylistParsingErrors){var l;const{networkDetails:s}=t;return void r.trigger($fe.ERROR,{type:Ufe.NETWORK_ERROR,details:Bfe.LEVEL_PARSING_ERROR,fatal:!1,url:n.url,error:e,reason:e.message,level:t.level||void 0,parent:null==(l=n.fragments[0])?void 0:l.type,networkDetails:s,stats:i})}n.playlistParsingError=null}}-1===n.requestScheduled&&(n.requestScheduled=i.loading.start);const c=this.hls.mainForwardBufferInfo,u=c?c.end-c.len:0,d=Uye(n,1e3*(n.edge-u));if(n.requestScheduled+d<s?n.requestScheduled=s:n.requestScheduled+=d,this.log(`live playlist ${e} ${n.advanced?"REFRESHED "+n.lastPartSn+"-"+n.lastPartIndex:n.updated?"UPDATED":"MISSED"}`),!this.canLoad||!n.live)return;let h,f,p;if(n.canBlockReload&&n.endSN&&n.advanced){const e=this.hls.config.lowLatencyMode,i=n.lastPartSn,a=n.endSN,l=n.lastPartIndex,c=i===a;-1!==l?c?(f=a+1,p=e?0:l):(f=i,p=e?l+1:n.maxPartIndex):f=a+1;const u=n.age,d=u+n.ageHeader;let g=Math.min(d-n.partTarget,1.5*n.targetduration);if(g>0){if(d>3*n.targetduration)this.log(`Playlist last advanced ${u.toFixed(2)}s ago. Omitting segment and part directives.`),f=void 0,p=void 0;else if(null!=r&&r.tuneInGoal&&d-n.partTarget>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${g} with playlist age: ${n.age}`),g=0;else{const e=Math.floor(g/n.targetduration);if(f+=e,void 0!==p){p+=Math.round(g%n.targetduration/n.partTarget)}this.log(`CDN Tune-in age: ${n.ageHeader}s last advanced ${u.toFixed(2)}s goal: ${g} skip sn ${e} to part ${p}`)}n.tuneInGoal=g}if(h=this.getDeliveryDirectives(n,t.deliveryDirectives,f,p),e||!c)return n.requestScheduled=s,void this.loadingPlaylist(o,h)}else(n.canBlockReload||n.canSkipUntil)&&(h=this.getDeliveryDirectives(n,t.deliveryDirectives,f,p));h&&void 0!==f&&n.canBlockReload&&(n.requestScheduled=i.loading.first+Math.max(d-2*a,d/2)),this.scheduleLoading(o,h,n)}else this.clearTimer()}scheduleLoading(e,t,r){const n=r||e.details;if(!n)return void this.loadingPlaylist(e,t);const i=self.performance.now(),s=n.requestScheduled;if(i>=s)return void this.loadingPlaylist(e,t);const a=s-i;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(a)} ms`),this.clearTimer(),this.timer=self.setTimeout((()=>this.loadingPlaylist(e,t)),a)}getDeliveryDirectives(e,t,r,n){let i=Rge(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(r=t.msn,n=t.part,i=Cge),new Ige(r,n,i)}checkRetry(e){const t=e.details,r=Yge(e),n=e.errorAction,{action:i,retryCount:s=0,retryConfig:a}=n||{},o=!!n&&!!a&&(i===ome||!n.resolved&&i===sme);if(o){var l;if(s>=a.maxNumRetry)return!1;if(r&&null!=(l=e.context)&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${s+1}/${a.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const e=eme(a,s);this.clearTimer(),this.timer=self.setTimeout((()=>this.loadPlaylist()),e),this.warn(`Retrying playlist loading ${s+1}/${a.maxNumRetry} after "${t}" in ${e}ms`)}e.levelRetry=!0,n.resolved=!0}return o}}function Kbe(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Hbe(e[r].attrs,t[r].attrs))return!1;return!0}function Hbe(e,t,r){const n=e["STABLE-RENDITION-ID"];return n&&!r?n===t["STABLE-RENDITION-ID"]:!(r||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some((r=>e[r]!==t[r]))}function Gbe(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}class Wbe{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,r){if(null===this.queues||null===this.tracks)return;const n=this.queues[t];n.push(e),1!==n.length||r||this.executeNext(t)}appendBlocker(e){return new Promise((t=>{const r={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(r,e)}))}prependBlocker(e){return new Promise((t=>{if(this.queues){const r={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(r)}}))}removeBlockers(){null!==this.queues&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach((e=>{var t;const r=null==(t=e[0])?void 0:t.label;"async-blocker"!==r&&"async-blocker-prepend"!==r||(e[0].execute(),e.splice(0,1))}))}unblockAudio(e){if(null===this.queues)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(null===this.queues||null===this.tracks)return;const t=this.queues[e];if(t.length){const i=t[0];try{i.execute()}catch(n){var r;if(i.onError(n),null===this.queues||null===this.tracks)return;const t=null==(r=this.tracks[e])?void 0:r.buffer;null!=t&&t.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){null!==this.queues&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return(null==(t=this.queues)?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return null===e||null===t?"<destroyed>":`\n${this.list("video")}\n${this.list("audio")}\n${this.list("audiovideo")}}`}list(e){var t,r;return null!=(t=this.queues)&&t[e]||null!=(r=this.tracks)&&r[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const r=null==(t=this.tracks)?void 0:t[e],n=null==r?void 0:r.buffer;return n?`SourceBuffer${n.updating?" updating":""}${r.ended?" ended":""}${r.ending?" ending":""}`:"none"}listOps(e){var t;return(null==(t=this.queues)?void 0:t[e].map((e=>e.label)).join(", "))||""}}const Qbe=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,Ybe="HlsJsTrackRemovedError";class Xbe extends Error{constructor(e){super(e),this.name=Ybe}}function Jbe(e){const t=e.querySelectorAll("source");[].slice.call(t).forEach((t=>{e.removeChild(t)}))}function Zbe(e){return"audio"===e?1:0}class ewe{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on($fe.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on($fe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on($fe.MANIFEST_PARSED,this.onManifestParsed,this),e.on($fe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on($fe.BUFFER_CODECS,this.onBufferCodecs,this),e.on($fe.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off($fe.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off($fe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off($fe.MANIFEST_PARSED,this.onManifestParsed,this),e.off($fe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off($fe.BUFFER_CODECS,this.onBufferCodecs,this),e.off($fe.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const r=this.hls.levels[t.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const r=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,r.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Lfe(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);const e=this.hls.levels;if(e.length){const t=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${r}: ${e[r].height}p@${e[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=r,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const r=t.filter(((t,r)=>this.isLevelAllowed(t)&&r<=e));return this.clientRect=null,ewe.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,t.width||t.height||(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(Jce){}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some((t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height))}static getMaxLevelByMediaSize(e,t,r){if(null==e||!e.length)return-1;let n=e.length-1;const i=Math.max(t,r);for(let o=0;o<e.length;o+=1){const t=e[o];if((t.width>=i||t.height>=i)&&(s=t,!(a=e[o+1])||s.width!==a.width||s.height!==a.height)){n=o;break}}var s,a;return n}}const twe={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},rwe={HLS:"h"};class nwe{constructor(e,t){Array.isArray(e)&&(e=e.map((e=>e instanceof nwe?e:new nwe(e)))),this.value=e,this.params=t}}function iwe(e,t,r,n){return new Error(`failed to ${e} "${i=t,Array.isArray(i)?JSON.stringify(i):i instanceof Map?"Map{}":i instanceof Set?"Set{}":"object"==typeof i?JSON.stringify(i):String(i)}" as ${r}`,{cause:n});var i}function swe(e,t,r){return iwe("serialize",e,t,r)}class awe{constructor(e){this.description=e}}const owe="Bare Item";function lwe(e){if(!1===ArrayBuffer.isView(e))throw swe(e,"Byte Sequence");return`:${t=e,btoa(String.fromCharCode(...t))}:`;var t}function cwe(e){if(function(e){return e<-999999999999999||999999999999999<e}(e))throw swe(e,"Integer");return e.toString()}function uwe(e,t){if(e<0)return-uwe(-e,t);const r=Math.pow(10,t);if(Math.abs(e*r%1-.5)<Number.EPSILON){const t=Math.floor(e*r);return(t%2==0?t:t+1)/r}return Math.round(e*r)/r}function dwe(e){const t=uwe(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw swe(e,"Decimal");const r=t.toString();return r.includes(".")?r:`${r}.0`}const hwe=/[\x00-\x1f\x7f]+/;function fwe(e){const t=(r=e).description||r.toString().slice(7,-1);var r;if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t))throw swe(t,"Token");return t}function pwe(e){switch(typeof e){case"number":if(!Lfe(e))throw swe(e,owe);return Number.isInteger(e)?cwe(e):dwe(e);case"string":return function(e){if(hwe.test(e))throw swe(e,"String");return`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(e);case"symbol":return fwe(e);case"boolean":return function(e){if("boolean"!=typeof e)throw swe(e,"Boolean");return e?"?1":"?0"}(e);case"object":if(e instanceof Date)return function(e){return`@${cwe(e.getTime()/1e3)}`}(e);if(e instanceof Uint8Array)return lwe(e);if(e instanceof awe)return fwe(e);default:throw swe(e,owe)}}function gwe(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw swe(e,"Key");return e}function mwe(e){return null==e?"":Object.entries(e).map((([e,t])=>!0===t?`;${gwe(e)}`:`;${gwe(e)}=${pwe(t)}`)).join("")}function ywe(e){return e instanceof nwe?`${pwe(e.value)}${mwe(e.params)}`:pwe(e)}function vwe(e,t={whitespace:!0}){if("object"!=typeof e||null==e)throw swe(e,"Dict");const r=e instanceof Map?e.entries():Object.entries(e),n=(null==t?void 0:t.whitespace)?" ":"";return Array.from(r).map((([e,t])=>{t instanceof nwe==!1&&(t=new nwe(t));let r=gwe(e);var n;return!0===t.value?r+=mwe(t.params):(r+="=",Array.isArray(t.value)?r+=`(${(n=t).value.map(ywe).join(" ")})${mwe(n.params)}`:r+=ywe(t)),r})).join(`,${n}`)}function bwe(e,t){return vwe(e,t)}const wwe="CMCD-Object",xwe="CMCD-Request",Swe="CMCD-Session",Ewe="CMCD-Status",Twe={br:wwe,ab:wwe,d:wwe,ot:wwe,tb:wwe,tpb:wwe,lb:wwe,tab:wwe,lab:wwe,url:wwe,pb:xwe,bl:xwe,tbl:xwe,dl:xwe,ltc:xwe,mtp:xwe,nor:xwe,nrr:xwe,rc:xwe,sn:xwe,sta:xwe,su:xwe,ttfb:xwe,ttfbb:xwe,ttlb:xwe,cmsdd:xwe,cmsds:xwe,smrt:xwe,df:xwe,cs:xwe,ts:xwe,cid:Swe,pr:Swe,sf:Swe,sid:Swe,st:Swe,v:Swe,msd:Swe,bs:Ewe,bsd:Ewe,cdn:Ewe,rtp:Ewe,bg:Ewe,pt:Ewe,ec:Ewe,e:Ewe},kwe=xwe;function Awe(e,t){const r={};if(!e)return r;const n=Object.keys(e),i=t?(s=t,Object.keys(s).reduce(((e,t)=>{var r;return null===(r=s[t])||void 0===r||r.forEach((r=>e[r]=t)),e}),{})):{};var s;return n.reduce(((t,r)=>{var n;const s=Twe[r]||i[r]||kwe;return(null!==(n=t[s])&&void 0!==n?n:t[s]={})[r]=e[r],t}),r)}const _we="event";const Cwe=e=>Math.round(e),Pwe=(e,t)=>Array.isArray(e)?e.map((e=>Pwe(e,t))):e instanceof nwe&&"string"==typeof e.value?new nwe(Pwe(e.value,t),e.params):(t.baseUrl&&(e=function(e,t){const r=new URL(e),n=new URL(t);if(r.origin!==n.origin)return e;const i=r.pathname.split("/").slice(1),s=n.pathname.split("/").slice(1,-1);for(;i[0]===s[0];)i.shift(),s.shift();for(;s.length;)s.shift(),i.unshift("..");return i.join("/")+r.search+r.hash}(e,t.baseUrl)),1===t.version?encodeURIComponent(e):e),Dwe=e=>100*Cwe(e/100),Rwe={br:Cwe,d:Cwe,bl:Dwe,dl:Dwe,mtp:Dwe,nor:(e,t)=>{let r=e;return t.version>=2&&(e instanceof nwe&&"string"==typeof e.value?r=new nwe([e]):"string"==typeof e&&(r=[e])),Pwe(r,t)},rtp:Dwe,tb:Cwe},Iwe="request",Owe="response",Nwe=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],jwe=["e"],Lwe=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function Mwe(e){return Lwe.test(e)}const Fwe=["d","dl","nor","ot","rtp","su"];const Uwe=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];const Bwe=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function $we(e){return Bwe.includes(e)||Mwe(e)}const zwe={[Owe]:function(e){return Nwe.includes(e)||Fwe.includes(e)||Uwe.includes(e)||Mwe(e)},[_we]:function(e){return Nwe.includes(e)||jwe.includes(e)||Mwe(e)},[Iwe]:function(e){return Nwe.includes(e)||Fwe.includes(e)||Mwe(e)}};function qwe(e,t={}){const r={};if(null==e||"object"!=typeof e)return r;const n=t.version||e.v||1,i=t.reportingMode||Iwe,s=1===n?$we:zwe[i];let a=Object.keys(e).filter(s);const o=t.filter;"function"==typeof o&&(a=a.filter(o));const l=i===Owe||i===_we;l&&!a.includes("ts")&&a.push("ts"),n>1&&!a.includes("v")&&a.push("v");const c=Jfe({},Rwe,t.formatters),u={version:n,reportingMode:i,baseUrl:t.baseUrl};return a.sort().forEach((t=>{let i=e[t];const s=c[t];if("function"==typeof s&&(i=s(i,u)),"v"===t){if(1===n)return;i=n}"pr"==t&&1===i||(l&&"ts"===t&&!Lfe(i)&&(i=Date.now()),function(e){return"number"==typeof e?Lfe(e):null!=e&&""!==e&&!1!==e}(i)&&(function(e){return["ot","sf","st","e","sta"].includes(e)}(t)&&"string"==typeof i&&(i=new awe(i)),r[t]=i))})),r}function Vwe(e,t,r){return Jfe(e,function(e,t={}){const r={};if(!e)return r;const n=Awe(qwe(e,t),null==t?void 0:t.customHeaderMap);return Object.entries(n).reduce(((e,[t,r])=>{const n=bwe(r,{whitespace:!1});return n&&(e[t]=n),e}),r)}(t,r))}function Kwe(e,t={}){if(!e)return"";const r=function(e,t={}){return e?bwe(qwe(e,t),{whitespace:!1}):""}(e,t);return encodeURIComponent(r)}const Hwe=/CMCD=[^&#]+/;function Gwe(e,t,r){const n=function(e,t={}){return e?`CMCD=${Kwe(e,t)}`:""}(t,r);if(!n)return e;if(Hwe.test(e))return e.replace(Hwe,n);const i=e.includes("?")?"&":"?";return`${e}${i}${n}`}function Wwe(e,t,r,n){e&&Object.keys(t).forEach((i=>{const s=e.filter((e=>e.groupId===i)).map((e=>{const s=Jfe({},e);return s.details=void 0,s.attrs=new qme(s.attrs),s.url=s.attrs.URI=Qwe(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),s.groupId=s.attrs["GROUP-ID"]=t[i],s.attrs["PATHWAY-ID"]=n,s}));e.push(...s)}))}function Qwe(e,t,r,n){const{HOST:i,PARAMS:s,[r]:a}=n;let o;t&&(o=null==a?void 0:a[t],o&&(e=o));const l=new self.URL(e);return i&&!o&&(l.host=i),s&&Object.keys(s).sort().forEach((e=>{e&&l.searchParams.set(e,s[e])})),l.href}class Ywe extends tpe{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.mediaResolved=void 0,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=Ywe.CDMCleanupPromise?[Ywe.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=e=>{const{initDataType:t,initData:r}=e,n=`"${e.type}" event: init data type: "${t}"`;if(this.debug(n),null!==r){if(!this.keyFormatPromise){let e=Object.keys(this.keySystemAccessPromises);e.length||(e=cye(this.config));const t=e.map(lye).filter((e=>!!e));this.keyFormatPromise=this.getKeyFormatPromise(t)}this.keyFormatPromise.then((i=>{const s=oye(i);if("sinf"!==t||s!==rye.FAIRPLAY)return void this.log(`Ignoring "${e.type}" event with init data type: "${t}" for selected key-system ${s}`);let a;try{const e=Npe(new Uint8Array(r)),t=Wpe(Xme(JSON.parse(e).sinf));if(!t)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");a=new Uint8Array(t.subarray(8,24))}catch(d){return void this.warn(`${n} Failed to parse sinf: ${d}`)}const o=dpe(a),{keyIdToKeySessionPromise:l,mediaKeySessions:c}=this;let u=l[o];for(let e=0;e<c.length;e++){const n=c[e],i=n.decryptdata;if(!i.keyId)continue;const s=dpe(i.keyId);if(Gme(a,i.keyId)||-1!==i.uri.replace(/-/g,"").indexOf(o)){if(u=l[s],!u)continue;if(i.pssh)break;delete l[s],i.pssh=new Uint8Array(r),i.keyId=a,u=l[o]=u.then((()=>this.generateRequestWithPreferredKeySession(n,t,r,"encrypted-event-key-match"))),u.catch((e=>this.handleError(e)));break}}u||this.handleError(new Error(`Key ID ${o} not encountered in playlist. Key-system sessions ${c.length}.`))})).catch((e=>this.handleError(e)))}},this.onWaitingForKey=e=>{this.log(`"${e.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on($fe.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on($fe.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on($fe.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on($fe.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on($fe.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off($fe.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off($fe.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off($fe.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off($fe.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off($fe.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:r}=this.config,n=null==t?void 0:t[e];return n?n.licenseUrl:e===rye.WIDEVINE&&r?r:void 0}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(void 0===t)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,r=null==t?void 0:t[e];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,r=(e,t,r)=>!!e&&r.indexOf(e)===t,n=t.map((e=>e.audioCodec)).filter(r),i=t.map((e=>e.videoCodec)).filter(r);return n.length+i.length===0&&i.push("avc1.42e01e"),new Promise(((t,r)=>{const s=e=>{const a=e.shift();this.getMediaKeysPromise(a,n,i).then((e=>t({keySystem:a,mediaKeys:e}))).catch((t=>{e.length?s(e):r(t instanceof Zwe?t:new Zwe({type:Ufe.KEY_SYSTEM_ERROR,details:Bfe.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))}))};s(e)}))}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:r}=this.config;if("function"!=typeof r){let e=`Configured requestMediaKeySystemAccess is not a function ${r}`;return null===uye&&"http:"===self.location.protocol&&(e=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(e))}return r(e,t)}getMediaKeysPromise(e,t,r){var n;const i=function(e,t,r,n){let i;switch(e){case rye.FAIRPLAY:i=["cenc","sinf"];break;case rye.WIDEVINE:case rye.PLAYREADY:i=["cenc"];break;case rye.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${e}`)}return function(e,t,r,n){return[{initDataTypes:e,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:t.map((e=>({contentType:`audio/mp4; codecs=${e}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null}))),videoCapabilities:r.map((e=>({contentType:`video/mp4; codecs=${e}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null})))}]}(i,t,r,n)}(e,t,r,this.config.drmSystemOptions||{});let s=this.keySystemAccessPromises[e],a=null==(n=s)?void 0:n.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Lge(i)}`),a=this.requestMediaKeySystemAccess(e,i);const t=s=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch((t=>{this.log(`Failed to obtain access to key-system "${e}": ${t}`)})),a.then((r=>{this.log(`Access for key-system "${r.keySystem}" obtained`);const n=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const i=t.mediaKeys=r.createMediaKeys().then((r=>(this.log(`Media-keys created for "${e}"`),t.hasMediaKeys=!0,n.then((t=>t?this.setMediaKeysServerCertificate(r,e,t):r)))));return i.catch((t=>{this.error(`Failed to create media-keys for "${e}"}: ${t}`)})),i}))}return a.then((()=>s.mediaKeys))}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:r}){this.log(`Creating key-system session "${t}" keyId: ${dpe(e.keyId||[])} keyUri: ${e.uri}`);const n=r.createSession(),i={decryptdata:e,keySystem:t,mediaKeys:r,mediaKeysSession:n,keyStatus:"status-pending"};return this.mediaKeySessions.push(i),i}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const r=this.createMediaKeySessionContext(e),n=Xwe(t),i="cenc";this.keyIdToKeySessionPromise[n]=this.generateRequestWithPreferredKeySession(r,i,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,t){const r=e.mediaKeysSession;return this.log(`Updating key-session "${r.sessionId}" for keyId ${dpe(e.decryptdata.keyId||[])}\n      } (data length: ${t.byteLength})`),r.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map((e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys}))).filter((({hasMediaKeys:e})=>!!e)).map((({keySystem:e})=>lye(e))).filter((e=>!!e))}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then((({keySystem:e,mediaKeys:t})=>this.attemptSetMediaKeys(e,t)))}selectKeySystem(e){return new Promise(((t,r)=>{this.getKeySystemSelectionPromise(e).then((({keySystem:e})=>{const n=lye(e);n?t(n):r(new Error(`Unable to find format for key-system "${e}"`))})).catch(r)}))}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=cye(this.config),r=e.map(oye).filter((e=>!!e&&-1!==t.indexOf(e)));return this.selectKeySystem(r)}getKeyStatus(e){const{mediaKeySessions:t}=this;for(let r=0;r<t.length;r++){const n=Jwe(e,t[r]);if(n)return n}}loadKey(e){const t=e.keyInfo.decryptdata,r=Xwe(t),n=this.bannedKeyIds[r];if(n||"internal-error"===this.getKeyStatus(t)){const r=exe(n||"internal-error",t);return this.handleError(r,e.frag),Promise.reject(r)}const i=`(keyId: ${r} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${i}`);const s=this.keyIdToKeySessionPromise[r];if(!s){const n=this.getKeySystemForKeyPromise(t).then((({keySystem:r,mediaKeys:n})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(r,n).then((()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:r,mediaKeys:n,decryptdata:t}))))))).then((e=>{const r=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(e,"cenc",r,"playlist-key")}));return n.catch((t=>this.handleError(t,e.frag))),this.keyIdToKeySessionPromise[r]=n,n}return s.catch((r=>{if(r instanceof Zwe){const n=epe({},r.data);"internal-error"===this.getKeyStatus(t)&&(n.decryptdata=t);const i=new Zwe(n,r.message);this.handleError(i,e.frag)}})),s}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,t){if(this.hls)if(e instanceof Zwe){t&&(e.data.frag=t);const r=e.data.decryptdata;this.error(`${e.message}${r?` (${dpe(r.keyId||[])})`:""}`),this.hls.trigger($fe.ERROR,e.data)}else this.error(e.message),this.hls.trigger($fe.ERROR,{type:Ufe.KEY_SYSTEM_ERROR,details:Bfe.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const t=Xwe(e),r=this.keyIdToKeySessionPromise[t];if(!r){const t=oye(e.keyFormat),r=t?[t]:cye(this.config);return this.attemptKeySystemAccess(r)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=cye(this.config)),0===e.length)throw new Zwe({type:Ufe.KEY_SYSTEM_ERROR,details:Bfe.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Lge({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaResolved=void 0,this.mediaKeys===t)return Promise.resolve();const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const n=Promise.all(r).then((()=>this.media?this.media.setMediaKeys(t):new Promise(((e,r)=>{this.mediaResolved=()=>{if(this.mediaResolved=void 0,!this.media)return r(new Error("Attempted to set mediaKeys without media element attached"));this.mediaKeys=t,this.media.setMediaKeys(t).then(e).catch(r)}}))));return this.mediaKeys=t,this.setMediaKeysQueue.push(n),n.then((()=>{this.log(`Media-keys set for "${e}"`),r.push(n),this.setMediaKeysQueue=this.setMediaKeysQueue.filter((e=>-1===r.indexOf(e)))}))}generateRequestWithPreferredKeySession(e,t,r,n){var i;const s=null==(i=this.config.drmSystems)||null==(i=i[e.keySystem])?void 0:i.generateRequest;if(s)try{const n=s.call(this.hls,t,r,e);if(!n)throw new Error("Invalid response from configured generateRequest filter");t=n.initDataType,r=n.initData?n.initData:null,e.decryptdata.pssh=r?new Uint8Array(r):null}catch(f){if(this.warn(f.message),this.hls&&this.hls.config.debug)throw f}if(null===r)return this.log(`Skipping key-session request for "${n}" (no initData)`),Promise.resolve(e);const a=Xwe(e.decryptdata),o=e.decryptdata.uri;this.log(`Generating key-session request for "${n}" keyId: ${a} URI: ${o} (init data type: ${t} length: ${r.byteLength})`);const l=new vve,c=e._onmessage=t=>{const r=e.mediaKeysSession;if(!r)return void l.emit("error",new Error("invalid state"));const{messageType:n,message:i}=t;this.log(`"${n}" message event for session "${r.sessionId}" message size: ${i.byteLength}`),"license-request"===n||"license-renewal"===n?this.renewLicense(e,i).catch((e=>{l.eventNames().length?l.emit("error",e):this.handleError(e)})):"license-release"===n?e.keySystem===rye.FAIRPLAY&&this.updateKeySession(e,Jme("acknowledged")).then((()=>this.removeSession(e))).catch((e=>this.handleError(e))):this.warn(`unhandled media key message type "${n}"`)},u=(e,t)=>{let r;t.keyStatus=e,e.startsWith("usable")?l.emit("resolved"):"internal-error"===e||"output-restricted"===e||"output-downscaled"===e?r=exe(e,t.decryptdata):"expired"===e?r=new Error(`key expired (keyId: ${a})`):"released"===e?r=new Error("key released"):"status-pending"===e||this.warn(`unhandled key status change "${e}" (keyId: ${a})`),r&&(l.eventNames().length?l.emit("error",r):this.handleError(r))},d=e._onkeystatuseschange=t=>{if(!e.mediaKeysSession)return void l.emit("error",new Error("invalid state"));const r=this.getKeyStatuses(e);if(!Object.keys(r).some((e=>"status-pending"!==r[e])))return;if("expired"===r[a])return this.log(`Expired key ${Lge(r)} in key-session "${e.mediaKeysSession.sessionId}"`),void this.renewKeySession(e);let n=r[a];if(n)u(n,e);else{var i;const t=1e3;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(i=e.keyStatusTimeouts)[a]||(i[a]=self.setTimeout((()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const r=this.getKeyStatus(e.decryptdata);if(r&&"status-pending"!==r)return this.log(`No status for keyId ${a} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${r} from other session.`),u(r,e);this.log(`key status for ${a} in key-session "${e.mediaKeysSession.sessionId}" timed out after ${t}ms`),n="internal-error",u(n,e)}),t)),this.log(`No status for keyId ${a} (${Lge(r)}).`)}};Xye(e.mediaKeysSession,"message",c),Xye(e.mediaKeysSession,"keystatuseschange",d);const h=new Promise(((e,t)=>{l.on("error",t),l.on("resolved",e)}));return e.mediaKeysSession.generateRequest(t,r).then((()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${a} URI: ${o}`)})).catch((t=>{throw new Zwe({type:Ufe.KEY_SYSTEM_ERROR,details:Bfe.KEY_SYSTEM_NO_SESSION,error:t,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${t}`)})).then((()=>h)).catch((t=>(l.removeAllListeners(),this.removeSession(e).then((()=>{throw t}))))).then((()=>(l.removeAllListeners(),e)))}getKeyStatuses(e){const t={};return e.mediaKeysSession.keyStatuses.forEach(((r,n)=>{if("string"==typeof n&&"object"==typeof r){const e=n;n=r,r=e}const i="buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n);if(e.keySystem===rye.PLAYREADY&&16===i.length){const e=dpe(i);t[e]=r,Zme(i)}const s=dpe(i);"internal-error"===r&&(this.bannedKeyIds[s]=r),this.log(`key status change "${r}" for keyStatuses keyId: ${s} key-session "${e.mediaKeysSession.sessionId}"`),t[s]=r})),t}fetchServerCertificate(e){const t=this.config,r=new(0,t.loader)(t),n=this.getServerCertificateUrl(e);return n?(this.log(`Fetching server certificate for "${e}"`),new Promise(((i,s)=>{const a={responseType:"arraybuffer",url:n},o=t.certLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,r,n)=>{i(e.data)},onError:(t,r,i,o)=>{s(new Zwe({type:Ufe.KEY_SYSTEM_ERROR,details:Bfe.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:epe({url:a.url,data:void 0},t)},`"${e}" certificate request failed (${n}). Status: ${t.code} (${t.text})`))},onTimeout:(t,r,i)=>{s(new Zwe({type:Ufe.KEY_SYSTEM_ERROR,details:Bfe.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:{url:a.url,data:void 0}},`"${e}" certificate request timed out (${n})`))},onAbort:(e,t,r)=>{s(new Error("aborted"))}};r.load(a,l,c)}))):Promise.resolve()}setMediaKeysServerCertificate(e,t,r){return new Promise(((n,i)=>{e.setServerCertificate(r).then((i=>{this.log(`setServerCertificate ${i?"success":"not supported by CDM"} (${r.byteLength}) on "${t}"`),n(e)})).catch((e=>{i(new Zwe({type:Ufe.KEY_SYSTEM_ERROR,details:Bfe.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))}))}))}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then((t=>this.updateKeySession(e,new Uint8Array(t)).catch((t=>{throw new Zwe({type:Ufe.KEY_SYSTEM_ERROR,details:Bfe.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:t,fatal:!1},t.message)}))))}unpackPlayReadyKeyMessage(e,t){const r=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const n=(new DOMParser).parseFromString(r,"application/xml"),i=n.querySelectorAll("HttpHeader");if(i.length>0){let t;for(let r=0,n=i.length;r<n;r++){var s,a;t=i[r];const n=null==(s=t.querySelector("name"))?void 0:s.textContent,o=null==(a=t.querySelector("value"))?void 0:a.textContent;n&&o&&e.setRequestHeader(n,o)}}const o=n.querySelector("Challenge"),l=null==o?void 0:o.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return Jme(atob(l))}setupLicenseXHR(e,t,r,n){const i=this.config.licenseXhrSetup;return i?Promise.resolve().then((()=>{if(!r.decryptdata)throw new Error("Key removed");return i.call(this.hls,e,t,r,n)})).catch((s=>{if(!r.decryptdata)throw s;return e.open("POST",t,!0),i.call(this.hls,e,t,r,n)})).then((r=>{e.readyState||e.open("POST",t,!0);return{xhr:e,licenseChallenge:r||n}})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:n}))}requestLicense(e,t){const r=this.config.keyLoadPolicy.default;return new Promise(((n,i)=>{const s=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${s}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return i(new Error("invalid state"));if(4===a.readyState)if(200===a.status){this._requestLicenseFailureCount=0;let t=a.response;this.log(`License received ${t instanceof ArrayBuffer?t.byteLength:t}`);const r=this.config.licenseResponseCallback;if(r)try{t=r.call(this.hls,a,s,e)}catch(o){this.error(o)}n(t)}else{const o=r.errorRetry,l=o?o.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||a.status>=400&&a.status<500)i(new Zwe({type:Ufe.KEY_SYSTEM_ERROR,details:Bfe.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:a,response:{url:s,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${s}). Status: ${a.status} (${a.statusText})`));else{const r=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${r} attempts left`),this.requestLicense(e,t).then(n,i)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,s,e,t).then((({xhr:t,licenseChallenge:r})=>{e.keySystem==rye.PLAYREADY&&(r=this.unpackPlayReadyKeyMessage(t,r)),t.send(r)})).catch(i)}))}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const r=t.media;this.media=r,Xye(r,"encrypted",this.onMediaEncrypted),Xye(r,"waitingforkey",this.onWaitingForKey);const n=this.mediaResolved;n?n():this.mediaKeys=r.mediaKeys}onMediaDetached(){const e=this.media;e&&(Jye(e,"encrypted",this.onMediaEncrypted),Jye(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={};const t=this.mediaResolved;if(t&&t(),!this.mediaKeys&&!this.mediaKeySessions.length)return;const r=this.media,n=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,pye.clearKeyUriToKeyIdMap();const i=n.length;Ywe.CDMCleanupPromise=Promise.all(n.map((e=>this.removeSession(e))).concat((null==r||null==(e=r.setMediaKeys(null))?void 0:e.catch((e=>{this.log(`Could not clear media keys: ${e}`),this.hls&&this.hls.trigger($fe.ERROR,{type:Ufe.OTHER_ERROR,details:Bfe.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${e}`)})})))||Promise.resolve())).catch((e=>{this.log(`Could not close sessions and clear media keys: ${e}`),this.hls&&this.hls.trigger($fe.ERROR,{type:Ufe.OTHER_ERROR,details:Bfe.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${e}`)})})).then((()=>{i&&this.log("finished closing key sessions and clearing media keys")}))}onManifestLoading(){this._clear()}onManifestLoaded(e,{sessionKeys:t}){if(t&&this.config.emeEnabled&&!this.keyFormatPromise){const e=t.reduce(((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e)),[]);this.log(`Selecting key-system from session-keys ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:r,decryptdata:n}=e;if(t){this.log(`Remove licenses and keys and close session "${t.sessionId}" keyId: ${dpe((null==n?void 0:n.keyId)||[])}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);i>-1&&this.mediaKeySessions.splice(i,1);const{keyStatusTimeouts:s}=e;s&&Object.keys(s).forEach((e=>self.clearTimeout(s[e])));const{drmSystemOptions:a}=this.config,o=function(e){var t;return!(!e||"persistent-license"!==e.sessionType&&(null==(t=e.sessionTypes)||!t.some((e=>"persistent-license"===e))))}(a)?new Promise(((e,r)=>{self.setTimeout((()=>r(new Error("MediaKeySession.remove() timeout"))),8e3),t.remove().then(e).catch(r)})):Promise.resolve();return o.catch((e=>{this.log(`Could not remove session: ${e}`),this.hls&&this.hls.trigger($fe.ERROR,{type:Ufe.OTHER_ERROR,details:Bfe.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${e}`)})})).then((()=>t.close())).catch((e=>{this.log(`Could not close session: ${e}`),this.hls&&this.hls.trigger($fe.ERROR,{type:Ufe.OTHER_ERROR,details:Bfe.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${e}`)})}))}return Promise.resolve()}}function Xwe(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return dpe(e.keyId)}function Jwe(e,t){return e.keyId&&t.mediaKeysSession.keyStatuses.has(e.keyId)?t.mediaKeysSession.keyStatuses.get(e.keyId):e.matches(t.decryptdata)?t.keyStatus:void 0}Ywe.CDMCleanupPromise=void 0;class Zwe extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function exe(e,t){const r="output-restricted"===e,n=r?Bfe.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:Bfe.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new Zwe({type:Ufe.KEY_SYSTEM_ERROR,details:n,fatal:!1,decryptdata:t},r?"HDCP level output restricted":`key status changed to "${e}"`)}function txe(e,t){let r;try{r=new Event("addtrack")}catch(mEe){r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function rxe(e,t){const r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(mEe){ope.debug(`[texttrack-utils]: ${mEe}`);try{const r=new self.TextTrackCue(t.startTime,t.endTime,t.text);r.id=t.id,e.addCue(r)}catch(n){ope.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${n}`)}}"disabled"===r&&(e.mode=r)}function nxe(e,t){const r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues)for(let n=e.cues.length;n--;)t&&e.cues[n].removeEventListener("enter",t),e.removeCue(e.cues[n]);"disabled"===r&&(e.mode=r)}function ixe(e,t,r,n){const i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&e.cues.length>0){const i=function(e,t,r){const n=[],i=function(e,t){if(t<=e[0].startTime)return 0;const r=e.length-1;if(t>e[r].endTime)return-1;let n,i=0,s=r;for(;i<=s;)if(n=Math.floor((s+i)/2),t<e[n].startTime)s=n-1;else{if(!(t>e[n].startTime&&i<r))return n;i=n+1}return e[i].startTime-t<t-e[s].startTime?i:s}(e,t);if(i>-1)for(let s=i,a=e.length;s<a;s++){const i=e[s];if(i.startTime>=t&&i.endTime<=r)n.push(i);else if(i.startTime>r)return n}return n}(e.cues,t,r);for(let t=0;t<i.length;t++)n&&!n(i[t])||e.removeCue(i[t])}"disabled"===i&&(e.mode=i)}function sxe(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r];"subtitles"!==n.kind&&"captions"!==n.kind||!n.label||t.push(e[r])}return t}function axe(e){let t=5381,r=e.length;for(;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()}const oxe=.025;let lxe=function(e){return e[e.Point=0]="Point",e[e.Range=1]="Range",e}({});function cxe(e,t,r){return`${e.identifier}-${r+1}-${axe(t)}`}class uxe{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,null==(e=this.assetListLoader)||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const r=this.playoutLimit;if(e<=0||isNaN(r))return!1;if(0===r)return!0;return((null==(t=this.assetList[e])?void 0:t.startOffset)||0)>r}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return dxe(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(0===this.startTime||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime;return t-dxe(t,e)<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=Lfe(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return dxe(e,t)}return e}get appendInPlace(){return!!this.appendInPlaceStarted||!this.appendInPlaceDisabled&&!(this.cue.once||this.cue.pre||!this.startIsAligned||!(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<oxe))}set appendInPlace(e){this.appendInPlaceStarted?this.resetOnResume=!e:this.appendInPlaceDisabled=!e}get timelineStart(){return null!==this._timelineStart?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return t=null!==this._duration?this._duration:this.dateRange.duration?this.dateRange.duration:this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return"RANGE"===this.dateRange.attr["X-TIMELINE-OCCUPIES"]?lxe.Range:lxe.Point}get supplementsPrimary(){return"PRIMARY"===this.dateRange.attr["X-TIMELINE-STYLE"]}get contentMayVary(){return"NO"!==this.dateRange.attr["X-CONTENT-MAY-VARY"]}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||null!==this.assetListResponse}toString(){return`["${(e=this).identifier}" ${e.cue.pre?"<pre>":e.cue.post?"<post>":""}${e.timelineStart.toFixed(2)}-${e.resumeTime.toFixed(2)}]`;var e}}function dxe(e,t){return e-t.start<t.duration/2&&!(Math.abs(e-(t.start+t.duration))<oxe)?t.start:t.start+t.duration}function hxe(e,t,r){const n=new self.URL(e,r);return"data:"!==n.protocol&&n.searchParams.set("_HLS_primary_id",t),n}function fxe(e,t){for(;null!=(r=e.assetList[++t])&&r.error;)var r;return t}function pxe(e){const t=e.timelineStart,r=e.duration||0;return`["${e.identifier}" ${t.toFixed(2)}-${(t+r).toFixed(2)}]`}class gxe{constructor(e,t,r,n){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger($fe.PLAYOUT_LIMIT_REACHED,{})};const i=this.hls=new e(t);this.interstitial=r,this.assetItem=n;const s=()=>{this.hasDetails=!0};i.once($fe.LEVEL_LOADED,s),i.once($fe.AUDIO_TRACK_LOADED,s),i.once($fe.SUBTITLE_TRACK_LOADED,s),i.on($fe.MEDIA_ATTACHING,((e,{media:t})=>{this.removeMediaListeners(),this.mediaAttached=t;this.interstitial.playoutLimit&&(t.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&i.on($fe.BUFFER_APPENDED,(()=>{const e=this.bufferedEnd;this.reachedPlayout(e)&&(this._bufferedEosTime=e,i.trigger($fe.BUFFERED_TO_END,void 0))})))}))}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let r=this.assetItem.uri;try{r=hxe(r,e.config.primarySessionId||"").href}catch(t){}e.loadSource(r)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if(null!=(t=this.hls)&&t.bufferedToEnd)return!0;if(!e)return!1;const r=Math.min(this._bufferedEosTime||1/0,this.duration),n=this.timelineOffset,i=jme.bufferInfo(e,n,0);return this.getAssetTime(i.end)>=r-.02}reachedPlayout(e){const t=this.interstitial.playoutLimit;return this.startOffset+e>=t}get destroyed(){var e;return!(null!=(e=this.hls)&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return(null==(e=this.hls)?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=jme.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const r=t-this.startOffset;if(r>0&&r<e)return r}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return(null==(e=this.hls)?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const r=e-t;if(Math.abs(r)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,r=this.duration;return Math.min(Math.max(0,e-t),r)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){var e;this.mediaAttached&&(null!=(e=this.hls)&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd))}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),null==(t=this.hls)||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,null==(e=this.hls)||e.detachMedia()}resumeBuffering(){var e;null==(e=this.hls)||e.resumeBuffering()}pauseBuffering(){var e;null==(e=this.hls)||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),(null==(e=this.hls)?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=e=>delete e.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,r){var n;null==(n=this.hls)||n.on(e,t)}once(e,t,r){var n;null==(n=this.hls)||n.once(e,t)}off(e,t,r){var n;null==(n=this.hls)||n.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${pxe(this.assetItem)} ${null==(e=this.hls)?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}class mxe extends tpe{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach((e=>e.reset())),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce(((r,n)=>e<=n.startOffset&&t>n.startOffset?(delete n.error,r+1):r),0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let r=-1;e.nextEvent?r=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(r=this.findEventIndex(e.previousEvent.identifier)+1);const n=this.items;if(n)for(n[r]||(void 0===t&&(t=e.start),r=this.findItemIndexAtTime(t));r>=0&&null!=(i=n[r])&&i.event;){var i;r--}return r}findItemIndexAtTime(e,t){const r=this.items;if(r)for(let n=0;n<r.length;n++){let i=r[n];if(t&&"primary"!==t&&(i=i[t]),e===i.start||e>i.start&&e<i.end)return n}return-1}findJumpRestrictedIndex(e,t){const r=this.items;if(r)for(let n=e;n<=t&&r[n];n++){const e=r[n].event;if(null!=e&&e.restrictions.jump&&!e.appendInPlace)return n}return-1}findEventIndex(e){const t=this.items;if(t)for(let n=t.length;n--;){var r;if((null==(r=t[n].event)?void 0:r.identifier)===e)return n}return-1}findAssetIndex(e,t){const r=e.assetList,n=r.length;if(n>1)for(let i=0;i<n;i++){const e=r[i];if(!e.error){const r=e.timelineStart;if(t===r||t>r&&(t<r+(e.duration||0)||i===n-1))return i}}return 0}get assetIdAtEnd(){var e;const t=null==(e=this.items)||null==(e=e[this.length-1])?void 0:e.event;if(t){const e=t.assetList,r=e[e.length-1];if(r)return r.identifier}return null}parseInterstitialDateRanges(e,t){const r=e.main.details,{dateRanges:n}=r,i=this.events,s=this.parseDateRanges(n,{url:r.url},t),a=Object.keys(n),o=i?i.filter((e=>!a.includes(e.identifier))):[];s.length&&s.sort(((e,t)=>{const r=e.cue.pre,n=e.cue.post,i=t.cue.pre,s=t.cue.post;if(r&&!i)return-1;if(i&&!r)return 1;if(n&&!s)return 1;if(s&&!n)return-1;if(!(r||i||n||s)){const r=e.startTime,n=t.startTime;if(r!==n)return r-n}return e.dateRange.tagOrder-t.dateRange.tagOrder})),this.events=s,o.forEach((e=>{this.removeEvent(e)})),this.updateSchedule(e,o)}updateSchedule(e,t=[],r=!1){const n=this.events||[];if(n.length||t.length||this.length<2){const i=this.items,s=this.parseSchedule(n,e);(r||t.length||(null==i?void 0:i.length)!==s.length||s.some(((e,t)=>Math.abs(e.playout.start-i[t].playout.start)>.005||Math.abs(e.playout.end-i[t].playout.end)>.005)))&&(this.items=s,this.onScheduleUpdate(t,i))}}parseDateRanges(e,t,r){const n=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const a=i[s],o=e[a];if(o.isInterstitial){let e=this.eventMap[a];e?e.setDateRange(o):(e=new uxe(o,t),this.eventMap[a]=e,!1===r&&(e.appendInPlace=r)),n.push(e)}}return n}parseSchedule(e,t){const r=[],n=t.main.details,i=n.live?1/0:n.edge;let s=0;if((e=e.filter((e=>!(e.error||e.cue.once&&e.hasPlayed)))).length){this.resolveOffsets(e,t);let n=0,o=0;if(e.forEach(((t,a)=>{const l=t.cue.pre,c=t.cue.post,u=e[a-1]||null,d=t.appendInPlace,h=c?i:t.startOffset,f=t.duration,p=t.timelineOccupancy===lxe.Range?f:0,g=t.resumptionOffset,m=(null==u?void 0:u.startTime)===h,y=h+t.cumulativeDuration;let v=d?y+f:h+g;if(l||!c&&h<=0){const e=o;o+=p,t.timelineStart=y;const n=s;s+=f,r.push({event:t,start:y,end:v,playout:{start:n,end:s},integrated:{start:e,end:o}})}else{if(!(h<=i))return;{if(!m){const i=h-n;if(i>.033){const l=n,c=o;o+=i;const u=s;s+=i;const d={previousEvent:e[a-1]||null,nextEvent:t,start:l,end:l+i,playout:{start:u,end:s},integrated:{start:c,end:o}};r.push(d)}else i>0&&u&&(u.cumulativeDuration+=i,r[r.length-1].end=h)}c&&(v=y),t.timelineStart=y;const i=o;o+=p;const l=s;s+=f,r.push({event:t,start:y,end:v,playout:{start:l,end:s},integrated:{start:i,end:o}})}}const b=t.resumeTime;n=c||b>i?i:b})),n<i){var a;const e=n,t=o,l=i-n;o+=l;const c=s;s+=l,r.push({previousEvent:(null==(a=r[r.length-1])?void 0:a.event)||null,nextEvent:null,start:n,end:e+l,playout:{start:c,end:s},integrated:{start:t,end:o}})}this.setDurations(i,s,o)}else{const e=0;r.push({previousEvent:null,nextEvent:null,start:e,end:i,playout:{start:e,end:i},integrated:{start:e,end:i}}),this.setDurations(i,i,i)}return r}setDurations(e,t,r){this.durations={primary:e,playout:t,integrated:r}}resolveOffsets(e,t){const r=t.main.details,n=r.live?1/0:r.edge;let i=0,s=-1;e.forEach(((a,o)=>{const l=a.cue.pre,c=a.cue.post,u=l?0:c?n:a.startTime;this.updateAssetDurations(a);if(s===u?a.cumulativeDuration=i:(i=0,s=u),!c&&a.snapOptions.in&&(a.resumeAnchor=Hge(null,r.fragments,a.startOffset+a.resumptionOffset,0,0)||void 0),a.appendInPlace&&!a.appendInPlaceStarted){this.primaryCanResumeInPlaceAt(a,t)||(a.appendInPlace=!1)}if(!a.appendInPlace&&o+1<e.length){e[o+1].startTime-e[o].resumeTime<.033&&(e[o+1].appendInPlace=!1,e[o+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${a}`))}const d=Lfe(a.resumeOffset)?a.resumeOffset:a.duration;i+=d}))}primaryCanResumeInPlaceAt(e,t){const r=e.resumeTime,n=e.startTime+e.resumptionOffset;if(Math.abs(r-n)>oxe)return this.log(`"${e.identifier}" resumption ${r} not aligned with estimated timeline end ${n}`),!1;return!Object.keys(t).some((n=>{const i=t[n].details,s=i.edge;if(r>=s)return this.log(`"${e.identifier}" resumption ${r} past ${n} playlist end ${s}`),!1;const a=Hge(null,i.fragments,r);if(!a)return this.log(`"${e.identifier}" resumption ${r} does not align with any fragments in ${n} playlist (${i.fragStart}-${i.fragmentEnd})`),!0;const o="audio"===n?.175:0;return!(Math.abs(a.start-r)<oxe+o||Math.abs(a.end-r)<oxe+o)&&(this.log(`"${e.identifier}" resumption ${r} not aligned with ${n} fragment bounds (${a.start}-${a.end} sn: ${a.sn} cc: ${a.cc})`),!0)}))}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let r=0,n=!1,i=!1;for(let s=0;s<e.assetList.length;s++){const a=e.assetList[s],o=t+r;a.startOffset=r,a.timelineStart=o,n||(n=null===a.duration),i||(i=!!a.error);r+=a.error?0:a.duration||0}e.duration=n&&!i?Math.max(r,e.duration):r}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function yxe(e){return`[${e.event?'"'+e.event.identifier+'"':"primary"}: ${e.start.toFixed(2)}-${e.end.toFixed(2)}]`}class vxe{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const r=e.assetListUrl;let n;try{n=hxe(r,this.hls.sessionId,e.baseUrl)}catch(u){const t=this.assignAssetListError(e,Bfe.ASSET_LIST_LOAD_ERROR,u,r);return void this.hls.trigger($fe.ERROR,t)}t&&"data:"!==n.protocol&&n.searchParams.set("_HLS_start_offset",""+t);const i=this.hls.config,s=new(0,i.loader)(i),a={responseType:"json",url:n.href},o=i.interstitialAssetListLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(t,r,n,i)=>{const s=t.data,a=null==s?void 0:s.ASSETS;if(Array.isArray(a))e.assetListResponse=s,this.hls.trigger($fe.ASSET_LIST_LOADED,{event:e,assetListResponse:s,networkDetails:i});else{const t=this.assignAssetListError(e,Bfe.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),n.url,r,i);this.hls.trigger($fe.ERROR,t)}},onError:(t,r,n,i)=>{const s=this.assignAssetListError(e,Bfe.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${t.code} ${t.text} (${r.url})`),r.url,i,n);this.hls.trigger($fe.ERROR,s)},onTimeout:(t,r,n)=>{const i=this.assignAssetListError(e,Bfe.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${r.url})`),r.url,t,n);this.hls.trigger($fe.ERROR,i)}};return s.load(a,l,c),this.hls.trigger($fe.ASSET_LIST_LOADING,{event:e}),s}assignAssetListError(e,t,r,n,i,s){return e.error=r,{type:Ufe.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:n,error:r,networkDetails:s,stats:i}}}function bxe(e){var t;null==e||null==(t=e.play())||t.catch((()=>{}))}function wxe(e,t){return`[${e}] Advancing timeline position to ${t}`}class xxe{constructor(e){this.buffered=void 0;const t=(t,r,n)=>{if((r>>>=0)>n-1)throw new DOMException(`Failed to execute '${t}' on 'TimeRanges': The index provided (${r}) is greater than the maximum bound (${n})`);return e[r][t]};this.buffered={get length(){return e.length},end:r=>t("end",r,e.length),start:r=>t("start",r,e.length)}}}const Sxe={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Exe=e=>String.fromCharCode(Sxe[e]||e),Txe=15,kxe=100,Axe={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},_xe={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Cxe={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Pxe={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Dxe=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Rxe{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const r="function"==typeof t?t():t;ope.log(`${this.time} [${e}] ${r}`)}}}const Ixe=function(e){const t=[];for(let r=0;r<e.length;r++)t.push(e[r].toString(16));return t};class Oxe{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let r=0;r<t.length;r++){const n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Nxe{constructor(){this.uchar=" ",this.penState=new Oxe}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class jxe{constructor(e){this.chars=[],this.pos=0,this.currPenState=new Oxe,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<kxe;t++)this.chars.push(new Nxe);this.logger=e}equals(e){for(let t=0;t<kxe;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<kxe;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<kxe;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>kxe&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=kxe)}moveCursor(e){const t=this.pos+e;if(e>1)for(let r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=Exe(e);this.pos>=kxe?this.logger.log(0,(()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!")):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<kxe;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let r=0;r<kxe;r++){const n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e);this.chars[this.pos].setPenState(this.currPenState)}}class Lxe{constructor(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<Txe;t++)this.rows.push(new jxe(e));this.logger=e}reset(){for(let e=0;e<Txe;e++)this.rows[e].clear();this.currRow=14}equals(e){let t=!0;for(let r=0;r<Txe;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t}copy(e){for(let t=0;t<Txe;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<Txe;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e);this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,(()=>"pacData = "+Lge(e)));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let t=0;t<Txe;t++)this.rows[t].clear();const e=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){const n=r.rows[e].cueStartTime,i=this.logger.time;if(null!==n&&null!==i&&n<i)for(let s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(r.rows[e+s])}}this.currRow=t;const r=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,n=Math.max(t-1,0);r.setCursor(e.indent),e.color=r.chars[n].penState.foreground}const n={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(n)}setBkgData(e){this.logger.log(2,(()=>"bkgData = "+Lge(e))),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,(()=>this.getDisplayText()));const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let r="",n=-1;for(let i=0;i<Txe;i++){const r=this.rows[i].getTextString();r&&(n=i+1,e?t.push("Row "+n+": '"+r+"'"):t.push(r.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r}getTextAndFormat(){return this.rows}}class Mxe{constructor(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Lxe(r),this.nonDisplayedMemory=new Lxe(r),this.lastOutputScreen=new Lxe(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,(()=>"MODE="+e)),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(()=>t+": "+this.writeScreen.getDisplayText(!0))),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0))),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(()=>"DISP: "+this.displayedMemory.getDisplayText()))}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{const r=Math.floor(e/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=n[r]}this.logger.log(2,"MIDROW: "+Lge(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class Fxe{constructor(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;const n=this.logger=new Rxe;this.channels=[null,new Mxe(e,t,n),new Mxe(e+1,r,n)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let r=0;r<t.length;r+=2){const e=127&t[r],n=127&t[r+1];let i=!1,s=null;if(0===e&&0===n)continue;this.logger.log(3,(()=>"["+Ixe([t[r],t[r+1]])+"] -> ("+Ixe([e,n])+")"));const a=this.cmdHistory;if(e>=16&&e<=31){if(Bxe(e,n,a)){Uxe(null,null,a),this.logger.log(3,(()=>"Repeated command ("+Ixe([e,n])+") is dropped"));continue}Uxe(e,n,this.cmdHistory),i=this.parseCmd(e,n),i||(i=this.parseMidrow(e,n)),i||(i=this.parsePAC(e,n)),i||(i=this.parseBackgroundAttributes(e,n))}else Uxe(null,null,a);if(!i&&(s=this.parseChars(e,n),s)){const e=this.currentChannel;if(e&&e>0){this.channels[e].insertChars(s)}else this.logger.log(2,"No channel found yet. TEXT-MODE?")}i||s||this.logger.log(2,(()=>"Couldn't parse cleaned data "+Ixe([e,n])+" orig: "+Ixe([t[r],t[r+1]])))}}parseCmd(e,t){if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;const r=20===e||21===e||23===e?1:2,n=this.channels[r];return 20===e||21===e||28===e||29===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),this.currentChannel=r,!0}parseMidrow(e,t){let r=0;if((17===e||25===e)&&t>=32&&t<=47){if(r=17===e?1:2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const n=this.channels[r];return!!n&&(n.ccMIDROW(t),this.logger.log(3,(()=>"MIDROW ("+Ixe([e,t])+")")),!0)}return!1}parsePAC(e,t){let r;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;const n=e<=23?1:2;r=t>=64&&t<=95?1===n?Axe[e]:Cxe[e]:1===n?_xe[e]:Pxe[e];const i=this.channels[n];return!!i&&(i.setPAC(this.interpretPAC(r,t)),this.currentChannel=n,!0)}interpretPAC(e,t){let r;const n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=!(1&~r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n}parseChars(e,t){let r,n=null,i=null;if(e>=25?(r=2,i=e-8):(r=1,i=e),i>=17&&i<=19){let e;e=17===i?t+80:18===i?t+112:t+144,this.logger.log(2,(()=>"Special char '"+Exe(e)+"' in channel "+r)),n=[e]}else e>=32&&e<=127&&(n=0===t?[e]:[e,t]);return n&&this.logger.log(3,(()=>"Char codes =  "+Ixe(n).join(","))),n}parseBackgroundAttributes(e,t){if(!((16===e||24===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=45&&t<=47))return!1;let r;const n={};16===e||24===e?(r=Math.floor((t-32)/2),n.background=Dxe[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0));const i=e<=23?1:2;return this.channels[i].setBkgData(n),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}Uxe(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const r=this.channels[t];r&&r.cueSplitAtTime(e)}}}function Uxe(e,t,r){r.a=e,r.b=t}function Bxe(e,t,r){return r.a===e&&r.b===t}var $xe=function(){if(null!=tye&&tye.VTTCue)return self.VTTCue;const e=["","lr","rl"],t=["start","middle","end","left","right"];function r(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;const r=t.toLowerCase();return!!~e.indexOf(r)&&r}function n(e){return r(t,e)}function i(e,...t){let r=1;for(;r<arguments.length;r++){const t=arguments[r];for(const r in t)e[r]=t[r]}return e}function s(t,s,a){const o=this,l={enumerable:!0};o.hasBeenReset=!1;let c="",u=!1,d=t,h=s,f=a,p=null,g="",m=!0,y="auto",v="start",b=50,w="middle",x=50,S="middle";Object.defineProperty(o,"id",i({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(o,"pauseOnExit",i({},l,{get:function(){return u},set:function(e){u=!!e}})),Object.defineProperty(o,"startTime",i({},l,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",i({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",i({},l,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",i({},l,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",i({},l,{get:function(){return g},set:function(t){const n=function(t){return r(e,t)}(t);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");g=n,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",i({},l,{get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",i({},l,{get:function(){return y},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",i({},l,{get:function(){return v},set:function(e){const t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",i({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",i({},l,{get:function(){return w},set:function(e){const t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",i({},l,{get:function(){return x},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");x=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",i({},l,{get:function(){return S},set:function(e){const t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");S=t,this.hasBeenReset=!0}})),o.displayState=void 0}return s.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},s}();class zxe{decode(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function qxe(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+parseFloat(n||0)}const r=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?t(r[2],r[3],0,r[4]):t(r[1],r[2],r[3],r[4]):null}class Vxe{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,r){for(let n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const r=parseFloat(t);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function Kxe(e,t,r,n){const i=n?e.split(n):[e];for(const s in i){if("string"!=typeof i[s])continue;const e=i[s].split(r);if(2!==e.length)continue;t(e[0],e[1])}}const Hxe=new $xe(0,0,""),Gxe="middle"===Hxe.align?"middle":"center";function Wxe(e,t,r){const n=e;function i(){const t=qxe(e);if(null===t)throw new Error("Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){e=e.replace(/^\s+/,"")}if(s(),t.startTime=i(),s(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.slice(3),s(),t.endTime=i(),s(),function(e,t){const n=new Vxe;Kxe(e,(function(e,t){let i;switch(e){case"region":for(let i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),n.integer(e,i[0]),n.percent(e,i[0])&&n.set("snapToLines",!1),n.alt(e,i[0],["auto"]),2===i.length&&n.alt("lineAlign",i[1],["start",Gxe,"end"]);break;case"position":i=t.split(","),n.percent(e,i[0]),2===i.length&&n.alt("positionAlign",i[1],["start",Gxe,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",Gxe,"end","left","right"])}}),/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");let i=n.get("line","auto");"auto"===i&&-1===Hxe.line&&(i=-1),t.line=i,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",Gxe);let s=n.get("position","auto");"auto"===s&&50===Hxe.position&&(s="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=s}(e,t)}function Qxe(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class Yxe{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new zxe,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function r(){let e=t.buffer,r=0;for(e=Qxe(e);r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;const n=e.slice(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.slice(r),n}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;e=r();const n=e.match(/^()?WEBVTT([ \t].*)?$/);if(null==n||!n[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let n=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(n?n=!1:e=r(),t.state){case"HEADER":/:/.test(e)?Kxe(e,(function(e,t){}),/:/):e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new $xe(0,0,""),t.state="CUE",-1===e.indexOf("--\x3e")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{Wxe(e,t.cue,t.regionList)}catch(Jce){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const r=-1!==e.indexOf("--\x3e");if(!e||r&&(n=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}}catch(Jce){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(Jce){e.onparsingerror&&e.onparsingerror(Jce)}return e.onflush&&e.onflush(),this}}const Xxe=/\r\n|\n\r|\n|\r/g,Jxe=function(e,t,r=0){return e.slice(r,r+t.length)===t};function Zxe(e,t,r){return axe(e.toString())+axe(t.toString())+axe(r)}function eSe(e,t,r,n,i,s,a){const o=new Yxe,l=upe(new Uint8Array(e)).trim().replace(Xxe,"\n").split("\n"),c=[],u=t?function(e,t=1){return Ebe(e,9e4,1/t)}(t.baseTime,t.timescale):0;let d,h="00:00.000",f=0,p=0,g=!0;o.oncue=function(e){const s=r[n];let a=r.ccOffset;const o=(f-u)/9e4;if(null!=s&&s.new&&(void 0!==p?a=r.ccOffset=s.start:function(e,t,r){let n=e[t],i=e[n.prevCC];if(!i||!i.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;null!=(s=i)&&s.new;){var s;e.ccOffset+=n.start-i.start,n.new=!1,n=i,i=e[n.prevCC]}e.presentationOffset=r}(r,n,o)),o){if(!t)return void(d=new Error("Missing initPTS for VTT MPEGTS"));a=o-r.presentationOffset}const l=e.endTime-e.startTime,h=Rbe(9e4*(e.startTime+a-p),9e4*i)/9e4;e.startTime=Math.max(h,0),e.endTime=Math.max(h+l,0);const g=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(g)),e.id||(e.id=Zxe(e.startTime,e.endTime,g)),e.endTime>0&&c.push(e)},o.onparsingerror=function(e){d=e},o.onflush=function(){d?a(d):s(c)},l.forEach((e=>{if(g){if(Jxe(e,"X-TIMESTAMP-MAP=")){g=!1,e.slice(16).split(",").forEach((e=>{Jxe(e,"LOCAL:")?h=e.slice(6):Jxe(e,"MPEGTS:")&&(f=parseInt(e.slice(7)))}));try{p=function(e){let t=parseInt(e.slice(-3));const r=parseInt(e.slice(-6,-4)),n=parseInt(e.slice(-9,-7)),i=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!(Lfe(t)&&Lfe(r)&&Lfe(n)&&Lfe(i)))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*r,t+=6e4*n,t+=36e5*i,t}(h)/1e3}catch(t){d=t}return}""===e&&(g=!1)}o.parse(e+"\n")})),o.flush()}const tSe="stpp.ttml.im1t",rSe=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,nSe=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,iSe={left:"start",center:"center",right:"end",start:"start",end:"end"};function sSe(e,t,r,n){const i=Upe(new Uint8Array(e),["mdat"]);if(0===i.length)return void n(new Error("Could not parse IMSC1 mdat"));const s=i.map((e=>upe(e))),a=function(e,t,r=1,n=!1){return Ebe(e,t,1/r,n)}(t.baseTime,1,t.timescale);try{s.forEach((e=>r(function(e,t){const r=(new DOMParser).parseFromString(e,"text/xml"),n=r.getElementsByTagName("tt")[0];if(!n)throw new Error("Invalid ttml");const i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},s=Object.keys(i).reduce(((e,t)=>(e[t]=n.getAttribute(`ttp:${t}`)||i[t],e)),{}),a="preserve"!==n.getAttribute("xml:space"),o=oSe(aSe(n,"styling","style")),l=oSe(aSe(n,"layout","region")),c=aSe(n,"body","[begin]");return[].map.call(c,(e=>{const r=lSe(e,a);if(!r||!e.hasAttribute("begin"))return null;const n=dSe(e.getAttribute("begin"),s),i=dSe(e.getAttribute("dur"),s);let c=dSe(e.getAttribute("end"),s);if(null===n)throw uSe(e);if(null===c){if(null===i)throw uSe(e);c=n+i}const u=new $xe(n-t,c-t,r);u.id=Zxe(u.startTime,u.endTime,u.text);const d=function(e,t,r){const n="http://www.w3.org/ns/ttml#styling";let i=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;a&&r.hasOwnProperty(a)&&(i=r[a]);return s.reduce(((r,s)=>{const a=cSe(t,n,s)||cSe(e,n,s)||cSe(i,n,s);return a&&(r[s]=a),r}),{})}(l[e.getAttribute("region")],o[e.getAttribute("style")],o),{textAlign:h}=d;if(h){const e=iSe[h];e&&(u.lineAlign=e),u.align=h}return Jfe(u,d),u})).filter((e=>null!==e))}(e,a))))}catch(o){n(o)}}function aSe(e,t,r){const n=e.getElementsByTagName(t)[0];return n?[].slice.call(n.querySelectorAll(r)):[]}function oSe(e){return e.reduce(((e,t)=>{const r=t.getAttribute("xml:id");return r&&(e[r]=t),e}),{})}function lSe(e,t){return[].slice.call(e.childNodes).reduce(((e,r,n)=>{var i;return"br"===r.nodeName&&n?e+"\n":null!=(i=r.childNodes)&&i.length?lSe(r,t):t?e+r.textContent.trim().replace(/\s+/g," "):e+r.textContent}),"")}function cSe(e,t,r){return e&&e.hasAttributeNS(t,r)?e.getAttributeNS(t,r):null}function uSe(e){return new Error(`Could not parse ttml timestamp ${e}`)}function dSe(e,t){if(!e)return null;let r=qxe(e);return null===r&&(rSe.test(e)?r=function(e,t){const r=rSe.exec(e),n=(0|r[4])+(0|r[5])/t.subFrameRate;return 3600*(0|r[1])+60*(0|r[2])+(0|r[3])+n/t.frameRate}(e,t):nSe.test(e)&&(r=function(e,t){const r=nSe.exec(e),n=Number(r[1]);switch(r[2]){case"h":return 3600*n;case"m":return 60*n;case"ms":return 1e3*n;case"f":return n/t.frameRate;case"t":return n/t.tickRate}return n}(e,t))),r}class hSe{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}function fSe(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function pSe(e,t){return!!e&&e.kind===fSe(t)&&Gbe(t,e)}const gSe=/\s/,mSe={newCue(e,t,r,n){const i=[];let s,a,o,l,c;const u=self.VTTCue||self.TextTrackCue;for(let h=0;h<n.rows.length;h++)if(s=n.rows[h],o=!0,l=0,c="",!s.isEmpty()){var d;for(let e=0;e<s.chars.length;e++)gSe.test(s.chars[e].uchar)&&o?l++:(c+=s.chars[e].uchar,o=!1);s.cueStartTime=t,t===r&&(r+=1e-4),l>=16?l--:l++;const n=Qxe(c.trim()),f=Zxe(t,r,n);null!=e&&null!=(d=e.cues)&&d.getCueById(f)||(a=new u(t,r,n),a.id=f,a.line=h+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*l/32)),i.push(a))}return e&&i.length&&(i.sort(((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line)),i.forEach((t=>rxe(e,t)))),i}};const ySe=/(\d+)-(\d+)\/(\d+)/;class vSe{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||bSe,this.controller=new self.AbortController,this.stats=new Spe}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,r){const n=this.stats;if(n.loading.start)throw new Error("Loader can only be used once.");n.loading.start=self.performance.now();const i=function(e,t){const r={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(Jfe({},e.headers))};e.rangeEnd&&r.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1));return r}(e,this.controller.signal),s="arraybuffer"===e.responseType,a=s?"byteLength":"length",{maxTimeToFirstByteMs:o,maxLoadTimeMs:l}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=r,this.request=this.fetchSetup(e,i),self.clearTimeout(this.requestTimeout),t.timeout=o&&Lfe(o)?o:l,this.requestTimeout=self.setTimeout((()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(n,e,this.response))}),t.timeout);(Ube(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then((r=>{var i;this.response=this.loader=r;const a=Math.max(self.performance.now(),n.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=l,this.requestTimeout=self.setTimeout((()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(n,e,this.response))}),l-(a-n.loading.start)),!r.ok){const{status:e,statusText:t}=r;throw new wSe(t||"fetch, bad network response",e,r)}n.loading.first=a,n.total=function(e){const t=e.get("Content-Range");if(t){const e=function(e){const t=ySe.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(Lfe(e))return e}const r=e.get("Content-Length");if(r)return parseInt(r)}(r.headers)||n.total;const o=null==(i=this.callbacks)?void 0:i.onProgress;return o&&Lfe(t.highWaterMark)?this.loadProgressively(r,n,e,t.highWaterMark,o):s?r.arrayBuffer():"json"===e.responseType?r.json():r.text()})).then((r=>{var i,s;const o=this.response;if(!o)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),n.loading.end=Math.max(self.performance.now(),n.loading.first);const l=r[a];l&&(n.loaded=n.total=l);const c={url:o.url,data:r,code:o.status},u=null==(i=this.callbacks)?void 0:i.onProgress;u&&!Lfe(t.highWaterMark)&&u(n,e,r,o),null==(s=this.callbacks)||s.onSuccess(c,n,e,o)})).catch((t=>{var r;if(self.clearTimeout(this.requestTimeout),n.aborted)return;const i=t&&t.code||0,s=t?t.message:null;null==(r=this.callbacks)||r.onError({code:i,text:s},e,t?t.details:null,n)}))}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,r,n=0,i){const s=new pve,a=e.body.getReader(),o=()=>a.read().then((a=>{if(a.done)return s.dataLength&&i(t,r,s.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const l=a.value,c=l.length;return t.loaded+=c,c<n||s.dataLength?(s.push(l),s.dataLength>=n&&i(t,r,s.flush().buffer,e)):i(t,r,l.buffer,e),o()})).catch((()=>Promise.reject()));return o()}}function bSe(e,t){return new self.Request(e.url,t)}class wSe extends Error{constructor(e,t,r){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=r}}const xSe=/^age:\s*[\d.]+\s*$/im;class SSe{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Spe,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const r=this.loader=new self.XMLHttpRequest,n=this.stats;n.loading.first=0,n.loaded=0,n.aborted=!1;const i=this.xhrSetup;i?Promise.resolve().then((()=>{if(this.loader===r&&!this.stats.aborted)return i(r,t.url)})).catch((e=>{if(this.loader===r&&!this.stats.aborted)return r.open("GET",t.url,!0),i(r,t.url)})).then((()=>{this.loader!==r||this.stats.aborted||this.openAndSendXhr(r,t,e)})).catch((e=>{var i;null==(i=this.callbacks)||i.onError({code:r.status,text:e.message},t,r,n)})):this.openAndSendXhr(r,t,e)}openAndSendXhr(e,t,r){e.readyState||e.open("GET",t.url,!0);const n=t.headers,{maxTimeToFirstByteMs:i,maxLoadTimeMs:s}=r.loadPolicy;if(n)for(const a in n)e.setRequestHeader(a,n[a]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),r.timeout=i&&Lfe(i)?i:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:r}=this;if(!e||!t)return;const n=t.readyState,i=this.config;if(!r.aborted&&n>=2&&(0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),4===n)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const n=t.status,l="text"===t.responseType?t.responseText:null;if(n>=200&&n<300){const i=null!=l?l:t.response;if(null!=i){var s,a;r.loading.end=Math.max(self.performance.now(),r.loading.first);const o="arraybuffer"===t.responseType?i.byteLength:i.length;r.loaded=r.total=o,r.bwEstimate=8e3*r.total/(r.loading.end-r.loading.first);const l=null==(s=this.callbacks)?void 0:s.onProgress;l&&l(r,e,i,t);const c={url:t.responseURL,data:i,code:n};return void(null==(a=this.callbacks)||a.onSuccess(c,r,e,t))}}const c=i.loadPolicy.errorRetry;var o;if(rme(c,r.retry,!1,{url:e.url,data:void 0,code:n}))this.retry(c);else ope.error(`${n} while loading ${e.url}`),null==(o=this.callbacks)||o.onError({code:n,text:t.statusText},e,t,r)}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry;if(rme(e,this.stats.retry,!0))this.retry(e);else{var t;ope.warn(`timeout while loading ${null==(t=this.context)?void 0:t.url}`);const e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:r}=this;this.retryDelay=eme(e,r.retry),r.retry++,ope.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${null==t?void 0:t.url}, retrying ${r.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&xSe.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const ESe=epe(epe({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:6e7,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:SSe,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class extends tpe{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=e=>{var t;const{fragCurrent:r,partCurrent:n,hls:i}=this,{autoLevelEnabled:s,media:a}=i;if(!r||!a)return;const o=performance.now(),l=n?n.stats:r.stats,c=n?n.duration:r.duration,u=o-l.loading.start,d=i.minAutoLevel,h=r.level,f=this._nextAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||h<=d)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!s)return;const p=f>-1&&f!==h,g=!!e||p;if(!g&&(a.paused||!a.playbackRate||!a.readyState))return;const m=i.mainForwardBufferInfo;if(!g&&null===m)return;const y=this.bwEstimator.getEstimateTTFB(),v=Math.abs(a.playbackRate);if(u<=Math.max(y,c/(2*v)*1e3))return;const b=m?m.len/v:0,w=l.loading.first?l.loading.first-l.loading.start:-1,x=l.loaded&&w>-1,S=this.getBwEstimate(),E=i.levels,T=E[h],k=Math.max(l.loaded,Math.round(c*(r.bitrate||T.averageBitrate)/8));let A=x?u-w:u;A<1&&x&&(A=Math.min(u,8*l.loaded/S));const _=x?1e3*l.loaded/A:0,C=y/1e3,P=_?(k-l.loaded)/_:8*k/S+C;if(P<=b)return;const D=_?8*_:S,R=!0===(null==(t=(null==e?void 0:e.details)||this.hls.latestLevelDetails)?void 0:t.live),I=this.hls.config.abrBandWidthUpFactor;let O,N=Number.POSITIVE_INFINITY;for(O=h-1;O>d;O--){const e=E[O].maxBitrate,t=!E[O].details||R;if(N=this.getTimeToLoadFrag(C,D,c*e,t),N<Math.min(b,c+C))break}if(N>=P)return;if(N>10*c)return;x?this.bwEstimator.sample(u-Math.min(y,w),l.loaded):this.bwEstimator.sampleTTFB(u);const j=E[O].maxBitrate;this.getBwEstimate()*I>j&&this.resetEstimator(j);const L=this.findBestLevel(j,d,O,0,b,1,1);L>-1&&(O=L),this.warn(`Fragment ${r.sn}${n?" part "+n.index:""} of level ${h} is loading too slowly;\n      Fragment duration: ${r.duration.toFixed(3)}\n      Time to underbuffer: ${b.toFixed(3)} s\n      Estimated load time for current fragment: ${P.toFixed(3)} s\n      Estimated load time for down switch fragment: ${N.toFixed(3)} s\n      TTFB estimate: ${0|w} ms\n      Current BW estimate: ${Lfe(S)?0|S:"Unknown"} bps\n      New BW estimate: ${0|this.getBwEstimate()} bps\n      Switching to level ${O} @ ${0|j} bps`),i.nextLoadLevel=i.nextAutoLevel=O,this.clearTimer();const M=()=>{if(this.clearTimer(),this.fragCurrent===r&&this.hls.loadLevel===O&&O>0){const e=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${O>0?"and switching down":""}\n      Fragment duration: ${r.duration.toFixed(3)} s\n      Time to underbuffer: ${e.toFixed(3)} s`),r.abortRequests(),this.fragCurrent=this.partCurrent=null,O>d){let t=this.findBestLevel(this.hls.levels[d].bitrate,d,O,0,e,1,1);-1===t&&(t=d),this.hls.nextLoadLevel=this.hls.nextAutoLevel=t,this.resetEstimator(this.hls.levels[t].bitrate)}}};p||P>2*N?M():this.timer=self.setInterval(M,1e3*N),i.trigger($fe.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,part:n,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new Yfe(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.on($fe.FRAG_LOADING,this.onFragLoading,this),e.on($fe.FRAG_LOADED,this.onFragLoaded,this),e.on($fe.FRAG_BUFFERED,this.onFragBuffered,this),e.on($fe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on($fe.LEVEL_LOADED,this.onLevelLoaded,this),e.on($fe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on($fe.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on($fe.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.off($fe.FRAG_LOADING,this.onFragLoading,this),e.off($fe.FRAG_LOADED,this.onFragLoaded,this),e.off($fe.FRAG_BUFFERED,this.onFragBuffered,this),e.off($fe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off($fe.LEVEL_LOADED,this.onLevelLoaded,this),e.off($fe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off($fe.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off($fe.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const r=t.frag;if(!this.ignoreFragment(r)){var n;if(!r.bitrateTest)this.fragCurrent=r,this.partCurrent=null!=(n=t.part)?n:null;this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case Bfe.BUFFER_ADD_CODEC_ERROR:case Bfe.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case Bfe.FRAG_LOAD_TIMEOUT:{const e=t.frag,{fragCurrent:r,partCurrent:n}=this;if(e&&r&&e.sn===r.sn&&e.level===r.level){const t=performance.now(),r=n?n.stats:e.stats,i=t-r.loading.start,s=r.loading.first?r.loading.first-r.loading.start:-1;if(r.loaded&&s>-1){const e=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(i-Math.min(e,s),r.loaded)}else this.bwEstimator.sampleTTFB(i)}break}}}getTimeToLoadFrag(e,t,r,n){return e+r/t+(n?e+this.lastLevelLoadSec:0)}onLevelLoaded(e,t){const r=this.hls.config,{loading:n}=t.stats,i=n.end-n.first;Lfe(i)&&(this.lastLevelLoadSec=i/1e3),t.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:r}){const n=r?r.stats:t.stats;if(t.type===Hfe&&this.bwEstimator.sampleTTFB(n.loading.first-n.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const e=r?r.duration:t.duration,i=this.hls.levels[t.level],s=(i.loaded?i.loaded.bytes:0)+n.loaded,a=(i.loaded?i.loaded.duration:0)+e;i.loaded={bytes:s,duration:a},i.realBitrate=Math.round(8*s/a)}if(t.bitrateTest){const e={stats:n,frag:t,part:r,id:t.type};this.onFragBuffered($fe.FRAG_BUFFERED,e),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:r,part:n}=t,i=null!=n&&n.stats.loaded?n.stats:r.stats;if(i.aborted)return;if(this.ignoreFragment(r))return;const s=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(s,i.loaded),i.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Hfe||"initSegment"===e.sn}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,r=this.getBwEstimate(),n=this.hls.config.maxStarvationDelay,i=this.findBestLevel(r,t,e,0,n,1,1);if(i>-1)return i;const s=this.hls.firstLevel,a=Math.min(Math.max(s,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${s} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),r=this.lastLoadedFragLevel>-1;if(!(-1===e||t&&r&&this.nextAutoLevelKey!==this.getAutoLevelKey()))return e;const n=t&&r?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){const t=this.hls.levels;if(t.length>Math.max(e,n)&&t[e].loadError<=t[n].loadError)return e}return this._nextAutoLevel=n,this.nextAutoLevelKey=this.getAutoLevelKey(),n}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:r}=this;if(r.levels.length<=1)return r.loadLevel;const{maxAutoLevel:n,config:i,minAutoLevel:s}=r,a=t?t.duration:e?e.duration:0,o=this.getBwEstimate(),l=this.getStarvationDelay();let c=i.abrBandWidthFactor,u=i.abrBandWidthUpFactor;if(l){const e=this.findBestLevel(o,s,n,l,0,c,u);if(e>=0)return this.rebufferNotice=-1,e}let d=a?Math.min(a,i.maxStarvationDelay):i.maxStarvationDelay;if(!l){const e=this.bitrateTestDelay;if(e){d=(a?Math.min(a,i.maxLoadingDelay):i.maxLoadingDelay)-e,this.info(`bitrate test took ${Math.round(1e3*e)}ms, set first fragment max fetchDuration to ${Math.round(1e3*d)} ms`),c=u=1}}const h=this.findBestLevel(o,s,n,l,d,c,u);if(this.rebufferNotice!==h&&(this.rebufferNotice=h,this.info(`${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${h}`)),h>-1)return h;const f=r.levels[s],p=r.loadLevelObj;return p&&(null==f?void 0:f.bitrate)<p.bitrate?s:r.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const r=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,n=e.mainForwardBufferInfo;return(n?n.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,r,n,i,s,a){var o;const l=n+i,c=this.lastLoadedFragLevel,u=-1===c?this.hls.firstLevel:c,{fragCurrent:d,partCurrent:h}=this,{levels:f,allAudioTracks:p,loadLevel:g,config:m}=this.hls;if(1===f.length)return 0;const y=f[u],v=!(null==(o=this.hls.latestLevelDetails)||!o.live),b=-1===g||-1===c;let w,x="SDR",S=(null==y?void 0:y.frameRate)||0;const{audioPreference:E,videoPreference:T}=m,k=this.audioTracksByGroup||(this.audioTracksByGroup=Fge(p));let A=-1;if(b){if(-1!==this.firstSelection)return this.firstSelection;const n=this.codecTiers||(this.codecTiers=function(e,t,r,n){return e.slice(r,n+1).reduce(((e,r,n)=>{if(!r.codecSet)return e;const i=r.audioGroups;let s=e[r.codecSet];s||(e[r.codecSet]=s={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:n,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!i,fragmentError:0}),s.minBitrate=Math.min(s.minBitrate,r.bitrate);const a=Math.min(r.height,r.width);return s.minHeight=Math.min(s.minHeight,a),s.minFramerate=Math.min(s.minFramerate,r.frameRate),s.minIndex=Math.min(s.minIndex,n),s.maxScore=Math.max(s.maxScore,r.score),s.fragmentError+=r.fragmentError,s.videoRanges[r.videoRange]=(s.videoRanges[r.videoRange]||0)+1,i&&i.forEach((e=>{if(!e)return;const r=t.groups[e];r&&(s.hasDefaultAudio=s.hasDefaultAudio||t.hasDefaultAudio?r.hasDefault:r.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(r.channels).forEach((e=>{s.channels[e]=(s.channels[e]||0)+r.channels[e]})))})),e}),{})}(f,k,t,r)),i=function(e,t,r,n,i){const s=Object.keys(e),a=null==n?void 0:n.channels,o=null==n?void 0:n.audioCodec,l=null==i?void 0:i.videoCodec,c=a&&2===parseInt(a);let u=!1,d=!1,h=1/0,f=1/0,p=1/0,g=1/0,m=0,y=[];const{preferHDR:v,allowedVideoRanges:b}=jge(t,i);for(let E=s.length;E--;){const t=e[s[E]];u||(u=t.channels[2]>0),h=Math.min(h,t.minHeight),f=Math.min(f,t.minFramerate),p=Math.min(p,t.minBitrate),b.filter((e=>t.videoRanges[e]>0)).length>0&&(d=!0)}h=Lfe(h)?h:0,f=Lfe(f)?f:0;const w=Math.max(1080,h),x=Math.max(30,f);p=Lfe(p)?p:r,r=Math.max(p,r),d||(t=void 0);const S=s.length>1;return{codecSet:s.reduce(((t,n)=>{const i=e[n];if(n===t)return t;if(y=d?b.filter((e=>i.videoRanges[e]>0)):[],S){if(i.minBitrate>r)return Mge(n,`min bitrate of ${i.minBitrate} > current estimate of ${r}`),t;if(!i.hasDefaultAudio)return Mge(n,"no renditions with default or auto-select sound found"),t;if(o&&n.indexOf(o.substring(0,4))%5!=0)return Mge(n,`audio codec preference "${o}" not found`),t;if(a&&!c){if(!i.channels[a])return Mge(n,`no renditions with ${a} channel sound found (channels options: ${Object.keys(i.channels)})`),t}else if((!o||c)&&u&&0===i.channels[2])return Mge(n,"no renditions with stereo sound found"),t;if(i.minHeight>w)return Mge(n,`min resolution of ${i.minHeight} > maximum of ${w}`),t;if(i.minFramerate>x)return Mge(n,`min framerate of ${i.minFramerate} > maximum of ${x}`),t;if(!y.some((e=>i.videoRanges[e]>0)))return Mge(n,`no variants with VIDEO-RANGE of ${Lge(y)} found`),t;if(l&&n.indexOf(l.substring(0,4))%5!=0)return Mge(n,`video codec preference "${l}" not found`),t;if(i.maxScore<m)return Mge(n,`max score of ${i.maxScore} < selected max of ${m}`),t}return t&&(uge(n)>=uge(t)||i.fragmentError>e[t].fragmentError)?t:(g=i.minIndex,m=i.maxScore,n)}),void 0),videoRanges:y,preferHDR:v,minFramerate:f,minBitrate:p,minIndex:g}}(n,x,e,E,T),{codecSet:s,videoRanges:a,minFramerate:o,minBitrate:l,minIndex:c,preferHDR:u}=i;A=c,w=s,x=u?a[a.length-1]:a[0],S=o,e=Math.max(e,l),this.log(`picked start tier ${Lge(i)}`)}else w=null==y?void 0:y.codecSet,x=null==y?void 0:y.videoRange;const _=h?h.duration:d?d.duration:0,C=this.bwEstimator.getEstimateTTFB()/1e3,P=[];for(let R=r;R>=t;R--){var D;const t=f[R],o=R>u;if(!t)continue;if(m.useMediaCapabilities&&!t.supportedResult&&!t.supportedPromise){const r=navigator.mediaCapabilities;"function"==typeof(null==r?void 0:r.decodingInfo)&&Sge(t,k,x,S,e,E)?(t.supportedPromise=Ege(t,k,r,this.supportedCache),t.supportedPromise.then((e=>{if(!this.hls)return;t.supportedResult=e;const r=this.hls.levels,n=r.indexOf(t);e.error?this.warn(`MediaCapabilities decodingInfo error: "${e.error}" for level ${n} ${Lge(e)}`):e.supported?e.decodingInfoResults.some((e=>!1===e.smooth||!1===e.powerEfficient))&&this.log(`MediaCapabilities decodingInfo for level ${n} not smooth or powerEfficient: ${Lge(e)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${n} ${Lge(e)}`),n>-1&&r.length>1&&(this.log(`Removing unsupported level ${n}`),this.hls.removeLevel(n),-1===this.hls.loadLevel&&(this.hls.nextLoadLevel=0)))})).catch((e=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${e}`)}))):t.supportedResult=wge}if((w&&t.codecSet!==w||x&&t.videoRange!==x||o&&S>t.frameRate||!o&&S>0&&S<t.frameRate||null!=(D=t.supportedResult)&&null!=(D=D.decodingInfoResults)&&D.some((e=>!1===e.smooth)))&&(!b||R!==A)){P.push(R);continue}const d=t.details,p=(h?null==d?void 0:d.partTarget:null==d?void 0:d.averagetargetduration)||_;let y;y=o?a*e:s*e;const T=_&&n>=2*_&&0===i?t.averageBitrate:t.maxBitrate,I=this.getTimeToLoadFrag(C,y,T*p,void 0===d);if(y>=T&&(R===c||0===t.loadError&&0===t.fragmentError)&&(I<=C||!Lfe(I)||v&&!this.bitrateTestDelay||I<l)){const e=this.forcedAutoLevel;return R===g||-1!==e&&e===g||(P.length&&this.trace(`Skipped level(s) ${P.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${f[P[0]].codecs}" ${f[P[0]].videoRange}; not compatible with "${w}" ${x}`),this.info(`switch candidate:${u}->${R} adjustedbw(${Math.round(y)})-bitrate=${Math.round(y-T)} ttfb:${C.toFixed(1)} avgDuration:${p.toFixed(1)} maxFetchDuration:${l.toFixed(1)} fetchDuration:${I.toFixed(1)} firstSelection:${b} codecSet:${t.codecSet} videoRange:${t.videoRange} hls.loadLevel:${g}`)),b&&(this.firstSelection=R),R}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:r}=this.hls;return Math.min(Math.max(e,r),t)}},bufferController:class extends tpe{constructor(e,t){var r;super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=e=>{var t;this.hls&&"open"===(null==(t=this.mediaSource)?void 0:t.readyState)&&this.hls.pauseBuffering()},this._onStartStreaming=e=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=e=>{const{media:t,mediaSource:r}=this;e&&this.log("Media source opened"),t&&r&&(r.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger($fe.MEDIA_ATTACHED,{media:t,mediaSource:r}),null!==this.mediaSource&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:e,_objectUrl:t}=this;e!==t&&this.error(`Media element src was set while attaching MediaSource (${t} > ${e})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=(r=lpe(e.config.preferManagedMediaSource),"undefined"!=typeof self&&r===self.ManagedMediaSource),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on($fe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on($fe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.on($fe.MANIFEST_PARSED,this.onManifestParsed,this),e.on($fe.BUFFER_RESET,this.onBufferReset,this),e.on($fe.BUFFER_APPENDING,this.onBufferAppending,this),e.on($fe.BUFFER_CODECS,this.onBufferCodecs,this),e.on($fe.BUFFER_EOS,this.onBufferEos,this),e.on($fe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on($fe.LEVEL_UPDATED,this.onLevelUpdated,this),e.on($fe.FRAG_PARSED,this.onFragParsed,this),e.on($fe.FRAG_CHANGED,this.onFragChanged,this),e.on($fe.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off($fe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off($fe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.off($fe.MANIFEST_PARSED,this.onManifestParsed,this),e.off($fe.BUFFER_RESET,this.onBufferReset,this),e.off($fe.BUFFER_APPENDING,this.onBufferAppending,this),e.off($fe.BUFFER_CODECS,this.onBufferCodecs,this),e.off($fe.BUFFER_EOS,this.onBufferEos,this),e.off($fe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off($fe.LEVEL_UPDATED,this.onLevelUpdated,this),e.off($fe.FRAG_PARSED,this.onFragParsed,this),e.off($fe.FRAG_CHANGED,this.onFragChanged,this),e.off($fe.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const r={};if(this.operationQueue){const e=this.isUpdating();e||this.operationQueue.removeBlockers();const t=this.isQueued();(e||t)&&this.warn(`Transfering MediaSource with${t?" operations in queue":""}${e?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const n=this.transferData;return!this.sourceBufferCount&&n&&n.mediaSource===t?Jfe(r,n.tracks):this.sourceBuffers.forEach((e=>{const[t]=e;t&&(r[t]=Jfe({},this.tracks[t]),this.removeBuffer(t)),e[0]=e[1]=null})),{media:e,mediaSource:t,tracks:r}}initTracks(){this.sourceBuffers=[[null,null],[null,null]],this.tracks={},this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var r;let n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsTotal=n,this.log(`${n} bufferCodec event(s) expected.`),null!=(r=this.transferData)&&r.mediaSource&&this.sourceBufferCount&&n&&this.bufferCreated()}onMediaAttaching(e,t){const r=this.media=t.media;this.transferData=this.overrides=void 0;const n=lpe(this.appendSource);if(n){const e=!!t.mediaSource;(e||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const s=this.mediaSource=t.mediaSource||new n;if(this.assignMediaSource(s),e)this._objectUrl=r.src,this.attachTransferred();else{const e=this._objectUrl=self.URL.createObjectURL(s);if(this.appendSource)try{r.removeAttribute("src");const t=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||t&&s instanceof t,Jbe(r),function(e,t){const r=self.document.createElement("source");r.type="video/mp4",r.src=t,e.appendChild(r)}(r,e),r.load()}catch(i){r.src=e}else r.src=e}r.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,r;this.log(`${(null==(t=this.transferData)?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${null==(r=e.constructor)?void 0:r.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const r=this.tracks,n=t.tracks,i=n?Object.keys(n):null,s=i?i.length:0,a=()=>{Promise.resolve().then((()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()}))};if(n&&i&&s){if(!this.tracksReady)return this.hls.config.startFragPrefetch=!0,void this.log("attachTransferred: waiting for SourceBuffer track info");if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})\nrequired tracks: ${Lge(r,((e,t)=>"initSegment"===e?void 0:t))};\ntransfer tracks: ${Lge(n,((e,t)=>"initSegment"===e?void 0:t))}}`),!cpe(n,r)){t.mediaSource=null,t.tracks=void 0;const i=e.currentTime,s=this.details,a=Math.max(i,(null==s?void 0:s.fragments[0].start)||0);return a-i>1?void this.log(`attachTransferred: waiting for playback to reach new tracks start time ${i} -> ${a}`):(this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(n)}"->"${Object.keys(r)}") start time: ${a} currentTime: ${i}`),this.onMediaDetaching($fe.MEDIA_DETACHING,{}),this.onMediaAttaching($fe.MEDIA_ATTACHING,t),void(e.currentTime=a))}this.transferData=void 0,i.forEach((e=>{const t=e,r=n[t];if(r){const e=r.buffer;if(e){const n=this.fragmentTracker,i=r.id;if(n.hasFragments(i)||n.hasParts(i)){const r=jme.getBuffered(e);n.detectEvictedFragments(t,r,i,null,!0)}const s=Zbe(t),a=[t,e];this.sourceBuffers[s]=a,e.updating&&this.operationQueue&&this.operationQueue.prependBlocker(t),this.trackSourceBuffer(t,r)}}})),a(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),a()}get mediaSourceOpenOrEnded(){var e;const t=null==(e=this.mediaSource)?void 0:e.readyState;return"open"===t||"ended"===t}onMediaDetaching(e,t){const r=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:n,mediaSource:i,_objectUrl:s}=this;if(i){if(this.log("media source "+(r?"transferring":"detaching")),r)this.sourceBuffers.forEach((([e])=>{e&&this.removeBuffer(e)})),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const e="open"===i.readyState;try{const t=i.sourceBuffers;for(let r=t.length;r--;)e&&t[r].abort(),i.removeSourceBuffer(t[r]);e&&i.endOfStream()}catch(mEe){this.warn(`onMediaDetaching: ${mEe.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}i.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("sourceended",this._onMediaSourceEnded),i.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(i.removeEventListener("startstreaming",this._onStartStreaming),i.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}n&&(n.removeEventListener("emptied",this._onMediaEmptied),r||(s&&self.URL.revokeObjectURL(s),this.mediaSrc===s?(n.removeAttribute("src"),this.appendSource&&Jbe(n),n.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger($fe.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach((([e])=>{e&&this.resetBuffer(e)})),this.initTracks()}resetBuffer(e){var t;const r=null==(t=this.tracks[e])?void 0:t.buffer;if(this.removeBuffer(e),r)try{var n;null!=(n=this.mediaSource)&&n.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(r)}catch(mEe){this.warn(`onBufferReset ${e}`,mEe)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[Zbe(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new Wbe(this.tracks)}onBufferCodecs(e,t){var r;const n=this.tracks,i=Object.keys(t);this.log(`BUFFER_CODECS: "${i}" (current SB count ${this.sourceBufferCount})`);const s="audiovideo"in t&&(n.audio||n.video)||n.audiovideo&&("audio"in t||"video"in t),a=!s&&this.sourceBufferCount&&this.media&&i.some((e=>!n[e]));s||a?this.warn(`Unsupported transition between "${Object.keys(n)}" and "${i}" SourceBuffers`):(i.forEach((e=>{var r,i;const s=t[e],{id:a,codec:o,levelCodec:l,container:c,metadata:u,supplemental:d}=s;let h=n[e];const f=null==(r=this.transferData)||null==(r=r.tracks)?void 0:r[e],p=null!=f&&f.buffer?f:h,g=(null==p?void 0:p.pendingCodec)||(null==p?void 0:p.codec),m=null==p?void 0:p.levelCodec;h||(h=n[e]={buffer:void 0,listeners:[],codec:o,supplemental:d,container:c,levelCodec:l,metadata:u,id:a});const y=pge(g,m),v=null==y?void 0:y.replace(Qbe,"$1");let b=pge(o,l);const w=null==(i=b)?void 0:i.replace(Qbe,"$1");b&&y&&v!==w&&("audio"===e.slice(0,5)&&(b=fge(b,this.appendSource)),this.log(`switching codec ${g} to ${b}`),b!==(h.pendingCodec||h.codec)&&(h.pendingCodec=b),h.container=c,this.appendChangeType(e,c,b))})),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),this.sourceBufferCount||(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!t.video&&"main"===(null==(r=t.audio)?void 0:r.id)&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks()))}get sourceBufferTracks(){return Object.keys(this.tracks).reduce(((e,t)=>{const r=this.tracks[t];return e[t]={id:r.id,container:r.container,codec:r.codec,levelCodec:r.levelCodec},e}),{})}appendChangeType(e,t,r){const n=`${t};codecs=${r}`,i={label:`change-type=${n}`,execute:()=>{const i=this.tracks[e];if(i){const s=i.buffer;null!=s&&s.changeType&&(this.log(`changing ${e} sourceBuffer type to ${n}`),s.changeType(n),i.codec=r,i.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{this.warn(`Failed to change ${e} SourceBuffer type`,t)}};this.append(i,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const r=e.start,n=r+.05*e.duration;if(!0===(null==(t=this.fragmentTracker.getAppendedFrag(r,Hfe))?void 0:t.gap))return;const i={label:"block-audio",execute:()=>{var e;const t=this.tracks.video;(this.lastVideoAppendEnd>n||null!=t&&t.buffer&&jme.isBuffered(t.buffer,n)||!0===(null==(e=this.fragmentTracker.getAppendedFrag(n,Hfe))?void 0:e.gap))&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:e=>{this.warn("Error executing block-audio operation",e)}};this.blockedAudioAppend={op:i,frag:e},this.append(i,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:r}=this,{data:n,type:i,parent:s,frag:a,part:o,chunkMeta:l,offset:c}=t,u=l.buffering[i],{sn:d,cc:h}=a,f=self.performance.now();u.start=f;const p=a.stats.buffering,g=o?o.stats.buffering:null;0===p.start&&(p.start=f),g&&0===g.start&&(g.start=f);const m=r.audio;let y=!1;"audio"===i&&"audio/mpeg"===(null==m?void 0:m.container)&&(y=!this.lastMpegAudioChunk||1===l.id||this.lastMpegAudioChunk.sn!==l.sn,this.lastMpegAudioChunk=l);const v=r.video,b=null==v?void 0:v.buffer;if(b&&"initSegment"!==d){const e=o||a,t=this.blockedAudioAppend;if("audio"!==i||"main"===s||this.blockedAudioAppend||v.ending||v.ended){if("video"===i){const r=e.end;if(t){const e=t.frag.start;(r>e||r<this.lastVideoAppendEnd||jme.isBuffered(b,e))&&this.unblockAudio()}this.lastVideoAppendEnd=r}}else{const t=e.start+.05*e.duration,r=b.buffered,n=this.currentOp("video");r.length||n?!n&&!jme.isBuffered(b,t)&&this.lastVideoAppendEnd<t&&this.blockAudio(e):this.blockAudio(e)}}const w=(o||a).start,x={label:`append-${i}`,execute:()=>{var e;u.executeStart=self.performance.now();const t=null==(e=this.tracks[i])?void 0:e.buffer;t&&(y?this.updateTimestampOffset(t,w,.1,i,d,h):void 0!==c&&Lfe(c)&&this.updateTimestampOffset(t,c,1e-6,i,d,h)),this.appendExecutor(n,i)},onStart:()=>{},onComplete:()=>{const e=self.performance.now();u.executeEnd=u.end=e,0===p.first&&(p.first=e),g&&0===g.first&&(g.first=e);const t={};this.sourceBuffers.forEach((([e,r])=>{e&&(t[e]=jme.getBuffered(r))})),this.appendErrors[i]=0,"audio"===i||"video"===i?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger($fe.BUFFER_APPENDED,{type:i,frag:a,part:o,chunkMeta:l,parent:a.type,timeRanges:t})},onError:e=>{var t;const r={type:Ufe.MEDIA_ERROR,parent:a.type,details:Bfe.BUFFER_APPEND_ERROR,sourceBufferName:i,frag:a,part:o,chunkMeta:l,error:e,err:e,fatal:!1},n=null==(t=this.media)?void 0:t.error;if(e.code===DOMException.QUOTA_EXCEEDED_ERR||"QuotaExceededError"==e.name||"quota"in e)r.details=Bfe.BUFFER_FULL_ERROR;else if(e.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!n)r.errorAction=hme(!0);else if(e.name===Ybe&&0===this.sourceBufferCount)r.errorAction=hme(!0);else{const e=++this.appendErrors[i];this.warn(`Failed ${e}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${i}" sourceBuffer (${n||"no media error"})`),(e>=this.hls.config.appendErrorMaxRetry||n)&&(r.fatal=!0)}this.hls.trigger($fe.ERROR,r)}};this.log(`queuing "${i}" append sn: ${d}${o?" p: "+o.index:""} of ${a.type===Hfe?"level":"track"} ${a.level} cc: ${h}`),this.append(x,i,this.isPending(this.tracks[i]))}getFlushOp(e,t,r){return this.log(`queuing "${e}" remove ${t}-${r}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,r)},onStart:()=>{},onComplete:()=>{this.hls.trigger($fe.BUFFER_FLUSHED,{type:e})},onError:n=>{this.warn(`Failed to remove ${t}-${r} from "${e}" SourceBuffer`,n)}}}onBufferFlushing(e,t){const{type:r,startOffset:n,endOffset:i}=t;r?this.append(this.getFlushOp(r,n,i),r):this.sourceBuffers.forEach((([e])=>{e&&this.append(this.getFlushOp(e,n,i),e)}))}onFragParsed(e,t){const{frag:r,part:n}=t,i=[],s=n?n.elementaryStreams:r.elementaryStreams;s[kpe]?i.push("audiovideo"):(s[Epe]&&i.push("audio"),s[Tpe]&&i.push("video"));0===i.length&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers((()=>{const e=self.performance.now();r.stats.buffering.end=e,n&&(n.stats.buffering.end=e);const t=n?n.stats:r.stats;this.hls.trigger($fe.FRAG_BUFFERED,{frag:r,part:n,stats:t,id:r.type})}),i).catch((e=>{this.warn(`Fragment buffered callback ${e}`),this.stepOperationQueue(this.sourceBufferTypes)}))}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some((([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1}))}onBufferEos(e,t){var r;this.sourceBuffers.forEach((([e])=>{if(e){const r=this.tracks[e];t.type&&t.type!==e||(r.ending=!0,r.ended||(r.ended=!0,this.log(`${e} buffer reached EOS`)))}}));const n=!1!==(null==(r=this.overrides)?void 0:r.endOfStream);this.sourceBufferCount>0&&!this.sourceBuffers.some((([e])=>{var t;return e&&!(null!=(t=this.tracks[e])&&t.ended)}))?n?(this.log("Queueing EOS"),this.blockUntilOpen((()=>{this.tracksEnded();const{mediaSource:e}=this;e&&"open"===e.readyState?(this.log("Calling mediaSource.endOfStream()"),e.endOfStream(),this.hls.trigger($fe.BUFFERED_TO_END,void 0)):e&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${e.readyState}`)}))):(this.tracksEnded(),this.hls.trigger($fe.BUFFERED_TO_END,void 0)):"video"===t.type&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach((([e])=>{if(null!==e){const t=this.tracks[e];t&&(t.ending=!1)}}))}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen((()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)}))}onError(e,t){if(t.details===Bfe.BUFFER_APPEND_ERROR&&t.frag){var r;const e=null==(r=t.errorAction)?void 0:r.nextAutoLevel;Lfe(e)&&e!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:r}=this;if(!r||null===t)return;if(!this.sourceBufferCount)return;const n=e.config,i=r.currentTime,s=t.levelTargetDuration,a=t.live&&null!==n.liveBackBufferLength?n.liveBackBufferLength:n.backBufferLength;if(Lfe(a)&&a>=0){const e=Math.max(a,s),t=Math.floor(i/s)*s-e;this.flushBackBuffer(i,s,t)}const o=n.frontBufferFlushThreshold;if(Lfe(o)&&o>0){const e=Math.max(n.maxBufferLength,o),t=Math.max(e,s),r=Math.floor(i/s)*s+t;this.flushFrontBuffer(i,s,r)}}flushBackBuffer(e,t,r){this.sourceBuffers.forEach((([e,t])=>{if(t){const i=jme.getBuffered(t);if(i.length>0&&r>i.start(0)){var n;this.hls.trigger($fe.BACK_BUFFER_REACHED,{bufferEnd:r});const t=this.tracks[e];if(null!=(n=this.details)&&n.live)this.hls.trigger($fe.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(null!=t&&t.ended)return void this.log(`Cannot flush ${e} back buffer while SourceBuffer is in ended state`);this.hls.trigger($fe.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:e})}}}))}flushFrontBuffer(e,t,r){this.sourceBuffers.forEach((([t,n])=>{if(n){const i=jme.getBuffered(n),s=i.length;if(s<2)return;const a=i.start(s-1),o=i.end(s-1);if(r>a||e>=a&&e<=o)return;this.hls.trigger($fe.BUFFER_FLUSHING,{startOffset:a,endOffset:1/0,type:t})}}))}getDurationAndRange(){var e;const{details:t,mediaSource:r}=this;if(!t||!this.media||"open"!==(null==r?void 0:r.readyState))return null;const n=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&r.setLiveSeekableRange){const e=Math.max(0,t.fragmentStart);return{duration:1/0,start:e,end:Math.max(e,n)}}return{duration:1/0}}const i=null==(e=this.overrides)?void 0:e.duration;if(i)return Lfe(i)?{duration:i}:null;const s=this.media.duration;return n>(Lfe(r.duration)?r.duration:0)&&n>s||!Lfe(s)?{duration:n}:null}updateMediaSource({duration:e,start:t,end:r}){const n=this.mediaSource;this.media&&n&&"open"===n.readyState&&(n.duration!==e&&(Lfe(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),n.duration=e),void 0!==t&&void 0!==r&&(this.log(`MediaSource duration is set to ${n.duration}. Setting seekable range to ${t}-${r}.`),n.setLiveSeekableRange(t,r)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:r}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${Lge(r)}`),this.tracksReady){var n;const e=null==(n=this.transferData)?void 0:n.tracks;e&&Object.keys(e).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach((([t,r])=>{if(t){const n=this.tracks[t];e[t]={buffer:r,container:n.container,codec:n.codec,supplemental:n.supplemental,levelCodec:n.levelCodec,id:n.id,metadata:n.metadata}}})),this.hls.trigger($fe.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach((([e])=>{this.executeNext(e)}))}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger($fe.ERROR,{type:Ufe.MEDIA_ERROR,details:Bfe.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:r}=this;if(!r)throw new Error("createSourceBuffers called when mediaSource was null");for(const s in e){const a=s,o=e[a];if(this.isPending(o)){const e=this.getTrackCodec(o,a),s=`${o.container};codecs=${e}`;o.codec=e,this.log(`creating sourceBuffer(${s})${this.currentOp(a)?" Queued":""} ${Lge(o)}`);try{const e=r.addSourceBuffer(s),n=Zbe(a),i=[a,e];t[n]=i,o.buffer=e}catch(i){var n;return this.error(`error while trying to add sourceBuffer: ${i.message}`),this.shiftAndExecuteNext(a),null==(n=this.operationQueue)||n.removeBlockers(),delete this.tracks[a],void this.hls.trigger($fe.ERROR,{type:Ufe.MEDIA_ERROR,details:Bfe.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:i,sourceBufferName:a,mimeType:s,parent:o.id})}this.trackSourceBuffer(a,o)}}this.bufferCreated()}getTrackCodec(e,t){const r=e.supplemental;let n=e.codec;r&&("video"===t||"audiovideo"===t)&&age(r,"video")&&(n=function(e,t){const r=[];if(e){const t=e.split(",");for(let e=0;e<t.length;e++)sge(t[e],"video")||r.push(t[e])}return t&&r.push(t),r.join(",")}(n,r));const i=pge(n,e.levelCodec);return i?"audio"===t.slice(0,5)?fge(i,this.appendSource):i:""}trackSourceBuffer(e,t){const r=t.buffer;if(!r)return;const n=this.getTrackCodec(t,e);this.tracks[e]={buffer:r,codec:n,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",((e,t)=>{const r=t.removedRanges;null!=r&&r.length&&this.hls.trigger($fe.BUFFER_FLUSHED,{type:e})}))}get mediaSrc(){var e,t;const r=(null==(e=this.media)||null==(t=e.querySelector)?void 0:t.call(e,"source"))||this.media;return null==r?void 0:r.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if("closed"===(null==(t=this.mediaSource)?void 0:t.readyState))return void this.resetBuffer(e);const r=this.currentOp(e);r&&(r.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var r;const n=new Error(`${e} SourceBuffer error. MediaSource readyState: ${null==(r=this.mediaSource)?void 0:r.readyState}`);this.error(`${n}`,t),this.hls.trigger($fe.ERROR,{type:Ufe.MEDIA_ERROR,details:Bfe.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:n,fatal:!1});const i=this.currentOp(e);i&&i.onError(n)}updateTimestampOffset(e,t,r,n,i,s){const a=t-e.timestampOffset;Math.abs(a)>=r&&(this.log(`Updating ${n} SourceBuffer timestampOffset to ${t} (sn: ${i} cc: ${s})`),e.timestampOffset=t)}removeExecutor(e,t,r){const{media:n,mediaSource:i}=this,s=this.tracks[e],a=null==s?void 0:s.buffer;if(!n||!i||!a)return this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),void this.shiftAndExecuteNext(e);const o=Lfe(n.duration)?n.duration:1/0,l=Lfe(i.duration)?i.duration:1/0,c=Math.max(0,t),u=Math.min(r,o,l);u>c&&(!s.ending||s.ended)?(s.ended=!1,this.log(`Removing [${c},${u}] from the ${e} SourceBuffer`),a.remove(c,u)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const r=this.tracks[t],n=null==r?void 0:r.buffer;if(!n)throw new Xbe(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);r.ending=!1,r.ended=!1,n.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch((e=>{this.warn(`SourceBuffer blocked callback ${e}`),this.stepOperationQueue(this.sourceBufferTypes)}));else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some((([e,t])=>e&&t.updating))}isQueued(){return this.sourceBuffers.some((([e])=>e&&!!this.currentOp(e)))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:r}=this,n=t.map((e=>this.appendBlocker(e)));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(n).then((t=>{r===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))}))}stepOperationQueue(e){e.forEach((e=>{var t;const r=null==(t=this.tracks[e])?void 0:t.buffer;r&&!r.updating&&this.shiftAndExecuteNext(e)}))}append(e,t,r){this.operationQueue&&this.operationQueue.append(e,t,r)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce(((e,t)=>e+(this.isPending(this.tracks[t])?1:0)),0)}get sourceBufferCount(){return this.sourceBuffers.reduce(((e,[t])=>e+(t?1:0)),0)}get sourceBufferTypes(){return this.sourceBuffers.map((([e])=>e)).filter((e=>!!e))}addBufferListener(e,t,r){const n=this.tracks[e];if(!n)return;const i=n.buffer;if(!i)return;const s=r.bind(this,e);n.listeners.push({event:t,listener:s}),i.addEventListener(t,s)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const r=t.buffer;r&&(t.listeners.forEach((e=>{r.removeEventListener(e.event,e.listener)})),t.listeners.length=0)}},capLevelController:ewe,errorController:class extends tpe{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on($fe.ERROR,this.onError,this),e.on($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.on($fe.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off($fe.ERROR,this.onError,this),e.off($fe.ERROR,this.onErrorOut,this),e.off($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.off($fe.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(null==e?void 0:e.type)===Hfe?e.level:this.getVariantIndex()}getVariantIndex(){var e;const t=this.hls,r=t.currentLevel;return null!=(e=t.loadLevelObj)&&e.details||-1===r?t.loadLevel:r}variantHasKey(e,t){if(e){var r;if(null!=(r=e.details)&&r.hasKey(t))return!0;const n=e.audioGroups;if(n){return this.hls.allAudioTracks.filter((e=>n.indexOf(e.groupId)>=0)).some((e=>{var r;return null==(r=e.details)?void 0:r.hasKey(t)}))}}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,t){var r;if(t.fatal)return;const n=this.hls,i=t.context;switch(t.details){case Bfe.FRAG_LOAD_ERROR:case Bfe.FRAG_LOAD_TIMEOUT:case Bfe.KEY_LOAD_ERROR:case Bfe.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case Bfe.FRAG_PARSING_ERROR:if(null!=(r=t.frag)&&r.gap)return void(t.errorAction=hme());case Bfe.FRAG_GAP:case Bfe.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=sme);case Bfe.LEVEL_EMPTY_ERROR:case Bfe.LEVEL_PARSING_ERROR:{var s;const e=t.parent===Hfe?t.level:n.loadLevel;t.details===Bfe.LEVEL_EMPTY_ERROR&&null!=(s=t.context)&&null!=(s=s.levelDetails)&&s.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case Bfe.LEVEL_LOAD_ERROR:case Bfe.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==i?void 0:i.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.level)));case Bfe.AUDIO_TRACK_LOAD_ERROR:case Bfe.AUDIO_TRACK_LOAD_TIMEOUT:case Bfe.SUBTITLE_LOAD_ERROR:case Bfe.SUBTITLE_TRACK_LOAD_TIMEOUT:if(i){const e=n.loadLevelObj;if(e&&(i.type===Vfe&&e.hasAudioGroup(i.groupId)||i.type===Kfe&&e.hasSubtitleGroup(i.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,n.loadLevel),t.errorAction.action=sme,void(t.errorAction.flags=cme)}return;case Bfe.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:return void(t.errorAction={action:sme,flags:ume});case Bfe.KEY_SYSTEM_SESSION_UPDATE_FAILED:case Bfe.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case Bfe.KEY_SYSTEM_NO_SESSION:return void(t.errorAction={action:sme,flags:dme});case Bfe.BUFFER_ADD_CODEC_ERROR:case Bfe.REMUX_ALLOC_ERROR:case Bfe.BUFFER_APPEND_ERROR:var a;if(!t.errorAction)t.errorAction=this.getLevelSwitchAction(t,null!=(a=t.level)?a:n.loadLevel);return;case Bfe.INTERNAL_EXCEPTION:case Bfe.BUFFER_APPENDING_ERROR:case Bfe.BUFFER_FULL_ERROR:case Bfe.LEVEL_SWITCH_ERROR:case Bfe.BUFFER_STALLED_ERROR:case Bfe.BUFFER_SEEK_OVER_HOLE:case Bfe.BUFFER_NUDGE_ON_STALL:return void(t.errorAction=hme())}t.type===Ufe.KEY_SYSTEM_ERROR&&(t.levelRetry=!1,t.errorAction=hme())}getPlaylistRetryOrSwitchAction(e,t){const r=Zge(this.hls.config.playlistLoadPolicy,e),n=this.playlistError++;if(rme(r,n,Yge(e),e.response))return{action:ome,flags:lme,retryConfig:r,retryCount:n};const i=this.getLevelSwitchAction(e,t);return r&&(i.retryConfig=r,i.retryCount=n),i}getFragRetryOrSwitchAction(e){const t=this.hls,r=this.getVariantLevelIndex(e.frag),n=t.levels[r],{fragLoadPolicy:i,keyLoadPolicy:s}=t.config,a=Zge(Xge(e)?s:i,e),o=t.levels.reduce(((e,t)=>e+t.fragmentError),0);if(n&&(e.details!==Bfe.FRAG_GAP&&n.fragmentError++,!Jge(e))){if(rme(a,o,Yge(e),e.response))return{action:ome,flags:lme,retryConfig:a,retryCount:o}}const l=this.getLevelSwitchAction(e,r);return a&&(l.retryConfig=a,l.retryCount=o),l}getLevelSwitchAction(e,t){const r=this.hls;null==t&&(t=r.loadLevel);const n=this.hls.levels[t];if(n){var i,s;const t=e.details;n.loadError++,t===Bfe.BUFFER_APPEND_ERROR&&n.fragmentError++;let l=-1;const{levels:c,loadLevel:u,minAutoLevel:d,maxAutoLevel:h}=r;r.autoLevelEnabled||r.config.preserveManualLevelOnError||(r.loadLevel=-1);const f=null==(i=e.frag)?void 0:i.type,p=(f===Gfe&&t===Bfe.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(t===Bfe.BUFFER_ADD_CODEC_ERROR||t===Bfe.BUFFER_APPEND_ERROR))&&c.some((({audioCodec:e})=>n.audioCodec!==e)),g="video"===e.sourceBufferName&&(t===Bfe.BUFFER_ADD_CODEC_ERROR||t===Bfe.BUFFER_APPEND_ERROR)&&c.some((({codecSet:e,audioCodec:t})=>n.codecSet!==e&&n.audioCodec===t)),{type:m,groupId:y}=null!=(s=e.context)?s:{};for(let r=c.length;r--;){const i=(r+u)%c.length;if(i!==u&&i>=d&&i<=h&&0===c[i].loadError){var a,o;const r=c[i];if(t===Bfe.FRAG_GAP&&f===Hfe&&e.frag){const t=c[i].details;if(t){const r=Hge(e.frag,t.fragments,e.frag.start);if(null!=r&&r.gap)continue}}else{if(m===Vfe&&r.hasAudioGroup(y)||m===Kfe&&r.hasSubtitleGroup(y))continue;if(f===Gfe&&null!=(a=n.audioGroups)&&a.some((e=>r.hasAudioGroup(e)))||f===Wfe&&null!=(o=n.subtitleGroups)&&o.some((e=>r.hasSubtitleGroup(e)))||p&&n.audioCodec===r.audioCodec||g&&n.codecSet===r.codecSet||!p&&n.codecSet!==r.codecSet)continue}l=i;break}}if(l>-1&&r.loadLevel!==l)return e.levelRetry=!0,this.playlistError=0,{action:sme,flags:lme,nextAutoLevel:l}}return{action:sme,flags:cme}}onErrorOut(e,t){var r;switch(null==(r=t.errorAction)?void 0:r.action){case ime:break;case sme:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===Bfe.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError()):t.fatal=!0}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,r=e.errorAction;if(!r)return;const{flags:n}=r,i=r.nextAutoLevel;switch(n){case lme:this.switchLevel(e,i);break;case ume:{const n=this.getVariantLevelIndex(e.frag),i=t.levels[n],s=null==i?void 0:i.attrs["HDCP-LEVEL"];if(r.hdcpLevel=s,"NONE"===s)this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(s){t.maxHdcpLevel=Age[Age.indexOf(s)-1],r.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}}case dme:{const t=e.decryptdata;if(t){const n=this.hls.levels,i=n.length;for(let r=i;r--;){var s,a;if(this.variantHasKey(n[r],t))this.log(`Banned key found in level ${r} (${n[r].bitrate}bps) or audio group "${null==(s=n[r].audioGroups)?void 0:s.join(",")}" (${null==(a=e.frag)?void 0:a.type} fragment) ${dpe(t.keyId||[])}`),n[r].fragmentError++,n[r].loadError++,this.log(`Removing level ${r} with key error (${e.error})`),this.hls.removeLevel(r)}const o=e.frag;if(this.hls.levels.length<i)r.resolved=!0;else if(o&&o.type!==Hfe){const e=o.decryptdata;e&&!t.matches(e)&&(r.resolved=!0)}}break}}r.resolved||this.switchLevel(e,i)}switchLevel(e,t){if(void 0!==t&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===Bfe.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&"audiovideo"!==e.sourceBufferName)){const t=vge(e.mimeType),r=this.hls.levels;for(let n=r.length;n--;)r[n][`${e.sourceBufferName}Codec`]===t&&(this.log(`Removing level ${n} for ${e.details} ("${t}" not supported)`),this.hls.removeLevel(n))}}},fpsController:class{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on($fe.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on($fe.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off($fe.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off($fe.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const r=this.hls.config;if(r.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"==typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,r){const n=performance.now();if(t){if(this.lastTime){const e=n-this.lastTime,i=r-this.lastDroppedFrames,s=t-this.lastDecodedFrames,a=1e3*i/e,o=this.hls;if(o.trigger($fe.FPS_DROP,{currentDropped:i,currentDecoded:s,totalDroppedFrames:r}),a>0&&i>o.config.fpsDroppedMonitoringThreshold*s){let e=o.currentLevel;o.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===o.autoLevelCapping||o.autoLevelCapping>=e)&&(e-=1,o.trigger($fe.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:o.currentLevel}),o.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:uye,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:mSe,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:class extends hve{constructor(e,t,r){super(e,t,r,"subtitle-stream-controller",Wfe),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on($fe.LEVEL_LOADED,this.onLevelLoaded,this),e.on($fe.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on($fe.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on($fe.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on($fe.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on($fe.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off($fe.LEVEL_LOADED,this.onLevelLoaded,this),e.off($fe.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off($fe.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off($fe.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off($fe.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off($fe.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=tve,this.setInterval(500),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:r,success:n}=t;if(this.fragContextChanged(r)||(_pe(r)&&(this.fragPrevious=r),this.state=tve),!n)return;const i=this.tracksBuffered[this.currentTrackId];if(!i)return;let s;const a=r.start;for(let l=0;l<i.length;l++)if(a>=i[l].start&&a<=i[l].end){s=i[l];break}const o=r.start+r.duration;s?s.end=o:(s={start:a,end:o},i.push(s)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:r,endOffset:n}=t;if(0===r&&n!==Number.POSITIVE_INFINITY){const e=n-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach((t=>{for(let r=0;r<t.length;)if(t[r].end<=e)t.shift();else{if(!(t[r].start<e))break;t[r].start=e,r++}})),this.fragmentTracker.removeFragmentsInRange(r,e,Wfe)}}onError(e,t){const r=t.frag;(null==r?void 0:r.type)===Wfe&&(t.details===Bfe.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==eve&&(this.state=tve))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){this.levels&&Kbe(this.levels,t)?this.levels=t.map((e=>new Oge(e))):(this.tracksBuffered=[],this.levels=t.map((e=>{const t=new Oge(e);return this.tracksBuffered[t.id]=[],t})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Wfe),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){var r;if(this.currentTrackId=t.id,null==(r=this.levels)||!r.length||-1===this.currentTrackId)return void this.clearInterval();const n=this.levels[this.currentTrackId];null!=n&&n.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,n&&this.state!==eve&&this.setInterval(500)}onSubtitleTrackLoaded(e,t){var r;const{currentTrackId:n,levels:i}=this,{details:s,id:a}=t;if(!i)return void this.warn(`Subtitle tracks were reset while loading level ${a}`);const o=i[a];if(a>=i.length||!o)return;this.log(`Subtitle track ${a} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(s.live||null!=(r=o.details)&&r.live){if(s.deltaUpdateFailed)return;const e=this.mainDetails;if(!e)return void(this.startFragRequested=!1);const t=e.fragments[0];var c;if(o.details)l=this.alignPlaylists(s,o.details,null==(c=this.levelLastLoaded)?void 0:c.details),0===l&&t&&(l=t.start,Fye(s,l));else s.hasProgramDateTime&&e.hasProgramDateTime?(Yye(s,e),l=s.fragmentStart):t&&(l=t.start,Fye(s,l));e&&!this.startFragRequested&&this.setStartPosition(e,l)}if(o.details=s,this.levelLastLoaded=o,a===n&&(this.hls.trigger($fe.SUBTITLE_TRACK_UPDATED,{details:s,id:a,groupId:t.groupId}),this.tick(),s.live&&!this.fragCurrent&&this.media&&this.state===tve)){Hge(null,s.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0)}}_handleFragmentLoadComplete(e){const{frag:t,payload:r}=e,n=t.decryptdata,i=this.hls;if(!this.fragContextChanged(t)&&r&&r.byteLength>0&&null!=n&&n.key&&n.iv&&Qme(n.method)){const e=performance.now();this.decrypter.decrypt(new Uint8Array(r),n.key.buffer,n.iv.buffer,Yme(n.method)).catch((e=>{throw i.trigger($fe.ERROR,{type:Ufe.MEDIA_ERROR,details:Bfe.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e})).then((r=>{const n=performance.now();i.trigger($fe.FRAG_DECRYPTED,{frag:t,payload:r,stats:{tstart:e,tdecrypt:n}})})).catch((e=>{this.warn(`${e.name}: ${e.message}`),this.state=tve}))}}doTick(){if(this.media){if(this.state===tve){const{currentTrackId:e,levels:t}=this,r=null==t?void 0:t[e];if(!r||!t.length||!r.details)return;if(this.waitForLive(r))return;const{config:n}=this,i=this.getLoadPosition(),s=jme.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,n.maxBufferHole),{end:a,len:o}=s,l=r.details;if(o>this.hls.maxBufferLength+l.levelTargetDuration)return;const c=l.fragments,u=c.length,d=l.edge;let h=null;const f=this.fragPrevious;if(a<d){const e=n.maxFragLookUpTolerance,t=a>d-e?0:e;h=Hge(f,c,Math.max(c[0].start,a),t),!h&&f&&f.start<c[0].start&&(h=c[0])}else h=c[u-1];if(h=this.filterReplacedPrimary(h,r.details),!h)return;const p=c[h.sn-l.startSN-1];if(p&&p.cc===h.cc&&this.fragmentTracker.getState(p)===fme&&(h=p),this.fragmentTracker.getState(h)===fme){const e=this.mapToInitFragWhenRequired(h);e&&this.loadFragment(e,r,a)}}}else this.state=tve}loadFragment(e,t,r){_pe(e)?super.loadFragment(e,t,r):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new xxe(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class extends Vbe{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=null;const t=sxe(this.media.textTracks);for(let n=0;n<t.length;n++)if("hidden"===t[n].mode)e=t[n];else if("showing"===t[n].mode){e=t[n];break}const r=this.findTrackForTextTrack(e);this.subtitleTrack!==r&&this.setSubtitleTrack(r)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on($fe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($fe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.on($fe.MANIFEST_PARSED,this.onManifestParsed,this),e.on($fe.LEVEL_LOADING,this.onLevelLoading,this),e.on($fe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on($fe.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on($fe.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off($fe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($fe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.off($fe.MANIFEST_PARSED,this.onManifestParsed,this),e.off($fe.LEVEL_LOADING,this.onLevelLoading,this),e.off($fe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off($fe.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off($fe.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const r=this.media;if(!r)return;const n=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||r.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,n)return;sxe(r.textTracks).forEach((e=>{nxe(e)}))}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:r,groupId:n,details:i}=t,s=this.tracksInGroup[r];if(!s||s.groupId!==n)return void this.warn(`Subtitle track with id:${r} and group:${n} not found in active group ${null==s?void 0:s.groupId}`);const a=s.details;s.details=t.details,this.log(`Subtitle track ${r} "${s.name}" lang:${s.lang} group:${n} loaded [${i.startSN}-${i.endSN}]`),r===this.trackId&&this.playlistLoaded(r,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const r=t.subtitleGroups||null,n=this.groupIds;let i=this.currentTrack;if(!r||(null==n?void 0:n.length)!==(null==r?void 0:r.length)||null!=r&&r.some((e=>-1===(null==n?void 0:n.indexOf(e))))){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter((e=>!r||-1!==r.indexOf(e.groupId)));if(e.length)this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),e.forEach(((e,t)=>{e.id=t}));else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.subtitlePreference;if(!i&&t){this.selectDefaultTrack=!1;const r=Bge(t,e);if(r>-1)i=e[r];else{const e=Bge(t,this.tracks);i=this.tracks[e]}}let n=this.findTrackId(i);-1===n&&i&&(n=this.findTrackId(null));const s={subtitleTracks:e};this.log(`Updating subtitle tracks, ${e.length} track(s) found in "${null==r?void 0:r.join(",")}" group-id`),this.hls.trigger($fe.SUBTITLE_TRACKS_UPDATED,s),-1!==n&&-1===this.trackId&&this.setSubtitleTrack(n)}}findTrackId(e){const t=this.tracksInGroup,r=this.selectDefaultTrack;for(let n=0;n<t.length;n++){const i=t[n];if((!r||i.default)&&(r||e)&&(!e||$ge(i,e)))return n}if(e){for(let r=0;r<t.length;r++){const n=t[r];if(Hbe(e.attrs,n.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return r}for(let r=0;r<t.length;r++){const n=t[r];if(Hbe(e.attrs,n.attrs,["LANGUAGE"]))return r}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let r=0;r<t.length;r++){if(Gbe(t[r],e))return r}}return-1}onError(e,t){!t.fatal&&t.context&&(t.context.type!==Kfe||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(-1===e.id)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const r=this.currentTrack;if(r&&$ge(e,r))return r;const n=Bge(e,this.tracksInGroup);if(n>-1){const e=this.tracksInGroup[n];return this.setSubtitleTrack(n),e}if(r)return null;{const r=Bge(e,t);if(r>-1)return t[r]}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const r=e.id,n=e.groupId,i=this.getUrlWithDirectives(e.url,t),s=e.details,a=null==s?void 0:s.age;this.log(`Loading subtitle ${r} "${e.name}" lang:${e.lang} group:${n}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${a&&s.live?" age "+a.toFixed(1)+(s.type&&" "+s.type||""):""} ${i}`),this.hls.trigger($fe.SUBTITLE_TRACK_LOADING,{url:i,id:r,groupId:n,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=sxe(e.textTracks),r=this.currentTrack;let n;if(r&&(n=t.filter((e=>Gbe(r,e)))[0],n||this.warn(`Unable to find subtitle TextTrack with name "${r.name}" and language "${r.lang}"`)),[].slice.call(t).forEach((e=>{"disabled"!==e.mode&&e!==n&&(e.mode="disabled")})),n){const e=this.subtitleDisplay?"showing":"hidden";n.mode!==e&&(n.mode=e)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(e<-1||e>=t.length||!Lfe(e))return void this.warn(`Invalid subtitle track id: ${e}`);this.selectDefaultTrack=!1;const r=this.currentTrack,n=t[e]||null;if(this.trackId=e,this.currentTrack=n,this.toggleTrackModes(),!n)return void this.hls.trigger($fe.SUBTITLE_TRACK_SWITCH,{id:e});const i=!!n.details&&!n.details.live;if(e===this.trackId&&n===r&&i)return;this.log(`Switching to subtitle-track ${e}`+(n?` "${n.name}" lang:${n.lang} group:${n.groupId}`:""));const{id:s,groupId:a="",name:o,type:l,url:c}=n;this.hls.trigger($fe.SUBTITLE_TRACK_SWITCH,{id:s,groupId:a,name:o,type:l,url:c});const u=this.switchParams(n.url,null==r?void 0:r.details,n.details);this.loadPlaylist(u)}},timelineController:class{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on($fe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on($fe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.on($fe.MANIFEST_LOADED,this.onManifestLoaded,this),e.on($fe.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on($fe.FRAG_LOADING,this.onFragLoading,this),e.on($fe.FRAG_LOADED,this.onFragLoaded,this),e.on($fe.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on($fe.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on($fe.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on($fe.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on($fe.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off($fe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off($fe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.off($fe.MANIFEST_LOADED,this.onManifestLoaded,this),e.off($fe.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off($fe.FRAG_LOADING,this.onFragLoading,this),e.off($fe.FRAG_LOADED,this.onFragLoaded,this),e.off($fe.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off($fe.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off($fe.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off($fe.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off($fe.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new hSe(this,"textTrack1"),t=new hSe(this,"textTrack2"),r=new hSe(this,"textTrack3"),n=new hSe(this,"textTrack4");this.cea608Parser1=new Fxe(1,e,t),this.cea608Parser2=new Fxe(3,r,n)}addCues(e,t,r,n,i){let s=!1;for(let u=i.length;u--;){const e=i[u],n=(a=e[0],o=e[1],l=t,c=r,Math.min(o,c)-Math.max(a,l));if(n>=0&&(e[0]=Math.min(e[0],t),e[1]=Math.max(e[1],r),s=!0,n/(r-t)>.5))return}var a,o,l,c;if(s||i.push([t,r]),this.config.renderTextTracksNatively){const i=this.captionsTracks[e];this.Cues.newCue(i,t,r,n)}else{const i=this.Cues.newCue(null,t,r,n);this.hls.trigger($fe.CUES_PARSED,{type:"captions",cues:i,track:e})}}onInitPtsFound(e,{frag:t,id:r,initPTS:n,timescale:i,trackId:s}){const{unparsedVttFrags:a}=this;r===Hfe&&(this.initPTS[t.cc]={baseTime:n,timescale:i,trackId:s}),a.length&&(this.unparsedVttFrags=[],a.forEach((e=>{this.initPTS[e.frag.cc]?this.onFragLoaded($fe.FRAG_LOADED,e):this.hls.trigger($fe.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e.frag,error:new Error("Subtitle discontinuity domain does not match main")})})))}getExistingTrack(e,t){const{media:r}=this;if(r)for(let n=0;n<r.textTracks.length;n++){const i=r.textTracks[n];if(pSe(i,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:r,media:n}=this,{label:i,languageCode:s}=t[e],a=this.getExistingTrack(i,s);if(a)r[e]=a,nxe(r[e]),txe(r[e],n);else{const t=this.createTextTrack("captions",i,s);t&&(t[e]=!0,r[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const r={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger($fe.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}createTextTrack(e,t,r){const n=this.media;if(n)return n.addTextTrack(e,t,r)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const r=!!t.transferMedia;if(this.media=null,r)return;const{captionsTracks:n}=this;Object.keys(n).forEach((e=>{nxe(n[e]),delete n[e]})),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let r=0;r<t.length;r++)nxe(t[r])}onSubtitleTracksUpdated(e,t){const r=t.subtitleTracks||[],n=r.some((e=>e.textCodec===tSe));if(this.config.enableWebVTT||n&&this.config.enableIMSC1){if(Kbe(this.tracks,r))return void(this.tracks=r);if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const e=this.media,t=e?sxe(e.textTracks):null;if(this.tracks.forEach(((e,r)=>{let n;if(t){let r=null;for(let n=0;n<t.length;n++)if(t[n]&&pSe(t[n],e)){r=t[n],t[n]=null;break}r&&(n=r)}if(n)nxe(n);else{const t=fSe(e);n=this.createTextTrack(t,e.name,e.lang),n&&(n.mode="disabled")}n&&this.textTracks.push(n)})),null!=t&&t.length){const e=t.filter((e=>null!==e)).map((e=>e.label));e.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${e.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const e=this.tracks.map((e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e})));this.hls.trigger($fe.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((e=>{const t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;const r=`textTrack${t[1]}`,n=this.captionsProperties[r];n&&(n.label=e.name,e.lang&&(n.languageCode=e.lang),n.media=e)}))}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===Hfe){var r,n;const{cea608Parser1:e,cea608Parser2:i,lastSn:s}=this,{cc:a,sn:o}=t.frag,l=null!=(r=null==(n=t.part)?void 0:n.index)?r:-1;e&&i&&(o!==s+1||o===s&&l!==this.lastPartIndex+1||a!==this.lastCc)&&(e.reset(),i.reset()),this.lastCc=a,this.lastSn=o,this.lastPartIndex=l}}onFragLoaded(e,t){const{frag:r,payload:n}=t;if(r.type===Wfe)if(n.byteLength){const e=r.decryptdata,i="stats"in t;if(null==e||!e.encrypted||i){const e=this.tracks[r.level],i=this.vttCCs;i[r.cc]||(i[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),e&&e.textCodec===tSe?this._parseIMSC1(r,n):this._parseVTTs(t)}}else this.hls.trigger($fe.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const r=this.hls;sSe(t,this.initPTS[e.cc],(t=>{this._appendCues(t,e.level),r.trigger($fe.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(t=>{r.logger.log(`Failed to parse IMSC1: ${t}`),r.trigger($fe.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))}_parseVTTs(e){var t;const{frag:r,payload:n}=e,{initPTS:i,unparsedVttFrags:s}=this,a=i.length-1;if(!i[r.cc]&&-1===a)return void s.push(e);const o=this.hls;eSe(null!=(t=r.initSegment)&&t.data?Qpe(r.initSegment.data,new Uint8Array(n)).buffer:n,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,(e=>{this._appendCues(e,r.level),o.trigger($fe.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})}),(t=>{const i="Missing initPTS for VTT MPEGTS"===t.message;i?s.push(e):this._fallbackToIMSC1(r,n),o.logger.log(`Failed to parse VTT cue: ${t}`),i&&a>r.cc||o.trigger($fe.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:t})}))}_fallbackToIMSC1(e,t){const r=this.tracks[e.level];r.textCodec||sSe(t,this.initPTS[e.cc],(()=>{r.textCodec=tSe,this._parseIMSC1(e,t)}),(()=>{r.textCodec="wvtt"}))}_appendCues(e,t){const r=this.hls;if(this.config.renderTextTracksNatively){const r=this.textTracks[t];if(!r||"disabled"===r.mode)return;e.forEach((e=>rxe(r,e)))}else{const n=this.tracks[t];if(!n)return;const i=n.default?"default":"subtitles"+t;r.trigger($fe.CUES_PARSED,{type:"subtitles",cues:e,track:i})}}onFragDecrypted(e,t){const{frag:r}=t;r.type===Wfe&&this.onFragLoaded($fe.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:r,samples:n}=t;if(r.type!==Hfe||"NONE"!==this.closedCaptionsForLevel(r))for(let i=0;i<n.length;i++){const e=n[i].bytes;if(e){this.cea608Parser1||this.initCea608Parsers();const t=this.extractCea608Data(e);this.cea608Parser1.addData(n[i].pts,t[0]),this.cea608Parser2.addData(n[i].pts,t[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:r,endOffsetSubtitles:n,type:i}){const{media:s}=this;if(s&&!(s.currentTime<r)){if(!i||"video"===i){const{captionsTracks:e}=this;Object.keys(e).forEach((n=>ixe(e[n],t,r)))}if(this.config.renderTextTracksNatively&&0===t&&void 0!==n){const{textTracks:e}=this;Object.keys(e).forEach((r=>ixe(e[r],t,n)))}}}extractCea608Data(e){const t=[[],[]],r=31&e[0];let n=2;for(let i=0;i<r;i++){const r=e[n++],i=127&e[n++],s=127&e[n++];if(0===i&&0===s)continue;if(!!(4&r)){const e=3&r;0!==e&&1!==e||(t[e].push(i),t[e].push(s))}}return t}},audioStreamController:class extends hve{constructor(e,t,r){super(e,t,r,"audio-stream-controller",Gfe),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on($fe.LEVEL_LOADED,this.onLevelLoaded,this),e.on($fe.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on($fe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on($fe.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on($fe.BUFFER_RESET,this.onBufferReset,this),e.on($fe.BUFFER_CREATED,this.onBufferCreated,this),e.on($fe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on($fe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on($fe.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on($fe.FRAG_LOADING,this.onFragLoading,this),e.on($fe.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off($fe.LEVEL_LOADED,this.onLevelLoaded,this),e.off($fe.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off($fe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off($fe.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off($fe.BUFFER_RESET,this.onBufferReset,this),e.off($fe.BUFFER_CREATED,this.onBufferCreated,this),e.off($fe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off($fe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off($fe.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off($fe.FRAG_LOADING,this.onFragLoading,this),e.off($fe.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:r,initPTS:n,timescale:i,trackId:s}){if(r===Hfe){const e=t.cc,r=this.fragCurrent;if(this.initPTS[e]={baseTime:n,timescale:i,trackId:s},this.log(`InitPTS for cc: ${e} found from main: ${n/i} (${n}/${i}) trackId: ${s}`),this.mainAnchor=t,this.state===uve){const r=this.waitingData;(!r&&!this.loadingParts||r&&r.frag.cc!==e)&&this.syncWithAnchor(t,null==r?void 0:r.frag)}else!this.hls.hasEnoughToStart&&r&&r.cc!==e?(r.abortRequests(),this.syncWithAnchor(t,r)):this.state===tve&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var r;const n=(null==(r=this.mainFragLoading)?void 0:r.frag)||null;if(t&&(null==n?void 0:n.cc)===t.cc)return;const i=(n||e).cc,s=Qge(this.getLevelDetails(),i,this.getLoadPosition());s&&(this.log(`Syncing with main frag at ${s.start} cc ${s.cc}`),this.startFragRequested=!1,this.nextLoadPosition=s.start,this.resetLoadingState(),this.state===tve&&this.doTickIdle())}startLoad(e,t){if(!this.levels)return this.startPosition=e,void(this.state=eve);const r=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),r>0&&-1===e?(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r,this.state=tve):this.state=sve,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case tve:this.doTickIdle();break;case sve:{const{levels:e,trackId:t}=this,r=null==e?void 0:e[t],n=null==r?void 0:r.details;if(n&&!this.waitForLive(r)){if(this.waitForCdnTuneIn(n))break;this.state=uve}break}case ive:this.checkRetryDate();break;case uve:{const e=this.waitingData;if(e){const{frag:t,part:r,cache:n,complete:i}=e,s=this.mainAnchor;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.state=nve;const e={frag:t,part:r,payload:n.flush().buffer,networkDetails:null};this._handleFragmentLoadProgress(e),i&&super._handleFragmentLoadComplete(e)}else s&&s.cc!==e.frag.cc&&this.syncWithAnchor(s,e.frag)}else this.state=tve}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:r,media:n,trackId:i}=this,s=t.config;if(!this.buffering||!n&&!this.primaryPrefetch&&(this.startFragRequested||!s.startFragPrefetch)||null==r||!r[i])return;const a=r[i],o=a.details;if(!o||this.waitForLive(a)||this.waitForCdnTuneIn(o))return this.state=sve,void(this.startFragRequested=!1);const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,Epe,Gfe));const c=this.getFwdBufferInfo(l,Gfe);if(null===c)return;if(!this.switchingTrack&&this._streamEnded(c,o))return t.trigger($fe.BUFFER_EOS,{type:"audio"}),void(this.state=lve);const u=c.len,d=t.maxBufferLength,h=o.fragments,f=h[0].start,p=this.getLoadPosition(),g=this.flushing?p:c.end;if(this.switchingTrack&&n){const e=p;o.PTSKnown&&e<f&&(c.end>f||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=f+.05)}if(u>=d&&!this.switchingTrack&&g<h[h.length-1].start)return;let m=this.getNextFragment(g,o);if(m&&this.isLoopLoading(m,g)&&(m=this.getNextFragmentLoopLoading(m,o,c,Hfe,d)),!m)return void(this.bufferFlushed=!0);let y=(null==(e=this.mainFragLoading)?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&y&&_pe(m)&&!m.endList&&(!o.live||!this.loadingParts&&g<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(y)===mme&&(this.mainFragLoading=y=null),y&&_pe(y))){if(m.start>y.end){const e=this.fragmentTracker.getFragAtPos(g,Hfe);e&&e.end>y.end&&(y=e,this.mainFragLoading={frag:e,targetBufferTime:null})}if(m.start>y.end)return}this.loadFragment(m,a,g)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map((e=>new Oge(e)))}onAudioTrackSwitching(e,t){const r=!!t.url;this.trackId=t.id;const{fragCurrent:n}=this;n&&(n.abortRequests(),this.removeUnbufferedFrags(n.start)),this.resetLoadingState(),r?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==eve&&(this.setInterval(100),this.state=tve,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const r=this.cachedTrackLoadedData;r&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded($fe.AUDIO_TRACK_LOADED,r))}onAudioTrackLoaded(e,t){var r;const{levels:n}=this,{details:i,id:s,groupId:a,track:o}=t;if(!n)return void this.warn(`Audio tracks reset while loading track ${s} "${o.name}" of "${a}"`);const l=this.mainDetails;if(!l||i.endCC>l.endCC||l.expired)return this.cachedTrackLoadedData=t,void(this.state!==eve&&(this.state=sve));this.cachedTrackLoadedData=null,this.log(`Audio track ${s} "${o.name}" of "${a}" loaded [${i.startSN},${i.endSN}]${i.lastPartSn?`[part-${i.lastPartSn}-${i.lastPartIndex}]`:""},duration:${i.totalduration}`);const c=n[s];let u=0;if(i.live||null!=(r=c.details)&&r.live){if(this.checkLiveUpdate(i),i.deltaUpdateFailed)return;var d;if(c.details)u=this.alignPlaylists(i,c.details,null==(d=this.levelLastLoaded)?void 0:d.details);i.alignedSliding||(Qye(i,l),i.alignedSliding||Yye(i,l),u=i.fragmentStart)}c.details=i,this.levelLastLoaded=c,this.startFragRequested||this.setStartPosition(l,u),this.hls.trigger($fe.AUDIO_TRACK_UPDATED,{details:i,id:s,groupId:t.groupId}),this.state!==sve||this.waitForCdnTuneIn(i)||(this.state=tve),this.tick()}_handleFragmentLoadProgress(e){var t;const r=e.frag,{part:n,payload:i}=e,{config:s,trackId:a,levels:o}=this;if(!o)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);const l=o[a];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const c=l.details;if(!c)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(r.start);const u=s.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let d=this.transmuxer;d||(d=this.transmuxer=new qbe(this.hls,Gfe,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[r.cc],f=null==(t=r.initSegment)?void 0:t.data;if(void 0!==h){const e=!1,t=n?n.index:-1,s=-1!==t,a=new Ome(r.level,r.sn,r.stats.chunkCount,i.byteLength,t,s);d.push(i,f,u,"",r,n,c.totalduration,e,a,h)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${c.startSN} ,${c.endSN}],track ${a}`);const{cache:e}=this.waitingData=this.waitingData||{frag:r,part:n,cache:new pve,complete:!1};e.push(new Uint8Array(i)),this.state!==eve&&(this.state=uve)}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const r=t.tracks.audio;r&&(this.mediaBuffer=r.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===Hfe&&_pe(t.frag)&&(this.mainFragLoading=t,this.state===tve&&this.tick())}onFragBuffered(e,t){const{frag:r,part:n}=t;if(r.type===Gfe)if(this.fragContextChanged(r))this.warn(`Fragment ${r.sn}${n?" p: "+n.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if(_pe(r)){this.fragPrevious=r;const e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger($fe.AUDIO_TRACK_SWITCHED,epe({},e)))}this.fragBufferedComplete(r,n),this.media&&this.tick()}else this.audioOnly||r.type!==Hfe||r.elementaryStreams.video||r.elementaryStreams.audiovideo||(this.audioOnly=!0,this.mainFragLoading=null)}onError(e,t){var r;if(t.fatal)this.state=cve;else switch(t.details){case Bfe.FRAG_GAP:case Bfe.FRAG_PARSING_ERROR:case Bfe.FRAG_DECRYPT_ERROR:case Bfe.FRAG_LOAD_ERROR:case Bfe.FRAG_LOAD_TIMEOUT:case Bfe.KEY_LOAD_ERROR:case Bfe.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Gfe,t);break;case Bfe.AUDIO_TRACK_LOAD_ERROR:case Bfe.AUDIO_TRACK_LOAD_TIMEOUT:case Bfe.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==sve||(null==(r=t.context)?void 0:r.type)!==Vfe||(this.state=tve);break;case Bfe.BUFFER_ADD_CODEC_ERROR:case Bfe.BUFFER_APPEND_ERROR:if("audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case Bfe.BUFFER_FULL_ERROR:if("audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Bfe.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushing(e,{type:t}){t!==Tpe&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==Tpe){this.flushing=!1,this.bufferFlushed=!0,this.state===lve&&(this.state=tve);const e=this.mediaBuffer||this.media;e&&(this.afterBufferFlushed(e,t,Gfe),this.tick())}}_handleTransmuxComplete(e){var t;const r="audio",{hls:n}=this,{remuxResult:i,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a)return void this.resetWhenMissingContext(s);const{frag:o,part:l,level:c}=a,{details:u}=c,{audio:d,text:h,id3:f,initSegment:p}=i;if(!this.fragContextChanged(o)&&u){if(this.state=ave,this.switchingTrack&&d&&this.completeAudioSwitch(this.switchingTrack),null!=p&&p.tracks){const e=o.initSegment||o;if(this.unhandledEncryptionError(p,o))return;this._bufferInitSegment(c,p.tracks,e,s),n.trigger($fe.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:r,tracks:p.tracks})}if(d){const{startPTS:e,endPTS:t,startDTS:r,endDTS:n}=d;l&&(l.elementaryStreams[Epe]={startPTS:e,endPTS:t,startDTS:r,endDTS:n}),o.setElementaryStreamInfo(Epe,e,t,r,n),this.bufferFragmentData(d,o,l,s)}if(null!=f&&null!=(t=f.samples)&&t.length){const e=Jfe({id:r,frag:o,details:u},f);n.trigger($fe.FRAG_PARSING_METADATA,e)}if(h){const e=Jfe({id:r,frag:o,details:u},h);n.trigger($fe.FRAG_PARSING_USERDATA,e)}}else this.fragmentTracker.removeFragment(o)}_bufferInitSegment(e,t,r,n){if(this.state!==ave)return;if(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio)return;const i=t.audio;i.id=Gfe;const s=e.audioCodec;this.log(`Init audio buffer, container:${i.container}, codecs[level/parsed]=[${s}/${i.codec}]`),s&&1===s.split(",").length&&(i.levelCodec=s),this.hls.trigger($fe.BUFFER_CODECS,t);const a=i.initSegment;if(null!=a&&a.byteLength){const e={type:"audio",frag:r,part:null,chunkMeta:n,parent:r.type,data:a};this.hls.trigger($fe.BUFFER_APPENDING,e)}this.tickImmediate()}loadFragment(e,t,r){const n=this.fragmentTracker.getState(e);var i;if(this.switchingTrack||n===fme||n===gme)if(_pe(e))if(null!=(i=t.details)&&i.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=uve;const r=this.mainDetails;r&&r.fragmentStart!==t.details.fragmentStart&&Yye(t.details,r)}else super.loadFragment(e,t,r);else this._loadInitSegment(e,t);else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:r,assocLang:n,characteristics:i,audioCodec:s,channels:a}=this.bufferedTrack;$ge({name:t,lang:r,assocLang:n,characteristics:i,audioCodec:s,channels:a},e,zge)||(Vge(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger($fe.AUDIO_TRACK_SWITCHED,epe({},e))}},audioTrackController:class extends Vbe{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.on($fe.MANIFEST_PARSED,this.onManifestParsed,this),e.on($fe.LEVEL_LOADING,this.onLevelLoading,this),e.on($fe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on($fe.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on($fe.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.off($fe.MANIFEST_PARSED,this.onManifestParsed,this),e.off($fe.LEVEL_LOADING,this.onLevelLoading,this),e.off($fe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off($fe.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off($fe.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:r,groupId:n,details:i}=t,s=this.tracksInGroup[r];if(!s||s.groupId!==n)return void this.warn(`Audio track with id:${r} and group:${n} not found in active group ${null==s?void 0:s.groupId}`);const a=s.details;s.details=t.details,this.log(`Audio track ${r} "${s.name}" lang:${s.lang} group:${n} loaded [${i.startSN}-${i.endSN}]`),r===this.trackId&&this.playlistLoaded(r,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const r=t.audioGroups||null,n=this.groupIds;let i=this.currentTrack;if(!r||(null==n?void 0:n.length)!==(null==r?void 0:r.length)||null!=r&&r.some((e=>-1===(null==n?void 0:n.indexOf(e))))){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter((e=>!r||-1!==r.indexOf(e.groupId)));if(e.length)this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),e.forEach(((e,t)=>{e.id=t}));else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.audioPreference;if(!i&&t){const r=Bge(t,e,zge);if(r>-1)i=e[r];else{const e=Bge(t,this.tracks);i=this.tracks[e]}}let n=this.findTrackId(i);-1===n&&i&&(n=this.findTrackId(null));const a={audioTracks:e};this.log(`Updating audio tracks, ${e.length} track(s) found in group(s): ${null==r?void 0:r.join(",")}`),this.hls.trigger($fe.AUDIO_TRACKS_UPDATED,a);const o=this.trackId;if(-1!==n&&-1===o)this.setAudioTrack(n);else if(e.length&&-1===o){var s;const t=new Error(`No audio track selected for current audio group-ID(s): ${null==(s=this.groupIds)?void 0:s.join(",")} track count: ${e.length}`);this.warn(t.message),this.hls.trigger($fe.ERROR,{type:Ufe.MEDIA_ERROR,details:Bfe.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}}onError(e,t){!t.fatal&&t.context&&(t.context.type!==Vfe||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const n=this.currentTrack;if(n&&$ge(e,n,zge))return n;const i=Bge(e,this.tracksInGroup,zge);if(i>-1){const e=this.tracksInGroup[i];return this.setAudioTrack(i),e}if(n){let n=t.loadLevel;-1===n&&(n=t.firstAutoLevel);const i=function(e,t,r,n,i){const s=t[n],a=t.reduce(((e,t,r)=>{const n=t.uri;return(e[n]||(e[n]=[])).push(r),e}),{})[s.uri];a.length>1&&(n=Math.max.apply(Math,a));const o=s.videoRange,l=s.frameRate,c=s.codecSet.substring(0,4),u=qge(t,n,(t=>{if(t.videoRange!==o||t.frameRate!==l||t.codecSet.substring(0,4)!==c)return!1;const n=t.audioGroups,s=r.filter((e=>!n||-1!==n.indexOf(e.groupId)));return Bge(e,s,i)>-1}));return u>-1?u:qge(t,n,(t=>{const n=t.audioGroups,s=r.filter((e=>!n||-1!==n.indexOf(e.groupId)));return Bge(e,s,i)>-1}))}(e,t.levels,r,n,zge);if(-1===i)return null;t.nextLoadLevel=i}if(e.channels||e.audioCodec){const t=Bge(e,r);if(t>-1)return r[t]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn(`Invalid audio track id: ${e}`);this.selectDefaultTrack=!1;const r=this.currentTrack,n=t[e],i=n.details&&!n.details.live;if(e===this.trackId&&n===r&&i)return;if(this.log(`Switching to audio-track ${e} "${n.name}" lang:${n.lang} group:${n.groupId} channels:${n.channels}`),this.trackId=e,this.currentTrack=n,this.hls.trigger($fe.AUDIO_TRACK_SWITCHING,epe({},n)),i)return;const s=this.switchParams(n.url,null==r?void 0:r.details,n.details);this.loadPlaylist(s)}findTrackId(e){const t=this.tracksInGroup;for(let r=0;r<t.length;r++){const n=t[r];if((!this.selectDefaultTrack||n.default)&&(!e||$ge(e,n,zge)))return r}if(e){const{name:r,lang:n,assocLang:i,characteristics:s,audioCodec:a,channels:o}=e;for(let e=0;e<t.length;e++){if($ge({name:r,lang:n,assocLang:i,characteristics:s,audioCodec:a,channels:o},t[e],zge))return e}for(let l=0;l<t.length;l++){const r=t[l];if(Hbe(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return l}for(let l=0;l<t.length;l++){const r=t[l];if(Hbe(e.attrs,r.attrs,["LANGUAGE"]))return l}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&Vge(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const r=e.id,n=e.groupId,i=this.getUrlWithDirectives(e.url,t),s=e.details,a=null==s?void 0:s.age;this.log(`Loading audio-track ${r} "${e.name}" lang:${e.lang} group:${n}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${a&&s.live?" age "+a.toFixed(1)+(s.type&&" "+s.type||""):""} ${i}`),this.hls.trigger($fe.AUDIO_TRACK_LOADING,{url:i,id:r,groupId:n,deliveryDirectives:t||null,track:e})}},emeController:Ywe,cmcdController:class{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:twe.MANIFEST,su:!this.initialized})}catch(t){this.hls.logger.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=e=>{try{const{frag:t,part:r}=e,n=this.hls.levels[t.level],i=this.getObjectType(t),s={d:1e3*(r||t).duration,ot:i};i!==twe.VIDEO&&i!==twe.AUDIO&&i!=twe.MUXED||(s.br=n.bitrate/1e3,s.tb=this.getTopBandwidth(i)/1e3,s.bl=this.getBufferLength(i));const a=r?this.getNextPart(r):this.getNextFrag(t);null!=a&&a.url&&a.url!==t.url&&(s.nor=a.url),this.apply(e,s)}catch(t){this.hls.logger.warn("Could not generate segment CMCD data.",t)}},this.hls=e;const t=this.config=e.config,{cmcd:r}=t;null!=r&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||e.sessionId,this.cid=r.contentId,this.useHeaders=!0===r.useHeaders,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on($fe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($fe.MEDIA_DETACHED,this.onMediaDetached,this),e.on($fe.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off($fe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($fe.MEDIA_DETACHED,this.onMediaDetached,this),e.off($fe.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var r,n;this.audioBuffer=null==(r=t.tracks.audio)?void 0:r.buffer,this.videoBuffer=null==(n=t.tracks.video)?void 0:n.buffer}createData(){var e;return{v:1,sf:rwe.HLS,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Jfe(t,this.createData());const r=t.ot===twe.INIT||t.ot===twe.VIDEO||t.ot===twe.MUXED;this.starved&&r&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);const{includeKeys:n}=this;n&&(t=Object.keys(t).reduce(((e,r)=>(n.includes(r)&&(e[r]=t[r]),e)),{}));const i={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),Vwe(e.headers,t,i)):e.url=Gwe(e.url,t,i)}getNextFrag(e){var t;const r=null==(t=this.hls.levels[e.level])?void 0:t.details;if(r){const t=e.sn-r.startSN;return r.fragments[t+1]}}getNextPart(e){var t;const{index:r,fragment:n}=e,i=null==(t=this.hls.levels[n.level])||null==(t=t.details)?void 0:t.partList;if(i){const{sn:e}=n;for(let t=i.length-1;t>=0;t--){const n=i[t];if(n.index===r&&n.fragment.sn===e)return i[t+1]}}}getObjectType(e){const{type:t}=e;return"subtitle"===t?twe.TIMED_TEXT:"initSegment"===e.sn?twe.INIT:"audio"===t?twe.AUDIO:"main"===t?this.hls.audioTracks.length?twe.VIDEO:twe.MUXED:void 0}getTopBandwidth(e){let t,r=0;const n=this.hls;if(e===twe.AUDIO)t=n.audioTracks;else{const e=n.maxAutoLevel,r=e>-1?e+1:n.levels.length;t=n.levels.slice(0,r)}return t.forEach((e=>{e.bitrate>r&&(r=e.bitrate)})),r>0?r:NaN}getBufferLength(e){const t=this.media,r=e===twe.AUDIO?this.audioBuffer:this.videoBuffer;if(!r||!t)return NaN;return 1e3*jme.bufferInfo(r,t.currentTime,this.config.maxBufferHole).len}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new r(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,r,n){t(e),this.loader.load(e,r,n)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,r=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new r(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,r,n){t(e),this.loader.load(e,r,n)}}}},contentSteeringController:class extends tpe{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.on($fe.MANIFEST_LOADED,this.onManifestLoaded,this),e.on($fe.MANIFEST_PARSED,this.onManifestParsed,this),e.on($fe.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.off($fe.MANIFEST_LOADED,this.onManifestLoaded,this),e.off($fe.MANIFEST_PARSED,this.onManifestParsed,this),e.off($fe.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce(((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e)),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter((t=>t!==e)))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:r}=t;null!==r&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:r}=t;if((null==r?void 0:r.action)===sme&&r.flags===cme){const e=this.levels;let n=this._pathwayPriority,i=this.pathwayId;if(t.context){const{groupId:r,pathwayId:n,type:s}=t.context;r&&e?i=this.getPathwayForGroupId(r,s,i):n&&(i=n)}i in this.penalizedPathways||(this.penalizedPathways[i]=performance.now()),!n&&e&&(n=this.pathways()),n&&n.length>1&&(this.updatePathwayPriority(n),r.resolved=this.pathwayId!==i),t.details!==Bfe.BUFFER_APPEND_ERROR||t.fatal?r.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${i} levels: ${e?e.length:e} priorities: ${Lge(n)} penalized: ${Lge(this.penalizedPathways)}`):r.resolved=!0}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const r=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),t=this.getLevelsForPathway(r),this.pathwayId=r}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter((t=>e===t.pathwayId))}updatePathwayPriority(e){let t;this._pathwayPriority=e;const r=this.penalizedPathways,n=performance.now();Object.keys(r).forEach((e=>{n-r[e]>3e5&&delete r[e]}));for(let i=0;i<e.length;i++){const n=e[i];if(n in r)continue;if(n===this.pathwayId)return;const s=this.hls.nextLoadLevel,a=this.hls.levels[s];if(t=this.getLevelsForPathway(n),t.length>0){this.log(`Setting Pathway to "${n}"`),this.pathwayId=n,qye(t),this.hls.trigger($fe.LEVELS_UPDATED,{levels:t});const e=this.hls.levels[s];a&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==a.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==a.bitrate&&this.log(`Unstable Pathways change from bitrate ${a.bitrate} to ${e.bitrate}`),this.hls.nextLoadLevel=s);break}}}getPathwayForGroupId(e,t,r){const n=this.getLevelsForPathway(r).concat(this.levels||[]);for(let i=0;i<n.length;i++)if(t===Vfe&&n[i].hasAudioGroup(e)||t===Kfe&&n[i].hasSubtitleGroup(e))return n[i].pathwayId;return r}clonePathways(e){const t=this.levels;if(!t)return;const r={},n={};e.forEach((e=>{const{ID:i,"BASE-ID":s,"URI-REPLACEMENT":a}=e;if(t.some((e=>e.pathwayId===i)))return;const o=this.getLevelsForPathway(s).map((e=>{const t=new qme(e.attrs);t["PATHWAY-ID"]=i;const s=t.AUDIO&&`${t.AUDIO}_clone_${i}`,o=t.SUBTITLES&&`${t.SUBTITLES}_clone_${i}`;s&&(r[t.AUDIO]=s,t.AUDIO=s),o&&(n[t.SUBTITLES]=o,t.SUBTITLES=o);const l=Qwe(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",a),c=new Oge({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:l,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(let r=1;r<e.audioGroups.length;r++)c.addGroupId("audio",`${e.audioGroups[r]}_clone_${i}`);if(e.subtitleGroups)for(let r=1;r<e.subtitleGroups.length;r++)c.addGroupId("text",`${e.subtitleGroups[r]}_clone_${i}`);return c}));t.push(...o),Wwe(this.audioTracks,r,a,i),Wwe(this.subtitleTracks,n,a,i)}))}loadSteeringManifest(e){const t=this.hls.config,r=t.loader;let n;this.loader&&this.loader.destroy(),this.loader=new r(t);try{n=new self.URL(e)}catch(c){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${e}`)}if("data:"!==n.protocol){const e=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);n.searchParams.set("_HLS_pathway",this.pathwayId),n.searchParams.set("_HLS_throughput",""+e)}const i={responseType:"json",url:n.href},s=t.steeringManifestLoadPolicy.default,a=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(e,t,r,i)=>{this.log(`Loaded steering manifest: "${n}"`);const s=e.data;if(1!==(null==s?void 0:s.VERSION))return void this.log(`Steering VERSION ${s.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=s.TTL;const{"RELOAD-URI":a,"PATHWAY-CLONES":o,"PATHWAY-PRIORITY":l}=s;if(a)try{this.uri=new self.URL(a,n).href}catch(c){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${a}`)}this.scheduleRefresh(this.uri||r.url),o&&this.clonePathways(o);const u={steeringManifest:s,url:n.toString()};this.hls.trigger($fe.STEERING_MANIFEST_LOADED,u),l&&this.updatePathwayPriority(l)},onError:(e,t,r,n)=>{if(this.log(`Error loading steering manifest: ${e.code} ${e.text} (${t.url})`),this.stopLoad(),410===e.code)return this.enabled=!1,void this.log(`Steering manifest ${t.url} no longer available`);let i=1e3*this.timeToLoad;if(429!==e.code)this.scheduleRefresh(this.uri||t.url,i);else{const e=this.loader;if("function"==typeof(null==e?void 0:e.getResponseHeader)){const t=e.getResponseHeader("Retry-After");t&&(i=1e3*parseFloat(t))}this.log(`Steering manifest ${t.url} rate limited`)}},onTimeout:(e,t,r)=>{this.log(`Timeout loading steering manifest (${t.url})`),this.scheduleRefresh(this.uri||t.url)}};this.log(`Requesting steering manifest: ${n}`),this.loader.load(i,o,l)}scheduleRefresh(e,t=1e3*this.timeToLoad){this.clearTimeout(),this.reloadTimer=self.setTimeout((()=>{var t;const r=null==(t=this.hls)?void 0:t.media;!r||r.ended?this.scheduleRefresh(e,1e3*this.timeToLoad):this.loadSteeringManifest(e)}),t)}},interstitialsController:class extends tpe{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const e=this.currentTime;if(void 0===e||this.playbackDisabled||!this.schedule)return;const t=e-this.timelinePos;if(Math.abs(t)<1/7056e5)return;const r=t<=-.01;this.timelinePos=e,this.bufferedPos=e;const n=this.playingItem;if(!n)return void this.checkBuffer();if(r){this.schedule.resetErrorsInRange(e,e-t)&&this.updateSchedule(!0)}if(this.checkBuffer(),r&&e<n.start||e>=n.end){var i;const t=this.findItemIndex(n);let s=this.schedule.findItemIndexAtTime(e);if(-1===s&&(s=t+(r?-1:1),this.log(`seeked ${r?"back ":""}to position not covered by schedule ${e} (resolving from ${t} to ${s})`)),!this.isInterstitial(n)&&null!=(i=this.media)&&i.paused&&(this.shouldPlay=!1),!r&&s>t){const e=this.schedule.findJumpRestrictedIndex(t+1,s);if(e>t)return void this.setSchedulePosition(e)}return void this.setSchedulePosition(s)}const s=this.playingAsset;if(!s){if(this.playingLastItem&&this.isInterstitial(n)){const t=n.event.assetList[0];t&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(e,t))}return}const a=s.timelineStart,o=s.duration||0;var l;(r&&e<a||e>=a+o)&&(null!=(l=n.event)&&l.appendInPlace&&(this.clearAssetPlayers(n.event,n),this.flushFrontBuffer(e)),this.setScheduleToAssetAtTime(e,s))},this.onTimeupdate=()=>{const e=this.currentTime;if(void 0===e||this.playbackDisabled)return;if(!(e>this.timelinePos))return;this.timelinePos=e,e>this.bufferedPos&&this.checkBuffer();const t=this.playingItem;if(!t||this.playingLastItem)return;if(e>=t.end){this.timelinePos=t.end;const e=this.findItemIndex(t);this.setSchedulePosition(e+1)}const r=this.playingAsset;if(!r)return;e>=r.timelineStart+(r.duration||0)&&this.setScheduleToAssetAtTime(e,r)},this.onScheduleUpdate=(e,t)=>{const r=this.schedule;if(!r)return;const n=this.playingItem,i=r.events||[],s=r.items||[],a=r.durations,o=e.map((e=>e.identifier)),l=!(!i.length&&!o.length);(l||t)&&this.log(`INTERSTITIALS_UPDATED (${i.length}): ${i}\nSchedule: ${s.map((e=>yxe(e)))} pos: ${this.timelinePos}`),o.length&&this.log(`Removed events ${o}`);let c=null,u=null;n&&(c=this.updateItem(n,this.timelinePos),this.itemsMatch(n,c)?this.playingItem=c:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const d=this.bufferingItem;if(d&&(u=this.updateItem(d,this.bufferedPos),this.itemsMatch(d,u)?this.bufferingItem=u:d.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(d.event,null))),e.forEach((e=>{e.assetList.forEach((e=>{this.clearAssetPlayer(e.identifier,null)}))})),this.playerQueue.forEach((e=>{if(e.interstitial.appendInPlace){const t=e.assetItem.timelineStart,r=e.timelineOffset-t;if(r)try{e.timelineOffset=t}catch(Jce){Math.abs(r)>oxe&&this.warn(`${Jce} ("${e.assetId}" ${e.timelineOffset}->${t})`)}}})),l||t){if(this.hls.trigger($fe.INTERSTITIALS_UPDATED,{events:i.slice(0),schedule:s.slice(0),durations:a,removedIds:o}),this.isInterstitial(n)&&o.includes(n.event.identifier))return this.warn(`Interstitial "${n.event.identifier}" removed while playing`),void this.primaryFallback(n.event);n&&this.trimInPlace(c,n),d&&u!==c&&this.trimInPlace(u,d),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new vxe(e),this.schedule=new mxe(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on($fe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on($fe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($fe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.on($fe.LEVEL_UPDATED,this.onLevelUpdated,this),e.on($fe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on($fe.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on($fe.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on($fe.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on($fe.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on($fe.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on($fe.BUFFER_APPENDED,this.onBufferAppended,this),e.on($fe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on($fe.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on($fe.MEDIA_ENDED,this.onMediaEnded,this),e.on($fe.ERROR,this.onError,this),e.on($fe.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off($fe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off($fe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($fe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.off($fe.LEVEL_UPDATED,this.onLevelUpdated,this),e.off($fe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off($fe.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off($fe.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off($fe.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off($fe.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off($fe.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off($fe.BUFFER_CODECS,this.onBufferCodecs,this),e.off($fe.BUFFER_APPENDED,this.onBufferAppended,this),e.off($fe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off($fe.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off($fe.MEDIA_ENDED,this.onMediaEnded,this),e.off($fe.ERROR,this.onError,this),e.off($fe.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;null==(e=this.getBufferingPlayer())||e.resumeBuffering()}pauseBuffering(){var e;null==(e=this.getBufferingPlayer())||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Jye(e,"play",this.onPlay),Jye(e,"pause",this.onPause),Jye(e,"seeking",this.onSeeking),Jye(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const r=this.media=t.media;Xye(r,"seeking",this.onSeeking),Xye(r,"timeupdate",this.onTimeupdate),Xye(r,"play",this.onPlay),Xye(r,"pause",this.onPause)}onMediaAttached(e,t){const r=this.effectivePlayingItem,n=this.detachedData;if(this.detachedData=null,null===r)this.checkStart();else if(!n){this.clearScheduleState();const e=this.findItemIndex(r);this.setSchedulePosition(e)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const r=!!t.transferMedia,n=this.media;if(this.media=null,!r&&(n&&this.removeMediaListeners(n),this.detachedData)){const e=this.getBufferingPlayer();e&&(this.log(`Removing schedule state for detachedData and ${e}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,e.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,r=t=>t?e.getAssetPlayer(t.identifier):t,n=(t,n,s,a,o)=>{if(t){let l=t[n].start;const c=t.event;if(c){if("playout"===n||c.timelineOccupancy!==lxe.Point){const e=r(s);(null==e?void 0:e.interstitial)===c&&(l+=e.assetItem.startOffset+e[o])}}else{l+=("bufferedPos"===a?i():e[a])-t.start}return l}return 0},i=()=>{const t=e.bufferedPos;return t===Number.MAX_VALUE?s("primary"):Math.max(t,0)},s=t=>{var r,n;return null!=(r=e.primaryDetails)&&r.live?e.primaryDetails.edge:(null==(n=e.schedule)?void 0:n.durations[t])||0},a=(t,i)=>{var s,a;const o=e.effectivePlayingItem;if(null!=o&&null!=(s=o.event)&&s.restrictions.skip||!e.schedule)return;e.log(`seek to ${t} "${i}"`);const l=e.effectivePlayingItem,c=e.schedule.findItemIndexAtTime(t,i),u=null==(a=e.schedule.items)?void 0:a[c],d=e.getBufferingPlayer(),h=null==d?void 0:d.interstitial,f=null==h?void 0:h.appendInPlace,p=l&&e.itemsMatch(l,u);if(l&&(f||p)){const s=r(e.playingAsset),a=(null==s?void 0:s.media)||e.primaryMedia;if(a){const r="primary"===i?a.currentTime:n(l,i,e.playingAsset,"timelinePos","currentTime"),o=t-r,c=(f?r:a.currentTime)+o;if(c>=0&&(!s||f||c<=s.duration))return void(a.currentTime=c)}}if(u){let r=t;if("primary"!==i){const e=t-u[i].start;r=u.start+e}const n=!e.isInterstitial(u);if(e.isInterstitial(l)&&!l.event.appendInPlace||!n&&!u.event.appendInPlace){if(l){const s=e.findItemIndex(l);if(c>s){const t=e.schedule.findJumpRestrictedIndex(s+1,c);if(t>s)return void e.setSchedulePosition(t)}let a=0;if(n)e.timelinePos=r,e.checkBuffer();else{const e=u.event.assetList,r=t-(u[i]||u).start;for(let t=e.length;t--;){const n=e[t];if(n.duration&&r>=n.startOffset&&r<n.startOffset+n.duration){a=t;break}}}e.setSchedulePosition(c,a)}}else{const t=e.media||(f?null==d?void 0:d.media:null);t&&(t.currentTime=r)}}},o=()=>{const r=e.effectivePlayingItem;if(e.isInterstitial(r))return r;const n=t();return e.isInterstitial(n)?n:null},l={get bufferedEnd(){const r=t(),i=e.bufferingItem;var s;return i&&i===r&&(n(i,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-i.playout.start||(null==(s=e.bufferingAsset)?void 0:s.startOffset))||0},get currentTime(){const t=o(),r=e.effectivePlayingItem;return r&&r===t?n(r,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-r.playout.start:0},set currentTime(t){const r=o(),n=e.effectivePlayingItem;n&&n===r&&a(t+n.playout.start,"playout")},get duration(){const e=o();return e?e.playout.end-e.playout.start:0},get assetPlayers(){var t;const r=null==(t=o())?void 0:t.event.assetList;return r?r.map((t=>e.getAssetPlayer(t.identifier))):[]},get playingIndex(){var t;const r=null==(t=o())?void 0:t.event;return r&&e.effectivePlayingAsset?r.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return o()}};return this.manager={get events(){var t;return(null==(t=e.schedule)||null==(t=t.events)?void 0:t.slice(0))||[]},get schedule(){var t;return(null==(t=e.schedule)||null==(t=t.items)?void 0:t.slice(0))||[]},get interstitialPlayer(){return o()?l:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const r=t();return e.findItemIndex(r)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const t=e.effectivePlayingItem;return e.findItemIndex(t)},primary:{get bufferedEnd(){return i()},get currentTime(){const t=e.timelinePos;return t>0?t:0},set currentTime(e){a(e,"primary")},get duration(){return s("primary")},get seekableStart(){var t;return(null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0}},integrated:{get bufferedEnd(){return n(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return n(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(e){a(e,"integrated")},get duration(){return s("integrated")},get seekableStart(){var t;return((t,r)=>{var n;if(0!==t&&"primary"!==r&&null!=(n=e.schedule)&&n.length){var i;const n=e.schedule.findItemIndexAtTime(t),s=null==(i=e.schedule.items)?void 0:i[n];if(s)return t+(s[r].start-s.start)}return t})((null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0,"integrated")}},skip:()=>{const t=e.effectivePlayingItem,r=null==t?void 0:t.event;if(r&&!r.restrictions.skip){const n=e.findItemIndex(t);if(r.appendInPlace){const e=t.playout.start+t.event.duration;a(e+.001,"playout")}else e.advanceAfterAssetEnded(r,n,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,r=null==(e=this.schedule)?void 0:e.items;return!!(this.playbackStarted&&t&&r)&&this.findItemIndex(t)===r.length-1}get playbackStarted(){return null!==this.effectivePlayingItem}get currentTime(){var e,t;if(null===this.mediaSelection)return;const r=this.waitingItem||this.playingItem;if(this.isInterstitial(r)&&!r.event.appendInPlace)return;let n=this.media;!n&&null!=(e=this.bufferingItem)&&null!=(e=e.event)&&e.appendInPlace&&(n=this.primaryMedia);const i=null==(t=n)?void 0:t.currentTime;return void 0!==i&&Lfe(i)?i:void 0}get primaryMedia(){var e;return this.media||(null==(e=this.detachedData)?void 0:e.media)||null}isInterstitial(e){return!(null==e||!e.event)}retreiveMediaSource(e,t){const r=this.getAssetPlayer(e);r&&this.transferMediaFromPlayer(r,t)}transferMediaFromPlayer(e,t){const r=e.interstitial.appendInPlace,n=e.media;if(r&&n===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&n)return void(this.detachedData={media:n});const r=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Lge(r)}`),this.detachedData=r}else t&&n&&(this.shouldPlay||(this.shouldPlay=!n.paused))}transferMediaTo(e,t){var r,n;if(e.media===t)return;let i=null;const s=this.hls,a=e!==s,o=a&&e.interstitial.appendInPlace,l=null==(r=this.detachedData)?void 0:r.mediaSource;let c;if(s.media)o&&(i=s.transferMedia(),this.detachedData=i),c="Primary";else if(l){const e=this.getBufferingPlayer();e?(i=e.transferMedia(),c=`${e}`):c="detached MediaSource"}else c="detached media";if(!i)if(l)i=this.detachedData,this.log(`using detachedData: MediaSource ${Lge(i)}`);else if(!this.detachedData||s.media===t){const e=this.playerQueue;e.length>1&&e.forEach((e=>{if(a&&e.interstitial.appendInPlace!==o){const t=e.interstitial;this.clearInterstitial(e.interstitial,null),t.appendInPlace=!1,t.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${t}`)}})),this.hls.detachMedia(),this.detachedData={media:t}}const u=i&&"mediaSource"in i&&"closed"!==(null==(n=i.mediaSource)?void 0:n.readyState),d=u&&i?i:t;this.log(`${u?"transfering MediaSource":"attaching media"} to ${a?e:"Primary"} from ${c} (media.currentTime: ${t.currentTime})`);const h=this.schedule;if(d===i&&h){const t=a&&e.assetId===h.assetIdAtEnd;d.overrides={duration:h.duration,endOfStream:!a||t,cueRemoval:!a}}e.attachMedia(d)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=null==e?void 0:e.events;if(!t||this.playbackDisabled||!this.media)return;-1===this.bufferedPos&&(this.bufferedPos=0);const r=this.timelinePos,n=this.effectivePlayingItem;if(-1===r){const r=this.hls.startPosition;if(this.log(wxe("checkStart",r)),this.timelinePos=r,t.length&&t[0].cue.pre){const r=e.findEventIndex(t[0].identifier);this.setSchedulePosition(r)}else if(r>=0||!this.primaryLive){const t=this.timelinePos=r>0?r:0,n=e.findItemIndexAtTime(t);this.setSchedulePosition(n)}}else if(n&&!this.playingItem){const t=e.findItemIndex(n);this.setSchedulePosition(t)}}advanceAssetBuffering(e,t){const r=e.event,n=r.findAssetIndex(t),i=fxe(r,n);if(r.isAssetPastPlayoutLimit(i)){if(this.schedule){var s;const t=null==(s=this.schedule.items)?void 0:s[this.findItemIndex(e)+1];t&&this.bufferedToItem(t)}}else this.bufferedToEvent(e,i)}advanceAfterAssetEnded(e,t,r){const n=fxe(e,r);if(e.isAssetPastPlayoutLimit(n)){if(this.schedule){const r=this.schedule.items;if(r){const n=t+1;if(n>=r.length)return void this.setSchedulePosition(-1);const i=e.resumeTime;this.timelinePos<i&&(this.log(wxe("advanceAfterAssetEnded",i)),this.timelinePos=i,e.appendInPlace&&this.advanceInPlace(i),this.checkBuffer(this.bufferedPos<i)),this.setSchedulePosition(n)}}}else{if(e.appendInPlace){const t=e.assetList[n];t&&this.advanceInPlace(t.timelineStart)}this.setSchedulePosition(t,n)}}setScheduleToAssetAtTime(e,t){const r=this.schedule;if(!r)return;const n=t.parentIdentifier,i=r.getEvent(n);if(i){const t=r.findEventIndex(n),s=r.findAssetIndex(i,e);this.advanceAfterAssetEnded(i,t,s-1)}}setSchedulePosition(e,t){var r;const n=null==(r=this.schedule)?void 0:r.items;if(!n||this.playbackDisabled)return;const i=e>=0?n[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${i?yxe(i):i}) pos: ${this.timelinePos}`);const s=this.waitingItem||this.playingItem,a=this.playingLastItem;if(this.isInterstitial(s)){const r=s.event,c=this.playingAsset,u=null==c?void 0:c.identifier,d=u?this.getAssetPlayer(u):null;if(d&&u&&(!this.eventItemsMatch(s,i)||void 0!==t&&u!==r.assetList[t].identifier)){var o;const t=r.findAssetIndex(c);if(this.log(`INTERSTITIAL_ASSET_ENDED ${t+1}/${r.assetList.length} ${pxe(c)}`),this.endedAsset=c,this.playingAsset=null,this.hls.trigger($fe.INTERSTITIAL_ASSET_ENDED,{asset:c,assetListIndex:t,event:r,schedule:n.slice(0),scheduleIndex:e,player:d}),s!==this.playingItem)return void(this.itemsMatch(s,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(r,this.findItemIndex(this.playingItem),t));this.retreiveMediaSource(u,i),!d.media||null!=(o=this.detachedData)&&o.mediaSource||d.detachMedia()}if(!this.eventItemsMatch(s,i)&&(this.endedItem=s,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${r} ${yxe(s)}`),r.hasPlayed=!0,this.hls.trigger($fe.INTERSTITIAL_ENDED,{event:r,schedule:n.slice(0),scheduleIndex:e}),r.cue.once)){var l;this.updateSchedule();const e=null==(l=this.schedule)?void 0:l.items;if(i&&e){const r=this.findItemIndex(i);this.advanceSchedule(r,e,t,s,a)}return}}this.advanceSchedule(e,n,t,s,a)}advanceSchedule(e,t,r,n,i){const s=this.schedule;if(!s)return;const a=t[e]||null,o=this.primaryMedia,l=this.playerQueue;if(l.length&&l.forEach((t=>{const r=t.interstitial,n=s.findEventIndex(r.identifier);(n<e||n>e+1)&&this.clearInterstitial(r,a)})),this.isInterstitial(a)){this.timelinePos=Math.min(Math.max(this.timelinePos,a.start),a.end);const i=a.event;if(void 0===r){const t=fxe(i,(r=s.findAssetIndex(i,this.timelinePos))-1);if(i.isAssetPastPlayoutLimit(t)||i.appendInPlace&&this.timelinePos===a.end)return void this.advanceAfterAssetEnded(i,e,r);r=t}const l=this.waitingItem;this.assetsBuffered(a,o)||this.setBufferingItem(a);let c=this.preloadAssets(i,r);if(this.eventItemsMatch(a,l||n)||(this.waitingItem=a,this.log(`INTERSTITIAL_STARTED ${yxe(a)} ${i.appendInPlace?"append in place":""}`),this.hls.trigger($fe.INTERSTITIAL_STARTED,{event:i,schedule:t.slice(0),scheduleIndex:e})),!i.assetListLoaded)return void this.log(`Waiting for ASSET-LIST to complete loading ${i}`);if(i.assetListLoader&&(i.assetListLoader.destroy(),i.assetListLoader=void 0),!o)return void this.log(`Waiting for attachMedia to start Interstitial ${i}`);this.waitingItem=this.endedItem=null,this.playingItem=a;const u=i.assetList[r];if(!u)return void this.advanceAfterAssetEnded(i,e,r||0);if(c||(c=this.getAssetPlayer(u.identifier)),null===c||c.destroyed){const e=i.assetList.length;this.warn(`asset ${r+1}/${e} player destroyed ${i}`),c=this.createAssetPlayer(i,u,r),c.loadSource()}if(!this.eventItemsMatch(a,this.bufferingItem)&&i.appendInPlace&&this.isAssetBuffered(u))return;this.startAssetPlayer(c,r,t,e,o),this.shouldPlay&&bxe(c.media)}else a?(this.resumePrimary(a,e,n),this.shouldPlay&&bxe(this.hls.media)):i&&this.isInterstitial(n)&&(this.endedItem=null,this.playingItem=n,n.event.appendInPlace||this.attachPrimary(s.durations.primary,null))}get playbackDisabled(){return!1===this.hls.config.enableInterstitialPlayback}get primaryDetails(){var e;return null==(e=this.mediaSelection)?void 0:e.main.details}get primaryLive(){var e;return!(null==(e=this.primaryDetails)||!e.live)}resumePrimary(e,t,r){var n,i;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${yxe(e)}`),null==(n=this.detachedData)||!n.mediaSource){let r=this.timelinePos;(r<e.start||r>=e.end)&&(r=this.getPrimaryResumption(e,t),this.log(wxe("resumePrimary",r)),this.timelinePos=r),this.attachPrimary(r,e)}if(!r)return;const s=null==(i=this.schedule)?void 0:i.items;s&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${yxe(e)}`),this.hls.trigger($fe.INTERSTITIALS_PRIMARY_RESUMED,{schedule:s.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const r=e.start;if(this.primaryLive){const e=this.primaryDetails;if(0===t)return this.hls.startPosition;if(e&&(r<e.fragmentStart||r>e.edge))return this.hls.liveSyncPosition||-1}return r}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);if(null!=t&&t.hls)return t.hls.bufferedToEnd;return jme.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,r){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const n=this.primaryMedia;if(!n)return;const i=this.hls;i.media?this.checkBuffer():(this.transferMediaTo(i,n),r&&this.startLoadingPrimaryAt(e,r)),r||(this.log(wxe("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,r))}startLoadingPrimaryAt(e,t){var r;const n=this.hls;!n.loadingEnabled||!n.media||Math.abs(((null==(r=n.mainForwardBufferInfo)?void 0:r.start)||n.media.currentTime)-e)>.5?n.startLoad(e,t):n.bufferingEnabled||n.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),null==(e=this.schedule)||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off($fe.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on($fe.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(-1===t.level||!this.schedule)return;const r=this.hls.levels[t.level];if(!r.details)return;const n=epe(epe({},this.mediaSelection||this.altSelection),{},{main:r});this.mediaSelection=n,this.schedule.parseInterstitialDateRanges(n,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const r=this.hls.audioTracks[t.id],n=this.mediaSelection;if(!n)return void(this.altSelection=epe(epe({},this.altSelection),{},{audio:r}));const i=epe(epe({},n),{},{audio:r});this.mediaSelection=i}onSubtitleTrackUpdated(e,t){const r=this.hls.subtitleTracks[t.id],n=this.mediaSelection;if(!n)return void(this.altSelection=epe(epe({},this.altSelection),{},{subtitles:r}));const i=epe(epe({},n),{},{subtitles:r});this.mediaSelection=i}onAudioTrackSwitching(e,t){const r=Uge(t);this.playerQueue.forEach((({hls:e})=>e&&(e.setAudioOption(t)||e.setAudioOption(r))))}onSubtitleTrackSwitch(e,t){const r=Uge(t);this.playerQueue.forEach((({hls:e})=>e&&(e.setSubtitleOption(t)||-1!==t.id&&e.setSubtitleOption(r))))}onBufferCodecs(e,t){const r=t.tracks;r&&(this.requiredTracks=r)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const r=this.playingItem;if(r&&!this.itemsMatch(r,this.bufferingItem)&&!this.isInterstitial(r)){const e=this.timelinePos;this.bufferedPos=e,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let e=0;e<t.length;e++){const n=t[e];if(n.cue.post){var r;const e=this.schedule.findEventIndex(n.identifier),t=null==(r=this.schedule.items)?void 0:r[e];this.isInterstitial(t)&&this.eventItemsMatch(t,this.bufferingItem)&&this.bufferedToItem(t,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const e=this.findItemIndex(t);this.setSchedulePosition(e+1)}else this.shouldPlay=!1}updateItem(e,t){var r;const n=null==(r=this.schedule)?void 0:r.items;if(e&&n){return n[this.findItemIndex(e,t)]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach(((t,r)=>{e.event.isAssetPastPlayoutLimit(r)&&this.clearAssetPlayer(t.identifier,null)}));const r=e.end+.25,n=jme.bufferInfo(this.primaryMedia,r,0);if(n.end>r||(n.nextStart||0)>r){this.log(`trim buffered interstitial ${yxe(e)} (was ${yxe(t)})`);const n=!0;this.attachPrimary(r,null,n),this.flushFrontBuffer(r)}}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var r;return!!t&&(e===t||e.event.identifier===(null==(r=t.event)?void 0:r.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const r=this.mediaSelection;r&&(null==(t=this.schedule)||t.updateSchedule(r,[],e))}checkBuffer(e){var t;const r=null==(t=this.schedule)?void 0:t.items;if(!r)return;const n=jme.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=n.len<1),this.updateBufferedPos(n.end,r,e)}updateBufferedPos(e,t,r){const n=this.schedule,i=this.bufferingItem;if(this.bufferedPos>e||!n)return;if(1===t.length&&this.itemsMatch(t[0],i))return void(this.bufferedPos=e);const s=this.playingItem,a=this.findItemIndex(s);let o=n.findItemIndexAtTime(e);if(this.bufferedPos<e){var l;const r=this.findItemIndex(i),n=Math.min(r+1,t.length-1),s=t[n];if((-1===o&&i&&e>=i.end||null!=(l=s.event)&&l.appendInPlace&&e+.01>=s.start)&&(o=n),this.isInterstitial(i)){const e=i.event;if(n-a>1&&!1===e.appendInPlace)return;if(0===e.assetList.length&&e.assetListLoader)return}if(this.bufferedPos=e,o>r&&o>a)this.bufferedToItem(s);else{const t=this.primaryDetails;this.primaryLive&&t&&e>t.edge-t.targetduration&&s.start<t.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(s)&&this.preloadAssets(s.event,0)}}else r&&s&&!this.itemsMatch(s,i)&&(o===a?this.bufferedToItem(s):o===a+1&&this.bufferedToItem(t[o]))}assetsBuffered(e,t){return 0!==e.event.assetList.length&&!e.event.assetList.some((e=>{const r=this.getAssetPlayer(e.identifier);return!(null!=r&&r.bufferedInPlaceToEnd(t))}))}setBufferingItem(e){const t=this.bufferingItem,r=this.schedule;if(!this.itemsMatch(e,t)&&r){const{items:n,events:i}=r;if(!n||!i)return t;const s=this.isInterstitial(e),a=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const o=a?a.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${yxe(e)}`+(t?` (${o.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(s){const t=r.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach(((e,r)=>{const n=this.getAssetPlayer(e.identifier);n&&(r===t&&n.loadSource(),n.resumeBuffering())}))}else this.hls.resumeBuffering(),this.playerQueue.forEach((e=>e.pauseBuffering()));this.hls.trigger($fe.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:i.slice(0),schedule:n.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const r=this.setBufferingItem(e);if(!this.playbackDisabled)if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(null!==r){this.bufferingAsset=null;const t=this.detachedData;if(t)if(t.mediaSource){const t=!0;this.attachPrimary(e.start,e,t)}else this.preloadPrimary(e);else this.preloadPrimary(e)}}preloadPrimary(e){const t=this.findItemIndex(e),r=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(r)}bufferedToEvent(e,t){const r=e.event,n=0===r.assetList.length&&!r.assetListLoader,i=r.cue.once;if(n||!i){const e=this.preloadAssets(r,t);if(null!=e&&e.interstitial.appendInPlace){const t=this.primaryMedia;t&&this.bufferAssetPlayer(e,t)}}}preloadAssets(e,t){const r=e.assetUrl,n=e.assetList.length,i=0===n&&!e.assetListLoader,s=e.cue.once;if(i){const i=e.timelineStart;if(e.appendInPlace){var a;const t=this.playingItem;this.isInterstitial(t)||(null==t||null==(a=t.nextEvent)?void 0:a.identifier)!==e.identifier||this.flushFrontBuffer(i+.25)}let s,o=0;if(!this.playingItem&&this.primaryLive&&(o=this.hls.startPosition,-1===o&&(o=this.hls.liveSyncPosition||0)),o&&!e.cue.pre&&!e.cue.post){const e=o-i;e>0&&(s=Math.round(1e3*e)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${r?1:n} ${e}${s?` live-start: ${o} start-offset: ${s}`:""}`),r)return this.createAsset(e,0,0,i,e.duration,r);const l=this.assetListLoader.loadAssetList(e,s);l&&(e.assetListLoader=l)}else if(!s&&n){for(let i=t;i<n;i++){const t=e.assetList[i],r=this.getAssetPlayerQueueIndex(t.identifier);-1!==r&&!this.playerQueue[r].destroyed||t.error||this.createAssetPlayer(e,t,i)}const r=e.assetList[t];if(r){const e=this.getAssetPlayer(r.identifier);return e&&e.loadSource(),e}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`);Object.keys(t).forEach((t=>{this.hls.trigger($fe.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:t})}))}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let r=0;r<t.length;r++)if(e===t[r].assetId)return r;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t)for(let r=0;r<e.length;r++)if(e[r].media===t)return e[r];return null}createAsset(e,t,r,n,i,s){const a={parentIdentifier:e.identifier,identifier:cxe(e,s,t),duration:i,startOffset:r,timelineStart:n,uri:s};return this.createAssetPlayer(e,a,t)}createAssetPlayer(e,t,r){const n=this.hls,i=n.userConfig;let s=i.videoPreference;const a=n.loadLevelObj||n.levels[n.currentLevel];(s||a)&&(s=Jfe({},s),a.videoCodec&&(s.videoCodec=a.videoCodec),a.videoRange&&(s.allowedVideoRanges=[a.videoRange]));const o=n.audioTracks[n.audioTrack],l=n.subtitleTracks[n.subtitleTrack];let c=0;if(this.primaryLive||e.appendInPlace){const e=this.timelinePos-t.timelineStart;if(e>1){const r=t.duration;r&&e<r&&(c=e)}}const u=t.identifier,d=epe(epe({},i),{},{maxMaxBufferLength:Math.min(180,n.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:n.sessionId,assetPlayerId:u,abrEwmaDefaultEstimate:n.bandwidthEstimate,interstitialsController:void 0,startPosition:c,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:s,audioPreference:o||i.audioPreference,subtitlePreference:l||i.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(d.timelineOffset=t.timelineStart));const h=d.cmcd;null!=h&&h.sessionId&&h.contentId&&(d.cmcd=Jfe({},h,{contentId:axe(t.uri)})),this.getAssetPlayer(u)&&this.warn(`Duplicate date range identifier ${e} and asset ${u}`);const f=new gxe(this.HlsPlayerClass,d,e,t);this.playerQueue.push(f),e.assetList[r]=t;let p=!0;const g=n=>{if(n.live){var i;const t=new Error(`Interstitials MUST be VOD assets ${e}`),n={fatal:!0,type:Ufe.OTHER_ERROR,details:Bfe.INTERSTITIAL_ASSET_ITEM_ERROR,error:t},s=(null==(i=this.schedule)?void 0:i.findEventIndex(e.identifier))||-1;return void this.handleAssetItemError(n,e,s,r,t.message)}const s=n.edge-n.fragmentStart,a=t.duration;(p||null===a||s>a)&&(p=!1,this.log(`Interstitial asset "${u}" duration change ${a} > ${s}`),t.duration=s,this.updateSchedule())};f.on($fe.LEVEL_UPDATED,((e,{details:t})=>g(t))),f.on($fe.LEVEL_PTS_UPDATED,((e,{details:t})=>g(t))),f.on($fe.EVENT_CUE_ENTER,(()=>this.onInterstitialCueEnter()));const m=(e,t)=>{const r=this.getAssetPlayer(u);if(r&&t.tracks){r.off($fe.BUFFER_CODECS,m),r.tracks=t.tracks;const e=this.primaryMedia;this.bufferingAsset===r.assetItem&&e&&!r.media&&this.bufferAssetPlayer(r,e)}};f.on($fe.BUFFER_CODECS,m);f.on($fe.BUFFERED_TO_END,(()=>{var r;const n=this.getAssetPlayer(u);if(this.log(`buffered to end of asset ${n}`),!n||!this.schedule)return;const i=this.schedule.findEventIndex(e.identifier),s=null==(r=this.schedule.items)?void 0:r[i];this.isInterstitial(s)&&this.advanceAssetBuffering(s,t)}));const y=t=>()=>{if(!this.getAssetPlayer(u)||!this.schedule)return;this.shouldPlay=!0;const r=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,r,t)};return f.once($fe.MEDIA_ENDED,y(r)),f.once($fe.PLAYOUT_LIMIT_REACHED,y(1/0)),f.on($fe.ERROR,((t,n)=>{if(!this.schedule)return;const i=this.getAssetPlayer(u);if(n.details===Bfe.BUFFER_STALLED_ERROR)return null!=i&&i.appendInPlace?void this.handleInPlaceStall(e):(this.onTimeupdate(),void this.checkBuffer(!0));this.handleAssetItemError(n,e,this.schedule.findEventIndex(e.identifier),r,`Asset player error ${n.error} ${e}`)})),f.on($fe.DESTROYING,(()=>{if(!this.getAssetPlayer(u)||!this.schedule)return;const t=new Error(`Asset player destroyed unexpectedly ${u}`),n={fatal:!0,type:Ufe.OTHER_ERROR,details:Bfe.INTERSTITIAL_ASSET_ITEM_ERROR,error:t};this.handleAssetItemError(n,e,this.schedule.findEventIndex(e.identifier),r,t.message)})),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${pxe(t)}`),this.hls.trigger($fe.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:r,event:e,player:f}),f}clearInterstitial(e,t){this.clearAssetPlayers(e,t),e.reset()}clearAssetPlayers(e,t){e.assetList.forEach((e=>{this.clearAssetPlayer(e.identifier,t)}))}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(-1!==t){this.log(`reset asset player "${e}" after error`);const r=this.playerQueue[t];this.transferMediaFromPlayer(r,null),r.resetDetails()}}clearAssetPlayer(e,t){const r=this.getAssetPlayerQueueIndex(e);if(-1!==r){const e=this.playerQueue[r];this.log(`clear ${e} toSegment: ${t?yxe(t):t}`),this.transferMediaFromPlayer(e,t),this.playerQueue.splice(r,1),e.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,r,n,i){const{interstitial:s,assetItem:a,assetId:o}=e,l=s.assetList.length,c=this.playingAsset;this.endedAsset=null,this.playingAsset=a,c&&c.identifier===o||(c&&(this.clearAssetPlayer(c.identifier,r[n]),delete c.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${l} ${pxe(a)}`),this.hls.trigger($fe.INTERSTITIAL_ASSET_STARTED,{asset:a,assetListIndex:t,event:s,schedule:r.slice(0),scheduleIndex:n,player:e})),this.bufferAssetPlayer(e,i)}bufferAssetPlayer(e,t){var r,n;if(!this.schedule)return;const{interstitial:i,assetItem:s}=e,a=this.schedule.findEventIndex(i.identifier),o=null==(r=this.schedule.items)?void 0:r[a];if(!o)return;e.loadSource(),this.setBufferingItem(o),this.bufferingAsset=s;const l=this.getBufferingPlayer();if(l===e)return;const c=i.appendInPlace;if(c&&!1===(null==l?void 0:l.interstitial.appendInPlace))return;const u=(null==l?void 0:l.tracks)||(null==(n=this.detachedData)?void 0:n.tracks)||this.requiredTracks;if(c&&s!==this.playingAsset){if(!e.tracks)return void this.log(`Waiting for track info before buffering ${e}`);if(u&&!cpe(u,e.tracks)){const t=new Error(`Asset ${pxe(s)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(u)}')`),r={fatal:!0,type:Ufe.OTHER_ERROR,details:Bfe.INTERSTITIAL_ASSET_ITEM_ERROR,error:t},n=i.findAssetIndex(s);return void this.handleAssetItemError(r,i,a,n,t.message)}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,r=this.primaryMedia;if(!t||!r)return;const n=r.currentTime,i=t.findAssetIndex(e,n),s=e.assetList[i];if(s){const a=this.getAssetPlayer(s.identifier);if(a){const o=a.currentTime||n-s.timelineStart,l=a.duration-o;if(this.warn(`Stalled at ${o} of ${o+l} in ${a} ${e} (media.currentTime: ${n})`),o&&(l/r.playbackRate<.5||a.bufferedInPlaceToEnd(r))&&a.hls){const r=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,r,i)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,r,n,i){if(e.details===Bfe.BUFFER_STALLED_ERROR)return;const s=t.assetList[n]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${s?pxe(s):s} ${e.error}`),!this.schedule)return;const a=(null==s?void 0:s.identifier)||"",o=this.getAssetPlayerQueueIndex(a),l=this.playerQueue[o]||null,c=this.schedule.items,u=Jfe({},e,{fatal:!1,errorAction:hme(!0),asset:s,assetListIndex:n,event:t,schedule:c,scheduleIndex:r,player:l});if(this.hls.trigger($fe.INTERSTITIAL_ASSET_ERROR,u),!e.fatal)return;const d=this.playingAsset,h=this.bufferingAsset,f=new Error(i);if(s&&(this.clearAssetPlayer(a,null),s.error=f),t.assetList.some((e=>!e.error)))for(let p=n;p<t.assetList.length;p++)this.resetAssetPlayer(t.assetList[p].identifier);else t.error=f;this.updateSchedule(!0),t.error?this.primaryFallback(t):d&&d.identifier===a?this.advanceAfterAssetEnded(t,r,n):h&&h.identifier===a&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,h)}primaryFallback(e){const t=e.timelineStart,r=this.effectivePlayingItem;let n=this.timelinePos;if(r){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${n} playing: ${yxe(r)} error: ${e.error}`),-1===n&&(n=this.hls.startPosition);const i=this.updateItem(r,n);this.itemsMatch(r,i)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t))}else if(-1===n)return void this.checkStart();if(!this.schedule)return;const i=this.schedule.findItemIndexAtTime(n);this.setSchedulePosition(i)}onAssetListLoaded(e,t){var r,n;const i=t.event,s=i.identifier,a=t.assetListResponse.ASSETS;if(null==(r=this.schedule)||!r.hasEvent(s))return;const o=i.timelineStart,l=i.duration;let c=0;a.forEach(((e,t)=>{const r=parseFloat(e.DURATION);this.createAsset(i,t,c,o+c,r,e.URI),c+=r})),i.duration=c,this.log(`Loaded asset-list with duration: ${c} (was: ${l}) ${i}`);const u=this.waitingItem,d=(null==u?void 0:u.event.identifier)===s;this.updateSchedule();const h=null==(n=this.bufferingItem)?void 0:n.event;if(d){var f;const e=this.schedule.findEventIndex(s),t=null==(f=this.schedule.items)?void 0:f[e];if(t){if(!this.playingItem&&this.timelinePos>t.end){if(this.schedule.findItemIndexAtTime(this.timelinePos)!==e)return i.error=new Error(`Interstitial ${a.length?"no longer within playback range":"asset-list is empty"} ${this.timelinePos} ${i}`),this.log(i.error.message),this.updateSchedule(!0),void this.primaryFallback(i)}this.setBufferingItem(t)}this.setSchedulePosition(e)}else if((null==h?void 0:h.identifier)===s){const e=i.assetList[0];if(e){const t=this.getAssetPlayer(e.identifier);if(h.appendInPlace){const e=this.primaryMedia;t&&e&&this.bufferAssetPlayer(t,e)}else t&&t.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case Bfe.ASSET_LIST_PARSING_ERROR:case Bfe.ASSET_LIST_LOAD_ERROR:case Bfe.ASSET_LIST_LOAD_TIMEOUT:{const e=t.interstitial;e&&(this.updateSchedule(!0),this.primaryFallback(e));break}case Bfe.BUFFER_STALLED_ERROR:{const e=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(e)&&e.event.appendInPlace)return void this.handleInPlaceStall(e.event);this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}});function TSe(e){return e&&"object"==typeof e?Array.isArray(e)?e.map(TSe):Object.keys(e).reduce(((t,r)=>(t[r]=TSe(e[r]),t)),{}):e}function kSe(e,t){const r=e.loader;if(r!==vSe&&r!==SSe)t.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1;else{(function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(Jce){}return!1})()&&(e.loader=vSe,e.progressive=!0,e.enableSoftwareAES=!0,t.log("[config]: Progressive streaming enabled, using FetchLoader"))}}class ASe extends Ime{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var e;null!=(e=this.media)&&e.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{var e;this.hls&&(this.ended=(null==(e=this.media)?void 0:e.currentTime)||1,this.hls.trigger($fe.MEDIA_ENDED,{stalled:!1}))},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on($fe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($fe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($fe.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off($fe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($fe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($fe.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(100),this.mediaSource=t.mediaSource;const r=this.media=t.media;Xye(r,"playing",this.onMediaPlaying),Xye(r,"waiting",this.onMediaWaiting),Xye(r,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:r}=this;r&&(Jye(r,"playing",this.onMediaPlaying),Jye(r,"waiting",this.onMediaWaiting),Jye(r,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(null==(e=this.media)||!e.readyState||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var r,n;const i=null==(r=this.hls)?void 0:r.config;if(!i)return;const s=this.media;if(!s)return;const{seeking:a}=s,o=this.seeking&&!a,l=!this.seeking&&a,c=s.paused&&!a||s.ended||0===s.playbackRate;if(this.seeking=a,e!==t)return t&&(this.ended=0),this.moved=!0,a||(this.nudgeRetry=0,i.nudgeOnVideoHole&&!c&&e>t&&this.nudgeOnVideoHole(e,t)),void(0===this.waiting&&this.stallResolved(e));if(l||o)return void(o&&this.stallResolved(e));if(c)return this.nudgeRetry=0,this.stallResolved(e),void(!this.ended&&s.ended&&this.hls&&(this.ended=e||1,this.hls.trigger($fe.MEDIA_ENDED,{stalled:!1})));if(!jme.getBuffered(s).length)return void(this.nudgeRetry=0);const u=jme.bufferInfo(s,e,0),d=u.nextStart||0,h=this.fragmentTracker;if(a&&h&&this.hls){const t=_Se(this.hls.inFlightFragments,e),r=u.len>2,n=!d||t||d-e>2&&!h.getPartialFragment(e);if(r||n)return;this.moved=!1}const f=null==(n=this.hls)?void 0:n.latestLevelDetails;if(!this.moved&&null!==this.stalled&&h){if(!(u.len>0)&&!d)return;const t=Math.max(d,u.start||0)-e,r=!(null==f||!f.live)?2*f.targetduration:2,n=PSe(e,h);if(t>0&&(t<=r||n))return void(s.paused||this._trySkipBufferHole(n))}const p=i.detectStallWithCurrentTimeMs,g=self.performance.now(),m=this.waiting;let y=this.stalled;if(null===y){if(!(m>0&&g-m<p))return void(this.stalled=g);y=this.stalled=m}const v=g-y;if(!a&&(v>=p||m)&&this.hls){var b;if("ended"===(null==(b=this.mediaSource)?void 0:b.readyState)&&(null==f||!f.live)&&Math.abs(e-((null==f?void 0:f.edge)||0))<1){if(this.ended)return;return this.ended=e||1,void this.hls.trigger($fe.MEDIA_ENDED,{stalled:!0})}if(this._reportStall(u),!this.media||!this.hls)return}const w=jme.bufferInfo(s,e,i.maxBufferHole);this._tryFixBufferStall(w,v,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const r=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(r)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger($fe.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var r;const n=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&null!=(r=this.buffered.audio)&&r.length&&n&&n.length>1&&e>n.end(0)){const r=jme.bufferedInfo(jme.timeRangesToArray(this.buffered.audio),e,0);if(r.len>1&&t>=r.start){const r=jme.timeRangesToArray(n),i=jme.bufferedInfo(r,t,0).bufferedIndex;if(i>-1&&i<r.length-1){const t=jme.bufferedInfo(r,e,0).bufferedIndex,n=r[i].end,s=r[i+1].start;if((-1===t||t>i)&&s-n<1&&e-n<2){const r=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${n} -> ${s} buffered index: ${t}`);this.warn(r.message),this.media.currentTime+=1e-6;let i=PSe(e,this.fragmentTracker);i&&"fragment"in i?i=i.fragment:i||(i=void 0);const a=jme.bufferInfo(this.media,e,0);this.hls.trigger($fe.ERROR,{type:Ufe.MEDIA_ERROR,details:Bfe.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:r,reason:r.message,frag:i,buffer:a.len,bufferInfo:a})}}}}}_tryFixBufferStall(e,t,r){var n,i;const{fragmentTracker:s,media:a}=this,o=null==(n=this.hls)?void 0:n.config;if(!a||!s||!o)return;const l=null==(i=this.hls)?void 0:i.latestLevelDetails,c=PSe(r,s);if(c||null!=l&&l.live&&r<l.fragmentStart){if(this._trySkipBufferHole(c)||!this.media)return}const u=e.buffered,d=this.adjacentTraversal(e,r);(u&&u.length>1&&e.len>o.maxBufferHole||e.nextStart&&(e.nextStart-r<o.maxBufferHole||d))&&(t>1e3*o.highBufferWatchdogPeriod||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const r=this.fragmentTracker,n=e.nextStart;if(r&&n){const e=r.getFragAtPos(t,Hfe),i=r.getFragAtPos(n,Hfe);if(e&&i)return i.sn-e.sn<2}return!1}_reportStall(e){const{hls:t,media:r,stallReported:n,stalled:i}=this;if(!n&&null!==i&&r&&t){this.stallReported=!0;const n=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${Lge(e)})`);this.warn(n.message),t.trigger($fe.ERROR,{type:Ufe.MEDIA_ERROR,details:Bfe.BUFFER_STALLED_ERROR,fatal:!1,error:n,buffer:e.len,bufferInfo:e,stalled:{start:i}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:r,media:n}=this,i=null==(t=this.hls)?void 0:t.config;if(!n||!r||!i)return 0;const s=n.currentTime,a=jme.bufferInfo(n,s,0),o=s<a.start?a.start:a.nextStart;if(o&&this.hls){const t=a.len<=i.maxBufferHole,c=a.len>0&&a.len<1&&n.readyState<3,u=o-s;if(u>0&&(t||c)){if(u>i.maxBufferHole){let t=!1;if(0===s){const e=r.getAppendedFrag(0,Hfe);e&&o<e.end&&(t=!0)}if(!t&&e){var l;if(null==(l=this.hls.loadLevelObj)||!l.details)return 0;if(_Se(this.hls.inFlightFragments,o))return 0;let t=!1,n=e.end;for(;n<o;){const e=PSe(n,r);if(!e){t=!0;break}n+=e.duration}if(t)return 0}}const t=Math.max(o+.05,s+.1);if(this.warn(`skipping hole, adjusting currentTime from ${s} to ${t}`),this.moved=!0,n.currentTime=t,null==e||!e.gap){const r=new Error(`fragment loaded with buffer holes, seeking from ${s} to ${t}`),n={type:Ufe.MEDIA_ERROR,details:Bfe.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:r,reason:r.message,buffer:a.len,bufferInfo:a};e&&("fragment"in e?n.part=e:n.frag=e),this.hls.trigger($fe.ERROR,n)}return t}}return 0}_tryNudgeBuffer(e){const{hls:t,media:r,nudgeRetry:n}=this,i=null==t?void 0:t.config;if(!r||!i)return 0;const s=r.currentTime;if(this.nudgeRetry++,n<i.nudgeMaxRetry){const a=s+(n+1)*i.nudgeOffset,o=new Error(`Nudging 'currentTime' from ${s} to ${a}`);this.warn(o.message),r.currentTime=a,t.trigger($fe.ERROR,{type:Ufe.MEDIA_ERROR,details:Bfe.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1,buffer:e.len,bufferInfo:e})}else{const r=new Error(`Playhead still not moving while enough data buffered @${s} after ${i.nudgeMaxRetry} nudges`);this.error(r.message),t.trigger($fe.ERROR,{type:Ufe.MEDIA_ERROR,details:Bfe.BUFFER_STALLED_ERROR,error:r,fatal:!0,buffer:e.len,bufferInfo:e})}}}function _Se(e,t){const r=CSe(e.main);if(r&&r.start<=t)return r;const n=CSe(e.audio);return n&&n.start<=t?n:null}function CSe(e){if(!e)return null;switch(e.state){case tve:case eve:case lve:case cve:return null}return e.frag}function PSe(e,t){return t.getAppendedFrag(e,Hfe)||t.getPartialFragment(e)}function DSe(){if("undefined"!=typeof self)return self.VTTCue||self.TextTrackCue}function RSe(e,t,r,n,i){let s=new e(t,r,"");try{s.value=n,i&&(s.type=i)}catch(Jce){s=new e(t,r,Lge(i?epe({type:i},n):n))}return s}const ISe=(()=>{const e=DSe();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(Jce){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class OSe{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger($fe.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on($fe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on($fe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($fe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.on($fe.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on($fe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on($fe.LEVEL_UPDATED,this.onLevelUpdated,this),e.on($fe.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off($fe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off($fe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($fe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.off($fe.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off($fe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off($fe.LEVEL_UPDATED,this.onLevelUpdated,this),e.off($fe.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var r;this.media=t.media,!1===(null==(r=t.overrides)?void 0:r.cueRemoval)&&(this.removeCues=!1)}onMediaAttached(){var e;const t=null==(e=this.hls)?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null;!!t.transferMedia||(this.id3Track&&(this.removeCues&&nxe(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const r=e[t];if("metadata"===r.kind&&"id3"===r.label)return txe(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:r,enableID3MetadataCues:n}=this.hls.config;if(!r&&!n)return;const{samples:i}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const s=DSe();if(s)for(let a=0;a<i.length;a++){const e=i[a].type;if(e===zve.emsg&&!r||!n)continue;const t=Fve(i[a].data),o=i[a].pts;let l=o+i[a].duration;l>ISe&&(l=ISe);l-o<=0&&(l=o+.25);for(let r=0;r<t.length;r++){const n=t[r];if(!Uve(n)){this.updateId3CueEnds(o,e);const t=RSe(s,o,l,n,e);t&&this.id3Track.addCue(t)}}}}updateId3CueEnds(e,t){var r;const n=null==(r=this.id3Track)?void 0:r.cues;if(n)for(let i=n.length;i--;){const r=n[i];r.type===t&&r.startTime<e&&r.endTime===ISe&&(r.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:r,type:n}){const{id3Track:i,hls:s}=this;if(!s)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:o}}=s;if(i&&(a||o)){let e;e="audio"===n?e=>e.type===zve.audioId3&&o:"video"===n?e=>e.type===zve.emsg&&a:e=>e.type===zve.audioId3&&o||e.type===zve.emsg&&a,ixe(i,t,r,e)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:r,timelineOffset:n,enableDateRangeMetadataCues:i,interstitialsController:s}=this.hls.config;if(!i)return;const a=DSe();if(r&&n&&!s){const{fragmentStart:t,fragmentEnd:n}=e;let i=this.assetCue;i?(i.startTime=t,i.endTime=n):a&&(i=this.assetCue=RSe(a,t,n,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),i&&(i.id=r,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(i),i.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:o}=this,{dateRanges:l}=e,c=Object.keys(l);let u=this.dateRangeCuesAppended;var d;if(o&&t)if(null!=(d=o.cues)&&d.length){const e=Object.keys(u).filter((e=>!c.includes(e)));for(let t=e.length;t--;){var h;const r=e[t],n=null==(h=u[r])?void 0:h.cues;delete u[r],n&&Object.keys(n).forEach((e=>{const t=n[e];if(t){t.removeEventListener("enter",this.onEventCueEnter);try{o.removeCue(t)}catch(Jce){}}}))}}else u=this.dateRangeCuesAppended={};const f=e.fragments[e.fragments.length-1];if(0!==c.length&&Lfe(null==f?void 0:f.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let e=0;e<c.length;e++){const t=c[e],r=l[t],n=r.startTime,i=u[t],o=(null==i?void 0:i.cues)||{};let d=(null==i?void 0:i.durationKnown)||!1,h=ISe;const{duration:f,endDate:g}=r;if(g&&null!==f)h=n+f,d=!0;else if(r.endOnNext&&!d){const e=c.reduce(((e,t)=>{if(t!==r.id){const n=l[t];if(n.class===r.class&&n.startDate>r.startDate&&(!e||r.startDate<e.startDate))return n}return e}),null);e&&(h=e.startTime,d=!0)}const m=Object.keys(r.attr);for(let e=0;e<m.length;e++){const l=m[e];if("ID"===(p=l)||"CLASS"===p||"CUE"===p||"START-DATE"===p||"DURATION"===p||"END-DATE"===p||"END-ON-NEXT"===p)continue;const c=o[l];if(c)!d||null!=i&&i.durationKnown?Math.abs(c.startTime-n)>.01&&(c.startTime=n,c.endTime=h):c.endTime=h;else if(a){let e=r.attr[l];Vme(l)&&(e=hpe(e));const i=RSe(a,n,h,{key:l,data:e},zve.dateRange);i&&(i.id=t,this.id3Track.addCue(i),o[l]=i,s&&("X-ASSET-LIST"!==l&&"X-ASSET-URL"!==l||i.addEventListener("enter",this.onEventCueEnter)))}}u[t]={cues:o,dateRange:r,durationKnown:d}}var p}}}class NSe{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:e}=this,t=this.levelDetails;if(!e||!t)return;this.currentTime=e.currentTime;const r=this.computeLatency();if(null===r)return;this._latency=r;const{lowLatencyMode:n,maxLiveSyncPlaybackRate:i}=this.config;if(!n||1===i||!t.live)return;const s=this.targetLatency;if(null===s)return;const a=r-s;if(a<Math.min(this.maxLatency,s+t.targetduration)&&a>.05&&this.forwardBufferLength>1){const t=Math.min(2,Math.max(1,i)),r=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20,n=Math.min(t,Math.max(1,r));this.changeMediaPlaybackRate(e,n)}else 1!==e.playbackRate&&0!==e.playbackRate&&this.changeMediaPlaybackRate(e,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return(null==(e=this.hls)?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(void 0!==e.liveMaxLatencyDuration)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(null===e||null===this.hls)return null;const{holdBack:t,partHoldBack:r,targetduration:n}=e,{liveSyncDuration:i,liveSyncDurationCount:s,lowLatencyMode:a}=this.config,o=this.hls.userConfig;let l=a&&r||t;(this._targetLatencyUpdated||o.liveSyncDuration||o.liveSyncDurationCount||0===l)&&(l=void 0!==i?i:s*n);const c=n;return l+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,c)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(null===e||null===t)return null;const r=this.levelDetails;if(null===r)return null;const n=r.edge,i=e-t-this.edgeStalled,s=n-r.totalduration,a=n-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(s,i),a)}get drift(){const e=this.levelDetails;return null===e?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(null===e)return 0;const t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const r=e.buffered.length;return(r?e.buffered.end(r-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on($fe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($fe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.on($fe.LEVEL_UPDATED,this.onLevelUpdated,this),e.on($fe.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off($fe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($fe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.off($fe.LEVEL_UPDATED,this.onLevelUpdated,this),e.off($fe.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var r;t.details===Bfe.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&null!=(r=this.levelDetails)&&r.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var r,n;e.playbackRate!==t&&(null==(r=this.hls)||r.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${null==(n=this.targetLatency)?void 0:n.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return null===e?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}class jSe extends Vbe{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.on($fe.MANIFEST_LOADED,this.onManifestLoaded,this),e.on($fe.LEVEL_LOADED,this.onLevelLoaded,this),e.on($fe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on($fe.FRAG_BUFFERED,this.onFragBuffered,this),e.on($fe.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.off($fe.MANIFEST_LOADED,this.onManifestLoaded,this),e.off($fe.LEVEL_LOADED,this.onLevelLoaded,this),e.off($fe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off($fe.FRAG_BUFFERED,this.onFragBuffered,this),e.off($fe.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach((e=>{e.loadError=0,e.fragmentError=0})),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const r=this.hls.config.preferManagedMediaSource,n=[],i={},s={};let a=!1,o=!1,l=!1;t.levels.forEach((e=>{const t=e.attrs;let{audioCodec:c,videoCodec:u}=e;c&&(e.audioCodec=c=fge(c,r)||void 0),u&&(u=e.videoCodec=function(e){const t=e.split(",");for(let r=0;r<t.length;r++){const e=t[r].split(".");e.length>2&&"avc1"===e[0]&&(t[r]=`avc1.${parseInt(e[1]).toString(16)}${("000"+parseInt(e[2]).toString(16)).slice(-4)}`)}return t.join(",")}(u));const{width:d,height:h,unknownCodecs:f}=e,p=(null==f?void 0:f.length)||0;if(a||(a=!(!d||!h)),o||(o=!!u),l||(l=!!c),p||c&&!this.isAudioSupported(c)||u&&!this.isVideoSupported(u))return void this.log(`Some or all CODECS not supported "${t.CODECS}"`);const{CODECS:g,"FRAME-RATE":m,"HDCP-LEVEL":y,"PATHWAY-ID":v,RESOLUTION:b,"VIDEO-RANGE":w}=t,x=`${`${v||"."}-`}${e.bitrate}-${b}-${m}-${g}-${w}-${y}`;if(i[x])if(i[x].uri===e.url||e.attrs["PATHWAY-ID"])i[x].addGroupId("audio",t.AUDIO),i[x].addGroupId("text",t.SUBTITLES);else{const t=s[x]+=1;e.attrs["PATHWAY-ID"]=new Array(t+1).join(".");const r=this.createLevel(e);i[x]=r,n.push(r)}else{const t=this.createLevel(e);i[x]=t,s[x]=1,n.push(t)}})),this.filterAndSortMediaOptions(n,t,a,o,l)}createLevel(e){const t=new Oge(e),r=e.supplemental;if(null!=r&&r.videoCodec&&!this.isVideoSupported(r.videoCodec)){const e=new Error(`SUPPLEMENTAL-CODECS not supported "${r.videoCodec}"`);this.log(e.message),t.supportedResult=xge(e,[])}return t}isAudioSupported(e){return age(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return age(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,r,n,i){var s;let a=[],o=[],l=e;const c=(null==(s=t.stats)?void 0:s.parsing)||{};if((r||n)&&i&&(l=l.filter((({videoCodec:e,videoRange:t,width:r,height:n})=>{return(!!e||!(!r||!n))&&(!!(i=t)&&_ge.indexOf(i)>-1);var i}))),0===l.length)return Promise.resolve().then((()=>{if(this.hls){let e="no level with compatible codecs found in manifest",r=e;t.levels.length&&(r=`one or more CODECS in variant not supported: ${Lge(t.levels.map((e=>e.attrs.CODECS)).filter(((e,t,r)=>r.indexOf(e)===t)))}`,this.warn(r),e+=` (${r})`);const n=new Error(e);this.hls.trigger($fe.ERROR,{type:Ufe.MEDIA_ERROR,details:Bfe.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:n,reason:r})}})),void(c.end=performance.now());t.audioTracks&&(a=t.audioTracks.filter((e=>!e.audioCodec||this.isAudioSupported(e.audioCodec))),LSe(a)),t.subtitles&&(o=t.subtitles,LSe(o));const u=l.slice(0);l.sort(((e,t)=>{if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return _ge.indexOf(e.videoRange)-_ge.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){const r=cge(e.videoCodec),n=cge(t.videoCodec);if(r!==n)return n-r}if(e.uri===t.uri&&e.codecSet!==t.codecSet){const r=uge(e.codecSet),n=uge(t.codecSet);if(r!==n)return n-r}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0}));let d=u[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==u.length))for(let y=0;y<u.length;y++)if(u[y].pathwayId===l[0].pathwayId){d=u[y];break}this._levels=l;for(let y=0;y<l.length;y++)if(l[y]===d){var h;this._firstLevel=y;const e=d.bitrate,t=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${e}`),void 0===(null==(h=this.hls.userConfig)?void 0:h.abrEwmaDefaultEstimate)){const r=Math.min(e,this.hls.config.abrEwmaDefaultEstimateMax);r>t&&t===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=r)}break}const f=i&&!n,p=this.hls.config,g=!(!p.audioStreamController||!p.audioTrackController),m={levels:l,audioTracks:a,subtitleTracks:o,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:i,video:n,altAudio:g&&!f&&a.some((e=>!!e.url))};c.end=performance.now(),this.hls.trigger($fe.MANIFEST_PARSED,m)}get levels(){return 0===this._levels.length?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){const r=new Error("invalid level idx"),n=e<0;if(this.hls.trigger($fe.ERROR,{type:Ufe.OTHER_ERROR,details:Bfe.LEVEL_SWITCH_ERROR,level:e,fatal:n,error:r,reason:r.message}),n)return;e=Math.min(e,t.length-1)}const r=this.currentLevelIndex,n=this.currentLevel,i=n?n.attrs["PATHWAY-ID"]:void 0,s=t[e],a=s.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=s,r===e&&n&&i===a)return;this.log(`Switching to level ${e} (${s.height?s.height+"p ":""}${s.videoRange?s.videoRange+" ":""}${s.codecSet?s.codecSet+" ":""}@${s.bitrate})${a?" with Pathway "+a:""} from level ${r}${i?" with Pathway "+i:""}`);const o={level:e,attrs:s.attrs,details:s.details,bitrate:s.bitrate,averageBitrate:s.averageBitrate,maxBitrate:s.maxBitrate,realBitrate:s.realBitrate,width:s.width,height:s.height,codecSet:s.codecSet,audioCodec:s.audioCodec,videoCodec:s.videoCodec,audioGroups:s.audioGroups,subtitleGroups:s.subtitleGroups,loaded:s.loaded,loadError:s.loadError,fragmentError:s.fragmentError,name:s.name,id:s.id,uri:s.uri,url:s.url,urlId:0,audioGroupIds:s.audioGroupIds,textGroupIds:s.textGroupIds};this.hls.trigger($fe.LEVEL_SWITCHING,o);const l=s.details;if(!l||l.live){const e=this.switchParams(s.uri,null==n?void 0:n.details,l);this.loadPlaylist(e)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){const e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),r=e.filter((e=>-1!==t.indexOf(e)));if(e.length<1)return void this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);this.steering.pathwayPriority=r}}onError(e,t){!t.fatal&&t.context&&t.context.type===qfe&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(void 0!==t&&t.type===Hfe){const e=t.elementaryStreams;if(!Object.keys(e).some((t=>!!e[t])))return;const r=this._levels[t.level];null!=r&&r.loadError&&(this.log(`Resetting level error count of ${r.loadError} on frag buffered`),r.loadError=0)}}onLevelLoaded(e,t){var r;const{level:n,details:i}=t,s=t.levelInfo;var a;if(!s)return this.warn(`Invalid level index ${n}`),void(null!=(a=t.deliveryDirectives)&&a.skip&&(i.deltaUpdateFailed=!0));if(s===this.currentLevel||t.withoutMultiVariant){0===s.fragmentError&&(s.loadError=0);let e=s.details;e===t.details&&e.advanced&&(e=void 0),this.playlistLoaded(n,t,e)}else null!=(r=t.deliveryDirectives)&&r.skip&&(i.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const r=this.getUrlWithDirectives(e.uri,t),n=this.currentLevelIndex,i=e.attrs["PATHWAY-ID"],s=e.details,a=null==s?void 0:s.age;this.log(`Loading level index ${n}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${i?" Pathway "+i:""}${a&&s.live?" age "+a.toFixed(1)+(s.type&&" "+s.type||""):""} ${r}`),this.hls.trigger($fe.LEVEL_LOADING,{url:r,level:n,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(1===this._levels.length)return;const r=this._levels.filter(((t,r)=>r!==e||(this.steering&&this.steering.removeLevel(t),t===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,t.details&&t.details.fragments.forEach((e=>e.level=-1))),!1)));qye(r),this._levels=r,this.currentLevelIndex>-1&&null!=(t=this.currentLevel)&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const n=r.length-1;this._firstLevel=Math.min(this._firstLevel,n),this._startLevel&&(this._startLevel=Math.min(this._startLevel,n)),this.hls.trigger($fe.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger($fe.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function LSe(e){const t={};e.forEach((e=>{const r=e.groupId||"";e.id=t[r]=t[r]||0,t[r]++}))}function MSe(){return self.SourceBuffer||self.WebKitSourceBuffer}function FSe(){if(!lpe())return!1;const e=MSe();return!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove}class USe extends hve{constructor(e,t,r){super(e,t,r,"stream-controller",Hfe),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const e=this.media,t=e?e.currentTime:null;if(null===t||!Lfe(t))return;if(this.log(`Media seeked to ${t.toFixed(3)}`),!this.getBufferedFrag(t))return;const r=this.getFwdBufferInfoAtPos(e,t,Hfe,0);null!==r&&0!==r.len?this.tick():this.warn(`Main forward buffer length at ${t} on "seeked" event ${r?r.len:"empty"})`)},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on($fe.MANIFEST_PARSED,this.onManifestParsed,this),e.on($fe.LEVEL_LOADING,this.onLevelLoading,this),e.on($fe.LEVEL_LOADED,this.onLevelLoaded,this),e.on($fe.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on($fe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on($fe.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on($fe.BUFFER_CREATED,this.onBufferCreated,this),e.on($fe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on($fe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on($fe.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off($fe.MANIFEST_PARSED,this.onManifestParsed,this),e.off($fe.LEVEL_LOADED,this.onLevelLoaded,this),e.off($fe.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off($fe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off($fe.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off($fe.BUFFER_CREATED,this.onBufferCreated,this),e.off($fe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off($fe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off($fe.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:r,hls:n}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let e=n.startLevel;-1===e&&(n.config.testBandwidth&&this.levels.length>1?(e=0,this.bitrateTest=!0):e=n.firstAutoLevel),n.nextLoadLevel=e,this.level=n.loadLevel,this._hasEnoughToStart=!!t}r>0&&-1===e&&!t&&(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r),this.state=tve,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=eve}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case dve:{const{levels:e,level:t}=this,r=null==e?void 0:e[t],n=null==r?void 0:r.details;if(n&&(!n.live||this.levelLastLoaded===r&&!this.waitForLive(r))){if(this.waitForCdnTuneIn(n))break;this.state=tve;break}if(this.hls.nextLoadLevel!==this.level){this.state=tve;break}break}case ive:this.checkRetryDate()}this.state===tve&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),null!=(e=this.media)&&e.readyState&&!1===this.media.seeking&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:r,media:n}=this;if(null===t||!n&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;const i=this.buffering?e.nextLoadLevel:e.loadLevel;if(null==r||!r[i])return;const s=r[i],a=this.getMainFwdBufferInfo();if(null===a)return;const o=this.getLevelDetails();if(o&&this._streamEnded(a,o)){const e={};return 2===this.altAudio&&(e.type="video"),this.hls.trigger($fe.BUFFER_EOS,e),void(this.state=lve)}if(!this.buffering)return;e.loadLevel!==i&&-1===e.manualLevel&&this.log(`Adapting to level ${i} from level ${this.level}`),this.level=e.nextLoadLevel=i;const l=s.details;if(!l||this.state===dve||this.waitForLive(s))return this.level=i,this.state=dve,void(this.startFragRequested=!1);const c=a.len,u=this.getMaxBufferLength(s.maxBitrate);if(c>=u)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const d=this.backtrackFragment?this.backtrackFragment.start:a.end;let h=this.getNextFragment(d,l);if(this.couldBacktrack&&!this.fragPrevious&&h&&_pe(h)&&this.fragmentTracker.getState(h)!==mme){var f;const e=(null!=(f=this.backtrackFragment)?f:h).sn-l.startSN,t=l.fragments[e-1];t&&h.cc===t.cc&&(h=t,this.fragmentTracker.removeFragment(t))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(h&&this.isLoopLoading(h,d)){if(!h.gap){const e=this.audioOnly&&!this.altAudio?Epe:Tpe,t=(e===Tpe?this.videoBuffer:this.mediaBuffer)||this.media;t&&this.afterBufferFlushed(t,e,Hfe)}h=this.getNextFragmentLoopLoading(h,l,a,Hfe,u)}h&&(!h.initSegment||h.initSegment.data||this.bitrateTest||(h=h.initSegment),this.loadFragment(h,s,d))}loadFragment(e,t,r){const n=this.fragmentTracker.getState(e);n===fme||n===gme?_pe(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,r):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Hfe)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(null!=t&&t.readyState){let r;const n=this.getAppendedFrag(t.currentTime);n&&n.start>1&&this.flushMainBuffer(0,n.start-1);const i=this.getLevelDetails();if(null!=i&&i.live){const e=this.getMainFwdBufferInfo();if(!e||e.len<2*i.targetduration)return}if(!t.paused&&e){const t=e[this.hls.nextLoadLevel],n=this.fragLastKbps;r=n&&this.fragCurrent?this.fragCurrent.duration*t.maxBitrate/(1e3*n)+1:0}else r=0;const s=this.getBufferedFrag(t.currentTime+r);if(s){const e=this.followingBufferedFrag(s);if(e){this.abortCurrentFrag();const t=e.maxStartPTS?e.maxStartPTS:e.start,r=e.duration,n=Math.max(s.end,t+Math.min(Math.max(r-this.config.maxFragLookUpTolerance,r*(this.couldBacktrack?.5:.125)),r*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(n,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case rve:case nve:case ive:case ave:case ove:this.state=tve}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,2===this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const r=t.media;Xye(r,"playing",this.onMediaPlaying),Xye(r,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:r}=this;r&&(Jye(r,"playing",this.onMediaPlaying),Jye(r,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t);!!t.transferMedia||(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger($fe.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let r=!1,n=!1;for(let i=0;i<t.levels.length;i++){const e=t.levels[i].audioCodec;e&&(r=r||-1!==e.indexOf("mp4a.40.2"),n=n||-1!==e.indexOf("mp4a.40.5"))}this.audioCodecSwitch=r&&n&&!function(){var e;const t=MSe();return"function"==typeof(null==t||null==(e=t.prototype)?void 0:e.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:r}=this;if(!r||this.state!==tve)return;const n=t.levelInfo;(!n.details||n.details.live&&(this.levelLastLoaded!==n||n.details.expired)||this.waitForCdnTuneIn(n.details))&&(this.state=dve)}onLevelLoaded(e,t){var r;const{levels:n,startFragRequested:i}=this,s=t.level,a=t.details,o=a.totalduration;if(!n)return void this.warn(`Levels were reset while loading level ${s}`);this.log(`Level ${s} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""}, cc [${a.startCC}, ${a.endCC}] duration:${o}`);const l=t.levelInfo,c=this.fragCurrent;!c||this.state!==nve&&this.state!==ive||c.level!==t.level&&c.loader&&this.abortCurrentFrag();let u=0;if(a.live||null!=(r=l.details)&&r.live){var d;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;u=this.alignPlaylists(a,l.details,null==(d=this.levelLastLoaded)?void 0:d.details)}if(l.details=a,this.levelLastLoaded=l,i||this.setStartPosition(a,u),this.hls.trigger($fe.LEVEL_UPDATED,{details:a,level:s}),this.state===dve){if(this.waitForCdnTuneIn(a))return;this.state=tve}i&&a.live&&this.synchronizeToLiveEdge(a),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:r}=this;if(!r)return;const n=this.hls.liveSyncPosition,i=this.getLoadPosition(),s=e.fragmentStart,a=e.edge,o=i>=s-t.maxFragLookUpTolerance&&i<=a;if(null!==n&&r.duration>n&&(i<n||!o)){const s=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!o&&r.readyState<4||i<a-s)&&(this._hasEnoughToStart||(this.nextLoadPosition=n),r.readyState))if(this.warn(`Playback: ${i.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${n.toFixed(3)}`),"buffered"===this.config.liveSyncMode){var l;const e=jme.bufferInfo(r,n,0);if(null==(l=e.buffered)||!l.length)return void(r.currentTime=n);if(e.start<=i)return void(r.currentTime=n);const{nextStart:t}=jme.bufferedInfo(e.buffered,i,0);t&&(r.currentTime=t)}else r.currentTime=n}}_handleFragmentLoadProgress(e){var t;const r=e.frag,{part:n,payload:i}=e,{levels:s}=this;if(!s)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);const a=s[r.level];if(!a)return void this.warn(`Level ${r.level} not found on progress`);const o=a.details;if(!o)return this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),void this.fragmentTracker.removeFragment(r);const l=a.videoCodec,c=o.PTSKnown||!o.live,u=null==(t=r.initSegment)?void 0:t.data,d=this._getAudioCodec(a),h=this.transmuxer=this.transmuxer||new qbe(this.hls,Hfe,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=n?n.index:-1,p=-1!==f,g=new Ome(r.level,r.sn,r.stats.chunkCount,i.byteLength,f,p),m=this.initPTS[r.cc];h.push(i,u,d,l,r,n,o.totalduration,c,g,m)}onAudioTrackSwitching(e,t){const r=this.hls,n=0!==this.altAudio;if(Vge(t.url,r))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const e=this.fragCurrent;e&&(this.log("Switching to main audio track, cancel main fragment load"),e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(n)return this.altAudio=0,this.fragmentTracker.removeAllFragments(),r.once($fe.BUFFER_FLUSHED,(()=>{this.hls&&this.hls.trigger($fe.AUDIO_TRACK_SWITCHED,t)})),void r.trigger($fe.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});r.trigger($fe.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const r=Vge(t.url,this.hls);if(r){const e=this.videoBuffer;e&&this.mediaBuffer!==e&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e)}this.altAudio=r?2:0,this.tick()}onBufferCreated(e,t){const r=t.tracks;let n,i,s=!1;for(const a in r){const e=r[a];if("main"===e.id){if(i=a,n=e,"video"===a){const e=r[a];e&&(this.videoBuffer=e.buffer)}}else s=!0}s&&n?(this.log(`Alternate track found, use ${i}.buffered to schedule main fragment loading`),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:r,part:n}=t,i=r.type===Hfe;if(i){if(this.fragContextChanged(r))return this.warn(`Fragment ${r.sn}${n?" p: "+n.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),void(this.state===ove&&(this.state=tve));const e=n?n.stats:r.stats;this.fragLastKbps=Math.round(8*e.total/(e.buffering.end-e.loading.first)),_pe(r)&&(this.fragPrevious=r),this.fragBufferedComplete(r,n)}const s=this.media;s&&(!this._hasEnoughToStart&&jme.getBuffered(s).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),i&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var r;if(t.fatal)this.state=cve;else switch(t.details){case Bfe.FRAG_GAP:case Bfe.FRAG_PARSING_ERROR:case Bfe.FRAG_DECRYPT_ERROR:case Bfe.FRAG_LOAD_ERROR:case Bfe.FRAG_LOAD_TIMEOUT:case Bfe.KEY_LOAD_ERROR:case Bfe.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Hfe,t);break;case Bfe.LEVEL_LOAD_ERROR:case Bfe.LEVEL_LOAD_TIMEOUT:case Bfe.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==dve||(null==(r=t.context)?void 0:r.type)!==qfe||(this.state=tve);break;case Bfe.BUFFER_ADD_CODEC_ERROR:case Bfe.BUFFER_APPEND_ERROR:if("main"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case Bfe.BUFFER_FULL_ERROR:if("main"!==t.parent)return;if(this.reduceLengthAndFlushBuffer(t)){!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}break;case Bfe.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onFragLoadEmergencyAborted(){this.state=tve,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==Epe||!this.altAudio){const e=(t===Tpe?this.videoBuffer:this.mediaBuffer)||this.media;e&&(this.afterBufferFlushed(e,t,Hfe),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,-1===this.level&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let r=this.startPosition;if(r>=0&&t<r){if(e.seeking)return void this.log(`could not seek to ${r}, already seeking at ${t}`);const n=this.timelineOffset;n&&r&&(r+=n);const i=this.getLevelDetails(),s=jme.getBuffered(e),a=s.length?s.start(0):0,o=a-r,l=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||o>0&&(o<l||this.loadingParts&&o<2*((null==i?void 0:i.partTarget)||0)))&&(this.log(`adjusting start position by ${o} to match buffer start`),r+=o,this.startPosition=r),t<r&&(this.log(`seek to target start position ${r} from current time ${t} buffer start ${a}`),e.currentTime=r)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then((e=>{const{hls:r}=this,n=null==e?void 0:e.frag;if(!n||this.fragContextChanged(n))return;t.fragmentError=0,this.state=tve,this.startFragRequested=!1,this.bitrateTest=!1;const i=n.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),r.trigger($fe.FRAG_LOADED,e),n.bitrateTest=!1})).catch((t=>{this.state!==eve&&this.state!==cve&&(this.warn(t),this.resetFragmentLoading(e))}))}_handleTransmuxComplete(e){const t=this.playlistType,{hls:r}=this,{remuxResult:n,chunkMeta:i}=e,s=this.getCurrentContext(i);if(!s)return void this.resetWhenMissingContext(i);const{frag:a,part:o,level:l}=s,{video:c,text:u,id3:d,initSegment:h}=n,{details:f}=l,p=this.altAudio?void 0:n.audio;if(this.fragContextChanged(a))this.fragmentTracker.removeFragment(a);else{if(this.state=ave,h){const e=h.tracks;if(e){const n=a.initSegment||a;if(this.unhandledEncryptionError(h,a))return;this._bufferInitSegment(l,e,n,i),r.trigger($fe.FRAG_PARSING_INIT_SEGMENT,{frag:n,id:t,tracks:e})}const n=h.initPTS,s=h.timescale,o=this.initPTS[a.cc];if(Lfe(n)&&(!o||o.baseTime!==n||o.timescale!==s)){const e=h.trackId;this.initPTS[a.cc]={baseTime:n,timescale:s,trackId:e},r.trigger($fe.INIT_PTS_FOUND,{frag:a,id:t,initPTS:n,timescale:s,trackId:e})}}if(c&&f){p&&"audiovideo"===c.type&&this.logMuxedErr(a);const e=f.fragments[a.sn-1-f.startSN],t=a.sn===f.startSN,r=!e||a.cc>e.cc;if(!1!==n.independent){const{startPTS:e,endPTS:n,startDTS:s,endDTS:l}=c;if(o)o.elementaryStreams[c.type]={startPTS:e,endPTS:n,startDTS:s,endDTS:l};else if(c.firstKeyFrame&&c.independent&&1===i.id&&!r&&(this.couldBacktrack=!0),c.dropped&&c.independent){const i=this.getMainFwdBufferInfo(),s=(i?i.end:this.getLoadPosition())+this.config.maxBufferHole,o=c.firstKeyFramePTS?c.firstKeyFramePTS:e;if(!t&&s<o-this.config.maxBufferHole&&!r)return void this.backtrack(a);r&&(a.gap=!0),a.setElementaryStreamInfo(c.type,a.start,n,a.start,l,!0)}else t&&e-(f.appliedTimelineOffset||0)>2&&(a.gap=!0);a.setElementaryStreamInfo(c.type,e,n,s,l),this.backtrackFragment&&(this.backtrackFragment=a),this.bufferFragmentData(c,a,o,i,t||r)}else{if(!t&&!r)return void this.backtrack(a);a.gap=!0}}if(p){const{startPTS:e,endPTS:t,startDTS:r,endDTS:n}=p;o&&(o.elementaryStreams[Epe]={startPTS:e,endPTS:t,startDTS:r,endDTS:n}),a.setElementaryStreamInfo(Epe,e,t,r,n),this.bufferFragmentData(p,a,o,i)}if(f&&null!=d&&d.samples.length){const e={id:t,frag:a,details:f,samples:d.samples};r.trigger($fe.FRAG_PARSING_METADATA,e)}if(f&&u){const e={id:t,frag:a,details:f,samples:u.samples};r.trigger($fe.FRAG_PARSING_USERDATA,e)}}}logMuxedErr(e){this.warn(`${_pe(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,r,n){if(this.state!==ave)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(r));const{audio:i,video:s,audiovideo:a}=t;if(i){const r=e.audioCodec;let n=pge(i.codec,r);"mp4a"===n&&(n="mp4a.40.5");const s=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){n&&(n=-1!==n.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");const e=i.metadata;e&&"channelCount"in e&&1!==(e.channelCount||1)&&-1===s.indexOf("firefox")&&(n="mp4a.40.5")}n&&-1!==n.indexOf("mp4a.40.5")&&-1!==s.indexOf("android")&&"audio/mpeg"!==i.container&&(n="mp4a.40.2",this.log(`Android: force audio codec to ${n}`)),r&&r!==n&&this.log(`Swapping manifest audio codec "${r}" for "${n}"`),i.levelCodec=n,i.id=Hfe,this.log(`Init audio buffer, container:${i.container}, codecs[selected/level/parsed]=[${n||""}/${r||""}/${i.codec}]`),delete t.audiovideo}if(s){s.levelCodec=e.videoCodec,s.id=Hfe;const r=s.codec;if(4===(null==r?void 0:r.length))switch(r){case"hvc1":case"hev1":s.codec="hvc1.1.6.L120.90";break;case"av01":s.codec="av01.0.04M.08";break;case"avc1":s.codec="avc1.42e01e"}this.log(`Init video buffer, container:${s.container}, codecs[level/parsed]=[${e.videoCodec||""}/${r}]${s.codec!==r?" parsed-corrected="+s.codec:""}${s.supplemental?" supplemental="+s.supplemental:""}`),delete t.audiovideo}a&&(this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.codecs}/${a.codec}]`),delete t.video,delete t.audio);const o=Object.keys(t);if(o.length){if(this.hls.trigger($fe.BUFFER_CODECS,t),!this.hls)return;o.forEach((e=>{const i=t[e].initSegment;null!=i&&i.byteLength&&this.hls.trigger($fe.BUFFER_APPENDING,{type:e,data:i,frag:r,part:null,chunkMeta:n,parent:r.type})}))}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&2===this.altAudio?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,Hfe)}get maxBufferLength(){const{levels:e,level:t}=this,r=null==e?void 0:e[t];return r?this.getMaxBufferLength(r.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=tve}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&!1===e.seeking){const r=e.currentTime;if(jme.isBuffered(e,r)?t=this.getAppendedFrag(r):jme.isBuffered(e,r+.1)&&(t=this.getAppendedFrag(r+.1)),t){this.backtrackFragment=null;const e=this.fragPlaying,r=t.level;e&&t.sn===e.sn&&e.level===r||(this.fragPlaying=t,this.hls.trigger($fe.FRAG_CHANGED,{frag:t}),e&&e.level===r||this.hls.trigger($fe.LEVEL_SWITCHED,{level:r}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;return Lfe(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;if(Lfe(t)){const e=this.getLevelDetails(),r=this.currentFrag||(e?Hge(null,e.fragments,t):null);if(r){const e=r.programDateTime;if(null!==e){const n=e+1e3*(t-r.start);return new Date(n)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class BSe extends tpe{constructor(e,t){super("key-loader",t),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const r in this.keyIdToKeyInfo){const n=this.keyIdToKeyInfo[r].loader;if(n){var t;if(e&&e!==(null==(t=n.context)?void 0:t.frag.type))return;n.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e].loader;t&&t.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,t=Bfe.KEY_LOAD_ERROR,r,n,i){return new Rme({type:Ufe.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:i,error:r,networkDetails:n})}loadClear(e,t,r){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let n=0,i=t.length;n<i;n++){const s=t[n];if(e.cc<=s.cc&&(!_pe(e)||!_pe(s)||e.sn<s.sn)||!r&&n==i-1)return this.emeController.selectKeySystemFormat(s).then((e=>{if(!this.emeController)return;s.setKeyFormat(e);const t=oye(e);return t?this.emeController.getKeySystemAccess([t]):void 0}))}if(this.config.requireKeySystemAccessOnStart){const e=cye(this.config);if(e.length)return this.emeController.getKeySystemAccess(e)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then((t=>this.loadInternal(e,t))):this.loadInternal(e)}loadInternal(e,t){var r,n;t&&e.setKeyFormat(t);const i=e.decryptdata;if(!i){const r=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,Bfe.KEY_LOAD_ERROR,r))}const s=i.uri;if(!s)return Promise.reject(this.createKeyLoadError(e,Bfe.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${s}"`)));const a=$Se(i);let o=this.keyIdToKeyInfo[a];if(null!=(r=o)&&r.decryptdata.key)return i.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});if(this.emeController&&null!=(n=o)&&n.keyLoadPromise){switch(this.emeController.getKeyStatus(o.decryptdata)){case"usable":case"usable-in-future":return o.keyLoadPromise.then((t=>{const{keyInfo:r}=t;return i.key=r.decryptdata.key,{frag:e,keyInfo:r}}))}}switch(this.log(`${this.keyIdToKeyInfo[a]?"Rel":"L"}oading${i.keyId?" keyId: "+dpe(i.keyId):""} URI: ${i.uri} from ${e.type} ${e.level}`),o=this.keyIdToKeyInfo[a]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===i.keyFormat?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,Bfe.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${i.method}"`)))}}loadKeyEME(e,t){const r={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var n;if(!e.decryptdata.keyId&&null!=(n=t.initSegment)&&n.data){const r=function(e){const t=[];return Gpe(e,(e=>t.push(e.subarray(8,24)))),t}(t.initSegment.data);if(r.length){let t=r[0];t.some((e=>0!==e))?(this.log(`Using keyId found in init segment ${dpe(t)}`),pye.setKeyIdForUri(e.decryptdata.uri,t)):(t=pye.addKeyIdForUri(e.decryptdata.uri),this.log(`Generating keyId to patch media ${dpe(t)}`)),e.decryptdata.keyId=t}}if(!e.decryptdata.keyId&&!_pe(t))return Promise.resolve(r);const i=this.emeController.loadKey(r);return(e.keyLoadPromise=i.then((t=>(e.mediaKeySessionContext=t,r)))).catch((r=>{throw e.keyLoadPromise=null,"data"in r&&(r.data.frag=t),r}))}return Promise.resolve(r)}loadKeyHTTP(e,t){const r=this.config,n=new(0,r.loader)(r);return t.keyLoader=e.loader=n,e.keyLoadPromise=new Promise(((i,s)=>{const a={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},o=r.keyLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,r,n)=>{const{frag:a,keyInfo:o}=r,l=$Se(o.decryptdata);if(!a.decryptdata||o!==this.keyIdToKeyInfo[l])return s(this.createKeyLoadError(a,Bfe.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),n));o.decryptdata.key=a.decryptdata.key=new Uint8Array(e.data),a.keyLoader=null,o.loader=null,i({frag:a,keyInfo:o})},onError:(e,r,n,i)=>{this.resetLoader(r),s(this.createKeyLoadError(t,Bfe.KEY_LOAD_ERROR,new Error(`HTTP Error ${e.code} loading key ${e.text}`),n,epe({url:a.url,data:void 0},e)))},onTimeout:(e,r,n)=>{this.resetLoader(r),s(this.createKeyLoadError(t,Bfe.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),n))},onAbort:(e,r,n)=>{this.resetLoader(r),s(this.createKeyLoadError(t,Bfe.INTERNAL_ABORTED,new Error("key loading aborted"),n))}};n.load(a,l,c)}))}resetLoader(e){const{frag:t,keyInfo:r,url:n}=e,i=r.loader;t.keyLoader===i&&(t.keyLoader=null,r.loader=null);const s=$Se(r.decryptdata)||n;delete this.keyIdToKeyInfo[s],i&&i.destroy()}}function $Se(e){if(e.keyFormat!==iye){const t=e.keyId;if(t)return dpe(t)}return e.uri}function zSe(e){const{type:t}=e;switch(t){case Vfe:return Gfe;case Kfe:return Wfe;default:return Hfe}}function qSe(e,t){let r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r}class VSe{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.on($fe.LEVEL_LOADING,this.onLevelLoading,this),e.on($fe.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on($fe.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on($fe.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off($fe.MANIFEST_LOADING,this.onManifestLoading,this),e.off($fe.LEVEL_LOADING,this.onLevelLoading,this),e.off($fe.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off($fe.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off($fe.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,r=t.pLoader,n=t.loader,i=new(r||n)(t);return this.loaders[e.type]=i,i}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:r}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:zfe,url:r,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:r,level:n,pathwayId:i,url:s,deliveryDirectives:a,levelInfo:o}=t;this.load({id:r,level:n,pathwayId:i,responseType:"text",type:qfe,url:s,deliveryDirectives:a,levelOrTrack:o})}onAudioTrackLoading(e,t){const{id:r,groupId:n,url:i,deliveryDirectives:s,track:a}=t;this.load({id:r,groupId:n,level:null,responseType:"text",type:Vfe,url:i,deliveryDirectives:s,levelOrTrack:a})}onSubtitleTrackLoading(e,t){const{id:r,groupId:n,url:i,deliveryDirectives:s,track:a}=t;this.load({id:r,groupId:n,level:null,responseType:"text",type:Kfe,url:i,deliveryDirectives:s,levelOrTrack:a})}onLevelsUpdated(e,t){const r=this.loaders[qfe];if(r){const e=r.context;e&&!t.levels.some((t=>t===e.levelOrTrack))&&(r.abort(),delete this.loaders[qfe])}}load(e){var t;const r=this.hls.config;let n,i=this.getInternalLoader(e);if(i){const t=this.hls.logger,r=i.context;if(r&&r.levelOrTrack===e.levelOrTrack&&(r.url===e.url||r.deliveryDirectives&&!e.deliveryDirectives))return void(r.url===e.url?t.log(`[playlist-loader]: ignore ${e.url} ongoing request`):t.log(`[playlist-loader]: ignore ${e.url} in favor of ${r.url}`));t.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}if(n=e.type===zfe?r.manifestLoadPolicy.default:Jfe({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),Lfe(null==(t=e.deliveryDirectives)?void 0:t.part)){let t;if(e.type===qfe&&null!==e.level?t=this.hls.levels[e.level].details:e.type===Vfe&&null!==e.id?t=this.hls.audioTracks[e.id].details:e.type===Kfe&&null!==e.id&&(t=this.hls.subtitleTracks[e.id].details),t){const e=t.partTarget,r=t.targetduration;if(e&&r){const t=1e3*Math.max(3*e,.8*r);n=Jfe({},n,{maxTimeToFirstByteMs:Math.min(t,n.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,n.maxTimeToFirstByteMs)})}}}const s=n.errorRetry||n.timeoutRetry||{},a={loadPolicy:n,timeout:n.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},o={onSuccess:(e,t,r,n)=>{const i=this.getInternalLoader(r);this.resetInternalLoader(r.type);const s=e.data;t.parsing.start=performance.now(),xye.isMediaPlaylist(s)||r.type!==zfe?this.handleTrackOrLevelPlaylist(e,t,r,n||null,i):this.handleMasterPlaylist(e,t,r,n)},onError:(e,t,r,n)=>{this.handleNetworkError(t,r,!1,e,n)},onTimeout:(e,t,r)=>{this.handleNetworkError(t,r,!0,void 0,e)}};i.load(e,a,o)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:r}=this.hls;(e||r)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,r,n){const i=this.hls,s=e.data,a=qSe(e,r),o=xye.parseMasterPlaylist(s,a);if(o.playlistParsingError)return t.parsing.end=performance.now(),void this.handleManifestParsingError(e,r,o.playlistParsingError,n,t);const{contentSteering:l,levels:c,sessionData:u,sessionKeys:d,startTimeOffset:h,variableList:f}=o;this.variableList=f,c.forEach((e=>{const{unknownCodecs:t}=e;if(t){const{preferManagedMediaSource:r}=this.hls.config;let{audioCodec:n,videoCodec:i}=e;for(let s=t.length;s--;){const a=t[s];age(a,"audio",r)?(e.audioCodec=n=n?`${n},${a}`:a,ige.audio[n.substring(0,4)]=2,t.splice(s,1)):age(a,"video",r)&&(e.videoCodec=i=i?`${i},${a}`:a,ige.video[i.substring(0,4)]=2,t.splice(s,1))}}}));const{AUDIO:p=[],SUBTITLES:g,"CLOSED-CAPTIONS":m}=xye.parseMasterPlaylistMedia(s,a,o);if(p.length){p.some((e=>!e.url))||!c[0].audioCodec||c[0].attrs.AUDIO||(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new qme({}),bitrate:0,url:""}))}i.trigger($fe.MANIFEST_LOADED,{levels:c,audioTracks:p,subtitles:g,captions:m,contentSteering:l,url:a,stats:t,networkDetails:n,sessionData:u,sessionKeys:d,startTimeOffset:h,variableList:f})}handleTrackOrLevelPlaylist(e,t,r,n,i){const s=this.hls,{id:a,level:o,type:l}=r,c=qSe(e,r),u=Lfe(o)?o:Lfe(a)?a:0,d=zSe(r),h=xye.parseLevelPlaylist(e.data,c,u,d,0,this.variableList);if(l===zfe){const e={attrs:new qme({}),bitrate:0,details:h,name:"",url:c};h.requestScheduled=t.loading.start+Uye(h,0),s.trigger($fe.MANIFEST_LOADED,{levels:[e],audioTracks:[],url:c,stats:t,networkDetails:n,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),r.levelDetails=h,this.handlePlaylistLoaded(h,e,t,r,n,i)}handleManifestParsingError(e,t,r,n,i){this.hls.trigger($fe.ERROR,{type:Ufe.NETWORK_ERROR,details:Bfe.MANIFEST_PARSING_ERROR,fatal:t.type===zfe,url:e.url,err:r,error:r,reason:r.message,response:e,context:t,networkDetails:n,stats:i})}handleNetworkError(e,t,r=!1,n,i){let s=`A network ${r?"timeout":"error"+(n?" (status "+n.code+")":"")} occurred while loading ${e.type}`;e.type===qfe?s+=`: ${e.level} id: ${e.id}`:e.type!==Vfe&&e.type!==Kfe||(s+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(s);this.hls.logger.warn(`[playlist-loader]: ${s}`);let o=Bfe.UNKNOWN,l=!1;const c=this.getInternalLoader(e);switch(e.type){case zfe:o=r?Bfe.MANIFEST_LOAD_TIMEOUT:Bfe.MANIFEST_LOAD_ERROR,l=!0;break;case qfe:o=r?Bfe.LEVEL_LOAD_TIMEOUT:Bfe.LEVEL_LOAD_ERROR,l=!1;break;case Vfe:o=r?Bfe.AUDIO_TRACK_LOAD_TIMEOUT:Bfe.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case Kfe:o=r?Bfe.SUBTITLE_TRACK_LOAD_TIMEOUT:Bfe.SUBTITLE_LOAD_ERROR,l=!1}c&&this.resetInternalLoader(e.type);const u={type:Ufe.NETWORK_ERROR,details:o,fatal:l,url:e.url,loader:c,context:e,error:a,networkDetails:t,stats:i};if(n){const r=(null==t?void 0:t.url)||e.url;u.response=epe({url:r,data:void 0},n)}this.hls.trigger($fe.ERROR,u)}handlePlaylistLoaded(e,t,r,n,i,s){const a=this.hls,{type:o,level:l,levelOrTrack:c,id:u,groupId:d,deliveryDirectives:h}=n,f=qSe(t,n),p=zSe(n);let g="number"==typeof n.level&&p===Hfe?l:void 0;const m=e.playlistParsingError;if(m){if(this.hls.logger.warn(`${m} ${e.url}`),!a.config.ignorePlaylistParsingErrors)return void a.trigger($fe.ERROR,{type:Ufe.NETWORK_ERROR,details:Bfe.LEVEL_PARSING_ERROR,fatal:!1,url:f,error:m,reason:m.message,response:t,context:n,level:g,parent:p,networkDetails:i,stats:r});e.playlistParsingError=null}if(e.fragments.length)switch(e.live&&s&&(s.getCacheAge&&(e.ageHeader=s.getCacheAge()||0),s.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),o){case zfe:case qfe:if(g)if(c){if(c!==a.levels[g]){const e=a.levels.indexOf(c);e>-1&&(g=e)}}else g=0;a.trigger($fe.LEVEL_LOADED,{details:e,levelInfo:c||a.levels[0],level:g||0,id:u||0,stats:r,networkDetails:i,deliveryDirectives:h,withoutMultiVariant:o===zfe});break;case Vfe:a.trigger($fe.AUDIO_TRACK_LOADED,{details:e,track:c,id:u||0,groupId:d||"",stats:r,networkDetails:i,deliveryDirectives:h});break;case Kfe:a.trigger($fe.SUBTITLE_TRACK_LOADED,{details:e,track:c,id:u||0,groupId:d||"",stats:r,networkDetails:i,deliveryDirectives:h})}else{const s=e.playlistParsingError=new Error("No Segments found in Playlist");a.trigger($fe.ERROR,{type:Ufe.NETWORK_ERROR,details:Bfe.LEVEL_EMPTY_ERROR,fatal:!1,url:f,error:s,reason:s.message,response:t,context:n,level:g,parent:p,networkDetails:i,stats:r})}}}class KSe{static get version(){return bve}static isMSESupported(){return FSe()}static isSupported(){return function(){if(!FSe())return!1;const e=lpe();return"function"==typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some((t=>e.isTypeSupported(lge(t,"video"))))||["mp4a.40.2","fLaC"].some((t=>e.isTypeSupported(lge(t,"audio")))))}()}static getMediaSource(){return lpe()}static get Events(){return $fe}static get MetadataSchema(){return zve}static get ErrorTypes(){return Ufe}static get ErrorDetails(){return Bfe}static get DefaultConfig(){return KSe.defaultConfig?KSe.defaultConfig:ESe}static set DefaultConfig(e){KSe.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new vve,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=function(e,t,r){const n=ipe();if("object"==typeof console&&!0===e||"object"==typeof e){const i=["debug","log","info","warn","error"];i.forEach((t=>{n[t]=spe(t,e,r)}));try{n.log(`Debug logs enabled for "${t}" in hls.js version 1.6.15`)}catch(Jce){return ipe()}i.forEach((t=>{ape[t]=spe(t,e)}))}else Jfe(ape,n);return n}(e.debug||!1,"Hls instance",e.assetPlayerId),r=this.config=function(e,t,r){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=TSe(e),i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((e=>{const s=`${"level"===e?"playlist":e}LoadPolicy`,a=void 0===t[s],o=[];i.forEach((r=>{const i=`${e}Loading${r}`,l=t[i];if(void 0!==l&&a){o.push(i);const e=n[s].default;switch(t[s]={default:e},r){case"TimeOut":e.maxLoadTimeMs=l,e.maxTimeToFirstByteMs=l;break;case"MaxRetry":e.errorRetry.maxNumRetry=l,e.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":e.errorRetry.retryDelayMs=l,e.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":e.errorRetry.maxRetryDelayMs=l,e.timeoutRetry.maxRetryDelayMs=l}}})),o.length&&r.warn(`hls.js config: "${o.join('", "')}" setting(s) are deprecated, use "${s}": ${Lge(t[s])}`)})),epe(epe({},n),t)}(KSe.DefaultConfig,e,t);this.userConfig=e,r.progressive&&kSe(r,t);const{abrController:n,bufferController:i,capLevelController:s,errorController:a,fpsController:o}=r,l=new a(this),c=this.abrController=new n(this),u=new yme(this),d=r.interstitialsController,h=d?this.interstitialsController=new d(this,KSe):null,f=this.bufferController=new i(this,u),p=this.capLevelController=new s(this),g=new o(this),m=new VSe(this),y=r.contentSteeringController,v=y?new y(this):null,b=this.levelController=new jSe(this,v),w=new OSe(this),x=new BSe(this.config,this.logger),S=this.streamController=new USe(this,u,x),E=this.gapController=new ASe(this,u);p.setStreamController(S),g.setStreamController(S);const T=[m,b,S];h&&T.splice(1,0,h),v&&T.splice(1,0,v),this.networkControllers=T;const k=[c,f,E,p,g,w,u];this.audioTrackController=this.createController(r.audioTrackController,T);const A=r.audioStreamController;A&&T.push(this.audioStreamController=new A(this,u,x)),this.subtitleTrackController=this.createController(r.subtitleTrackController,T);const _=r.subtitleStreamController;_&&T.push(this.subtititleStreamController=new _(this,u,x)),this.createController(r.timelineController,k),x.emeController=this.emeController=this.createController(r.emeController,k),this.cmcdController=this.createController(r.cmcdController,k),this.latencyController=this.createController(NSe,k),this.coreComponents=k,T.push(l);const C=l.onErrorOut;"function"==typeof C&&this.on($fe.ERROR,C,l),this.on($fe.MANIFEST_LOADED,m.onManifestLoaded,m)}createController(e,t){if(e){const r=new e(this);return t&&t.push(r),r}return null}on(e,t,r=this){this._emitter.on(e,t,r)}once(e,t,r=this){this._emitter.once(e,t,r)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,r=this,n){this._emitter.off(e,t,r,n)}listeners(e){return this._emitter.listeners(e)}emit(e,t,r){return this._emitter.emit(e,t,r)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(r){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),!this.triggeringException){this.triggeringException=!0;const t=e===$fe.ERROR;this.trigger($fe.ERROR,{type:Ufe.OTHER_ERROR,details:Bfe.INTERNAL_EXCEPTION,fatal:t,event:e,error:r}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger($fe.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach((e=>e.destroy())),this.networkControllers.length=0,this.coreComponents.forEach((e=>e.destroy())),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const t=new Error(`attachMedia failed: invalid argument (${e})`);return void this.trigger($fe.ERROR,{type:Ufe.OTHER_ERROR,details:Bfe.ATTACH_MEDIA_ERROR,fatal:!0,error:t})}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,r=t?e.media:e,n=t?e:{media:r};this._media=r,this.trigger($fe.MEDIA_ATTACHING,n)}detachMedia(){this.logger.log("detachMedia"),this.trigger($fe.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger($fe.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,r=this._url,n=this._url=xpe.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${n}`),t&&r&&(r!==n||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger($fe.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let r=0;r<this.networkControllers.length&&(this.networkControllers[r].startLoad(e,t),this.started&&this.networkControllers);r++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!this.started&&this.networkControllers);e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach((e=>{e.resumeBuffering&&e.resumeBuffering()})))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach((e=>{e.pauseBuffering&&e.pauseBuffering()})))}get inFlightFragments(){const e={[Hfe]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[Gfe]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[Wfe]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=null==e?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=function(){try{return crypto.randomUUID()}catch(e){try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(t){let e=(new Date).getTime();const r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)}));return r}}}()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return-1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){(function(e){return Age.indexOf(e)>-1})(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const r=e.length;for(let n=0;n<r;n++)if(e[n].maxBitrate>=t)return n;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:r}=this;let n;if(n=-1===t&&null!=e&&e.length?e.length-1:t,r)for(let i=n;i--;){const t=e[i].attrs["HDCP-LEVEL"];if(t&&t<=r)return i}return n}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return(null==(t=this.audioTrackController)?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return(null==(t=this.subtitleTrackController)?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!(null==(e=this.bufferController)||!e.bufferedToEnd)}get interstitialsManager(){var e;return(null==(e=this.interstitialsController)?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){return Ege(e,Fge(t),navigator.mediaCapabilities)}}KSe.defaultConfig=void 0;const HSe=({src:e,poster:t,autoPlay:r=!1})=>{const n=q.useRef(null),i=q.useRef(null),[s,a]=q.useState(!1),[o,l]=q.useState(r),[c,u]=q.useState(1),[d,h]=q.useState(!1),[f,p]=q.useState(!0),[g,m]=q.useState(!0);q.useState(!1);const y=q.useRef(null);q.useEffect((()=>{const t=n.current;if(!t)return;let i;return KSe.isSupported()?(i=new KSe({enableWorker:!0,lowLatencyMode:!0}),i.loadSource(e),i.attachMedia(t),i.on(KSe.Events.MANIFEST_PARSED,(()=>{p(!1),r&&t.play().catch((()=>{l(!0),t.muted=!0,t.play()}))})),i.on(KSe.Events.ERROR,((e,t)=>{if(t.fatal)switch(t.type){case KSe.ErrorTypes.NETWORK_ERROR:i.startLoad();break;case KSe.ErrorTypes.MEDIA_ERROR:i.recoverMediaError()}}))):t.canPlayType("application/vnd.apple.mpegurl")&&(t.src=e,t.addEventListener("loadedmetadata",(()=>{p(!1),r&&t.play()}))),()=>{i&&i.destroy()}}),[e,r]),q.useEffect((()=>{const e=n.current;if(!e)return;const t=()=>a(!0),r=()=>a(!1),i=()=>{u(e.volume),l(e.muted)},s=()=>p(!0),o=()=>p(!1);return e.addEventListener("play",t),e.addEventListener("pause",r),e.addEventListener("volumechange",i),e.addEventListener("waiting",s),e.addEventListener("playing",o),()=>{e.removeEventListener("play",t),e.removeEventListener("pause",r),e.removeEventListener("volumechange",i),e.removeEventListener("waiting",s),e.removeEventListener("playing",o)}}),[]);const v=()=>{n.current&&(s?n.current.pause():n.current.play())};return Z.jsxs("div",{ref:i,className:"relative group bg-black rounded-xl overflow-hidden aspect-[9/16] shadow-2xl ring-1 ring-white/10",onMouseMove:()=>{m(!0),y.current&&clearTimeout(y.current),y.current=setTimeout((()=>{s&&m(!1)}),3e3)},onMouseLeave:()=>s&&m(!1),children:[Z.jsx("video",{ref:n,className:"w-full h-full object-contain",poster:t,playsInline:!0,autoPlay:r,muted:o,onClick:v}),f&&Z.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-10",children:Z.jsx(Hp,{className:"w-12 h-12 text-amber-500 animate-spin"})}),!s&&!f&&Z.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10 cursor-pointer bg-black/20 hover:bg-black/30 transition-colors",onClick:v,children:Z.jsx("div",{className:"w-20 h-20 rounded-full bg-amber-500/90 flex items-center justify-center pl-2 shadow-lg transform transition-transform hover:scale-110",children:Z.jsx(lg,{className:"w-10 h-10 text-black fill-current"})})}),Z.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/90 via-black/60 to-transparent px-4 pb-4 pt-12 transition-opacity duration-300 z-20 "+(g?"opacity-100":"opacity-0"),children:Z.jsxs("div",{className:"flex items-center justify-between gap-4",children:[Z.jsxs("div",{className:"flex items-center gap-4",children:[Z.jsx("button",{onClick:v,className:"text-white hover:text-amber-400 transition-colors",children:s?Z.jsx(ng,{className:"w-6 h-6 fill-current"}):Z.jsx(lg,{className:"w-6 h-6 fill-current"})}),Z.jsxs("div",{className:"flex items-center gap-2 group/vol",children:[Z.jsx("button",{onClick:()=>{n.current&&(n.current.muted=!o)},className:"text-white hover:text-amber-400 transition-colors",children:o||0===c?Z.jsx(Dg,{className:"w-6 h-6"}):Z.jsx(Pg,{className:"w-6 h-6"})}),Z.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:o?0:c,onChange:e=>{const t=parseFloat(e.target.value);n.current&&(n.current.volume=t,n.current.muted=0===t)},className:"w-0 group-hover/vol:w-24 transition-all duration-300 h-1.5 bg-white/30 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-amber-500"})]}),Z.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 rounded bg-red-500/20 border border-red-500/30",children:[Z.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),Z.jsx("span",{className:"text-xs font-bold text-red-500 uppercase tracking-wider",children:"Live"})]})]}),Z.jsx("div",{className:"flex items-center gap-4",children:Z.jsx("button",{onClick:()=>{i.current&&(document.fullscreenElement?(document.exitFullscreen(),h(!1)):(i.current.requestFullscreen().catch((e=>{})),h(!0)))},className:"text-white hover:text-amber-400 transition-colors",children:d?Z.jsx(eg,{className:"w-6 h-6"}):Z.jsx(Xp,{className:"w-6 h-6"})})})]})})]})},GSe=()=>{const[e,t]=q.useState({}),[r,n]=q.useState(!1),[i,s]=q.useState(""),[a,o]=q.useState(null);q.useEffect((()=>{s("https://dosmundos.pe/hls/1.m3u8")}),[]),q.useEffect((()=>{const e=()=>{const e=new Date;let r=l(e);o(r);const i=GT(r,e);var s;(s=r,!(+UT(e)<+UT(s)))?(n(!0),t({status:"live"})):(t(c(i)),n(!1))},r=setInterval(e,1e3);return e(),()=>clearInterval(r)}),[]);const l=e=>{const t=new Date(e.getTime()+6e4*e.getTimezoneOffset()),r=new Date(t.getTime()+-18e6);let n=3-r.getUTCDay();(n<0||0===n&&r.getUTCHours()>9||0===n&&9===r.getUTCHours()&&r.getUTCMinutes()>=30)&&(n+=7);const i=new Date(r.getTime()+24*n*36e5);return new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),14,30,0,0))},c=e=>({status:"waiting",days:Math.floor(e/86400),hours:Math.floor(e%86400/3600),minutes:Math.floor(e%3600/60),seconds:e%60,totalSeconds:e});return Z.jsx("div",{className:"min-h-screen relative jungle-bg",children:Z.jsx("div",{className:"relative z-10",children:Z.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 space-y-8",children:[Z.jsxs("div",{className:"text-center space-y-4",children:[Z.jsxs("div",{className:"inline-flex items-center gap-3 px-6 py-3 rounded-full bg-gradient-to-r from-red-500/20 to-orange-500/20 text-red-400 border border-red-500/30 backdrop-blur-sm",children:[Z.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 animate-pulse"}),Z.jsx("span",{className:"text-sm font-bold uppercase tracking-wider",children:"Live Broadcast"}),Z.jsx(Lg,{className:"w-4 h-4"})]}),Z.jsxs("div",{className:"space-y-2",children:[Z.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-white via-slate-100 to-slate-300 bg-clip-text text-transparent",children:"  "}),Z.jsx("p",{className:"text-lg text-slate-300 max-w-2xl mx-auto",children:"       "})]})]}),Z.jsxs("div",{className:"space-y-8",children:[Z.jsx("div",{className:"bg-slate-900/50 rounded-3xl p-6 backdrop-blur-sm border border-white/10",children:Z.jsx("div",{className:"relative aspect-[9/16] bg-black rounded-2xl overflow-hidden shadow-2xl ring-1 ring-white/10 max-w-sm mx-auto",children:r?Z.jsx(HSe,{src:i,poster:"/images/live-poster.jpg",autoPlay:!0}):Z.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gradient-to-br from-slate-900/90 to-slate-800/90 backdrop-blur-sm",children:[Z.jsx("div",{className:"p-8 rounded-full bg-gradient-to-br from-amber-500/20 to-orange-500/20 mb-8 border border-amber-500/30",children:Z.jsx(Ep,{className:"w-16 h-16 text-amber-400"})}),Z.jsxs("div",{className:"text-center space-y-4",children:[Z.jsx("h3",{className:"text-3xl font-bold text-white",children:"  "}),Z.jsx("div",{className:"flex flex-wrap justify-center gap-4 text-center",children:"waiting"===e.status&&Z.jsxs(Z.Fragment,{children:[e.days>0&&Z.jsxs("div",{className:"bg-white/10 rounded-xl p-4 min-w-[80px]",children:[Z.jsx("div",{className:"text-3xl font-bold text-amber-400",children:e.days}),Z.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider",children:""})]}),Z.jsxs("div",{className:"bg-white/10 rounded-xl p-4 min-w-[80px]",children:[Z.jsx("div",{className:"text-3xl font-bold text-amber-400",children:String(e.hours).padStart(2,"0")}),Z.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider",children:""})]}),Z.jsxs("div",{className:"bg-white/10 rounded-xl p-4 min-w-[80px]",children:[Z.jsx("div",{className:"text-3xl font-bold text-amber-400",children:String(e.minutes).padStart(2,"0")}),Z.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider",children:""})]}),Z.jsxs("div",{className:"bg-white/10 rounded-xl p-4 min-w-[80px]",children:[Z.jsx("div",{className:"text-3xl font-bold text-amber-400",children:String(e.seconds).padStart(2,"0")}),Z.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider",children:""})]})]})}),Z.jsxs("div",{className:"text-slate-400 text-sm mt-4",children:["  ",a?a.toLocaleString("ru-RU"):"..."]})]})]})})}),Z.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[Z.jsxs("a",{href:"https://www.youtube.com/@DosMundosPeru/streams",target:"_blank",rel:"noreferrer",className:"flex items-center justify-center gap-3 px-8 py-4 rounded-2xl bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold transition-all transform hover:scale-105 shadow-lg",children:[Z.jsx(lg,{size:24,fill:"currentColor"}),Z.jsx("span",{children:"  YouTube"})]}),Z.jsxs("a",{href:"https://www.facebook.com/dosmundosperu",target:"_blank",rel:"noreferrer",className:"flex items-center justify-center gap-3 px-8 py-4 rounded-2xl bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold transition-all transform hover:scale-105 shadow-lg",children:[Z.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:Z.jsx("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"})}),Z.jsx("span",{children:"Facebook"})]})]}),Z.jsx("div",{className:"text-center",children:Z.jsxs("a",{href:"http://dosmundos.pe/episodes",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-white/10 hover:bg-white/20 text-white font-medium transition-all border border-white/20 backdrop-blur-sm",children:[Z.jsx(pp,{size:20}),Z.jsx("span",{children:" "})]})}),Z.jsxs("div",{className:"bg-slate-900/50 rounded-3xl p-6 backdrop-blur-sm border border-white/10",children:[Z.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Z.jsx(Mp,{className:"w-6 h-6 text-amber-400"}),Z.jsx("h3",{className:"text-2xl font-bold text-white",children:"    "})]}),Z.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(()=>{if(!a)return[];return[{city:"Lima",offset:-5,flag:""},{city:"New York",offset:-5,flag:""},{city:"Los Angeles",offset:-8,flag:""},{city:"Madrid",offset:1,flag:""},{city:"London",offset:0,flag:""},{city:"Moscow",offset:3,flag:""},{city:"Dubai",offset:4,flag:""},{city:"Bangkok",offset:7,flag:""},{city:"Tokyo",offset:9,flag:""}].map((({city:e,offset:t,flag:r})=>{const n=new Date(a.getTime()+36e5*t),i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][n.getUTCDay()];return{city:e,time:`${String(n.getUTCHours()).padStart(2,"0")}:${String(n.getUTCMinutes()).padStart(2,"0")}, ${i}`,flag:r}}))})().map((({city:e,time:t,flag:r})=>Z.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 transition-colors",children:[Z.jsxs("div",{className:"flex items-center gap-3",children:[Z.jsx("span",{className:"text-2xl",children:r}),Z.jsx("span",{className:"font-medium text-slate-200",children:e})]}),Z.jsx("span",{className:"font-mono text-amber-400 text-sm",children:t})]},e)))}),Z.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-amber-500/10 border border-amber-500/30",children:[Z.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Z.jsx(pp,{className:"w-5 h-5 text-amber-400"}),Z.jsx("span",{className:"font-semibold text-amber-400",children:""})]}),Z.jsxs("p",{className:"text-slate-300 text-sm leading-relaxed",children:["     ",Z.jsx("span",{className:"font-bold text-amber-400",children:"9:30 AM    (GMT-5)"}),".    ."]})]})]})]})]})})})},WSe={"    ":"bg-green-100 text-green-800 border-green-200","   ":"bg-purple-100 text-purple-800 border-purple-200","  ":"bg-pink-100 text-pink-800 border-pink-200"," ":"bg-indigo-100 text-indigo-800 border-indigo-200","  ":"bg-red-100 text-red-800 border-red-200","   ":"bg-orange-100 text-orange-800 border-orange-200","":"bg-blue-100 text-blue-800 border-blue-200",default:"bg-slate-100 text-slate-600 border-slate-200"},QSe=()=>{const{lang:e}=nh(),[t,r]=q.useState([]),[n,i]=q.useState(!0),[s,a]=q.useState("All"),[o,l]=q.useState(""),[c,u]=q.useState(12),d=q.useRef(),h=q.useCallback((e=>{n||(d.current&&d.current.disconnect(),d.current=new IntersectionObserver((e=>{e[0].isIntersecting&&u((e=>e+12))})),e&&d.current.observe(e))}),[n]);q.useEffect((()=>{(async()=>{i(!0);try{const{data:t,error:n}=await uS.from("articles_v2").select("\n            *,\n            article_translations(title, summary, content, language_code),\n            article_categories(\n              categories(\n                slug,\n                category_translations(name, language_code)\n              )\n            )\n          ").order("published_at",{ascending:!1});if(!n&&t){const n=t.map((t=>{const r=t.article_translations||[],n=r.find((t=>t.language_code===e))||r.find((e=>"ru"===e.language_code))||{},i=(t.article_categories||[]).map((t=>{var r,n;const i=(null==(r=t.categories)?void 0:r.category_translations)||[],s=i.find((t=>t.language_code===e))||i.find((e=>"ru"===e.language_code));return s?s.name:null==(n=t.categories)?void 0:n.slug})).filter(Boolean);return{slug:t.slug,title:{[e]:n.title},summary:{[e]:n.summary},content:{[e]:n.content},categories:i,author:t.author,youtube_url:t.youtube_url,published_at:t.published_at}}));return r(n),void i(!1)}const{data:s,error:a}=await uS.from("articles").select("*").order("created_at",{ascending:!1});if(a)throw a;s&&r(s)}catch(t){try{const t=await fetch("/articles/index.json");if(t.ok){const n=await t.json();r(n.map((t=>({slug:t.id,title:{[e]:t.title,ru:t.title},summary:{[e]:t.summary,ru:t.summary},categories:t.categories,author:t.author,youtube_url:t.youtubeUrl}))))}}catch(Jce){}}finally{i(!1)}})()}),[e]);const f=q.useMemo((()=>t.map((t=>{var r,n,i,s,a,o,l,c,u;return{id:t.slug,title:(null==(r=t.title)?void 0:r[e])||(null==(n=t.title)?void 0:n.ru)||(null==(i=t.title)?void 0:i.en)||"",summary:(null==(s=t.summary)?void 0:s[e])||(null==(a=t.summary)?void 0:a.ru)||(null==(o=t.summary)?void 0:o.en)||"",content:(null==(l=t.content)?void 0:l[e])||(null==(c=t.content)?void 0:c.ru)||(null==(u=t.content)?void 0:u.en)||"",categories:t.categories||[],author:t.author,youtubeUrl:t.youtube_url,publishedAt:t.published_at}}))),[t,e]),p=q.useMemo((()=>{const e=new Set;return f.forEach((t=>{Array.isArray(t.categories)?t.categories.forEach((t=>e.add(t))):t.category&&e.add(t.category)})),["All",...Array.from(e).sort()]}),[f]),g=q.useMemo((()=>{let e=f;if("All"!==s&&(e=e.filter((e=>(Array.isArray(e.categories)?e.categories:e.category?[e.category]:[]).includes(s)))),o.trim()){const t=o.toLowerCase();e=e.filter((e=>e.title.toLowerCase().includes(t)||e.summary&&e.summary.toLowerCase().includes(t)))}return e}),[f,s,o]);return Z.jsx("div",{className:"min-h-screen bg-[#fdfbf7] text-slate-900 font-serif",children:Z.jsxs("div",{className:"container mx-auto px-4 py-12",children:[Z.jsxs("div",{className:"flex flex-col items-center mb-12 text-center",children:[Z.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-4 tracking-tight",children:iy("blog_title",e)}),Z.jsx("p",{className:"text-slate-600 max-w-2xl text-lg italic",children:iy("blog_subtitle",e)})]}),Z.jsx("div",{className:"max-w-md mx-auto mb-8 relative",children:Z.jsxs("div",{className:"relative",children:[Z.jsx(mg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),Z.jsx("input",{type:"text",placeholder:iy("search_articles_placeholder",e),value:o,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 rounded-full border border-slate-200 focus:outline-none focus:border-slate-400 focus:ring-2 focus:ring-slate-100 transition-all font-sans"})]})}),!n&&p.length>1&&Z.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-12 font-sans",children:p.map((t=>Z.jsx("button",{onClick:()=>a(t),className:"px-4 py-2 rounded-full text-sm transition-all duration-300 border "+(s===t?"bg-slate-900 text-white border-slate-900 shadow-md scale-105":"bg-white text-slate-600 border-slate-200 hover:border-slate-400 hover:text-slate-900"),children:"All"===t?iy("all_categories",e):t},t)))}),n?Z.jsx("div",{className:"flex justify-center py-20",children:Z.jsx(Hp,{className:"h-12 w-12 animate-spin text-slate-900"})}):Z.jsxs(Z.Fragment,{children:[Z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:g.slice(0,c).map(((t,r)=>{const n=r===c-1;return Z.jsx("div",{ref:n?h:null,className:"h-full",children:Z.jsx(Ah,{to:`/${e}/articles/${t.id}`,className:"group h-full block",children:Z.jsxs(OT,{className:"h-full bg-white border-slate-200 text-slate-900 overflow-hidden transition-all duration-500 hover:shadow-xl hover:shadow-slate-200/50 hover:-translate-y-1 group-hover:border-slate-300 flex flex-col",children:[Z.jsxs(NT,{className:"pb-4",children:[Z.jsxs("div",{className:"flex justify-between items-start mb-3",children:[Z.jsx("div",{className:"flex flex-wrap gap-1",children:(Array.isArray(t.categories)?t.categories:t.category?[t.category]:[]).map(((e,t)=>{return Z.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium tracking-wide uppercase border font-sans ${r=e,WSe[r]||WSe.default}`,children:e},t);var r}))}),t.youtubeUrl&&Z.jsx(jg,{className:"w-5 h-5 text-red-600 opacity-80"})]}),Z.jsx(jT,{className:"text-2xl font-bold leading-tight group-hover:text-purple-700 transition-colors",children:t.title})]}),Z.jsxs(MT,{className:"flex-grow flex flex-col",children:[Z.jsx(LT,{className:"text-slate-600 text-base leading-relaxed line-clamp-3 mb-6 flex-grow",children:t.summary}),Z.jsxs("div",{className:"space-y-3 mt-auto",children:[Z.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 font-sans",children:[t.publishedAt&&Z.jsxs("div",{className:"flex items-center gap-1.5",children:[Z.jsx(pp,{className:"w-3.5 h-3.5"}),Z.jsx("span",{children:_m(t.publishedAt,e)})]}),t.content&&Z.jsxs("div",{className:"flex items-center gap-1.5",children:[Z.jsx(Ep,{className:"w-3.5 h-3.5"}),Z.jsx("span",{children:sy("reading_time_minutes",e,Am(t.content,e),{count:Am(t.content,e)})})]})]}),Z.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-slate-100",children:[Z.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 uppercase tracking-wider font-medium",children:[Z.jsx(Ag,{className:"w-3 h-3"}),t.author]}),Z.jsxs("span",{className:"flex items-center gap-2 text-sm text-purple-700 font-medium group-hover:translate-x-1 transition-transform italic font-serif",children:[iy("read_article",e),Z.jsx(hp,{className:"w-4 h-4"})]})]})]})]})]})})},t.id)}))}),c<g.length&&Z.jsx("div",{className:"flex justify-center py-8",children:Z.jsx(Hp,{className:"h-8 w-8 animate-spin text-slate-400"})})]})]})})},YSe={"    ":"bg-green-100 text-green-800 border-green-200","   ":"bg-purple-100 text-purple-800 border-purple-200","  ":"bg-pink-100 text-pink-800 border-pink-200"," ":"bg-indigo-100 text-indigo-800 border-indigo-200","  ":"bg-red-100 text-red-800 border-red-200","   ":"bg-orange-100 text-orange-800 border-orange-200","":"bg-blue-100 text-blue-800 border-blue-200",default:"bg-slate-100 text-slate-600 border-slate-200"},XSe=()=>{const{lang:e,articleId:t}=nh(),r=rh(),[n,i]=q.useState(null),[s,a]=q.useState(""),[o,l]=q.useState(!0);return q.useEffect((()=>{(async()=>{try{const{data:n,error:s}=await uS.from("articles_v2").select("\n            *,\n            article_translations(title, summary, content, language_code),\n            article_categories(\n              categories(\n                slug,\n                category_translations(name, language_code)\n              )\n            )\n          ").eq("slug",t).single();if(!s&&n){const t=n.article_translations||[],r=t.find((t=>t.language_code===e))||t.find((e=>"ru"===e.language_code))||{},s=(n.article_categories||[]).map((t=>{var r,n;const i=(null==(r=t.categories)?void 0:r.category_translations)||[],s=i.find((t=>t.language_code===e))||i.find((e=>"ru"===e.language_code));return s?s.name:null==(n=t.categories)?void 0:n.slug})).filter(Boolean);i({id:n.slug,title:r.title,summary:r.summary,categories:s,author:n.author,youtubeUrl:n.youtube_url,publishedAt:n.published_at});const o=r.content||"";if(o.includes("<html")||o.includes("<body")){const e=(new DOMParser).parseFromString(o,"text/html");a(e.body.innerHTML)}else a(o);return void l(!1)}const{data:o,error:c}=await uS.from("articles").select("*").eq("slug",t).single();if(c||!o){try{const e=await fetch("/articles/index.json");if(!e.ok)throw new Error("Failed to fetch index");const r=(await e.json()).find((e=>e.id===t));if(r){i(r);const e=await fetch(r.contentUrl);if(e.ok){const t=await e.text(),r=(new DOMParser).parseFromString(t,"text/html");a(r.body.innerHTML)}return void l(!1)}}catch(Jce){}return void r(`/${e}/articles`)}const u={id:o.slug,title:o.title[e]||o.title.ru||o.title.en,summary:o.summary[e]||o.summary.ru||o.summary.en,categories:o.categories||[],author:o.author,youtubeUrl:o.youtube_url};i(u);const d=o.content[e]||o.content.ru||o.content.en||"";if(d.includes("<html")||d.includes("<body")){const e=(new DOMParser).parseFromString(d,"text/html");a(e.body.innerHTML)}else a(d)}catch(n){r(`/${e}/articles`)}finally{l(!1)}})()}),[e,t,r]),o?Z.jsx("div",{className:"min-h-screen flex items-center justify-center text-slate-900 bg-[#fdfbf7]",children:Z.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-slate-900"})}):n?Z.jsx("div",{className:"min-h-screen bg-[#fdfbf7] text-slate-900 font-serif",children:Z.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-3xl",children:[Z.jsx(Ah,{to:`/${e}/articles`,children:Z.jsxs(AT,{variant:"ghost",className:"text-slate-500 mb-8 gap-2 pl-0 hover:text-slate-900 hover:bg-transparent transition-colors group font-sans",children:[Z.jsx(dp,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),iy("back_to_articles",e)]})}),Z.jsxs("article",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700",children:[Z.jsxs("header",{className:"mb-10 text-center",children:[Z.jsx("div",{className:"flex justify-center flex-wrap gap-2 mb-6",children:(Array.isArray(n.categories)?n.categories:n.category?[n.category]:[]).map(((e,t)=>{return Z.jsx("span",{className:`px-3 py-1.5 rounded-full text-sm font-sans font-medium tracking-wide uppercase border ${r=e,YSe[r]||YSe.default}`,children:e},t);var r}))}),Z.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-slate-900 mb-8 leading-tight",children:n.title}),Z.jsxs("div",{className:"flex flex-wrap md:flex-nowrap items-center justify-center gap-4 md:gap-4 text-slate-500 text-sm uppercase tracking-wider font-medium border-y border-slate-200 py-4 font-sans",children:[Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx(Ag,{className:"w-4 h-4"}),n.author]}),n.publishedAt&&Z.jsxs(Z.Fragment,{children:[Z.jsx("span",{className:"hidden md:inline text-slate-300",children:""}),Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx(pp,{className:"w-4 h-4"}),Z.jsx("span",{className:"normal-case",children:_m(n.publishedAt,e)})]})]}),s&&Z.jsxs(Z.Fragment,{children:[Z.jsx("span",{className:"hidden md:inline text-slate-300",children:""}),Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx(Ep,{className:"w-4 h-4"}),Z.jsx("span",{className:"normal-case",children:sy("reading_time_minutes",e,Am(s,e),{count:Am(s,e)})})]})]}),n.youtubeUrl&&Z.jsxs(Z.Fragment,{children:[Z.jsx("span",{className:"hidden md:inline text-slate-300",children:""}),Z.jsxs("a",{href:n.youtubeUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:text-red-600 transition-colors group/yt",children:[Z.jsx(jg,{className:"w-4 h-4 group-hover/yt:text-red-600"}),Z.jsx("span",{className:"normal-case border-b border-transparent group-hover/yt:border-red-600",children:iy("watch_on_youtube",e)})]})]})]})]}),Z.jsx("div",{className:"prose prose-xl max-w-none text-justify\n              prose-headings:font-serif prose-headings:text-slate-900 prose-headings:font-bold\n              prose-p:text-slate-800 prose-p:leading-loose prose-p:font-serif prose-p:indent-8 prose-p:mb-4\n              prose-a:text-purple-700 prose-a:no-underline hover:prose-a:text-purple-900 hover:prose-a:underline\n              prose-strong:text-slate-900 prose-strong:font-semibold\n              prose-ul:text-slate-800 prose-ol:text-slate-800\n              prose-blockquote:border-l-slate-900 prose-blockquote:bg-slate-50 prose-blockquote:py-2 prose-blockquote:px-6 prose-blockquote:rounded-r-lg prose-blockquote:not-italic prose-blockquote:text-slate-700",dangerouslySetInnerHTML:{__html:s}})]})]})}):null};var JSe={},ZSe={},eEe={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;"undefined"!=typeof window&&(void 0===window.gtag&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(n=window).gtag.apply(n,t))};e.default=t}(eEe);var tEe={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=e||"";n&&(s=e.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,(function(e,r,n){return r>0&&r+e.length!==n.length&&e.search(t)>-1&&":"!==n.charAt(r-2)&&("-"!==n.charAt(r+e.length)||"-"===n.charAt(r-1))&&n.charAt(r-1).search(/[^\s-]/)<0?e.toLowerCase():e.substr(1).search(/[A-Z]|\../)>-1?e:e.charAt(0).toUpperCase()+e.substr(1)})));i&&(s=function(e){if(function(e){return"string"==typeof e&&-1!==e.indexOf("@")}(e))return r;return e}(s));return s};var t=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;var r="REDACTED (Potential Email Address)"}(tEe),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.GA4=void 0;var t=a(eEe),r=a(tEe),n=["eventCategory","eventAction","eventLabel","eventValue","hitType"],i=["title","location"],s=["page","hitType"];function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(mEe){c=!0,i=mEe}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function m(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}var v=function(){function e(){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"reset",(function(){a.isInitialized=!1,a._testMode=!1,a._currentMeasurementId,a._hasLoadedGA=!1,a._isQueuing=!1,a._queueGtag=[]})),m(this,"_gtag",(function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];a._testMode||a._isQueuing?a._queueGtag.push(r):t.default.apply(void 0,r)})),m(this,"_loadGA",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://www.googletagmanager.com/gtag/js";if("undefined"!=typeof window&&"undefined"!=typeof document&&!a._hasLoadedGA){var n=document.createElement("script");n.async=!0,n.src="".concat(r,"?id=").concat(e),t&&n.setAttribute("nonce",t),document.body.appendChild(n),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},a._hasLoadedGA=!0}})),m(this,"_toGtagOptions",(function(e){if(e){var t={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"};return Object.entries(e).reduce((function(e,r){var n=h(r,2),i=n[0],s=n[1];return t[i]?e[t[i]]=s:e[i]=s,e}),{})}})),m(this,"initialize",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Require GA_MEASUREMENT_ID");var r="string"==typeof e?[{trackingId:e}]:e;a._currentMeasurementId=r[0].trackingId;var n=t.gaOptions,i=t.gtagOptions,s=t.nonce,o=t.testMode,l=void 0!==o&&o,u=t.gtagUrl;if(a._testMode=l,l||a._loadGA(a._currentMeasurementId,s,u),a.isInitialized||(a._gtag("js",new Date),r.forEach((function(e){var t=d(d(d({},a._toGtagOptions(d(d({},n),e.gaOptions))),i),e.gtagOptions);Object.keys(t).length?a._gtag("config",e.trackingId,t):a._gtag("config",e.trackingId)}))),a.isInitialized=!0,!l){var h=c(a._queueGtag);for(a._queueGtag=[],a._isQueuing=!1;h.length;){var f=h.shift();a._gtag.apply(a,c(f)),"get"===f[0]&&(a._isQueuing=!0)}}})),m(this,"set",(function(e){e&&"object"===l(e)&&(Object.keys(e).length,a._gaCommand("set",e))})),m(this,"_gaCommandSendEvent",(function(e,t,r,n,i){a._gtag("event",t,d(d({event_category:e,event_label:r,value:n},i&&{non_interaction:i.nonInteraction}),a._toGtagOptions(i)))})),m(this,"_gaCommandSendEventParameters",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if("string"==typeof t[0])a._gaCommandSendEvent.apply(a,c(t.slice(1)));else{var i=t[0],s=i.eventCategory,l=i.eventAction,u=i.eventLabel,d=i.eventValue;i.hitType;var h=o(i,n);a._gaCommandSendEvent(s,l,u,d,h)}})),m(this,"_gaCommandSendTiming",(function(e,t,r,n){a._gtag("event","timing_complete",{name:t,value:r,event_category:e,event_label:n})})),m(this,"_gaCommandSendPageview",(function(e,t){if(t&&Object.keys(t).length){var r=a._toGtagOptions(t),n=r.title,s=r.location,l=o(r,i);a._gtag("event","page_view",d(d(d(d({},e&&{page_path:e}),n&&{page_title:n}),s&&{page_location:s}),l))}else e?a._gtag("event","page_view",{page_path:e}):a._gtag("event","page_view")})),m(this,"_gaCommandSendPageviewParameters",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if("string"==typeof t[0])a._gaCommandSendPageview.apply(a,c(t.slice(1)));else{var n=t[0],i=n.page;n.hitType;var l=o(n,s);a._gaCommandSendPageview(i,l)}})),m(this,"_gaCommandSend",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];switch("string"==typeof t[0]?t[0]:t[0].hitType){case"event":a._gaCommandSendEventParameters.apply(a,t);break;case"pageview":a._gaCommandSendPageviewParameters.apply(a,t);break;case"timing":a._gaCommandSendTiming.apply(a,c(t.slice(1)))}})),m(this,"_gaCommandSet",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];"string"==typeof t[0]&&(t[0]=m({},t[0],t[1])),a._gtag("set",a._toGtagOptions(t[0]))})),m(this,"_gaCommand",(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];switch(e){case"send":a._gaCommandSend.apply(a,r);break;case"set":a._gaCommandSet.apply(a,r)}})),m(this,"ga",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if("string"==typeof t[0])a._gaCommand.apply(a,t);else{var n=t[0];a._gtag("get",a._currentMeasurementId,"client_id",(function(e){a._isQueuing=!1;var t=a._queueGtag;for(n({get:function(t){return"clientId"===t?e:"trackingId"===t?a._currentMeasurementId:"apiVersion"===t?"1":void 0}});t.length;){var r=t.shift();a._gtag.apply(a,c(r))}})),a._isQueuing=!0}return a.ga})),m(this,"event",(function(e,t){if("string"==typeof e)a._gtag("event",e,a._toGtagOptions(t));else{var n=e.action,i=e.category,s=e.label,o=e.value,l=e.nonInteraction,c=e.transport;if(!i||!n)return;var u={hitType:"event",eventCategory:(0,r.default)(i),eventAction:(0,r.default)(n)};s&&(u.eventLabel=(0,r.default)(s)),void 0!==o&&("number"!=typeof o||(u.eventValue=o)),void 0!==l&&("boolean"!=typeof l||(u.nonInteraction=l)),void 0!==c&&("string"!=typeof c||(["beacon","xhr","image"].indexOf(c),u.transport=c)),a._gaCommand("send",u)}})),m(this,"send",(function(e){a._gaCommand("send",e)})),this.reset()}var a,u,f;return a=e,u=[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}],u&&g(a.prototype,u),f&&g(a,f),Object.defineProperty(a,"prototype",{writable:!1}),e}();e.GA4=v;var b=new v;e.default=b}(ZSe),function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ReactGAImplementation=void 0;var r=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var i=n(r);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(s,o,l):s[o]=e[o]}s.default=e,i&&i.set(e,s);return s}(ZSe);function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}var i=r.GA4;e.ReactGAImplementation=i;var s=r.default;e.default=s}(JSe);const rEe=n(JSe),nEe={}.VITE_GA4_MEASUREMENT_ID,iEe=!1;let sEe=!1;const aEe=()=>{const{audioRef:e,isPlaying:t,currentTime:r,duration:n,currentEpisode:i,togglePlay:s}=Ym(),[a,o]=q.useState({readyState:0,networkState:0,error:null,src:"",paused:!0,muted:!1,volume:1}),[l,c]=q.useState(null);q.useEffect((()=>{const t=e.current;if(!t)return;const r=()=>{o({readyState:t.readyState,networkState:t.networkState,error:t.error,src:t.currentSrc||t.src,paused:t.paused,muted:t.muted,volume:t.volume})},n=["loadstart","progress","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","play","pause","ratechange","volumechange"];return n.forEach((e=>t.addEventListener(e,r))),r(),()=>{n.forEach((e=>t.removeEventListener(e,r)))}}),[e]);return i?Z.jsxs(OT,{className:"fixed bottom-20 right-4 w-96 max-h-[80vh] overflow-y-auto z-50 bg-slate-900/95 border-slate-700 text-xs shadow-xl",children:[Z.jsxs(NT,{className:"py-2 px-4 border-b border-slate-700 flex flex-row items-center justify-between",children:[Z.jsx(jT,{className:"text-sm font-mono text-slate-200",children:"Player Diagnostics"}),Z.jsx(AT,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{},children:""})]}),Z.jsxs(MT,{className:"p-4 space-y-4",children:[Z.jsxs("div",{className:"space-y-1",children:[Z.jsx("h3",{className:"font-bold text-blue-400",children:"Context State"}),Z.jsxs("div",{className:"grid grid-cols-2 gap-x-2 gap-y-1 text-slate-300",children:[Z.jsx("span",{children:"Is Playing:"}),Z.jsx("span",{className:t?"text-green-400":"text-yellow-400",children:String(t)}),Z.jsx("span",{children:"Current Time:"}),Z.jsxs("span",{children:[r.toFixed(3),"s"]}),Z.jsx("span",{children:"Duration:"}),Z.jsxs("span",{children:[n.toFixed(3),"s"]}),Z.jsx("span",{children:"Episode:"}),Z.jsx("span",{className:"truncate",title:i.slug,children:i.slug})]})]}),Z.jsxs("div",{className:"space-y-1",children:[Z.jsx("h3",{className:"font-bold text-purple-400",children:"Audio Element State"}),Z.jsxs("div",{className:"grid grid-cols-1 gap-y-1 text-slate-300",children:[Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{children:"Ready State:"}),Z.jsx("span",{className:"font-mono",children:(u=a.readyState,`${u} (${{0:"HAVE_NOTHING",1:"HAVE_METADATA",2:"HAVE_CURRENT_DATA",3:"HAVE_FUTURE_DATA",4:"HAVE_ENOUGH_DATA"}[u]||"UNKNOWN"})`)})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{children:"Network State:"}),Z.jsx("span",{className:"font-mono",children:(e=>`${e} (${{0:"NETWORK_EMPTY",1:"NETWORK_IDLE",2:"NETWORK_LOADING",3:"NETWORK_NO_SOURCE"}[e]||"UNKNOWN"})`)(a.networkState)})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{children:"Paused:"}),Z.jsx("span",{className:"font-mono",children:String(a.paused)})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{children:"Muted:"}),Z.jsx("span",{className:"font-mono",children:String(a.muted)})]}),Z.jsxs("div",{className:"flex flex-col",children:[Z.jsx("span",{children:"Error:"}),Z.jsx("span",{className:"font-mono text-red-400",children:(e=>{if(!e)return"None";return`${e.code} (${{1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"}[e.code]||"UNKNOWN"}): ${e.message}`})(a.error)})]}),Z.jsxs("div",{className:"flex flex-col",children:[Z.jsx("span",{children:"Source:"}),Z.jsx("a",{href:a.src,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline truncate text-[10px]",children:a.src})]})]})]}),Z.jsxs("div",{className:"space-y-2",children:[Z.jsx("h3",{className:"font-bold text-green-400",children:"Actions"}),Z.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Z.jsx(AT,{size:"sm",variant:"outline",onClick:s,children:t?"Pause":"Play"}),Z.jsx(AT,{size:"sm",variant:"outline",onClick:()=>{var t;return null==(t=e.current)?void 0:t.load()},children:"Force Reload"}),Z.jsx(AT,{size:"sm",variant:"outline",onClick:async()=>{if(a.src)try{c({status:"loading",message:"Checking..."});const e=await fetch(a.src,{method:"HEAD"});c({status:e.ok?"success":"error",message:`Status: ${e.status} ${e.statusText}`,headers:{"content-type":e.headers.get("content-type"),"content-length":e.headers.get("content-length"),"accept-ranges":e.headers.get("accept-ranges")}})}catch(e){c({status:"error",message:e.message})}else c({status:"error",message:"No source URL"})},children:"Check URL"}),Z.jsx(AT,{size:"sm",variant:"outline",onClick:()=>{},children:"Log to Console"})]})]}),l&&Z.jsxs("div",{className:"p-2 rounded border "+("success"===l.status?"bg-green-900/20 border-green-800":"bg-red-900/20 border-red-800"),children:[Z.jsx("div",{className:"font-bold mb-1",children:l.message}),l.headers&&Z.jsx("pre",{className:"text-[10px] overflow-x-auto",children:JSON.stringify(l.headers,null,2)})]})]})]}):null;var u},oEe=["ru","es","en","de","fr","pl"],lEe=()=>{const e=eh(),t=rh();return q.useEffect((()=>{const r=localStorage.getItem("podcastLang")||"ru",n=e.pathname;if(oEe.some((e=>n.startsWith(`/${e}/`))))return;t("/"===n?`/${r}/episodes`:`/${r}${n}`,{replace:!0})}),[e,t]),null},cEe=()=>{const e=eh();return q.useEffect((()=>{const t=document.title;((e,t)=>{if(sEe)try{rEe.send({hitType:"pageview",page:e,title:t})}catch(r){}})(e.pathname,t)}),[e]),null},uEe=()=>{const{episodeSlug:e}=nh(),t=eh(),r=localStorage.getItem("podcastLang")||"ru";return Z.jsx(ph,{to:`/${r}/${e}${t.search}${t.hash}`,replace:!0})},dEe=()=>{const{lang:e,episodeSlug:t}=nh(),r=eh();return Z.jsx(ph,{to:`/${e}/${t}${r.search}${r.hash}`,replace:!0})},hEe=({children:e})=>{const{lang:t}=nh(),r=eh(),n=rh(),i=oEe.includes(t)?t:"ru";return q.useEffect((()=>{if(t&&!oEe.includes(t)){const e=r.pathname.replace(/^\/[^/]+/,"")||"/episodes";n(`/ru${e}`,{replace:!0})}}),[t,r,n]),q.useEffect((()=>{i&&localStorage.setItem("podcastLang",i)}),[i]),V.cloneElement(e,{currentLanguage:i})},fEe=({user:e})=>{const t=eh(),{showAuthModal:r,closeAuthModal:n}=pS(),i="true"===new URLSearchParams(t.search).get("debug"),s=t.pathname.split("/")[1],a=oEe.includes(s)?s:"ru";return Z.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white flex flex-col",children:[i&&Z.jsx(aEe,{}),Z.jsx(lEe,{}),Z.jsx(cEe,{}),Z.jsx(Gm,{podcastData:{title:"Dos Mundos",author:"EL CENTRO DESARROLLO INTEGRAL",image:"/img/logo-5-120x120.png"},currentLanguage:a}),Z.jsxs("main",{className:"flex-grow w-full",children:[Z.jsx(ay,{currentLanguage:a}),Z.jsxs(yh,{children:[Z.jsx(gh,{path:"/",element:Z.jsx(ph,{to:"/ru/episodes",replace:!0})}),Z.jsx(gh,{path:"/episodes",element:Z.jsx(ph,{to:"/ru/episodes",replace:!0})}),Z.jsx(gh,{path:"/deep-search",element:Z.jsx(ph,{to:"/ru/deep-search",replace:!0})}),Z.jsx(gh,{path:"/edit",element:Z.jsx(ph,{to:"/ru/edit",replace:!0})}),Z.jsx(gh,{path:"/analytics",element:Z.jsx(ph,{to:"/ru/analytics",replace:!0})}),Z.jsx(gh,{path:"/offline-settings",element:Z.jsx(ph,{to:"/ru/offline-settings",replace:!0})}),Z.jsx(gh,{path:"/about",element:Z.jsx(ph,{to:"/ru/about",replace:!0})}),Z.jsx(gh,{path:"/festival",element:Z.jsx(ph,{to:"/ru/festival",replace:!0})}),Z.jsx(gh,{path:"/volunteers",element:Z.jsx(ph,{to:"/ru/volunteers",replace:!0})}),Z.jsx(gh,{path:"/episode/:episodeSlug",element:Z.jsx(uEe,{})}),Z.jsx(gh,{path:"/:lang",element:Z.jsx(ph,{to:"episodes",replace:!0})}),Z.jsx(gh,{path:"/:lang/live",element:Z.jsx(hEe,{children:Z.jsx(GSe,{})})}),Z.jsx(gh,{path:"/:lang/about",element:Z.jsx(hEe,{children:Z.jsx(_fe,{})})}),Z.jsx(gh,{path:"/:lang/festival",element:Z.jsx(hEe,{children:Z.jsx(Cfe,{})})}),Z.jsx(gh,{path:"/:lang/events",element:Z.jsx(hEe,{children:Z.jsx(Pfe,{})})}),Z.jsx(gh,{path:"/:lang/new-year",element:Z.jsx(hEe,{children:Z.jsx(Dfe,{})})}),Z.jsx(gh,{path:"/:lang/volunteers",element:Z.jsx(hEe,{children:Z.jsx(Ife,{})})}),Z.jsx(gh,{path:"/:lang/episodes",element:Z.jsx(hEe,{children:Z.jsx(bk,{})})}),Z.jsx(gh,{path:"/:lang/episode/:episodeSlug",element:Z.jsx(dEe,{})}),Z.jsx(gh,{path:"/:lang/deep-search",element:Z.jsx(hEe,{children:Z.jsx(AG,{})})}),Z.jsx(gh,{path:"/:lang/edit",element:Z.jsx(hEe,{children:Z.jsx(jfe,{})})}),Z.jsx(gh,{path:"/:lang/analytics",element:Z.jsx(Afe,{})}),Z.jsx(gh,{path:"/:lang/offline-settings",element:Z.jsx(hEe,{children:Z.jsx(CW,{onBack:()=>window.history.back()})})}),Z.jsx(gh,{path:"/:lang/articles",element:Z.jsx(hEe,{children:Z.jsx(QSe,{})})}),Z.jsx(gh,{path:"/:lang/articles/:articleId",element:Z.jsx(hEe,{children:Z.jsx(XSe,{})})}),Z.jsx(gh,{path:"/:lang/:episodeSlug",element:Z.jsx(hEe,{children:Z.jsx(qF,{user:e})})}),Z.jsx(gh,{path:"*",element:Z.jsx(hEe,{children:Z.jsx(VF,{})})})]})]}),Z.jsx(ok,{currentLanguage:a}),Z.jsx(IT,{isOpen:r,onClose:n,currentLanguage:a}),Z.jsx(Um,{})]})},pEe=({user:e})=>Z.jsx(Hj,{children:Z.jsx(Eh,{children:Z.jsx(fEe,{user:e})})});function gEe(){const[e,t]=q.useState((()=>{if(localStorage.getItem("podcastLang"))return!1;const e=window.location.pathname;return!oEe.some((t=>e.startsWith(`/${t}/`)||e===`/${t}`))})),[r,n]=q.useState(!0),[i,s]=q.useState(null),[a,o]=q.useState(!1),{toast:l}=Fm(),c=localStorage.getItem("podcastLang")||"ru";q.useEffect((()=>{(()=>{if(!nEe||"G-XXXXXXXXXX"===nEe)return!1;if(sEe)return!0;try{return rEe.initialize(nEe,{testMode:iEe,gaOptions:{debug_mode:iEe,send_page_view:!1}}),sEe=!0,!0}catch(e){return!1}})()}),[]),q.useEffect((()=>{(async()=>{try{await Nfe.init(),o(!0)}catch(e){o(!0)}})()}),[c,l]),q.useEffect((()=>{(async()=>{const{data:{session:e}}=await uS.auth.getSession(),t=(null==e?void 0:e.user)??null;s(t),n(!1)})();const{data:e}=uS.auth.onAuthStateChange(((e,t)=>{const r=(null==t?void 0:t.user)??null;s(r)}));return()=>{e.subscription.unsubscribe()}}),[]);const u=q.useCallback((e=>{localStorage.setItem("podcastLang",e),t(!1);const r=window.location.pathname.replace(/^\/(ru|es|en|de|fr|pl)/,"")||"/episodes";window.location.href=`/${e}${r}`}),[]);return r?Z.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white flex items-center justify-center",children:Z.jsx("p",{children:iy("loading",c)})}):e?Z.jsx(uk,{children:Z.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white flex flex-col",children:[Z.jsx(lk,{onLanguageSelect:u,currentLanguage:c}),Z.jsx(Um,{})]})}):Z.jsx(uk,{children:Z.jsx(fS,{children:Z.jsx(Xm,{children:Z.jsx(pEe,{user:i})})})})}"serviceWorker"in navigator&&(window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sw.js").then((e=>{e.addEventListener("updatefound",(()=>{const t=e.installing;t&&t.addEventListener("statechange",(()=>{"installed"===t.state&&navigator.serviceWorker.controller}))}))})).catch((e=>{}))})),window.addEventListener("online",(()=>{try{navigator.serviceWorker&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"SYNC_OFFLINE_REQUESTS"})}catch(Jce){}})),navigator.serviceWorker.addEventListener("message",(e=>{e.data}))),ee.createRoot(document.getElementById("root")).render(Z.jsx(V.StrictMode,{children:Z.jsx(gEe,{})}));export{xk as _,iS as c,VO as l};
